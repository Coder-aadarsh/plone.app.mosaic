{"version":3,"file":"chunks/47575.947614e285378fd0a295.min.js","mappings":"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QE,EAAID,EAAKC,IAAK,CAC7C,IAAIlB,EAAIsB,EAAGJ,GACXqG,EAAE/G,OAAOR,IAAMU,EAAEV,EAAGkB,EACtB,CACA,OAAOqG,CACT,CAojF+BurB,CAAYxd,EAAO1Q,GACvCwF,GAAMyoB,EAAQtyB,GAAK8W,GAC5B,CACF,EACI0b,GAAYH,GA/BD,CACb,KACA,KACA,KACA,KACA,KACA,OA0BEI,GAAYJ,GArHH,CACX,UACA,QACA,UACA,MACA,KACA,aACA,SACA,OACA,WACA,SACA,SACA,OACA,OACA,MACA,UACA,UACA,OACA,IACA,KACA,WACA,KACA,SACA,UACA,SACA,aACA,KACA,KACA,KACA,KACA,KACA,KACA,UACA,MACA,MACA,YACA,OACA,MACA,KACA,KACA,KACA,KACA,QACA,QACA,QACA,QACA,KACA,KACA,KACA,YAwEEK,GAAa,SAAU5b,GACzB,OAAOiD,GAAYjD,KAAU2b,GAAU3b,EACzC,EACI6b,GAAS,SAAU7b,GACrB,OAAOiD,GAAYjD,IAAwB,OAAf9W,GAAK8W,EACnC,EACI8b,GAAgBP,GAnEH,CACf,KACA,KACA,KACA,KACA,KACA,KACA,IACA,MACA,UACA,MACA,OACA,aACA,SACA,MACA,WACA,SACA,SACA,UACA,UACA,SACA,QACA,MACA,WA6CEQ,GAASR,GA9BD,CACV,KACA,KACA,OA4BES,GAAaT,GApCC,CAChB,KACA,KACA,OAkCEU,GAAiBV,GA3ED,CAClB,QACA,QACA,UAyEEW,GAAgBX,GAhFH,CACf,KACA,OA+EEY,GAAsBZ,GA7BT,CACf,MACA,SACA,WACA,UAgCEa,GAAO,IAQPC,GATY,SAUZC,GARW,SAAUC,GACvB,MAHc,WAGPA,CACT,EAOIC,GANa,SAAUltB,GACzB,OAAOA,EAAE0G,QAAQ,UAAW,GAC9B,EAMIymB,GAAczT,GACd0T,GAAW1S,GACX2S,GAA0B,SAAU3c,GAItC,OAHI0c,GAAS1c,KACXA,EAAOA,EAAK0D,YAEP+Y,GAAYzc,IAASA,EAAKwJ,aAAa,iBAChD,EACIoT,GAAyB,SAAU5c,GACrC,OAAO0c,GA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","sources":["webpack://plone-mosaic/./node_modules/tinymce/tinymce.js"],"sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.5 (2022-05-25)\n */\n(function () {\n    'use strict';\n\n    var typeOf$1 = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      if (x === undefined) {\n        return 'undefined';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isEquatableType = function (x) {\n      return [\n        'undefined',\n        'boolean',\n        'number',\n        'string',\n        'function',\n        'xml',\n        'null'\n      ].indexOf(x) !== -1;\n    };\n\n    var sort$1 = function (xs, compareFn) {\n      var clone = Array.prototype.slice.call(xs);\n      return clone.sort(compareFn);\n    };\n\n    var contramap = function (eqa, f) {\n      return eq$2(function (x, y) {\n        return eqa.eq(f(x), f(y));\n      });\n    };\n    var eq$2 = function (f) {\n      return { eq: f };\n    };\n    var tripleEq = eq$2(function (x, y) {\n      return x === y;\n    });\n    var eqString = tripleEq;\n    var eqArray = function (eqa) {\n      return eq$2(function (x, y) {\n        if (x.length !== y.length) {\n          return false;\n        }\n        var len = x.length;\n        for (var i = 0; i < len; i++) {\n          if (!eqa.eq(x[i], y[i])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqSortedArray = function (eqa, compareFn) {\n      return contramap(eqArray(eqa), function (xs) {\n        return sort$1(xs, compareFn);\n      });\n    };\n    var eqRecord = function (eqa) {\n      return eq$2(function (x, y) {\n        var kx = Object.keys(x);\n        var ky = Object.keys(y);\n        if (!eqSortedArray(eqString).eq(kx, ky)) {\n          return false;\n        }\n        var len = kx.length;\n        for (var i = 0; i < len; i++) {\n          var q = kx[i];\n          if (!eqa.eq(x[q], y[q])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqAny = eq$2(function (x, y) {\n      if (x === y) {\n        return true;\n      }\n      var tx = typeOf$1(x);\n      var ty = typeOf$1(y);\n      if (tx !== ty) {\n        return false;\n      }\n      if (isEquatableType(tx)) {\n        return x === y;\n      } else if (tx === 'array') {\n        return eqArray(eqAny).eq(x, y);\n      } else if (tx === 'object') {\n        return eqRecord(eqAny).eq(x, y);\n      }\n      return false;\n    });\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType$1 = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq$1 = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString$1 = isType$1('string');\n    var isObject = isType$1('object');\n    var isArray$1 = isType$1('array');\n    var isNull = eq$1(null);\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq$1(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    var tripleEquals = function (a, b) {\n      return a === b;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var apply = function (f) {\n      return f();\n    };\n    var call = function (f) {\n      f();\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from$1 = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from$1\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf$2 = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    var contains$3 = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var map$3 = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$k = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter$4 = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each$k(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var findUntil$1 = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find$3 = function (xs, pred) {\n      return findUntil$1(xs, pred, never);\n    };\n    var findIndex$2 = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray$1(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map$3(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter$4(a1, function (x) {\n        return !contains$3(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get$a = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get$a(xs, 0);\n    };\n    var last$2 = function (xs) {\n      return get$a(xs, xs.length - 1);\n    };\n    var from = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty$1 = Object.hasOwnProperty;\n    var each$j = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$2 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$j(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$j(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var bifilter = function (obj, pred) {\n      var t = {};\n      var f = {};\n      internalFilter(obj, pred, objAcc(t), objAcc(f));\n      return {\n        t: t,\n        f: f\n      };\n    };\n    var filter$3 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$j(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var values = function (obj) {\n      return mapToArray(obj, identity);\n    };\n    var get$9 = function (obj, key) {\n      return has$2(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has$2 = function (obj, key) {\n      return hasOwnProperty$1.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has$2(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n    var equal$1 = function (a1, a2, eq) {\n      if (eq === void 0) {\n        eq = eqAny;\n      }\n      return eqRecord(eq).eq(a1, a2);\n    };\n\n    var isArray = Array.isArray;\n    var toArray$1 = function (obj) {\n      if (!isArray(obj)) {\n        var array = [];\n        for (var i = 0, l = obj.length; i < l; i++) {\n          array[i] = obj[i];\n        }\n        return array;\n      } else {\n        return obj;\n      }\n    };\n    var each$i = function (o, cb, s) {\n      var n, l;\n      if (!o) {\n        return false;\n      }\n      s = s || o;\n      if (o.length !== undefined) {\n        for (n = 0, l = o.length; n < l; n++) {\n          if (cb.call(s, o[n], n, o) === false) {\n            return false;\n          }\n        }\n      } else {\n        for (n in o) {\n          if (has$2(o, n)) {\n            if (cb.call(s, o[n], n, o) === false) {\n              return false;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    var map$1 = function (array, callback) {\n      var out = [];\n      each$i(array, function (item, index) {\n        out.push(callback(item, index, array));\n      });\n      return out;\n    };\n    var filter$2 = function (a, f) {\n      var o = [];\n      each$i(a, function (v, index) {\n        if (!f || f(v, index, a)) {\n          o.push(v);\n        }\n      });\n      return o;\n    };\n    var indexOf$1 = function (a, v) {\n      if (a) {\n        for (var i = 0, l = a.length; i < l; i++) {\n          if (a[i] === v) {\n            return i;\n          }\n        }\n      }\n      return -1;\n    };\n    var reduce = function (collection, iteratee, accumulator, thisArg) {\n      var acc = isUndefined(accumulator) ? collection[0] : accumulator;\n      for (var i = 0; i < collection.length; i++) {\n        acc = iteratee.call(thisArg, acc, collection[i], i);\n      }\n      return acc;\n    };\n    var findIndex$1 = function (array, predicate, thisArg) {\n      var i, l;\n      for (i = 0, l = array.length; i < l; i++) {\n        if (predicate.call(thisArg, array[i], i, array)) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var last$1 = function (collection) {\n      return collection[collection.length - 1];\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArray(to, from, pack) {\n      if (pack || arguments.length === 2)\n        for (var i = 0, l = from.length, ar; i < l; i++) {\n          if (ar || !(i in from)) {\n            if (!ar)\n              ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n          }\n        }\n      return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$2 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$4(group(1), group(2));\n    };\n    var detect$3 = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$2();\n      }\n      return find$2(versionRegexes, cleanedAgent);\n    };\n    var unknown$2 = function () {\n      return nu$4(0, 0);\n    };\n    var nu$4 = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$4,\n      detect: detect$3,\n      unknown: unknown$2\n    };\n\n    var detectBrowser$1 = function (browsers, userAgentData) {\n      return findMap(userAgentData.brands, function (uaBrand) {\n        var lcBrand = uaBrand.brand.toLowerCase();\n        return find$3(browsers, function (browser) {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(function (info) {\n          return {\n            current: info.name,\n            version: Version.nu(parseInt(uaBrand.version, 10), 0)\n          };\n        });\n      });\n    };\n\n    var detect$2 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find$3(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$2(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$2(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n\n    var removeFromStart = function (str, numChars) {\n      return str.substring(numChars);\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var removeLeading = function (str, prefix) {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    var contains$2 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim$4 = blank(/^\\s+|\\s+$/g);\n    var lTrim = blank(/^\\s+/g);\n    var rTrim = blank(/\\s+$/g);\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n    var isEmpty$3 = function (s) {\n      return !isNotEmpty(s);\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$2(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$2(uastring, 'edge/') && contains$2(uastring, 'chrome') && contains$2(uastring, 'safari') && contains$2(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$2(uastring, 'chrome') && !contains$2(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$2(uastring, 'msie') || contains$2(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$2(uastring, 'safari') || contains$2(uastring, 'mobile/')) && contains$2(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$2(uastring, 'iphone') || contains$2(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie$1 = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$3({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$3 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie$1),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$3,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie$1),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$1 = function (userAgent, userAgentDataOpt, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = userAgentDataOpt.bind(function (userAgentData) {\n        return detectBrowser$1(browsers, userAgentData);\n      }).orThunk(function () {\n        return detectBrowser(browsers, userAgent);\n      }).fold(Browser.unknown, Browser.nu);\n      var os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$1 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform$2 = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch);\n    });\n    var detect = function () {\n      return platform$2();\n    };\n\n    var userAgent = navigator.userAgent;\n    var platform$1 = detect();\n    var browser$4 = platform$1.browser;\n    var os = platform$1.os;\n    var deviceType = platform$1.deviceType;\n    var webkit = /WebKit/.test(userAgent) && !browser$4.isEdge();\n    var fileApi = 'FormData' in window && 'FileReader' in window && 'URL' in window && !!URL.createObjectURL;\n    var windowsPhone = userAgent.indexOf('Windows Phone') !== -1;\n    var Env = {\n      opera: browser$4.isOpera(),\n      webkit: webkit,\n      ie: browser$4.isIE() || browser$4.isEdge() ? browser$4.version.major : false,\n      gecko: browser$4.isFirefox(),\n      mac: os.isOSX() || os.isiOS(),\n      iOS: deviceType.isiPad() || deviceType.isiPhone(),\n      android: os.isAndroid(),\n      contentEditable: true,\n      transparentSrc: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\n      caretAfter: true,\n      range: window.getSelection && 'Range' in window,\n      documentMode: browser$4.isIE() ? document.documentMode || 7 : 10,\n      fileApi: fileApi,\n      ceFalse: true,\n      cacheSuffix: null,\n      container: null,\n      experimentalShadowDom: false,\n      canHaveCSP: !browser$4.isIE(),\n      desktop: deviceType.isDesktop(),\n      windowsPhone: windowsPhone,\n      browser: {\n        current: browser$4.current,\n        version: browser$4.version,\n        isChrome: browser$4.isChrome,\n        isEdge: browser$4.isEdge,\n        isFirefox: browser$4.isFirefox,\n        isIE: browser$4.isIE,\n        isOpera: browser$4.isOpera,\n        isSafari: browser$4.isSafari\n      },\n      os: {\n        current: os.current,\n        version: os.version,\n        isAndroid: os.isAndroid,\n        isChromeOS: os.isChromeOS,\n        isFreeBSD: os.isFreeBSD,\n        isiOS: os.isiOS,\n        isLinux: os.isLinux,\n        isOSX: os.isOSX,\n        isSolaris: os.isSolaris,\n        isWindows: os.isWindows\n      },\n      deviceType: {\n        isDesktop: deviceType.isDesktop,\n        isiPad: deviceType.isiPad,\n        isiPhone: deviceType.isiPhone,\n        isPhone: deviceType.isPhone,\n        isTablet: deviceType.isTablet,\n        isTouch: deviceType.isTouch,\n        isWebView: deviceType.isWebView\n      }\n    };\n\n    var whiteSpaceRegExp$2 = /^\\s*|\\s*$/g;\n    var trim$3 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp$2, '');\n    };\n    var is$3 = function (obj, type) {\n      if (!type) {\n        return obj !== undefined;\n      }\n      if (type === 'array' && isArray(obj)) {\n        return true;\n      }\n      return typeof obj === type;\n    };\n    var makeMap$4 = function (items, delim, map) {\n      var i;\n      items = items || [];\n      delim = delim || ',';\n      if (typeof items === 'string') {\n        items = items.split(delim);\n      }\n      map = map || {};\n      i = items.length;\n      while (i--) {\n        map[items[i]] = {};\n      }\n      return map;\n    };\n    var hasOwnProperty = has$2;\n    var create$9 = function (s, p, root) {\n      var self = this;\n      var sp, scn, c, de = 0;\n      s = /^((static) )?([\\w.]+)(:([\\w.]+))?/.exec(s);\n      var cn = s[3].match(/(^|\\.)(\\w+)$/i)[2];\n      var ns = self.createNS(s[3].replace(/\\.\\w+$/, ''), root);\n      if (ns[cn]) {\n        return;\n      }\n      if (s[2] === 'static') {\n        ns[cn] = p;\n        if (this.onCreate) {\n          this.onCreate(s[2], s[3], ns[cn]);\n        }\n        return;\n      }\n      if (!p[cn]) {\n        p[cn] = function () {\n        };\n        de = 1;\n      }\n      ns[cn] = p[cn];\n      self.extend(ns[cn].prototype, p);\n      if (s[5]) {\n        sp = self.resolve(s[5]).prototype;\n        scn = s[5].match(/\\.(\\w+)$/i)[1];\n        c = ns[cn];\n        if (de) {\n          ns[cn] = function () {\n            return sp[scn].apply(this, arguments);\n          };\n        } else {\n          ns[cn] = function () {\n            this.parent = sp[scn];\n            return c.apply(this, arguments);\n          };\n        }\n        ns[cn].prototype[cn] = ns[cn];\n        self.each(sp, function (f, n) {\n          ns[cn].prototype[n] = sp[n];\n        });\n        self.each(p, function (f, n) {\n          if (sp[n]) {\n            ns[cn].prototype[n] = function () {\n              this.parent = sp[n];\n              return f.apply(this, arguments);\n            };\n          } else {\n            if (n !== cn) {\n              ns[cn].prototype[n] = f;\n            }\n          }\n        });\n      }\n      self.each(p.static, function (f, n) {\n        ns[cn][n] = f;\n      });\n    };\n    var extend$6 = function (obj) {\n      var exts = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        exts[_i - 1] = arguments[_i];\n      }\n      for (var i = 0; i < exts.length; i++) {\n        var ext = exts[i];\n        for (var name_1 in ext) {\n          if (has$2(ext, name_1)) {\n            var value = ext[name_1];\n            if (value !== undefined) {\n              obj[name_1] = value;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var walk$3 = function (o, f, n, s) {\n      s = s || this;\n      if (o) {\n        if (n) {\n          o = o[n];\n        }\n        each$i(o, function (o, i) {\n          if (f.call(s, o, i, n) === false) {\n            return false;\n          }\n          walk$3(o, f, n, s);\n        });\n      }\n    };\n    var createNS = function (n, o) {\n      var i, v;\n      o = o || window;\n      n = n.split('.');\n      for (i = 0; i < n.length; i++) {\n        v = n[i];\n        if (!o[v]) {\n          o[v] = {};\n        }\n        o = o[v];\n      }\n      return o;\n    };\n    var resolve$3 = function (n, o) {\n      var i, l;\n      o = o || window;\n      n = n.split('.');\n      for (i = 0, l = n.length; i < l; i++) {\n        o = o[n[i]];\n        if (!o) {\n          break;\n        }\n      }\n      return o;\n    };\n    var explode$4 = function (s, d) {\n      if (!s || is$3(s, 'array')) {\n        return s;\n      }\n      return map$1(s.split(d || ','), trim$3);\n    };\n    var _addCacheSuffix = function (url) {\n      var cacheSuffix = Env.cacheSuffix;\n      if (cacheSuffix) {\n        url += (url.indexOf('?') === -1 ? '?' : '&') + cacheSuffix;\n      }\n      return url;\n    };\n    var Tools = {\n      trim: trim$3,\n      isArray: isArray,\n      is: is$3,\n      toArray: toArray$1,\n      makeMap: makeMap$4,\n      each: each$i,\n      map: map$1,\n      grep: filter$2,\n      inArray: indexOf$1,\n      hasOwn: hasOwnProperty,\n      extend: extend$6,\n      create: create$9,\n      walk: walk$3,\n      createNS: createNS,\n      resolve: resolve$3,\n      explode: explode$4,\n      _addCacheSuffix: _addCacheSuffix\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom$2(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom$2(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom$2(node);\n    };\n    var fromDom$2 = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint$1 = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom$2);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml$1,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom$2,\n      fromPoint: fromPoint$1\n    };\n\n    var toArray = function (target, f) {\n      var r = [];\n      var recurse = function (e) {\n        r.push(e);\n        return f(e);\n      };\n      var cur = f(target);\n      do {\n        cur = cur.bind(recurse);\n      } while (cur.isSome());\n      return r;\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var COMMENT = 8;\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var is$2 = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map$3(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains$1 = function (e1, e2) {\n      return detect().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n\n    typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isComment$1 = function (element) {\n      return type(element) === COMMENT || name(element) === '#comment';\n    };\n    var isElement$6 = isType(ELEMENT);\n    var isText$8 = isType(TEXT);\n    var isDocument$2 = isType(DOCUMENT);\n    var isDocumentFragment$1 = isType(DOCUMENT_FRAGMENT);\n    var isTag = function (tag) {\n      return function (e) {\n        return isElement$6(e) && name(e) === tag;\n      };\n    };\n\n    var owner$1 = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument$2(dos) ? dos : owner$1(dos);\n    };\n    var documentElement = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parents$1 = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom;\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var siblings = function (element) {\n      var filterSelf = function (elements) {\n        return filter$4(elements, function (x) {\n          return !eq(element, x);\n        });\n      };\n      return parent(element).map(children).map(filterSelf).getOr([]);\n    };\n    var prevSibling = function (element) {\n      return Optional.from(element.dom.previousSibling).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var prevSiblings = function (element) {\n      return reverse(toArray(element, prevSibling));\n    };\n    var nextSiblings = function (element) {\n      return toArray(element, nextSibling);\n    };\n    var children = function (element) {\n      return map$3(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child$1 = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child$1(element, 0);\n    };\n    var lastChild = function (element) {\n      return child$1(element, element.dom.childNodes.length - 1);\n    };\n    var childNodesCount = function (element) {\n      return element.dom.childNodes.length;\n    };\n\n    var getHead = function (doc) {\n      var b = doc.dom.head;\n      if (b === null || b === undefined) {\n        throw new Error('Head is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment$1(dos) && isNonNullable(dos.dom.host);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported$1 = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getStyleContainer = function (dos) {\n      return isShadowRoot(dos) ? dos : getHead(documentOrOwner(dos));\n    };\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported$1() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement$6(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var before$4 = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after$3 = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append$1(v, element);\n        });\n      }, function (v) {\n        before$4(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append$1(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append$1 = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var wrap$3 = function (element, wrapper) {\n      before$4(element, wrapper);\n      append$1(wrapper, element);\n    };\n\n    var before$3 = function (marker, elements) {\n      each$k(elements, function (x) {\n        before$4(marker, x);\n      });\n    };\n    var append = function (parent, elements) {\n      each$k(elements, function (x) {\n        append$1(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each$k(children(element), function (rogue) {\n        remove$7(rogue);\n      });\n    };\n    var remove$7 = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$3(wrapper, children$1);\n      }\n      remove$7(wrapper);\n    };\n\n    var inBody = function (element) {\n      var dom = isText$8(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var get$8 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var to = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n    var intoView = function (element, alignToTop) {\n      var isSafari = detect().browser.isSafari();\n      if (isSafari && isFunction(element.dom.scrollIntoViewIfNeeded)) {\n        element.dom.scrollIntoViewIfNeeded(false);\n      } else {\n        element.dom.scrollIntoView(alignToTop);\n      }\n    };\n\n    var get$7 = function (_win) {\n      var win = _win === undefined ? window : _win;\n      if (detect().browser.isFirefox()) {\n        return Optional.none();\n      } else {\n        return Optional.from(win['visualViewport']);\n      }\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds = function (_win) {\n      var win = _win === undefined ? window : _win;\n      var doc = win.document;\n      var scroll = get$8(SugarElement.fromDom(doc));\n      return get$7(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds(scroll.left, scroll.top, width, height);\n      }, function (visualViewport) {\n        return bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n      });\n    };\n\n    var isNodeType = function (type) {\n      return function (node) {\n        return !!node && node.nodeType === type;\n      };\n    };\n    var isRestrictedNode = function (node) {\n      return !!node && !Object.getPrototypeOf(node);\n    };\n    var isElement$5 = isNodeType(1);\n    var matchNodeNames = function (names) {\n      var lowercasedNames = names.map(function (s) {\n        return s.toLowerCase();\n      });\n      return function (node) {\n        if (node && node.nodeName) {\n          var nodeName = node.nodeName.toLowerCase();\n          return contains$3(lowercasedNames, nodeName);\n        }\n        return false;\n      };\n    };\n    var matchStyleValues = function (name, values) {\n      var items = values.toLowerCase().split(' ');\n      return function (node) {\n        if (isElement$5(node)) {\n          for (var i = 0; i < items.length; i++) {\n            var computed = node.ownerDocument.defaultView.getComputedStyle(node, null);\n            var cssValue = computed ? computed.getPropertyValue(name) : null;\n            if (cssValue === items[i]) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n    };\n    var hasAttribute = function (attrName) {\n      return function (node) {\n        return isElement$5(node) && node.hasAttribute(attrName);\n      };\n    };\n    var hasAttributeValue = function (attrName, attrValue) {\n      return function (node) {\n        return isElement$5(node) && node.getAttribute(attrName) === attrValue;\n      };\n    };\n    var isBogus$2 = function (node) {\n      return isElement$5(node) && node.hasAttribute('data-mce-bogus');\n    };\n    var isBogusAll$1 = function (node) {\n      return isElement$5(node) && node.getAttribute('data-mce-bogus') === 'all';\n    };\n    var isTable$3 = function (node) {\n      return isElement$5(node) && node.tagName === 'TABLE';\n    };\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (isElement$5(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isTextareaOrInput = matchNodeNames([\n      'textarea',\n      'input'\n    ]);\n    var isText$7 = isNodeType(3);\n    var isComment = isNodeType(8);\n    var isDocument$1 = isNodeType(9);\n    var isDocumentFragment = isNodeType(11);\n    var isBr$5 = matchNodeNames(['br']);\n    var isImg = matchNodeNames(['img']);\n    var isContentEditableTrue$4 = hasContentEditableState('true');\n    var isContentEditableFalse$b = hasContentEditableState('false');\n    var isTableCell$5 = matchNodeNames([\n      'td',\n      'th'\n    ]);\n    var isMedia$2 = matchNodeNames([\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n\n    var is$1 = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lhs.exists(function (left) {\n        return comparator(left, rhs);\n      });\n    };\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString$1(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set$1 = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll$1 = function (element, attrs) {\n      var dom = element.dom;\n      each$j(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$6 = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$6(element, key));\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$6 = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n    var clone$3 = function (element) {\n      return foldl(element.dom.attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString$1(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var setAll = function (element, css) {\n      var dom = element.dom;\n      each$j(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$5 = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom;\n      if (isSupported(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    var reflow = function (e) {\n      return e.dom.offsetWidth;\n    };\n\n    var browser$3 = detect().browser;\n    var firstElement = function (nodes) {\n      return find$3(nodes, isElement$6);\n    };\n    var getTableCaptionDeltaY = function (elm) {\n      if (browser$3.isFirefox() && name(elm) === 'table') {\n        return firstElement(children(elm)).filter(function (elm) {\n          return name(elm) === 'caption';\n        }).bind(function (caption) {\n          return firstElement(nextSiblings(caption)).map(function (body) {\n            var bodyTop = body.dom.offsetTop;\n            var captionTop = caption.dom.offsetTop;\n            var captionHeight = caption.dom.offsetHeight;\n            return bodyTop <= captionTop ? -captionHeight : 0;\n          });\n        }).getOr(0);\n      } else {\n        return 0;\n      }\n    };\n    var hasChild = function (elm, child) {\n      return elm.children && contains$3(elm.children, child);\n    };\n    var getPos = function (body, elm, rootElm) {\n      var x = 0, y = 0;\n      var doc = body.ownerDocument;\n      rootElm = rootElm ? rootElm : body;\n      if (elm) {\n        if (rootElm === body && elm.getBoundingClientRect && get$5(SugarElement.fromDom(body), 'position') === 'static') {\n          var pos = elm.getBoundingClientRect();\n          x = pos.left + (doc.documentElement.scrollLeft || body.scrollLeft) - doc.documentElement.clientLeft;\n          y = pos.top + (doc.documentElement.scrollTop || body.scrollTop) - doc.documentElement.clientTop;\n          return {\n            x: x,\n            y: y\n          };\n        }\n        var offsetParent = elm;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          var castOffsetParent = offsetParent;\n          x += castOffsetParent.offsetLeft || 0;\n          y += castOffsetParent.offsetTop || 0;\n          offsetParent = castOffsetParent.offsetParent;\n        }\n        offsetParent = elm.parentNode;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          x -= offsetParent.scrollLeft || 0;\n          y -= offsetParent.scrollTop || 0;\n          offsetParent = offsetParent.parentNode;\n        }\n        y += getTableCaptionDeltaY(SugarElement.fromDom(elm));\n      }\n      return {\n        x: x,\n        y: y\n      };\n    };\n\n    var exports$1 = {}, module$1 = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (global, factory) {\n        typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.EphoxContactWrapper = factory());\n      }(this, function () {\n        var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n        var promise = { exports: {} };\n        (function (module) {\n          (function (root) {\n            var setTimeoutFunc = setTimeout;\n            function noop() {\n            }\n            function bind(fn, thisArg) {\n              return function () {\n                fn.apply(thisArg, arguments);\n              };\n            }\n            function Promise(fn) {\n              if (typeof this !== 'object')\n                throw new TypeError('Promises must be constructed via new');\n              if (typeof fn !== 'function')\n                throw new TypeError('not a function');\n              this._state = 0;\n              this._handled = false;\n              this._value = undefined;\n              this._deferreds = [];\n              doResolve(fn, this);\n            }\n            function handle(self, deferred) {\n              while (self._state === 3) {\n                self = self._value;\n              }\n              if (self._state === 0) {\n                self._deferreds.push(deferred);\n                return;\n              }\n              self._handled = true;\n              Promise._immediateFn(function () {\n                var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                if (cb === null) {\n                  (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                  return;\n                }\n                var ret;\n                try {\n                  ret = cb(self._value);\n                } catch (e) {\n                  reject(deferred.promise, e);\n                  return;\n                }\n                resolve(deferred.promise, ret);\n              });\n            }\n            function resolve(self, newValue) {\n              try {\n                if (newValue === self)\n                  throw new TypeError('A promise cannot be resolved with itself.');\n                if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                  var then = newValue.then;\n                  if (newValue instanceof Promise) {\n                    self._state = 3;\n                    self._value = newValue;\n                    finale(self);\n                    return;\n                  } else if (typeof then === 'function') {\n                    doResolve(bind(then, newValue), self);\n                    return;\n                  }\n                }\n                self._state = 1;\n                self._value = newValue;\n                finale(self);\n              } catch (e) {\n                reject(self, e);\n              }\n            }\n            function reject(self, newValue) {\n              self._state = 2;\n              self._value = newValue;\n              finale(self);\n            }\n            function finale(self) {\n              if (self._state === 2 && self._deferreds.length === 0) {\n                Promise._immediateFn(function () {\n                  if (!self._handled) {\n                    Promise._unhandledRejectionFn(self._value);\n                  }\n                });\n              }\n              for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                handle(self, self._deferreds[i]);\n              }\n              self._deferreds = null;\n            }\n            function Handler(onFulfilled, onRejected, promise) {\n              this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n              this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n              this.promise = promise;\n            }\n            function doResolve(fn, self) {\n              var done = false;\n              try {\n                fn(function (value) {\n                  if (done)\n                    return;\n                  done = true;\n                  resolve(self, value);\n                }, function (reason) {\n                  if (done)\n                    return;\n                  done = true;\n                  reject(self, reason);\n                });\n              } catch (ex) {\n                if (done)\n                  return;\n                done = true;\n                reject(self, ex);\n              }\n            }\n            Promise.prototype['catch'] = function (onRejected) {\n              return this.then(null, onRejected);\n            };\n            Promise.prototype.then = function (onFulfilled, onRejected) {\n              var prom = new this.constructor(noop);\n              handle(this, new Handler(onFulfilled, onRejected, prom));\n              return prom;\n            };\n            Promise.all = function (arr) {\n              var args = Array.prototype.slice.call(arr);\n              return new Promise(function (resolve, reject) {\n                if (args.length === 0)\n                  return resolve([]);\n                var remaining = args.length;\n                function res(i, val) {\n                  try {\n                    if (val && (typeof val === 'object' || typeof val === 'function')) {\n                      var then = val.then;\n                      if (typeof then === 'function') {\n                        then.call(val, function (val) {\n                          res(i, val);\n                        }, reject);\n                        return;\n                      }\n                    }\n                    args[i] = val;\n                    if (--remaining === 0) {\n                      resolve(args);\n                    }\n                  } catch (ex) {\n                    reject(ex);\n                  }\n                }\n                for (var i = 0; i < args.length; i++) {\n                  res(i, args[i]);\n                }\n              });\n            };\n            Promise.resolve = function (value) {\n              if (value && typeof value === 'object' && value.constructor === Promise) {\n                return value;\n              }\n              return new Promise(function (resolve) {\n                resolve(value);\n              });\n            };\n            Promise.reject = function (value) {\n              return new Promise(function (resolve, reject) {\n                reject(value);\n              });\n            };\n            Promise.race = function (values) {\n              return new Promise(function (resolve, reject) {\n                for (var i = 0, len = values.length; i < len; i++) {\n                  values[i].then(resolve, reject);\n                }\n              });\n            };\n            Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n              setImmediate(fn);\n            } : function (fn) {\n              setTimeoutFunc(fn, 0);\n            };\n            Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n              if (typeof console !== 'undefined' && console) {\n                console.warn('Possible Unhandled Promise Rejection:', err);\n              }\n            };\n            Promise._setImmediateFn = function _setImmediateFn(fn) {\n              Promise._immediateFn = fn;\n            };\n            Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n              Promise._unhandledRejectionFn = fn;\n            };\n            if (module.exports) {\n              module.exports = Promise;\n            } else if (!root.Promise) {\n              root.Promise = Promise;\n            }\n          }(commonjsGlobal));\n        }(promise));\n        var promisePolyfill = promise.exports;\n        var Global = function () {\n          if (typeof window !== 'undefined') {\n            return window;\n          } else {\n            return Function('return this;')();\n          }\n        }();\n        var promisePolyfill_1 = { boltExport: Global.Promise || promisePolyfill };\n        return promisePolyfill_1;\n      }));\n    }(undefined, exports$1, module$1));\n    var Promise$1 = module$1.exports.boltExport;\n\n    var nu$1 = function (baseFn) {\n      var data = Optional.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$1(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        if (!isReady()) {\n          data = Optional.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each$k(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure$1 = function (a) {\n      return nu$1(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$1,\n      pure: pure$1\n    };\n\n    var errorReporter = function (err) {\n      setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu = function (baseFn) {\n      return make(function () {\n        return new Promise$1(baseFn);\n      });\n    };\n    var pure = function (a) {\n      return make(function () {\n        return Promise$1.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu,\n      pure: pure\n    };\n\n    var par$1 = function (asyncValues, nu) {\n      return nu(function (callback) {\n        var r = [];\n        var count = 0;\n        var cb = function (i) {\n          return function (value) {\n            r[i] = value;\n            count++;\n            if (count >= asyncValues.length) {\n              callback(r);\n            }\n          };\n        };\n        if (asyncValues.length === 0) {\n          callback([]);\n        } else {\n          each$k(asyncValues, function (asyncValue, i) {\n            asyncValue.get(cb(i));\n          });\n        }\n      });\n    };\n\n    var par = function (futures) {\n      return par$1(futures, Future.nu);\n    };\n\n    var value$1 = function (o) {\n      var or = function (_opt) {\n        return value$1(o);\n      };\n      var orThunk = function (_f) {\n        return value$1(o);\n      };\n      var map = function (f) {\n        return value$1(f(o));\n      };\n      var mapError = function (_f) {\n        return value$1(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = identity;\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (_f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value$1);\n    };\n    var Result = {\n      value: value$1,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var generate$1 = function (cases) {\n      if (!isArray$1(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each$k(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray$1(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains$3(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              var foldArgs = [];\n              for (var _i = 0; _i < arguments.length; _i++) {\n                foldArgs[_i] = arguments[_i];\n              }\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              var target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$1 };\n\n    Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var unite = function (result) {\n      return result.fold(identity, identity);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor$3 = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$3 = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor$3, scope, predicate, isRoot);\n    };\n    var sibling$2 = function (scope, predicate) {\n      var element = scope.dom;\n      if (!element.parentNode) {\n        return Optional.none();\n      }\n      return child(SugarElement.fromDom(element.parentNode), function (x) {\n        return !eq(scope, x) && predicate(x);\n      });\n    };\n    var child = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(SugarElement.fromDom(node));\n      };\n      var result = find$3(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n\n    var ancestor$2 = function (scope, selector, isRoot) {\n      return ancestor$3(scope, function (e) {\n        return is$2(e, selector);\n      }, isRoot);\n    };\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$2 = function (scope, selector, isRoot) {\n      var is = function (element, selector) {\n        return is$2(element, selector);\n      };\n      return ClosestOrAncestor(is, ancestor$2, scope, selector, isRoot);\n    };\n\n    var promiseObj = window.Promise ? window.Promise : Promise$1;\n\n    var requestAnimationFramePromise;\n    var requestAnimationFrame = function (callback, element) {\n      var requestAnimationFrameFunc = window.requestAnimationFrame;\n      var vendors = [\n        'ms',\n        'moz',\n        'webkit'\n      ];\n      var featurefill = function (cb) {\n        window.setTimeout(cb, 0);\n      };\n      for (var i = 0; i < vendors.length && !requestAnimationFrameFunc; i++) {\n        requestAnimationFrameFunc = window[vendors[i] + 'RequestAnimationFrame'];\n      }\n      if (!requestAnimationFrameFunc) {\n        requestAnimationFrameFunc = featurefill;\n      }\n      requestAnimationFrameFunc(callback, element);\n    };\n    var wrappedSetTimeout = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 0;\n      }\n      return setTimeout(callback, time);\n    };\n    var wrappedSetInterval = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 1;\n      }\n      return setInterval(callback, time);\n    };\n    var wrappedClearTimeout = function (id) {\n      return clearTimeout(id);\n    };\n    var wrappedClearInterval = function (id) {\n      return clearInterval(id);\n    };\n    var debounce = function (callback, time) {\n      var timer;\n      var func = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        clearTimeout(timer);\n        timer = wrappedSetTimeout(function () {\n          callback.apply(this, args);\n        }, time);\n      };\n      func.stop = function () {\n        clearTimeout(timer);\n      };\n      return func;\n    };\n    var Delay = {\n      requestAnimationFrame: function (callback, element) {\n        if (requestAnimationFramePromise) {\n          requestAnimationFramePromise.then(callback);\n          return;\n        }\n        requestAnimationFramePromise = new promiseObj(function (resolve) {\n          if (!element) {\n            element = document.body;\n          }\n          requestAnimationFrame(resolve, element);\n        }).then(callback);\n      },\n      setTimeout: wrappedSetTimeout,\n      setInterval: wrappedSetInterval,\n      setEditorTimeout: function (editor, callback, time) {\n        return wrappedSetTimeout(function () {\n          if (!editor.removed) {\n            callback();\n          }\n        }, time);\n      },\n      setEditorInterval: function (editor, callback, time) {\n        var timer = wrappedSetInterval(function () {\n          if (!editor.removed) {\n            callback();\n          } else {\n            clearInterval(timer);\n          }\n        }, time);\n        return timer;\n      },\n      debounce: debounce,\n      throttle: debounce,\n      clearInterval: wrappedClearInterval,\n      clearTimeout: wrappedClearTimeout\n    };\n\n    var StyleSheetLoader = function (documentOrShadowRoot, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var idCount = 0;\n      var loadedStates = {};\n      var edos = SugarElement.fromDom(documentOrShadowRoot);\n      var doc = documentOrOwner(edos);\n      var maxLoadTime = settings.maxLoadTime || 5000;\n      var _setReferrerPolicy = function (referrerPolicy) {\n        settings.referrerPolicy = referrerPolicy;\n      };\n      var addStyle = function (element) {\n        append$1(getStyleContainer(edos), element);\n      };\n      var removeStyle = function (id) {\n        var styleContainer = getStyleContainer(edos);\n        descendant(styleContainer, '#' + id).each(remove$7);\n      };\n      var getOrCreateState = function (url) {\n        return get$9(loadedStates, url).getOrThunk(function () {\n          return {\n            id: 'mce-u' + idCount++,\n            passed: [],\n            failed: [],\n            count: 0\n          };\n        });\n      };\n      var load = function (url, success, failure) {\n        var link;\n        var urlWithSuffix = Tools._addCacheSuffix(url);\n        var state = getOrCreateState(urlWithSuffix);\n        loadedStates[urlWithSuffix] = state;\n        state.count++;\n        var resolve = function (callbacks, status) {\n          var i = callbacks.length;\n          while (i--) {\n            callbacks[i]();\n          }\n          state.status = status;\n          state.passed = [];\n          state.failed = [];\n          if (link) {\n            link.onload = null;\n            link.onerror = null;\n            link = null;\n          }\n        };\n        var passed = function () {\n          return resolve(state.passed, 2);\n        };\n        var failed = function () {\n          return resolve(state.failed, 3);\n        };\n        var wait = function (testCallback, waitCallback) {\n          if (!testCallback()) {\n            if (Date.now() - startTime < maxLoadTime) {\n              Delay.setTimeout(waitCallback);\n            } else {\n              failed();\n            }\n          }\n        };\n        var waitForWebKitLinkLoaded = function () {\n          wait(function () {\n            var styleSheets = documentOrShadowRoot.styleSheets;\n            var i = styleSheets.length;\n            while (i--) {\n              var styleSheet = styleSheets[i];\n              var owner = styleSheet.ownerNode;\n              if (owner && owner.id === link.id) {\n                passed();\n                return true;\n              }\n            }\n            return false;\n          }, waitForWebKitLinkLoaded);\n        };\n        if (success) {\n          state.passed.push(success);\n        }\n        if (failure) {\n          state.failed.push(failure);\n        }\n        if (state.status === 1) {\n          return;\n        }\n        if (state.status === 2) {\n          passed();\n          return;\n        }\n        if (state.status === 3) {\n          failed();\n          return;\n        }\n        state.status = 1;\n        var linkElem = SugarElement.fromTag('link', doc.dom);\n        setAll$1(linkElem, {\n          rel: 'stylesheet',\n          type: 'text/css',\n          id: state.id\n        });\n        var startTime = Date.now();\n        if (settings.contentCssCors) {\n          set$1(linkElem, 'crossOrigin', 'anonymous');\n        }\n        if (settings.referrerPolicy) {\n          set$1(linkElem, 'referrerpolicy', settings.referrerPolicy);\n        }\n        link = linkElem.dom;\n        link.onload = waitForWebKitLinkLoaded;\n        link.onerror = failed;\n        addStyle(linkElem);\n        set$1(linkElem, 'href', urlWithSuffix);\n      };\n      var loadF = function (url) {\n        return Future.nu(function (resolve) {\n          load(url, compose(resolve, constant(Result.value(url))), compose(resolve, constant(Result.error(url))));\n        });\n      };\n      var loadAll = function (urls, success, failure) {\n        par(map$3(urls, loadF)).get(function (result) {\n          var parts = partition(result, function (r) {\n            return r.isValue();\n          });\n          if (parts.fail.length > 0) {\n            failure(parts.fail.map(unite));\n          } else {\n            success(parts.pass.map(unite));\n          }\n        });\n      };\n      var unload = function (url) {\n        var urlWithSuffix = Tools._addCacheSuffix(url);\n        get$9(loadedStates, urlWithSuffix).each(function (state) {\n          var count = --state.count;\n          if (count === 0) {\n            delete loadedStates[urlWithSuffix];\n            removeStyle(state.id);\n          }\n        });\n      };\n      var unloadAll = function (urls) {\n        each$k(urls, function (url) {\n          unload(url);\n        });\n      };\n      return {\n        load: load,\n        loadAll: loadAll,\n        unload: unload,\n        unloadAll: unloadAll,\n        _setReferrerPolicy: _setReferrerPolicy\n      };\n    };\n\n    var create$8 = function () {\n      var map = new WeakMap();\n      var forElement = function (referenceElement, settings) {\n        var root = getRootNode(referenceElement);\n        var rootDom = root.dom;\n        return Optional.from(map.get(rootDom)).getOrThunk(function () {\n          var sl = StyleSheetLoader(rootDom, settings);\n          map.set(rootDom, sl);\n          return sl;\n        });\n      };\n      return { forElement: forElement };\n    };\n    var instance = create$8();\n\n    var DomTreeWalker = function () {\n      function DomTreeWalker(startNode, rootNode) {\n        this.node = startNode;\n        this.rootNode = rootNode;\n        this.current = this.current.bind(this);\n        this.next = this.next.bind(this);\n        this.prev = this.prev.bind(this);\n        this.prev2 = this.prev2.bind(this);\n      }\n      DomTreeWalker.prototype.current = function () {\n        return this.node;\n      };\n      DomTreeWalker.prototype.next = function (shallow) {\n        this.node = this.findSibling(this.node, 'firstChild', 'nextSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.prev = function (shallow) {\n        this.node = this.findSibling(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.prev2 = function (shallow) {\n        this.node = this.findPreviousNode(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.findSibling = function (node, startName, siblingName, shallow) {\n        var sibling, parent;\n        if (node) {\n          if (!shallow && node[startName]) {\n            return node[startName];\n          }\n          if (node !== this.rootNode) {\n            sibling = node[siblingName];\n            if (sibling) {\n              return sibling;\n            }\n            for (parent = node.parentNode; parent && parent !== this.rootNode; parent = parent.parentNode) {\n              sibling = parent[siblingName];\n              if (sibling) {\n                return sibling;\n              }\n            }\n          }\n        }\n      };\n      DomTreeWalker.prototype.findPreviousNode = function (node, startName, siblingName, shallow) {\n        var sibling, parent, child;\n        if (node) {\n          sibling = node[siblingName];\n          if (this.rootNode && sibling === this.rootNode) {\n            return;\n          }\n          if (sibling) {\n            if (!shallow) {\n              for (child = sibling[startName]; child; child = child[startName]) {\n                if (!child[startName]) {\n                  return child;\n                }\n              }\n            }\n            return sibling;\n          }\n          parent = node.parentNode;\n          if (parent && parent !== this.rootNode) {\n            return parent;\n          }\n        }\n      };\n      return DomTreeWalker;\n    }();\n\n    var blocks = [\n      'article',\n      'aside',\n      'details',\n      'div',\n      'dt',\n      'figcaption',\n      'footer',\n      'form',\n      'fieldset',\n      'header',\n      'hgroup',\n      'html',\n      'main',\n      'nav',\n      'section',\n      'summary',\n      'body',\n      'p',\n      'dl',\n      'multicol',\n      'dd',\n      'figure',\n      'address',\n      'center',\n      'blockquote',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'listing',\n      'xmp',\n      'pre',\n      'plaintext',\n      'menu',\n      'dir',\n      'ul',\n      'ol',\n      'li',\n      'hr',\n      'table',\n      'tbody',\n      'thead',\n      'tfoot',\n      'th',\n      'tr',\n      'td',\n      'caption'\n    ];\n    var tableCells = [\n      'td',\n      'th'\n    ];\n    var tableSections = [\n      'thead',\n      'tbody',\n      'tfoot'\n    ];\n    var textBlocks = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'p',\n      'div',\n      'address',\n      'pre',\n      'form',\n      'blockquote',\n      'center',\n      'dir',\n      'fieldset',\n      'header',\n      'footer',\n      'article',\n      'section',\n      'hgroup',\n      'aside',\n      'nav',\n      'figure'\n    ];\n    var headings = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6'\n    ];\n    var listItems$1 = [\n      'li',\n      'dd',\n      'dt'\n    ];\n    var lists = [\n      'ul',\n      'ol',\n      'dl'\n    ];\n    var wsElements = [\n      'pre',\n      'script',\n      'textarea',\n      'style'\n    ];\n    var lazyLookup = function (items) {\n      var lookup;\n      return function (node) {\n        lookup = lookup ? lookup : mapToObject(items, always);\n        return has$2(lookup, name(node));\n      };\n    };\n    var isHeading = lazyLookup(headings);\n    var isBlock$2 = lazyLookup(blocks);\n    var isTable$2 = function (node) {\n      return name(node) === 'table';\n    };\n    var isInline$1 = function (node) {\n      return isElement$6(node) && !isBlock$2(node);\n    };\n    var isBr$4 = function (node) {\n      return isElement$6(node) && name(node) === 'br';\n    };\n    var isTextBlock$2 = lazyLookup(textBlocks);\n    var isList = lazyLookup(lists);\n    var isListItem = lazyLookup(listItems$1);\n    var isTableSection = lazyLookup(tableSections);\n    var isTableCell$4 = lazyLookup(tableCells);\n    var isWsPreserveElement = lazyLookup(wsElements);\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor$2(scope, selector, isRoot).isSome();\n    };\n\n    var zeroWidth = '\\uFEFF';\n    var nbsp = '\\xA0';\n    var isZwsp$1 = function (char) {\n      return char === zeroWidth;\n    };\n    var removeZwsp = function (s) {\n      return s.replace(/\\uFEFF/g, '');\n    };\n\n    var ZWSP$1 = zeroWidth;\n    var isZwsp = isZwsp$1;\n    var trim$2 = removeZwsp;\n\n    var isElement$4 = isElement$5;\n    var isText$6 = isText$7;\n    var isCaretContainerBlock$1 = function (node) {\n      if (isText$6(node)) {\n        node = node.parentNode;\n      }\n      return isElement$4(node) && node.hasAttribute('data-mce-caret');\n    };\n    var isCaretContainerInline = function (node) {\n      return isText$6(node) && isZwsp(node.data);\n    };\n    var isCaretContainer$2 = function (node) {\n      return isCaretContainerBlock$1(node) || isCaretContainerInline(node);\n    };\n    var hasContent = function (node) {\n      return node.firstChild !== node.lastChild || !isBr$5(node.firstChild);\n    };\n    var insertInline$1 = function (node, before) {\n      var doc = node.ownerDocument;\n      var textNode = doc.createTextNode(ZWSP$1);\n      var parentNode = node.parentNode;\n      if (!before) {\n        var sibling = node.nextSibling;\n        if (isText$6(sibling)) {\n          if (isCaretContainer$2(sibling)) {\n            return sibling;\n          }\n          if (startsWithCaretContainer$1(sibling)) {\n            sibling.splitText(1);\n            return sibling;\n          }\n        }\n        if (node.nextSibling) {\n          parentNode.insertBefore(textNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(textNode);\n        }\n      } else {\n        var sibling = node.previousSibling;\n        if (isText$6(sibling)) {\n          if (isCaretContainer$2(sibling)) {\n            return sibling;\n          }\n          if (endsWithCaretContainer$1(sibling)) {\n            return sibling.splitText(sibling.data.length - 1);\n          }\n        }\n        parentNode.insertBefore(textNode, node);\n      }\n      return textNode;\n    };\n    var isBeforeInline = function (pos) {\n      var container = pos.container();\n      if (!isText$7(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset()) === ZWSP$1 || pos.isAtStart() && isCaretContainerInline(container.previousSibling);\n    };\n    var isAfterInline = function (pos) {\n      var container = pos.container();\n      if (!isText$7(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset() - 1) === ZWSP$1 || pos.isAtEnd() && isCaretContainerInline(container.nextSibling);\n    };\n    var createBogusBr = function () {\n      var br = document.createElement('br');\n      br.setAttribute('data-mce-bogus', '1');\n      return br;\n    };\n    var insertBlock$1 = function (blockName, node, before) {\n      var doc = node.ownerDocument;\n      var blockNode = doc.createElement(blockName);\n      blockNode.setAttribute('data-mce-caret', before ? 'before' : 'after');\n      blockNode.setAttribute('data-mce-bogus', 'all');\n      blockNode.appendChild(createBogusBr());\n      var parentNode = node.parentNode;\n      if (!before) {\n        if (node.nextSibling) {\n          parentNode.insertBefore(blockNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(blockNode);\n        }\n      } else {\n        parentNode.insertBefore(blockNode, node);\n      }\n      return blockNode;\n    };\n    var startsWithCaretContainer$1 = function (node) {\n      return isText$6(node) && node.data[0] === ZWSP$1;\n    };\n    var endsWithCaretContainer$1 = function (node) {\n      return isText$6(node) && node.data[node.data.length - 1] === ZWSP$1;\n    };\n    var trimBogusBr = function (elm) {\n      var brs = elm.getElementsByTagName('br');\n      var lastBr = brs[brs.length - 1];\n      if (isBogus$2(lastBr)) {\n        lastBr.parentNode.removeChild(lastBr);\n      }\n    };\n    var showCaretContainerBlock = function (caretContainer) {\n      if (caretContainer && caretContainer.hasAttribute('data-mce-caret')) {\n        trimBogusBr(caretContainer);\n        caretContainer.removeAttribute('data-mce-caret');\n        caretContainer.removeAttribute('data-mce-bogus');\n        caretContainer.removeAttribute('style');\n        caretContainer.removeAttribute('_moz_abspos');\n        return caretContainer;\n      }\n      return null;\n    };\n    var isRangeInCaretContainerBlock = function (range) {\n      return isCaretContainerBlock$1(range.startContainer);\n    };\n\n    var isContentEditableTrue$3 = isContentEditableTrue$4;\n    var isContentEditableFalse$a = isContentEditableFalse$b;\n    var isBr$3 = isBr$5;\n    var isText$5 = isText$7;\n    var isInvalidTextElement = matchNodeNames([\n      'script',\n      'style',\n      'textarea'\n    ]);\n    var isAtomicInline = matchNodeNames([\n      'img',\n      'input',\n      'textarea',\n      'hr',\n      'iframe',\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n    var isTable$1 = matchNodeNames(['table']);\n    var isCaretContainer$1 = isCaretContainer$2;\n    var isCaretCandidate$3 = function (node) {\n      if (isCaretContainer$1(node)) {\n        return false;\n      }\n      if (isText$5(node)) {\n        return !isInvalidTextElement(node.parentNode);\n      }\n      return isAtomicInline(node) || isBr$3(node) || isTable$1(node) || isNonUiContentEditableFalse(node);\n    };\n    var isUnselectable = function (node) {\n      return isElement$5(node) && node.getAttribute('unselectable') === 'true';\n    };\n    var isNonUiContentEditableFalse = function (node) {\n      return isUnselectable(node) === false && isContentEditableFalse$a(node);\n    };\n    var isInEditable = function (node, root) {\n      for (node = node.parentNode; node && node !== root; node = node.parentNode) {\n        if (isNonUiContentEditableFalse(node)) {\n          return false;\n        }\n        if (isContentEditableTrue$3(node)) {\n          return true;\n        }\n      }\n      return true;\n    };\n    var isAtomicContentEditableFalse = function (node) {\n      if (!isNonUiContentEditableFalse(node)) {\n        return false;\n      }\n      return foldl(from(node.getElementsByTagName('*')), function (result, elm) {\n        return result || isContentEditableTrue$3(elm);\n      }, false) !== true;\n    };\n    var isAtomic$1 = function (node) {\n      return isAtomicInline(node) || isAtomicContentEditableFalse(node);\n    };\n    var isEditableCaretCandidate$1 = function (node, root) {\n      return isCaretCandidate$3(node) && isInEditable(node, root);\n    };\n\n    var whiteSpaceRegExp$1 = /^[ \\t\\r\\n]*$/;\n    var isWhitespaceText = function (text) {\n      return whiteSpaceRegExp$1.test(text);\n    };\n\n    var hasWhitespacePreserveParent = function (node, rootNode) {\n      var rootElement = SugarElement.fromDom(rootNode);\n      var startNode = SugarElement.fromDom(node);\n      return ancestor$1(startNode, 'pre,code', curry(eq, rootElement));\n    };\n    var isWhitespace = function (node, rootNode) {\n      return isText$7(node) && isWhitespaceText(node.data) && hasWhitespacePreserveParent(node, rootNode) === false;\n    };\n    var isNamedAnchor = function (node) {\n      return isElement$5(node) && node.nodeName === 'A' && !node.hasAttribute('href') && (node.hasAttribute('name') || node.hasAttribute('id'));\n    };\n    var isContent$1 = function (node, rootNode) {\n      return isCaretCandidate$3(node) && isWhitespace(node, rootNode) === false || isNamedAnchor(node) || isBookmark(node);\n    };\n    var isBookmark = hasAttribute('data-mce-bookmark');\n    var isBogus$1 = hasAttribute('data-mce-bogus');\n    var isBogusAll = hasAttributeValue('data-mce-bogus', 'all');\n    var isEmptyNode = function (targetNode, skipBogus) {\n      var brCount = 0;\n      if (isContent$1(targetNode, targetNode)) {\n        return false;\n      } else {\n        var node = targetNode.firstChild;\n        if (!node) {\n          return true;\n        }\n        var walker = new DomTreeWalker(node, targetNode);\n        do {\n          if (skipBogus) {\n            if (isBogusAll(node)) {\n              node = walker.next(true);\n              continue;\n            }\n            if (isBogus$1(node)) {\n              node = walker.next();\n              continue;\n            }\n          }\n          if (isBr$5(node)) {\n            brCount++;\n            node = walker.next();\n            continue;\n          }\n          if (isContent$1(node, targetNode)) {\n            return false;\n          }\n          node = walker.next();\n        } while (node);\n        return brCount <= 1;\n      }\n    };\n    var isEmpty$2 = function (elm, skipBogus) {\n      if (skipBogus === void 0) {\n        skipBogus = true;\n      }\n      return isEmptyNode(elm.dom, skipBogus);\n    };\n\n    var isSpan = function (node) {\n      return node.nodeName.toLowerCase() === 'span';\n    };\n    var isInlineContent = function (node, root) {\n      return isNonNullable(node) && (isContent$1(node, root) || isInline$1(SugarElement.fromDom(node)));\n    };\n    var surroundedByInlineContent = function (node, root) {\n      var prev = new DomTreeWalker(node, root).prev(false);\n      var next = new DomTreeWalker(node, root).next(false);\n      var prevIsInline = isUndefined(prev) || isInlineContent(prev, root);\n      var nextIsInline = isUndefined(next) || isInlineContent(next, root);\n      return prevIsInline && nextIsInline;\n    };\n    var isBookmarkNode$2 = function (node) {\n      return isSpan(node) && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n    var isKeepTextNode = function (node, root) {\n      return isText$7(node) && node.data.length > 0 && surroundedByInlineContent(node, root);\n    };\n    var isKeepElement = function (node) {\n      return isElement$5(node) ? node.childNodes.length > 0 : false;\n    };\n    var isDocument = function (node) {\n      return isDocumentFragment(node) || isDocument$1(node);\n    };\n    var trimNode = function (dom, node, root) {\n      var rootNode = root || node;\n      if (isElement$5(node) && isBookmarkNode$2(node)) {\n        return node;\n      }\n      var children = node.childNodes;\n      for (var i = children.length - 1; i >= 0; i--) {\n        trimNode(dom, children[i], rootNode);\n      }\n      if (isElement$5(node)) {\n        var currentChildren = node.childNodes;\n        if (currentChildren.length === 1 && isBookmarkNode$2(currentChildren[0])) {\n          node.parentNode.insertBefore(currentChildren[0], node);\n        }\n      }\n      if (!isDocument(node) && !isContent$1(node, rootNode) && !isKeepElement(node) && !isKeepTextNode(node, rootNode)) {\n        dom.remove(node);\n      }\n      return node;\n    };\n\n    var makeMap$3 = Tools.makeMap;\n    var attrsCharsRegExp = /[&<>\\\"\\u0060\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var textCharsRegExp = /[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var rawCharsRegExp = /[<>&\\\"\\']/g;\n    var entityRegExp = /&#([a-z0-9]+);?|&([a-z0-9]+);/gi;\n    var asciiMap = {\n      128: '\\u20AC',\n      130: '\\u201A',\n      131: '\\u0192',\n      132: '\\u201E',\n      133: '\\u2026',\n      134: '\\u2020',\n      135: '\\u2021',\n      136: '\\u02c6',\n      137: '\\u2030',\n      138: '\\u0160',\n      139: '\\u2039',\n      140: '\\u0152',\n      142: '\\u017d',\n      145: '\\u2018',\n      146: '\\u2019',\n      147: '\\u201C',\n      148: '\\u201D',\n      149: '\\u2022',\n      150: '\\u2013',\n      151: '\\u2014',\n      152: '\\u02DC',\n      153: '\\u2122',\n      154: '\\u0161',\n      155: '\\u203A',\n      156: '\\u0153',\n      158: '\\u017e',\n      159: '\\u0178'\n    };\n    var baseEntities = {\n      '\"': '&quot;',\n      '\\'': '&#39;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '&': '&amp;',\n      '`': '&#96;'\n    };\n    var reverseEntities = {\n      '&lt;': '<',\n      '&gt;': '>',\n      '&amp;': '&',\n      '&quot;': '\"',\n      '&apos;': '\\''\n    };\n    var nativeDecode = function (text) {\n      var elm = SugarElement.fromTag('div').dom;\n      elm.innerHTML = text;\n      return elm.textContent || elm.innerText || text;\n    };\n    var buildEntitiesLookup = function (items, radix) {\n      var i, chr, entity;\n      var lookup = {};\n      if (items) {\n        items = items.split(',');\n        radix = radix || 10;\n        for (i = 0; i < items.length; i += 2) {\n          chr = String.fromCharCode(parseInt(items[i], radix));\n          if (!baseEntities[chr]) {\n            entity = '&' + items[i + 1] + ';';\n            lookup[chr] = entity;\n            lookup[entity] = chr;\n          }\n        }\n        return lookup;\n      }\n    };\n    var namedEntities = buildEntitiesLookup('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' + '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' + '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' + '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' + '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' + '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' + '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' + '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' + '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' + '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' + 'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' + 'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' + 't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' + 'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' + 'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' + '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' + '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' + '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' + '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' + '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' + 'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' + 'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' + 'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' + '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' + '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);\n    var encodeRaw = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeAllRaw = function (text) {\n      return ('' + text).replace(rawCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeNumeric = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        if (chr.length > 1) {\n          return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n        }\n        return baseEntities[chr] || '&#' + chr.charCodeAt(0) + ';';\n      });\n    };\n    var encodeNamed = function (text, attr, entities) {\n      entities = entities || namedEntities;\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || entities[chr] || chr;\n      });\n    };\n    var getEncodeFunc = function (name, entities) {\n      var entitiesMap = buildEntitiesLookup(entities) || namedEntities;\n      var encodeNamedAndNumeric = function (text, attr) {\n        return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n          if (baseEntities[chr] !== undefined) {\n            return baseEntities[chr];\n          }\n          if (entitiesMap[chr] !== undefined) {\n            return entitiesMap[chr];\n          }\n          if (chr.length > 1) {\n            return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n          }\n          return '&#' + chr.charCodeAt(0) + ';';\n        });\n      };\n      var encodeCustomNamed = function (text, attr) {\n        return encodeNamed(text, attr, entitiesMap);\n      };\n      var nameMap = makeMap$3(name.replace(/\\+/g, ','));\n      if (nameMap.named && nameMap.numeric) {\n        return encodeNamedAndNumeric;\n      }\n      if (nameMap.named) {\n        if (entities) {\n          return encodeCustomNamed;\n        }\n        return encodeNamed;\n      }\n      if (nameMap.numeric) {\n        return encodeNumeric;\n      }\n      return encodeRaw;\n    };\n    var decode = function (text) {\n      return text.replace(entityRegExp, function (all, numeric) {\n        if (numeric) {\n          if (numeric.charAt(0).toLowerCase() === 'x') {\n            numeric = parseInt(numeric.substr(1), 16);\n          } else {\n            numeric = parseInt(numeric, 10);\n          }\n          if (numeric > 65535) {\n            numeric -= 65536;\n            return String.fromCharCode(55296 + (numeric >> 10), 56320 + (numeric & 1023));\n          }\n          return asciiMap[numeric] || String.fromCharCode(numeric);\n        }\n        return reverseEntities[all] || namedEntities[all] || nativeDecode(all);\n      });\n    };\n    var Entities = {\n      encodeRaw: encodeRaw,\n      encodeAllRaw: encodeAllRaw,\n      encodeNumeric: encodeNumeric,\n      encodeNamed: encodeNamed,\n      getEncodeFunc: getEncodeFunc,\n      decode: decode\n    };\n\n    var mapCache = {}, dummyObj = {};\n    var makeMap$2 = Tools.makeMap, each$h = Tools.each, extend$5 = Tools.extend, explode$3 = Tools.explode, inArray$2 = Tools.inArray;\n    var split$1 = function (items, delim) {\n      items = Tools.trim(items);\n      return items ? items.split(delim || ' ') : [];\n    };\n    var createMap = function (defaultValue, extendWith) {\n      var value = makeMap$2(defaultValue, ' ', makeMap$2(defaultValue.toUpperCase(), ' '));\n      return extend$5(value, extendWith);\n    };\n    var getTextRootBlockElements = function (schema) {\n      return createMap('td th li dt dd figcaption caption details summary', schema.getTextBlockElements());\n    };\n    var compileSchema = function (type) {\n      var schema = {};\n      var globalAttributes, blockContent;\n      var phrasingContent, flowContent, html4BlockContent, html4PhrasingContent;\n      var add = function (name, attributes, children) {\n        var ni, attributesOrder, element;\n        var arrayToMap = function (array, obj) {\n          var map = {};\n          var i, l;\n          for (i = 0, l = array.length; i < l; i++) {\n            map[array[i]] = obj || {};\n          }\n          return map;\n        };\n        children = children || [];\n        attributes = attributes || '';\n        if (typeof children === 'string') {\n          children = split$1(children);\n        }\n        var names = split$1(name);\n        ni = names.length;\n        while (ni--) {\n          attributesOrder = split$1([\n            globalAttributes,\n            attributes\n          ].join(' '));\n          element = {\n            attributes: arrayToMap(attributesOrder),\n            attributesOrder: attributesOrder,\n            children: arrayToMap(children, dummyObj)\n          };\n          schema[names[ni]] = element;\n        }\n      };\n      var addAttrs = function (name, attributes) {\n        var ni, schemaItem, i, l;\n        var names = split$1(name);\n        ni = names.length;\n        var attrs = split$1(attributes);\n        while (ni--) {\n          schemaItem = schema[names[ni]];\n          for (i = 0, l = attrs.length; i < l; i++) {\n            schemaItem.attributes[attrs[i]] = {};\n            schemaItem.attributesOrder.push(attrs[i]);\n          }\n        }\n      };\n      if (mapCache[type]) {\n        return mapCache[type];\n      }\n      globalAttributes = 'id accesskey class dir lang style tabindex title role';\n      blockContent = 'address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul';\n      phrasingContent = 'a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd ' + 'label map noscript object q s samp script select small span strong sub sup ' + 'textarea u var #text #comment';\n      if (type !== 'html4') {\n        globalAttributes += ' contenteditable contextmenu draggable dropzone ' + 'hidden spellcheck translate';\n        blockContent += ' article aside details dialog figure main header footer hgroup section nav';\n        phrasingContent += ' audio canvas command datalist mark meter output picture ' + 'progress time wbr video ruby bdi keygen';\n      }\n      if (type !== 'html5-strict') {\n        globalAttributes += ' xml:lang';\n        html4PhrasingContent = 'acronym applet basefont big font strike tt';\n        phrasingContent = [\n          phrasingContent,\n          html4PhrasingContent\n        ].join(' ');\n        each$h(split$1(html4PhrasingContent), function (name) {\n          add(name, '', phrasingContent);\n        });\n        html4BlockContent = 'center dir isindex noframes';\n        blockContent = [\n          blockContent,\n          html4BlockContent\n        ].join(' ');\n        flowContent = [\n          blockContent,\n          phrasingContent\n        ].join(' ');\n        each$h(split$1(html4BlockContent), function (name) {\n          add(name, '', flowContent);\n        });\n      }\n      flowContent = flowContent || [\n        blockContent,\n        phrasingContent\n      ].join(' ');\n      add('html', 'manifest', 'head body');\n      add('head', '', 'base command link meta noscript script style title');\n      add('title hr noscript br');\n      add('base', 'href target');\n      add('link', 'href rel media hreflang type sizes hreflang');\n      add('meta', 'name http-equiv content charset');\n      add('style', 'media type scoped');\n      add('script', 'src async defer type charset');\n      add('body', 'onafterprint onbeforeprint onbeforeunload onblur onerror onfocus ' + 'onhashchange onload onmessage onoffline ononline onpagehide onpageshow ' + 'onpopstate onresize onscroll onstorage onunload', flowContent);\n      add('address dt dd div caption', '', flowContent);\n      add('h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn', '', phrasingContent);\n      add('blockquote', 'cite', flowContent);\n      add('ol', 'reversed start type', 'li');\n      add('ul', '', 'li');\n      add('li', 'value', flowContent);\n      add('dl', '', 'dt dd');\n      add('a', 'href target rel media hreflang type', phrasingContent);\n      add('q', 'cite', phrasingContent);\n      add('ins del', 'cite datetime', flowContent);\n      add('img', 'src sizes srcset alt usemap ismap width height');\n      add('iframe', 'src name width height', flowContent);\n      add('embed', 'src type width height');\n      add('object', 'data type typemustmatch name usemap form width height', [\n        flowContent,\n        'param'\n      ].join(' '));\n      add('param', 'name value');\n      add('map', 'name', [\n        flowContent,\n        'area'\n      ].join(' '));\n      add('area', 'alt coords shape href target rel media hreflang type');\n      add('table', 'border', 'caption colgroup thead tfoot tbody tr' + (type === 'html4' ? ' col' : ''));\n      add('colgroup', 'span', 'col');\n      add('col', 'span');\n      add('tbody thead tfoot', '', 'tr');\n      add('tr', '', 'td th');\n      add('td', 'colspan rowspan headers', flowContent);\n      add('th', 'colspan rowspan headers scope abbr', flowContent);\n      add('form', 'accept-charset action autocomplete enctype method name novalidate target', flowContent);\n      add('fieldset', 'disabled form name', [\n        flowContent,\n        'legend'\n      ].join(' '));\n      add('label', 'form for', phrasingContent);\n      add('input', 'accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate ' + 'formtarget height list max maxlength min multiple name pattern readonly required size src step type value width');\n      add('button', 'disabled form formaction formenctype formmethod formnovalidate formtarget name type value', type === 'html4' ? flowContent : phrasingContent);\n      add('select', 'disabled form multiple name required size', 'option optgroup');\n      add('optgroup', 'disabled label', 'option');\n      add('option', 'disabled label selected value');\n      add('textarea', 'cols dirname disabled form maxlength name readonly required rows wrap');\n      add('menu', 'type label', [\n        flowContent,\n        'li'\n      ].join(' '));\n      add('noscript', '', flowContent);\n      if (type !== 'html4') {\n        add('wbr');\n        add('ruby', '', [\n          phrasingContent,\n          'rt rp'\n        ].join(' '));\n        add('figcaption', '', flowContent);\n        add('mark rt rp summary bdi', '', phrasingContent);\n        add('canvas', 'width height', flowContent);\n        add('video', 'src crossorigin poster preload autoplay mediagroup loop ' + 'muted controls width height buffered', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('audio', 'src crossorigin preload autoplay mediagroup loop muted controls ' + 'buffered volume', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('picture', '', 'img source');\n        add('source', 'src srcset type media sizes');\n        add('track', 'kind src srclang label default');\n        add('datalist', '', [\n          phrasingContent,\n          'option'\n        ].join(' '));\n        add('article section nav aside main header footer', '', flowContent);\n        add('hgroup', '', 'h1 h2 h3 h4 h5 h6');\n        add('figure', '', [\n          flowContent,\n          'figcaption'\n        ].join(' '));\n        add('time', 'datetime', phrasingContent);\n        add('dialog', 'open', flowContent);\n        add('command', 'type label icon disabled checked radiogroup command');\n        add('output', 'for form name', phrasingContent);\n        add('progress', 'value max', phrasingContent);\n        add('meter', 'value min max low high optimum', phrasingContent);\n        add('details', 'open', [\n          flowContent,\n          'summary'\n        ].join(' '));\n        add('keygen', 'autofocus challenge disabled form keytype name');\n      }\n      if (type !== 'html5-strict') {\n        addAttrs('script', 'language xml:space');\n        addAttrs('style', 'xml:space');\n        addAttrs('object', 'declare classid code codebase codetype archive standby align border hspace vspace');\n        addAttrs('embed', 'align name hspace vspace');\n        addAttrs('param', 'valuetype type');\n        addAttrs('a', 'charset name rev shape coords');\n        addAttrs('br', 'clear');\n        addAttrs('applet', 'codebase archive code object alt name width height align hspace vspace');\n        addAttrs('img', 'name longdesc align border hspace vspace');\n        addAttrs('iframe', 'longdesc frameborder marginwidth marginheight scrolling align');\n        addAttrs('font basefont', 'size color face');\n        addAttrs('input', 'usemap align');\n        addAttrs('select');\n        addAttrs('textarea');\n        addAttrs('h1 h2 h3 h4 h5 h6 div p legend caption', 'align');\n        addAttrs('ul', 'type compact');\n        addAttrs('li', 'type');\n        addAttrs('ol dl menu dir', 'compact');\n        addAttrs('pre', 'width xml:space');\n        addAttrs('hr', 'align noshade size width');\n        addAttrs('isindex', 'prompt');\n        addAttrs('table', 'summary width frame rules cellspacing cellpadding align bgcolor');\n        addAttrs('col', 'width align char charoff valign');\n        addAttrs('colgroup', 'width align char charoff valign');\n        addAttrs('thead', 'align char charoff valign');\n        addAttrs('tr', 'align char charoff valign bgcolor');\n        addAttrs('th', 'axis align char charoff valign nowrap bgcolor width height');\n        addAttrs('form', 'accept');\n        addAttrs('td', 'abbr axis scope align char charoff valign nowrap bgcolor width height');\n        addAttrs('tfoot', 'align char charoff valign');\n        addAttrs('tbody', 'align char charoff valign');\n        addAttrs('area', 'nohref');\n        addAttrs('body', 'background bgcolor text link vlink alink');\n      }\n      if (type !== 'html4') {\n        addAttrs('input button select textarea', 'autofocus');\n        addAttrs('input textarea', 'placeholder');\n        addAttrs('a', 'download');\n        addAttrs('link script img', 'crossorigin');\n        addAttrs('img', 'loading');\n        addAttrs('iframe', 'sandbox seamless allowfullscreen loading');\n      }\n      each$h(split$1('a form meter progress dfn'), function (name) {\n        if (schema[name]) {\n          delete schema[name].children[name];\n        }\n      });\n      delete schema.caption.children.table;\n      delete schema.script;\n      mapCache[type] = schema;\n      return schema;\n    };\n    var compileElementMap = function (value, mode) {\n      var styles;\n      if (value) {\n        styles = {};\n        if (typeof value === 'string') {\n          value = { '*': value };\n        }\n        each$h(value, function (value, key) {\n          styles[key] = styles[key.toUpperCase()] = mode === 'map' ? makeMap$2(value, /[, ]/) : explode$3(value, /[, ]/);\n        });\n      }\n      return styles;\n    };\n    var Schema = function (settings) {\n      var elements = {};\n      var children = {};\n      var patternElements = [];\n      var customElementsMap = {}, specialElements = {};\n      var createLookupTable = function (option, defaultValue, extendWith) {\n        var value = settings[option];\n        if (!value) {\n          value = mapCache[option];\n          if (!value) {\n            value = createMap(defaultValue, extendWith);\n            mapCache[option] = value;\n          }\n        } else {\n          value = makeMap$2(value, /[, ]/, makeMap$2(value.toUpperCase(), /[, ]/));\n        }\n        return value;\n      };\n      settings = settings || {};\n      var schemaItems = compileSchema(settings.schema);\n      if (settings.verify_html === false) {\n        settings.valid_elements = '*[*]';\n      }\n      var validStyles = compileElementMap(settings.valid_styles);\n      var invalidStyles = compileElementMap(settings.invalid_styles, 'map');\n      var validClasses = compileElementMap(settings.valid_classes, 'map');\n      var whiteSpaceElementsMap = createLookupTable('whitespace_elements', 'pre script noscript style textarea video audio iframe object code');\n      var selfClosingElementsMap = createLookupTable('self_closing_elements', 'colgroup dd dt li option p td tfoot th thead tr');\n      var shortEndedElementsMap = createLookupTable('short_ended_elements', 'area base basefont br col frame hr img input isindex link ' + 'meta param embed source wbr track');\n      var boolAttrMap = createLookupTable('boolean_attributes', 'checked compact declare defer disabled ismap multiple nohref noresize ' + 'noshade nowrap readonly selected autoplay loop controls');\n      var nonEmptyOrMoveCaretBeforeOnEnter = 'td th iframe video audio object script code';\n      var nonEmptyElementsMap = createLookupTable('non_empty_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' pre', shortEndedElementsMap);\n      var moveCaretBeforeOnEnterElementsMap = createLookupTable('move_caret_before_on_enter_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' table', shortEndedElementsMap);\n      var textBlockElementsMap = createLookupTable('text_block_elements', 'h1 h2 h3 h4 h5 h6 p div address pre form ' + 'blockquote center dir fieldset header footer article section hgroup aside main nav figure');\n      var blockElementsMap = createLookupTable('block_elements', 'hr table tbody thead tfoot ' + 'th tr td li ol ul caption dl dt dd noscript menu isindex option ' + 'datalist select optgroup figcaption details summary', textBlockElementsMap);\n      var textInlineElementsMap = createLookupTable('text_inline_elements', 'span strong b em i font s strike u var cite ' + 'dfn code mark q sup sub samp');\n      each$h((settings.special || 'script noscript iframe noframes noembed title style textarea xmp').split(' '), function (name) {\n        specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n      });\n      var patternToRegExp = function (str) {\n        return new RegExp('^' + str.replace(/([?+*])/g, '.$1') + '$');\n      };\n      var addValidElements = function (validElements) {\n        var ei, el, ai, al, matches, element, attr, attrData, elementName, attrName, attrType, attributes, attributesOrder, prefix, outputName, globalAttributes, globalAttributesOrder, value;\n        var elementRuleRegExp = /^([#+\\-])?([^\\[!\\/]+)(?:\\/([^\\[!]+))?(?:(!?)\\[([^\\]]+)])?$/, attrRuleRegExp = /^([!\\-])?(\\w+[\\\\:]:\\w+|[^=:<]+)?(?:([=:<])(.*))?$/, hasPatternsRegExp = /[*?+]/;\n        if (validElements) {\n          var validElementsArr = split$1(validElements, ',');\n          if (elements['@']) {\n            globalAttributes = elements['@'].attributes;\n            globalAttributesOrder = elements['@'].attributesOrder;\n          }\n          for (ei = 0, el = validElementsArr.length; ei < el; ei++) {\n            matches = elementRuleRegExp.exec(validElementsArr[ei]);\n            if (matches) {\n              prefix = matches[1];\n              elementName = matches[2];\n              outputName = matches[3];\n              attrData = matches[5];\n              attributes = {};\n              attributesOrder = [];\n              element = {\n                attributes: attributes,\n                attributesOrder: attributesOrder\n              };\n              if (prefix === '#') {\n                element.paddEmpty = true;\n              }\n              if (prefix === '-') {\n                element.removeEmpty = true;\n              }\n              if (matches[4] === '!') {\n                element.removeEmptyAttrs = true;\n              }\n              if (globalAttributes) {\n                each$j(globalAttributes, function (value, key) {\n                  attributes[key] = value;\n                });\n                attributesOrder.push.apply(attributesOrder, globalAttributesOrder);\n              }\n              if (attrData) {\n                attrData = split$1(attrData, '|');\n                for (ai = 0, al = attrData.length; ai < al; ai++) {\n                  matches = attrRuleRegExp.exec(attrData[ai]);\n                  if (matches) {\n                    attr = {};\n                    attrType = matches[1];\n                    attrName = matches[2].replace(/[\\\\:]:/g, ':');\n                    prefix = matches[3];\n                    value = matches[4];\n                    if (attrType === '!') {\n                      element.attributesRequired = element.attributesRequired || [];\n                      element.attributesRequired.push(attrName);\n                      attr.required = true;\n                    }\n                    if (attrType === '-') {\n                      delete attributes[attrName];\n                      attributesOrder.splice(inArray$2(attributesOrder, attrName), 1);\n                      continue;\n                    }\n                    if (prefix) {\n                      if (prefix === '=') {\n                        element.attributesDefault = element.attributesDefault || [];\n                        element.attributesDefault.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.defaultValue = value;\n                      }\n                      if (prefix === ':') {\n                        element.attributesForced = element.attributesForced || [];\n                        element.attributesForced.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.forcedValue = value;\n                      }\n                      if (prefix === '<') {\n                        attr.validValues = makeMap$2(value, '?');\n                      }\n                    }\n                    if (hasPatternsRegExp.test(attrName)) {\n                      element.attributePatterns = element.attributePatterns || [];\n                      attr.pattern = patternToRegExp(attrName);\n                      element.attributePatterns.push(attr);\n                    } else {\n                      if (!attributes[attrName]) {\n                        attributesOrder.push(attrName);\n                      }\n                      attributes[attrName] = attr;\n                    }\n                  }\n                }\n              }\n              if (!globalAttributes && elementName === '@') {\n                globalAttributes = attributes;\n                globalAttributesOrder = attributesOrder;\n              }\n              if (outputName) {\n                element.outputName = elementName;\n                elements[outputName] = element;\n              }\n              if (hasPatternsRegExp.test(elementName)) {\n                element.pattern = patternToRegExp(elementName);\n                patternElements.push(element);\n              } else {\n                elements[elementName] = element;\n              }\n            }\n          }\n        }\n      };\n      var setValidElements = function (validElements) {\n        elements = {};\n        patternElements = [];\n        addValidElements(validElements);\n        each$h(schemaItems, function (element, name) {\n          children[name] = element.children;\n        });\n      };\n      var addCustomElements = function (customElements) {\n        var customElementRegExp = /^(~)?(.+)$/;\n        if (customElements) {\n          mapCache.text_block_elements = mapCache.block_elements = null;\n          each$h(split$1(customElements, ','), function (rule) {\n            var matches = customElementRegExp.exec(rule), inline = matches[1] === '~', cloneName = inline ? 'span' : 'div', name = matches[2];\n            children[name] = children[cloneName];\n            customElementsMap[name] = cloneName;\n            if (!inline) {\n              blockElementsMap[name.toUpperCase()] = {};\n              blockElementsMap[name] = {};\n            }\n            if (!elements[name]) {\n              var customRule = elements[cloneName];\n              customRule = extend$5({}, customRule);\n              delete customRule.removeEmptyAttrs;\n              delete customRule.removeEmpty;\n              elements[name] = customRule;\n            }\n            each$h(children, function (element, elmName) {\n              if (element[cloneName]) {\n                children[elmName] = element = extend$5({}, children[elmName]);\n                element[name] = element[cloneName];\n              }\n            });\n          });\n        }\n      };\n      var addValidChildren = function (validChildren) {\n        var childRuleRegExp = /^([+\\-]?)([A-Za-z0-9_\\-.\\u00b7\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u037d\\u037f-\\u1fff\\u200c-\\u200d\\u203f-\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]+)\\[([^\\]]+)]$/;\n        mapCache[settings.schema] = null;\n        if (validChildren) {\n          each$h(split$1(validChildren, ','), function (rule) {\n            var matches = childRuleRegExp.exec(rule);\n            var parent, prefix;\n            if (matches) {\n              prefix = matches[1];\n              if (prefix) {\n                parent = children[matches[2]];\n              } else {\n                parent = children[matches[2]] = { '#comment': {} };\n              }\n              parent = children[matches[2]];\n              each$h(split$1(matches[3], '|'), function (child) {\n                if (prefix === '-') {\n                  delete parent[child];\n                } else {\n                  parent[child] = {};\n                }\n              });\n            }\n          });\n        }\n      };\n      var getElementRule = function (name) {\n        var element = elements[name], i;\n        if (element) {\n          return element;\n        }\n        i = patternElements.length;\n        while (i--) {\n          element = patternElements[i];\n          if (element.pattern.test(name)) {\n            return element;\n          }\n        }\n      };\n      if (!settings.valid_elements) {\n        each$h(schemaItems, function (element, name) {\n          elements[name] = {\n            attributes: element.attributes,\n            attributesOrder: element.attributesOrder\n          };\n          children[name] = element.children;\n        });\n        if (settings.schema !== 'html5') {\n          each$h(split$1('strong/b em/i'), function (item) {\n            var items = split$1(item, '/');\n            elements[items[1]].outputName = items[0];\n          });\n        }\n        each$h(textInlineElementsMap, function (_val, name) {\n          if (elements[name]) {\n            if (settings.padd_empty_block_inline_children) {\n              elements[name].paddInEmptyBlock = true;\n            }\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$h(split$1('ol ul blockquote a table tbody'), function (name) {\n          if (elements[name]) {\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$h(split$1('p h1 h2 h3 h4 h5 h6 th td pre div address caption li'), function (name) {\n          elements[name].paddEmpty = true;\n        });\n        each$h(split$1('span'), function (name) {\n          elements[name].removeEmptyAttrs = true;\n        });\n      } else {\n        setValidElements(settings.valid_elements);\n      }\n      addCustomElements(settings.custom_elements);\n      addValidChildren(settings.valid_children);\n      addValidElements(settings.extended_valid_elements);\n      addValidChildren('+ol[ul|ol],+ul[ul|ol]');\n      each$h({\n        dd: 'dl',\n        dt: 'dl',\n        li: 'ul ol',\n        td: 'tr',\n        th: 'tr',\n        tr: 'tbody thead tfoot',\n        tbody: 'table',\n        thead: 'table',\n        tfoot: 'table',\n        legend: 'fieldset',\n        area: 'map',\n        param: 'video audio object'\n      }, function (parents, item) {\n        if (elements[item]) {\n          elements[item].parentsRequired = split$1(parents);\n        }\n      });\n      if (settings.invalid_elements) {\n        each$h(explode$3(settings.invalid_elements), function (item) {\n          if (elements[item]) {\n            delete elements[item];\n          }\n        });\n      }\n      if (!getElementRule('span')) {\n        addValidElements('span[!data-mce-type|*]');\n      }\n      var getValidStyles = constant(validStyles);\n      var getInvalidStyles = constant(invalidStyles);\n      var getValidClasses = constant(validClasses);\n      var getBoolAttrs = constant(boolAttrMap);\n      var getBlockElements = constant(blockElementsMap);\n      var getTextBlockElements = constant(textBlockElementsMap);\n      var getTextInlineElements = constant(textInlineElementsMap);\n      var getShortEndedElements = constant(shortEndedElementsMap);\n      var getSelfClosingElements = constant(selfClosingElementsMap);\n      var getNonEmptyElements = constant(nonEmptyElementsMap);\n      var getMoveCaretBeforeOnEnterElements = constant(moveCaretBeforeOnEnterElementsMap);\n      var getWhiteSpaceElements = constant(whiteSpaceElementsMap);\n      var getSpecialElements = constant(specialElements);\n      var isValidChild = function (name, child) {\n        var parent = children[name.toLowerCase()];\n        return !!(parent && parent[child.toLowerCase()]);\n      };\n      var isValid = function (name, attr) {\n        var attrPatterns, i;\n        var rule = getElementRule(name);\n        if (rule) {\n          if (attr) {\n            if (rule.attributes[attr]) {\n              return true;\n            }\n            attrPatterns = rule.attributePatterns;\n            if (attrPatterns) {\n              i = attrPatterns.length;\n              while (i--) {\n                if (attrPatterns[i].pattern.test(name)) {\n                  return true;\n                }\n              }\n            }\n          } else {\n            return true;\n          }\n        }\n        return false;\n      };\n      var getCustomElements = constant(customElementsMap);\n      return {\n        children: children,\n        elements: elements,\n        getValidStyles: getValidStyles,\n        getValidClasses: getValidClasses,\n        getBlockElements: getBlockElements,\n        getInvalidStyles: getInvalidStyles,\n        getShortEndedElements: getShortEndedElements,\n        getTextBlockElements: getTextBlockElements,\n        getTextInlineElements: getTextInlineElements,\n        getBoolAttrs: getBoolAttrs,\n        getElementRule: getElementRule,\n        getSelfClosingElements: getSelfClosingElements,\n        getNonEmptyElements: getNonEmptyElements,\n        getMoveCaretBeforeOnEnterElements: getMoveCaretBeforeOnEnterElements,\n        getWhiteSpaceElements: getWhiteSpaceElements,\n        getSpecialElements: getSpecialElements,\n        isValidChild: isValidChild,\n        isValid: isValid,\n        getCustomElements: getCustomElements,\n        addValidElements: addValidElements,\n        setValidElements: setValidElements,\n        addCustomElements: addCustomElements,\n        addValidChildren: addValidChildren\n      };\n    };\n\n    var toHex = function (match, r, g, b) {\n      var hex = function (val) {\n        val = parseInt(val, 10).toString(16);\n        return val.length > 1 ? val : '0' + val;\n      };\n      return '#' + hex(r) + hex(g) + hex(b);\n    };\n    var Styles = function (settings, schema) {\n      var _this = this;\n      var rgbRegExp = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi;\n      var urlOrStrRegExp = /(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi;\n      var styleRegExp = /\\s*([^:]+):\\s*([^;]+);?/g;\n      var trimRightRegExp = /\\s+$/;\n      var i;\n      var encodingLookup = {};\n      var validStyles;\n      var invalidStyles;\n      var invisibleChar = zeroWidth;\n      settings = settings || {};\n      if (schema) {\n        validStyles = schema.getValidStyles();\n        invalidStyles = schema.getInvalidStyles();\n      }\n      var encodingItems = ('\\\\\" \\\\\\' \\\\; \\\\: ; : ' + invisibleChar).split(' ');\n      for (i = 0; i < encodingItems.length; i++) {\n        encodingLookup[encodingItems[i]] = invisibleChar + i;\n        encodingLookup[invisibleChar + i] = encodingItems[i];\n      }\n      return {\n        toHex: function (color) {\n          return color.replace(rgbRegExp, toHex);\n        },\n        parse: function (css) {\n          var styles = {};\n          var matches, name, value, isEncoded;\n          var urlConverter = settings.url_converter;\n          var urlConverterScope = settings.url_converter_scope || _this;\n          var compress = function (prefix, suffix, noJoin) {\n            var top = styles[prefix + '-top' + suffix];\n            if (!top) {\n              return;\n            }\n            var right = styles[prefix + '-right' + suffix];\n            if (!right) {\n              return;\n            }\n            var bottom = styles[prefix + '-bottom' + suffix];\n            if (!bottom) {\n              return;\n            }\n            var left = styles[prefix + '-left' + suffix];\n            if (!left) {\n              return;\n            }\n            var box = [\n              top,\n              right,\n              bottom,\n              left\n            ];\n            i = box.length - 1;\n            while (i--) {\n              if (box[i] !== box[i + 1]) {\n                break;\n              }\n            }\n            if (i > -1 && noJoin) {\n              return;\n            }\n            styles[prefix + suffix] = i === -1 ? box[0] : box.join(' ');\n            delete styles[prefix + '-top' + suffix];\n            delete styles[prefix + '-right' + suffix];\n            delete styles[prefix + '-bottom' + suffix];\n            delete styles[prefix + '-left' + suffix];\n          };\n          var canCompress = function (key) {\n            var value = styles[key], i;\n            if (!value) {\n              return;\n            }\n            value = value.split(' ');\n            i = value.length;\n            while (i--) {\n              if (value[i] !== value[0]) {\n                return false;\n              }\n            }\n            styles[key] = value[0];\n            return true;\n          };\n          var compress2 = function (target, a, b, c) {\n            if (!canCompress(a)) {\n              return;\n            }\n            if (!canCompress(b)) {\n              return;\n            }\n            if (!canCompress(c)) {\n              return;\n            }\n            styles[target] = styles[a] + ' ' + styles[b] + ' ' + styles[c];\n            delete styles[a];\n            delete styles[b];\n            delete styles[c];\n          };\n          var encode = function (str) {\n            isEncoded = true;\n            return encodingLookup[str];\n          };\n          var decode = function (str, keepSlashes) {\n            if (isEncoded) {\n              str = str.replace(/\\uFEFF[0-9]/g, function (str) {\n                return encodingLookup[str];\n              });\n            }\n            if (!keepSlashes) {\n              str = str.replace(/\\\\([\\'\\\";:])/g, '$1');\n            }\n            return str;\n          };\n          var decodeSingleHexSequence = function (escSeq) {\n            return String.fromCharCode(parseInt(escSeq.slice(1), 16));\n          };\n          var decodeHexSequences = function (value) {\n            return value.replace(/\\\\[0-9a-f]+/gi, decodeSingleHexSequence);\n          };\n          var processUrl = function (match, url, url2, url3, str, str2) {\n            str = str || str2;\n            if (str) {\n              str = decode(str);\n              return '\\'' + str.replace(/\\'/g, '\\\\\\'') + '\\'';\n            }\n            url = decode(url || url2 || url3);\n            if (!settings.allow_script_urls) {\n              var scriptUrl = url.replace(/[\\s\\r\\n]+/g, '');\n              if (/(java|vb)script:/i.test(scriptUrl)) {\n                return '';\n              }\n              if (!settings.allow_svg_data_urls && /^data:image\\/svg/i.test(scriptUrl)) {\n                return '';\n              }\n            }\n            if (urlConverter) {\n              url = urlConverter.call(urlConverterScope, url, 'style');\n            }\n            return 'url(\\'' + url.replace(/\\'/g, '\\\\\\'') + '\\')';\n          };\n          if (css) {\n            css = css.replace(/[\\u0000-\\u001F]/g, '');\n            css = css.replace(/\\\\[\\\"\\';:\\uFEFF]/g, encode).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g, function (str) {\n              return str.replace(/[;:]/g, encode);\n            });\n            while (matches = styleRegExp.exec(css)) {\n              styleRegExp.lastIndex = matches.index + matches[0].length;\n              name = matches[1].replace(trimRightRegExp, '').toLowerCase();\n              value = matches[2].replace(trimRightRegExp, '');\n              if (name && value) {\n                name = decodeHexSequences(name);\n                value = decodeHexSequences(value);\n                if (name.indexOf(invisibleChar) !== -1 || name.indexOf('\"') !== -1) {\n                  continue;\n                }\n                if (!settings.allow_script_urls && (name === 'behavior' || /expression\\s*\\(|\\/\\*|\\*\\//.test(value))) {\n                  continue;\n                }\n                if (name === 'font-weight' && value === '700') {\n                  value = 'bold';\n                } else if (name === 'color' || name === 'background-color') {\n                  value = value.toLowerCase();\n                }\n                value = value.replace(rgbRegExp, toHex);\n                value = value.replace(urlOrStrRegExp, processUrl);\n                styles[name] = isEncoded ? decode(value, true) : value;\n              }\n            }\n            compress('border', '', true);\n            compress('border', '-width');\n            compress('border', '-color');\n            compress('border', '-style');\n            compress('padding', '');\n            compress('margin', '');\n            compress2('border', 'border-width', 'border-style', 'border-color');\n            if (styles.border === 'medium none') {\n              delete styles.border;\n            }\n            if (styles['border-image'] === 'none') {\n              delete styles['border-image'];\n            }\n          }\n          return styles;\n        },\n        serialize: function (styles, elementName) {\n          var css = '';\n          var serializeStyles = function (name) {\n            var value;\n            var styleList = validStyles[name];\n            if (styleList) {\n              for (var i_1 = 0, l = styleList.length; i_1 < l; i_1++) {\n                name = styleList[i_1];\n                value = styles[name];\n                if (value) {\n                  css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n                }\n              }\n            }\n          };\n          var isValid = function (name, elementName) {\n            var styleMap = invalidStyles['*'];\n            if (styleMap && styleMap[name]) {\n              return false;\n            }\n            styleMap = invalidStyles[elementName];\n            return !(styleMap && styleMap[name]);\n          };\n          if (elementName && validStyles) {\n            serializeStyles('*');\n            serializeStyles(elementName);\n          } else {\n            each$j(styles, function (value, name) {\n              if (value && (!invalidStyles || isValid(name, elementName))) {\n                css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n              }\n            });\n          }\n          return css;\n        }\n      };\n    };\n\n    var deprecated = {\n      keyLocation: true,\n      layerX: true,\n      layerY: true,\n      returnValue: true,\n      webkitMovementX: true,\n      webkitMovementY: true,\n      keyIdentifier: true,\n      mozPressure: true\n    };\n    var isNativeEvent = function (event) {\n      return event instanceof Event || isFunction(event.initEvent);\n    };\n    var hasIsDefaultPrevented = function (event) {\n      return event.isDefaultPrevented === always || event.isDefaultPrevented === never;\n    };\n    var needsNormalizing = function (event) {\n      return isNullable(event.preventDefault) || isNativeEvent(event);\n    };\n    var clone$2 = function (originalEvent, data) {\n      var event = data !== null && data !== void 0 ? data : {};\n      for (var name_1 in originalEvent) {\n        if (!has$2(deprecated, name_1)) {\n          event[name_1] = originalEvent[name_1];\n        }\n      }\n      if (isNonNullable(event.composedPath)) {\n        event.composedPath = function () {\n          return originalEvent.composedPath();\n        };\n      }\n      return event;\n    };\n    var normalize$3 = function (type, originalEvent, fallbackTarget, data) {\n      var _a;\n      var event = clone$2(originalEvent, data);\n      event.type = type;\n      if (isNullable(event.target)) {\n        event.target = (_a = event.srcElement) !== null && _a !== void 0 ? _a : fallbackTarget;\n      }\n      if (needsNormalizing(originalEvent)) {\n        event.preventDefault = function () {\n          event.defaultPrevented = true;\n          event.isDefaultPrevented = always;\n          if (isFunction(originalEvent.preventDefault)) {\n            originalEvent.preventDefault();\n          } else if (isNativeEvent(originalEvent)) {\n            originalEvent.returnValue = false;\n          }\n        };\n        event.stopPropagation = function () {\n          event.cancelBubble = true;\n          event.isPropagationStopped = always;\n          if (isFunction(originalEvent.stopPropagation)) {\n            originalEvent.stopPropagation();\n          } else if (isNativeEvent(originalEvent)) {\n            originalEvent.cancelBubble = true;\n          }\n        };\n        event.stopImmediatePropagation = function () {\n          event.isImmediatePropagationStopped = always;\n          event.stopPropagation();\n        };\n        if (!hasIsDefaultPrevented(event)) {\n          event.isDefaultPrevented = event.defaultPrevented === true ? always : never;\n          event.isPropagationStopped = event.cancelBubble === true ? always : never;\n          event.isImmediatePropagationStopped = never;\n        }\n      }\n      return event;\n    };\n\n    var eventExpandoPrefix = 'mce-data-';\n    var mouseEventRe = /^(?:mouse|contextmenu)|click/;\n    var addEvent = function (target, name, callback, capture) {\n      if (target.addEventListener) {\n        target.addEventListener(name, callback, capture || false);\n      } else if (target.attachEvent) {\n        target.attachEvent('on' + name, callback);\n      }\n    };\n    var removeEvent = function (target, name, callback, capture) {\n      if (target.removeEventListener) {\n        target.removeEventListener(name, callback, capture || false);\n      } else if (target.detachEvent) {\n        target.detachEvent('on' + name, callback);\n      }\n    };\n    var isMouseEvent = function (event) {\n      return isNonNullable(event) && mouseEventRe.test(event.type);\n    };\n    var fix = function (originalEvent, data) {\n      var event = normalize$3(originalEvent.type, originalEvent, document, data);\n      if (isMouseEvent(originalEvent) && isUndefined(originalEvent.pageX) && !isUndefined(originalEvent.clientX)) {\n        var eventDoc = event.target.ownerDocument || document;\n        var doc = eventDoc.documentElement;\n        var body = eventDoc.body;\n        var mouseEvent = event;\n        mouseEvent.pageX = originalEvent.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n        mouseEvent.pageY = originalEvent.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n      }\n      if (isUndefined(event.metaKey)) {\n        event.metaKey = false;\n      }\n      return event;\n    };\n    var bindOnReady = function (win, callback, eventUtils) {\n      var doc = win.document, event = { type: 'ready' };\n      if (eventUtils.domLoaded) {\n        callback(event);\n        return;\n      }\n      var isDocReady = function () {\n        return doc.readyState === 'complete' || doc.readyState === 'interactive' && doc.body;\n      };\n      var readyHandler = function () {\n        removeEvent(win, 'DOMContentLoaded', readyHandler);\n        removeEvent(win, 'load', readyHandler);\n        if (!eventUtils.domLoaded) {\n          eventUtils.domLoaded = true;\n          callback(event);\n        }\n        win = null;\n      };\n      if (isDocReady()) {\n        readyHandler();\n      } else {\n        addEvent(win, 'DOMContentLoaded', readyHandler);\n      }\n      if (!eventUtils.domLoaded) {\n        addEvent(win, 'load', readyHandler);\n      }\n    };\n    var EventUtils = function () {\n      function EventUtils() {\n        this.domLoaded = false;\n        this.events = {};\n        this.count = 1;\n        this.expando = eventExpandoPrefix + (+new Date()).toString(32);\n        this.hasMouseEnterLeave = 'onmouseenter' in document.documentElement;\n        this.hasFocusIn = 'onfocusin' in document.documentElement;\n        this.count = 1;\n      }\n      EventUtils.prototype.bind = function (target, names, callback, scope) {\n        var self = this;\n        var id, callbackList, i, name, fakeName, nativeHandler, capture;\n        var win = window;\n        var defaultNativeHandler = function (evt) {\n          self.executeHandlers(fix(evt || win.event), id);\n        };\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return;\n        }\n        if (!target[self.expando]) {\n          id = self.count++;\n          target[self.expando] = id;\n          self.events[id] = {};\n        } else {\n          id = target[self.expando];\n        }\n        scope = scope || target;\n        var namesList = names.split(' ');\n        i = namesList.length;\n        while (i--) {\n          name = namesList[i];\n          nativeHandler = defaultNativeHandler;\n          fakeName = capture = false;\n          if (name === 'DOMContentLoaded') {\n            name = 'ready';\n          }\n          if (self.domLoaded && name === 'ready' && target.readyState === 'complete') {\n            callback.call(scope, fix({ type: name }));\n            continue;\n          }\n          if (!self.hasMouseEnterLeave) {\n            fakeName = self.mouseEnterLeave[name];\n            if (fakeName) {\n              nativeHandler = function (evt) {\n                var current = evt.currentTarget;\n                var related = evt.relatedTarget;\n                if (related && current.contains) {\n                  related = current.contains(related);\n                } else {\n                  while (related && related !== current) {\n                    related = related.parentNode;\n                  }\n                }\n                if (!related) {\n                  evt = fix(evt || win.event);\n                  evt.type = evt.type === 'mouseout' ? 'mouseleave' : 'mouseenter';\n                  evt.target = current;\n                  self.executeHandlers(evt, id);\n                }\n              };\n            }\n          }\n          if (!self.hasFocusIn && (name === 'focusin' || name === 'focusout')) {\n            capture = true;\n            fakeName = name === 'focusin' ? 'focus' : 'blur';\n            nativeHandler = function (evt) {\n              evt = fix(evt || win.event);\n              evt.type = evt.type === 'focus' ? 'focusin' : 'focusout';\n              self.executeHandlers(evt, id);\n            };\n          }\n          callbackList = self.events[id][name];\n          if (!callbackList) {\n            self.events[id][name] = callbackList = [{\n                func: callback,\n                scope: scope\n              }];\n            callbackList.fakeName = fakeName;\n            callbackList.capture = capture;\n            callbackList.nativeHandler = nativeHandler;\n            if (name === 'ready') {\n              bindOnReady(target, nativeHandler, self);\n            } else {\n              addEvent(target, fakeName || name, nativeHandler, capture);\n            }\n          } else {\n            if (name === 'ready' && self.domLoaded) {\n              callback(fix({ type: name }));\n            } else {\n              callbackList.push({\n                func: callback,\n                scope: scope\n              });\n            }\n          }\n        }\n        target = callbackList = null;\n        return callback;\n      };\n      EventUtils.prototype.unbind = function (target, names, callback) {\n        var callbackList, i, ci, name, eventMap;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        var id = target[this.expando];\n        if (id) {\n          eventMap = this.events[id];\n          if (names) {\n            var namesList = names.split(' ');\n            i = namesList.length;\n            while (i--) {\n              name = namesList[i];\n              callbackList = eventMap[name];\n              if (callbackList) {\n                if (callback) {\n                  ci = callbackList.length;\n                  while (ci--) {\n                    if (callbackList[ci].func === callback) {\n                      var nativeHandler = callbackList.nativeHandler;\n                      var fakeName = callbackList.fakeName, capture = callbackList.capture;\n                      callbackList = callbackList.slice(0, ci).concat(callbackList.slice(ci + 1));\n                      callbackList.nativeHandler = nativeHandler;\n                      callbackList.fakeName = fakeName;\n                      callbackList.capture = capture;\n                      eventMap[name] = callbackList;\n                    }\n                  }\n                }\n                if (!callback || callbackList.length === 0) {\n                  delete eventMap[name];\n                  removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n                }\n              }\n            }\n          } else {\n            each$j(eventMap, function (callbackList, name) {\n              removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n            });\n            eventMap = {};\n          }\n          for (name in eventMap) {\n            if (has$2(eventMap, name)) {\n              return this;\n            }\n          }\n          delete this.events[id];\n          try {\n            delete target[this.expando];\n          } catch (ex) {\n            target[this.expando] = null;\n          }\n        }\n        return this;\n      };\n      EventUtils.prototype.fire = function (target, name, args) {\n        var id;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        var event = fix({\n          type: name,\n          target: target\n        }, args);\n        do {\n          id = target[this.expando];\n          if (id) {\n            this.executeHandlers(event, id);\n          }\n          target = target.parentNode || target.ownerDocument || target.defaultView || target.parentWindow;\n        } while (target && !event.isPropagationStopped());\n        return this;\n      };\n      EventUtils.prototype.clean = function (target) {\n        var i, children;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        if (target[this.expando]) {\n          this.unbind(target);\n        }\n        if (!target.getElementsByTagName) {\n          target = target.document;\n        }\n        if (target && target.getElementsByTagName) {\n          this.unbind(target);\n          children = target.getElementsByTagName('*');\n          i = children.length;\n          while (i--) {\n            target = children[i];\n            if (target[this.expando]) {\n              this.unbind(target);\n            }\n          }\n        }\n        return this;\n      };\n      EventUtils.prototype.destroy = function () {\n        this.events = {};\n      };\n      EventUtils.prototype.cancel = function (e) {\n        if (e) {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n        return false;\n      };\n      EventUtils.prototype.executeHandlers = function (evt, id) {\n        var container = this.events[id];\n        var callbackList = container && container[evt.type];\n        if (callbackList) {\n          for (var i = 0, l = callbackList.length; i < l; i++) {\n            var callback = callbackList[i];\n            if (callback && callback.func.call(callback.scope, evt) === false) {\n              evt.preventDefault();\n            }\n            if (evt.isImmediatePropagationStopped()) {\n              return;\n            }\n          }\n        }\n      };\n      EventUtils.Event = new EventUtils();\n      return EventUtils;\n    }();\n\n    var support, Expr, getText, isXML, tokenize, compile, select$1, outermostContext, sortInput, hasDuplicate, setDocument, document$1, docElem, documentIsHTML, rbuggyQSA, rbuggyMatches, matches, contains, expando = 'sizzle' + -new Date(), preferredDoc = window.document, dirruns = 0, done = 0, classCache = createCache(), tokenCache = createCache(), compilerCache = createCache(), sortOrder = function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n        }\n        return 0;\n      }, strundefined = typeof undefined, MAX_NEGATIVE = 1 << 31, hasOwn = {}.hasOwnProperty, arr = [], pop = arr.pop, push_native = arr.push, push$1 = arr.push, slice$1 = arr.slice, indexOf = arr.indexOf || function (elem) {\n        var i = 0, len = this.length;\n        for (; i < len; i++) {\n          if (this[i] === elem) {\n            return i;\n          }\n        }\n        return -1;\n      }, booleans = 'checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped', whitespace = '[\\\\x20\\\\t\\\\r\\\\n\\\\f]', identifier = '(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+', attributes = '\\\\[' + whitespace + '*(' + identifier + ')(?:' + whitespace + '*([*^$|!~]?=)' + whitespace + '*(?:\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\"|(' + identifier + '))|)' + whitespace + '*\\\\]', pseudos = ':(' + identifier + ')(?:\\\\((' + '(\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\")|' + '((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|' + attributes + ')*)|' + '.*' + ')\\\\)|)', rtrim = new RegExp('^' + whitespace + '+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)' + whitespace + '+$', 'g'), rcomma = new RegExp('^' + whitespace + '*,' + whitespace + '*'), rcombinators = new RegExp('^' + whitespace + '*([>+~]|' + whitespace + ')' + whitespace + '*'), rattributeQuotes = new RegExp('=' + whitespace + '*([^\\\\]\\'\"]*?)' + whitespace + '*\\\\]', 'g'), rpseudo = new RegExp(pseudos), ridentifier = new RegExp('^' + identifier + '$'), matchExpr = {\n        ID: new RegExp('^#(' + identifier + ')'),\n        CLASS: new RegExp('^\\\\.(' + identifier + ')'),\n        TAG: new RegExp('^(' + identifier + '|[*])'),\n        ATTR: new RegExp('^' + attributes),\n        PSEUDO: new RegExp('^' + pseudos),\n        CHILD: new RegExp('^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(' + whitespace + '*(even|odd|(([+-]|)(\\\\d*)n|)' + whitespace + '*(?:([+-]|)' + whitespace + '*(\\\\d+)|))' + whitespace + '*\\\\)|)', 'i'),\n        bool: new RegExp('^(?:' + booleans + ')$', 'i'),\n        needsContext: new RegExp('^' + whitespace + '*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(' + whitespace + '*((?:-\\\\d)?\\\\d*)' + whitespace + '*\\\\)|)(?=[^-]|$)', 'i')\n      }, rinputs = /^(?:input|select|textarea|button)$/i, rheader = /^h\\d$/i, rnative = /^[^{]+\\{\\s*\\[native \\w/, rquickExpr$1 = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/, rsibling = /[+~]/, rescape = /'|\\\\/g, runescape = new RegExp('\\\\\\\\([\\\\da-f]{1,6}' + whitespace + '?|(' + whitespace + ')|.)', 'ig'), funescape = function (_, escaped, escapedWhitespace) {\n        var high = '0x' + escaped - 65536;\n        return high !== high || escapedWhitespace ? escaped : high < 0 ? String.fromCharCode(high + 65536) : String.fromCharCode(high >> 10 | 55296, high & 1023 | 56320);\n      };\n    try {\n      push$1.apply(arr = slice$1.call(preferredDoc.childNodes), preferredDoc.childNodes);\n      arr[preferredDoc.childNodes.length].nodeType;\n    } catch (e) {\n      push$1 = {\n        apply: arr.length ? function (target, els) {\n          push_native.apply(target, slice$1.call(els));\n        } : function (target, els) {\n          var j = target.length, i = 0;\n          while (target[j++] = els[i++]) {\n          }\n          target.length = j - 1;\n        }\n      };\n    }\n    var Sizzle = function (selector, context, results, seed) {\n      var match, elem, m, nodeType, i, groups, old, nid, newContext, newSelector;\n      if ((context ? context.ownerDocument || context : preferredDoc) !== document$1) {\n        setDocument(context);\n      }\n      context = context || document$1;\n      results = results || [];\n      if (!selector || typeof selector !== 'string') {\n        return results;\n      }\n      if ((nodeType = context.nodeType) !== 1 && nodeType !== 9) {\n        return [];\n      }\n      if (documentIsHTML && !seed) {\n        if (match = rquickExpr$1.exec(selector)) {\n          if (m = match[1]) {\n            if (nodeType === 9) {\n              elem = context.getElementById(m);\n              if (elem && elem.parentNode) {\n                if (elem.id === m) {\n                  results.push(elem);\n                  return results;\n                }\n              } else {\n                return results;\n              }\n            } else {\n              if (context.ownerDocument && (elem = context.ownerDocument.getElementById(m)) && contains(context, elem) && elem.id === m) {\n                results.push(elem);\n                return results;\n              }\n            }\n          } else if (match[2]) {\n            push$1.apply(results, context.getElementsByTagName(selector));\n            return results;\n          } else if ((m = match[3]) && support.getElementsByClassName) {\n            push$1.apply(results, context.getElementsByClassName(m));\n            return results;\n          }\n        }\n        if (support.qsa && (!rbuggyQSA || !rbuggyQSA.test(selector))) {\n          nid = old = expando;\n          newContext = context;\n          newSelector = nodeType === 9 && selector;\n          if (nodeType === 1 && context.nodeName.toLowerCase() !== 'object') {\n            groups = tokenize(selector);\n            if (old = context.getAttribute('id')) {\n              nid = old.replace(rescape, '\\\\$&');\n            } else {\n              context.setAttribute('id', nid);\n            }\n            nid = '[id=\\'' + nid + '\\'] ';\n            i = groups.length;\n            while (i--) {\n              groups[i] = nid + toSelector(groups[i]);\n            }\n            newContext = rsibling.test(selector) && testContext(context.parentNode) || context;\n            newSelector = groups.join(',');\n          }\n          if (newSelector) {\n            try {\n              push$1.apply(results, newContext.querySelectorAll(newSelector));\n              return results;\n            } catch (qsaError) {\n            } finally {\n              if (!old) {\n                context.removeAttribute('id');\n              }\n            }\n          }\n        }\n      }\n      return select$1(selector.replace(rtrim, '$1'), context, results, seed);\n    };\n    function createCache() {\n      var keys = [];\n      function cache(key, value) {\n        if (keys.push(key + ' ') > Expr.cacheLength) {\n          delete cache[keys.shift()];\n        }\n        return cache[key + ' '] = value;\n      }\n      return cache;\n    }\n    function markFunction(fn) {\n      fn[expando] = true;\n      return fn;\n    }\n    function siblingCheck(a, b) {\n      var cur = b && a, diff = cur && a.nodeType === 1 && b.nodeType === 1 && (~b.sourceIndex || MAX_NEGATIVE) - (~a.sourceIndex || MAX_NEGATIVE);\n      if (diff) {\n        return diff;\n      }\n      if (cur) {\n        while (cur = cur.nextSibling) {\n          if (cur === b) {\n            return -1;\n          }\n        }\n      }\n      return a ? 1 : -1;\n    }\n    function createInputPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return name === 'input' && elem.type === type;\n      };\n    }\n    function createButtonPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return (name === 'input' || name === 'button') && elem.type === type;\n      };\n    }\n    function createPositionalPseudo(fn) {\n      return markFunction(function (argument) {\n        argument = +argument;\n        return markFunction(function (seed, matches) {\n          var j, matchIndexes = fn([], seed.length, argument), i = matchIndexes.length;\n          while (i--) {\n            if (seed[j = matchIndexes[i]]) {\n              seed[j] = !(matches[j] = seed[j]);\n            }\n          }\n        });\n      });\n    }\n    function testContext(context) {\n      return context && typeof context.getElementsByTagName !== strundefined && context;\n    }\n    support = Sizzle.support = {};\n    isXML = Sizzle.isXML = function (elem) {\n      var documentElement = elem && (elem.ownerDocument || elem).documentElement;\n      return documentElement ? documentElement.nodeName !== 'HTML' : false;\n    };\n    setDocument = Sizzle.setDocument = function (node) {\n      var hasCompare, doc = node ? node.ownerDocument || node : preferredDoc, parent = doc.defaultView;\n      function getTop(win) {\n        try {\n          return win.top;\n        } catch (ex) {\n        }\n        return null;\n      }\n      if (doc === document$1 || doc.nodeType !== 9 || !doc.documentElement) {\n        return document$1;\n      }\n      document$1 = doc;\n      docElem = doc.documentElement;\n      documentIsHTML = !isXML(doc);\n      if (parent && parent !== getTop(parent)) {\n        if (parent.addEventListener) {\n          parent.addEventListener('unload', function () {\n            setDocument();\n          }, false);\n        } else if (parent.attachEvent) {\n          parent.attachEvent('onunload', function () {\n            setDocument();\n          });\n        }\n      }\n      support.attributes = true;\n      support.getElementsByTagName = true;\n      support.getElementsByClassName = rnative.test(doc.getElementsByClassName);\n      support.getById = true;\n      Expr.find.ID = function (id, context) {\n        if (typeof context.getElementById !== strundefined && documentIsHTML) {\n          var m = context.getElementById(id);\n          return m && m.parentNode ? [m] : [];\n        }\n      };\n      Expr.filter.ID = function (id) {\n        var attrId = id.replace(runescape, funescape);\n        return function (elem) {\n          return elem.getAttribute('id') === attrId;\n        };\n      };\n      Expr.find.TAG = support.getElementsByTagName ? function (tag, context) {\n        if (typeof context.getElementsByTagName !== strundefined) {\n          return context.getElementsByTagName(tag);\n        }\n      } : function (tag, context) {\n        var elem, tmp = [], i = 0, results = context.getElementsByTagName(tag);\n        if (tag === '*') {\n          while (elem = results[i++]) {\n            if (elem.nodeType === 1) {\n              tmp.push(elem);\n            }\n          }\n          return tmp;\n        }\n        return results;\n      };\n      Expr.find.CLASS = support.getElementsByClassName && function (className, context) {\n        if (documentIsHTML) {\n          return context.getElementsByClassName(className);\n        }\n      };\n      rbuggyMatches = [];\n      rbuggyQSA = [];\n      support.disconnectedMatch = true;\n      rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join('|'));\n      rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join('|'));\n      hasCompare = rnative.test(docElem.compareDocumentPosition);\n      contains = hasCompare || rnative.test(docElem.contains) ? function (a, b) {\n        var adown = a.nodeType === 9 ? a.documentElement : a, bup = b && b.parentNode;\n        return a === bup || !!(bup && bup.nodeType === 1 && (adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));\n      } : function (a, b) {\n        if (b) {\n          while (b = b.parentNode) {\n            if (b === a) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n      sortOrder = hasCompare ? function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n        if (compare) {\n          return compare;\n        }\n        compare = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1;\n        if (compare & 1 || !support.sortDetached && b.compareDocumentPosition(a) === compare) {\n          if (a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a)) {\n            return -1;\n          }\n          if (b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b)) {\n            return 1;\n          }\n          return sortInput ? indexOf.call(sortInput, a) - indexOf.call(sortInput, b) : 0;\n        }\n        return compare & 4 ? -1 : 1;\n      } : function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var cur, i = 0, aup = a.parentNode, bup = b.parentNode, ap = [a], bp = [b];\n        if (!aup || !bup) {\n          return a === doc ? -1 : b === doc ? 1 : aup ? -1 : bup ? 1 : sortInput ? indexOf.call(sortInput, a) - indexOf.call(sortInput, b) : 0;\n        } else if (aup === bup) {\n          return siblingCheck(a, b);\n        }\n        cur = a;\n        while (cur = cur.parentNode) {\n          ap.unshift(cur);\n        }\n        cur = b;\n        while (cur = cur.parentNode) {\n          bp.unshift(cur);\n        }\n        while (ap[i] === bp[i]) {\n          i++;\n        }\n        return i ? siblingCheck(ap[i], bp[i]) : ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0;\n      };\n      return doc;\n    };\n    Sizzle.matches = function (expr, elements) {\n      return Sizzle(expr, null, null, elements);\n    };\n    Sizzle.matchesSelector = function (elem, expr) {\n      if ((elem.ownerDocument || elem) !== document$1) {\n        setDocument(elem);\n      }\n      expr = expr.replace(rattributeQuotes, '=\\'$1\\']');\n      if (support.matchesSelector && documentIsHTML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))) {\n        try {\n          var ret = matches.call(elem, expr);\n          if (ret || support.disconnectedMatch || elem.document && elem.document.nodeType !== 11) {\n            return ret;\n          }\n        } catch (e) {\n        }\n      }\n      return Sizzle(expr, document$1, null, [elem]).length > 0;\n    };\n    Sizzle.contains = function (context, elem) {\n      if ((context.ownerDocument || context) !== document$1) {\n        setDocument(context);\n      }\n      return contains(context, elem);\n    };\n    Sizzle.attr = function (elem, name) {\n      if ((elem.ownerDocument || elem) !== document$1) {\n        setDocument(elem);\n      }\n      var fn = Expr.attrHandle[name.toLowerCase()], val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : undefined;\n      return val !== undefined ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;\n    };\n    Sizzle.error = function (msg) {\n      throw new Error('Syntax error, unrecognized expression: ' + msg);\n    };\n    Sizzle.uniqueSort = function (results) {\n      var elem, duplicates = [], j = 0, i = 0;\n      hasDuplicate = !support.detectDuplicates;\n      sortInput = !support.sortStable && results.slice(0);\n      results.sort(sortOrder);\n      if (hasDuplicate) {\n        while (elem = results[i++]) {\n          if (elem === results[i]) {\n            j = duplicates.push(i);\n          }\n        }\n        while (j--) {\n          results.splice(duplicates[j], 1);\n        }\n      }\n      sortInput = null;\n      return results;\n    };\n    getText = Sizzle.getText = function (elem) {\n      var node, ret = '', i = 0, nodeType = elem.nodeType;\n      if (!nodeType) {\n        while (node = elem[i++]) {\n          ret += getText(node);\n        }\n      } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {\n        if (typeof elem.textContent === 'string') {\n          return elem.textContent;\n        } else {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            ret += getText(elem);\n          }\n        }\n      } else if (nodeType === 3 || nodeType === 4) {\n        return elem.nodeValue;\n      }\n      return ret;\n    };\n    Expr = Sizzle.selectors = {\n      cacheLength: 50,\n      createPseudo: markFunction,\n      match: matchExpr,\n      attrHandle: {},\n      find: {},\n      relative: {\n        '>': {\n          dir: 'parentNode',\n          first: true\n        },\n        ' ': { dir: 'parentNode' },\n        '+': {\n          dir: 'previousSibling',\n          first: true\n        },\n        '~': { dir: 'previousSibling' }\n      },\n      preFilter: {\n        ATTR: function (match) {\n          match[1] = match[1].replace(runescape, funescape);\n          match[3] = (match[3] || match[4] || match[5] || '').replace(runescape, funescape);\n          if (match[2] === '~=') {\n            match[3] = ' ' + match[3] + ' ';\n          }\n          return match.slice(0, 4);\n        },\n        CHILD: function (match) {\n          match[1] = match[1].toLowerCase();\n          if (match[1].slice(0, 3) === 'nth') {\n            if (!match[3]) {\n              Sizzle.error(match[0]);\n            }\n            match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * (match[3] === 'even' || match[3] === 'odd'));\n            match[5] = +(match[7] + match[8] || match[3] === 'odd');\n          } else if (match[3]) {\n            Sizzle.error(match[0]);\n          }\n          return match;\n        },\n        PSEUDO: function (match) {\n          var excess, unquoted = !match[6] && match[2];\n          if (matchExpr.CHILD.test(match[0])) {\n            return null;\n          }\n          if (match[3]) {\n            match[2] = match[4] || match[5] || '';\n          } else if (unquoted && rpseudo.test(unquoted) && (excess = tokenize(unquoted, true)) && (excess = unquoted.indexOf(')', unquoted.length - excess) - unquoted.length)) {\n            match[0] = match[0].slice(0, excess);\n            match[2] = unquoted.slice(0, excess);\n          }\n          return match.slice(0, 3);\n        }\n      },\n      filter: {\n        TAG: function (nodeNameSelector) {\n          var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();\n          return nodeNameSelector === '*' ? function () {\n            return true;\n          } : function (elem) {\n            return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n          };\n        },\n        CLASS: function (className) {\n          var pattern = classCache[className + ' '];\n          return pattern || (pattern = new RegExp('(^|' + whitespace + ')' + className + '(' + whitespace + '|$)')) && classCache(className, function (elem) {\n            return pattern.test(typeof elem.className === 'string' && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute('class') || '');\n          });\n        },\n        ATTR: function (name, operator, check) {\n          return function (elem) {\n            var result = Sizzle.attr(elem, name);\n            if (result == null) {\n              return operator === '!=';\n            }\n            if (!operator) {\n              return true;\n            }\n            result += '';\n            return operator === '=' ? result === check : operator === '!=' ? result !== check : operator === '^=' ? check && result.indexOf(check) === 0 : operator === '*=' ? check && result.indexOf(check) > -1 : operator === '$=' ? check && result.slice(-check.length) === check : operator === '~=' ? (' ' + result + ' ').indexOf(check) > -1 : operator === '|=' ? result === check || result.slice(0, check.length + 1) === check + '-' : false;\n          };\n        },\n        CHILD: function (type, what, argument, first, last) {\n          var simple = type.slice(0, 3) !== 'nth', forward = type.slice(-4) !== 'last', ofType = what === 'of-type';\n          return first === 1 && last === 0 ? function (elem) {\n            return !!elem.parentNode;\n          } : function (elem, context, xml) {\n            var cache, outerCache, node, diff, nodeIndex, start, dir = simple !== forward ? 'nextSibling' : 'previousSibling', parent = elem.parentNode, name = ofType && elem.nodeName.toLowerCase(), useCache = !xml && !ofType;\n            if (parent) {\n              if (simple) {\n                while (dir) {\n                  node = elem;\n                  while (node = node[dir]) {\n                    if (ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) {\n                      return false;\n                    }\n                  }\n                  start = dir = type === 'only' && !start && 'nextSibling';\n                }\n                return true;\n              }\n              start = [forward ? parent.firstChild : parent.lastChild];\n              if (forward && useCache) {\n                outerCache = parent[expando] || (parent[expando] = {});\n                cache = outerCache[type] || [];\n                nodeIndex = cache[0] === dirruns && cache[1];\n                diff = cache[0] === dirruns && cache[2];\n                node = nodeIndex && parent.childNodes[nodeIndex];\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if (node.nodeType === 1 && ++diff && node === elem) {\n                    outerCache[type] = [\n                      dirruns,\n                      nodeIndex,\n                      diff\n                    ];\n                    break;\n                  }\n                }\n              } else if (useCache && (cache = (elem[expando] || (elem[expando] = {}))[type]) && cache[0] === dirruns) {\n                diff = cache[1];\n              } else {\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if ((ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) && ++diff) {\n                    if (useCache) {\n                      (node[expando] || (node[expando] = {}))[type] = [\n                        dirruns,\n                        diff\n                      ];\n                    }\n                    if (node === elem) {\n                      break;\n                    }\n                  }\n                }\n              }\n              diff -= last;\n              return diff === first || diff % first === 0 && diff / first >= 0;\n            }\n          };\n        },\n        PSEUDO: function (pseudo, argument) {\n          var args, fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error('unsupported pseudo: ' + pseudo);\n          if (fn[expando]) {\n            return fn(argument);\n          }\n          if (fn.length > 1) {\n            args = [\n              pseudo,\n              pseudo,\n              '',\n              argument\n            ];\n            return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function (seed, matches) {\n              var idx, matched = fn(seed, argument), i = matched.length;\n              while (i--) {\n                idx = indexOf.call(seed, matched[i]);\n                seed[idx] = !(matches[idx] = matched[i]);\n              }\n            }) : function (elem) {\n              return fn(elem, 0, args);\n            };\n          }\n          return fn;\n        }\n      },\n      pseudos: {\n        not: markFunction(function (selector) {\n          var input = [], results = [], matcher = compile(selector.replace(rtrim, '$1'));\n          return matcher[expando] ? markFunction(function (seed, matches, context, xml) {\n            var elem, unmatched = matcher(seed, null, xml, []), i = seed.length;\n            while (i--) {\n              if (elem = unmatched[i]) {\n                seed[i] = !(matches[i] = elem);\n              }\n            }\n          }) : function (elem, context, xml) {\n            input[0] = elem;\n            matcher(input, null, xml, results);\n            input[0] = null;\n            return !results.pop();\n          };\n        }),\n        has: markFunction(function (selector) {\n          return function (elem) {\n            return Sizzle(selector, elem).length > 0;\n          };\n        }),\n        contains: markFunction(function (text) {\n          text = text.replace(runescape, funescape);\n          return function (elem) {\n            return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;\n          };\n        }),\n        lang: markFunction(function (lang) {\n          if (!ridentifier.test(lang || '')) {\n            Sizzle.error('unsupported lang: ' + lang);\n          }\n          lang = lang.replace(runescape, funescape).toLowerCase();\n          return function (elem) {\n            var elemLang;\n            do {\n              if (elemLang = documentIsHTML ? elem.lang : elem.getAttribute('xml:lang') || elem.getAttribute('lang')) {\n                elemLang = elemLang.toLowerCase();\n                return elemLang === lang || elemLang.indexOf(lang + '-') === 0;\n              }\n            } while ((elem = elem.parentNode) && elem.nodeType === 1);\n            return false;\n          };\n        }),\n        target: function (elem) {\n          var hash = window.location && window.location.hash;\n          return hash && hash.slice(1) === elem.id;\n        },\n        root: function (elem) {\n          return elem === docElem;\n        },\n        focus: function (elem) {\n          return elem === document$1.activeElement && (!document$1.hasFocus || document$1.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n        },\n        enabled: function (elem) {\n          return elem.disabled === false;\n        },\n        disabled: function (elem) {\n          return elem.disabled === true;\n        },\n        checked: function (elem) {\n          var nodeName = elem.nodeName.toLowerCase();\n          return nodeName === 'input' && !!elem.checked || nodeName === 'option' && !!elem.selected;\n        },\n        selected: function (elem) {\n          if (elem.parentNode) {\n            elem.parentNode.selectedIndex;\n          }\n          return elem.selected === true;\n        },\n        empty: function (elem) {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            if (elem.nodeType < 6) {\n              return false;\n            }\n          }\n          return true;\n        },\n        parent: function (elem) {\n          return !Expr.pseudos.empty(elem);\n        },\n        header: function (elem) {\n          return rheader.test(elem.nodeName);\n        },\n        input: function (elem) {\n          return rinputs.test(elem.nodeName);\n        },\n        button: function (elem) {\n          var name = elem.nodeName.toLowerCase();\n          return name === 'input' && elem.type === 'button' || name === 'button';\n        },\n        text: function (elem) {\n          var attr;\n          return elem.nodeName.toLowerCase() === 'input' && elem.type === 'text' && ((attr = elem.getAttribute('type')) == null || attr.toLowerCase() === 'text');\n        },\n        first: createPositionalPseudo(function () {\n          return [0];\n        }),\n        last: createPositionalPseudo(function (matchIndexes, length) {\n          return [length - 1];\n        }),\n        eq: createPositionalPseudo(function (matchIndexes, length, argument) {\n          return [argument < 0 ? argument + length : argument];\n        }),\n        even: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 0;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        odd: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 1;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        lt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; --i >= 0;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        gt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; ++i < length;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        })\n      }\n    };\n    Expr.pseudos.nth = Expr.pseudos.eq;\n    each$k([\n      'radio',\n      'checkbox',\n      'file',\n      'password',\n      'image'\n    ], function (i) {\n      Expr.pseudos[i] = createInputPseudo(i);\n    });\n    each$k([\n      'submit',\n      'reset'\n    ], function (i) {\n      Expr.pseudos[i] = createButtonPseudo(i);\n    });\n    function setFilters() {\n    }\n    setFilters.prototype = Expr.filters = Expr.pseudos;\n    Expr.setFilters = new setFilters();\n    tokenize = Sizzle.tokenize = function (selector, parseOnly) {\n      var matched, match, tokens, type, soFar, groups, preFilters, cached = tokenCache[selector + ' '];\n      if (cached) {\n        return parseOnly ? 0 : cached.slice(0);\n      }\n      soFar = selector;\n      groups = [];\n      preFilters = Expr.preFilter;\n      while (soFar) {\n        if (!matched || (match = rcomma.exec(soFar))) {\n          if (match) {\n            soFar = soFar.slice(match[0].length) || soFar;\n          }\n          groups.push(tokens = []);\n        }\n        matched = false;\n        if (match = rcombinators.exec(soFar)) {\n          matched = match.shift();\n          tokens.push({\n            value: matched,\n            type: match[0].replace(rtrim, ' ')\n          });\n          soFar = soFar.slice(matched.length);\n        }\n        for (type in Expr.filter) {\n          if (!Expr.filter.hasOwnProperty(type)) {\n            continue;\n          }\n          if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] || (match = preFilters[type](match)))) {\n            matched = match.shift();\n            tokens.push({\n              value: matched,\n              type: type,\n              matches: match\n            });\n            soFar = soFar.slice(matched.length);\n          }\n        }\n        if (!matched) {\n          break;\n        }\n      }\n      return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) : tokenCache(selector, groups).slice(0);\n    };\n    function toSelector(tokens) {\n      var i = 0, len = tokens.length, selector = '';\n      for (; i < len; i++) {\n        selector += tokens[i].value;\n      }\n      return selector;\n    }\n    function addCombinator(matcher, combinator, base) {\n      var dir = combinator.dir, checkNonElements = base && dir === 'parentNode', doneName = done++;\n      return combinator.first ? function (elem, context, xml) {\n        while (elem = elem[dir]) {\n          if (elem.nodeType === 1 || checkNonElements) {\n            return matcher(elem, context, xml);\n          }\n        }\n      } : function (elem, context, xml) {\n        var oldCache, outerCache, newCache = [\n            dirruns,\n            doneName\n          ];\n        if (xml) {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              if (matcher(elem, context, xml)) {\n                return true;\n              }\n            }\n          }\n        } else {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              outerCache = elem[expando] || (elem[expando] = {});\n              if ((oldCache = outerCache[dir]) && oldCache[0] === dirruns && oldCache[1] === doneName) {\n                return newCache[2] = oldCache[2];\n              } else {\n                outerCache[dir] = newCache;\n                if (newCache[2] = matcher(elem, context, xml)) {\n                  return true;\n                }\n              }\n            }\n          }\n        }\n      };\n    }\n    function elementMatcher(matchers) {\n      return matchers.length > 1 ? function (elem, context, xml) {\n        var i = matchers.length;\n        while (i--) {\n          if (!matchers[i](elem, context, xml)) {\n            return false;\n          }\n        }\n        return true;\n      } : matchers[0];\n    }\n    function multipleContexts(selector, contexts, results) {\n      var i = 0, len = contexts.length;\n      for (; i < len; i++) {\n        Sizzle(selector, contexts[i], results);\n      }\n      return results;\n    }\n    function condense(unmatched, map, filter, context, xml) {\n      var elem, newUnmatched = [], i = 0, len = unmatched.length, mapped = map != null;\n      for (; i < len; i++) {\n        if (elem = unmatched[i]) {\n          if (!filter || filter(elem, context, xml)) {\n            newUnmatched.push(elem);\n            if (mapped) {\n              map.push(i);\n            }\n          }\n        }\n      }\n      return newUnmatched;\n    }\n    function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {\n      if (postFilter && !postFilter[expando]) {\n        postFilter = setMatcher(postFilter);\n      }\n      if (postFinder && !postFinder[expando]) {\n        postFinder = setMatcher(postFinder, postSelector);\n      }\n      return markFunction(function (seed, results, context, xml) {\n        var temp, i, elem, preMap = [], postMap = [], preexisting = results.length, elems = seed || multipleContexts(selector || '*', context.nodeType ? [context] : context, []), matcherIn = preFilter && (seed || !selector) ? condense(elems, preMap, preFilter, context, xml) : elems, matcherOut = matcher ? postFinder || (seed ? preFilter : preexisting || postFilter) ? [] : results : matcherIn;\n        if (matcher) {\n          matcher(matcherIn, matcherOut, context, xml);\n        }\n        if (postFilter) {\n          temp = condense(matcherOut, postMap);\n          postFilter(temp, [], context, xml);\n          i = temp.length;\n          while (i--) {\n            if (elem = temp[i]) {\n              matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);\n            }\n          }\n        }\n        if (seed) {\n          if (postFinder || preFilter) {\n            if (postFinder) {\n              temp = [];\n              i = matcherOut.length;\n              while (i--) {\n                if (elem = matcherOut[i]) {\n                  temp.push(matcherIn[i] = elem);\n                }\n              }\n              postFinder(null, matcherOut = [], temp, xml);\n            }\n            i = matcherOut.length;\n            while (i--) {\n              if ((elem = matcherOut[i]) && (temp = postFinder ? indexOf.call(seed, elem) : preMap[i]) > -1) {\n                seed[temp] = !(results[temp] = elem);\n              }\n            }\n          }\n        } else {\n          matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut);\n          if (postFinder) {\n            postFinder(null, results, matcherOut, xml);\n          } else {\n            push$1.apply(results, matcherOut);\n          }\n        }\n      });\n    }\n    function matcherFromTokens(tokens) {\n      var checkContext, matcher, j, len = tokens.length, leadingRelative = Expr.relative[tokens[0].type], implicitRelative = leadingRelative || Expr.relative[' '], i = leadingRelative ? 1 : 0, matchContext = addCombinator(function (elem) {\n          return elem === checkContext;\n        }, implicitRelative, true), matchAnyContext = addCombinator(function (elem) {\n          return indexOf.call(checkContext, elem) > -1;\n        }, implicitRelative, true), matchers = [function (elem, context, xml) {\n            var ret = !leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));\n            checkContext = null;\n            return ret;\n          }];\n      for (; i < len; i++) {\n        if (matcher = Expr.relative[tokens[i].type]) {\n          matchers = [addCombinator(elementMatcher(matchers), matcher)];\n        } else {\n          matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches);\n          if (matcher[expando]) {\n            j = ++i;\n            for (; j < len; j++) {\n              if (Expr.relative[tokens[j].type]) {\n                break;\n              }\n            }\n            return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(tokens.slice(0, i - 1).concat({ value: tokens[i - 2].type === ' ' ? '*' : '' })).replace(rtrim, '$1'), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens(tokens = tokens.slice(j)), j < len && toSelector(tokens));\n          }\n          matchers.push(matcher);\n        }\n      }\n      return elementMatcher(matchers);\n    }\n    function matcherFromGroupMatchers(elementMatchers, setMatchers) {\n      var bySet = setMatchers.length > 0, byElement = elementMatchers.length > 0, superMatcher = function (seed, context, xml, results, outermost) {\n          var elem, j, matcher, matchedCount = 0, i = '0', unmatched = seed && [], setMatched = [], contextBackup = outermostContext, elems = seed || byElement && Expr.find.TAG('*', outermost), dirrunsUnique = dirruns += contextBackup == null ? 1 : Math.random() || 0.1, len = elems.length;\n          if (outermost) {\n            outermostContext = context !== document$1 && context;\n          }\n          for (; i !== len && (elem = elems[i]) != null; i++) {\n            if (byElement && elem) {\n              j = 0;\n              while (matcher = elementMatchers[j++]) {\n                if (matcher(elem, context, xml)) {\n                  results.push(elem);\n                  break;\n                }\n              }\n              if (outermost) {\n                dirruns = dirrunsUnique;\n              }\n            }\n            if (bySet) {\n              if (elem = !matcher && elem) {\n                matchedCount--;\n              }\n              if (seed) {\n                unmatched.push(elem);\n              }\n            }\n          }\n          matchedCount += i;\n          if (bySet && i !== matchedCount) {\n            j = 0;\n            while (matcher = setMatchers[j++]) {\n              matcher(unmatched, setMatched, context, xml);\n            }\n            if (seed) {\n              if (matchedCount > 0) {\n                while (i--) {\n                  if (!(unmatched[i] || setMatched[i])) {\n                    setMatched[i] = pop.call(results);\n                  }\n                }\n              }\n              setMatched = condense(setMatched);\n            }\n            push$1.apply(results, setMatched);\n            if (outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1) {\n              Sizzle.uniqueSort(results);\n            }\n          }\n          if (outermost) {\n            dirruns = dirrunsUnique;\n            outermostContext = contextBackup;\n          }\n          return unmatched;\n        };\n      return bySet ? markFunction(superMatcher) : superMatcher;\n    }\n    compile = Sizzle.compile = function (selector, match) {\n      var i, setMatchers = [], elementMatchers = [], cached = compilerCache[selector + ' '];\n      if (!cached) {\n        if (!match) {\n          match = tokenize(selector);\n        }\n        i = match.length;\n        while (i--) {\n          cached = matcherFromTokens(match[i]);\n          if (cached[expando]) {\n            setMatchers.push(cached);\n          } else {\n            elementMatchers.push(cached);\n          }\n        }\n        cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers));\n        cached.selector = selector;\n      }\n      return cached;\n    };\n    select$1 = Sizzle.select = function (selector, context, results, seed) {\n      var i, tokens, token, type, find, compiled = typeof selector === 'function' && selector, match = !seed && tokenize(selector = compiled.selector || selector);\n      results = results || [];\n      if (match.length === 1) {\n        tokens = match[0] = match[0].slice(0);\n        if (tokens.length > 2 && (token = tokens[0]).type === 'ID' && support.getById && context.nodeType === 9 && documentIsHTML && Expr.relative[tokens[1].type]) {\n          context = (Expr.find.ID(token.matches[0].replace(runescape, funescape), context) || [])[0];\n          if (!context) {\n            return results;\n          } else if (compiled) {\n            context = context.parentNode;\n          }\n          selector = selector.slice(tokens.shift().value.length);\n        }\n        i = matchExpr.needsContext.test(selector) ? 0 : tokens.length;\n        while (i--) {\n          token = tokens[i];\n          if (Expr.relative[type = token.type]) {\n            break;\n          }\n          if (find = Expr.find[type]) {\n            if (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context)) {\n              tokens.splice(i, 1);\n              selector = seed.length && toSelector(tokens);\n              if (!selector) {\n                push$1.apply(results, seed);\n                return results;\n              }\n              break;\n            }\n          }\n        }\n      }\n      (compiled || compile(selector, match))(seed, context, !documentIsHTML, results, rsibling.test(selector) && testContext(context.parentNode) || context);\n      return results;\n    };\n    support.sortStable = expando.split('').sort(sortOrder).join('') === expando;\n    support.detectDuplicates = !!hasDuplicate;\n    setDocument();\n    support.sortDetached = true;\n\n    var doc = document;\n    var push = Array.prototype.push;\n    var slice = Array.prototype.slice;\n    var rquickExpr = /^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/;\n    var Event$1 = EventUtils.Event;\n    var skipUniques = Tools.makeMap('children,contents,next,prev');\n    var isDefined = function (obj) {\n      return typeof obj !== 'undefined';\n    };\n    var isString = function (obj) {\n      return typeof obj === 'string';\n    };\n    var isWindow = function (obj) {\n      return obj && obj === obj.window;\n    };\n    var createFragment$1 = function (html, fragDoc) {\n      fragDoc = fragDoc || doc;\n      var container = fragDoc.createElement('div');\n      var frag = fragDoc.createDocumentFragment();\n      container.innerHTML = html;\n      var node;\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var domManipulate = function (targetNodes, sourceItem, callback, reverse) {\n      var i;\n      if (isString(sourceItem)) {\n        sourceItem = createFragment$1(sourceItem, getElementDocument(targetNodes[0]));\n      } else if (sourceItem.length && !sourceItem.nodeType) {\n        sourceItem = DomQuery.makeArray(sourceItem);\n        if (reverse) {\n          for (i = sourceItem.length - 1; i >= 0; i--) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        } else {\n          for (i = 0; i < sourceItem.length; i++) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        }\n        return targetNodes;\n      }\n      if (sourceItem.nodeType) {\n        i = targetNodes.length;\n        while (i--) {\n          callback.call(targetNodes[i], sourceItem);\n        }\n      }\n      return targetNodes;\n    };\n    var hasClass = function (node, className) {\n      return node && className && (' ' + node.className + ' ').indexOf(' ' + className + ' ') !== -1;\n    };\n    var wrap$2 = function (elements, wrapper, all) {\n      var lastParent, newWrapper;\n      wrapper = DomQuery(wrapper)[0];\n      elements.each(function () {\n        var self = this;\n        if (!all || lastParent !== self.parentNode) {\n          lastParent = self.parentNode;\n          newWrapper = wrapper.cloneNode(false);\n          self.parentNode.insertBefore(newWrapper, self);\n          newWrapper.appendChild(self);\n        } else {\n          newWrapper.appendChild(self);\n        }\n      });\n      return elements;\n    };\n    var numericCssMap = Tools.makeMap('fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom', ' ');\n    var booleanMap = Tools.makeMap('checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected', ' ');\n    var propFix = {\n      for: 'htmlFor',\n      class: 'className',\n      readonly: 'readOnly'\n    };\n    var cssFix = { float: 'cssFloat' };\n    var attrHooks = {}, cssHooks = {};\n    var DomQueryConstructor = function (selector, context) {\n      return new DomQuery.fn.init(selector, context);\n    };\n    var inArray$1 = function (item, array) {\n      var i;\n      if (array.indexOf) {\n        return array.indexOf(item);\n      }\n      i = array.length;\n      while (i--) {\n        if (array[i] === item) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var whiteSpaceRegExp = /^\\s*|\\s*$/g;\n    var trim$1 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp, '');\n    };\n    var each$g = function (obj, callback) {\n      var length, key, i, value;\n      if (obj) {\n        length = obj.length;\n        if (length === undefined) {\n          for (key in obj) {\n            if (obj.hasOwnProperty(key)) {\n              value = obj[key];\n              if (callback.call(value, key, value) === false) {\n                break;\n              }\n            }\n          }\n        } else {\n          for (i = 0; i < length; i++) {\n            value = obj[i];\n            if (callback.call(value, i, value) === false) {\n              break;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var grep$2 = function (array, callback) {\n      var out = [];\n      each$g(array, function (i, item) {\n        if (callback(item, i)) {\n          out.push(item);\n        }\n      });\n      return out;\n    };\n    var getElementDocument = function (element) {\n      if (!element) {\n        return doc;\n      }\n      if (element.nodeType === 9) {\n        return element;\n      }\n      return element.ownerDocument;\n    };\n    DomQueryConstructor.fn = DomQueryConstructor.prototype = {\n      constructor: DomQueryConstructor,\n      selector: '',\n      context: null,\n      length: 0,\n      init: function (selector, context) {\n        var self = this;\n        var match, node;\n        if (!selector) {\n          return self;\n        }\n        if (selector.nodeType) {\n          self.context = self[0] = selector;\n          self.length = 1;\n          return self;\n        }\n        if (context && context.nodeType) {\n          self.context = context;\n        } else {\n          if (context) {\n            return DomQuery(selector).attr(context);\n          }\n          self.context = context = document;\n        }\n        if (isString(selector)) {\n          self.selector = selector;\n          if (selector.charAt(0) === '<' && selector.charAt(selector.length - 1) === '>' && selector.length >= 3) {\n            match = [\n              null,\n              selector,\n              null\n            ];\n          } else {\n            match = rquickExpr.exec(selector);\n          }\n          if (match) {\n            if (match[1]) {\n              node = createFragment$1(selector, getElementDocument(context)).firstChild;\n              while (node) {\n                push.call(self, node);\n                node = node.nextSibling;\n              }\n            } else {\n              node = getElementDocument(context).getElementById(match[2]);\n              if (!node) {\n                return self;\n              }\n              if (node.id !== match[2]) {\n                return self.find(selector);\n              }\n              self.length = 1;\n              self[0] = node;\n            }\n          } else {\n            return DomQuery(context).find(selector);\n          }\n        } else {\n          this.add(selector, false);\n        }\n        return self;\n      },\n      toArray: function () {\n        return Tools.toArray(this);\n      },\n      add: function (items, sort) {\n        var self = this;\n        var nodes, i;\n        if (isString(items)) {\n          return self.add(DomQuery(items));\n        }\n        if (sort !== false) {\n          nodes = DomQuery.unique(self.toArray().concat(DomQuery.makeArray(items)));\n          self.length = nodes.length;\n          for (i = 0; i < nodes.length; i++) {\n            self[i] = nodes[i];\n          }\n        } else {\n          push.apply(self, DomQuery.makeArray(items));\n        }\n        return self;\n      },\n      attr: function (name, value) {\n        var self = this;\n        var hook;\n        if (typeof name === 'object') {\n          each$g(name, function (name, value) {\n            self.attr(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            var hook;\n            if (this.nodeType === 1) {\n              hook = attrHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              if (value === null) {\n                this.removeAttribute(name, 2);\n              } else {\n                this.setAttribute(name, value, 2);\n              }\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType === 1) {\n            hook = attrHooks[name];\n            if (hook && hook.get) {\n              return hook.get(self[0], name);\n            }\n            if (booleanMap[name]) {\n              return self.prop(name) ? name : undefined;\n            }\n            value = self[0].getAttribute(name, 2);\n            if (value === null) {\n              value = undefined;\n            }\n          }\n          return value;\n        }\n        return self;\n      },\n      removeAttr: function (name) {\n        return this.attr(name, null);\n      },\n      prop: function (name, value) {\n        var self = this;\n        name = propFix[name] || name;\n        if (typeof name === 'object') {\n          each$g(name, function (name, value) {\n            self.prop(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            if (this.nodeType === 1) {\n              this[name] = value;\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType && name in self[0]) {\n            return self[0][name];\n          }\n          return value;\n        }\n        return self;\n      },\n      css: function (name, value) {\n        var self = this;\n        var elm, hook;\n        var camel = function (name) {\n          return name.replace(/-(\\D)/g, function (a, b) {\n            return b.toUpperCase();\n          });\n        };\n        var dashed = function (name) {\n          return name.replace(/[A-Z]/g, function (a) {\n            return '-' + a;\n          });\n        };\n        if (typeof name === 'object') {\n          each$g(name, function (name, value) {\n            self.css(name, value);\n          });\n        } else {\n          if (isDefined(value)) {\n            name = camel(name);\n            if (typeof value === 'number' && !numericCssMap[name]) {\n              value = value.toString() + 'px';\n            }\n            self.each(function () {\n              var style = this.style;\n              hook = cssHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              try {\n                this.style[cssFix[name] || name] = value;\n              } catch (ex) {\n              }\n              if (value === null || value === '') {\n                if (style.removeProperty) {\n                  style.removeProperty(dashed(name));\n                } else {\n                  style.removeAttribute(name);\n                }\n              }\n            });\n          } else {\n            elm = self[0];\n            hook = cssHooks[name];\n            if (hook && hook.get) {\n              return hook.get(elm);\n            }\n            if (elm.ownerDocument.defaultView) {\n              try {\n                return elm.ownerDocument.defaultView.getComputedStyle(elm, null).getPropertyValue(dashed(name));\n              } catch (ex) {\n                return undefined;\n              }\n            } else if (elm.currentStyle) {\n              return elm.currentStyle[camel(name)];\n            } else {\n              return '';\n            }\n          }\n        }\n        return self;\n      },\n      remove: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          Event$1.clean(node);\n          if (node.parentNode) {\n            node.parentNode.removeChild(node);\n          }\n        }\n        return this;\n      },\n      empty: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          while (node.firstChild) {\n            node.removeChild(node.firstChild);\n          }\n        }\n        return this;\n      },\n      html: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          try {\n            while (i--) {\n              self[i].innerHTML = value;\n            }\n          } catch (ex) {\n            DomQuery(self[i]).empty().append(value);\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerHTML : '';\n      },\n      text: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          while (i--) {\n            if ('innerText' in self[i]) {\n              self[i].innerText = value;\n            } else {\n              self[0].textContent = value;\n            }\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerText || self[0].textContent : '';\n      },\n      append: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.appendChild(node);\n          }\n        });\n      },\n      prepend: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.insertBefore(node, this.firstChild);\n          }\n        }, true);\n      },\n      before: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this);\n          });\n        }\n        return self;\n      },\n      after: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this.nextSibling);\n          }, true);\n        }\n        return self;\n      },\n      appendTo: function (val) {\n        DomQuery(val).append(this);\n        return this;\n      },\n      prependTo: function (val) {\n        DomQuery(val).prepend(this);\n        return this;\n      },\n      replaceWith: function (content) {\n        return this.before(content).remove();\n      },\n      wrap: function (content) {\n        return wrap$2(this, content);\n      },\n      wrapAll: function (content) {\n        return wrap$2(this, content, true);\n      },\n      wrapInner: function (content) {\n        this.each(function () {\n          DomQuery(this).contents().wrapAll(content);\n        });\n        return this;\n      },\n      unwrap: function () {\n        return this.parent().each(function () {\n          DomQuery(this).replaceWith(this.childNodes);\n        });\n      },\n      clone: function () {\n        var result = [];\n        this.each(function () {\n          result.push(this.cloneNode(true));\n        });\n        return DomQuery(result);\n      },\n      addClass: function (className) {\n        return this.toggleClass(className, true);\n      },\n      removeClass: function (className) {\n        return this.toggleClass(className, false);\n      },\n      toggleClass: function (className, state) {\n        var self = this;\n        if (typeof className !== 'string') {\n          return self;\n        }\n        if (className.indexOf(' ') !== -1) {\n          each$g(className.split(' '), function () {\n            self.toggleClass(this, state);\n          });\n        } else {\n          self.each(function (index, node) {\n            var classState = hasClass(node, className);\n            if (classState !== state) {\n              var existingClassName = node.className;\n              if (classState) {\n                node.className = trim$1((' ' + existingClassName + ' ').replace(' ' + className + ' ', ' '));\n              } else {\n                node.className += existingClassName ? ' ' + className : className;\n              }\n            }\n          });\n        }\n        return self;\n      },\n      hasClass: function (className) {\n        return hasClass(this[0], className);\n      },\n      each: function (callback) {\n        return each$g(this, callback);\n      },\n      on: function (name, callback) {\n        return this.each(function () {\n          Event$1.bind(this, name, callback);\n        });\n      },\n      off: function (name, callback) {\n        return this.each(function () {\n          Event$1.unbind(this, name, callback);\n        });\n      },\n      trigger: function (name) {\n        return this.each(function () {\n          if (typeof name === 'object') {\n            Event$1.fire(this, name.type, name);\n          } else {\n            Event$1.fire(this, name);\n          }\n        });\n      },\n      show: function () {\n        return this.css('display', '');\n      },\n      hide: function () {\n        return this.css('display', 'none');\n      },\n      slice: function () {\n        return DomQuery(slice.apply(this, arguments));\n      },\n      eq: function (index) {\n        return index === -1 ? this.slice(index) : this.slice(index, +index + 1);\n      },\n      first: function () {\n        return this.eq(0);\n      },\n      last: function () {\n        return this.eq(-1);\n      },\n      find: function (selector) {\n        var i, l;\n        var ret = [];\n        for (i = 0, l = this.length; i < l; i++) {\n          DomQuery.find(selector, this[i], ret);\n        }\n        return DomQuery(ret);\n      },\n      filter: function (selector) {\n        if (typeof selector === 'function') {\n          return DomQuery(grep$2(this.toArray(), function (item, i) {\n            return selector(i, item);\n          }));\n        }\n        return DomQuery(DomQuery.filter(selector, this.toArray()));\n      },\n      closest: function (selector) {\n        var result = [];\n        if (selector instanceof DomQuery) {\n          selector = selector[0];\n        }\n        this.each(function (i, node) {\n          while (node) {\n            if (typeof selector === 'string' && DomQuery(node).is(selector)) {\n              result.push(node);\n              break;\n            } else if (node === selector) {\n              result.push(node);\n              break;\n            }\n            node = node.parentNode;\n          }\n        });\n        return DomQuery(result);\n      },\n      offset: function (offset) {\n        var elm, doc, docElm;\n        var x = 0, y = 0, pos;\n        if (!offset) {\n          elm = this[0];\n          if (elm) {\n            doc = elm.ownerDocument;\n            docElm = doc.documentElement;\n            if (elm.getBoundingClientRect) {\n              pos = elm.getBoundingClientRect();\n              x = pos.left + (docElm.scrollLeft || doc.body.scrollLeft) - docElm.clientLeft;\n              y = pos.top + (docElm.scrollTop || doc.body.scrollTop) - docElm.clientTop;\n            }\n          }\n          return {\n            left: x,\n            top: y\n          };\n        }\n        return this.css(offset);\n      },\n      push: push,\n      sort: Array.prototype.sort,\n      splice: Array.prototype.splice\n    };\n    Tools.extend(DomQueryConstructor, {\n      extend: Tools.extend,\n      makeArray: function (object) {\n        if (isWindow(object) || object.nodeType) {\n          return [object];\n        }\n        return Tools.toArray(object);\n      },\n      inArray: inArray$1,\n      isArray: Tools.isArray,\n      each: each$g,\n      trim: trim$1,\n      grep: grep$2,\n      find: Sizzle,\n      expr: Sizzle.selectors,\n      unique: Sizzle.uniqueSort,\n      text: Sizzle.getText,\n      contains: Sizzle.contains,\n      filter: function (expr, elems, not) {\n        var i = elems.length;\n        if (not) {\n          expr = ':not(' + expr + ')';\n        }\n        while (i--) {\n          if (elems[i].nodeType !== 1) {\n            elems.splice(i, 1);\n          }\n        }\n        if (elems.length === 1) {\n          elems = DomQuery.find.matchesSelector(elems[0], expr) ? [elems[0]] : [];\n        } else {\n          elems = DomQuery.find.matches(expr, elems);\n        }\n        return elems;\n      }\n    });\n    var dir = function (el, prop, until) {\n      var matched = [];\n      var cur = el[prop];\n      if (typeof until !== 'string' && until instanceof DomQuery) {\n        until = until[0];\n      }\n      while (cur && cur.nodeType !== 9) {\n        if (until !== undefined) {\n          if (cur === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(cur).is(until)) {\n            break;\n          }\n        }\n        if (cur.nodeType === 1) {\n          matched.push(cur);\n        }\n        cur = cur[prop];\n      }\n      return matched;\n    };\n    var sibling$1 = function (node, siblingName, nodeType, until) {\n      var result = [];\n      if (until instanceof DomQuery) {\n        until = until[0];\n      }\n      for (; node; node = node[siblingName]) {\n        if (nodeType && node.nodeType !== nodeType) {\n          continue;\n        }\n        if (until !== undefined) {\n          if (node === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(node).is(until)) {\n            break;\n          }\n        }\n        result.push(node);\n      }\n      return result;\n    };\n    var firstSibling = function (node, siblingName, nodeType) {\n      for (node = node[siblingName]; node; node = node[siblingName]) {\n        if (node.nodeType === nodeType) {\n          return node;\n        }\n      }\n      return null;\n    };\n    each$g({\n      parent: function (node) {\n        var parent = node.parentNode;\n        return parent && parent.nodeType !== 11 ? parent : null;\n      },\n      parents: function (node) {\n        return dir(node, 'parentNode');\n      },\n      next: function (node) {\n        return firstSibling(node, 'nextSibling', 1);\n      },\n      prev: function (node) {\n        return firstSibling(node, 'previousSibling', 1);\n      },\n      children: function (node) {\n        return sibling$1(node.firstChild, 'nextSibling', 1);\n      },\n      contents: function (node) {\n        return Tools.toArray((node.nodeName === 'iframe' ? node.contentDocument || node.contentWindow.document : node).childNodes);\n      }\n    }, function (name, fn) {\n      DomQueryConstructor.fn[name] = function (selector) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          if (!skipUniques[name]) {\n            result = DomQuery.unique(result);\n          }\n          if (name.indexOf('parents') === 0) {\n            result = result.reverse();\n          }\n        }\n        var wrappedResult = DomQuery(result);\n        if (selector) {\n          return wrappedResult.filter(selector);\n        }\n        return wrappedResult;\n      };\n    });\n    each$g({\n      parentsUntil: function (node, until) {\n        return dir(node, 'parentNode', until);\n      },\n      nextUntil: function (node, until) {\n        return sibling$1(node, 'nextSibling', 1, until).slice(1);\n      },\n      prevUntil: function (node, until) {\n        return sibling$1(node, 'previousSibling', 1, until).slice(1);\n      }\n    }, function (name, fn) {\n      DomQueryConstructor.fn[name] = function (selector, filter) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          result = DomQuery.unique(result);\n          if (name.indexOf('parents') === 0 || name === 'prevUntil') {\n            result = result.reverse();\n          }\n        }\n        var wrappedResult = DomQuery(result);\n        if (filter) {\n          return wrappedResult.filter(filter);\n        }\n        return wrappedResult;\n      };\n    });\n    DomQueryConstructor.fn.is = function (selector) {\n      return !!selector && this.filter(selector).length > 0;\n    };\n    DomQueryConstructor.fn.init.prototype = DomQueryConstructor.fn;\n    DomQueryConstructor.overrideDefaults = function (callback) {\n      var defaults;\n      var sub = function (selector, context) {\n        defaults = defaults || callback();\n        if (arguments.length === 0) {\n          selector = defaults.element;\n        }\n        if (!context) {\n          context = defaults.context;\n        }\n        return new sub.fn.init(selector, context);\n      };\n      DomQuery.extend(sub, this);\n      return sub;\n    };\n    DomQueryConstructor.attrHooks = attrHooks;\n    DomQueryConstructor.cssHooks = cssHooks;\n    var DomQuery = DomQueryConstructor;\n\n    var each$f = Tools.each;\n    var grep$1 = Tools.grep;\n    var isIE = Env.ie;\n    var simpleSelectorRe = /^([a-z0-9],?)+$/i;\n    var setupAttrHooks = function (styles, settings, getContext) {\n      var keepValues = settings.keep_values;\n      var keepUrlHook = {\n        set: function ($elm, value, name) {\n          if (settings.url_converter && value !== null) {\n            value = settings.url_converter.call(settings.url_converter_scope || getContext(), value, name, $elm[0]);\n          }\n          $elm.attr('data-mce-' + name, value).attr(name, value);\n        },\n        get: function ($elm, name) {\n          return $elm.attr('data-mce-' + name) || $elm.attr(name);\n        }\n      };\n      var attrHooks = {\n        style: {\n          set: function ($elm, value) {\n            if (value !== null && typeof value === 'object') {\n              $elm.css(value);\n              return;\n            }\n            if (keepValues) {\n              $elm.attr('data-mce-style', value);\n            }\n            if (value !== null && typeof value === 'string') {\n              $elm.removeAttr('style');\n              $elm.css(styles.parse(value));\n            } else {\n              $elm.attr('style', value);\n            }\n          },\n          get: function ($elm) {\n            var value = $elm.attr('data-mce-style') || $elm.attr('style');\n            value = styles.serialize(styles.parse(value), $elm[0].nodeName);\n            return value;\n          }\n        }\n      };\n      if (keepValues) {\n        attrHooks.href = attrHooks.src = keepUrlHook;\n      }\n      return attrHooks;\n    };\n    var updateInternalStyleAttr = function (styles, $elm) {\n      var rawValue = $elm.attr('style');\n      var value = styles.serialize(styles.parse(rawValue), $elm[0].nodeName);\n      if (!value) {\n        value = null;\n      }\n      $elm.attr('data-mce-style', value);\n    };\n    var findNodeIndex = function (node, normalized) {\n      var idx = 0, lastNodeType, nodeType;\n      if (node) {\n        for (lastNodeType = node.nodeType, node = node.previousSibling; node; node = node.previousSibling) {\n          nodeType = node.nodeType;\n          if (normalized && nodeType === 3) {\n            if (nodeType === lastNodeType || !node.nodeValue.length) {\n              continue;\n            }\n          }\n          idx++;\n          lastNodeType = nodeType;\n        }\n      }\n      return idx;\n    };\n    var DOMUtils = function (doc, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var addedStyles = {};\n      var win = window;\n      var files = {};\n      var counter = 0;\n      var stdMode = true;\n      var boxModel = true;\n      var styleSheetLoader = instance.forElement(SugarElement.fromDom(doc), {\n        contentCssCors: settings.contentCssCors,\n        referrerPolicy: settings.referrerPolicy\n      });\n      var boundEvents = [];\n      var schema = settings.schema ? settings.schema : Schema({});\n      var styles = Styles({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope\n      }, settings.schema);\n      var events = settings.ownEvents ? new EventUtils() : EventUtils.Event;\n      var blockElementsMap = schema.getBlockElements();\n      var $ = DomQuery.overrideDefaults(function () {\n        return {\n          context: doc,\n          element: self.getRoot()\n        };\n      });\n      var isBlock = function (node) {\n        if (typeof node === 'string') {\n          return !!blockElementsMap[node];\n        } else if (node) {\n          var type = node.nodeType;\n          if (type) {\n            return !!(type === 1 && blockElementsMap[node.nodeName]);\n          }\n        }\n        return false;\n      };\n      var get = function (elm) {\n        return elm && doc && isString$1(elm) ? doc.getElementById(elm) : elm;\n      };\n      var $$ = function (elm) {\n        return $(typeof elm === 'string' ? get(elm) : elm);\n      };\n      var getAttrib = function (elm, name, defaultVal) {\n        var hook, value;\n        var $elm = $$(elm);\n        if ($elm.length) {\n          hook = attrHooks[name];\n          if (hook && hook.get) {\n            value = hook.get($elm, name);\n          } else {\n            value = $elm.attr(name);\n          }\n        }\n        if (typeof value === 'undefined') {\n          value = defaultVal || '';\n        }\n        return value;\n      };\n      var getAttribs = function (elm) {\n        var node = get(elm);\n        if (!node) {\n          return [];\n        }\n        return node.attributes;\n      };\n      var setAttrib = function (elm, name, value) {\n        if (value === '') {\n          value = null;\n        }\n        var $elm = $$(elm);\n        var originalValue = $elm.attr(name);\n        if (!$elm.length) {\n          return;\n        }\n        var hook = attrHooks[name];\n        if (hook && hook.set) {\n          hook.set($elm, value, name);\n        } else {\n          $elm.attr(name, value);\n        }\n        if (originalValue !== value && settings.onSetAttrib) {\n          settings.onSetAttrib({\n            attrElm: $elm,\n            attrName: name,\n            attrValue: value\n          });\n        }\n      };\n      var clone = function (node, deep) {\n        if (!isIE || node.nodeType !== 1 || deep) {\n          return node.cloneNode(deep);\n        } else {\n          var clone_1 = doc.createElement(node.nodeName);\n          each$f(getAttribs(node), function (attr) {\n            setAttrib(clone_1, attr.nodeName, getAttrib(node, attr.nodeName));\n          });\n          return clone_1;\n        }\n      };\n      var getRoot = function () {\n        return settings.root_element || doc.body;\n      };\n      var getViewPort = function (argWin) {\n        var vp = getBounds(argWin);\n        return {\n          x: vp.x,\n          y: vp.y,\n          w: vp.width,\n          h: vp.height\n        };\n      };\n      var getPos$1 = function (elm, rootElm) {\n        return getPos(doc.body, get(elm), rootElm);\n      };\n      var setStyle = function (elm, name, value) {\n        var $elm = isString$1(name) ? $$(elm).css(name, value) : $$(elm).css(name);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var setStyles = function (elm, stylesArg) {\n        var $elm = $$(elm).css(stylesArg);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var getStyle = function (elm, name, computed) {\n        var $elm = $$(elm);\n        if (computed) {\n          return $elm.css(name);\n        }\n        name = name.replace(/-(\\D)/g, function (a, b) {\n          return b.toUpperCase();\n        });\n        if (name === 'float') {\n          name = Env.browser.isIE() ? 'styleFloat' : 'cssFloat';\n        }\n        return $elm[0] && $elm[0].style ? $elm[0].style[name] : undefined;\n      };\n      var getSize = function (elm) {\n        var w, h;\n        elm = get(elm);\n        w = getStyle(elm, 'width');\n        h = getStyle(elm, 'height');\n        if (w.indexOf('px') === -1) {\n          w = 0;\n        }\n        if (h.indexOf('px') === -1) {\n          h = 0;\n        }\n        return {\n          w: parseInt(w, 10) || elm.offsetWidth || elm.clientWidth,\n          h: parseInt(h, 10) || elm.offsetHeight || elm.clientHeight\n        };\n      };\n      var getRect = function (elm) {\n        elm = get(elm);\n        var pos = getPos$1(elm);\n        var size = getSize(elm);\n        return {\n          x: pos.x,\n          y: pos.y,\n          w: size.w,\n          h: size.h\n        };\n      };\n      var is = function (elm, selector) {\n        var i;\n        if (!elm) {\n          return false;\n        }\n        if (!Array.isArray(elm)) {\n          if (selector === '*') {\n            return elm.nodeType === 1;\n          }\n          if (simpleSelectorRe.test(selector)) {\n            var selectors = selector.toLowerCase().split(/,/);\n            var elmName = elm.nodeName.toLowerCase();\n            for (i = selectors.length - 1; i >= 0; i--) {\n              if (selectors[i] === elmName) {\n                return true;\n              }\n            }\n            return false;\n          }\n          if (elm.nodeType && elm.nodeType !== 1) {\n            return false;\n          }\n        }\n        var elms = !Array.isArray(elm) ? [elm] : elm;\n        return Sizzle(selector, elms[0].ownerDocument || elms[0], null, elms).length > 0;\n      };\n      var getParents = function (elm, selector, root, collect) {\n        var result = [];\n        var selectorVal;\n        var node = get(elm);\n        collect = collect === undefined;\n        root = root || (getRoot().nodeName !== 'BODY' ? getRoot().parentNode : null);\n        if (Tools.is(selector, 'string')) {\n          selectorVal = selector;\n          if (selector === '*') {\n            selector = function (node) {\n              return node.nodeType === 1;\n            };\n          } else {\n            selector = function (node) {\n              return is(node, selectorVal);\n            };\n          }\n        }\n        while (node) {\n          if (node === root || isNullable(node.nodeType) || isDocument$1(node) || isDocumentFragment(node)) {\n            break;\n          }\n          if (!selector || typeof selector === 'function' && selector(node)) {\n            if (collect) {\n              result.push(node);\n            } else {\n              return [node];\n            }\n          }\n          node = node.parentNode;\n        }\n        return collect ? result : null;\n      };\n      var getParent = function (node, selector, root) {\n        var parents = getParents(node, selector, root, false);\n        return parents && parents.length > 0 ? parents[0] : null;\n      };\n      var _findSib = function (node, selector, name) {\n        var func = selector;\n        if (node) {\n          if (typeof selector === 'string') {\n            func = function (node) {\n              return is(node, selector);\n            };\n          }\n          for (node = node[name]; node; node = node[name]) {\n            if (typeof func === 'function' && func(node)) {\n              return node;\n            }\n          }\n        }\n        return null;\n      };\n      var getNext = function (node, selector) {\n        return _findSib(node, selector, 'nextSibling');\n      };\n      var getPrev = function (node, selector) {\n        return _findSib(node, selector, 'previousSibling');\n      };\n      var select = function (selector, scope) {\n        return Sizzle(selector, get(scope) || settings.root_element || doc, []);\n      };\n      var run = function (elm, func, scope) {\n        var result;\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        if (!node) {\n          return false;\n        }\n        if (Tools.isArray(node) && (node.length || node.length === 0)) {\n          result = [];\n          each$f(node, function (elm, i) {\n            if (elm) {\n              result.push(func.call(scope, typeof elm === 'string' ? get(elm) : elm, i));\n            }\n          });\n          return result;\n        }\n        var context = scope ? scope : this;\n        return func.call(context, node);\n      };\n      var setAttribs = function (elm, attrs) {\n        $$(elm).each(function (i, node) {\n          each$f(attrs, function (value, name) {\n            setAttrib(node, name, value);\n          });\n        });\n      };\n      var setHTML = function (elm, html) {\n        var $elm = $$(elm);\n        if (isIE) {\n          $elm.each(function (i, target) {\n            if (target.canHaveHTML === false) {\n              return;\n            }\n            while (target.firstChild) {\n              target.removeChild(target.firstChild);\n            }\n            try {\n              target.innerHTML = '<br>' + html;\n              target.removeChild(target.firstChild);\n            } catch (ex) {\n              DomQuery('<div></div>').html('<br>' + html).contents().slice(1).appendTo(target);\n            }\n            return html;\n          });\n        } else {\n          $elm.html(html);\n        }\n      };\n      var add = function (parentElm, name, attrs, html, create) {\n        return run(parentElm, function (parentElm) {\n          var newElm = typeof name === 'string' ? doc.createElement(name) : name;\n          setAttribs(newElm, attrs);\n          if (html) {\n            if (typeof html !== 'string' && html.nodeType) {\n              newElm.appendChild(html);\n            } else if (typeof html === 'string') {\n              setHTML(newElm, html);\n            }\n          }\n          return !create ? parentElm.appendChild(newElm) : newElm;\n        });\n      };\n      var create = function (name, attrs, html) {\n        return add(doc.createElement(name), name, attrs, html, true);\n      };\n      var decode = Entities.decode;\n      var encode = Entities.encodeAllRaw;\n      var createHTML = function (name, attrs, html) {\n        var outHtml = '', key;\n        outHtml += '<' + name;\n        for (key in attrs) {\n          if (hasNonNullableKey(attrs, key)) {\n            outHtml += ' ' + key + '=\"' + encode(attrs[key]) + '\"';\n          }\n        }\n        if (typeof html !== 'undefined') {\n          return outHtml + '>' + html + '</' + name + '>';\n        }\n        return outHtml + ' />';\n      };\n      var createFragment = function (html) {\n        var node;\n        var container = doc.createElement('div');\n        var frag = doc.createDocumentFragment();\n        frag.appendChild(container);\n        if (html) {\n          container.innerHTML = html;\n        }\n        while (node = container.firstChild) {\n          frag.appendChild(node);\n        }\n        frag.removeChild(container);\n        return frag;\n      };\n      var remove = function (node, keepChildren) {\n        var $node = $$(node);\n        if (keepChildren) {\n          $node.each(function () {\n            var child;\n            while (child = this.firstChild) {\n              if (child.nodeType === 3 && child.data.length === 0) {\n                this.removeChild(child);\n              } else {\n                this.parentNode.insertBefore(child, this);\n              }\n            }\n          }).remove();\n        } else {\n          $node.remove();\n        }\n        return $node.length > 1 ? $node.toArray() : $node[0];\n      };\n      var removeAllAttribs = function (e) {\n        return run(e, function (e) {\n          var i;\n          var attrs = e.attributes;\n          for (i = attrs.length - 1; i >= 0; i--) {\n            e.removeAttributeNode(attrs.item(i));\n          }\n        });\n      };\n      var parseStyle = function (cssText) {\n        return styles.parse(cssText);\n      };\n      var serializeStyle = function (stylesArg, name) {\n        return styles.serialize(stylesArg, name);\n      };\n      var addStyle = function (cssText) {\n        var head, styleElm;\n        if (self !== DOMUtils.DOM && doc === document) {\n          if (addedStyles[cssText]) {\n            return;\n          }\n          addedStyles[cssText] = true;\n        }\n        styleElm = doc.getElementById('mceDefaultStyles');\n        if (!styleElm) {\n          styleElm = doc.createElement('style');\n          styleElm.id = 'mceDefaultStyles';\n          styleElm.type = 'text/css';\n          head = doc.getElementsByTagName('head')[0];\n          if (head.firstChild) {\n            head.insertBefore(styleElm, head.firstChild);\n          } else {\n            head.appendChild(styleElm);\n          }\n        }\n        if (styleElm.styleSheet) {\n          styleElm.styleSheet.cssText += cssText;\n        } else {\n          styleElm.appendChild(doc.createTextNode(cssText));\n        }\n      };\n      var loadCSS = function (urls) {\n        if (!urls) {\n          urls = '';\n        }\n        each$k(urls.split(','), function (url) {\n          files[url] = true;\n          styleSheetLoader.load(url, noop);\n        });\n      };\n      var toggleClass = function (elm, cls, state) {\n        $$(elm).toggleClass(cls, state).each(function () {\n          if (this.className === '') {\n            DomQuery(this).attr('class', null);\n          }\n        });\n      };\n      var addClass = function (elm, cls) {\n        $$(elm).addClass(cls);\n      };\n      var removeClass = function (elm, cls) {\n        toggleClass(elm, cls, false);\n      };\n      var hasClass = function (elm, cls) {\n        return $$(elm).hasClass(cls);\n      };\n      var show = function (elm) {\n        $$(elm).show();\n      };\n      var hide = function (elm) {\n        $$(elm).hide();\n      };\n      var isHidden = function (elm) {\n        return $$(elm).css('display') === 'none';\n      };\n      var uniqueId = function (prefix) {\n        return (!prefix ? 'mce_' : prefix) + counter++;\n      };\n      var getOuterHTML = function (elm) {\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        return isElement$5(node) ? node.outerHTML : DomQuery('<div></div>').append(DomQuery(node).clone()).html();\n      };\n      var setOuterHTML = function (elm, html) {\n        $$(elm).each(function () {\n          try {\n            if ('outerHTML' in this) {\n              this.outerHTML = html;\n              return;\n            }\n          } catch (ex) {\n          }\n          remove(DomQuery(this).html(html), true);\n        });\n      };\n      var insertAfter = function (node, reference) {\n        var referenceNode = get(reference);\n        return run(node, function (node) {\n          var parent = referenceNode.parentNode;\n          var nextSibling = referenceNode.nextSibling;\n          if (nextSibling) {\n            parent.insertBefore(node, nextSibling);\n          } else {\n            parent.appendChild(node);\n          }\n          return node;\n        });\n      };\n      var replace = function (newElm, oldElm, keepChildren) {\n        return run(oldElm, function (oldElm) {\n          if (Tools.is(oldElm, 'array')) {\n            newElm = newElm.cloneNode(true);\n          }\n          if (keepChildren) {\n            each$f(grep$1(oldElm.childNodes), function (node) {\n              newElm.appendChild(node);\n            });\n          }\n          return oldElm.parentNode.replaceChild(newElm, oldElm);\n        });\n      };\n      var rename = function (elm, name) {\n        var newElm;\n        if (elm.nodeName !== name.toUpperCase()) {\n          newElm = create(name);\n          each$f(getAttribs(elm), function (attrNode) {\n            setAttrib(newElm, attrNode.nodeName, getAttrib(elm, attrNode.nodeName));\n          });\n          replace(newElm, elm, true);\n        }\n        return newElm || elm;\n      };\n      var findCommonAncestor = function (a, b) {\n        var ps = a, pe;\n        while (ps) {\n          pe = b;\n          while (pe && ps !== pe) {\n            pe = pe.parentNode;\n          }\n          if (ps === pe) {\n            break;\n          }\n          ps = ps.parentNode;\n        }\n        if (!ps && a.ownerDocument) {\n          return a.ownerDocument.documentElement;\n        }\n        return ps;\n      };\n      var toHex = function (rgbVal) {\n        return styles.toHex(Tools.trim(rgbVal));\n      };\n      var isNonEmptyElement = function (node) {\n        if (isElement$5(node)) {\n          var isNamedAnchor = node.nodeName.toLowerCase() === 'a' && !getAttrib(node, 'href') && getAttrib(node, 'id');\n          if (getAttrib(node, 'name') || getAttrib(node, 'data-mce-bookmark') || isNamedAnchor) {\n            return true;\n          }\n        }\n        return false;\n      };\n      var isEmpty = function (node, elements) {\n        var type, name, brCount = 0;\n        if (isNonEmptyElement(node)) {\n          return false;\n        }\n        node = node.firstChild;\n        if (node) {\n          var walker = new DomTreeWalker(node, node.parentNode);\n          var whitespace = schema ? schema.getWhiteSpaceElements() : {};\n          elements = elements || (schema ? schema.getNonEmptyElements() : null);\n          do {\n            type = node.nodeType;\n            if (isElement$5(node)) {\n              var bogusVal = node.getAttribute('data-mce-bogus');\n              if (bogusVal) {\n                node = walker.next(bogusVal === 'all');\n                continue;\n              }\n              name = node.nodeName.toLowerCase();\n              if (elements && elements[name]) {\n                if (name === 'br') {\n                  brCount++;\n                  node = walker.next();\n                  continue;\n                }\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (type === 8) {\n              return false;\n            }\n            if (type === 3 && !isWhitespaceText(node.nodeValue)) {\n              return false;\n            }\n            if (type === 3 && node.parentNode && whitespace[node.parentNode.nodeName] && isWhitespaceText(node.nodeValue)) {\n              return false;\n            }\n            node = walker.next();\n          } while (node);\n        }\n        return brCount <= 1;\n      };\n      var createRng = function () {\n        return doc.createRange();\n      };\n      var split = function (parentElm, splitElm, replacementElm) {\n        var range = createRng();\n        var beforeFragment;\n        var afterFragment;\n        var parentNode;\n        if (parentElm && splitElm) {\n          range.setStart(parentElm.parentNode, findNodeIndex(parentElm));\n          range.setEnd(splitElm.parentNode, findNodeIndex(splitElm));\n          beforeFragment = range.extractContents();\n          range = createRng();\n          range.setStart(splitElm.parentNode, findNodeIndex(splitElm) + 1);\n          range.setEnd(parentElm.parentNode, findNodeIndex(parentElm) + 1);\n          afterFragment = range.extractContents();\n          parentNode = parentElm.parentNode;\n          parentNode.insertBefore(trimNode(self, beforeFragment), parentElm);\n          if (replacementElm) {\n            parentNode.insertBefore(replacementElm, parentElm);\n          } else {\n            parentNode.insertBefore(splitElm, parentElm);\n          }\n          parentNode.insertBefore(trimNode(self, afterFragment), parentElm);\n          remove(parentElm);\n          return replacementElm || splitElm;\n        }\n      };\n      var bind = function (target, name, func, scope) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          var rv = [];\n          while (i--) {\n            rv[i] = bind(target[i], name, func, scope);\n          }\n          return rv;\n        }\n        if (settings.collect && (target === doc || target === win)) {\n          boundEvents.push([\n            target,\n            name,\n            func,\n            scope\n          ]);\n        }\n        var output = events.bind(target, name, func, scope || self);\n        return output;\n      };\n      var unbind = function (target, name, func) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          var rv = [];\n          while (i--) {\n            rv[i] = unbind(target[i], name, func);\n          }\n          return rv;\n        } else {\n          if (boundEvents.length > 0 && (target === doc || target === win)) {\n            var i = boundEvents.length;\n            while (i--) {\n              var item = boundEvents[i];\n              if (target === item[0] && (!name || name === item[1]) && (!func || func === item[2])) {\n                events.unbind(item[0], item[1], item[2]);\n              }\n            }\n          }\n          return events.unbind(target, name, func);\n        }\n      };\n      var fire = function (target, name, evt) {\n        return events.fire(target, name, evt);\n      };\n      var getContentEditable = function (node) {\n        if (node && isElement$5(node)) {\n          var contentEditable = node.getAttribute('data-mce-contenteditable');\n          if (contentEditable && contentEditable !== 'inherit') {\n            return contentEditable;\n          }\n          return node.contentEditable !== 'inherit' ? node.contentEditable : null;\n        } else {\n          return null;\n        }\n      };\n      var getContentEditableParent = function (node) {\n        var root = getRoot();\n        var state = null;\n        for (; node && node !== root; node = node.parentNode) {\n          state = getContentEditable(node);\n          if (state !== null) {\n            break;\n          }\n        }\n        return state;\n      };\n      var destroy = function () {\n        if (boundEvents.length > 0) {\n          var i = boundEvents.length;\n          while (i--) {\n            var item = boundEvents[i];\n            events.unbind(item[0], item[1], item[2]);\n          }\n        }\n        each$j(files, function (_, url) {\n          styleSheetLoader.unload(url);\n          delete files[url];\n        });\n        if (Sizzle.setDocument) {\n          Sizzle.setDocument();\n        }\n      };\n      var isChildOf = function (node, parent) {\n        if (!isIE) {\n          return node === parent || parent.contains(node);\n        } else {\n          while (node) {\n            if (parent === node) {\n              return true;\n            }\n            node = node.parentNode;\n          }\n          return false;\n        }\n      };\n      var dumpRng = function (r) {\n        return 'startContainer: ' + r.startContainer.nodeName + ', startOffset: ' + r.startOffset + ', endContainer: ' + r.endContainer.nodeName + ', endOffset: ' + r.endOffset;\n      };\n      var self = {\n        doc: doc,\n        settings: settings,\n        win: win,\n        files: files,\n        stdMode: stdMode,\n        boxModel: boxModel,\n        styleSheetLoader: styleSheetLoader,\n        boundEvents: boundEvents,\n        styles: styles,\n        schema: schema,\n        events: events,\n        isBlock: isBlock,\n        $: $,\n        $$: $$,\n        root: null,\n        clone: clone,\n        getRoot: getRoot,\n        getViewPort: getViewPort,\n        getRect: getRect,\n        getSize: getSize,\n        getParent: getParent,\n        getParents: getParents,\n        get: get,\n        getNext: getNext,\n        getPrev: getPrev,\n        select: select,\n        is: is,\n        add: add,\n        create: create,\n        createHTML: createHTML,\n        createFragment: createFragment,\n        remove: remove,\n        setStyle: setStyle,\n        getStyle: getStyle,\n        setStyles: setStyles,\n        removeAllAttribs: removeAllAttribs,\n        setAttrib: setAttrib,\n        setAttribs: setAttribs,\n        getAttrib: getAttrib,\n        getPos: getPos$1,\n        parseStyle: parseStyle,\n        serializeStyle: serializeStyle,\n        addStyle: addStyle,\n        loadCSS: loadCSS,\n        addClass: addClass,\n        removeClass: removeClass,\n        hasClass: hasClass,\n        toggleClass: toggleClass,\n        show: show,\n        hide: hide,\n        isHidden: isHidden,\n        uniqueId: uniqueId,\n        setHTML: setHTML,\n        getOuterHTML: getOuterHTML,\n        setOuterHTML: setOuterHTML,\n        decode: decode,\n        encode: encode,\n        insertAfter: insertAfter,\n        replace: replace,\n        rename: rename,\n        findCommonAncestor: findCommonAncestor,\n        toHex: toHex,\n        run: run,\n        getAttribs: getAttribs,\n        isEmpty: isEmpty,\n        createRng: createRng,\n        nodeIndex: findNodeIndex,\n        split: split,\n        bind: bind,\n        unbind: unbind,\n        fire: fire,\n        getContentEditable: getContentEditable,\n        getContentEditableParent: getContentEditableParent,\n        destroy: destroy,\n        isChildOf: isChildOf,\n        dumpRng: dumpRng\n      };\n      var attrHooks = setupAttrHooks(styles, settings, constant(self));\n      return self;\n    };\n    DOMUtils.DOM = DOMUtils(document);\n    DOMUtils.nodeIndex = findNodeIndex;\n\n    var DOM$a = DOMUtils.DOM;\n    var each$e = Tools.each, grep = Tools.grep;\n    var QUEUED = 0;\n    var LOADING = 1;\n    var LOADED = 2;\n    var FAILED = 3;\n    var ScriptLoader = function () {\n      function ScriptLoader(settings) {\n        if (settings === void 0) {\n          settings = {};\n        }\n        this.states = {};\n        this.queue = [];\n        this.scriptLoadedCallbacks = {};\n        this.queueLoadedCallbacks = [];\n        this.loading = 0;\n        this.settings = settings;\n      }\n      ScriptLoader.prototype._setReferrerPolicy = function (referrerPolicy) {\n        this.settings.referrerPolicy = referrerPolicy;\n      };\n      ScriptLoader.prototype.loadScript = function (url, success, failure) {\n        var dom = DOM$a;\n        var elm;\n        var cleanup = function () {\n          dom.remove(id);\n          if (elm) {\n            elm.onerror = elm.onload = elm = null;\n          }\n        };\n        var done = function () {\n          cleanup();\n          success();\n        };\n        var error = function () {\n          cleanup();\n          if (isFunction(failure)) {\n            failure();\n          } else {\n            if (typeof console !== 'undefined' && console.log) {\n              console.log('Failed to load script: ' + url);\n            }\n          }\n        };\n        var id = dom.uniqueId();\n        elm = document.createElement('script');\n        elm.id = id;\n        elm.type = 'text/javascript';\n        elm.src = Tools._addCacheSuffix(url);\n        if (this.settings.referrerPolicy) {\n          dom.setAttrib(elm, 'referrerpolicy', this.settings.referrerPolicy);\n        }\n        elm.onload = done;\n        elm.onerror = error;\n        (document.getElementsByTagName('head')[0] || document.body).appendChild(elm);\n      };\n      ScriptLoader.prototype.isDone = function (url) {\n        return this.states[url] === LOADED;\n      };\n      ScriptLoader.prototype.markDone = function (url) {\n        this.states[url] = LOADED;\n      };\n      ScriptLoader.prototype.add = function (url, success, scope, failure) {\n        var state = this.states[url];\n        this.queue.push(url);\n        if (state === undefined) {\n          this.states[url] = QUEUED;\n        }\n        if (success) {\n          if (!this.scriptLoadedCallbacks[url]) {\n            this.scriptLoadedCallbacks[url] = [];\n          }\n          this.scriptLoadedCallbacks[url].push({\n            success: success,\n            failure: failure,\n            scope: scope || this\n          });\n        }\n      };\n      ScriptLoader.prototype.load = function (url, success, scope, failure) {\n        return this.add(url, success, scope, failure);\n      };\n      ScriptLoader.prototype.remove = function (url) {\n        delete this.states[url];\n        delete this.scriptLoadedCallbacks[url];\n      };\n      ScriptLoader.prototype.loadQueue = function (success, scope, failure) {\n        this.loadScripts(this.queue, success, scope, failure);\n      };\n      ScriptLoader.prototype.loadScripts = function (scripts, success, scope, failure) {\n        var self = this;\n        var failures = [];\n        var execCallbacks = function (name, url) {\n          each$e(self.scriptLoadedCallbacks[url], function (callback) {\n            if (isFunction(callback[name])) {\n              callback[name].call(callback.scope);\n            }\n          });\n          self.scriptLoadedCallbacks[url] = undefined;\n        };\n        self.queueLoadedCallbacks.push({\n          success: success,\n          failure: failure,\n          scope: scope || this\n        });\n        var loadScripts = function () {\n          var loadingScripts = grep(scripts);\n          scripts.length = 0;\n          each$e(loadingScripts, function (url) {\n            if (self.states[url] === LOADED) {\n              execCallbacks('success', url);\n              return;\n            }\n            if (self.states[url] === FAILED) {\n              execCallbacks('failure', url);\n              return;\n            }\n            if (self.states[url] !== LOADING) {\n              self.states[url] = LOADING;\n              self.loading++;\n              self.loadScript(url, function () {\n                self.states[url] = LOADED;\n                self.loading--;\n                execCallbacks('success', url);\n                loadScripts();\n              }, function () {\n                self.states[url] = FAILED;\n                self.loading--;\n                failures.push(url);\n                execCallbacks('failure', url);\n                loadScripts();\n              });\n            }\n          });\n          if (!self.loading) {\n            var notifyCallbacks = self.queueLoadedCallbacks.slice(0);\n            self.queueLoadedCallbacks.length = 0;\n            each$e(notifyCallbacks, function (callback) {\n              if (failures.length === 0) {\n                if (isFunction(callback.success)) {\n                  callback.success.call(callback.scope);\n                }\n              } else {\n                if (isFunction(callback.failure)) {\n                  callback.failure.call(callback.scope, failures);\n                }\n              }\n            });\n          }\n        };\n        loadScripts();\n      };\n      ScriptLoader.ScriptLoader = new ScriptLoader();\n      return ScriptLoader;\n    }();\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var isRaw = function (str) {\n      return isObject(str) && has$2(str, 'raw');\n    };\n    var isTokenised = function (str) {\n      return isArray$1(str) && str.length > 1;\n    };\n    var data = {};\n    var currentCode = Cell('en');\n    var getLanguageData = function () {\n      return get$9(data, currentCode.get());\n    };\n    var getData = function () {\n      return map$2(data, function (value) {\n        return __assign({}, value);\n      });\n    };\n    var setCode = function (newCode) {\n      if (newCode) {\n        currentCode.set(newCode);\n      }\n    };\n    var getCode = function () {\n      return currentCode.get();\n    };\n    var add$4 = function (code, items) {\n      var langData = data[code];\n      if (!langData) {\n        data[code] = langData = {};\n      }\n      each$j(items, function (translation, name) {\n        langData[name.toLowerCase()] = translation;\n      });\n    };\n    var translate = function (text) {\n      var langData = getLanguageData().getOr({});\n      var toString = function (obj) {\n        if (isFunction(obj)) {\n          return Object.prototype.toString.call(obj);\n        }\n        return !isEmpty(obj) ? '' + obj : '';\n      };\n      var isEmpty = function (text) {\n        return text === '' || text === null || text === undefined;\n      };\n      var getLangData = function (text) {\n        var textstr = toString(text);\n        return get$9(langData, textstr.toLowerCase()).map(toString).getOr(textstr);\n      };\n      var removeContext = function (str) {\n        return str.replace(/{context:\\w+}$/, '');\n      };\n      if (isEmpty(text)) {\n        return '';\n      }\n      if (isRaw(text)) {\n        return toString(text.raw);\n      }\n      if (isTokenised(text)) {\n        var values_1 = text.slice(1);\n        var substitued = getLangData(text[0]).replace(/\\{([0-9]+)\\}/g, function ($1, $2) {\n          return has$2(values_1, $2) ? toString(values_1[$2]) : $1;\n        });\n        return removeContext(substitued);\n      }\n      return removeContext(getLangData(text));\n    };\n    var isRtl$1 = function () {\n      return getLanguageData().bind(function (items) {\n        return get$9(items, '_dir');\n      }).exists(function (dir) {\n        return dir === 'rtl';\n      });\n    };\n    var hasCode = function (code) {\n      return has$2(data, code);\n    };\n    var I18n = {\n      getData: getData,\n      setCode: setCode,\n      getCode: getCode,\n      add: add$4,\n      translate: translate,\n      isRtl: isRtl$1,\n      hasCode: hasCode\n    };\n\n    var AddOnManager = function () {\n      var items = [];\n      var urls = {};\n      var lookup = {};\n      var _listeners = [];\n      var runListeners = function (name, state) {\n        var matchedListeners = filter$4(_listeners, function (listener) {\n          return listener.name === name && listener.state === state;\n        });\n        each$k(matchedListeners, function (listener) {\n          return listener.callback();\n        });\n      };\n      var get = function (name) {\n        if (lookup[name]) {\n          return lookup[name].instance;\n        }\n        return undefined;\n      };\n      var dependencies = function (name) {\n        var result;\n        if (lookup[name]) {\n          result = lookup[name].dependencies;\n        }\n        return result || [];\n      };\n      var requireLangPack = function (name, languages) {\n        if (AddOnManager.languageLoad !== false) {\n          waitFor(name, function () {\n            var language = I18n.getCode();\n            var wrappedLanguages = ',' + (languages || '') + ',';\n            if (!language || languages && wrappedLanguages.indexOf(',' + language + ',') === -1) {\n              return;\n            }\n            ScriptLoader.ScriptLoader.add(urls[name] + '/langs/' + language + '.js');\n          }, 'loaded');\n        }\n      };\n      var add = function (id, addOn, dependencies) {\n        var addOnConstructor = addOn;\n        items.push(addOnConstructor);\n        lookup[id] = {\n          instance: addOnConstructor,\n          dependencies: dependencies\n        };\n        runListeners(id, 'added');\n        return addOnConstructor;\n      };\n      var remove = function (name) {\n        delete urls[name];\n        delete lookup[name];\n      };\n      var createUrl = function (baseUrl, dep) {\n        if (typeof dep === 'object') {\n          return dep;\n        }\n        return typeof baseUrl === 'string' ? {\n          prefix: '',\n          resource: dep,\n          suffix: ''\n        } : {\n          prefix: baseUrl.prefix,\n          resource: dep,\n          suffix: baseUrl.suffix\n        };\n      };\n      var addComponents = function (pluginName, scripts) {\n        var pluginUrl = urls[pluginName];\n        each$k(scripts, function (script) {\n          ScriptLoader.ScriptLoader.add(pluginUrl + '/' + script);\n        });\n      };\n      var loadDependencies = function (name, addOnUrl, success, scope) {\n        var deps = dependencies(name);\n        each$k(deps, function (dep) {\n          var newUrl = createUrl(addOnUrl, dep);\n          load(newUrl.resource, newUrl, undefined, undefined);\n        });\n        if (success) {\n          if (scope) {\n            success.call(scope);\n          } else {\n            success.call(ScriptLoader);\n          }\n        }\n      };\n      var load = function (name, addOnUrl, success, scope, failure) {\n        if (urls[name]) {\n          return;\n        }\n        var urlString = typeof addOnUrl === 'string' ? addOnUrl : addOnUrl.prefix + addOnUrl.resource + addOnUrl.suffix;\n        if (urlString.indexOf('/') !== 0 && urlString.indexOf('://') === -1) {\n          urlString = AddOnManager.baseURL + '/' + urlString;\n        }\n        urls[name] = urlString.substring(0, urlString.lastIndexOf('/'));\n        var done = function () {\n          runListeners(name, 'loaded');\n          loadDependencies(name, addOnUrl, success, scope);\n        };\n        if (lookup[name]) {\n          done();\n        } else {\n          ScriptLoader.ScriptLoader.add(urlString, done, scope, failure);\n        }\n      };\n      var waitFor = function (name, callback, state) {\n        if (state === void 0) {\n          state = 'added';\n        }\n        if (has$2(lookup, name) && state === 'added') {\n          callback();\n        } else if (has$2(urls, name) && state === 'loaded') {\n          callback();\n        } else {\n          _listeners.push({\n            name: name,\n            state: state,\n            callback: callback\n          });\n        }\n      };\n      return {\n        items: items,\n        urls: urls,\n        lookup: lookup,\n        _listeners: _listeners,\n        get: get,\n        dependencies: dependencies,\n        requireLangPack: requireLangPack,\n        add: add,\n        remove: remove,\n        createUrl: createUrl,\n        addComponents: addComponents,\n        load: load,\n        waitFor: waitFor\n      };\n    };\n    AddOnManager.languageLoad = true;\n    AddOnManager.baseURL = '';\n    AddOnManager.PluginManager = AddOnManager();\n    AddOnManager.ThemeManager = AddOnManager();\n\n    var singleton = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var get = function () {\n        return subject.get();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        get: get,\n        set: set\n      };\n    };\n    var value = function () {\n      var subject = singleton(noop);\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { on: on });\n    };\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (isNull(timer)) {\n          timer = setTimeout(function () {\n            timer = null;\n            fn.apply(null, args);\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        cancel();\n        timer = setTimeout(function () {\n          timer = null;\n          fn.apply(null, args);\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var read$4 = function (element, attr) {\n      var value = get$6(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$3 = function (element, attr, id) {\n      var old = read$4(element, attr);\n      var nu = old.concat([id]);\n      set$1(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$5 = function (element, attr, id) {\n      var nu = filter$4(read$4(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set$1(element, attr, nu.join(' '));\n      } else {\n        remove$6(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$4 = function (element) {\n      return read$4(element, 'class');\n    };\n    var add$2 = function (element, clazz) {\n      return add$3(element, 'class', clazz);\n    };\n    var remove$4 = function (element, clazz) {\n      return remove$5(element, 'class', clazz);\n    };\n\n    var add$1 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$2(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$4(element);\n      if (classList.length === 0) {\n        remove$6(element, 'class');\n      }\n    };\n    var remove$3 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$4(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var descendants$1 = function (scope, predicate) {\n      var result = [];\n      each$k(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants$1(x, predicate));\n      });\n      return result;\n    };\n\n    var descendants = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    var annotation = constant('mce-annotation');\n    var dataAnnotation = constant('data-mce-annotation');\n    var dataAnnotationId = constant('data-mce-annotation-uid');\n\n    var identify = function (editor, annotationName) {\n      var rng = editor.selection.getRng();\n      var start = SugarElement.fromDom(rng.startContainer);\n      var root = SugarElement.fromDom(editor.getBody());\n      var selector = annotationName.fold(function () {\n        return '.' + annotation();\n      }, function (an) {\n        return '[' + dataAnnotation() + '=\"' + an + '\"]';\n      });\n      var newStart = child$1(start, rng.startOffset).getOr(start);\n      var closest = closest$2(newStart, selector, function (n) {\n        return eq(n, root);\n      });\n      var getAttr = function (c, property) {\n        if (has$1(c, property)) {\n          return Optional.some(get$6(c, property));\n        } else {\n          return Optional.none();\n        }\n      };\n      return closest.bind(function (c) {\n        return getAttr(c, '' + dataAnnotationId()).bind(function (uid) {\n          return getAttr(c, '' + dataAnnotation()).map(function (name) {\n            var elements = findMarkers(editor, uid);\n            return {\n              uid: uid,\n              name: name,\n              elements: elements\n            };\n          });\n        });\n      });\n    };\n    var isAnnotation = function (elem) {\n      return isElement$6(elem) && has(elem, annotation());\n    };\n    var findMarkers = function (editor, uid) {\n      var body = SugarElement.fromDom(editor.getBody());\n      return descendants(body, '[' + dataAnnotationId() + '=\"' + uid + '\"]');\n    };\n    var findAll = function (editor, name) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var markers = descendants(body, '[' + dataAnnotation() + '=\"' + name + '\"]');\n      var directory = {};\n      each$k(markers, function (m) {\n        var uid = get$6(m, dataAnnotationId());\n        var nodesAlready = get$9(directory, uid).getOr([]);\n        directory[uid] = nodesAlready.concat([m]);\n      });\n      return directory;\n    };\n\n    var setup$n = function (editor, _registry) {\n      var changeCallbacks = Cell({});\n      var initData = function () {\n        return {\n          listeners: [],\n          previous: value()\n        };\n      };\n      var withCallbacks = function (name, f) {\n        updateCallbacks(name, function (data) {\n          f(data);\n          return data;\n        });\n      };\n      var updateCallbacks = function (name, f) {\n        var callbackMap = changeCallbacks.get();\n        var data = get$9(callbackMap, name).getOrThunk(initData);\n        var outputData = f(data);\n        callbackMap[name] = outputData;\n        changeCallbacks.set(callbackMap);\n      };\n      var fireCallbacks = function (name, uid, elements) {\n        withCallbacks(name, function (data) {\n          each$k(data.listeners, function (f) {\n            return f(true, name, {\n              uid: uid,\n              nodes: map$3(elements, function (elem) {\n                return elem.dom;\n              })\n            });\n          });\n        });\n      };\n      var fireNoAnnotation = function (name) {\n        withCallbacks(name, function (data) {\n          each$k(data.listeners, function (f) {\n            return f(false, name);\n          });\n        });\n      };\n      var onNodeChange = last(function () {\n        var callbackMap = changeCallbacks.get();\n        var annotations = sort(keys(callbackMap));\n        each$k(annotations, function (name) {\n          updateCallbacks(name, function (data) {\n            var prev = data.previous.get();\n            identify(editor, Optional.some(name)).fold(function () {\n              if (prev.isSome()) {\n                fireNoAnnotation(name);\n                data.previous.clear();\n              }\n            }, function (_a) {\n              var uid = _a.uid, name = _a.name, elements = _a.elements;\n              if (!is$1(prev, uid)) {\n                fireCallbacks(name, uid, elements);\n                data.previous.set(uid);\n              }\n            });\n            return {\n              previous: data.previous,\n              listeners: data.listeners\n            };\n          });\n        });\n      }, 30);\n      editor.on('remove', function () {\n        onNodeChange.cancel();\n      });\n      editor.on('NodeChange', function () {\n        onNodeChange.throttle();\n      });\n      var addListener = function (name, f) {\n        updateCallbacks(name, function (data) {\n          return {\n            previous: data.previous,\n            listeners: data.listeners.concat([f])\n          };\n        });\n      };\n      return { addListener: addListener };\n    };\n\n    var setup$m = function (editor, registry) {\n      var identifyParserNode = function (span) {\n        return Optional.from(span.attr(dataAnnotation())).bind(registry.lookup);\n      };\n      editor.on('init', function () {\n        editor.serializer.addNodeFilter('span', function (spans) {\n          each$k(spans, function (span) {\n            identifyParserNode(span).each(function (settings) {\n              if (settings.persistent === false) {\n                span.unwrap();\n              }\n            });\n          });\n        });\n      });\n    };\n\n    var create$7 = function () {\n      var annotations = {};\n      var register = function (name, settings) {\n        annotations[name] = {\n          name: name,\n          settings: settings\n        };\n      };\n      var lookup = function (name) {\n        return get$9(annotations, name).map(function (a) {\n          return a.settings;\n        });\n      };\n      return {\n        register: register,\n        lookup: lookup\n      };\n    };\n\n    var unique = 0;\n    var generate = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var add = function (element, classes) {\n      each$k(classes, function (x) {\n        add$1(element, x);\n      });\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n    var fromDom$1 = function (nodes) {\n      return map$3(nodes, SugarElement.fromDom);\n    };\n\n    var get$3 = function (element) {\n      return element.dom.innerHTML;\n    };\n    var set = function (element, content) {\n      var owner = owner$1(element);\n      var docDom = owner.dom;\n      var fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml(content, docDom);\n      append(fragment, contentElements);\n      empty(element);\n      append$1(element, fragment);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$1(original, false);\n    };\n    var deep$1 = function (original) {\n      return clone$1(original, true);\n    };\n\n    var TextWalker = function (startNode, rootNode, isBoundary) {\n      if (isBoundary === void 0) {\n        isBoundary = never;\n      }\n      var walker = new DomTreeWalker(startNode, rootNode);\n      var walk = function (direction) {\n        var next;\n        do {\n          next = walker[direction]();\n        } while (next && !isText$7(next) && !isBoundary(next));\n        return Optional.from(next).filter(isText$7);\n      };\n      return {\n        current: function () {\n          return Optional.from(walker.current()).filter(isText$7);\n        },\n        next: function () {\n          return walk('next');\n        },\n        prev: function () {\n          return walk('prev');\n        },\n        prev2: function () {\n          return walk('prev2');\n        }\n      };\n    };\n\n    var TextSeeker = function (dom, isBoundary) {\n      var isBlockBoundary = isBoundary ? isBoundary : function (node) {\n        return dom.isBlock(node) || isBr$5(node) || isContentEditableFalse$b(node);\n      };\n      var walk = function (node, offset, walker, process) {\n        if (isText$7(node)) {\n          var newOffset = process(node, offset, node.data);\n          if (newOffset !== -1) {\n            return Optional.some({\n              container: node,\n              offset: newOffset\n            });\n          }\n        }\n        return walker().bind(function (next) {\n          return walk(next.container, next.offset, walker, process);\n        });\n      };\n      var backwards = function (node, offset, process, root) {\n        var walker = TextWalker(node, root, isBlockBoundary);\n        return walk(node, offset, function () {\n          return walker.prev().map(function (prev) {\n            return {\n              container: prev,\n              offset: prev.length\n            };\n          });\n        }, process).getOrNull();\n      };\n      var forwards = function (node, offset, process, root) {\n        var walker = TextWalker(node, root, isBlockBoundary);\n        return walk(node, offset, function () {\n          return walker.next().map(function (next) {\n            return {\n              container: next,\n              offset: 0\n            };\n          });\n        }, process).getOrNull();\n      };\n      return {\n        backwards: backwards,\n        forwards: forwards\n      };\n    };\n\n    var round$2 = Math.round;\n    var clone = function (rect) {\n      if (!rect) {\n        return {\n          left: 0,\n          top: 0,\n          bottom: 0,\n          right: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      return {\n        left: round$2(rect.left),\n        top: round$2(rect.top),\n        bottom: round$2(rect.bottom),\n        right: round$2(rect.right),\n        width: round$2(rect.width),\n        height: round$2(rect.height)\n      };\n    };\n    var collapse = function (rect, toStart) {\n      rect = clone(rect);\n      if (toStart) {\n        rect.right = rect.left;\n      } else {\n        rect.left = rect.left + rect.width;\n        rect.right = rect.left;\n      }\n      rect.width = 0;\n      return rect;\n    };\n    var isEqual = function (rect1, rect2) {\n      return rect1.left === rect2.left && rect1.top === rect2.top && rect1.bottom === rect2.bottom && rect1.right === rect2.right;\n    };\n    var isValidOverflow = function (overflowY, rect1, rect2) {\n      return overflowY >= 0 && overflowY <= Math.min(rect1.height, rect2.height) / 2;\n    };\n    var isAbove$1 = function (rect1, rect2) {\n      var halfHeight = Math.min(rect2.height / 2, rect1.height / 2);\n      if (rect1.bottom - halfHeight < rect2.top) {\n        return true;\n      }\n      if (rect1.top > rect2.bottom) {\n        return false;\n      }\n      return isValidOverflow(rect2.top - rect1.bottom, rect1, rect2);\n    };\n    var isBelow$1 = function (rect1, rect2) {\n      if (rect1.top > rect2.bottom) {\n        return true;\n      }\n      if (rect1.bottom < rect2.top) {\n        return false;\n      }\n      return isValidOverflow(rect2.bottom - rect1.top, rect1, rect2);\n    };\n    var containsXY = function (rect, clientX, clientY) {\n      return clientX >= rect.left && clientX <= rect.right && clientY >= rect.top && clientY <= rect.bottom;\n    };\n\n    var clamp$2 = function (value, min, max) {\n      return Math.min(Math.max(value, min), max);\n    };\n\n    var getSelectedNode = function (range) {\n      var startContainer = range.startContainer, startOffset = range.startOffset;\n      if (startContainer.hasChildNodes() && range.endOffset === startOffset + 1) {\n        return startContainer.childNodes[startOffset];\n      }\n      return null;\n    };\n    var getNode$1 = function (container, offset) {\n      if (isElement$5(container) && container.hasChildNodes()) {\n        var childNodes = container.childNodes;\n        var safeOffset = clamp$2(offset, 0, childNodes.length - 1);\n        return childNodes[safeOffset];\n      } else {\n        return container;\n      }\n    };\n    var getNodeUnsafe = function (container, offset) {\n      if (offset < 0 && isElement$5(container) && container.hasChildNodes()) {\n        return undefined;\n      } else {\n        return getNode$1(container, offset);\n      }\n    };\n\n    var extendingChars = new RegExp('[\\u0300-\\u036f\\u0483-\\u0487\\u0488-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a' + '\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0' + '\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08e3-\\u0902\\u093a\\u093c' + '\\u0941-\\u0948\\u094d\\u0951-\\u0957\\u0962-\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2-\\u09e3' + '\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc' + '\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57' + '\\u0b62-\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c00\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56' + '\\u0c62-\\u0c63\\u0c81\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc-\\u0ccd\\u0cd5-\\u0cd6\\u0ce2-\\u0ce3\\u0d01\\u0d3e\\u0d41-\\u0d44' + '\\u0d4d\\u0d57\\u0d62-\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9' + '\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97' + '\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074' + '\\u1082\\u1085-\\u1086\\u108d\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b4-\\u17b5' + '\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18' + '\\u1a1b\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1ab0-\\u1abd\\u1ABE\\u1b00-\\u1b03\\u1b34' + '\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1bab-\\u1bad\\u1be6\\u1be8-\\u1be9' + '\\u1bed\\u1bef-\\u1bf1\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1cf4\\u1cf8-\\u1cf9' + '\\u1dc0-\\u1df5\\u1dfc-\\u1dff\\u200c-\\u200d\\u20d0-\\u20dc\\u20DD-\\u20E0\\u20e1\\u20E2-\\u20E4\\u20e5-\\u20f0\\u2cef-\\u2cf1' + '\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302d\\u302e-\\u302f\\u3099-\\u309a\\ua66f\\uA670-\\uA672\\ua674-\\ua67d\\ua69e-\\ua69f\\ua6f0-\\ua6f1' + '\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc' + '\\ua9e5\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\uaa7c\\uaab0\\uaab2-\\uaab4\\uaab7-\\uaab8\\uaabe-\\uaabf\\uaac1' + '\\uaaec-\\uaaed\\uaaf6\\uabe5\\uabe8\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\uff9e-\\uff9f]');\n    var isExtendingChar = function (ch) {\n      return typeof ch === 'string' && ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n    };\n\n    var or = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (args[i](x)) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var and = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (!args[i](x)) {\n            return false;\n          }\n        }\n        return true;\n      };\n    };\n\n    var isElement$3 = isElement$5;\n    var isCaretCandidate$2 = isCaretCandidate$3;\n    var isBlock$1 = matchStyleValues('display', 'block table');\n    var isFloated = matchStyleValues('float', 'left right');\n    var isValidElementCaretCandidate = and(isElement$3, isCaretCandidate$2, not(isFloated));\n    var isNotPre = not(matchStyleValues('white-space', 'pre pre-line pre-wrap'));\n    var isText$4 = isText$7;\n    var isBr$2 = isBr$5;\n    var nodeIndex$1 = DOMUtils.nodeIndex;\n    var resolveIndex$1 = getNodeUnsafe;\n    var createRange$1 = function (doc) {\n      return 'createRange' in doc ? doc.createRange() : DOMUtils.DOM.createRng();\n    };\n    var isWhiteSpace$1 = function (chr) {\n      return chr && /[\\r\\n\\t ]/.test(chr);\n    };\n    var isRange = function (rng) {\n      return !!rng.setStart && !!rng.setEnd;\n    };\n    var isHiddenWhiteSpaceRange = function (range) {\n      var container = range.startContainer;\n      var offset = range.startOffset;\n      if (isWhiteSpace$1(range.toString()) && isNotPre(container.parentNode) && isText$7(container)) {\n        var text = container.data;\n        if (isWhiteSpace$1(text[offset - 1]) || isWhiteSpace$1(text[offset + 1])) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var getBrClientRect = function (brNode) {\n      var doc = brNode.ownerDocument;\n      var rng = createRange$1(doc);\n      var nbsp$1 = doc.createTextNode(nbsp);\n      var parentNode = brNode.parentNode;\n      parentNode.insertBefore(nbsp$1, brNode);\n      rng.setStart(nbsp$1, 0);\n      rng.setEnd(nbsp$1, 1);\n      var clientRect = clone(rng.getBoundingClientRect());\n      parentNode.removeChild(nbsp$1);\n      return clientRect;\n    };\n    var getBoundingClientRectWebKitText = function (rng) {\n      var sc = rng.startContainer;\n      var ec = rng.endContainer;\n      var so = rng.startOffset;\n      var eo = rng.endOffset;\n      if (sc === ec && isText$7(ec) && so === 0 && eo === 1) {\n        var newRng = rng.cloneRange();\n        newRng.setEndAfter(ec);\n        return getBoundingClientRect$1(newRng);\n      } else {\n        return null;\n      }\n    };\n    var isZeroRect = function (r) {\n      return r.left === 0 && r.right === 0 && r.top === 0 && r.bottom === 0;\n    };\n    var getBoundingClientRect$1 = function (item) {\n      var clientRect;\n      var clientRects = item.getClientRects();\n      if (clientRects.length > 0) {\n        clientRect = clone(clientRects[0]);\n      } else {\n        clientRect = clone(item.getBoundingClientRect());\n      }\n      if (!isRange(item) && isBr$2(item) && isZeroRect(clientRect)) {\n        return getBrClientRect(item);\n      }\n      if (isZeroRect(clientRect) && isRange(item)) {\n        return getBoundingClientRectWebKitText(item);\n      }\n      return clientRect;\n    };\n    var collapseAndInflateWidth = function (clientRect, toStart) {\n      var newClientRect = collapse(clientRect, toStart);\n      newClientRect.width = 1;\n      newClientRect.right = newClientRect.left + 1;\n      return newClientRect;\n    };\n    var getCaretPositionClientRects = function (caretPosition) {\n      var clientRects = [];\n      var addUniqueAndValidRect = function (clientRect) {\n        if (clientRect.height === 0) {\n          return;\n        }\n        if (clientRects.length > 0) {\n          if (isEqual(clientRect, clientRects[clientRects.length - 1])) {\n            return;\n          }\n        }\n        clientRects.push(clientRect);\n      };\n      var addCharacterOffset = function (container, offset) {\n        var range = createRange$1(container.ownerDocument);\n        if (offset < container.data.length) {\n          if (isExtendingChar(container.data[offset])) {\n            return clientRects;\n          }\n          if (isExtendingChar(container.data[offset - 1])) {\n            range.setStart(container, offset);\n            range.setEnd(container, offset + 1);\n            if (!isHiddenWhiteSpaceRange(range)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), false));\n              return clientRects;\n            }\n          }\n        }\n        if (offset > 0) {\n          range.setStart(container, offset - 1);\n          range.setEnd(container, offset);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), false));\n          }\n        }\n        if (offset < container.data.length) {\n          range.setStart(container, offset);\n          range.setEnd(container, offset + 1);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), true));\n          }\n        }\n      };\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (isText$4(container)) {\n        addCharacterOffset(container, offset);\n        return clientRects;\n      }\n      if (isElement$3(container)) {\n        if (caretPosition.isAtEnd()) {\n          var node = resolveIndex$1(container, offset);\n          if (isText$4(node)) {\n            addCharacterOffset(node, node.data.length);\n          }\n          if (isValidElementCaretCandidate(node) && !isBr$2(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), false));\n          }\n        } else {\n          var node = resolveIndex$1(container, offset);\n          if (isText$4(node)) {\n            addCharacterOffset(node, 0);\n          }\n          if (isValidElementCaretCandidate(node) && caretPosition.isAtEnd()) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), false));\n            return clientRects;\n          }\n          var beforeNode = resolveIndex$1(caretPosition.container(), caretPosition.offset() - 1);\n          if (isValidElementCaretCandidate(beforeNode) && !isBr$2(beforeNode)) {\n            if (isBlock$1(beforeNode) || isBlock$1(node) || !isValidElementCaretCandidate(node)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(beforeNode), false));\n            }\n          }\n          if (isValidElementCaretCandidate(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), true));\n          }\n        }\n      }\n      return clientRects;\n    };\n    var CaretPosition = function (container, offset, clientRects) {\n      var isAtStart = function () {\n        if (isText$4(container)) {\n          return offset === 0;\n        }\n        return offset === 0;\n      };\n      var isAtEnd = function () {\n        if (isText$4(container)) {\n          return offset >= container.data.length;\n        }\n        return offset >= container.childNodes.length;\n      };\n      var toRange = function () {\n        var range = createRange$1(container.ownerDocument);\n        range.setStart(container, offset);\n        range.setEnd(container, offset);\n        return range;\n      };\n      var getClientRects = function () {\n        if (!clientRects) {\n          clientRects = getCaretPositionClientRects(CaretPosition(container, offset));\n        }\n        return clientRects;\n      };\n      var isVisible = function () {\n        return getClientRects().length > 0;\n      };\n      var isEqual = function (caretPosition) {\n        return caretPosition && container === caretPosition.container() && offset === caretPosition.offset();\n      };\n      var getNode = function (before) {\n        return resolveIndex$1(container, before ? offset - 1 : offset);\n      };\n      return {\n        container: constant(container),\n        offset: constant(offset),\n        toRange: toRange,\n        getClientRects: getClientRects,\n        isVisible: isVisible,\n        isAtStart: isAtStart,\n        isAtEnd: isAtEnd,\n        isEqual: isEqual,\n        getNode: getNode\n      };\n    };\n    CaretPosition.fromRangeStart = function (range) {\n      return CaretPosition(range.startContainer, range.startOffset);\n    };\n    CaretPosition.fromRangeEnd = function (range) {\n      return CaretPosition(range.endContainer, range.endOffset);\n    };\n    CaretPosition.after = function (node) {\n      return CaretPosition(node.parentNode, nodeIndex$1(node) + 1);\n    };\n    CaretPosition.before = function (node) {\n      return CaretPosition(node.parentNode, nodeIndex$1(node));\n    };\n    CaretPosition.isAbove = function (pos1, pos2) {\n      return lift2(head(pos2.getClientRects()), last$2(pos1.getClientRects()), isAbove$1).getOr(false);\n    };\n    CaretPosition.isBelow = function (pos1, pos2) {\n      return lift2(last$2(pos2.getClientRects()), head(pos1.getClientRects()), isBelow$1).getOr(false);\n    };\n    CaretPosition.isAtStart = function (pos) {\n      return pos ? pos.isAtStart() : false;\n    };\n    CaretPosition.isAtEnd = function (pos) {\n      return pos ? pos.isAtEnd() : false;\n    };\n    CaretPosition.isTextPosition = function (pos) {\n      return pos ? isText$7(pos.container()) : false;\n    };\n    CaretPosition.isElementPosition = function (pos) {\n      return CaretPosition.isTextPosition(pos) === false;\n    };\n\n    var trimEmptyTextNode$1 = function (dom, node) {\n      if (isText$7(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var insertNode = function (dom, rng, node) {\n      rng.insertNode(node);\n      trimEmptyTextNode$1(dom, node.previousSibling);\n      trimEmptyTextNode$1(dom, node.nextSibling);\n    };\n    var insertFragment = function (dom, rng, frag) {\n      var firstChild = Optional.from(frag.firstChild);\n      var lastChild = Optional.from(frag.lastChild);\n      rng.insertNode(frag);\n      firstChild.each(function (child) {\n        return trimEmptyTextNode$1(dom, child.previousSibling);\n      });\n      lastChild.each(function (child) {\n        return trimEmptyTextNode$1(dom, child.nextSibling);\n      });\n    };\n    var rangeInsertNode = function (dom, rng, node) {\n      if (isDocumentFragment(node)) {\n        insertFragment(dom, rng, node);\n      } else {\n        insertNode(dom, rng, node);\n      }\n    };\n\n    var isText$3 = isText$7;\n    var isBogus = isBogus$2;\n    var nodeIndex = DOMUtils.nodeIndex;\n    var normalizedParent = function (node) {\n      var parentNode = node.parentNode;\n      if (isBogus(parentNode)) {\n        return normalizedParent(parentNode);\n      }\n      return parentNode;\n    };\n    var getChildNodes = function (node) {\n      if (!node) {\n        return [];\n      }\n      return reduce(node.childNodes, function (result, node) {\n        if (isBogus(node) && node.nodeName !== 'BR') {\n          result = result.concat(getChildNodes(node));\n        } else {\n          result.push(node);\n        }\n        return result;\n      }, []);\n    };\n    var normalizedTextOffset = function (node, offset) {\n      while (node = node.previousSibling) {\n        if (!isText$3(node)) {\n          break;\n        }\n        offset += node.data.length;\n      }\n      return offset;\n    };\n    var equal = function (a) {\n      return function (b) {\n        return a === b;\n      };\n    };\n    var normalizedNodeIndex = function (node) {\n      var nodes, index;\n      nodes = getChildNodes(normalizedParent(node));\n      index = findIndex$1(nodes, equal(node), node);\n      nodes = nodes.slice(0, index + 1);\n      var numTextFragments = reduce(nodes, function (result, node, i) {\n        if (isText$3(node) && isText$3(nodes[i - 1])) {\n          result++;\n        }\n        return result;\n      }, 0);\n      nodes = filter$2(nodes, matchNodeNames([node.nodeName]));\n      index = findIndex$1(nodes, equal(node), node);\n      return index - numTextFragments;\n    };\n    var createPathItem = function (node) {\n      var name;\n      if (isText$3(node)) {\n        name = 'text()';\n      } else {\n        name = node.nodeName.toLowerCase();\n      }\n      return name + '[' + normalizedNodeIndex(node) + ']';\n    };\n    var parentsUntil$1 = function (root, node, predicate) {\n      var parents = [];\n      for (node = node.parentNode; node !== root; node = node.parentNode) {\n        if (predicate && predicate(node)) {\n          break;\n        }\n        parents.push(node);\n      }\n      return parents;\n    };\n    var create$6 = function (root, caretPosition) {\n      var container, offset, path = [], outputOffset, childNodes, parents;\n      container = caretPosition.container();\n      offset = caretPosition.offset();\n      if (isText$3(container)) {\n        outputOffset = normalizedTextOffset(container, offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length) {\n          outputOffset = 'after';\n          offset = childNodes.length - 1;\n        } else {\n          outputOffset = 'before';\n        }\n        container = childNodes[offset];\n      }\n      path.push(createPathItem(container));\n      parents = parentsUntil$1(root, container);\n      parents = filter$2(parents, not(isBogus$2));\n      path = path.concat(map$1(parents, function (node) {\n        return createPathItem(node);\n      }));\n      return path.reverse().join('/') + ',' + outputOffset;\n    };\n    var resolvePathItem = function (node, name, index) {\n      var nodes = getChildNodes(node);\n      nodes = filter$2(nodes, function (node, index) {\n        return !isText$3(node) || !isText$3(nodes[index - 1]);\n      });\n      nodes = filter$2(nodes, matchNodeNames([name]));\n      return nodes[index];\n    };\n    var findTextPosition = function (container, offset) {\n      var node = container, targetOffset = 0, dataLen;\n      while (isText$3(node)) {\n        dataLen = node.data.length;\n        if (offset >= targetOffset && offset <= targetOffset + dataLen) {\n          container = node;\n          offset = offset - targetOffset;\n          break;\n        }\n        if (!isText$3(node.nextSibling)) {\n          container = node;\n          offset = dataLen;\n          break;\n        }\n        targetOffset += dataLen;\n        node = node.nextSibling;\n      }\n      if (isText$3(container) && offset > container.data.length) {\n        offset = container.data.length;\n      }\n      return CaretPosition(container, offset);\n    };\n    var resolve$2 = function (root, path) {\n      var offset;\n      if (!path) {\n        return null;\n      }\n      var parts = path.split(',');\n      var paths = parts[0].split('/');\n      offset = parts.length > 1 ? parts[1] : 'before';\n      var container = reduce(paths, function (result, value) {\n        var match = /([\\w\\-\\(\\)]+)\\[([0-9]+)\\]/.exec(value);\n        if (!match) {\n          return null;\n        }\n        if (match[1] === 'text()') {\n          match[1] = '#text';\n        }\n        return resolvePathItem(result, match[1], parseInt(match[2], 10));\n      }, root);\n      if (!container) {\n        return null;\n      }\n      if (!isText$3(container)) {\n        if (offset === 'after') {\n          offset = nodeIndex(container) + 1;\n        } else {\n          offset = nodeIndex(container);\n        }\n        return CaretPosition(container.parentNode, offset);\n      }\n      return findTextPosition(container, parseInt(offset, 10));\n    };\n\n    var isContentEditableFalse$9 = isContentEditableFalse$b;\n    var getNormalizedTextOffset = function (trim, container, offset) {\n      var node, trimmedOffset;\n      trimmedOffset = trim(container.data.slice(0, offset)).length;\n      for (node = container.previousSibling; node && isText$7(node); node = node.previousSibling) {\n        trimmedOffset += trim(node.data).length;\n      }\n      return trimmedOffset;\n    };\n    var getPoint = function (dom, trim, normalized, rng, start) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      var point = [];\n      var childNodes, after = 0;\n      var root = dom.getRoot();\n      if (isText$7(container)) {\n        point.push(normalized ? getNormalizedTextOffset(trim, container, offset) : offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length && childNodes.length) {\n          after = 1;\n          offset = Math.max(0, childNodes.length - 1);\n        }\n        point.push(dom.nodeIndex(childNodes[offset], normalized) + after);\n      }\n      for (; container && container !== root; container = container.parentNode) {\n        point.push(dom.nodeIndex(container, normalized));\n      }\n      return point;\n    };\n    var getLocation = function (trim, selection, normalized, rng) {\n      var dom = selection.dom, bookmark = {};\n      bookmark.start = getPoint(dom, trim, normalized, rng, true);\n      if (!selection.isCollapsed()) {\n        bookmark.end = getPoint(dom, trim, normalized, rng, false);\n      }\n      if (isRangeInCaretContainerBlock(rng)) {\n        bookmark.isFakeCaret = true;\n      }\n      return bookmark;\n    };\n    var findIndex = function (dom, name, element) {\n      var count = 0;\n      Tools.each(dom.select(name), function (node) {\n        if (node.getAttribute('data-mce-bogus') === 'all') {\n          return;\n        }\n        if (node === element) {\n          return false;\n        }\n        count++;\n      });\n      return count;\n    };\n    var moveEndPoint$1 = function (rng, start) {\n      var container, offset, childNodes;\n      var prefix = start ? 'start' : 'end';\n      container = rng[prefix + 'Container'];\n      offset = rng[prefix + 'Offset'];\n      if (isElement$5(container) && container.nodeName === 'TR') {\n        childNodes = container.childNodes;\n        container = childNodes[Math.min(start ? offset : offset - 1, childNodes.length - 1)];\n        if (container) {\n          offset = start ? 0 : container.childNodes.length;\n          rng['set' + (start ? 'Start' : 'End')](container, offset);\n        }\n      }\n    };\n    var normalizeTableCellSelection = function (rng) {\n      moveEndPoint$1(rng, true);\n      moveEndPoint$1(rng, false);\n      return rng;\n    };\n    var findSibling = function (node, offset) {\n      var sibling;\n      if (isElement$5(node)) {\n        node = getNode$1(node, offset);\n        if (isContentEditableFalse$9(node)) {\n          return node;\n        }\n      }\n      if (isCaretContainer$2(node)) {\n        if (isText$7(node) && isCaretContainerBlock$1(node)) {\n          node = node.parentNode;\n        }\n        sibling = node.previousSibling;\n        if (isContentEditableFalse$9(sibling)) {\n          return sibling;\n        }\n        sibling = node.nextSibling;\n        if (isContentEditableFalse$9(sibling)) {\n          return sibling;\n        }\n      }\n    };\n    var findAdjacentContentEditableFalseElm = function (rng) {\n      return findSibling(rng.startContainer, rng.startOffset) || findSibling(rng.endContainer, rng.endOffset);\n    };\n    var getOffsetBookmark = function (trim, normalized, selection) {\n      var element = selection.getNode();\n      var name = element ? element.nodeName : null;\n      var rng = selection.getRng();\n      if (isContentEditableFalse$9(element) || name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex(selection.dom, name, element)\n        };\n      }\n      var sibling = findAdjacentContentEditableFalseElm(rng);\n      if (sibling) {\n        name = sibling.tagName;\n        return {\n          name: name,\n          index: findIndex(selection.dom, name, sibling)\n        };\n      }\n      return getLocation(trim, selection, normalized, rng);\n    };\n    var getCaretBookmark = function (selection) {\n      var rng = selection.getRng();\n      return {\n        start: create$6(selection.dom.getRoot(), CaretPosition.fromRangeStart(rng)),\n        end: create$6(selection.dom.getRoot(), CaretPosition.fromRangeEnd(rng))\n      };\n    };\n    var getRangeBookmark = function (selection) {\n      return { rng: selection.getRng() };\n    };\n    var createBookmarkSpan = function (dom, id, filled) {\n      var args = {\n        'data-mce-type': 'bookmark',\n        id: id,\n        'style': 'overflow:hidden;line-height:0px'\n      };\n      return filled ? dom.create('span', args, '&#xFEFF;') : dom.create('span', args);\n    };\n    var getPersistentBookmark = function (selection, filled) {\n      var dom = selection.dom;\n      var rng = selection.getRng();\n      var id = dom.uniqueId();\n      var collapsed = selection.isCollapsed();\n      var element = selection.getNode();\n      var name = element.nodeName;\n      if (name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex(dom, name, element)\n        };\n      }\n      var rng2 = normalizeTableCellSelection(rng.cloneRange());\n      if (!collapsed) {\n        rng2.collapse(false);\n        var endBookmarkNode = createBookmarkSpan(dom, id + '_end', filled);\n        rangeInsertNode(dom, rng2, endBookmarkNode);\n      }\n      rng = normalizeTableCellSelection(rng);\n      rng.collapse(true);\n      var startBookmarkNode = createBookmarkSpan(dom, id + '_start', filled);\n      rangeInsertNode(dom, rng, startBookmarkNode);\n      selection.moveToBookmark({\n        id: id,\n        keep: true\n      });\n      return { id: id };\n    };\n    var getBookmark$2 = function (selection, type, normalized) {\n      if (type === 2) {\n        return getOffsetBookmark(trim$2, normalized, selection);\n      } else if (type === 3) {\n        return getCaretBookmark(selection);\n      } else if (type) {\n        return getRangeBookmark(selection);\n      } else {\n        return getPersistentBookmark(selection, false);\n      }\n    };\n    var getUndoBookmark = curry(getOffsetBookmark, identity, true);\n\n    var DOM$9 = DOMUtils.DOM;\n    var defaultPreviewStyles = 'font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow';\n    var getBodySetting = function (editor, name, defaultValue) {\n      var value = editor.getParam(name, defaultValue);\n      if (value.indexOf('=') !== -1) {\n        var bodyObj = editor.getParam(name, '', 'hash');\n        return get$9(bodyObj, editor.id).getOr(defaultValue);\n      } else {\n        return value;\n      }\n    };\n    var getIframeAttrs = function (editor) {\n      return editor.getParam('iframe_attrs', {});\n    };\n    var getDocType = function (editor) {\n      return editor.getParam('doctype', '<!DOCTYPE html>');\n    };\n    var getDocumentBaseUrl = function (editor) {\n      return editor.getParam('document_base_url', '');\n    };\n    var getBodyId = function (editor) {\n      return getBodySetting(editor, 'body_id', 'tinymce');\n    };\n    var getBodyClass = function (editor) {\n      return getBodySetting(editor, 'body_class', '');\n    };\n    var getContentSecurityPolicy = function (editor) {\n      return editor.getParam('content_security_policy', '');\n    };\n    var shouldPutBrInPre$1 = function (editor) {\n      return editor.getParam('br_in_pre', true);\n    };\n    var getForcedRootBlock = function (editor) {\n      if (editor.getParam('force_p_newlines', false)) {\n        return 'p';\n      }\n      var block = editor.getParam('forced_root_block', 'p');\n      if (block === false) {\n        return '';\n      } else if (block === true) {\n        return 'p';\n      } else {\n        return block;\n      }\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs', {});\n    };\n    var getBrNewLineSelector = function (editor) {\n      return editor.getParam('br_newline_selector', '.mce-toc h2,figcaption,caption');\n    };\n    var getNoNewLineSelector = function (editor) {\n      return editor.getParam('no_newline_selector', '');\n    };\n    var shouldKeepStyles = function (editor) {\n      return editor.getParam('keep_styles', true);\n    };\n    var shouldEndContainerOnEmptyBlock = function (editor) {\n      return editor.getParam('end_container_on_empty_block', false);\n    };\n    var getFontStyleValues = function (editor) {\n      return Tools.explode(editor.getParam('font_size_style_values', 'xx-small,x-small,small,medium,large,x-large,xx-large'));\n    };\n    var getFontSizeClasses = function (editor) {\n      return Tools.explode(editor.getParam('font_size_classes', ''));\n    };\n    var getImagesDataImgFilter = function (editor) {\n      return editor.getParam('images_dataimg_filter', always, 'function');\n    };\n    var isAutomaticUploadsEnabled = function (editor) {\n      return editor.getParam('automatic_uploads', true, 'boolean');\n    };\n    var shouldReuseFileName = function (editor) {\n      return editor.getParam('images_reuse_filename', false, 'boolean');\n    };\n    var shouldReplaceBlobUris = function (editor) {\n      return editor.getParam('images_replace_blob_uris', true, 'boolean');\n    };\n    var getIconPackName = function (editor) {\n      return editor.getParam('icons', '', 'string');\n    };\n    var getIconsUrl = function (editor) {\n      return editor.getParam('icons_url', '', 'string');\n    };\n    var getImageUploadUrl = function (editor) {\n      return editor.getParam('images_upload_url', '', 'string');\n    };\n    var getImageUploadBasePath = function (editor) {\n      return editor.getParam('images_upload_base_path', '', 'string');\n    };\n    var getImagesUploadCredentials = function (editor) {\n      return editor.getParam('images_upload_credentials', false, 'boolean');\n    };\n    var getImagesUploadHandler = function (editor) {\n      return editor.getParam('images_upload_handler', null, 'function');\n    };\n    var shouldUseContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors', false, 'boolean');\n    };\n    var getReferrerPolicy = function (editor) {\n      return editor.getParam('referrer_policy', '', 'string');\n    };\n    var getLanguageCode = function (editor) {\n      return editor.getParam('language', 'en', 'string');\n    };\n    var getLanguageUrl = function (editor) {\n      return editor.getParam('language_url', '', 'string');\n    };\n    var shouldIndentUseMargin = function (editor) {\n      return editor.getParam('indent_use_margin', false);\n    };\n    var getIndentation = function (editor) {\n      return editor.getParam('indentation', '40px', 'string');\n    };\n    var getContentCss = function (editor) {\n      var contentCss = editor.getParam('content_css');\n      if (isString$1(contentCss)) {\n        return map$3(contentCss.split(','), trim$4);\n      } else if (isArray$1(contentCss)) {\n        return contentCss;\n      } else if (contentCss === false || editor.inline) {\n        return [];\n      } else {\n        return ['default'];\n      }\n    };\n    var getFontCss = function (editor) {\n      var fontCss = editor.getParam('font_css', []);\n      return isArray$1(fontCss) ? fontCss : map$3(fontCss.split(','), trim$4);\n    };\n    var getDirectionality = function (editor) {\n      return editor.getParam('directionality', I18n.isRtl() ? 'rtl' : undefined);\n    };\n    var getInlineBoundarySelector = function (editor) {\n      return editor.getParam('inline_boundaries_selector', 'a[href],code,.mce-annotation', 'string');\n    };\n    var getObjectResizing = function (editor) {\n      var selector = editor.getParam('object_resizing');\n      if (selector === false || Env.iOS) {\n        return false;\n      } else {\n        return isString$1(selector) ? selector : 'table,img,figure.image,div,video,iframe';\n      }\n    };\n    var getResizeImgProportional = function (editor) {\n      return editor.getParam('resize_img_proportional', true, 'boolean');\n    };\n    var getPlaceholder = function (editor) {\n      return editor.getParam('placeholder', DOM$9.getAttrib(editor.getElement(), 'placeholder'), 'string');\n    };\n    var getEventRoot = function (editor) {\n      return editor.getParam('event_root');\n    };\n    var getServiceMessage = function (editor) {\n      return editor.getParam('service_message');\n    };\n    var getTheme = function (editor) {\n      return editor.getParam('theme');\n    };\n    var shouldValidate = function (editor) {\n      return editor.getParam('validate');\n    };\n    var isInlineBoundariesEnabled = function (editor) {\n      return editor.getParam('inline_boundaries') !== false;\n    };\n    var getFormats = function (editor) {\n      return editor.getParam('formats');\n    };\n    var getPreviewStyles = function (editor) {\n      var style = editor.getParam('preview_styles', defaultPreviewStyles);\n      if (isString$1(style)) {\n        return style;\n      } else {\n        return '';\n      }\n    };\n    var canFormatEmptyLines = function (editor) {\n      return editor.getParam('format_empty_lines', false, 'boolean');\n    };\n    var getCustomUiSelector = function (editor) {\n      return editor.getParam('custom_ui_selector', '', 'string');\n    };\n    var getThemeUrl = function (editor) {\n      return editor.getParam('theme_url');\n    };\n    var isInline = function (editor) {\n      return editor.getParam('inline');\n    };\n    var hasHiddenInput = function (editor) {\n      return editor.getParam('hidden_input');\n    };\n    var shouldPatchSubmit = function (editor) {\n      return editor.getParam('submit_patch');\n    };\n    var isEncodingXml = function (editor) {\n      return editor.getParam('encoding') === 'xml';\n    };\n    var shouldAddFormSubmitTrigger = function (editor) {\n      return editor.getParam('add_form_submit_trigger');\n    };\n    var shouldAddUnloadTrigger = function (editor) {\n      return editor.getParam('add_unload_trigger');\n    };\n    var hasForcedRootBlock = function (editor) {\n      return getForcedRootBlock(editor) !== '';\n    };\n    var getCustomUndoRedoLevels = function (editor) {\n      return editor.getParam('custom_undo_redo_levels', 0, 'number');\n    };\n    var shouldDisableNodeChange = function (editor) {\n      return editor.getParam('disable_nodechange');\n    };\n    var isReadOnly$1 = function (editor) {\n      return editor.getParam('readonly');\n    };\n    var hasContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors');\n    };\n    var getPlugins = function (editor) {\n      return editor.getParam('plugins', '', 'string');\n    };\n    var getExternalPlugins$1 = function (editor) {\n      return editor.getParam('external_plugins');\n    };\n    var shouldBlockUnsupportedDrop = function (editor) {\n      return editor.getParam('block_unsupported_drop', true, 'boolean');\n    };\n    var isVisualAidsEnabled = function (editor) {\n      return editor.getParam('visual', true, 'boolean');\n    };\n    var getVisualAidsTableClass = function (editor) {\n      return editor.getParam('visual_table_class', 'mce-item-table', 'string');\n    };\n    var getVisualAidsAnchorClass = function (editor) {\n      return editor.getParam('visual_anchor_class', 'mce-item-anchor', 'string');\n    };\n    var getIframeAriaText = function (editor) {\n      return editor.getParam('iframe_aria_text', 'Rich Text Area. Press ALT-0 for help.', 'string');\n    };\n\n    var isElement$2 = isElement$5;\n    var isText$2 = isText$7;\n    var removeNode$1 = function (node) {\n      var parentNode = node.parentNode;\n      if (parentNode) {\n        parentNode.removeChild(node);\n      }\n    };\n    var trimCount = function (text) {\n      var trimmedText = trim$2(text);\n      return {\n        count: text.length - trimmedText.length,\n        text: trimmedText\n      };\n    };\n    var deleteZwspChars = function (caretContainer) {\n      var idx;\n      while ((idx = caretContainer.data.lastIndexOf(ZWSP$1)) !== -1) {\n        caretContainer.deleteData(idx, 1);\n      }\n    };\n    var removeUnchanged = function (caretContainer, pos) {\n      remove$2(caretContainer);\n      return pos;\n    };\n    var removeTextAndReposition = function (caretContainer, pos) {\n      var before = trimCount(caretContainer.data.substr(0, pos.offset()));\n      var after = trimCount(caretContainer.data.substr(pos.offset()));\n      var text = before.text + after.text;\n      if (text.length > 0) {\n        deleteZwspChars(caretContainer);\n        return CaretPosition(caretContainer, pos.offset() - before.count);\n      } else {\n        return pos;\n      }\n    };\n    var removeElementAndReposition = function (caretContainer, pos) {\n      var parentNode = pos.container();\n      var newPosition = indexOf$2(from(parentNode.childNodes), caretContainer).map(function (index) {\n        return index < pos.offset() ? CaretPosition(parentNode, pos.offset() - 1) : pos;\n      }).getOr(pos);\n      remove$2(caretContainer);\n      return newPosition;\n    };\n    var removeTextCaretContainer = function (caretContainer, pos) {\n      return isText$2(caretContainer) && pos.container() === caretContainer ? removeTextAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeElementCaretContainer = function (caretContainer, pos) {\n      return pos.container() === caretContainer.parentNode ? removeElementAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeAndReposition = function (container, pos) {\n      return CaretPosition.isTextPosition(pos) ? removeTextCaretContainer(container, pos) : removeElementCaretContainer(container, pos);\n    };\n    var remove$2 = function (caretContainerNode) {\n      if (isElement$2(caretContainerNode) && isCaretContainer$2(caretContainerNode)) {\n        if (hasContent(caretContainerNode)) {\n          caretContainerNode.removeAttribute('data-mce-caret');\n        } else {\n          removeNode$1(caretContainerNode);\n        }\n      }\n      if (isText$2(caretContainerNode)) {\n        deleteZwspChars(caretContainerNode);\n        if (caretContainerNode.data.length === 0) {\n          removeNode$1(caretContainerNode);\n        }\n      }\n    };\n\n    var browser$2 = detect().browser;\n    var isContentEditableFalse$8 = isContentEditableFalse$b;\n    var isMedia$1 = isMedia$2;\n    var isTableCell$3 = isTableCell$5;\n    var inlineFakeCaretSelector = '*[contentEditable=false],video,audio,embed,object';\n    var getAbsoluteClientRect = function (root, element, before) {\n      var clientRect = collapse(element.getBoundingClientRect(), before);\n      var scrollX;\n      var scrollY;\n      if (root.tagName === 'BODY') {\n        var docElm = root.ownerDocument.documentElement;\n        scrollX = root.scrollLeft || docElm.scrollLeft;\n        scrollY = root.scrollTop || docElm.scrollTop;\n      } else {\n        var rootRect = root.getBoundingClientRect();\n        scrollX = root.scrollLeft - rootRect.left;\n        scrollY = root.scrollTop - rootRect.top;\n      }\n      clientRect.left += scrollX;\n      clientRect.right += scrollX;\n      clientRect.top += scrollY;\n      clientRect.bottom += scrollY;\n      clientRect.width = 1;\n      var margin = element.offsetWidth - element.clientWidth;\n      if (margin > 0) {\n        if (before) {\n          margin *= -1;\n        }\n        clientRect.left += margin;\n        clientRect.right += margin;\n      }\n      return clientRect;\n    };\n    var trimInlineCaretContainers = function (root) {\n      var fakeCaretTargetNodes = descendants(SugarElement.fromDom(root), inlineFakeCaretSelector);\n      for (var i = 0; i < fakeCaretTargetNodes.length; i++) {\n        var node = fakeCaretTargetNodes[i].dom;\n        var sibling = node.previousSibling;\n        if (endsWithCaretContainer$1(sibling)) {\n          var data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(data.length - 1, 1);\n          }\n        }\n        sibling = node.nextSibling;\n        if (startsWithCaretContainer$1(sibling)) {\n          var data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(0, 1);\n          }\n        }\n      }\n    };\n    var FakeCaret = function (editor, root, isBlock, hasFocus) {\n      var lastVisualCaret = value();\n      var cursorInterval;\n      var caretContainerNode;\n      var rootBlock = getForcedRootBlock(editor);\n      var caretBlock = rootBlock.length > 0 ? rootBlock : 'p';\n      var show = function (before, element) {\n        var rng;\n        hide();\n        if (isTableCell$3(element)) {\n          return null;\n        }\n        if (isBlock(element)) {\n          caretContainerNode = insertBlock$1(caretBlock, element, before);\n          var clientRect = getAbsoluteClientRect(root, element, before);\n          DomQuery(caretContainerNode).css('top', clientRect.top);\n          var caret = DomQuery('<div class=\"mce-visual-caret\" data-mce-bogus=\"all\"></div>').css(__assign({}, clientRect)).appendTo(root)[0];\n          lastVisualCaret.set({\n            caret: caret,\n            element: element,\n            before: before\n          });\n          if (before) {\n            DomQuery(caret).addClass('mce-visual-caret-before');\n          }\n          startBlink();\n          rng = element.ownerDocument.createRange();\n          rng.setStart(caretContainerNode, 0);\n          rng.setEnd(caretContainerNode, 0);\n        } else {\n          caretContainerNode = insertInline$1(element, before);\n          rng = element.ownerDocument.createRange();\n          if (isInlineFakeCaretTarget(caretContainerNode.nextSibling)) {\n            rng.setStart(caretContainerNode, 0);\n            rng.setEnd(caretContainerNode, 0);\n          } else {\n            rng.setStart(caretContainerNode, 1);\n            rng.setEnd(caretContainerNode, 1);\n          }\n          return rng;\n        }\n        return rng;\n      };\n      var hide = function () {\n        trimInlineCaretContainers(root);\n        if (caretContainerNode) {\n          remove$2(caretContainerNode);\n          caretContainerNode = null;\n        }\n        lastVisualCaret.on(function (caretState) {\n          DomQuery(caretState.caret).remove();\n          lastVisualCaret.clear();\n        });\n        if (cursorInterval) {\n          Delay.clearInterval(cursorInterval);\n          cursorInterval = undefined;\n        }\n      };\n      var startBlink = function () {\n        cursorInterval = Delay.setInterval(function () {\n          if (hasFocus()) {\n            DomQuery('div.mce-visual-caret', root).toggleClass('mce-visual-caret-hidden');\n          } else {\n            DomQuery('div.mce-visual-caret', root).addClass('mce-visual-caret-hidden');\n          }\n        }, 500);\n      };\n      var reposition = function () {\n        lastVisualCaret.on(function (caretState) {\n          var clientRect = getAbsoluteClientRect(root, caretState.element, caretState.before);\n          DomQuery(caretState.caret).css(__assign({}, clientRect));\n        });\n      };\n      var destroy = function () {\n        return Delay.clearInterval(cursorInterval);\n      };\n      var getCss = function () {\n        return '.mce-visual-caret {' + 'position: absolute;' + 'background-color: black;' + 'background-color: currentcolor;' + '}' + '.mce-visual-caret-hidden {' + 'display: none;' + '}' + '*[data-mce-caret] {' + 'position: absolute;' + 'left: -1000px;' + 'right: auto;' + 'top: 0;' + 'margin: 0;' + 'padding: 0;' + '}';\n      };\n      return {\n        show: show,\n        hide: hide,\n        getCss: getCss,\n        reposition: reposition,\n        destroy: destroy\n      };\n    };\n    var isFakeCaretTableBrowser = function () {\n      return browser$2.isIE() || browser$2.isEdge() || browser$2.isFirefox();\n    };\n    var isInlineFakeCaretTarget = function (node) {\n      return isContentEditableFalse$8(node) || isMedia$1(node);\n    };\n    var isFakeCaretTarget = function (node) {\n      return isInlineFakeCaretTarget(node) || isTable$3(node) && isFakeCaretTableBrowser();\n    };\n\n    var isContentEditableFalse$7 = isContentEditableFalse$b;\n    var isMedia = isMedia$2;\n    var isBlockLike = matchStyleValues('display', 'block table table-cell table-caption list-item');\n    var isCaretContainer = isCaretContainer$2;\n    var isCaretContainerBlock = isCaretContainerBlock$1;\n    var isElement$1 = isElement$5;\n    var isCaretCandidate$1 = isCaretCandidate$3;\n    var isForwards = function (direction) {\n      return direction > 0;\n    };\n    var isBackwards = function (direction) {\n      return direction < 0;\n    };\n    var skipCaretContainers = function (walk, shallow) {\n      var node;\n      while (node = walk(shallow)) {\n        if (!isCaretContainerBlock(node)) {\n          return node;\n        }\n      }\n      return null;\n    };\n    var findNode$1 = function (node, direction, predicateFn, rootNode, shallow) {\n      var walker = new DomTreeWalker(node, rootNode);\n      var isCefOrCaretContainer = isContentEditableFalse$7(node) || isCaretContainerBlock(node);\n      if (isBackwards(direction)) {\n        if (isCefOrCaretContainer) {\n          node = skipCaretContainers(walker.prev.bind(walker), true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.prev.bind(walker), shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      if (isForwards(direction)) {\n        if (isCefOrCaretContainer) {\n          node = skipCaretContainers(walker.next.bind(walker), true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.next.bind(walker), shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var getParentBlock$2 = function (node, rootNode) {\n      while (node && node !== rootNode) {\n        if (isBlockLike(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var isInSameBlock = function (caretPosition1, caretPosition2, rootNode) {\n      return getParentBlock$2(caretPosition1.container(), rootNode) === getParentBlock$2(caretPosition2.container(), rootNode);\n    };\n    var getChildNodeAtRelativeOffset = function (relativeOffset, caretPosition) {\n      if (!caretPosition) {\n        return null;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (!isElement$1(container)) {\n        return null;\n      }\n      return container.childNodes[offset + relativeOffset];\n    };\n    var beforeAfter = function (before, node) {\n      var range = node.ownerDocument.createRange();\n      if (before) {\n        range.setStartBefore(node);\n        range.setEndBefore(node);\n      } else {\n        range.setStartAfter(node);\n        range.setEndAfter(node);\n      }\n      return range;\n    };\n    var isNodesInSameBlock = function (root, node1, node2) {\n      return getParentBlock$2(node1, root) === getParentBlock$2(node2, root);\n    };\n    var lean = function (left, root, node) {\n      var siblingName = left ? 'previousSibling' : 'nextSibling';\n      while (node && node !== root) {\n        var sibling = node[siblingName];\n        if (isCaretContainer(sibling)) {\n          sibling = sibling[siblingName];\n        }\n        if (isContentEditableFalse$7(sibling) || isMedia(sibling)) {\n          if (isNodesInSameBlock(root, sibling, node)) {\n            return sibling;\n          }\n          break;\n        }\n        if (isCaretCandidate$1(sibling)) {\n          break;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var before$2 = curry(beforeAfter, true);\n    var after$2 = curry(beforeAfter, false);\n    var normalizeRange = function (direction, root, range) {\n      var node;\n      var leanLeft = curry(lean, true, root);\n      var leanRight = curry(lean, false, root);\n      var container = range.startContainer;\n      var offset = range.startOffset;\n      if (isCaretContainerBlock$1(container)) {\n        if (!isElement$1(container)) {\n          container = container.parentNode;\n        }\n        var location_1 = container.getAttribute('data-mce-caret');\n        if (location_1 === 'before') {\n          node = container.nextSibling;\n          if (isFakeCaretTarget(node)) {\n            return before$2(node);\n          }\n        }\n        if (location_1 === 'after') {\n          node = container.previousSibling;\n          if (isFakeCaretTarget(node)) {\n            return after$2(node);\n          }\n        }\n      }\n      if (!range.collapsed) {\n        return range;\n      }\n      if (isText$7(container)) {\n        if (isCaretContainer(container)) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n          }\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (endsWithCaretContainer$1(container) && offset >= container.data.length - 1) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (startsWithCaretContainer$1(container) && offset <= 1) {\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n          }\n          return range;\n        }\n        if (offset === container.data.length) {\n          node = leanRight(container);\n          if (node) {\n            return before$2(node);\n          }\n          return range;\n        }\n        if (offset === 0) {\n          node = leanLeft(container);\n          if (node) {\n            return after$2(node);\n          }\n          return range;\n        }\n      }\n      return range;\n    };\n    var getRelativeCefElm = function (forward, caretPosition) {\n      return Optional.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, caretPosition)).filter(isContentEditableFalse$7);\n    };\n    var getNormalizedRangeEndPoint = function (direction, root, range) {\n      var normalizedRange = normalizeRange(direction, root, range);\n      if (direction === -1) {\n        return CaretPosition.fromRangeStart(normalizedRange);\n      }\n      return CaretPosition.fromRangeEnd(normalizedRange);\n    };\n    var getElementFromPosition = function (pos) {\n      return Optional.from(pos.getNode()).map(SugarElement.fromDom);\n    };\n    var getElementFromPrevPosition = function (pos) {\n      return Optional.from(pos.getNode(true)).map(SugarElement.fromDom);\n    };\n    var getVisualCaretPosition = function (walkFn, caretPosition) {\n      while (caretPosition = walkFn(caretPosition)) {\n        if (caretPosition.isVisible()) {\n          return caretPosition;\n        }\n      }\n      return caretPosition;\n    };\n    var isMoveInsideSameBlock = function (from, to) {\n      var inSameBlock = isInSameBlock(from, to);\n      if (!inSameBlock && isBr$5(from.getNode())) {\n        return true;\n      }\n      return inSameBlock;\n    };\n\n    var HDirection;\n    (function (HDirection) {\n      HDirection[HDirection['Backwards'] = -1] = 'Backwards';\n      HDirection[HDirection['Forwards'] = 1] = 'Forwards';\n    }(HDirection || (HDirection = {})));\n    var isContentEditableFalse$6 = isContentEditableFalse$b;\n    var isText$1 = isText$7;\n    var isElement = isElement$5;\n    var isBr$1 = isBr$5;\n    var isCaretCandidate = isCaretCandidate$3;\n    var isAtomic = isAtomic$1;\n    var isEditableCaretCandidate = isEditableCaretCandidate$1;\n    var getParents$3 = function (node, root) {\n      var parents = [];\n      while (node && node !== root) {\n        parents.push(node);\n        node = node.parentNode;\n      }\n      return parents;\n    };\n    var nodeAtIndex = function (container, offset) {\n      if (container.hasChildNodes() && offset < container.childNodes.length) {\n        return container.childNodes[offset];\n      }\n      return null;\n    };\n    var getCaretCandidatePosition = function (direction, node) {\n      if (isForwards(direction)) {\n        if (isCaretCandidate(node.previousSibling) && !isText$1(node.previousSibling)) {\n          return CaretPosition.before(node);\n        }\n        if (isText$1(node)) {\n          return CaretPosition(node, 0);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isCaretCandidate(node.nextSibling) && !isText$1(node.nextSibling)) {\n          return CaretPosition.after(node);\n        }\n        if (isText$1(node)) {\n          return CaretPosition(node, node.data.length);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isBr$1(node)) {\n          return CaretPosition.before(node);\n        }\n        return CaretPosition.after(node);\n      }\n      return CaretPosition.before(node);\n    };\n    var moveForwardFromBr = function (root, nextNode) {\n      var nextSibling = nextNode.nextSibling;\n      if (nextSibling && isCaretCandidate(nextSibling)) {\n        if (isText$1(nextSibling)) {\n          return CaretPosition(nextSibling, 0);\n        } else {\n          return CaretPosition.before(nextSibling);\n        }\n      } else {\n        return findCaretPosition$1(HDirection.Forwards, CaretPosition.after(nextNode), root);\n      }\n    };\n    var findCaretPosition$1 = function (direction, startPos, root) {\n      var node;\n      var nextNode;\n      var innerNode;\n      var caretPosition;\n      if (!isElement(root) || !startPos) {\n        return null;\n      }\n      if (startPos.isEqual(CaretPosition.after(root)) && root.lastChild) {\n        caretPosition = CaretPosition.after(root.lastChild);\n        if (isBackwards(direction) && isCaretCandidate(root.lastChild) && isElement(root.lastChild)) {\n          return isBr$1(root.lastChild) ? CaretPosition.before(root.lastChild) : caretPosition;\n        }\n      } else {\n        caretPosition = startPos;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (isText$1(container)) {\n        if (isBackwards(direction) && offset > 0) {\n          return CaretPosition(container, --offset);\n        }\n        if (isForwards(direction) && offset < container.length) {\n          return CaretPosition(container, ++offset);\n        }\n        node = container;\n      } else {\n        if (isBackwards(direction) && offset > 0) {\n          nextNode = nodeAtIndex(container, offset - 1);\n          if (isCaretCandidate(nextNode)) {\n            if (!isAtomic(nextNode)) {\n              innerNode = findNode$1(nextNode, direction, isEditableCaretCandidate, nextNode);\n              if (innerNode) {\n                if (isText$1(innerNode)) {\n                  return CaretPosition(innerNode, innerNode.data.length);\n                }\n                return CaretPosition.after(innerNode);\n              }\n            }\n            if (isText$1(nextNode)) {\n              return CaretPosition(nextNode, nextNode.data.length);\n            }\n            return CaretPosition.before(nextNode);\n          }\n        }\n        if (isForwards(direction) && offset < container.childNodes.length) {\n          nextNode = nodeAtIndex(container, offset);\n          if (isCaretCandidate(nextNode)) {\n            if (isBr$1(nextNode)) {\n              return moveForwardFromBr(root, nextNode);\n            }\n            if (!isAtomic(nextNode)) {\n              innerNode = findNode$1(nextNode, direction, isEditableCaretCandidate, nextNode);\n              if (innerNode) {\n                if (isText$1(innerNode)) {\n                  return CaretPosition(innerNode, 0);\n                }\n                return CaretPosition.before(innerNode);\n              }\n            }\n            if (isText$1(nextNode)) {\n              return CaretPosition(nextNode, 0);\n            }\n            return CaretPosition.after(nextNode);\n          }\n        }\n        node = nextNode ? nextNode : caretPosition.getNode();\n      }\n      if (isForwards(direction) && caretPosition.isAtEnd() || isBackwards(direction) && caretPosition.isAtStart()) {\n        node = findNode$1(node, direction, always, root, true);\n        if (isEditableCaretCandidate(node, root)) {\n          return getCaretCandidatePosition(direction, node);\n        }\n      }\n      nextNode = findNode$1(node, direction, isEditableCaretCandidate, root);\n      var rootContentEditableFalseElm = last$1(filter$4(getParents$3(container, root), isContentEditableFalse$6));\n      if (rootContentEditableFalseElm && (!nextNode || !rootContentEditableFalseElm.contains(nextNode))) {\n        if (isForwards(direction)) {\n          caretPosition = CaretPosition.after(rootContentEditableFalseElm);\n        } else {\n          caretPosition = CaretPosition.before(rootContentEditableFalseElm);\n        }\n        return caretPosition;\n      }\n      if (nextNode) {\n        return getCaretCandidatePosition(direction, nextNode);\n      }\n      return null;\n    };\n    var CaretWalker = function (root) {\n      return {\n        next: function (caretPosition) {\n          return findCaretPosition$1(HDirection.Forwards, caretPosition, root);\n        },\n        prev: function (caretPosition) {\n          return findCaretPosition$1(HDirection.Backwards, caretPosition, root);\n        }\n      };\n    };\n\n    var walkToPositionIn = function (forward, root, start) {\n      var position = forward ? CaretPosition.before(start) : CaretPosition.after(start);\n      return fromPosition(forward, root, position);\n    };\n    var afterElement = function (node) {\n      return isBr$5(node) ? CaretPosition.before(node) : CaretPosition.after(node);\n    };\n    var isBeforeOrStart = function (position) {\n      if (CaretPosition.isTextPosition(position)) {\n        return position.offset() === 0;\n      } else {\n        return isCaretCandidate$3(position.getNode());\n      }\n    };\n    var isAfterOrEnd = function (position) {\n      if (CaretPosition.isTextPosition(position)) {\n        var container = position.container();\n        return position.offset() === container.data.length;\n      } else {\n        return isCaretCandidate$3(position.getNode(true));\n      }\n    };\n    var isBeforeAfterSameElement = function (from, to) {\n      return !CaretPosition.isTextPosition(from) && !CaretPosition.isTextPosition(to) && from.getNode() === to.getNode(true);\n    };\n    var isAtBr = function (position) {\n      return !CaretPosition.isTextPosition(position) && isBr$5(position.getNode());\n    };\n    var shouldSkipPosition = function (forward, from, to) {\n      if (forward) {\n        return !isBeforeAfterSameElement(from, to) && !isAtBr(from) && isAfterOrEnd(from) && isBeforeOrStart(to);\n      } else {\n        return !isBeforeAfterSameElement(to, from) && isBeforeOrStart(from) && isAfterOrEnd(to);\n      }\n    };\n    var fromPosition = function (forward, root, pos) {\n      var walker = CaretWalker(root);\n      return Optional.from(forward ? walker.next(pos) : walker.prev(pos));\n    };\n    var navigate = function (forward, root, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isInSameBlock(from, to, root) && shouldSkipPosition(forward, from, to)) {\n          return fromPosition(forward, root, to);\n        } else {\n          return Optional.some(to);\n        }\n      });\n    };\n    var navigateIgnore = function (forward, root, from, ignoreFilter) {\n      return navigate(forward, root, from).bind(function (pos) {\n        return ignoreFilter(pos) ? navigateIgnore(forward, root, pos, ignoreFilter) : Optional.some(pos);\n      });\n    };\n    var positionIn = function (forward, element) {\n      var startNode = forward ? element.firstChild : element.lastChild;\n      if (isText$7(startNode)) {\n        return Optional.some(CaretPosition(startNode, forward ? 0 : startNode.data.length));\n      } else if (startNode) {\n        if (isCaretCandidate$3(startNode)) {\n          return Optional.some(forward ? CaretPosition.before(startNode) : afterElement(startNode));\n        } else {\n          return walkToPositionIn(forward, element, startNode);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    var nextPosition = curry(fromPosition, true);\n    var prevPosition = curry(fromPosition, false);\n    var firstPositionIn = curry(positionIn, true);\n    var lastPositionIn = curry(positionIn, false);\n\n    var CARET_ID$1 = '_mce_caret';\n    var isCaretNode = function (node) {\n      return isElement$5(node) && node.id === CARET_ID$1;\n    };\n    var getParentCaretContainer = function (body, node) {\n      while (node && node !== body) {\n        if (node.id === CARET_ID$1) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isStringPathBookmark = function (bookmark) {\n      return isString$1(bookmark.start);\n    };\n    var isRangeBookmark = function (bookmark) {\n      return has$2(bookmark, 'rng');\n    };\n    var isIdBookmark = function (bookmark) {\n      return has$2(bookmark, 'id');\n    };\n    var isIndexBookmark = function (bookmark) {\n      return has$2(bookmark, 'name');\n    };\n    var isPathBookmark = function (bookmark) {\n      return Tools.isArray(bookmark.start);\n    };\n\n    var addBogus = function (dom, node) {\n      if (isElement$5(node) && dom.isBlock(node) && !node.innerHTML && !Env.ie) {\n        node.innerHTML = '<br data-mce-bogus=\"1\" />';\n      }\n      return node;\n    };\n    var resolveCaretPositionBookmark = function (dom, bookmark) {\n      var pos;\n      var rng = dom.createRng();\n      pos = resolve$2(dom.getRoot(), bookmark.start);\n      rng.setStart(pos.container(), pos.offset());\n      pos = resolve$2(dom.getRoot(), bookmark.end);\n      rng.setEnd(pos.container(), pos.offset());\n      return rng;\n    };\n    var insertZwsp = function (node, rng) {\n      var textNode = node.ownerDocument.createTextNode(ZWSP$1);\n      node.appendChild(textNode);\n      rng.setStart(textNode, 0);\n      rng.setEnd(textNode, 0);\n    };\n    var isEmpty$1 = function (node) {\n      return node.hasChildNodes() === false;\n    };\n    var tryFindRangePosition = function (node, rng) {\n      return lastPositionIn(node).fold(never, function (pos) {\n        rng.setStart(pos.container(), pos.offset());\n        rng.setEnd(pos.container(), pos.offset());\n        return true;\n      });\n    };\n    var padEmptyCaretContainer = function (root, node, rng) {\n      if (isEmpty$1(node) && getParentCaretContainer(root, node)) {\n        insertZwsp(node, rng);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var setEndPoint = function (dom, start, bookmark, rng) {\n      var point = bookmark[start ? 'start' : 'end'];\n      var i, node, offset, children;\n      var root = dom.getRoot();\n      if (point) {\n        offset = point[0];\n        for (node = root, i = point.length - 1; i >= 1; i--) {\n          children = node.childNodes;\n          if (padEmptyCaretContainer(root, node, rng)) {\n            return true;\n          }\n          if (point[i] > children.length - 1) {\n            if (padEmptyCaretContainer(root, node, rng)) {\n              return true;\n            }\n            return tryFindRangePosition(node, rng);\n          }\n          node = children[point[i]];\n        }\n        if (node.nodeType === 3) {\n          offset = Math.min(point[0], node.nodeValue.length);\n        }\n        if (node.nodeType === 1) {\n          offset = Math.min(point[0], node.childNodes.length);\n        }\n        if (start) {\n          rng.setStart(node, offset);\n        } else {\n          rng.setEnd(node, offset);\n        }\n      }\n      return true;\n    };\n    var isValidTextNode = function (node) {\n      return isText$7(node) && node.data.length > 0;\n    };\n    var restoreEndPoint = function (dom, suffix, bookmark) {\n      var marker = dom.get(bookmark.id + '_' + suffix), node, idx, next, prev;\n      var keep = bookmark.keep;\n      var container, offset;\n      if (marker) {\n        node = marker.parentNode;\n        if (suffix === 'start') {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.nextSibling)) {\n              node = marker.nextSibling;\n              idx = 0;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker) + 1;\n            }\n          }\n          container = node;\n          offset = idx;\n        } else {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker);\n            }\n          }\n          container = node;\n          offset = idx;\n        }\n        if (!keep) {\n          prev = marker.previousSibling;\n          next = marker.nextSibling;\n          Tools.each(Tools.grep(marker.childNodes), function (node) {\n            if (isText$7(node)) {\n              node.nodeValue = node.nodeValue.replace(/\\uFEFF/g, '');\n            }\n          });\n          while (marker = dom.get(bookmark.id + '_' + suffix)) {\n            dom.remove(marker, true);\n          }\n          if (prev && next && prev.nodeType === next.nodeType && isText$7(prev) && !Env.opera) {\n            idx = prev.nodeValue.length;\n            prev.appendData(next.nodeValue);\n            dom.remove(next);\n            container = prev;\n            offset = idx;\n          }\n        }\n        return Optional.some(CaretPosition(container, offset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var resolvePaths = function (dom, bookmark) {\n      var rng = dom.createRng();\n      if (setEndPoint(dom, true, bookmark, rng) && setEndPoint(dom, false, bookmark, rng)) {\n        return Optional.some(rng);\n      } else {\n        return Optional.none();\n      }\n    };\n    var resolveId = function (dom, bookmark) {\n      var startPos = restoreEndPoint(dom, 'start', bookmark);\n      var endPos = restoreEndPoint(dom, 'end', bookmark);\n      return lift2(startPos, endPos.or(startPos), function (spos, epos) {\n        var rng = dom.createRng();\n        rng.setStart(addBogus(dom, spos.container()), spos.offset());\n        rng.setEnd(addBogus(dom, epos.container()), epos.offset());\n        return rng;\n      });\n    };\n    var resolveIndex = function (dom, bookmark) {\n      return Optional.from(dom.select(bookmark.name)[bookmark.index]).map(function (elm) {\n        var rng = dom.createRng();\n        rng.selectNode(elm);\n        return rng;\n      });\n    };\n    var resolve$1 = function (selection, bookmark) {\n      var dom = selection.dom;\n      if (bookmark) {\n        if (isPathBookmark(bookmark)) {\n          return resolvePaths(dom, bookmark);\n        } else if (isStringPathBookmark(bookmark)) {\n          return Optional.some(resolveCaretPositionBookmark(dom, bookmark));\n        } else if (isIdBookmark(bookmark)) {\n          return resolveId(dom, bookmark);\n        } else if (isIndexBookmark(bookmark)) {\n          return resolveIndex(dom, bookmark);\n        } else if (isRangeBookmark(bookmark)) {\n          return Optional.some(bookmark.rng);\n        }\n      }\n      return Optional.none();\n    };\n\n    var getBookmark$1 = function (selection, type, normalized) {\n      return getBookmark$2(selection, type, normalized);\n    };\n    var moveToBookmark = function (selection, bookmark) {\n      resolve$1(selection, bookmark).each(function (rng) {\n        selection.setRng(rng);\n      });\n    };\n    var isBookmarkNode$1 = function (node) {\n      return isElement$5(node) && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n\n    var is = function (expected) {\n      return function (actual) {\n        return expected === actual;\n      };\n    };\n    var isNbsp = is(nbsp);\n    var isWhiteSpace = function (chr) {\n      return chr !== '' && ' \\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    };\n    var isContent = function (chr) {\n      return !isWhiteSpace(chr) && !isNbsp(chr);\n    };\n\n    var isNode = function (node) {\n      return !!node.nodeType;\n    };\n    var isInlineBlock = function (node) {\n      return node && /^(IMG)$/.test(node.nodeName);\n    };\n    var moveStart = function (dom, selection, rng) {\n      var offset = rng.startOffset;\n      var container = rng.startContainer;\n      if (container === rng.endContainer) {\n        if (isInlineBlock(container.childNodes[offset])) {\n          return;\n        }\n      }\n      if (isElement$5(container)) {\n        var nodes = container.childNodes;\n        var walker = void 0;\n        if (offset < nodes.length) {\n          container = nodes[offset];\n          walker = new DomTreeWalker(container, dom.getParent(container, dom.isBlock));\n        } else {\n          container = nodes[nodes.length - 1];\n          walker = new DomTreeWalker(container, dom.getParent(container, dom.isBlock));\n          walker.next(true);\n        }\n        for (var node = walker.current(); node; node = walker.next()) {\n          if (isText$7(node) && !isWhiteSpaceNode$1(node)) {\n            rng.setStart(node, 0);\n            selection.setRng(rng);\n            return;\n          }\n        }\n      }\n    };\n    var getNonWhiteSpaceSibling = function (node, next, inc) {\n      if (node) {\n        var nextName = next ? 'nextSibling' : 'previousSibling';\n        for (node = inc ? node : node[nextName]; node; node = node[nextName]) {\n          if (isElement$5(node) || !isWhiteSpaceNode$1(node)) {\n            return node;\n          }\n        }\n      }\n    };\n    var isTextBlock$1 = function (editor, name) {\n      if (isNode(name)) {\n        name = name.nodeName;\n      }\n      return !!editor.schema.getTextBlockElements()[name.toLowerCase()];\n    };\n    var isValid = function (ed, parent, child) {\n      return ed.schema.isValidChild(parent, child);\n    };\n    var isWhiteSpaceNode$1 = function (node, allowSpaces) {\n      if (allowSpaces === void 0) {\n        allowSpaces = false;\n      }\n      if (isNonNullable(node) && isText$7(node)) {\n        var data = allowSpaces ? node.data.replace(/ /g, '\\xA0') : node.data;\n        return isWhitespaceText(data);\n      } else {\n        return false;\n      }\n    };\n    var isEmptyTextNode$1 = function (node) {\n      return isNonNullable(node) && isText$7(node) && node.length === 0;\n    };\n    var replaceVars = function (value, vars) {\n      if (isFunction(value)) {\n        value = value(vars);\n      } else if (isNonNullable(vars)) {\n        value = value.replace(/%(\\w+)/g, function (str, name) {\n          return vars[name] || str;\n        });\n      }\n      return value;\n    };\n    var isEq$5 = function (str1, str2) {\n      str1 = str1 || '';\n      str2 = str2 || '';\n      str1 = '' + (str1.nodeName || str1);\n      str2 = '' + (str2.nodeName || str2);\n      return str1.toLowerCase() === str2.toLowerCase();\n    };\n    var normalizeStyleValue = function (dom, value, name) {\n      if (name === 'color' || name === 'backgroundColor') {\n        value = dom.toHex(value);\n      }\n      if (name === 'fontWeight' && value === 700) {\n        value = 'bold';\n      }\n      if (name === 'fontFamily') {\n        value = value.replace(/[\\'\\\"]/g, '').replace(/,\\s+/g, ',');\n      }\n      return '' + value;\n    };\n    var getStyle = function (dom, node, name) {\n      return normalizeStyleValue(dom, dom.getStyle(node, name), name);\n    };\n    var getTextDecoration = function (dom, node) {\n      var decoration;\n      dom.getParent(node, function (n) {\n        decoration = dom.getStyle(n, 'text-decoration');\n        return decoration && decoration !== 'none';\n      });\n      return decoration;\n    };\n    var getParents$2 = function (dom, node, selector) {\n      return dom.getParents(node, selector, dom.getRoot());\n    };\n    var isVariableFormatName = function (editor, formatName) {\n      var hasVariableValues = function (format) {\n        var isVariableValue = function (val) {\n          return val.length > 1 && val.charAt(0) === '%';\n        };\n        return exists([\n          'styles',\n          'attributes'\n        ], function (key) {\n          return get$9(format, key).exists(function (field) {\n            var fieldValues = isArray$1(field) ? field : values(field);\n            return exists(fieldValues, isVariableValue);\n          });\n        });\n      };\n      return exists(editor.formatter.get(formatName), hasVariableValues);\n    };\n    var areSimilarFormats = function (editor, formatName, otherFormatName) {\n      var validKeys = [\n        'inline',\n        'block',\n        'selector',\n        'attributes',\n        'styles',\n        'classes'\n      ];\n      var filterObj = function (format) {\n        return filter$3(format, function (_, key) {\n          return exists(validKeys, function (validKey) {\n            return validKey === key;\n          });\n        });\n      };\n      return exists(editor.formatter.get(formatName), function (fmt1) {\n        var filteredFmt1 = filterObj(fmt1);\n        return exists(editor.formatter.get(otherFormatName), function (fmt2) {\n          var filteredFmt2 = filterObj(fmt2);\n          return equal$1(filteredFmt1, filteredFmt2);\n        });\n      });\n    };\n    var isBlockFormat = function (format) {\n      return hasNonNullableKey(format, 'block');\n    };\n    var isSelectorFormat = function (format) {\n      return hasNonNullableKey(format, 'selector');\n    };\n    var isInlineFormat = function (format) {\n      return hasNonNullableKey(format, 'inline');\n    };\n    var isMixedFormat = function (format) {\n      return isSelectorFormat(format) && isInlineFormat(format) && is$1(get$9(format, 'mixed'), true);\n    };\n    var shouldExpandToSelector = function (format) {\n      return isSelectorFormat(format) && format.expand !== false && !isInlineFormat(format);\n    };\n\n    var isBookmarkNode = isBookmarkNode$1;\n    var getParents$1 = getParents$2;\n    var isWhiteSpaceNode = isWhiteSpaceNode$1;\n    var isTextBlock = isTextBlock$1;\n    var isBogusBr = function (node) {\n      return isBr$5(node) && node.getAttribute('data-mce-bogus') && !node.nextSibling;\n    };\n    var findParentContentEditable = function (dom, node) {\n      var parent = node;\n      while (parent) {\n        if (isElement$5(parent) && dom.getContentEditable(parent)) {\n          return dom.getContentEditable(parent) === 'false' ? parent : node;\n        }\n        parent = parent.parentNode;\n      }\n      return node;\n    };\n    var walkText = function (start, node, offset, predicate) {\n      var str = node.data;\n      for (var i = offset; start ? i >= 0 : i < str.length; start ? i-- : i++) {\n        if (predicate(str.charAt(i))) {\n          return start ? i + 1 : i;\n        }\n      }\n      return -1;\n    };\n    var findSpace = function (start, node, offset) {\n      return walkText(start, node, offset, function (c) {\n        return isNbsp(c) || isWhiteSpace(c);\n      });\n    };\n    var findContent = function (start, node, offset) {\n      return walkText(start, node, offset, isContent);\n    };\n    var findWordEndPoint = function (dom, body, container, offset, start, includeTrailingSpaces) {\n      var lastTextNode;\n      var rootNode = dom.getParent(container, dom.isBlock) || body;\n      var walk = function (container, offset, pred) {\n        var textSeeker = TextSeeker(dom);\n        var walker = start ? textSeeker.backwards : textSeeker.forwards;\n        return Optional.from(walker(container, offset, function (text, textOffset) {\n          if (isBookmarkNode(text.parentNode)) {\n            return -1;\n          } else {\n            lastTextNode = text;\n            return pred(start, text, textOffset);\n          }\n        }, rootNode));\n      };\n      var spaceResult = walk(container, offset, findSpace);\n      return spaceResult.bind(function (result) {\n        return includeTrailingSpaces ? walk(result.container, result.offset + (start ? -1 : 0), findContent) : Optional.some(result);\n      }).orThunk(function () {\n        return lastTextNode ? Optional.some({\n          container: lastTextNode,\n          offset: start ? 0 : lastTextNode.length\n        }) : Optional.none();\n      });\n    };\n    var findSelectorEndPoint = function (dom, formatList, rng, container, siblingName) {\n      if (isText$7(container) && isEmpty$3(container.data) && container[siblingName]) {\n        container = container[siblingName];\n      }\n      var parents = getParents$1(dom, container);\n      for (var i = 0; i < parents.length; i++) {\n        for (var y = 0; y < formatList.length; y++) {\n          var curFormat = formatList[y];\n          if (isNonNullable(curFormat.collapsed) && curFormat.collapsed !== rng.collapsed) {\n            continue;\n          }\n          if (isSelectorFormat(curFormat) && dom.is(parents[i], curFormat.selector)) {\n            return parents[i];\n          }\n        }\n      }\n      return container;\n    };\n    var findBlockEndPoint = function (editor, formatList, container, siblingName) {\n      var node = container;\n      var dom = editor.dom;\n      var root = dom.getRoot();\n      var format = formatList[0];\n      if (isBlockFormat(format)) {\n        node = format.wrapper ? null : dom.getParent(container, format.block, root);\n      }\n      if (!node) {\n        var scopeRoot = dom.getParent(container, 'LI,TD,TH');\n        node = dom.getParent(isText$7(container) ? container.parentNode : container, function (node) {\n          return node !== root && isTextBlock(editor, node);\n        }, scopeRoot);\n      }\n      if (node && isBlockFormat(format) && format.wrapper) {\n        node = getParents$1(dom, node, 'ul,ol').reverse()[0] || node;\n      }\n      if (!node) {\n        node = container;\n        while (node[siblingName] && !dom.isBlock(node[siblingName])) {\n          node = node[siblingName];\n          if (isEq$5(node, 'br')) {\n            break;\n          }\n        }\n      }\n      return node || container;\n    };\n    var isAtBlockBoundary$1 = function (dom, root, container, siblingName) {\n      var parent = container.parentNode;\n      if (isNonNullable(container[siblingName])) {\n        return false;\n      } else if (parent === root || isNullable(parent) || dom.isBlock(parent)) {\n        return true;\n      } else {\n        return isAtBlockBoundary$1(dom, root, parent, siblingName);\n      }\n    };\n    var findParentContainer = function (dom, formatList, container, offset, start) {\n      var parent = container;\n      var siblingName = start ? 'previousSibling' : 'nextSibling';\n      var root = dom.getRoot();\n      if (isText$7(container) && !isWhiteSpaceNode(container)) {\n        if (start ? offset > 0 : offset < container.data.length) {\n          return container;\n        }\n      }\n      while (true) {\n        if (!formatList[0].block_expand && dom.isBlock(parent)) {\n          return parent;\n        }\n        for (var sibling = parent[siblingName]; sibling; sibling = sibling[siblingName]) {\n          var allowSpaces = isText$7(sibling) && !isAtBlockBoundary$1(dom, root, sibling, siblingName);\n          if (!isBookmarkNode(sibling) && !isBogusBr(sibling) && !isWhiteSpaceNode(sibling, allowSpaces)) {\n            return parent;\n          }\n        }\n        if (parent === root || parent.parentNode === root) {\n          container = parent;\n          break;\n        }\n        parent = parent.parentNode;\n      }\n      return container;\n    };\n    var isSelfOrParentBookmark = function (container) {\n      return isBookmarkNode(container.parentNode) || isBookmarkNode(container);\n    };\n    var expandRng = function (editor, rng, formatList, includeTrailingSpace) {\n      if (includeTrailingSpace === void 0) {\n        includeTrailingSpace = false;\n      }\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      var dom = editor.dom;\n      var format = formatList[0];\n      if (isElement$5(startContainer) && startContainer.hasChildNodes()) {\n        startContainer = getNode$1(startContainer, startOffset);\n        if (isText$7(startContainer)) {\n          startOffset = 0;\n        }\n      }\n      if (isElement$5(endContainer) && endContainer.hasChildNodes()) {\n        endContainer = getNode$1(endContainer, rng.collapsed ? endOffset : endOffset - 1);\n        if (isText$7(endContainer)) {\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      startContainer = findParentContentEditable(dom, startContainer);\n      endContainer = findParentContentEditable(dom, endContainer);\n      if (isSelfOrParentBookmark(startContainer)) {\n        startContainer = isBookmarkNode(startContainer) ? startContainer : startContainer.parentNode;\n        if (rng.collapsed) {\n          startContainer = startContainer.previousSibling || startContainer;\n        } else {\n          startContainer = startContainer.nextSibling || startContainer;\n        }\n        if (isText$7(startContainer)) {\n          startOffset = rng.collapsed ? startContainer.length : 0;\n        }\n      }\n      if (isSelfOrParentBookmark(endContainer)) {\n        endContainer = isBookmarkNode(endContainer) ? endContainer : endContainer.parentNode;\n        if (rng.collapsed) {\n          endContainer = endContainer.nextSibling || endContainer;\n        } else {\n          endContainer = endContainer.previousSibling || endContainer;\n        }\n        if (isText$7(endContainer)) {\n          endOffset = rng.collapsed ? 0 : endContainer.length;\n        }\n      }\n      if (rng.collapsed) {\n        var startPoint = findWordEndPoint(dom, editor.getBody(), startContainer, startOffset, true, includeTrailingSpace);\n        startPoint.each(function (_a) {\n          var container = _a.container, offset = _a.offset;\n          startContainer = container;\n          startOffset = offset;\n        });\n        var endPoint = findWordEndPoint(dom, editor.getBody(), endContainer, endOffset, false, includeTrailingSpace);\n        endPoint.each(function (_a) {\n          var container = _a.container, offset = _a.offset;\n          endContainer = container;\n          endOffset = offset;\n        });\n      }\n      if (isInlineFormat(format) || format.block_expand) {\n        if (!isInlineFormat(format) || (!isText$7(startContainer) || startOffset === 0)) {\n          startContainer = findParentContainer(dom, formatList, startContainer, startOffset, true);\n        }\n        if (!isInlineFormat(format) || (!isText$7(endContainer) || endOffset === endContainer.nodeValue.length)) {\n          endContainer = findParentContainer(dom, formatList, endContainer, endOffset, false);\n        }\n      }\n      if (shouldExpandToSelector(format)) {\n        startContainer = findSelectorEndPoint(dom, formatList, rng, startContainer, 'previousSibling');\n        endContainer = findSelectorEndPoint(dom, formatList, rng, endContainer, 'nextSibling');\n      }\n      if (isBlockFormat(format) || isSelectorFormat(format)) {\n        startContainer = findBlockEndPoint(editor, formatList, startContainer, 'previousSibling');\n        endContainer = findBlockEndPoint(editor, formatList, endContainer, 'nextSibling');\n        if (isBlockFormat(format)) {\n          if (!dom.isBlock(startContainer)) {\n            startContainer = findParentContainer(dom, formatList, startContainer, startOffset, true);\n          }\n          if (!dom.isBlock(endContainer)) {\n            endContainer = findParentContainer(dom, formatList, endContainer, endOffset, false);\n          }\n        }\n      }\n      if (isElement$5(startContainer)) {\n        startOffset = dom.nodeIndex(startContainer);\n        startContainer = startContainer.parentNode;\n      }\n      if (isElement$5(endContainer)) {\n        endOffset = dom.nodeIndex(endContainer) + 1;\n        endContainer = endContainer.parentNode;\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n\n    var walk$2 = function (dom, rng, callback) {\n      var startOffset = rng.startOffset;\n      var startContainer = getNode$1(rng.startContainer, startOffset);\n      var endOffset = rng.endOffset;\n      var endContainer = getNode$1(rng.endContainer, endOffset - 1);\n      var exclude = function (nodes) {\n        var firstNode = nodes[0];\n        if (isText$7(firstNode) && firstNode === startContainer && startOffset >= firstNode.data.length) {\n          nodes.splice(0, 1);\n        }\n        var lastNode = nodes[nodes.length - 1];\n        if (endOffset === 0 && nodes.length > 0 && lastNode === endContainer && isText$7(lastNode)) {\n          nodes.splice(nodes.length - 1, 1);\n        }\n        return nodes;\n      };\n      var collectSiblings = function (node, name, endNode) {\n        var siblings = [];\n        for (; node && node !== endNode; node = node[name]) {\n          siblings.push(node);\n        }\n        return siblings;\n      };\n      var findEndPoint = function (node, root) {\n        return dom.getParent(node, function (node) {\n          return node.parentNode === root;\n        }, root);\n      };\n      var walkBoundary = function (startNode, endNode, next) {\n        var siblingName = next ? 'nextSibling' : 'previousSibling';\n        for (var node = startNode, parent_1 = node.parentNode; node && node !== endNode; node = parent_1) {\n          parent_1 = node.parentNode;\n          var siblings_1 = collectSiblings(node === startNode ? node : node[siblingName], siblingName);\n          if (siblings_1.length) {\n            if (!next) {\n              siblings_1.reverse();\n            }\n            callback(exclude(siblings_1));\n          }\n        }\n      };\n      if (startContainer === endContainer) {\n        return callback(exclude([startContainer]));\n      }\n      var ancestor = dom.findCommonAncestor(startContainer, endContainer);\n      if (dom.isChildOf(startContainer, endContainer)) {\n        return walkBoundary(startContainer, ancestor, true);\n      }\n      if (dom.isChildOf(endContainer, startContainer)) {\n        return walkBoundary(endContainer, ancestor);\n      }\n      var startPoint = findEndPoint(startContainer, ancestor) || startContainer;\n      var endPoint = findEndPoint(endContainer, ancestor) || endContainer;\n      walkBoundary(startContainer, startPoint, true);\n      var siblings = collectSiblings(startPoint === startContainer ? startPoint : startPoint.nextSibling, 'nextSibling', endPoint === endContainer ? endPoint.nextSibling : endPoint);\n      if (siblings.length) {\n        callback(exclude(siblings));\n      }\n      walkBoundary(endContainer, endPoint);\n    };\n\n    var getRanges = function (selection) {\n      var ranges = [];\n      if (selection) {\n        for (var i = 0; i < selection.rangeCount; i++) {\n          ranges.push(selection.getRangeAt(i));\n        }\n      }\n      return ranges;\n    };\n    var getSelectedNodes = function (ranges) {\n      return bind(ranges, function (range) {\n        var node = getSelectedNode(range);\n        return node ? [SugarElement.fromDom(node)] : [];\n      });\n    };\n    var hasMultipleRanges = function (selection) {\n      return getRanges(selection).length > 1;\n    };\n\n    var getCellsFromRanges = function (ranges) {\n      return filter$4(getSelectedNodes(ranges), isTableCell$4);\n    };\n    var getCellsFromElement = function (elm) {\n      return descendants(elm, 'td[data-mce-selected],th[data-mce-selected]');\n    };\n    var getCellsFromElementOrRanges = function (ranges, element) {\n      var selectedCells = getCellsFromElement(element);\n      return selectedCells.length > 0 ? selectedCells : getCellsFromRanges(ranges);\n    };\n    var getCellsFromEditor = function (editor) {\n      return getCellsFromElementOrRanges(getRanges(editor.selection.getSel()), SugarElement.fromDom(editor.getBody()));\n    };\n    var getClosestTable = function (cell, isRoot) {\n      return ancestor$2(cell, 'table', isRoot);\n    };\n\n    var getStartNode = function (rng) {\n      var sc = rng.startContainer, so = rng.startOffset;\n      if (isText$7(sc)) {\n        return so === 0 ? Optional.some(SugarElement.fromDom(sc)) : Optional.none();\n      } else {\n        return Optional.from(sc.childNodes[so]).map(SugarElement.fromDom);\n      }\n    };\n    var getEndNode = function (rng) {\n      var ec = rng.endContainer, eo = rng.endOffset;\n      if (isText$7(ec)) {\n        return eo === ec.data.length ? Optional.some(SugarElement.fromDom(ec)) : Optional.none();\n      } else {\n        return Optional.from(ec.childNodes[eo - 1]).map(SugarElement.fromDom);\n      }\n    };\n    var getFirstChildren = function (node) {\n      return firstChild(node).fold(constant([node]), function (child) {\n        return [node].concat(getFirstChildren(child));\n      });\n    };\n    var getLastChildren$1 = function (node) {\n      return lastChild(node).fold(constant([node]), function (child) {\n        if (name(child) === 'br') {\n          return prevSibling(child).map(function (sibling) {\n            return [node].concat(getLastChildren$1(sibling));\n          }).getOr([]);\n        } else {\n          return [node].concat(getLastChildren$1(child));\n        }\n      });\n    };\n    var hasAllContentsSelected = function (elm, rng) {\n      return lift2(getStartNode(rng), getEndNode(rng), function (startNode, endNode) {\n        var start = find$3(getFirstChildren(elm), curry(eq, startNode));\n        var end = find$3(getLastChildren$1(elm), curry(eq, endNode));\n        return start.isSome() && end.isSome();\n      }).getOr(false);\n    };\n    var moveEndPoint = function (dom, rng, node, start) {\n      var root = node, walker = new DomTreeWalker(node, root);\n      var moveCaretBeforeOnEnterElementsMap = filter$3(dom.schema.getMoveCaretBeforeOnEnterElements(), function (_, name) {\n        return !contains$3([\n          'td',\n          'th',\n          'table'\n        ], name.toLowerCase());\n      });\n      do {\n        if (isText$7(node) && Tools.trim(node.nodeValue).length !== 0) {\n          if (start) {\n            rng.setStart(node, 0);\n          } else {\n            rng.setEnd(node, node.nodeValue.length);\n          }\n          return;\n        }\n        if (moveCaretBeforeOnEnterElementsMap[node.nodeName]) {\n          if (start) {\n            rng.setStartBefore(node);\n          } else {\n            if (node.nodeName === 'BR') {\n              rng.setEndBefore(node);\n            } else {\n              rng.setEndAfter(node);\n            }\n          }\n          return;\n        }\n      } while (node = start ? walker.next() : walker.prev());\n      if (root.nodeName === 'BODY') {\n        if (start) {\n          rng.setStart(root, 0);\n        } else {\n          rng.setEnd(root, root.childNodes.length);\n        }\n      }\n    };\n    var hasAnyRanges = function (editor) {\n      var sel = editor.selection.getSel();\n      return sel && sel.rangeCount > 0;\n    };\n    var runOnRanges = function (editor, executor) {\n      var fakeSelectionNodes = getCellsFromEditor(editor);\n      if (fakeSelectionNodes.length > 0) {\n        each$k(fakeSelectionNodes, function (elem) {\n          var node = elem.dom;\n          var fakeNodeRng = editor.dom.createRng();\n          fakeNodeRng.setStartBefore(node);\n          fakeNodeRng.setEndAfter(node);\n          executor(fakeNodeRng, true);\n        });\n      } else {\n        executor(editor.selection.getRng(), false);\n      }\n    };\n    var preserve = function (selection, fillBookmark, executor) {\n      var bookmark = getPersistentBookmark(selection, fillBookmark);\n      executor(bookmark);\n      selection.moveToBookmark(bookmark);\n    };\n\n    var NodeValue = function (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    };\n\n    var api$1 = NodeValue(isText$8, 'text');\n    var get$2 = function (element) {\n      return api$1.get(element);\n    };\n\n    var isZeroWidth = function (elem) {\n      return isText$8(elem) && get$2(elem) === ZWSP$1;\n    };\n    var context = function (editor, elem, wrapName, nodeName) {\n      return parent(elem).fold(function () {\n        return 'skipping';\n      }, function (parent) {\n        if (nodeName === 'br' || isZeroWidth(elem)) {\n          return 'valid';\n        } else if (isAnnotation(elem)) {\n          return 'existing';\n        } else if (isCaretNode(elem.dom)) {\n          return 'caret';\n        } else if (!isValid(editor, wrapName, nodeName) || !isValid(editor, name(parent), wrapName)) {\n          return 'invalid-child';\n        } else {\n          return 'valid';\n        }\n      });\n    };\n\n    var applyWordGrab = function (editor, rng) {\n      var r = expandRng(editor, rng, [{ inline: 'span' }]);\n      rng.setStart(r.startContainer, r.startOffset);\n      rng.setEnd(r.endContainer, r.endOffset);\n      editor.selection.setRng(rng);\n    };\n    var makeAnnotation = function (eDoc, _a, annotationName, decorate) {\n      var _b = _a.uid, uid = _b === void 0 ? generate('mce-annotation') : _b, data = __rest(_a, ['uid']);\n      var master = SugarElement.fromTag('span', eDoc);\n      add$1(master, annotation());\n      set$1(master, '' + dataAnnotationId(), uid);\n      set$1(master, '' + dataAnnotation(), annotationName);\n      var _c = decorate(uid, data), _d = _c.attributes, attributes = _d === void 0 ? {} : _d, _e = _c.classes, classes = _e === void 0 ? [] : _e;\n      setAll$1(master, attributes);\n      add(master, classes);\n      return master;\n    };\n    var annotate = function (editor, rng, annotationName, decorate, data) {\n      var newWrappers = [];\n      var master = makeAnnotation(editor.getDoc(), data, annotationName, decorate);\n      var wrapper = value();\n      var finishWrapper = function () {\n        wrapper.clear();\n      };\n      var getOrOpenWrapper = function () {\n        return wrapper.get().getOrThunk(function () {\n          var nu = shallow(master);\n          newWrappers.push(nu);\n          wrapper.set(nu);\n          return nu;\n        });\n      };\n      var processElements = function (elems) {\n        each$k(elems, processElement);\n      };\n      var processElement = function (elem) {\n        var ctx = context(editor, elem, 'span', name(elem));\n        switch (ctx) {\n        case 'invalid-child': {\n            finishWrapper();\n            var children$1 = children(elem);\n            processElements(children$1);\n            finishWrapper();\n            break;\n          }\n        case 'valid': {\n            var w = getOrOpenWrapper();\n            wrap$3(elem, w);\n            break;\n          }\n        }\n      };\n      var processNodes = function (nodes) {\n        var elems = map$3(nodes, SugarElement.fromDom);\n        processElements(elems);\n      };\n      walk$2(editor.dom, rng, function (nodes) {\n        finishWrapper();\n        processNodes(nodes);\n      });\n      return newWrappers;\n    };\n    var annotateWithBookmark = function (editor, name, settings, data) {\n      editor.undoManager.transact(function () {\n        var selection = editor.selection;\n        var initialRng = selection.getRng();\n        var hasFakeSelection = getCellsFromEditor(editor).length > 0;\n        if (initialRng.collapsed && !hasFakeSelection) {\n          applyWordGrab(editor, initialRng);\n        }\n        if (selection.getRng().collapsed && !hasFakeSelection) {\n          var wrapper = makeAnnotation(editor.getDoc(), data, name, settings.decorate);\n          set(wrapper, nbsp);\n          selection.getRng().insertNode(wrapper.dom);\n          selection.select(wrapper.dom);\n        } else {\n          preserve(selection, false, function () {\n            runOnRanges(editor, function (selectionRng) {\n              annotate(editor, selectionRng, name, settings.decorate, data);\n            });\n          });\n        }\n      });\n    };\n\n    var Annotator = function (editor) {\n      var registry = create$7();\n      setup$m(editor, registry);\n      var changes = setup$n(editor);\n      return {\n        register: function (name, settings) {\n          registry.register(name, settings);\n        },\n        annotate: function (name, data) {\n          registry.lookup(name).each(function (settings) {\n            annotateWithBookmark(editor, name, settings, data);\n          });\n        },\n        annotationChanged: function (name, callback) {\n          changes.addListener(name, callback);\n        },\n        remove: function (name) {\n          identify(editor, Optional.some(name)).each(function (_a) {\n            var elements = _a.elements;\n            each$k(elements, unwrap);\n          });\n        },\n        getAll: function (name) {\n          var directory = findAll(editor, name);\n          return map$2(directory, function (elems) {\n            return map$3(elems, function (elem) {\n              return elem.dom;\n            });\n          });\n        }\n      };\n    };\n\n    var BookmarkManager = function (selection) {\n      return {\n        getBookmark: curry(getBookmark$1, selection),\n        moveToBookmark: curry(moveToBookmark, selection)\n      };\n    };\n    BookmarkManager.isBookmarkNode = isBookmarkNode$1;\n\n    var getContentEditableRoot$1 = function (root, node) {\n      while (node && node !== root) {\n        if (isContentEditableTrue$4(node) || isContentEditableFalse$b(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isXYWithinRange = function (clientX, clientY, range) {\n      if (range.collapsed) {\n        return false;\n      }\n      if (Env.browser.isIE() && range.startOffset === range.endOffset - 1 && range.startContainer === range.endContainer) {\n        var elm = range.startContainer.childNodes[range.startOffset];\n        if (isElement$5(elm)) {\n          return exists(elm.getClientRects(), function (rect) {\n            return containsXY(rect, clientX, clientY);\n          });\n        }\n      }\n      return exists(range.getClientRects(), function (rect) {\n        return containsXY(rect, clientX, clientY);\n      });\n    };\n\n    var firePreProcess = function (editor, args) {\n      return editor.fire('PreProcess', args);\n    };\n    var firePostProcess = function (editor, args) {\n      return editor.fire('PostProcess', args);\n    };\n    var fireRemove = function (editor) {\n      return editor.fire('remove');\n    };\n    var fireDetach = function (editor) {\n      return editor.fire('detach');\n    };\n    var fireSwitchMode = function (editor, mode) {\n      return editor.fire('SwitchMode', { mode: mode });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var firePreInit = function (editor) {\n      return editor.fire('PreInit');\n    };\n    var firePostRender = function (editor) {\n      return editor.fire('PostRender');\n    };\n    var fireInit = function (editor) {\n      return editor.fire('Init');\n    };\n    var firePlaceholderToggle = function (editor, state) {\n      return editor.fire('PlaceholderToggle', { state: state });\n    };\n    var fireError = function (editor, errorType, error) {\n      return editor.fire(errorType, error);\n    };\n    var fireFormatApply = function (editor, format, node, vars) {\n      return editor.fire('FormatApply', {\n        format: format,\n        node: node,\n        vars: vars\n      });\n    };\n    var fireFormatRemove = function (editor, format, node, vars) {\n      return editor.fire('FormatRemove', {\n        format: format,\n        node: node,\n        vars: vars\n      });\n    };\n\n    var VK = {\n      BACKSPACE: 8,\n      DELETE: 46,\n      DOWN: 40,\n      ENTER: 13,\n      ESC: 27,\n      LEFT: 37,\n      RIGHT: 39,\n      SPACEBAR: 32,\n      TAB: 9,\n      UP: 38,\n      PAGE_UP: 33,\n      PAGE_DOWN: 34,\n      END: 35,\n      HOME: 36,\n      modifierPressed: function (e) {\n        return e.shiftKey || e.ctrlKey || e.altKey || VK.metaKeyPressed(e);\n      },\n      metaKeyPressed: function (e) {\n        return Env.mac ? e.metaKey : e.ctrlKey && !e.altKey;\n      }\n    };\n\n    var isContentEditableFalse$5 = isContentEditableFalse$b;\n    var ControlSelection = function (selection, editor) {\n      var elementSelectionAttr = 'data-mce-selected';\n      var dom = editor.dom, each = Tools.each;\n      var selectedElm, selectedElmGhost, resizeHelper, selectedHandle, resizeBackdrop;\n      var startX, startY, selectedElmX, selectedElmY, startW, startH, ratio, resizeStarted;\n      var width, height;\n      var editableDoc = editor.getDoc(), rootDocument = document;\n      var abs = Math.abs, round = Math.round, rootElement = editor.getBody();\n      var startScrollWidth, startScrollHeight;\n      var resizeHandles = {\n        nw: [\n          0,\n          0,\n          -1,\n          -1\n        ],\n        ne: [\n          1,\n          0,\n          1,\n          -1\n        ],\n        se: [\n          1,\n          1,\n          1,\n          1\n        ],\n        sw: [\n          0,\n          1,\n          -1,\n          1\n        ]\n      };\n      var isImage = function (elm) {\n        return elm && (elm.nodeName === 'IMG' || editor.dom.is(elm, 'figure.image'));\n      };\n      var isMedia = function (elm) {\n        return isMedia$2(elm) || dom.hasClass(elm, 'mce-preview-object');\n      };\n      var isEventOnImageOutsideRange = function (evt, range) {\n        if (evt.type === 'longpress' || evt.type.indexOf('touch') === 0) {\n          var touch = evt.touches[0];\n          return isImage(evt.target) && !isXYWithinRange(touch.clientX, touch.clientY, range);\n        } else {\n          return isImage(evt.target) && !isXYWithinRange(evt.clientX, evt.clientY, range);\n        }\n      };\n      var contextMenuSelectImage = function (evt) {\n        var target = evt.target;\n        if (isEventOnImageOutsideRange(evt, editor.selection.getRng()) && !evt.isDefaultPrevented()) {\n          editor.selection.select(target);\n        }\n      };\n      var getResizeTargets = function (elm) {\n        if (dom.is(elm, 'figure.image')) {\n          return [elm.querySelector('img')];\n        } else if (dom.hasClass(elm, 'mce-preview-object') && isNonNullable(elm.firstElementChild)) {\n          return [\n            elm,\n            elm.firstElementChild\n          ];\n        } else {\n          return [elm];\n        }\n      };\n      var isResizable = function (elm) {\n        var selector = getObjectResizing(editor);\n        if (!selector) {\n          return false;\n        }\n        if (elm.getAttribute('data-mce-resize') === 'false') {\n          return false;\n        }\n        if (elm === editor.getBody()) {\n          return false;\n        }\n        if (dom.hasClass(elm, 'mce-preview-object')) {\n          return is$2(SugarElement.fromDom(elm.firstElementChild), selector);\n        } else {\n          return is$2(SugarElement.fromDom(elm), selector);\n        }\n      };\n      var createGhostElement = function (elm) {\n        if (isMedia(elm)) {\n          return dom.create('img', { src: Env.transparentSrc });\n        } else {\n          return elm.cloneNode(true);\n        }\n      };\n      var setSizeProp = function (element, name, value) {\n        if (isNonNullable(value)) {\n          var targets = getResizeTargets(element);\n          each$k(targets, function (target) {\n            if (target.style[name] || !editor.schema.isValid(target.nodeName.toLowerCase(), name)) {\n              dom.setStyle(target, name, value);\n            } else {\n              dom.setAttrib(target, name, '' + value);\n            }\n          });\n        }\n      };\n      var setGhostElmSize = function (ghostElm, width, height) {\n        setSizeProp(ghostElm, 'width', width);\n        setSizeProp(ghostElm, 'height', height);\n      };\n      var resizeGhostElement = function (e) {\n        var deltaX, deltaY, proportional;\n        var resizeHelperX, resizeHelperY;\n        deltaX = e.screenX - startX;\n        deltaY = e.screenY - startY;\n        width = deltaX * selectedHandle[2] + startW;\n        height = deltaY * selectedHandle[3] + startH;\n        width = width < 5 ? 5 : width;\n        height = height < 5 ? 5 : height;\n        if ((isImage(selectedElm) || isMedia(selectedElm)) && getResizeImgProportional(editor) !== false) {\n          proportional = !VK.modifierPressed(e);\n        } else {\n          proportional = VK.modifierPressed(e);\n        }\n        if (proportional) {\n          if (abs(deltaX) > abs(deltaY)) {\n            height = round(width * ratio);\n            width = round(height / ratio);\n          } else {\n            width = round(height / ratio);\n            height = round(width * ratio);\n          }\n        }\n        setGhostElmSize(selectedElmGhost, width, height);\n        resizeHelperX = selectedHandle.startPos.x + deltaX;\n        resizeHelperY = selectedHandle.startPos.y + deltaY;\n        resizeHelperX = resizeHelperX > 0 ? resizeHelperX : 0;\n        resizeHelperY = resizeHelperY > 0 ? resizeHelperY : 0;\n        dom.setStyles(resizeHelper, {\n          left: resizeHelperX,\n          top: resizeHelperY,\n          display: 'block'\n        });\n        resizeHelper.innerHTML = width + ' &times; ' + height;\n        if (selectedHandle[2] < 0 && selectedElmGhost.clientWidth <= width) {\n          dom.setStyle(selectedElmGhost, 'left', selectedElmX + (startW - width));\n        }\n        if (selectedHandle[3] < 0 && selectedElmGhost.clientHeight <= height) {\n          dom.setStyle(selectedElmGhost, 'top', selectedElmY + (startH - height));\n        }\n        deltaX = rootElement.scrollWidth - startScrollWidth;\n        deltaY = rootElement.scrollHeight - startScrollHeight;\n        if (deltaX + deltaY !== 0) {\n          dom.setStyles(resizeHelper, {\n            left: resizeHelperX - deltaX,\n            top: resizeHelperY - deltaY\n          });\n        }\n        if (!resizeStarted) {\n          fireObjectResizeStart(editor, selectedElm, startW, startH, 'corner-' + selectedHandle.name);\n          resizeStarted = true;\n        }\n      };\n      var endGhostResize = function () {\n        var wasResizeStarted = resizeStarted;\n        resizeStarted = false;\n        if (wasResizeStarted) {\n          setSizeProp(selectedElm, 'width', width);\n          setSizeProp(selectedElm, 'height', height);\n        }\n        dom.unbind(editableDoc, 'mousemove', resizeGhostElement);\n        dom.unbind(editableDoc, 'mouseup', endGhostResize);\n        if (rootDocument !== editableDoc) {\n          dom.unbind(rootDocument, 'mousemove', resizeGhostElement);\n          dom.unbind(rootDocument, 'mouseup', endGhostResize);\n        }\n        dom.remove(selectedElmGhost);\n        dom.remove(resizeHelper);\n        dom.remove(resizeBackdrop);\n        showResizeRect(selectedElm);\n        if (wasResizeStarted) {\n          fireObjectResized(editor, selectedElm, width, height, 'corner-' + selectedHandle.name);\n          dom.setAttrib(selectedElm, 'style', dom.getAttrib(selectedElm, 'style'));\n        }\n        editor.nodeChanged();\n      };\n      var showResizeRect = function (targetElm) {\n        unbindResizeHandleEvents();\n        var position = dom.getPos(targetElm, rootElement);\n        var selectedElmX = position.x;\n        var selectedElmY = position.y;\n        var rect = targetElm.getBoundingClientRect();\n        var targetWidth = rect.width || rect.right - rect.left;\n        var targetHeight = rect.height || rect.bottom - rect.top;\n        if (selectedElm !== targetElm) {\n          hideResizeRect();\n          selectedElm = targetElm;\n          width = height = 0;\n        }\n        var e = editor.fire('ObjectSelected', { target: targetElm });\n        var selectedValue = dom.getAttrib(selectedElm, elementSelectionAttr, '1');\n        if (isResizable(targetElm) && !e.isDefaultPrevented()) {\n          each(resizeHandles, function (handle, name) {\n            var handleElm;\n            var startDrag = function (e) {\n              var target = getResizeTargets(selectedElm)[0];\n              startX = e.screenX;\n              startY = e.screenY;\n              startW = target.clientWidth;\n              startH = target.clientHeight;\n              ratio = startH / startW;\n              selectedHandle = handle;\n              selectedHandle.name = name;\n              selectedHandle.startPos = {\n                x: targetWidth * handle[0] + selectedElmX,\n                y: targetHeight * handle[1] + selectedElmY\n              };\n              startScrollWidth = rootElement.scrollWidth;\n              startScrollHeight = rootElement.scrollHeight;\n              resizeBackdrop = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-backdrop',\n                'data-mce-bogus': 'all'\n              });\n              dom.setStyles(resizeBackdrop, {\n                position: 'fixed',\n                left: '0',\n                top: '0',\n                width: '100%',\n                height: '100%'\n              });\n              selectedElmGhost = createGhostElement(selectedElm);\n              dom.addClass(selectedElmGhost, 'mce-clonedresizable');\n              dom.setAttrib(selectedElmGhost, 'data-mce-bogus', 'all');\n              selectedElmGhost.contentEditable = 'false';\n              dom.setStyles(selectedElmGhost, {\n                left: selectedElmX,\n                top: selectedElmY,\n                margin: 0\n              });\n              setGhostElmSize(selectedElmGhost, targetWidth, targetHeight);\n              selectedElmGhost.removeAttribute(elementSelectionAttr);\n              rootElement.appendChild(selectedElmGhost);\n              dom.bind(editableDoc, 'mousemove', resizeGhostElement);\n              dom.bind(editableDoc, 'mouseup', endGhostResize);\n              if (rootDocument !== editableDoc) {\n                dom.bind(rootDocument, 'mousemove', resizeGhostElement);\n                dom.bind(rootDocument, 'mouseup', endGhostResize);\n              }\n              resizeHelper = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-helper',\n                'data-mce-bogus': 'all'\n              }, startW + ' &times; ' + startH);\n            };\n            handleElm = dom.get('mceResizeHandle' + name);\n            if (handleElm) {\n              dom.remove(handleElm);\n            }\n            handleElm = dom.add(rootElement, 'div', {\n              'id': 'mceResizeHandle' + name,\n              'data-mce-bogus': 'all',\n              'class': 'mce-resizehandle',\n              'unselectable': true,\n              'style': 'cursor:' + name + '-resize; margin:0; padding:0'\n            });\n            if (Env.ie === 11) {\n              handleElm.contentEditable = false;\n            }\n            dom.bind(handleElm, 'mousedown', function (e) {\n              e.stopImmediatePropagation();\n              e.preventDefault();\n              startDrag(e);\n            });\n            handle.elm = handleElm;\n            dom.setStyles(handleElm, {\n              left: targetWidth * handle[0] + selectedElmX - handleElm.offsetWidth / 2,\n              top: targetHeight * handle[1] + selectedElmY - handleElm.offsetHeight / 2\n            });\n          });\n        } else {\n          hideResizeRect();\n        }\n        if (!dom.getAttrib(selectedElm, elementSelectionAttr)) {\n          selectedElm.setAttribute(elementSelectionAttr, selectedValue);\n        }\n      };\n      var hideResizeRect = function () {\n        unbindResizeHandleEvents();\n        if (selectedElm) {\n          selectedElm.removeAttribute(elementSelectionAttr);\n        }\n        each$j(resizeHandles, function (value, name) {\n          var handleElm = dom.get('mceResizeHandle' + name);\n          if (handleElm) {\n            dom.unbind(handleElm);\n            dom.remove(handleElm);\n          }\n        });\n      };\n      var updateResizeRect = function (e) {\n        var startElm, controlElm;\n        var isChildOrEqual = function (node, parent) {\n          if (node) {\n            do {\n              if (node === parent) {\n                return true;\n              }\n            } while (node = node.parentNode);\n          }\n        };\n        if (resizeStarted || editor.removed) {\n          return;\n        }\n        each(dom.select('img[data-mce-selected],hr[data-mce-selected]'), function (img) {\n          img.removeAttribute(elementSelectionAttr);\n        });\n        controlElm = e.type === 'mousedown' ? e.target : selection.getNode();\n        controlElm = dom.$(controlElm).closest('table,img,figure.image,hr,video,span.mce-preview-object')[0];\n        if (isChildOrEqual(controlElm, rootElement)) {\n          disableGeckoResize();\n          startElm = selection.getStart(true);\n          if (isChildOrEqual(startElm, controlElm) && isChildOrEqual(selection.getEnd(true), controlElm)) {\n            showResizeRect(controlElm);\n            return;\n          }\n        }\n        hideResizeRect();\n      };\n      var isWithinContentEditableFalse = function (elm) {\n        return isContentEditableFalse$5(getContentEditableRoot$1(editor.getBody(), elm));\n      };\n      var unbindResizeHandleEvents = function () {\n        each$j(resizeHandles, function (handle) {\n          if (handle.elm) {\n            dom.unbind(handle.elm);\n            delete handle.elm;\n          }\n        });\n      };\n      var disableGeckoResize = function () {\n        try {\n          editor.getDoc().execCommand('enableObjectResizing', false, 'false');\n        } catch (ex) {\n        }\n      };\n      editor.on('init', function () {\n        disableGeckoResize();\n        if (Env.browser.isIE() || Env.browser.isEdge()) {\n          editor.on('mousedown click', function (e) {\n            var target = e.target, nodeName = target.nodeName;\n            if (!resizeStarted && /^(TABLE|IMG|HR)$/.test(nodeName) && !isWithinContentEditableFalse(target)) {\n              if (e.button !== 2) {\n                editor.selection.select(target, nodeName === 'TABLE');\n              }\n              if (e.type === 'mousedown') {\n                editor.nodeChanged();\n              }\n            }\n          });\n          var handleMSControlSelect_1 = function (e) {\n            var delayedSelect = function (node) {\n              Delay.setEditorTimeout(editor, function () {\n                return editor.selection.select(node);\n              });\n            };\n            if (isWithinContentEditableFalse(e.target) || isMedia$2(e.target)) {\n              e.preventDefault();\n              delayedSelect(e.target);\n              return;\n            }\n            if (/^(TABLE|IMG|HR)$/.test(e.target.nodeName)) {\n              e.preventDefault();\n              if (e.target.tagName === 'IMG') {\n                delayedSelect(e.target);\n              }\n            }\n          };\n          dom.bind(rootElement, 'mscontrolselect', handleMSControlSelect_1);\n          editor.on('remove', function () {\n            return dom.unbind(rootElement, 'mscontrolselect', handleMSControlSelect_1);\n          });\n        }\n        var throttledUpdateResizeRect = Delay.throttle(function (e) {\n          if (!editor.composing) {\n            updateResizeRect(e);\n          }\n        });\n        editor.on('nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged', throttledUpdateResizeRect);\n        editor.on('keyup compositionend', function (e) {\n          if (selectedElm && selectedElm.nodeName === 'TABLE') {\n            throttledUpdateResizeRect(e);\n          }\n        });\n        editor.on('hide blur', hideResizeRect);\n        editor.on('contextmenu longpress', contextMenuSelectImage, true);\n      });\n      editor.on('remove', unbindResizeHandleEvents);\n      var destroy = function () {\n        selectedElm = selectedElmGhost = resizeBackdrop = null;\n      };\n      return {\n        isResizable: isResizable,\n        showResizeRect: showResizeRect,\n        hideResizeRect: hideResizeRect,\n        updateResizeRect: updateResizeRect,\n        destroy: destroy\n      };\n    };\n\n    var hasCeProperty = function (node) {\n      return isContentEditableTrue$4(node) || isContentEditableFalse$b(node);\n    };\n    var findParent$1 = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var findClosestIeRange = function (clientX, clientY, doc) {\n      var rects;\n      var element = doc.elementFromPoint(clientX, clientY);\n      var rng = doc.body.createTextRange();\n      if (!element || element.tagName === 'HTML') {\n        element = doc.body;\n      }\n      rng.moveToElementText(element);\n      rects = Tools.toArray(rng.getClientRects());\n      rects = rects.sort(function (a, b) {\n        a = Math.abs(Math.max(a.top - clientY, a.bottom - clientY));\n        b = Math.abs(Math.max(b.top - clientY, b.bottom - clientY));\n        return a - b;\n      });\n      if (rects.length > 0) {\n        clientY = (rects[0].bottom + rects[0].top) / 2;\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n          return rng;\n        } catch (ex) {\n        }\n      }\n      return null;\n    };\n    var moveOutOfContentEditableFalse = function (rng, rootNode) {\n      var parentElement = rng && rng.parentElement ? rng.parentElement() : null;\n      return isContentEditableFalse$b(findParent$1(parentElement, rootNode, hasCeProperty)) ? null : rng;\n    };\n    var fromPoint = function (clientX, clientY, doc) {\n      var rng, point;\n      var pointDoc = doc;\n      if (pointDoc.caretPositionFromPoint) {\n        point = pointDoc.caretPositionFromPoint(clientX, clientY);\n        if (point) {\n          rng = doc.createRange();\n          rng.setStart(point.offsetNode, point.offset);\n          rng.collapse(true);\n        }\n      } else if (pointDoc.caretRangeFromPoint) {\n        rng = pointDoc.caretRangeFromPoint(clientX, clientY);\n      } else if (pointDoc.body.createTextRange) {\n        rng = pointDoc.body.createTextRange();\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n        } catch (ex) {\n          rng = findClosestIeRange(clientX, clientY, doc);\n        }\n        return moveOutOfContentEditableFalse(rng, doc.body);\n      }\n      return rng;\n    };\n\n    var isEq$4 = function (rng1, rng2) {\n      return rng1 && rng2 && (rng1.startContainer === rng2.startContainer && rng1.startOffset === rng2.startOffset) && (rng1.endContainer === rng2.endContainer && rng1.endOffset === rng2.endOffset);\n    };\n\n    var findParent = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var hasParent$1 = function (node, rootNode, predicate) {\n      return findParent(node, rootNode, predicate) !== null;\n    };\n    var hasParentWithName = function (node, rootNode, name) {\n      return hasParent$1(node, rootNode, function (node) {\n        return node.nodeName === name;\n      });\n    };\n    var isTable = function (node) {\n      return node && node.nodeName === 'TABLE';\n    };\n    var isTableCell$2 = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var isCeFalseCaretContainer = function (node, rootNode) {\n      return isCaretContainer$2(node) && hasParent$1(node, rootNode, isCaretNode) === false;\n    };\n    var hasBrBeforeAfter = function (dom, node, left) {\n      var walker = new DomTreeWalker(node, dom.getParent(node.parentNode, dom.isBlock) || dom.getRoot());\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (isBr$5(node)) {\n          return true;\n        }\n      }\n    };\n    var isPrevNode = function (node, name) {\n      return node.previousSibling && node.previousSibling.nodeName === name;\n    };\n    var hasContentEditableFalseParent = function (body, node) {\n      while (node && node !== body) {\n        if (isContentEditableFalse$b(node)) {\n          return true;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    };\n    var findTextNodeRelative = function (dom, isAfterNode, collapsed, left, startNode) {\n      var lastInlineElement;\n      var body = dom.getRoot();\n      var node;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      var parentBlockContainer = dom.getParent(startNode.parentNode, dom.isBlock) || body;\n      if (left && isBr$5(startNode) && isAfterNode && dom.isEmpty(parentBlockContainer)) {\n        return Optional.some(CaretPosition(startNode.parentNode, dom.nodeIndex(startNode)));\n      }\n      var walker = new DomTreeWalker(startNode, parentBlockContainer);\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (dom.getContentEditableParent(node) === 'false' || isCeFalseCaretContainer(node, body)) {\n          return Optional.none();\n        }\n        if (isText$7(node) && node.nodeValue.length > 0) {\n          if (hasParentWithName(node, body, 'A') === false) {\n            return Optional.some(CaretPosition(node, left ? node.nodeValue.length : 0));\n          }\n          return Optional.none();\n        }\n        if (dom.isBlock(node) || nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          return Optional.none();\n        }\n        lastInlineElement = node;\n      }\n      if (collapsed && lastInlineElement) {\n        return Optional.some(CaretPosition(lastInlineElement, 0));\n      }\n      return Optional.none();\n    };\n    var normalizeEndPoint = function (dom, collapsed, start, rng) {\n      var container, offset;\n      var body = dom.getRoot();\n      var node;\n      var directionLeft, normalized = false;\n      container = rng[(start ? 'start' : 'end') + 'Container'];\n      offset = rng[(start ? 'start' : 'end') + 'Offset'];\n      var isAfterNode = isElement$5(container) && offset === container.childNodes.length;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      directionLeft = start;\n      if (isCaretContainer$2(container)) {\n        return Optional.none();\n      }\n      if (isElement$5(container) && offset > container.childNodes.length - 1) {\n        directionLeft = false;\n      }\n      if (isDocument$1(container)) {\n        container = body;\n        offset = 0;\n      }\n      if (container === body) {\n        if (directionLeft) {\n          node = container.childNodes[offset > 0 ? offset - 1 : 0];\n          if (node) {\n            if (isCaretContainer$2(node)) {\n              return Optional.none();\n            }\n            if (nonEmptyElementsMap[node.nodeName] || isTable(node)) {\n              return Optional.none();\n            }\n          }\n        }\n        if (container.hasChildNodes()) {\n          offset = Math.min(!directionLeft && offset > 0 ? offset - 1 : offset, container.childNodes.length - 1);\n          container = container.childNodes[offset];\n          offset = isText$7(container) && isAfterNode ? container.data.length : 0;\n          if (!collapsed && container === body.lastChild && isTable(container)) {\n            return Optional.none();\n          }\n          if (hasContentEditableFalseParent(body, container) || isCaretContainer$2(container)) {\n            return Optional.none();\n          }\n          if (container.hasChildNodes() && isTable(container) === false) {\n            node = container;\n            var walker = new DomTreeWalker(container, body);\n            do {\n              if (isContentEditableFalse$b(node) || isCaretContainer$2(node)) {\n                normalized = false;\n                break;\n              }\n              if (isText$7(node) && node.nodeValue.length > 0) {\n                offset = directionLeft ? 0 : node.nodeValue.length;\n                container = node;\n                normalized = true;\n                break;\n              }\n              if (nonEmptyElementsMap[node.nodeName.toLowerCase()] && !isTableCell$2(node)) {\n                offset = dom.nodeIndex(node);\n                container = node.parentNode;\n                if (!directionLeft) {\n                  offset++;\n                }\n                normalized = true;\n                break;\n              }\n            } while (node = directionLeft ? walker.next() : walker.prev());\n          }\n        }\n      }\n      if (collapsed) {\n        if (isText$7(container) && offset === 0) {\n          findTextNodeRelative(dom, isAfterNode, collapsed, true, container).each(function (pos) {\n            container = pos.container();\n            offset = pos.offset();\n            normalized = true;\n          });\n        }\n        if (isElement$5(container)) {\n          node = container.childNodes[offset];\n          if (!node) {\n            node = container.childNodes[offset - 1];\n          }\n          if (node && isBr$5(node) && !isPrevNode(node, 'A') && !hasBrBeforeAfter(dom, node, false) && !hasBrBeforeAfter(dom, node, true)) {\n            findTextNodeRelative(dom, isAfterNode, collapsed, true, node).each(function (pos) {\n              container = pos.container();\n              offset = pos.offset();\n              normalized = true;\n            });\n          }\n        }\n      }\n      if (directionLeft && !collapsed && isText$7(container) && offset === container.nodeValue.length) {\n        findTextNodeRelative(dom, isAfterNode, collapsed, false, container).each(function (pos) {\n          container = pos.container();\n          offset = pos.offset();\n          normalized = true;\n        });\n      }\n      return normalized ? Optional.some(CaretPosition(container, offset)) : Optional.none();\n    };\n    var normalize$2 = function (dom, rng) {\n      var collapsed = rng.collapsed, normRng = rng.cloneRange();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      normalizeEndPoint(dom, collapsed, true, normRng).each(function (pos) {\n        if (!collapsed || !CaretPosition.isAbove(startPos, pos)) {\n          normRng.setStart(pos.container(), pos.offset());\n        }\n      });\n      if (!collapsed) {\n        normalizeEndPoint(dom, collapsed, false, normRng).each(function (pos) {\n          normRng.setEnd(pos.container(), pos.offset());\n        });\n      }\n      if (collapsed) {\n        normRng.collapse(true);\n      }\n      return isEq$4(rng, normRng) ? Optional.none() : Optional.some(normRng);\n    };\n\n    var splitText = function (node, offset) {\n      return node.splitText(offset);\n    };\n    var split = function (rng) {\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      if (startContainer === endContainer && isText$7(startContainer)) {\n        if (startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          endContainer = splitText(startContainer, startOffset);\n          startContainer = endContainer.previousSibling;\n          if (endOffset > startOffset) {\n            endOffset = endOffset - startOffset;\n            startContainer = endContainer = splitText(endContainer, endOffset).previousSibling;\n            endOffset = endContainer.nodeValue.length;\n            startOffset = 0;\n          } else {\n            endOffset = 0;\n          }\n        }\n      } else {\n        if (isText$7(startContainer) && startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          startContainer = splitText(startContainer, startOffset);\n          startOffset = 0;\n        }\n        if (isText$7(endContainer) && endOffset > 0 && endOffset < endContainer.nodeValue.length) {\n          endContainer = splitText(endContainer, endOffset).previousSibling;\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n\n    var RangeUtils = function (dom) {\n      var walk = function (rng, callback) {\n        return walk$2(dom, rng, callback);\n      };\n      var split$1 = split;\n      var normalize = function (rng) {\n        return normalize$2(dom, rng).fold(never, function (normalizedRng) {\n          rng.setStart(normalizedRng.startContainer, normalizedRng.startOffset);\n          rng.setEnd(normalizedRng.endContainer, normalizedRng.endOffset);\n          return true;\n        });\n      };\n      return {\n        walk: walk,\n        split: split$1,\n        normalize: normalize\n      };\n    };\n    RangeUtils.compareRanges = isEq$4;\n    RangeUtils.getCaretRangeFromPoint = fromPoint;\n    RangeUtils.getSelectedNode = getSelectedNode;\n    RangeUtils.getNode = getNode$1;\n\n    var Dimension = function (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$5(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$5(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    };\n\n    var api = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$1 = function (element) {\n      return api.get(element);\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      return walkUp(navigation, d);\n    };\n\n    var view = function (doc) {\n      var _a;\n      var element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    var owner = function (element) {\n      return documentOrOwner(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner\n    });\n\n    var find$1 = function (element) {\n      var doc = SugarElement.fromDom(document);\n      var scroll = get$8(doc);\n      var frames = pathTo(element, Navigation);\n      var offset = viewport(element);\n      var r = foldr(frames, function (b, a) {\n        var loc = viewport(a);\n        return {\n          left: b.left + loc.left,\n          top: b.top + loc.top\n        };\n      }, {\n        left: 0,\n        top: 0\n      });\n      return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n    };\n\n    var excludeFromDescend = function (element) {\n      return name(element) === 'textarea';\n    };\n    var fireScrollIntoViewEvent = function (editor, data) {\n      var scrollEvent = editor.fire('ScrollIntoView', data);\n      return scrollEvent.isDefaultPrevented();\n    };\n    var fireAfterScrollIntoViewEvent = function (editor, data) {\n      editor.fire('AfterScrollIntoView', data);\n    };\n    var descend = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0 || excludeFromDescend(element)) {\n        return {\n          element: element,\n          offset: offset\n        };\n      } else if (offset < children$1.length && !excludeFromDescend(children$1[offset])) {\n        return {\n          element: children$1[offset],\n          offset: 0\n        };\n      } else {\n        var last = children$1[children$1.length - 1];\n        if (excludeFromDescend(last)) {\n          return {\n            element: element,\n            offset: offset\n          };\n        } else {\n          if (name(last) === 'img') {\n            return {\n              element: last,\n              offset: 1\n            };\n          } else if (isText$8(last)) {\n            return {\n              element: last,\n              offset: get$2(last).length\n            };\n          } else {\n            return {\n              element: last,\n              offset: children(last).length\n            };\n          }\n        }\n      }\n    };\n    var markerInfo = function (element, cleanupFun) {\n      var pos = absolute(element);\n      var height = get$1(element);\n      return {\n        element: element,\n        bottom: pos.top + height,\n        height: height,\n        pos: pos,\n        cleanup: cleanupFun\n      };\n    };\n    var createMarker = function (element, offset) {\n      var startPoint = descend(element, offset);\n      var span = SugarElement.fromHtml('<span data-mce-bogus=\"all\" style=\"display: inline-block;\">' + ZWSP$1 + '</span>');\n      before$4(startPoint.element, span);\n      return markerInfo(span, function () {\n        return remove$7(span);\n      });\n    };\n    var elementMarker = function (element) {\n      return markerInfo(SugarElement.fromDom(element), noop);\n    };\n    var withMarker = function (editor, f, rng, alignToTop) {\n      preserveWith(editor, function (_s, _e) {\n        return applyWithMarker(editor, f, rng, alignToTop);\n      }, rng);\n    };\n    var withScrollEvents = function (editor, doc, f, marker, alignToTop) {\n      var data = {\n        elm: marker.element.dom,\n        alignToTop: alignToTop\n      };\n      if (fireScrollIntoViewEvent(editor, data)) {\n        return;\n      }\n      var scrollTop = get$8(doc).top;\n      f(doc, scrollTop, marker, alignToTop);\n      fireAfterScrollIntoViewEvent(editor, data);\n    };\n    var applyWithMarker = function (editor, f, rng, alignToTop) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var doc = SugarElement.fromDom(editor.getDoc());\n      reflow(body);\n      var marker = createMarker(SugarElement.fromDom(rng.startContainer), rng.startOffset);\n      withScrollEvents(editor, doc, f, marker, alignToTop);\n      marker.cleanup();\n    };\n    var withElement = function (editor, element, f, alignToTop) {\n      var doc = SugarElement.fromDom(editor.getDoc());\n      withScrollEvents(editor, doc, f, elementMarker(element), alignToTop);\n    };\n    var preserveWith = function (editor, f, rng) {\n      var startElement = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endElement = rng.endContainer;\n      var endOffset = rng.endOffset;\n      f(SugarElement.fromDom(startElement), SugarElement.fromDom(endElement));\n      var newRng = editor.dom.createRng();\n      newRng.setStart(startElement, startOffset);\n      newRng.setEnd(endElement, endOffset);\n      editor.selection.setRng(rng);\n    };\n    var scrollToMarker = function (marker, viewHeight, alignToTop, doc) {\n      var pos = marker.pos;\n      if (alignToTop) {\n        to(pos.left, pos.top, doc);\n      } else {\n        var y = pos.top - viewHeight + marker.height;\n        to(pos.left, y, doc);\n      }\n    };\n    var intoWindowIfNeeded = function (doc, scrollTop, viewHeight, marker, alignToTop) {\n      var viewportBottom = viewHeight + scrollTop;\n      var markerTop = marker.pos.top;\n      var markerBottom = marker.bottom;\n      var largerThanViewport = markerBottom - markerTop >= viewHeight;\n      if (markerTop < scrollTop) {\n        scrollToMarker(marker, viewHeight, alignToTop !== false, doc);\n      } else if (markerTop > viewportBottom) {\n        var align = largerThanViewport ? alignToTop !== false : alignToTop === true;\n        scrollToMarker(marker, viewHeight, align, doc);\n      } else if (markerBottom > viewportBottom && !largerThanViewport) {\n        scrollToMarker(marker, viewHeight, alignToTop === true, doc);\n      }\n    };\n    var intoWindow = function (doc, scrollTop, marker, alignToTop) {\n      var viewHeight = doc.dom.defaultView.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, viewHeight, marker, alignToTop);\n    };\n    var intoFrame = function (doc, scrollTop, marker, alignToTop) {\n      var frameViewHeight = doc.dom.defaultView.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, frameViewHeight, marker, alignToTop);\n      var op = find$1(marker.element);\n      var viewportBounds = getBounds(window);\n      if (op.top < viewportBounds.y) {\n        intoView(marker.element, alignToTop !== false);\n      } else if (op.top > viewportBounds.bottom) {\n        intoView(marker.element, alignToTop === true);\n      }\n    };\n    var rangeIntoWindow = function (editor, rng, alignToTop) {\n      return withMarker(editor, intoWindow, rng, alignToTop);\n    };\n    var elementIntoWindow = function (editor, element, alignToTop) {\n      return withElement(editor, element, intoWindow, alignToTop);\n    };\n    var rangeIntoFrame = function (editor, rng, alignToTop) {\n      return withMarker(editor, intoFrame, rng, alignToTop);\n    };\n    var elementIntoFrame = function (editor, element, alignToTop) {\n      return withElement(editor, element, intoFrame, alignToTop);\n    };\n    var scrollElementIntoView = function (editor, element, alignToTop) {\n      var scroller = editor.inline ? elementIntoWindow : elementIntoFrame;\n      scroller(editor, element, alignToTop);\n    };\n    var scrollRangeIntoView = function (editor, rng, alignToTop) {\n      var scroller = editor.inline ? rangeIntoWindow : rangeIntoFrame;\n      scroller(editor, rng, alignToTop);\n    };\n\n    var getDocument = function () {\n      return SugarElement.fromDom(document);\n    };\n\n    var focus$1 = function (element) {\n      return element.dom.focus();\n    };\n    var hasFocus$1 = function (element) {\n      var root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    var active = function (root) {\n      if (root === void 0) {\n        root = getDocument();\n      }\n      return Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    };\n    var search = function (element) {\n      return active(getRootNode(element)).filter(function (e) {\n        return element.dom.contains(e.dom);\n      });\n    };\n\n    var create$5 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$5 };\n\n    var adt$1 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart$2 = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$1 = adt$1.before;\n    var on = adt$1.on;\n    var after$1 = adt$1.after;\n    var Situ = {\n      before: before$1,\n      on: on,\n      after: after$1,\n      cata: cata,\n      getStart: getStart$2\n    };\n\n    var adt = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt.domRange;\n    var relative = adt.relative;\n    var exact = adt.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range\n    };\n\n    var browser$1 = detect().browser;\n    var clamp$1 = function (offset, element) {\n      var max = isText$8(element) ? get$2(element).length : children(element).length + 1;\n      if (offset > max) {\n        return max;\n      } else if (offset < 0) {\n        return 0;\n      }\n      return offset;\n    };\n    var normalizeRng = function (rng) {\n      return SimSelection.range(rng.start, clamp$1(rng.soffset, rng.start), rng.finish, clamp$1(rng.foffset, rng.finish));\n    };\n    var isOrContains = function (root, elm) {\n      return !isRestrictedNode(elm.dom) && (contains$1(root, elm) || eq(root, elm));\n    };\n    var isRngInRoot = function (root) {\n      return function (rng) {\n        return isOrContains(root, rng.start) && isOrContains(root, rng.finish);\n      };\n    };\n    var shouldStore = function (editor) {\n      return editor.inline === true || browser$1.isIE();\n    };\n    var nativeRangeToSelectionRange = function (r) {\n      return SimSelection.range(SugarElement.fromDom(r.startContainer), r.startOffset, SugarElement.fromDom(r.endContainer), r.endOffset);\n    };\n    var readRange = function (win) {\n      var selection = win.getSelection();\n      var rng = !selection || selection.rangeCount === 0 ? Optional.none() : Optional.from(selection.getRangeAt(0));\n      return rng.map(nativeRangeToSelectionRange);\n    };\n    var getBookmark = function (root) {\n      var win = defaultView(root);\n      return readRange(win.dom).filter(isRngInRoot(root));\n    };\n    var validate = function (root, bookmark) {\n      return Optional.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng);\n    };\n    var bookmarkToNativeRng = function (bookmark) {\n      var rng = document.createRange();\n      try {\n        rng.setStart(bookmark.start.dom, bookmark.soffset);\n        rng.setEnd(bookmark.finish.dom, bookmark.foffset);\n        return Optional.some(rng);\n      } catch (_) {\n        return Optional.none();\n      }\n    };\n    var store = function (editor) {\n      var newBookmark = shouldStore(editor) ? getBookmark(SugarElement.fromDom(editor.getBody())) : Optional.none();\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var storeNative = function (editor, rng) {\n      var root = SugarElement.fromDom(editor.getBody());\n      var range = shouldStore(editor) ? Optional.from(rng) : Optional.none();\n      var newBookmark = range.map(nativeRangeToSelectionRange).filter(isRngInRoot(root));\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var getRng = function (editor) {\n      var bookmark = editor.bookmark ? editor.bookmark : Optional.none();\n      return bookmark.bind(function (x) {\n        return validate(SugarElement.fromDom(editor.getBody()), x);\n      }).bind(bookmarkToNativeRng);\n    };\n    var restore = function (editor) {\n      getRng(editor).each(function (rng) {\n        return editor.selection.setRng(rng);\n      });\n    };\n\n    var isEditorUIElement$1 = function (elm) {\n      var className = elm.className.toString();\n      return className.indexOf('tox-') !== -1 || className.indexOf('mce-') !== -1;\n    };\n    var FocusManager = { isEditorUIElement: isEditorUIElement$1 };\n\n    var isManualNodeChange = function (e) {\n      return e.type === 'nodechange' && e.selectionChange;\n    };\n    var registerPageMouseUp = function (editor, throttledStore) {\n      var mouseUpPage = function () {\n        throttledStore.throttle();\n      };\n      DOMUtils.DOM.bind(document, 'mouseup', mouseUpPage);\n      editor.on('remove', function () {\n        DOMUtils.DOM.unbind(document, 'mouseup', mouseUpPage);\n      });\n    };\n    var registerFocusOut = function (editor) {\n      editor.on('focusout', function () {\n        store(editor);\n      });\n    };\n    var registerMouseUp = function (editor, throttledStore) {\n      editor.on('mouseup touchend', function (_e) {\n        throttledStore.throttle();\n      });\n    };\n    var registerEditorEvents = function (editor, throttledStore) {\n      var browser = detect().browser;\n      if (browser.isIE()) {\n        registerFocusOut(editor);\n      } else {\n        registerMouseUp(editor, throttledStore);\n      }\n      editor.on('keyup NodeChange', function (e) {\n        if (!isManualNodeChange(e)) {\n          store(editor);\n        }\n      });\n    };\n    var register$3 = function (editor) {\n      var throttledStore = first(function () {\n        store(editor);\n      }, 0);\n      editor.on('init', function () {\n        if (editor.inline) {\n          registerPageMouseUp(editor, throttledStore);\n        }\n        registerEditorEvents(editor, throttledStore);\n      });\n      editor.on('remove', function () {\n        throttledStore.cancel();\n      });\n    };\n\n    var documentFocusInHandler;\n    var DOM$8 = DOMUtils.DOM;\n    var isEditorUIElement = function (elm) {\n      return FocusManager.isEditorUIElement(elm);\n    };\n    var isEditorContentAreaElement = function (elm) {\n      var classList = elm.classList;\n      if (classList !== undefined) {\n        return classList.contains('tox-edit-area') || classList.contains('tox-edit-area__iframe') || classList.contains('mce-content-body');\n      } else {\n        return false;\n      }\n    };\n    var isUIElement = function (editor, elm) {\n      var customSelector = getCustomUiSelector(editor);\n      var parent = DOM$8.getParent(elm, function (elm) {\n        return isEditorUIElement(elm) || (customSelector ? editor.dom.is(elm, customSelector) : false);\n      });\n      return parent !== null;\n    };\n    var getActiveElement = function (editor) {\n      try {\n        var root = getRootNode(SugarElement.fromDom(editor.getElement()));\n        return active(root).fold(function () {\n          return document.body;\n        }, function (x) {\n          return x.dom;\n        });\n      } catch (ex) {\n        return document.body;\n      }\n    };\n    var registerEvents$1 = function (editorManager, e) {\n      var editor = e.editor;\n      register$3(editor);\n      editor.on('focusin', function () {\n        var focusedEditor = editorManager.focusedEditor;\n        if (focusedEditor !== editor) {\n          if (focusedEditor) {\n            focusedEditor.fire('blur', { focusedEditor: editor });\n          }\n          editorManager.setActive(editor);\n          editorManager.focusedEditor = editor;\n          editor.fire('focus', { blurredEditor: focusedEditor });\n          editor.focus(true);\n        }\n      });\n      editor.on('focusout', function () {\n        Delay.setEditorTimeout(editor, function () {\n          var focusedEditor = editorManager.focusedEditor;\n          if (!isUIElement(editor, getActiveElement(editor)) && focusedEditor === editor) {\n            editor.fire('blur', { focusedEditor: null });\n            editorManager.focusedEditor = null;\n          }\n        });\n      });\n      if (!documentFocusInHandler) {\n        documentFocusInHandler = function (e) {\n          var activeEditor = editorManager.activeEditor;\n          if (activeEditor) {\n            getOriginalEventTarget(e).each(function (target) {\n              if (target.ownerDocument === document) {\n                if (target !== document.body && !isUIElement(activeEditor, target) && editorManager.focusedEditor === activeEditor) {\n                  activeEditor.fire('blur', { focusedEditor: null });\n                  editorManager.focusedEditor = null;\n                }\n              }\n            });\n          }\n        };\n        DOM$8.bind(document, 'focusin', documentFocusInHandler);\n      }\n    };\n    var unregisterDocumentEvents = function (editorManager, e) {\n      if (editorManager.focusedEditor === e.editor) {\n        editorManager.focusedEditor = null;\n      }\n      if (!editorManager.activeEditor) {\n        DOM$8.unbind(document, 'focusin', documentFocusInHandler);\n        documentFocusInHandler = null;\n      }\n    };\n    var setup$l = function (editorManager) {\n      editorManager.on('AddEditor', curry(registerEvents$1, editorManager));\n      editorManager.on('RemoveEditor', curry(unregisterDocumentEvents, editorManager));\n    };\n\n    var getContentEditableHost = function (editor, node) {\n      return editor.dom.getParent(node, function (node) {\n        return editor.dom.getContentEditable(node) === 'true';\n      });\n    };\n    var getCollapsedNode = function (rng) {\n      return rng.collapsed ? Optional.from(getNode$1(rng.startContainer, rng.startOffset)).map(SugarElement.fromDom) : Optional.none();\n    };\n    var getFocusInElement = function (root, rng) {\n      return getCollapsedNode(rng).bind(function (node) {\n        if (isTableSection(node)) {\n          return Optional.some(node);\n        } else if (contains$1(root, node) === false) {\n          return Optional.some(root);\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var normalizeSelection$1 = function (editor, rng) {\n      getFocusInElement(SugarElement.fromDom(editor.getBody()), rng).bind(function (elm) {\n        return firstPositionIn(elm.dom);\n      }).fold(function () {\n        editor.selection.normalize();\n        return;\n      }, function (caretPos) {\n        return editor.selection.setRng(caretPos.toRange());\n      });\n    };\n    var focusBody = function (body) {\n      if (body.setActive) {\n        try {\n          body.setActive();\n        } catch (ex) {\n          body.focus();\n        }\n      } else {\n        body.focus();\n      }\n    };\n    var hasElementFocus = function (elm) {\n      return hasFocus$1(elm) || search(elm).isSome();\n    };\n    var hasIframeFocus = function (editor) {\n      return editor.iframeElement && hasFocus$1(SugarElement.fromDom(editor.iframeElement));\n    };\n    var hasInlineFocus = function (editor) {\n      var rawBody = editor.getBody();\n      return rawBody && hasElementFocus(SugarElement.fromDom(rawBody));\n    };\n    var hasUiFocus = function (editor) {\n      var dos = getRootNode(SugarElement.fromDom(editor.getElement()));\n      return active(dos).filter(function (elem) {\n        return !isEditorContentAreaElement(elem.dom) && isUIElement(editor, elem.dom);\n      }).isSome();\n    };\n    var hasFocus = function (editor) {\n      return editor.inline ? hasInlineFocus(editor) : hasIframeFocus(editor);\n    };\n    var hasEditorOrUiFocus = function (editor) {\n      return hasFocus(editor) || hasUiFocus(editor);\n    };\n    var focusEditor = function (editor) {\n      var selection = editor.selection;\n      var body = editor.getBody();\n      var rng = selection.getRng();\n      editor.quirks.refreshContentEditable();\n      if (editor.bookmark !== undefined && hasFocus(editor) === false) {\n        getRng(editor).each(function (bookmarkRng) {\n          editor.selection.setRng(bookmarkRng);\n          rng = bookmarkRng;\n        });\n      }\n      var contentEditableHost = getContentEditableHost(editor, selection.getNode());\n      if (editor.$.contains(body, contentEditableHost)) {\n        focusBody(contentEditableHost);\n        normalizeSelection$1(editor, rng);\n        activateEditor(editor);\n        return;\n      }\n      if (!editor.inline) {\n        if (!Env.opera) {\n          focusBody(body);\n        }\n        editor.getWin().focus();\n      }\n      if (Env.gecko || editor.inline) {\n        focusBody(body);\n        normalizeSelection$1(editor, rng);\n      }\n      activateEditor(editor);\n    };\n    var activateEditor = function (editor) {\n      return editor.editorManager.setActive(editor);\n    };\n    var focus = function (editor, skipFocus) {\n      if (editor.removed) {\n        return;\n      }\n      if (skipFocus) {\n        activateEditor(editor);\n      } else {\n        focusEditor(editor);\n      }\n    };\n\n    var getEndpointElement = function (root, rng, start, real, resolve) {\n      var container = start ? rng.startContainer : rng.endContainer;\n      var offset = start ? rng.startOffset : rng.endOffset;\n      return Optional.from(container).map(SugarElement.fromDom).map(function (elm) {\n        return !real || !rng.collapsed ? child$1(elm, resolve(elm, offset)).getOr(elm) : elm;\n      }).bind(function (elm) {\n        return isElement$6(elm) ? Optional.some(elm) : parent(elm).filter(isElement$6);\n      }).map(function (elm) {\n        return elm.dom;\n      }).getOr(root);\n    };\n    var getStart = function (root, rng, real) {\n      return getEndpointElement(root, rng, true, real, function (elm, offset) {\n        return Math.min(childNodesCount(elm), offset);\n      });\n    };\n    var getEnd = function (root, rng, real) {\n      return getEndpointElement(root, rng, false, real, function (elm, offset) {\n        return offset > 0 ? offset - 1 : offset;\n      });\n    };\n    var skipEmptyTextNodes = function (node, forwards) {\n      var orig = node;\n      while (node && isText$7(node) && node.length === 0) {\n        node = forwards ? node.nextSibling : node.previousSibling;\n      }\n      return node || orig;\n    };\n    var getNode = function (root, rng) {\n      var elm, startContainer, endContainer;\n      if (!rng) {\n        return root;\n      }\n      startContainer = rng.startContainer;\n      endContainer = rng.endContainer;\n      var startOffset = rng.startOffset;\n      var endOffset = rng.endOffset;\n      elm = rng.commonAncestorContainer;\n      if (!rng.collapsed) {\n        if (startContainer === endContainer) {\n          if (endOffset - startOffset < 2) {\n            if (startContainer.hasChildNodes()) {\n              elm = startContainer.childNodes[startOffset];\n            }\n          }\n        }\n        if (startContainer.nodeType === 3 && endContainer.nodeType === 3) {\n          if (startContainer.length === startOffset) {\n            startContainer = skipEmptyTextNodes(startContainer.nextSibling, true);\n          } else {\n            startContainer = startContainer.parentNode;\n          }\n          if (endOffset === 0) {\n            endContainer = skipEmptyTextNodes(endContainer.previousSibling, false);\n          } else {\n            endContainer = endContainer.parentNode;\n          }\n          if (startContainer && startContainer === endContainer) {\n            return startContainer;\n          }\n        }\n      }\n      if (elm && elm.nodeType === 3) {\n        return elm.parentNode;\n      }\n      return elm;\n    };\n    var getSelectedBlocks = function (dom, rng, startElm, endElm) {\n      var node;\n      var selectedBlocks = [];\n      var root = dom.getRoot();\n      startElm = dom.getParent(startElm || getStart(root, rng, rng.collapsed), dom.isBlock);\n      endElm = dom.getParent(endElm || getEnd(root, rng, rng.collapsed), dom.isBlock);\n      if (startElm && startElm !== root) {\n        selectedBlocks.push(startElm);\n      }\n      if (startElm && endElm && startElm !== endElm) {\n        node = startElm;\n        var walker = new DomTreeWalker(startElm, root);\n        while ((node = walker.next()) && node !== endElm) {\n          if (dom.isBlock(node)) {\n            selectedBlocks.push(node);\n          }\n        }\n      }\n      if (endElm && startElm !== endElm && endElm !== root) {\n        selectedBlocks.push(endElm);\n      }\n      return selectedBlocks;\n    };\n    var select = function (dom, node, content) {\n      return Optional.from(node).map(function (node) {\n        var idx = dom.nodeIndex(node);\n        var rng = dom.createRng();\n        rng.setStart(node.parentNode, idx);\n        rng.setEnd(node.parentNode, idx + 1);\n        if (content) {\n          moveEndPoint(dom, rng, node, true);\n          moveEndPoint(dom, rng, node, false);\n        }\n        return rng;\n      });\n    };\n\n    var processRanges = function (editor, ranges) {\n      return map$3(ranges, function (range) {\n        var evt = editor.fire('GetSelectionRange', { range: range });\n        return evt.range !== range ? evt.range : range;\n      });\n    };\n\n    var typeLookup = {\n      '#text': 3,\n      '#comment': 8,\n      '#cdata': 4,\n      '#pi': 7,\n      '#doctype': 10,\n      '#document-fragment': 11\n    };\n    var walk$1 = function (node, root, prev) {\n      var startName = prev ? 'lastChild' : 'firstChild';\n      var siblingName = prev ? 'prev' : 'next';\n      if (node[startName]) {\n        return node[startName];\n      }\n      if (node !== root) {\n        var sibling = node[siblingName];\n        if (sibling) {\n          return sibling;\n        }\n        for (var parent_1 = node.parent; parent_1 && parent_1 !== root; parent_1 = parent_1.parent) {\n          sibling = parent_1[siblingName];\n          if (sibling) {\n            return sibling;\n          }\n        }\n      }\n    };\n    var isEmptyTextNode = function (node) {\n      if (!isWhitespaceText(node.value)) {\n        return false;\n      }\n      var parentNode = node.parent;\n      if (parentNode && (parentNode.name !== 'span' || parentNode.attr('style')) && /^[ ]+$/.test(node.value)) {\n        return false;\n      }\n      return true;\n    };\n    var isNonEmptyElement = function (node) {\n      var isNamedAnchor = node.name === 'a' && !node.attr('href') && node.attr('id');\n      return node.attr('name') || node.attr('id') && !node.firstChild || node.attr('data-mce-bookmark') || isNamedAnchor;\n    };\n    var AstNode = function () {\n      function AstNode(name, type) {\n        this.name = name;\n        this.type = type;\n        if (type === 1) {\n          this.attributes = [];\n          this.attributes.map = {};\n        }\n      }\n      AstNode.create = function (name, attrs) {\n        var node = new AstNode(name, typeLookup[name] || 1);\n        if (attrs) {\n          each$j(attrs, function (value, attrName) {\n            node.attr(attrName, value);\n          });\n        }\n        return node;\n      };\n      AstNode.prototype.replace = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        self.insert(node, self);\n        self.remove();\n        return self;\n      };\n      AstNode.prototype.attr = function (name, value) {\n        var self = this;\n        var attrs;\n        if (typeof name !== 'string') {\n          if (name !== undefined && name !== null) {\n            each$j(name, function (value, key) {\n              self.attr(key, value);\n            });\n          }\n          return self;\n        }\n        if (attrs = self.attributes) {\n          if (value !== undefined) {\n            if (value === null) {\n              if (name in attrs.map) {\n                delete attrs.map[name];\n                var i = attrs.length;\n                while (i--) {\n                  if (attrs[i].name === name) {\n                    attrs.splice(i, 1);\n                    return self;\n                  }\n                }\n              }\n              return self;\n            }\n            if (name in attrs.map) {\n              var i = attrs.length;\n              while (i--) {\n                if (attrs[i].name === name) {\n                  attrs[i].value = value;\n                  break;\n                }\n              }\n            } else {\n              attrs.push({\n                name: name,\n                value: value\n              });\n            }\n            attrs.map[name] = value;\n            return self;\n          }\n          return attrs.map[name];\n        }\n      };\n      AstNode.prototype.clone = function () {\n        var self = this;\n        var clone = new AstNode(self.name, self.type);\n        var selfAttrs;\n        if (selfAttrs = self.attributes) {\n          var cloneAttrs = [];\n          cloneAttrs.map = {};\n          for (var i = 0, l = selfAttrs.length; i < l; i++) {\n            var selfAttr = selfAttrs[i];\n            if (selfAttr.name !== 'id') {\n              cloneAttrs[cloneAttrs.length] = {\n                name: selfAttr.name,\n                value: selfAttr.value\n              };\n              cloneAttrs.map[selfAttr.name] = selfAttr.value;\n            }\n          }\n          clone.attributes = cloneAttrs;\n        }\n        clone.value = self.value;\n        clone.shortEnded = self.shortEnded;\n        return clone;\n      };\n      AstNode.prototype.wrap = function (wrapper) {\n        var self = this;\n        self.parent.insert(wrapper, self);\n        wrapper.append(self);\n        return self;\n      };\n      AstNode.prototype.unwrap = function () {\n        var self = this;\n        for (var node = self.firstChild; node;) {\n          var next = node.next;\n          self.insert(node, self, true);\n          node = next;\n        }\n        self.remove();\n      };\n      AstNode.prototype.remove = function () {\n        var self = this, parent = self.parent, next = self.next, prev = self.prev;\n        if (parent) {\n          if (parent.firstChild === self) {\n            parent.firstChild = next;\n            if (next) {\n              next.prev = null;\n            }\n          } else {\n            prev.next = next;\n          }\n          if (parent.lastChild === self) {\n            parent.lastChild = prev;\n            if (prev) {\n              prev.next = null;\n            }\n          } else {\n            next.prev = prev;\n          }\n          self.parent = self.next = self.prev = null;\n        }\n        return self;\n      };\n      AstNode.prototype.append = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        var last = self.lastChild;\n        if (last) {\n          last.next = node;\n          node.prev = last;\n          self.lastChild = node;\n        } else {\n          self.lastChild = self.firstChild = node;\n        }\n        node.parent = self;\n        return node;\n      };\n      AstNode.prototype.insert = function (node, refNode, before) {\n        if (node.parent) {\n          node.remove();\n        }\n        var parent = refNode.parent || this;\n        if (before) {\n          if (refNode === parent.firstChild) {\n            parent.firstChild = node;\n          } else {\n            refNode.prev.next = node;\n          }\n          node.prev = refNode.prev;\n          node.next = refNode;\n          refNode.prev = node;\n        } else {\n          if (refNode === parent.lastChild) {\n            parent.lastChild = node;\n          } else {\n            refNode.next.prev = node;\n          }\n          node.next = refNode.next;\n          node.prev = refNode;\n          refNode.next = node;\n        }\n        node.parent = parent;\n        return node;\n      };\n      AstNode.prototype.getAll = function (name) {\n        var self = this;\n        var collection = [];\n        for (var node = self.firstChild; node; node = walk$1(node, self)) {\n          if (node.name === name) {\n            collection.push(node);\n          }\n        }\n        return collection;\n      };\n      AstNode.prototype.children = function () {\n        var self = this;\n        var collection = [];\n        for (var node = self.firstChild; node; node = node.next) {\n          collection.push(node);\n        }\n        return collection;\n      };\n      AstNode.prototype.empty = function () {\n        var self = this;\n        if (self.firstChild) {\n          var nodes = [];\n          for (var node = self.firstChild; node; node = walk$1(node, self)) {\n            nodes.push(node);\n          }\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            node.parent = node.firstChild = node.lastChild = node.next = node.prev = null;\n          }\n        }\n        self.firstChild = self.lastChild = null;\n        return self;\n      };\n      AstNode.prototype.isEmpty = function (elements, whitespace, predicate) {\n        if (whitespace === void 0) {\n          whitespace = {};\n        }\n        var self = this;\n        var node = self.firstChild;\n        if (isNonEmptyElement(self)) {\n          return false;\n        }\n        if (node) {\n          do {\n            if (node.type === 1) {\n              if (node.attr('data-mce-bogus')) {\n                continue;\n              }\n              if (elements[node.name]) {\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (node.type === 8) {\n              return false;\n            }\n            if (node.type === 3 && !isEmptyTextNode(node)) {\n              return false;\n            }\n            if (node.type === 3 && node.parent && whitespace[node.parent.name] && isWhitespaceText(node.value)) {\n              return false;\n            }\n            if (predicate && predicate(node)) {\n              return false;\n            }\n          } while (node = walk$1(node, self));\n        }\n        return true;\n      };\n      AstNode.prototype.walk = function (prev) {\n        return walk$1(this, null, prev);\n      };\n      return AstNode;\n    }();\n\n    var extractBase64DataUris = function (html) {\n      var dataImageUri = /data:[^;<\"'\\s]+;base64,([a-z0-9\\+\\/=\\s]+)/gi;\n      var chunks = [];\n      var uris = {};\n      var prefix = generate('img');\n      var matches;\n      var index = 0;\n      var count = 0;\n      while (matches = dataImageUri.exec(html)) {\n        var uri = matches[0];\n        var imageId = prefix + '_' + count++;\n        uris[imageId] = uri;\n        if (index < matches.index) {\n          chunks.push(html.substr(index, matches.index - index));\n        }\n        chunks.push(imageId);\n        index = matches.index + uri.length;\n      }\n      var re = new RegExp(prefix + '_[0-9]+', 'g');\n      if (index === 0) {\n        return {\n          prefix: prefix,\n          uris: uris,\n          html: html,\n          re: re\n        };\n      } else {\n        if (index < html.length) {\n          chunks.push(html.substr(index));\n        }\n        return {\n          prefix: prefix,\n          uris: uris,\n          html: chunks.join(''),\n          re: re\n        };\n      }\n    };\n    var restoreDataUris = function (html, result) {\n      return html.replace(result.re, function (imageId) {\n        return get$9(result.uris, imageId).getOr(imageId);\n      });\n    };\n    var parseDataUri$1 = function (uri) {\n      var matches = /data:([^;]+);base64,([a-z0-9\\+\\/=\\s]+)/i.exec(uri);\n      if (matches) {\n        return Optional.some({\n          type: matches[1],\n          data: decodeURIComponent(matches[2])\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var each$d = Tools.each, trim = Tools.trim;\n    var queryParts = 'source protocol authority userInfo user password host port relative path directory file query anchor'.split(' ');\n    var DEFAULT_PORTS = {\n      ftp: 21,\n      http: 80,\n      https: 443,\n      mailto: 25\n    };\n    var safeSvgDataUrlElements = [\n      'img',\n      'video'\n    ];\n    var blockSvgDataUris = function (allowSvgDataUrls, tagName) {\n      if (isNonNullable(allowSvgDataUrls)) {\n        return !allowSvgDataUrls;\n      } else {\n        return isNonNullable(tagName) ? !contains$3(safeSvgDataUrlElements, tagName) : true;\n      }\n    };\n    var isInvalidUri = function (settings, uri, tagName) {\n      if (settings.allow_html_data_urls) {\n        return false;\n      } else if (/^data:image\\//i.test(uri)) {\n        return blockSvgDataUris(settings.allow_svg_data_urls, tagName) && /^data:image\\/svg\\+xml/i.test(uri);\n      } else {\n        return /^data:/i.test(uri);\n      }\n    };\n    var URI = function () {\n      function URI(url, settings) {\n        url = trim(url);\n        this.settings = settings || {};\n        var baseUri = this.settings.base_uri;\n        var self = this;\n        if (/^([\\w\\-]+):([^\\/]{2})/i.test(url) || /^\\s*#/.test(url)) {\n          self.source = url;\n          return;\n        }\n        var isProtocolRelative = url.indexOf('//') === 0;\n        if (url.indexOf('/') === 0 && !isProtocolRelative) {\n          url = (baseUri ? baseUri.protocol || 'http' : 'http') + '://mce_host' + url;\n        }\n        if (!/^[\\w\\-]*:?\\/\\//.test(url)) {\n          var baseUrl = this.settings.base_uri ? this.settings.base_uri.path : new URI(document.location.href).directory;\n          if (this.settings.base_uri && this.settings.base_uri.protocol == '') {\n            url = '//mce_host' + self.toAbsPath(baseUrl, url);\n          } else {\n            var match = /([^#?]*)([#?]?.*)/.exec(url);\n            url = (baseUri && baseUri.protocol || 'http') + '://mce_host' + self.toAbsPath(baseUrl, match[1]) + match[2];\n          }\n        }\n        url = url.replace(/@@/g, '(mce_at)');\n        var urlMatch = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*):?([^:@\\/]*))?@)?(\\[[a-zA-Z0-9:.%]+\\]|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(url);\n        each$d(queryParts, function (v, i) {\n          var part = urlMatch[i];\n          if (part) {\n            part = part.replace(/\\(mce_at\\)/g, '@@');\n          }\n          self[v] = part;\n        });\n        if (baseUri) {\n          if (!self.protocol) {\n            self.protocol = baseUri.protocol;\n          }\n          if (!self.userInfo) {\n            self.userInfo = baseUri.userInfo;\n          }\n          if (!self.port && self.host === 'mce_host') {\n            self.port = baseUri.port;\n          }\n          if (!self.host || self.host === 'mce_host') {\n            self.host = baseUri.host;\n          }\n          self.source = '';\n        }\n        if (isProtocolRelative) {\n          self.protocol = '';\n        }\n      }\n      URI.parseDataUri = function (uri) {\n        var type;\n        var uriComponents = decodeURIComponent(uri).split(',');\n        var matches = /data:([^;]+)/.exec(uriComponents[0]);\n        if (matches) {\n          type = matches[1];\n        }\n        return {\n          type: type,\n          data: uriComponents[1]\n        };\n      };\n      URI.isDomSafe = function (uri, context, options) {\n        if (options === void 0) {\n          options = {};\n        }\n        if (options.allow_script_urls) {\n          return true;\n        } else {\n          var decodedUri = Entities.decode(uri).replace(/[\\s\\u0000-\\u001F]+/g, '');\n          try {\n            decodedUri = decodeURIComponent(decodedUri);\n          } catch (ex) {\n            decodedUri = unescape(decodedUri);\n          }\n          if (/((java|vb)script|mhtml):/i.test(decodedUri)) {\n            return false;\n          }\n          return !isInvalidUri(options, decodedUri, context);\n        }\n      };\n      URI.getDocumentBaseUrl = function (loc) {\n        var baseUrl;\n        if (loc.protocol.indexOf('http') !== 0 && loc.protocol !== 'file:') {\n          baseUrl = loc.href;\n        } else {\n          baseUrl = loc.protocol + '//' + loc.host + loc.pathname;\n        }\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(baseUrl)) {\n          baseUrl = baseUrl.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(baseUrl)) {\n            baseUrl += '/';\n          }\n        }\n        return baseUrl;\n      };\n      URI.prototype.setPath = function (path) {\n        var pathMatch = /^(.*?)\\/?(\\w+)?$/.exec(path);\n        this.path = pathMatch[0];\n        this.directory = pathMatch[1];\n        this.file = pathMatch[2];\n        this.source = '';\n        this.getURI();\n      };\n      URI.prototype.toRelative = function (uri) {\n        var output;\n        if (uri === './') {\n          return uri;\n        }\n        var relativeUri = new URI(uri, { base_uri: this });\n        if (relativeUri.host !== 'mce_host' && this.host !== relativeUri.host && relativeUri.host || this.port !== relativeUri.port || this.protocol !== relativeUri.protocol && relativeUri.protocol !== '') {\n          return relativeUri.getURI();\n        }\n        var tu = this.getURI(), uu = relativeUri.getURI();\n        if (tu === uu || tu.charAt(tu.length - 1) === '/' && tu.substr(0, tu.length - 1) === uu) {\n          return tu;\n        }\n        output = this.toRelPath(this.path, relativeUri.path);\n        if (relativeUri.query) {\n          output += '?' + relativeUri.query;\n        }\n        if (relativeUri.anchor) {\n          output += '#' + relativeUri.anchor;\n        }\n        return output;\n      };\n      URI.prototype.toAbsolute = function (uri, noHost) {\n        var absoluteUri = new URI(uri, { base_uri: this });\n        return absoluteUri.getURI(noHost && this.isSameOrigin(absoluteUri));\n      };\n      URI.prototype.isSameOrigin = function (uri) {\n        if (this.host == uri.host && this.protocol == uri.protocol) {\n          if (this.port == uri.port) {\n            return true;\n          }\n          var defaultPort = DEFAULT_PORTS[this.protocol];\n          if (defaultPort && (this.port || defaultPort) == (uri.port || defaultPort)) {\n            return true;\n          }\n        }\n        return false;\n      };\n      URI.prototype.toRelPath = function (base, path) {\n        var breakPoint = 0, out = '', i, l;\n        var normalizedBase = base.substring(0, base.lastIndexOf('/')).split('/');\n        var items = path.split('/');\n        if (normalizedBase.length >= items.length) {\n          for (i = 0, l = normalizedBase.length; i < l; i++) {\n            if (i >= items.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (normalizedBase.length < items.length) {\n          for (i = 0, l = items.length; i < l; i++) {\n            if (i >= normalizedBase.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (breakPoint === 1) {\n          return path;\n        }\n        for (i = 0, l = normalizedBase.length - (breakPoint - 1); i < l; i++) {\n          out += '../';\n        }\n        for (i = breakPoint - 1, l = items.length; i < l; i++) {\n          if (i !== breakPoint - 1) {\n            out += '/' + items[i];\n          } else {\n            out += items[i];\n          }\n        }\n        return out;\n      };\n      URI.prototype.toAbsPath = function (base, path) {\n        var i, nb = 0, o = [], outPath;\n        var tr = /\\/$/.test(path) ? '/' : '';\n        var normalizedBase = base.split('/');\n        var normalizedPath = path.split('/');\n        each$d(normalizedBase, function (k) {\n          if (k) {\n            o.push(k);\n          }\n        });\n        normalizedBase = o;\n        for (i = normalizedPath.length - 1, o = []; i >= 0; i--) {\n          if (normalizedPath[i].length === 0 || normalizedPath[i] === '.') {\n            continue;\n          }\n          if (normalizedPath[i] === '..') {\n            nb++;\n            continue;\n          }\n          if (nb > 0) {\n            nb--;\n            continue;\n          }\n          o.push(normalizedPath[i]);\n        }\n        i = normalizedBase.length - nb;\n        if (i <= 0) {\n          outPath = reverse(o).join('/');\n        } else {\n          outPath = normalizedBase.slice(0, i).join('/') + '/' + reverse(o).join('/');\n        }\n        if (outPath.indexOf('/') !== 0) {\n          outPath = '/' + outPath;\n        }\n        if (tr && outPath.lastIndexOf('/') !== outPath.length - 1) {\n          outPath += tr;\n        }\n        return outPath;\n      };\n      URI.prototype.getURI = function (noProtoHost) {\n        if (noProtoHost === void 0) {\n          noProtoHost = false;\n        }\n        var s;\n        if (!this.source || noProtoHost) {\n          s = '';\n          if (!noProtoHost) {\n            if (this.protocol) {\n              s += this.protocol + '://';\n            } else {\n              s += '//';\n            }\n            if (this.userInfo) {\n              s += this.userInfo + '@';\n            }\n            if (this.host) {\n              s += this.host;\n            }\n            if (this.port) {\n              s += ':' + this.port;\n            }\n          }\n          if (this.path) {\n            s += this.path;\n          }\n          if (this.query) {\n            s += '?' + this.query;\n          }\n          if (this.anchor) {\n            s += '#' + this.anchor;\n          }\n          this.source = s;\n        }\n        return this.source;\n      };\n      return URI;\n    }();\n\n    var filteredClobberElements = Tools.makeMap('button,fieldset,form,iframe,img,image,input,object,output,select,textarea');\n    var isValidPrefixAttrName = function (name) {\n      return name.indexOf('data-') === 0 || name.indexOf('aria-') === 0;\n    };\n    var findMatchingEndTagIndex = function (schema, html, startIndex) {\n      var startTagRegExp = /<([!?\\/])?([A-Za-z0-9\\-_:.]+)/g;\n      var endTagRegExp = /(?:\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>/g;\n      var shortEndedElements = schema.getShortEndedElements();\n      var count = 1, index = startIndex;\n      while (count !== 0) {\n        startTagRegExp.lastIndex = index;\n        while (true) {\n          var startMatch = startTagRegExp.exec(html);\n          if (startMatch === null) {\n            return index;\n          } else if (startMatch[1] === '!') {\n            if (startsWith(startMatch[2], '--')) {\n              index = findCommentEndIndex(html, false, startMatch.index + '!--'.length);\n            } else {\n              index = findCommentEndIndex(html, true, startMatch.index + 1);\n            }\n            break;\n          } else {\n            endTagRegExp.lastIndex = startTagRegExp.lastIndex;\n            var endMatch = endTagRegExp.exec(html);\n            if (isNull(endMatch) || endMatch.index !== startTagRegExp.lastIndex) {\n              continue;\n            }\n            if (startMatch[1] === '/') {\n              count -= 1;\n            } else if (!has$2(shortEndedElements, startMatch[2])) {\n              count += 1;\n            }\n            index = startTagRegExp.lastIndex + endMatch[0].length;\n            break;\n          }\n        }\n      }\n      return index;\n    };\n    var isConditionalComment = function (html, startIndex) {\n      return /^\\s*\\[if [\\w\\W]+\\]>.*<!\\[endif\\](--!?)?>/.test(html.substr(startIndex));\n    };\n    var findCommentEndIndex = function (html, isBogus, startIndex) {\n      if (startIndex === void 0) {\n        startIndex = 0;\n      }\n      var lcHtml = html.toLowerCase();\n      if (lcHtml.indexOf('[if ', startIndex) !== -1 && isConditionalComment(lcHtml, startIndex)) {\n        var endIfIndex = lcHtml.indexOf('[endif]', startIndex);\n        return lcHtml.indexOf('>', endIfIndex);\n      } else {\n        if (isBogus) {\n          var endIndex = lcHtml.indexOf('>', startIndex);\n          return endIndex !== -1 ? endIndex : lcHtml.length;\n        } else {\n          var endCommentRegexp = /--!?>/g;\n          endCommentRegexp.lastIndex = startIndex;\n          var match = endCommentRegexp.exec(html);\n          return match ? match.index + match[0].length : lcHtml.length;\n        }\n      }\n    };\n    var checkBogusAttribute = function (regExp, attrString) {\n      var matches = regExp.exec(attrString);\n      if (matches) {\n        var name_1 = matches[1];\n        var value = matches[2];\n        return typeof name_1 === 'string' && name_1.toLowerCase() === 'data-mce-bogus' ? value : null;\n      } else {\n        return null;\n      }\n    };\n    var SaxParser = function (settings, schema) {\n      var _a;\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      settings = settings || {};\n      var doc = (_a = settings.document) !== null && _a !== void 0 ? _a : document;\n      var form = doc.createElement('form');\n      if (settings.fix_self_closing !== false) {\n        settings.fix_self_closing = true;\n      }\n      var comment = settings.comment ? settings.comment : noop;\n      var cdata = settings.cdata ? settings.cdata : noop;\n      var text = settings.text ? settings.text : noop;\n      var start = settings.start ? settings.start : noop;\n      var end = settings.end ? settings.end : noop;\n      var pi = settings.pi ? settings.pi : noop;\n      var doctype = settings.doctype ? settings.doctype : noop;\n      var parseInternal = function (base64Extract, format) {\n        if (format === void 0) {\n          format = 'html';\n        }\n        var html = base64Extract.html;\n        var matches, index = 0, value, endRegExp;\n        var stack = [];\n        var attrList, i, textData, name;\n        var isInternalElement, isShortEnded;\n        var elementRule, isValidElement, attr, attribsValue, validAttributesMap, validAttributePatterns;\n        var attributesRequired, attributesDefault, attributesForced;\n        var anyAttributesRequired, attrValue, idCount = 0;\n        var decode = Entities.decode;\n        var filteredUrlAttrs = Tools.makeMap('src,href,data,background,action,formaction,poster,xlink:href');\n        var parsingMode = format === 'html' ? 0 : 1;\n        var processEndTag = function (name) {\n          var pos, i;\n          pos = stack.length;\n          while (pos--) {\n            if (stack[pos].name === name) {\n              break;\n            }\n          }\n          if (pos >= 0) {\n            for (i = stack.length - 1; i >= pos; i--) {\n              name = stack[i];\n              if (name.valid) {\n                end(name.name);\n              }\n            }\n            stack.length = pos;\n          }\n        };\n        var processText = function (value, raw) {\n          return text(restoreDataUris(value, base64Extract), raw);\n        };\n        var processComment = function (value) {\n          if (value === '') {\n            return;\n          }\n          if (value.charAt(0) === '>') {\n            value = ' ' + value;\n          }\n          if (!settings.allow_conditional_comments && value.substr(0, 3).toLowerCase() === '[if') {\n            value = ' ' + value;\n          }\n          comment(restoreDataUris(value, base64Extract));\n        };\n        var processAttr = function (value) {\n          return restoreDataUris(value, base64Extract);\n        };\n        var processMalformedComment = function (value, startIndex) {\n          var startTag = value || '';\n          var isBogus = !startsWith(startTag, '--');\n          var endIndex = findCommentEndIndex(html, isBogus, startIndex);\n          value = html.substr(startIndex, endIndex - startIndex);\n          processComment(isBogus ? startTag + value : value);\n          return endIndex + 1;\n        };\n        var parseAttribute = function (tagName, name, value, val2, val3) {\n          name = name.toLowerCase();\n          value = processAttr(name in fillAttrsMap ? name : decode(value || val2 || val3 || ''));\n          if (validate && !isInternalElement && isValidPrefixAttrName(name) === false) {\n            var attrRule = validAttributesMap[name];\n            if (!attrRule && validAttributePatterns) {\n              var i_1 = validAttributePatterns.length;\n              while (i_1--) {\n                attrRule = validAttributePatterns[i_1];\n                if (attrRule.pattern.test(name)) {\n                  break;\n                }\n              }\n              if (i_1 === -1) {\n                attrRule = null;\n              }\n            }\n            if (!attrRule) {\n              return;\n            }\n            if (attrRule.validValues && !(value in attrRule.validValues)) {\n              return;\n            }\n          }\n          var isNameOrId = name === 'name' || name === 'id';\n          if (isNameOrId && tagName in filteredClobberElements && (value in doc || value in form)) {\n            return;\n          }\n          if (filteredUrlAttrs[name] && !URI.isDomSafe(value, tagName, settings)) {\n            return;\n          }\n          if (isInternalElement && (name in filteredUrlAttrs || name.indexOf('on') === 0)) {\n            return;\n          }\n          attrList.map[name] = value;\n          attrList.push({\n            name: name,\n            value: value\n          });\n        };\n        var tokenRegExp = new RegExp('<(?:' + '(?:!--([\\\\w\\\\W]*?)--!?>)|' + '(?:!\\\\[CDATA\\\\[([\\\\w\\\\W]*?)\\\\]\\\\]>)|' + '(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\\\w\\\\W]*?)>)|' + '(?:!(--)?)|' + '(?:\\\\?([^\\\\s\\\\/<>]+) ?([\\\\w\\\\W]*?)[?/]>)|' + '(?:\\\\/([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)>)|' + '(?:([A-Za-z][A-Za-z0-9\\\\-_:.]*)(\\\\s(?:[^\\'\">]+(?:\"[^\"]*\"|\\'[^\\']*\\'))*[^\"\\'>]*(?:\"[^\">]*|\\'[^\\'>]*)?|\\\\s*|\\\\/)>)' + ')', 'g');\n        var attrRegExp = /([\\w:\\-]+)(?:\\s*=\\s*(?:(?:\\\"((?:[^\\\"])*)\\\")|(?:\\'((?:[^\\'])*)\\')|([^>\\s]+)))?/g;\n        var shortEndedElements = schema.getShortEndedElements();\n        var selfClosing = settings.self_closing_elements || schema.getSelfClosingElements();\n        var fillAttrsMap = schema.getBoolAttrs();\n        var validate = settings.validate;\n        var removeInternalElements = settings.remove_internals;\n        var fixSelfClosing = settings.fix_self_closing;\n        var specialElements = schema.getSpecialElements();\n        var processHtml = html + '>';\n        while (matches = tokenRegExp.exec(processHtml)) {\n          var matchText = matches[0];\n          if (index < matches.index) {\n            processText(decode(html.substr(index, matches.index - index)));\n          }\n          if (value = matches[7]) {\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            processEndTag(value);\n          } else if (value = matches[8]) {\n            if (matches.index + matchText.length > html.length) {\n              processText(decode(html.substr(matches.index)));\n              index = matches.index + matchText.length;\n              continue;\n            }\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            isShortEnded = value in shortEndedElements;\n            if (fixSelfClosing && selfClosing[value] && stack.length > 0 && stack[stack.length - 1].name === value) {\n              processEndTag(value);\n            }\n            var bogusValue = checkBogusAttribute(attrRegExp, matches[9]);\n            if (bogusValue !== null) {\n              if (bogusValue === 'all') {\n                index = findMatchingEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                tokenRegExp.lastIndex = index;\n                continue;\n              }\n              isValidElement = false;\n            }\n            if (!validate || (elementRule = schema.getElementRule(value))) {\n              isValidElement = true;\n              if (validate) {\n                validAttributesMap = elementRule.attributes;\n                validAttributePatterns = elementRule.attributePatterns;\n              }\n              if (attribsValue = matches[9]) {\n                isInternalElement = attribsValue.indexOf('data-mce-type') !== -1;\n                if (isInternalElement && removeInternalElements) {\n                  isValidElement = false;\n                }\n                attrList = [];\n                attrList.map = {};\n                attribsValue.replace(attrRegExp, function (match, name, val, val2, val3) {\n                  parseAttribute(value, name, val, val2, val3);\n                  return '';\n                });\n              } else {\n                attrList = [];\n                attrList.map = {};\n              }\n              if (validate && !isInternalElement) {\n                attributesRequired = elementRule.attributesRequired;\n                attributesDefault = elementRule.attributesDefault;\n                attributesForced = elementRule.attributesForced;\n                anyAttributesRequired = elementRule.removeEmptyAttrs;\n                if (anyAttributesRequired && !attrList.length) {\n                  isValidElement = false;\n                }\n                if (attributesForced) {\n                  i = attributesForced.length;\n                  while (i--) {\n                    attr = attributesForced[i];\n                    name = attr.name;\n                    attrValue = attr.value;\n                    if (attrValue === '{$uid}') {\n                      attrValue = 'mce_' + idCount++;\n                    }\n                    attrList.map[name] = attrValue;\n                    attrList.push({\n                      name: name,\n                      value: attrValue\n                    });\n                  }\n                }\n                if (attributesDefault) {\n                  i = attributesDefault.length;\n                  while (i--) {\n                    attr = attributesDefault[i];\n                    name = attr.name;\n                    if (!(name in attrList.map)) {\n                      attrValue = attr.value;\n                      if (attrValue === '{$uid}') {\n                        attrValue = 'mce_' + idCount++;\n                      }\n                      attrList.map[name] = attrValue;\n                      attrList.push({\n                        name: name,\n                        value: attrValue\n                      });\n                    }\n                  }\n                }\n                if (attributesRequired) {\n                  i = attributesRequired.length;\n                  while (i--) {\n                    if (attributesRequired[i] in attrList.map) {\n                      break;\n                    }\n                  }\n                  if (i === -1) {\n                    isValidElement = false;\n                  }\n                }\n                if (attr = attrList.map['data-mce-bogus']) {\n                  if (attr === 'all') {\n                    index = findMatchingEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                    tokenRegExp.lastIndex = index;\n                    continue;\n                  }\n                  isValidElement = false;\n                }\n              }\n              if (isValidElement) {\n                start(value, attrList, isShortEnded);\n              }\n            } else {\n              isValidElement = false;\n            }\n            if (endRegExp = specialElements[value]) {\n              endRegExp.lastIndex = index = matches.index + matchText.length;\n              if (matches = endRegExp.exec(html)) {\n                if (isValidElement) {\n                  textData = html.substr(index, matches.index - index);\n                }\n                index = matches.index + matches[0].length;\n              } else {\n                textData = html.substr(index);\n                index = html.length;\n              }\n              if (isValidElement) {\n                if (textData.length > 0) {\n                  processText(textData, true);\n                }\n                end(value);\n              }\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n            if (!isShortEnded) {\n              if (!attribsValue || attribsValue.indexOf('/') !== attribsValue.length - 1) {\n                stack.push({\n                  name: value,\n                  valid: isValidElement\n                });\n              } else if (isValidElement) {\n                end(value);\n              }\n            }\n          } else if (value = matches[1]) {\n            processComment(value);\n          } else if (value = matches[2]) {\n            var isValidCdataSection = parsingMode === 1 || settings.preserve_cdata || stack.length > 0 && schema.isValidChild(stack[stack.length - 1].name, '#cdata');\n            if (isValidCdataSection) {\n              cdata(value);\n            } else {\n              index = processMalformedComment('', matches.index + 2);\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n          } else if (value = matches[3]) {\n            doctype(value);\n          } else if ((value = matches[4]) || matchText === '<!') {\n            index = processMalformedComment(value, matches.index + matchText.length);\n            tokenRegExp.lastIndex = index;\n            continue;\n          } else if (value = matches[5]) {\n            if (parsingMode === 1) {\n              pi(value, matches[6]);\n            } else {\n              index = processMalformedComment('?', matches.index + 2);\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n          }\n          index = matches.index + matchText.length;\n        }\n        if (index < html.length) {\n          processText(decode(html.substr(index)));\n        }\n        for (i = stack.length - 1; i >= 0; i--) {\n          value = stack[i];\n          if (value.valid) {\n            end(value.name);\n          }\n        }\n      };\n      var parse = function (html, format) {\n        if (format === void 0) {\n          format = 'html';\n        }\n        parseInternal(extractBase64DataUris(html), format);\n      };\n      return { parse: parse };\n    };\n    SaxParser.findEndTag = findMatchingEndTagIndex;\n\n    var trimHtml = function (tempAttrs, html) {\n      var trimContentRegExp = new RegExp(['\\\\s?(' + tempAttrs.join('|') + ')=\"[^\"]+\"'].join('|'), 'gi');\n      return html.replace(trimContentRegExp, '');\n    };\n    var trimInternal = function (serializer, html) {\n      var bogusAllRegExp = /<(\\w+) [^>]*data-mce-bogus=\"all\"[^>]*>/g;\n      var schema = serializer.schema;\n      var content = trimHtml(serializer.getTempAttrs(), html);\n      var shortEndedElements = schema.getShortEndedElements();\n      var matches;\n      while (matches = bogusAllRegExp.exec(content)) {\n        var index = bogusAllRegExp.lastIndex;\n        var matchLength = matches[0].length;\n        var endTagIndex = void 0;\n        if (shortEndedElements[matches[1]]) {\n          endTagIndex = index;\n        } else {\n          endTagIndex = SaxParser.findEndTag(schema, content, index);\n        }\n        content = content.substring(0, index - matchLength) + content.substring(endTagIndex);\n        bogusAllRegExp.lastIndex = index - matchLength;\n      }\n      return trim$2(content);\n    };\n    var trimExternal = trimInternal;\n\n    var trimEmptyContents = function (editor, html) {\n      var blockName = getForcedRootBlock(editor);\n      var emptyRegExp = new RegExp('^(<' + blockName + '[^>]*>(&nbsp;|&#160;|\\\\s|\\xA0|<br \\\\/>|)<\\\\/' + blockName + '>[\\r\\n]*|<br \\\\/>[\\r\\n]*)$');\n      return html.replace(emptyRegExp, '');\n    };\n    var setupArgs$3 = function (args, format) {\n      return __assign(__assign({}, args), {\n        format: format,\n        get: true,\n        getInner: true\n      });\n    };\n    var getContentFromBody = function (editor, args, format, body) {\n      var defaultedArgs = setupArgs$3(args, format);\n      var updatedArgs = args.no_events ? defaultedArgs : editor.fire('BeforeGetContent', defaultedArgs);\n      var content;\n      if (updatedArgs.format === 'raw') {\n        content = Tools.trim(trimExternal(editor.serializer, body.innerHTML));\n      } else if (updatedArgs.format === 'text') {\n        content = editor.dom.isEmpty(body) ? '' : trim$2(body.innerText || body.textContent);\n      } else if (updatedArgs.format === 'tree') {\n        content = editor.serializer.serialize(body, updatedArgs);\n      } else {\n        content = trimEmptyContents(editor, editor.serializer.serialize(body, updatedArgs));\n      }\n      if (!contains$3([\n          'text',\n          'tree'\n        ], updatedArgs.format) && !isWsPreserveElement(SugarElement.fromDom(body))) {\n        updatedArgs.content = Tools.trim(content);\n      } else {\n        updatedArgs.content = content;\n      }\n      if (updatedArgs.no_events) {\n        return updatedArgs.content;\n      } else {\n        return editor.fire('GetContent', updatedArgs).content;\n      }\n    };\n    var getContentInternal = function (editor, args, format) {\n      return Optional.from(editor.getBody()).fold(constant(args.format === 'tree' ? new AstNode('body', 11) : ''), function (body) {\n        return getContentFromBody(editor, args, format, body);\n      });\n    };\n\n    var each$c = Tools.each;\n    var ElementUtils = function (dom) {\n      var compare = function (node1, node2) {\n        if (node1.nodeName !== node2.nodeName) {\n          return false;\n        }\n        var getAttribs = function (node) {\n          var attribs = {};\n          each$c(dom.getAttribs(node), function (attr) {\n            var name = attr.nodeName.toLowerCase();\n            if (name.indexOf('_') !== 0 && name !== 'style' && name.indexOf('data-') !== 0) {\n              attribs[name] = dom.getAttrib(node, name);\n            }\n          });\n          return attribs;\n        };\n        var compareObjects = function (obj1, obj2) {\n          var value, name;\n          for (name in obj1) {\n            if (has$2(obj1, name)) {\n              value = obj2[name];\n              if (typeof value === 'undefined') {\n                return false;\n              }\n              if (obj1[name] !== value) {\n                return false;\n              }\n              delete obj2[name];\n            }\n          }\n          for (name in obj2) {\n            if (has$2(obj2, name)) {\n              return false;\n            }\n          }\n          return true;\n        };\n        if (!compareObjects(getAttribs(node1), getAttribs(node2))) {\n          return false;\n        }\n        if (!compareObjects(dom.parseStyle(dom.getAttrib(node1, 'style')), dom.parseStyle(dom.getAttrib(node2, 'style')))) {\n          return false;\n        }\n        return !isBookmarkNode$1(node1) && !isBookmarkNode$1(node2);\n      };\n      return { compare: compare };\n    };\n\n    var makeMap$1 = Tools.makeMap;\n    var Writer = function (settings) {\n      var html = [];\n      settings = settings || {};\n      var indent = settings.indent;\n      var indentBefore = makeMap$1(settings.indent_before || '');\n      var indentAfter = makeMap$1(settings.indent_after || '');\n      var encode = Entities.getEncodeFunc(settings.entity_encoding || 'raw', settings.entities);\n      var htmlOutput = settings.element_format === 'html';\n      return {\n        start: function (name, attrs, empty) {\n          var i, l, attr, value;\n          if (indent && indentBefore[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n          html.push('<', name);\n          if (attrs) {\n            for (i = 0, l = attrs.length; i < l; i++) {\n              attr = attrs[i];\n              html.push(' ', attr.name, '=\"', encode(attr.value, true), '\"');\n            }\n          }\n          if (!empty || htmlOutput) {\n            html[html.length] = '>';\n          } else {\n            html[html.length] = ' />';\n          }\n          if (empty && indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        end: function (name) {\n          var value;\n          html.push('</', name, '>');\n          if (indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        text: function (text, raw) {\n          if (text.length > 0) {\n            html[html.length] = raw ? text : encode(text);\n          }\n        },\n        cdata: function (text) {\n          html.push('<![CDATA[', text, ']]>');\n        },\n        comment: function (text) {\n          html.push('<!--', text, '-->');\n        },\n        pi: function (name, text) {\n          if (text) {\n            html.push('<?', name, ' ', encode(text), '?>');\n          } else {\n            html.push('<?', name, '?>');\n          }\n          if (indent) {\n            html.push('\\n');\n          }\n        },\n        doctype: function (text) {\n          html.push('<!DOCTYPE', text, '>', indent ? '\\n' : '');\n        },\n        reset: function () {\n          html.length = 0;\n        },\n        getContent: function () {\n          return html.join('').replace(/\\n$/, '');\n        }\n      };\n    };\n\n    var HtmlSerializer = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var writer = Writer(settings);\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      var serialize = function (node) {\n        var validate = settings.validate;\n        var handlers = {\n          3: function (node) {\n            writer.text(node.value, node.raw);\n          },\n          8: function (node) {\n            writer.comment(node.value);\n          },\n          7: function (node) {\n            writer.pi(node.name, node.value);\n          },\n          10: function (node) {\n            writer.doctype(node.value);\n          },\n          4: function (node) {\n            writer.cdata(node.value);\n          },\n          11: function (node) {\n            if (node = node.firstChild) {\n              do {\n                walk(node);\n              } while (node = node.next);\n            }\n          }\n        };\n        writer.reset();\n        var walk = function (node) {\n          var handler = handlers[node.type];\n          if (!handler) {\n            var name_1 = node.name;\n            var isEmpty = node.shortEnded;\n            var attrs = node.attributes;\n            if (validate && attrs && attrs.length > 1) {\n              var sortedAttrs = [];\n              sortedAttrs.map = {};\n              var elementRule = schema.getElementRule(node.name);\n              if (elementRule) {\n                for (var i = 0, l = elementRule.attributesOrder.length; i < l; i++) {\n                  var attrName = elementRule.attributesOrder[i];\n                  if (attrName in attrs.map) {\n                    var attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                for (var i = 0, l = attrs.length; i < l; i++) {\n                  var attrName = attrs[i].name;\n                  if (!(attrName in sortedAttrs.map)) {\n                    var attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                attrs = sortedAttrs;\n              }\n            }\n            writer.start(node.name, attrs, isEmpty);\n            if (!isEmpty) {\n              if (node = node.firstChild) {\n                do {\n                  walk(node);\n                } while (node = node.next);\n              }\n              writer.end(name_1);\n            }\n          } else {\n            handler(node);\n          }\n        };\n        if (node.type === 1 && !settings.inner) {\n          walk(node);\n        } else {\n          handlers[11](node);\n        }\n        return writer.getContent();\n      };\n      return { serialize: serialize };\n    };\n\n    var nonInheritableStyles = new Set();\n    (function () {\n      var nonInheritableStylesArr = [\n        'margin',\n        'margin-left',\n        'margin-right',\n        'margin-top',\n        'margin-bottom',\n        'padding',\n        'padding-left',\n        'padding-right',\n        'padding-top',\n        'padding-bottom',\n        'border',\n        'border-width',\n        'border-style',\n        'border-color',\n        'background',\n        'background-attachment',\n        'background-clip',\n        'background-color',\n        'background-image',\n        'background-origin',\n        'background-position',\n        'background-repeat',\n        'background-size',\n        'float',\n        'position',\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'z-index',\n        'display',\n        'transform',\n        'width',\n        'max-width',\n        'min-width',\n        'height',\n        'max-height',\n        'min-height',\n        'overflow',\n        'overflow-x',\n        'overflow-y',\n        'text-overflow',\n        'vertical-align',\n        'transition',\n        'transition-delay',\n        'transition-duration',\n        'transition-property',\n        'transition-timing-function'\n      ];\n      each$k(nonInheritableStylesArr, function (style) {\n        nonInheritableStyles.add(style);\n      });\n    }());\n    var shorthandStyleProps = [\n      'font',\n      'text-decoration',\n      'text-emphasis'\n    ];\n    var getStyleProps = function (dom, node) {\n      return keys(dom.parseStyle(dom.getAttrib(node, 'style')));\n    };\n    var isNonInheritableStyle = function (style) {\n      return nonInheritableStyles.has(style);\n    };\n    var hasInheritableStyles = function (dom, node) {\n      return forall(getStyleProps(dom, node), function (style) {\n        return !isNonInheritableStyle(style);\n      });\n    };\n    var getLonghandStyleProps = function (styles) {\n      return filter$4(styles, function (style) {\n        return exists(shorthandStyleProps, function (prop) {\n          return startsWith(style, prop);\n        });\n      });\n    };\n    var hasStyleConflict = function (dom, node, parentNode) {\n      var nodeStyleProps = getStyleProps(dom, node);\n      var parentNodeStyleProps = getStyleProps(dom, parentNode);\n      var valueMismatch = function (prop) {\n        var nodeValue = dom.getStyle(node, prop);\n        var parentValue = dom.getStyle(parentNode, prop);\n        return isNotEmpty(nodeValue) && isNotEmpty(parentValue) && nodeValue !== parentValue;\n      };\n      return exists(nodeStyleProps, function (nodeStyleProp) {\n        var propExists = function (props) {\n          return exists(props, function (prop) {\n            return prop === nodeStyleProp;\n          });\n        };\n        if (!propExists(parentNodeStyleProps) && propExists(shorthandStyleProps)) {\n          var longhandProps = getLonghandStyleProps(parentNodeStyleProps);\n          return exists(longhandProps, valueMismatch);\n        } else {\n          return valueMismatch(nodeStyleProp);\n        }\n      });\n    };\n\n    var isChar = function (forward, predicate, pos) {\n      return Optional.from(pos.container()).filter(isText$7).exists(function (text) {\n        var delta = forward ? 0 : -1;\n        return predicate(text.data.charAt(pos.offset() + delta));\n      });\n    };\n    var isBeforeSpace = curry(isChar, true, isWhiteSpace);\n    var isAfterSpace = curry(isChar, false, isWhiteSpace);\n    var isEmptyText = function (pos) {\n      var container = pos.container();\n      return isText$7(container) && (container.data.length === 0 || isZwsp(container.data) && BookmarkManager.isBookmarkNode(container.parentNode));\n    };\n    var matchesElementPosition = function (before, predicate) {\n      return function (pos) {\n        return Optional.from(getChildNodeAtRelativeOffset(before ? 0 : -1, pos)).filter(predicate).isSome();\n      };\n    };\n    var isImageBlock = function (node) {\n      return isImg(node) && get$5(SugarElement.fromDom(node), 'display') === 'block';\n    };\n    var isCefNode = function (node) {\n      return isContentEditableFalse$b(node) && !isBogusAll$1(node);\n    };\n    var isBeforeImageBlock = matchesElementPosition(true, isImageBlock);\n    var isAfterImageBlock = matchesElementPosition(false, isImageBlock);\n    var isBeforeMedia = matchesElementPosition(true, isMedia$2);\n    var isAfterMedia = matchesElementPosition(false, isMedia$2);\n    var isBeforeTable = matchesElementPosition(true, isTable$3);\n    var isAfterTable = matchesElementPosition(false, isTable$3);\n    var isBeforeContentEditableFalse = matchesElementPosition(true, isCefNode);\n    var isAfterContentEditableFalse = matchesElementPosition(false, isCefNode);\n\n    var getLastChildren = function (elm) {\n      var children = [];\n      var rawNode = elm.dom;\n      while (rawNode) {\n        children.push(SugarElement.fromDom(rawNode));\n        rawNode = rawNode.lastChild;\n      }\n      return children;\n    };\n    var removeTrailingBr = function (elm) {\n      var allBrs = descendants(elm, 'br');\n      var brs = filter$4(getLastChildren(elm).slice(-1), isBr$4);\n      if (allBrs.length === brs.length) {\n        each$k(brs, remove$7);\n      }\n    };\n    var fillWithPaddingBr = function (elm) {\n      empty(elm);\n      append$1(elm, SugarElement.fromHtml('<br data-mce-bogus=\"1\">'));\n    };\n    var trimBlockTrailingBr = function (elm) {\n      lastChild(elm).each(function (lastChild) {\n        prevSibling(lastChild).each(function (lastChildPrevSibling) {\n          if (isBlock$2(elm) && isBr$4(lastChild) && isBlock$2(lastChildPrevSibling)) {\n            remove$7(lastChild);\n          }\n        });\n      });\n    };\n\n    var dropLast = function (xs) {\n      return xs.slice(0, -1);\n    };\n    var parentsUntil = function (start, root, predicate) {\n      if (contains$1(root, start)) {\n        return dropLast(parents$1(start, function (elm) {\n          return predicate(elm) || eq(elm, root);\n        }));\n      } else {\n        return [];\n      }\n    };\n    var parents = function (start, root) {\n      return parentsUntil(start, root, never);\n    };\n    var parentsAndSelf = function (start, root) {\n      return [start].concat(parents(start, root));\n    };\n\n    var navigateIgnoreEmptyTextNodes = function (forward, root, from) {\n      return navigateIgnore(forward, root, from, isEmptyText);\n    };\n    var getClosestBlock$1 = function (root, pos) {\n      return find$3(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n    };\n    var isAtBeforeAfterBlockBoundary = function (forward, root, pos) {\n      return navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(function (newPos) {\n        return getClosestBlock$1(root, pos).fold(function () {\n          return isInSameBlock(newPos, pos, root.dom) === false;\n        }, function (fromBlock) {\n          return isInSameBlock(newPos, pos, root.dom) === false && contains$1(fromBlock, SugarElement.fromDom(newPos.container()));\n        });\n      });\n    };\n    var isAtBlockBoundary = function (forward, root, pos) {\n      return getClosestBlock$1(root, pos).fold(function () {\n        return navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(function (newPos) {\n          return isInSameBlock(newPos, pos, root.dom) === false;\n        });\n      }, function (parent) {\n        return navigateIgnoreEmptyTextNodes(forward, parent.dom, pos).isNone();\n      });\n    };\n    var isAtStartOfBlock = curry(isAtBlockBoundary, false);\n    var isAtEndOfBlock = curry(isAtBlockBoundary, true);\n    var isBeforeBlock = curry(isAtBeforeAfterBlockBoundary, false);\n    var isAfterBlock = curry(isAtBeforeAfterBlockBoundary, true);\n\n    var isBr = function (pos) {\n      return getElementFromPosition(pos).exists(isBr$4);\n    };\n    var findBr = function (forward, root, pos) {\n      var parentBlocks = filter$4(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n      var scope = head(parentBlocks).getOr(root);\n      return fromPosition(forward, scope.dom, pos).filter(isBr);\n    };\n    var isBeforeBr$1 = function (root, pos) {\n      return getElementFromPosition(pos).exists(isBr$4) || findBr(true, root, pos).isSome();\n    };\n    var isAfterBr = function (root, pos) {\n      return getElementFromPrevPosition(pos).exists(isBr$4) || findBr(false, root, pos).isSome();\n    };\n    var findPreviousBr = curry(findBr, false);\n    var findNextBr = curry(findBr, true);\n\n    var isInMiddleOfText = function (pos) {\n      return CaretPosition.isTextPosition(pos) && !pos.isAtStart() && !pos.isAtEnd();\n    };\n    var getClosestBlock = function (root, pos) {\n      var parentBlocks = filter$4(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n      return head(parentBlocks).getOr(root);\n    };\n    var hasSpaceBefore = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isAfterSpace(pos);\n      } else {\n        return isAfterSpace(pos) || prevPosition(getClosestBlock(root, pos).dom, pos).exists(isAfterSpace);\n      }\n    };\n    var hasSpaceAfter = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isBeforeSpace(pos);\n      } else {\n        return isBeforeSpace(pos) || nextPosition(getClosestBlock(root, pos).dom, pos).exists(isBeforeSpace);\n      }\n    };\n    var isPreValue = function (value) {\n      return contains$3([\n        'pre',\n        'pre-wrap'\n      ], value);\n    };\n    var isInPre = function (pos) {\n      return getElementFromPosition(pos).bind(function (elm) {\n        return closest$3(elm, isElement$6);\n      }).exists(function (elm) {\n        return isPreValue(get$5(elm, 'white-space'));\n      });\n    };\n    var isAtBeginningOfBody = function (root, pos) {\n      return prevPosition(root.dom, pos).isNone();\n    };\n    var isAtEndOfBody = function (root, pos) {\n      return nextPosition(root.dom, pos).isNone();\n    };\n    var isAtLineBoundary = function (root, pos) {\n      return isAtBeginningOfBody(root, pos) || isAtEndOfBody(root, pos) || isAtStartOfBlock(root, pos) || isAtEndOfBlock(root, pos) || isAfterBr(root, pos) || isBeforeBr$1(root, pos);\n    };\n    var needsToHaveNbsp = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtLineBoundary(root, pos) || hasSpaceBefore(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbspLeft = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtStartOfBlock(root, pos) || isBeforeBlock(root, pos) || isAfterBr(root, pos) || hasSpaceBefore(root, pos);\n      }\n    };\n    var leanRight = function (pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (isText$7(container) && offset < container.data.length) {\n        return CaretPosition(container, offset + 1);\n      } else {\n        return pos;\n      }\n    };\n    var needsToBeNbspRight = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtEndOfBlock(root, pos) || isAfterBlock(root, pos) || isBeforeBr$1(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbsp = function (root, pos) {\n      return needsToBeNbspLeft(root, pos) || needsToBeNbspRight(root, leanRight(pos));\n    };\n    var isNbspAt = function (text, offset) {\n      return isNbsp(text.charAt(offset));\n    };\n    var hasNbsp = function (pos) {\n      var container = pos.container();\n      return isText$7(container) && contains$2(container.data, nbsp);\n    };\n    var normalizeNbspMiddle = function (text) {\n      var chars = text.split('');\n      return map$3(chars, function (chr, i) {\n        if (isNbsp(chr) && i > 0 && i < chars.length - 1 && isContent(chars[i - 1]) && isContent(chars[i + 1])) {\n          return ' ';\n        } else {\n          return chr;\n        }\n      }).join('');\n    };\n    var normalizeNbspAtStart = function (root, node) {\n      var text = node.data;\n      var firstPos = CaretPosition(node, 0);\n      if (isNbspAt(text, 0) && !needsToBeNbsp(root, firstPos)) {\n        node.data = ' ' + text.slice(1);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspInMiddleOfTextNode = function (node) {\n      var text = node.data;\n      var newText = normalizeNbspMiddle(text);\n      if (newText !== text) {\n        node.data = newText;\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspAtEnd = function (root, node) {\n      var text = node.data;\n      var lastPos = CaretPosition(node, text.length - 1);\n      if (isNbspAt(text, text.length - 1) && !needsToBeNbsp(root, lastPos)) {\n        node.data = text.slice(0, -1) + ' ';\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbsps = function (root, pos) {\n      return Optional.some(pos).filter(hasNbsp).bind(function (pos) {\n        var container = pos.container();\n        var normalized = normalizeNbspAtStart(root, container) || normalizeNbspInMiddleOfTextNode(container) || normalizeNbspAtEnd(root, container);\n        return normalized ? Optional.some(pos) : Optional.none();\n      });\n    };\n    var normalizeNbspsInEditor = function (editor) {\n      var root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        normalizeNbsps(root, CaretPosition.fromRangeStart(editor.selection.getRng())).each(function (pos) {\n          editor.selection.setRng(pos.toRange());\n        });\n      }\n    };\n\n    var normalizeContent = function (content, isStartOfContent, isEndOfContent) {\n      var result = foldl(content, function (acc, c) {\n        if (isWhiteSpace(c) || isNbsp(c)) {\n          if (acc.previousCharIsSpace || acc.str === '' && isStartOfContent || acc.str.length === content.length - 1 && isEndOfContent) {\n            return {\n              previousCharIsSpace: false,\n              str: acc.str + nbsp\n            };\n          } else {\n            return {\n              previousCharIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            previousCharIsSpace: false,\n            str: acc.str + c\n          };\n        }\n      }, {\n        previousCharIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n    var normalize$1 = function (node, offset, count) {\n      if (count === 0) {\n        return;\n      }\n      var elm = SugarElement.fromDom(node);\n      var root = ancestor$3(elm, isBlock$2).getOr(elm);\n      var whitespace = node.data.slice(offset, offset + count);\n      var isEndOfContent = offset + count >= node.data.length && needsToBeNbspRight(root, CaretPosition(node, node.data.length));\n      var isStartOfContent = offset === 0 && needsToBeNbspLeft(root, CaretPosition(node, 0));\n      node.replaceData(offset, count, normalizeContent(whitespace, isStartOfContent, isEndOfContent));\n    };\n    var normalizeWhitespaceAfter = function (node, offset) {\n      var content = node.data.slice(offset);\n      var whitespaceCount = content.length - lTrim(content).length;\n      normalize$1(node, offset, whitespaceCount);\n    };\n    var normalizeWhitespaceBefore = function (node, offset) {\n      var content = node.data.slice(0, offset);\n      var whitespaceCount = content.length - rTrim(content).length;\n      normalize$1(node, offset - whitespaceCount, whitespaceCount);\n    };\n    var mergeTextNodes = function (prevNode, nextNode, normalizeWhitespace, mergeToPrev) {\n      if (mergeToPrev === void 0) {\n        mergeToPrev = true;\n      }\n      var whitespaceOffset = rTrim(prevNode.data).length;\n      var newNode = mergeToPrev ? prevNode : nextNode;\n      var removeNode = mergeToPrev ? nextNode : prevNode;\n      if (mergeToPrev) {\n        newNode.appendData(removeNode.data);\n      } else {\n        newNode.insertData(0, removeNode.data);\n      }\n      remove$7(SugarElement.fromDom(removeNode));\n      if (normalizeWhitespace) {\n        normalizeWhitespaceAfter(newNode, whitespaceOffset);\n      }\n      return newNode;\n    };\n\n    var needsReposition = function (pos, elm) {\n      var container = pos.container();\n      var offset = pos.offset();\n      return CaretPosition.isTextPosition(pos) === false && container === elm.parentNode && offset > CaretPosition.before(elm).offset();\n    };\n    var reposition = function (elm, pos) {\n      return needsReposition(pos, elm) ? CaretPosition(pos.container(), pos.offset() - 1) : pos;\n    };\n    var beforeOrStartOf = function (node) {\n      return isText$7(node) ? CaretPosition(node, 0) : CaretPosition.before(node);\n    };\n    var afterOrEndOf = function (node) {\n      return isText$7(node) ? CaretPosition(node, node.data.length) : CaretPosition.after(node);\n    };\n    var getPreviousSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate$3(elm.previousSibling)) {\n        return Optional.some(afterOrEndOf(elm.previousSibling));\n      } else {\n        return elm.previousSibling ? lastPositionIn(elm.previousSibling) : Optional.none();\n      }\n    };\n    var getNextSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate$3(elm.nextSibling)) {\n        return Optional.some(beforeOrStartOf(elm.nextSibling));\n      } else {\n        return elm.nextSibling ? firstPositionIn(elm.nextSibling) : Optional.none();\n      }\n    };\n    var findCaretPositionBackwardsFromElm = function (rootElement, elm) {\n      var startPosition = CaretPosition.before(elm.previousSibling ? elm.previousSibling : elm.parentNode);\n      return prevPosition(rootElement, startPosition).fold(function () {\n        return nextPosition(rootElement, CaretPosition.after(elm));\n      }, Optional.some);\n    };\n    var findCaretPositionForwardsFromElm = function (rootElement, elm) {\n      return nextPosition(rootElement, CaretPosition.after(elm)).fold(function () {\n        return prevPosition(rootElement, CaretPosition.before(elm));\n      }, Optional.some);\n    };\n    var findCaretPositionBackwards = function (rootElement, elm) {\n      return getPreviousSiblingCaretPosition(elm).orThunk(function () {\n        return getNextSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionBackwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPositionForward = function (rootElement, elm) {\n      return getNextSiblingCaretPosition(elm).orThunk(function () {\n        return getPreviousSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionForwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPosition = function (forward, rootElement, elm) {\n      return forward ? findCaretPositionForward(rootElement, elm) : findCaretPositionBackwards(rootElement, elm);\n    };\n    var findCaretPosOutsideElmAfterDelete = function (forward, rootElement, elm) {\n      return findCaretPosition(forward, rootElement, elm).map(curry(reposition, elm));\n    };\n    var setSelection$1 = function (editor, forward, pos) {\n      pos.fold(function () {\n        editor.focus();\n      }, function (pos) {\n        editor.selection.setRng(pos.toRange(), forward);\n      });\n    };\n    var eqRawNode = function (rawNode) {\n      return function (elm) {\n        return elm.dom === rawNode;\n      };\n    };\n    var isBlock = function (editor, elm) {\n      return elm && has$2(editor.schema.getBlockElements(), name(elm));\n    };\n    var paddEmptyBlock = function (elm) {\n      if (isEmpty$2(elm)) {\n        var br = SugarElement.fromHtml('<br data-mce-bogus=\"1\">');\n        empty(elm);\n        append$1(elm, br);\n        return Optional.some(CaretPosition.before(br.dom));\n      } else {\n        return Optional.none();\n      }\n    };\n    var deleteNormalized = function (elm, afterDeletePosOpt, normalizeWhitespace) {\n      var prevTextOpt = prevSibling(elm).filter(isText$8);\n      var nextTextOpt = nextSibling(elm).filter(isText$8);\n      remove$7(elm);\n      return lift3(prevTextOpt, nextTextOpt, afterDeletePosOpt, function (prev, next, pos) {\n        var prevNode = prev.dom, nextNode = next.dom;\n        var offset = prevNode.data.length;\n        mergeTextNodes(prevNode, nextNode, normalizeWhitespace);\n        return pos.container() === nextNode ? CaretPosition(prevNode, offset) : pos;\n      }).orThunk(function () {\n        if (normalizeWhitespace) {\n          prevTextOpt.each(function (elm) {\n            return normalizeWhitespaceBefore(elm.dom, elm.dom.length);\n          });\n          nextTextOpt.each(function (elm) {\n            return normalizeWhitespaceAfter(elm.dom, 0);\n          });\n        }\n        return afterDeletePosOpt;\n      });\n    };\n    var isInlineElement = function (editor, element) {\n      return has$2(editor.schema.getTextInlineElements(), name(element));\n    };\n    var deleteElement$2 = function (editor, forward, elm, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var afterDeletePos = findCaretPosOutsideElmAfterDelete(forward, editor.getBody(), elm.dom);\n      var parentBlock = ancestor$3(elm, curry(isBlock, editor), eqRawNode(editor.getBody()));\n      var normalizedAfterDeletePos = deleteNormalized(elm, afterDeletePos, isInlineElement(editor, elm));\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        editor.selection.setCursorLocation();\n      } else {\n        parentBlock.bind(paddEmptyBlock).fold(function () {\n          if (moveCaret) {\n            setSelection$1(editor, forward, normalizedAfterDeletePos);\n          }\n        }, function (paddPos) {\n          if (moveCaret) {\n            setSelection$1(editor, forward, Optional.some(paddPos));\n          }\n        });\n      }\n    };\n\n    var isRootFromElement = function (root) {\n      return function (cur) {\n        return eq(root, cur);\n      };\n    };\n    var getTableCells = function (table) {\n      return descendants(table, 'td,th');\n    };\n    var getTableDetailsFromRange = function (rng, isRoot) {\n      var getTable = function (node) {\n        return getClosestTable(SugarElement.fromDom(node), isRoot);\n      };\n      var startTable = getTable(rng.startContainer);\n      var endTable = getTable(rng.endContainer);\n      var isStartInTable = startTable.isSome();\n      var isEndInTable = endTable.isSome();\n      var isSameTable = lift2(startTable, endTable, eq).getOr(false);\n      var isMultiTable = !isSameTable && isStartInTable && isEndInTable;\n      return {\n        startTable: startTable,\n        endTable: endTable,\n        isStartInTable: isStartInTable,\n        isEndInTable: isEndInTable,\n        isSameTable: isSameTable,\n        isMultiTable: isMultiTable\n      };\n    };\n\n    var tableCellRng = function (start, end) {\n      return {\n        start: start,\n        end: end\n      };\n    };\n    var tableSelection = function (rng, table, cells) {\n      return {\n        rng: rng,\n        table: table,\n        cells: cells\n      };\n    };\n    var deleteAction = Adt.generate([\n      {\n        singleCellTable: [\n          'rng',\n          'cell'\n        ]\n      },\n      { fullTable: ['table'] },\n      {\n        partialTable: [\n          'cells',\n          'outsideDetails'\n        ]\n      },\n      {\n        multiTable: [\n          'startTableCells',\n          'endTableCells',\n          'betweenRng'\n        ]\n      }\n    ]);\n    var getClosestCell$1 = function (container, isRoot) {\n      return closest$2(SugarElement.fromDom(container), 'td,th', isRoot);\n    };\n    var isExpandedCellRng = function (cellRng) {\n      return !eq(cellRng.start, cellRng.end);\n    };\n    var getTableFromCellRng = function (cellRng, isRoot) {\n      return getClosestTable(cellRng.start, isRoot).bind(function (startParentTable) {\n        return getClosestTable(cellRng.end, isRoot).bind(function (endParentTable) {\n          return someIf(eq(startParentTable, endParentTable), startParentTable);\n        });\n      });\n    };\n    var isSingleCellTable = function (cellRng, isRoot) {\n      return !isExpandedCellRng(cellRng) && getTableFromCellRng(cellRng, isRoot).exists(function (table) {\n        var rows = table.dom.rows;\n        return rows.length === 1 && rows[0].cells.length === 1;\n      });\n    };\n    var getCellRng = function (rng, isRoot) {\n      var startCell = getClosestCell$1(rng.startContainer, isRoot);\n      var endCell = getClosestCell$1(rng.endContainer, isRoot);\n      return lift2(startCell, endCell, tableCellRng);\n    };\n    var getCellRangeFromStartTable = function (isRoot) {\n      return function (startCell) {\n        return getClosestTable(startCell, isRoot).bind(function (table) {\n          return last$2(getTableCells(table)).map(function (endCell) {\n            return tableCellRng(startCell, endCell);\n          });\n        });\n      };\n    };\n    var getCellRangeFromEndTable = function (isRoot) {\n      return function (endCell) {\n        return getClosestTable(endCell, isRoot).bind(function (table) {\n          return head(getTableCells(table)).map(function (startCell) {\n            return tableCellRng(startCell, endCell);\n          });\n        });\n      };\n    };\n    var getTableSelectionFromCellRng = function (isRoot) {\n      return function (cellRng) {\n        return getTableFromCellRng(cellRng, isRoot).map(function (table) {\n          return tableSelection(cellRng, table, getTableCells(table));\n        });\n      };\n    };\n    var getTableSelections = function (cellRng, selectionDetails, rng, isRoot) {\n      if (rng.collapsed || !cellRng.forall(isExpandedCellRng)) {\n        return Optional.none();\n      } else if (selectionDetails.isSameTable) {\n        var sameTableSelection = cellRng.bind(getTableSelectionFromCellRng(isRoot));\n        return Optional.some({\n          start: sameTableSelection,\n          end: sameTableSelection\n        });\n      } else {\n        var startCell = getClosestCell$1(rng.startContainer, isRoot);\n        var endCell = getClosestCell$1(rng.endContainer, isRoot);\n        var startTableSelection = startCell.bind(getCellRangeFromStartTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));\n        var endTableSelection = endCell.bind(getCellRangeFromEndTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));\n        return Optional.some({\n          start: startTableSelection,\n          end: endTableSelection\n        });\n      }\n    };\n    var getCellIndex = function (cells, cell) {\n      return findIndex$2(cells, function (x) {\n        return eq(x, cell);\n      });\n    };\n    var getSelectedCells = function (tableSelection) {\n      return lift2(getCellIndex(tableSelection.cells, tableSelection.rng.start), getCellIndex(tableSelection.cells, tableSelection.rng.end), function (startIndex, endIndex) {\n        return tableSelection.cells.slice(startIndex, endIndex + 1);\n      });\n    };\n    var isSingleCellTableContentSelected = function (optCellRng, rng, isRoot) {\n      return optCellRng.exists(function (cellRng) {\n        return isSingleCellTable(cellRng, isRoot) && hasAllContentsSelected(cellRng.start, rng);\n      });\n    };\n    var unselectCells = function (rng, selectionDetails) {\n      var startTable = selectionDetails.startTable, endTable = selectionDetails.endTable;\n      var otherContentRng = rng.cloneRange();\n      startTable.each(function (table) {\n        return otherContentRng.setStartAfter(table.dom);\n      });\n      endTable.each(function (table) {\n        return otherContentRng.setEndBefore(table.dom);\n      });\n      return otherContentRng;\n    };\n    var handleSingleTable = function (cellRng, selectionDetails, rng, isRoot) {\n      return getTableSelections(cellRng, selectionDetails, rng, isRoot).bind(function (_a) {\n        var start = _a.start, end = _a.end;\n        return start.or(end);\n      }).bind(function (tableSelection) {\n        var isSameTable = selectionDetails.isSameTable;\n        var selectedCells = getSelectedCells(tableSelection).getOr([]);\n        if (isSameTable && tableSelection.cells.length === selectedCells.length) {\n          return Optional.some(deleteAction.fullTable(tableSelection.table));\n        } else if (selectedCells.length > 0) {\n          if (isSameTable) {\n            return Optional.some(deleteAction.partialTable(selectedCells, Optional.none()));\n          } else {\n            var otherContentRng = unselectCells(rng, selectionDetails);\n            return Optional.some(deleteAction.partialTable(selectedCells, Optional.some(__assign(__assign({}, selectionDetails), { rng: otherContentRng }))));\n          }\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var handleMultiTable = function (cellRng, selectionDetails, rng, isRoot) {\n      return getTableSelections(cellRng, selectionDetails, rng, isRoot).bind(function (_a) {\n        var start = _a.start, end = _a.end;\n        var startTableSelectedCells = start.bind(getSelectedCells).getOr([]);\n        var endTableSelectedCells = end.bind(getSelectedCells).getOr([]);\n        if (startTableSelectedCells.length > 0 && endTableSelectedCells.length > 0) {\n          var otherContentRng = unselectCells(rng, selectionDetails);\n          return Optional.some(deleteAction.multiTable(startTableSelectedCells, endTableSelectedCells, otherContentRng));\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var getActionFromRange = function (root, rng) {\n      var isRoot = isRootFromElement(root);\n      var optCellRng = getCellRng(rng, isRoot);\n      var selectionDetails = getTableDetailsFromRange(rng, isRoot);\n      if (isSingleCellTableContentSelected(optCellRng, rng, isRoot)) {\n        return optCellRng.map(function (cellRng) {\n          return deleteAction.singleCellTable(rng, cellRng.start);\n        });\n      } else if (selectionDetails.isMultiTable) {\n        return handleMultiTable(optCellRng, selectionDetails, rng, isRoot);\n      } else {\n        return handleSingleTable(optCellRng, selectionDetails, rng, isRoot);\n      }\n    };\n\n    var freefallRtl = function (root) {\n      var child = isComment$1(root) ? prevSibling(root) : lastChild(root);\n      return child.bind(freefallRtl).orThunk(function () {\n        return Optional.some(root);\n      });\n    };\n    var cleanCells = function (cells) {\n      return each$k(cells, function (cell) {\n        remove$6(cell, 'contenteditable');\n        fillWithPaddingBr(cell);\n      });\n    };\n    var getOutsideBlock = function (editor, container) {\n      return Optional.from(editor.dom.getParent(container, editor.dom.isBlock)).map(SugarElement.fromDom);\n    };\n    var handleEmptyBlock = function (editor, startInTable, emptyBlock) {\n      emptyBlock.each(function (block) {\n        if (startInTable) {\n          remove$7(block);\n        } else {\n          fillWithPaddingBr(block);\n          editor.selection.setCursorLocation(block.dom, 0);\n        }\n      });\n    };\n    var deleteContentInsideCell = function (editor, cell, rng, isFirstCellInSelection) {\n      var insideTableRng = rng.cloneRange();\n      if (isFirstCellInSelection) {\n        insideTableRng.setStart(rng.startContainer, rng.startOffset);\n        insideTableRng.setEndAfter(cell.dom.lastChild);\n      } else {\n        insideTableRng.setStartBefore(cell.dom.firstChild);\n        insideTableRng.setEnd(rng.endContainer, rng.endOffset);\n      }\n      deleteCellContents(editor, insideTableRng, cell, false);\n    };\n    var collapseAndRestoreCellSelection = function (editor) {\n      var selectedCells = getCellsFromEditor(editor);\n      var selectedNode = SugarElement.fromDom(editor.selection.getNode());\n      if (isTableCell$5(selectedNode.dom) && isEmpty$2(selectedNode)) {\n        editor.selection.setCursorLocation(selectedNode.dom, 0);\n      } else {\n        editor.selection.collapse(true);\n      }\n      if (selectedCells.length > 1 && exists(selectedCells, function (cell) {\n          return eq(cell, selectedNode);\n        })) {\n        set$1(selectedNode, 'data-mce-selected', '1');\n      }\n    };\n    var emptySingleTableCells = function (editor, cells, outsideDetails) {\n      var editorRng = editor.selection.getRng();\n      var cellsToClean = outsideDetails.bind(function (_a) {\n        var rng = _a.rng, isStartInTable = _a.isStartInTable;\n        var outsideBlock = getOutsideBlock(editor, isStartInTable ? rng.endContainer : rng.startContainer);\n        rng.deleteContents();\n        handleEmptyBlock(editor, isStartInTable, outsideBlock.filter(isEmpty$2));\n        var endPointCell = isStartInTable ? cells[0] : cells[cells.length - 1];\n        deleteContentInsideCell(editor, endPointCell, editorRng, isStartInTable);\n        if (!isEmpty$2(endPointCell)) {\n          return Optional.some(isStartInTable ? cells.slice(1) : cells.slice(0, -1));\n        } else {\n          return Optional.none();\n        }\n      }).getOr(cells);\n      cleanCells(cellsToClean);\n      collapseAndRestoreCellSelection(editor);\n      return true;\n    };\n    var emptyMultiTableCells = function (editor, startTableCells, endTableCells, betweenRng) {\n      var rng = editor.selection.getRng();\n      var startCell = startTableCells[0];\n      var endCell = endTableCells[endTableCells.length - 1];\n      deleteContentInsideCell(editor, startCell, rng, true);\n      deleteContentInsideCell(editor, endCell, rng, false);\n      var startTableCellsToClean = isEmpty$2(startCell) ? startTableCells : startTableCells.slice(1);\n      var endTableCellsToClean = isEmpty$2(endCell) ? endTableCells : endTableCells.slice(0, -1);\n      cleanCells(startTableCellsToClean.concat(endTableCellsToClean));\n      betweenRng.deleteContents();\n      collapseAndRestoreCellSelection(editor);\n      return true;\n    };\n    var deleteCellContents = function (editor, rng, cell, moveSelection) {\n      if (moveSelection === void 0) {\n        moveSelection = true;\n      }\n      rng.deleteContents();\n      var lastNode = freefallRtl(cell).getOr(cell);\n      var lastBlock = SugarElement.fromDom(editor.dom.getParent(lastNode.dom, editor.dom.isBlock));\n      if (isEmpty$2(lastBlock)) {\n        fillWithPaddingBr(lastBlock);\n        if (moveSelection) {\n          editor.selection.setCursorLocation(lastBlock.dom, 0);\n        }\n      }\n      if (!eq(cell, lastBlock)) {\n        var additionalCleanupNodes = is$1(parent(lastBlock), cell) ? [] : siblings(lastBlock);\n        each$k(additionalCleanupNodes.concat(children(cell)), function (node) {\n          if (!eq(node, lastBlock) && !contains$1(node, lastBlock) && isEmpty$2(node)) {\n            remove$7(node);\n          }\n        });\n      }\n      return true;\n    };\n    var deleteTableElement = function (editor, table) {\n      deleteElement$2(editor, false, table);\n      return true;\n    };\n    var deleteCellRange = function (editor, rootElm, rng) {\n      return getActionFromRange(rootElm, rng).map(function (action) {\n        return action.fold(curry(deleteCellContents, editor), curry(deleteTableElement, editor), curry(emptySingleTableCells, editor), curry(emptyMultiTableCells, editor));\n      });\n    };\n    var deleteCaptionRange = function (editor, caption) {\n      return emptyElement(editor, caption);\n    };\n    var deleteTableRange = function (editor, rootElm, rng, startElm) {\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCellRange(editor, rootElm, rng);\n      }, function (caption) {\n        return deleteCaptionRange(editor, caption);\n      }).getOr(false);\n    };\n    var deleteRange$2 = function (editor, startElm, selectedCells) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      return selectedCells.length !== 0 ? emptySingleTableCells(editor, selectedCells, Optional.none()) : deleteTableRange(editor, rootNode, rng, startElm);\n    };\n    var getParentCell = function (rootElm, elm) {\n      return find$3(parentsAndSelf(elm, rootElm), isTableCell$4);\n    };\n    var getParentCaption = function (rootElm, elm) {\n      return find$3(parentsAndSelf(elm, rootElm), isTag('caption'));\n    };\n    var deleteBetweenCells = function (editor, rootElm, forward, fromCell, from) {\n      return navigate(forward, editor.getBody(), from).bind(function (to) {\n        return getParentCell(rootElm, SugarElement.fromDom(to.getNode())).map(function (toCell) {\n          return eq(toCell, fromCell) === false;\n        });\n      });\n    };\n    var emptyElement = function (editor, elm) {\n      fillWithPaddingBr(elm);\n      editor.selection.setCursorLocation(elm.dom, 0);\n      return Optional.some(true);\n    };\n    var isDeleteOfLastCharPos = function (fromCaption, forward, from, to) {\n      return firstPositionIn(fromCaption.dom).bind(function (first) {\n        return lastPositionIn(fromCaption.dom).map(function (last) {\n          return forward ? from.isEqual(first) && to.isEqual(last) : from.isEqual(last) && to.isEqual(first);\n        });\n      }).getOr(true);\n    };\n    var emptyCaretCaption = function (editor, elm) {\n      return emptyElement(editor, elm);\n    };\n    var validateCaretCaption = function (rootElm, fromCaption, to) {\n      return getParentCaption(rootElm, SugarElement.fromDom(to.getNode())).map(function (toCaption) {\n        return eq(toCaption, fromCaption) === false;\n      });\n    };\n    var deleteCaretInsideCaption = function (editor, rootElm, forward, fromCaption, from) {\n      return navigate(forward, editor.getBody(), from).bind(function (to) {\n        return isDeleteOfLastCharPos(fromCaption, forward, from, to) ? emptyCaretCaption(editor, fromCaption) : validateCaretCaption(rootElm, fromCaption, to);\n      }).or(Optional.some(true));\n    };\n    var deleteCaretCells = function (editor, forward, rootElm, startElm) {\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return getParentCell(rootElm, startElm).bind(function (fromCell) {\n        return isEmpty$2(fromCell) ? emptyElement(editor, fromCell) : deleteBetweenCells(editor, rootElm, forward, fromCell, from);\n      }).getOr(false);\n    };\n    var deleteCaretCaption = function (editor, forward, rootElm, fromCaption) {\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return isEmpty$2(fromCaption) ? emptyElement(editor, fromCaption) : deleteCaretInsideCaption(editor, rootElm, forward, fromCaption, from);\n    };\n    var isNearTable = function (forward, pos) {\n      return forward ? isBeforeTable(pos) : isAfterTable(pos);\n    };\n    var isBeforeOrAfterTable = function (editor, forward) {\n      var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return isNearTable(forward, fromPos) || fromPosition(forward, editor.getBody(), fromPos).exists(function (pos) {\n        return isNearTable(forward, pos);\n      });\n    };\n    var deleteCaret$3 = function (editor, forward, startElm) {\n      var rootElm = SugarElement.fromDom(editor.getBody());\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCaretCells(editor, forward, rootElm, startElm) || isBeforeOrAfterTable(editor, forward);\n      }, function (fromCaption) {\n        return deleteCaretCaption(editor, forward, rootElm, fromCaption).getOr(false);\n      });\n    };\n    var backspaceDelete$9 = function (editor, forward) {\n      var startElm = SugarElement.fromDom(editor.selection.getStart(true));\n      var cells = getCellsFromEditor(editor);\n      return editor.selection.isCollapsed() && cells.length === 0 ? deleteCaret$3(editor, forward, startElm) : deleteRange$2(editor, startElm, cells);\n    };\n\n    var createRange = function (sc, so, ec, eo) {\n      var rng = document.createRange();\n      rng.setStart(sc, so);\n      rng.setEnd(ec, eo);\n      return rng;\n    };\n    var normalizeBlockSelectionRange = function (rng) {\n      var startPos = CaretPosition.fromRangeStart(rng);\n      var endPos = CaretPosition.fromRangeEnd(rng);\n      var rootNode = rng.commonAncestorContainer;\n      return fromPosition(false, rootNode, endPos).map(function (newEndPos) {\n        if (!isInSameBlock(startPos, endPos, rootNode) && isInSameBlock(startPos, newEndPos, rootNode)) {\n          return createRange(startPos.container(), startPos.offset(), newEndPos.container(), newEndPos.offset());\n        } else {\n          return rng;\n        }\n      }).getOr(rng);\n    };\n    var normalize = function (rng) {\n      return rng.collapsed ? rng : normalizeBlockSelectionRange(rng);\n    };\n\n    var hasOnlyOneChild$1 = function (node) {\n      return node.firstChild && node.firstChild === node.lastChild;\n    };\n    var isPaddingNode = function (node) {\n      return node.name === 'br' || node.value === nbsp;\n    };\n    var isPaddedEmptyBlock = function (schema, node) {\n      var blockElements = schema.getBlockElements();\n      return blockElements[node.name] && hasOnlyOneChild$1(node) && isPaddingNode(node.firstChild);\n    };\n    var isEmptyFragmentElement = function (schema, node) {\n      var nonEmptyElements = schema.getNonEmptyElements();\n      return node && (node.isEmpty(nonEmptyElements) || isPaddedEmptyBlock(schema, node));\n    };\n    var isListFragment = function (schema, fragment) {\n      var firstChild = fragment.firstChild;\n      var lastChild = fragment.lastChild;\n      if (firstChild && firstChild.name === 'meta') {\n        firstChild = firstChild.next;\n      }\n      if (lastChild && lastChild.attr('id') === 'mce_marker') {\n        lastChild = lastChild.prev;\n      }\n      if (isEmptyFragmentElement(schema, lastChild)) {\n        lastChild = lastChild.prev;\n      }\n      if (!firstChild || firstChild !== lastChild) {\n        return false;\n      }\n      return firstChild.name === 'ul' || firstChild.name === 'ol';\n    };\n    var cleanupDomFragment = function (domFragment) {\n      var firstChild = domFragment.firstChild;\n      var lastChild = domFragment.lastChild;\n      if (firstChild && firstChild.nodeName === 'META') {\n        firstChild.parentNode.removeChild(firstChild);\n      }\n      if (lastChild && lastChild.id === 'mce_marker') {\n        lastChild.parentNode.removeChild(lastChild);\n      }\n      return domFragment;\n    };\n    var toDomFragment = function (dom, serializer, fragment) {\n      var html = serializer.serialize(fragment);\n      var domFragment = dom.createFragment(html);\n      return cleanupDomFragment(domFragment);\n    };\n    var listItems = function (elm) {\n      return filter$4(elm.childNodes, function (child) {\n        return child.nodeName === 'LI';\n      });\n    };\n    var isPadding = function (node) {\n      return node.data === nbsp || isBr$5(node);\n    };\n    var isListItemPadded = function (node) {\n      return node && node.firstChild && node.firstChild === node.lastChild && isPadding(node.firstChild);\n    };\n    var isEmptyOrPadded = function (elm) {\n      return !elm.firstChild || isListItemPadded(elm);\n    };\n    var trimListItems = function (elms) {\n      return elms.length > 0 && isEmptyOrPadded(elms[elms.length - 1]) ? elms.slice(0, -1) : elms;\n    };\n    var getParentLi = function (dom, node) {\n      var parentBlock = dom.getParent(node, dom.isBlock);\n      return parentBlock && parentBlock.nodeName === 'LI' ? parentBlock : null;\n    };\n    var isParentBlockLi = function (dom, node) {\n      return !!getParentLi(dom, node);\n    };\n    var getSplit = function (parentNode, rng) {\n      var beforeRng = rng.cloneRange();\n      var afterRng = rng.cloneRange();\n      beforeRng.setStartBefore(parentNode);\n      afterRng.setEndAfter(parentNode);\n      return [\n        beforeRng.cloneContents(),\n        afterRng.cloneContents()\n      ];\n    };\n    var findFirstIn = function (node, rootNode) {\n      var caretPos = CaretPosition.before(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.next(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var findLastOf = function (node, rootNode) {\n      var caretPos = CaretPosition.after(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.prev(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var insertMiddle = function (target, elms, rootNode, rng) {\n      var parts = getSplit(target, rng);\n      var parentElm = target.parentNode;\n      parentElm.insertBefore(parts[0], target);\n      Tools.each(elms, function (li) {\n        parentElm.insertBefore(li, target);\n      });\n      parentElm.insertBefore(parts[1], target);\n      parentElm.removeChild(target);\n      return findLastOf(elms[elms.length - 1], rootNode);\n    };\n    var insertBefore$1 = function (target, elms, rootNode) {\n      var parentElm = target.parentNode;\n      Tools.each(elms, function (elm) {\n        parentElm.insertBefore(elm, target);\n      });\n      return findFirstIn(target, rootNode);\n    };\n    var insertAfter$1 = function (target, elms, rootNode, dom) {\n      dom.insertAfter(elms.reverse(), target);\n      return findLastOf(elms[0], rootNode);\n    };\n    var insertAtCaret$1 = function (serializer, dom, rng, fragment) {\n      var domFragment = toDomFragment(dom, serializer, fragment);\n      var liTarget = getParentLi(dom, rng.startContainer);\n      var liElms = trimListItems(listItems(domFragment.firstChild));\n      var BEGINNING = 1, END = 2;\n      var rootNode = dom.getRoot();\n      var isAt = function (location) {\n        var caretPos = CaretPosition.fromRangeStart(rng);\n        var caretWalker = CaretWalker(dom.getRoot());\n        var newPos = location === BEGINNING ? caretWalker.prev(caretPos) : caretWalker.next(caretPos);\n        return newPos ? getParentLi(dom, newPos.getNode()) !== liTarget : true;\n      };\n      if (isAt(BEGINNING)) {\n        return insertBefore$1(liTarget, liElms, rootNode);\n      } else if (isAt(END)) {\n        return insertAfter$1(liTarget, liElms, rootNode, dom);\n      }\n      return insertMiddle(liTarget, liElms, rootNode, rng);\n    };\n\n    var trimOrPadLeftRight = function (dom, rng, html) {\n      var root = SugarElement.fromDom(dom.getRoot());\n      if (needsToBeNbspLeft(root, CaretPosition.fromRangeStart(rng))) {\n        html = html.replace(/^ /, '&nbsp;');\n      } else {\n        html = html.replace(/^&nbsp;/, ' ');\n      }\n      if (needsToBeNbspRight(root, CaretPosition.fromRangeEnd(rng))) {\n        html = html.replace(/(&nbsp;| )(<br( \\/)>)?$/, '&nbsp;');\n      } else {\n        html = html.replace(/&nbsp;(<br( \\/)?>)?$/, ' ');\n      }\n      return html;\n    };\n\n    var isTableCell$1 = isTableCell$5;\n    var isTableCellContentSelected = function (dom, rng, cell) {\n      if (cell !== null) {\n        var endCell = dom.getParent(rng.endContainer, isTableCell$1);\n        return cell === endCell && hasAllContentsSelected(SugarElement.fromDom(cell), rng);\n      } else {\n        return false;\n      }\n    };\n    var validInsertion = function (editor, value, parentNode) {\n      if (parentNode.getAttribute('data-mce-bogus') === 'all') {\n        parentNode.parentNode.insertBefore(editor.dom.createFragment(value), parentNode);\n      } else {\n        var node = parentNode.firstChild;\n        var node2 = parentNode.lastChild;\n        if (!node || node === node2 && node.nodeName === 'BR') {\n          editor.dom.setHTML(parentNode, value);\n        } else {\n          editor.selection.setContent(value);\n        }\n      }\n    };\n    var trimBrsFromTableCell = function (dom, elm) {\n      Optional.from(dom.getParent(elm, 'td,th')).map(SugarElement.fromDom).each(trimBlockTrailingBr);\n    };\n    var reduceInlineTextElements = function (editor, merge) {\n      var textInlineElements = editor.schema.getTextInlineElements();\n      var dom = editor.dom;\n      if (merge) {\n        var root_1 = editor.getBody();\n        var elementUtils_1 = ElementUtils(dom);\n        Tools.each(dom.select('*[data-mce-fragment]'), function (node) {\n          var isInline = isNonNullable(textInlineElements[node.nodeName.toLowerCase()]);\n          if (isInline && hasInheritableStyles(dom, node)) {\n            for (var parentNode = node.parentNode; isNonNullable(parentNode) && parentNode !== root_1; parentNode = parentNode.parentNode) {\n              var styleConflict = hasStyleConflict(dom, node, parentNode);\n              if (styleConflict) {\n                break;\n              }\n              if (elementUtils_1.compare(parentNode, node)) {\n                dom.remove(node, true);\n                break;\n              }\n            }\n          }\n        });\n      }\n    };\n    var markFragmentElements = function (fragment) {\n      var node = fragment;\n      while (node = node.walk()) {\n        if (node.type === 1) {\n          node.attr('data-mce-fragment', '1');\n        }\n      }\n    };\n    var unmarkFragmentElements = function (elm) {\n      Tools.each(elm.getElementsByTagName('*'), function (elm) {\n        elm.removeAttribute('data-mce-fragment');\n      });\n    };\n    var isPartOfFragment = function (node) {\n      return !!node.getAttribute('data-mce-fragment');\n    };\n    var canHaveChildren = function (editor, node) {\n      return node && !editor.schema.getShortEndedElements()[node.nodeName];\n    };\n    var moveSelectionToMarker = function (editor, marker) {\n      var nextRng;\n      var dom = editor.dom;\n      var selection = editor.selection;\n      if (!marker) {\n        return;\n      }\n      selection.scrollIntoView(marker);\n      var parentEditableElm = getContentEditableRoot$1(editor.getBody(), marker);\n      if (dom.getContentEditable(parentEditableElm) === 'false') {\n        dom.remove(marker);\n        selection.select(parentEditableElm);\n        return;\n      }\n      var rng = dom.createRng();\n      var node = marker.previousSibling;\n      if (isText$7(node)) {\n        rng.setStart(node, node.nodeValue.length);\n        if (!Env.ie) {\n          var node2 = marker.nextSibling;\n          if (isText$7(node2)) {\n            node.appendData(node2.data);\n            node2.parentNode.removeChild(node2);\n          }\n        }\n      } else {\n        rng.setStartBefore(marker);\n        rng.setEndBefore(marker);\n      }\n      var findNextCaretRng = function (rng) {\n        var caretPos = CaretPosition.fromRangeStart(rng);\n        var caretWalker = CaretWalker(editor.getBody());\n        caretPos = caretWalker.next(caretPos);\n        if (caretPos) {\n          return caretPos.toRange();\n        }\n      };\n      var parentBlock = dom.getParent(marker, dom.isBlock);\n      dom.remove(marker);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        editor.$(parentBlock).empty();\n        rng.setStart(parentBlock, 0);\n        rng.setEnd(parentBlock, 0);\n        if (!isTableCell$1(parentBlock) && !isPartOfFragment(parentBlock) && (nextRng = findNextCaretRng(rng))) {\n          rng = nextRng;\n          dom.remove(parentBlock);\n        } else {\n          dom.add(parentBlock, dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      selection.setRng(rng);\n    };\n    var deleteSelectedContent = function (editor) {\n      var dom = editor.dom;\n      var rng = normalize(editor.selection.getRng());\n      editor.selection.setRng(rng);\n      var startCell = dom.getParent(rng.startContainer, isTableCell$1);\n      if (isTableCellContentSelected(dom, rng, startCell)) {\n        deleteCellContents(editor, rng, SugarElement.fromDom(startCell));\n      } else {\n        editor.getDoc().execCommand('Delete', false, null);\n      }\n    };\n    var insertHtmlAtCaret = function (editor, value, details) {\n      var parentNode;\n      var rng, node;\n      var selection = editor.selection;\n      var dom = editor.dom;\n      if (/^ | $/.test(value)) {\n        value = trimOrPadLeftRight(dom, selection.getRng(), value);\n      }\n      var parser = editor.parser;\n      var merge = details.merge;\n      var serializer = HtmlSerializer({ validate: shouldValidate(editor) }, editor.schema);\n      var bookmarkHtml = '<span id=\"mce_marker\" data-mce-type=\"bookmark\">&#xFEFF;</span>';\n      var args = editor.fire('BeforeSetContent', {\n        content: value,\n        format: 'html',\n        selection: true,\n        paste: details.paste\n      });\n      if (args.isDefaultPrevented()) {\n        editor.fire('SetContent', {\n          content: args.content,\n          format: 'html',\n          selection: true,\n          paste: details.paste\n        });\n        return;\n      }\n      value = args.content;\n      if (value.indexOf('{$caret}') === -1) {\n        value += '{$caret}';\n      }\n      value = value.replace(/\\{\\$caret\\}/, bookmarkHtml);\n      rng = selection.getRng();\n      var caretElement = rng.startContainer || (rng.parentElement ? rng.parentElement() : null);\n      var body = editor.getBody();\n      if (caretElement === body && selection.isCollapsed()) {\n        if (dom.isBlock(body.firstChild) && canHaveChildren(editor, body.firstChild) && dom.isEmpty(body.firstChild)) {\n          rng = dom.createRng();\n          rng.setStart(body.firstChild, 0);\n          rng.setEnd(body.firstChild, 0);\n          selection.setRng(rng);\n        }\n      }\n      if (!selection.isCollapsed()) {\n        deleteSelectedContent(editor);\n      }\n      parentNode = selection.getNode();\n      var parserArgs = {\n        context: parentNode.nodeName.toLowerCase(),\n        data: details.data,\n        insert: true\n      };\n      var fragment = parser.parse(value, parserArgs);\n      if (details.paste === true && isListFragment(editor.schema, fragment) && isParentBlockLi(dom, parentNode)) {\n        rng = insertAtCaret$1(serializer, dom, selection.getRng(), fragment);\n        selection.setRng(rng);\n        editor.fire('SetContent', args);\n        return;\n      }\n      markFragmentElements(fragment);\n      node = fragment.lastChild;\n      if (node.attr('id') === 'mce_marker') {\n        var marker = node;\n        for (node = node.prev; node; node = node.walk(true)) {\n          if (node.type === 3 || !dom.isBlock(node.name)) {\n            if (editor.schema.isValidChild(node.parent.name, 'span')) {\n              node.parent.insert(marker, node, node.name === 'br');\n            }\n            break;\n          }\n        }\n      }\n      editor._selectionOverrides.showBlockCaretContainer(parentNode);\n      if (!parserArgs.invalid) {\n        value = serializer.serialize(fragment);\n        validInsertion(editor, value, parentNode);\n      } else {\n        editor.selection.setContent(bookmarkHtml);\n        parentNode = selection.getNode();\n        var rootNode = editor.getBody();\n        if (parentNode.nodeType === 9) {\n          parentNode = node = rootNode;\n        } else {\n          node = parentNode;\n        }\n        while (node !== rootNode) {\n          parentNode = node;\n          node = node.parentNode;\n        }\n        value = parentNode === rootNode ? rootNode.innerHTML : dom.getOuterHTML(parentNode);\n        value = serializer.serialize(parser.parse(value.replace(/<span (id=\"mce_marker\"|id=mce_marker).+?<\\/span>/i, function () {\n          return serializer.serialize(fragment);\n        })));\n        if (parentNode === rootNode) {\n          dom.setHTML(rootNode, value);\n        } else {\n          dom.setOuterHTML(parentNode, value);\n        }\n      }\n      reduceInlineTextElements(editor, merge);\n      moveSelectionToMarker(editor, dom.get('mce_marker'));\n      unmarkFragmentElements(editor.getBody());\n      trimBrsFromTableCell(dom, selection.getStart());\n      editor.fire('SetContent', args);\n      editor.addVisual();\n    };\n\n    var traverse = function (node, fn) {\n      fn(node);\n      if (node.firstChild) {\n        traverse(node.firstChild, fn);\n      }\n      if (node.next) {\n        traverse(node.next, fn);\n      }\n    };\n    var findMatchingNodes = function (nodeFilters, attributeFilters, node) {\n      var nodeMatches = {};\n      var attrMatches = {};\n      var matches = [];\n      if (node.firstChild) {\n        traverse(node.firstChild, function (node) {\n          each$k(nodeFilters, function (filter) {\n            if (filter.name === node.name) {\n              if (nodeMatches[filter.name]) {\n                nodeMatches[filter.name].nodes.push(node);\n              } else {\n                nodeMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n          each$k(attributeFilters, function (filter) {\n            if (typeof node.attr(filter.name) === 'string') {\n              if (attrMatches[filter.name]) {\n                attrMatches[filter.name].nodes.push(node);\n              } else {\n                attrMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n        });\n      }\n      for (var name_1 in nodeMatches) {\n        if (has$2(nodeMatches, name_1)) {\n          matches.push(nodeMatches[name_1]);\n        }\n      }\n      for (var name_2 in attrMatches) {\n        if (has$2(attrMatches, name_2)) {\n          matches.push(attrMatches[name_2]);\n        }\n      }\n      return matches;\n    };\n    var filter$1 = function (nodeFilters, attributeFilters, node) {\n      var matches = findMatchingNodes(nodeFilters, attributeFilters, node);\n      each$k(matches, function (match) {\n        each$k(match.filter.callbacks, function (callback) {\n          callback(match.nodes, match.filter.name, {});\n        });\n      });\n    };\n\n    var defaultFormat$1 = 'html';\n    var isTreeNode = function (content) {\n      return content instanceof AstNode;\n    };\n    var moveSelection = function (editor) {\n      if (hasFocus(editor)) {\n        firstPositionIn(editor.getBody()).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = isTable$3(node) ? firstPositionIn(node).getOr(pos) : pos;\n          editor.selection.setRng(caretPos.toRange());\n        });\n      }\n    };\n    var setEditorHtml = function (editor, html, noSelection) {\n      editor.dom.setHTML(editor.getBody(), html);\n      if (noSelection !== true) {\n        moveSelection(editor);\n      }\n    };\n    var setContentString = function (editor, body, content, args) {\n      if (content.length === 0 || /^\\s+$/.test(content)) {\n        var padd = '<br data-mce-bogus=\"1\">';\n        if (body.nodeName === 'TABLE') {\n          content = '<tr><td>' + padd + '</td></tr>';\n        } else if (/^(UL|OL)$/.test(body.nodeName)) {\n          content = '<li>' + padd + '</li>';\n        }\n        var forcedRootBlockName = getForcedRootBlock(editor);\n        if (forcedRootBlockName && editor.schema.isValidChild(body.nodeName.toLowerCase(), forcedRootBlockName.toLowerCase())) {\n          content = padd;\n          content = editor.dom.createHTML(forcedRootBlockName, getForcedRootBlockAttrs(editor), content);\n        } else if (!content) {\n          content = '<br data-mce-bogus=\"1\">';\n        }\n        setEditorHtml(editor, content, args.no_selection);\n        editor.fire('SetContent', args);\n      } else {\n        if (args.format !== 'raw') {\n          content = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(editor.parser.parse(content, {\n            isRootContent: true,\n            insert: true\n          }));\n        }\n        args.content = isWsPreserveElement(SugarElement.fromDom(body)) ? content : Tools.trim(content);\n        setEditorHtml(editor, args.content, args.no_selection);\n        if (!args.no_events) {\n          editor.fire('SetContent', args);\n        }\n      }\n      return args.content;\n    };\n    var setContentTree = function (editor, body, content, args) {\n      filter$1(editor.parser.getNodeFilters(), editor.parser.getAttributeFilters(), content);\n      var html = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(content);\n      args.content = isWsPreserveElement(SugarElement.fromDom(body)) ? html : Tools.trim(html);\n      setEditorHtml(editor, args.content, args.no_selection);\n      if (!args.no_events) {\n        editor.fire('SetContent', args);\n      }\n      return content;\n    };\n    var setupArgs$2 = function (args, content) {\n      return __assign(__assign({ format: defaultFormat$1 }, args), {\n        set: true,\n        content: isTreeNode(content) ? '' : content\n      });\n    };\n    var setContentInternal = function (editor, content, args) {\n      var defaultedArgs = setupArgs$2(args, content);\n      var updatedArgs = args.no_events ? defaultedArgs : editor.fire('BeforeSetContent', defaultedArgs);\n      if (!isTreeNode(content)) {\n        content = updatedArgs.content;\n      }\n      return Optional.from(editor.getBody()).fold(constant(content), function (body) {\n        return isTreeNode(content) ? setContentTree(editor, body, content, updatedArgs) : setContentString(editor, body, content, updatedArgs);\n      });\n    };\n\n    var sibling = function (scope, predicate) {\n      return sibling$2(scope, predicate).isSome();\n    };\n\n    var ensureIsRoot = function (isRoot) {\n      return isFunction(isRoot) ? isRoot : never;\n    };\n    var ancestor = function (scope, transform, isRoot) {\n      var element = scope.dom;\n      var stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$1 = function (scope, transform, isRoot) {\n      var current = transform(scope);\n      var stop = ensureIsRoot(isRoot);\n      return current.orThunk(function () {\n        return stop(scope) ? Optional.none() : ancestor(scope, transform, stop);\n      });\n    };\n\n    var isEq$3 = isEq$5;\n    var matchesUnInheritedFormatSelector = function (ed, node, name) {\n      var formatList = ed.formatter.get(name);\n      if (formatList) {\n        for (var i = 0; i < formatList.length; i++) {\n          var format = formatList[i];\n          if (isSelectorFormat(format) && format.inherit === false && ed.dom.is(node, format.selector)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var matchParents = function (editor, node, name, vars, similar) {\n      var root = editor.dom.getRoot();\n      if (node === root) {\n        return false;\n      }\n      node = editor.dom.getParent(node, function (node) {\n        if (matchesUnInheritedFormatSelector(editor, node, name)) {\n          return true;\n        }\n        return node.parentNode === root || !!matchNode(editor, node, name, vars, true);\n      });\n      return !!matchNode(editor, node, name, vars, similar);\n    };\n    var matchName$1 = function (dom, node, format) {\n      if (isEq$3(node, format.inline)) {\n        return true;\n      }\n      if (isEq$3(node, format.block)) {\n        return true;\n      }\n      if (format.selector) {\n        return node.nodeType === 1 && dom.is(node, format.selector);\n      }\n    };\n    var matchItems = function (dom, node, format, itemName, similar, vars) {\n      var items = format[itemName];\n      if (isFunction(format.onmatch)) {\n        return format.onmatch(node, format, itemName);\n      }\n      if (items) {\n        if (isUndefined(items.length)) {\n          for (var key in items) {\n            if (has$2(items, key)) {\n              var value = itemName === 'attributes' ? dom.getAttrib(node, key) : getStyle(dom, node, key);\n              var expectedValue = replaceVars(items[key], vars);\n              var isEmptyValue = isNullable(value) || isEmpty$3(value);\n              if (isEmptyValue && isNullable(expectedValue)) {\n                continue;\n              }\n              if (similar && isEmptyValue && !format.exact) {\n                return false;\n              }\n              if ((!similar || format.exact) && !isEq$3(value, normalizeStyleValue(dom, expectedValue, key))) {\n                return false;\n              }\n            }\n          }\n        } else {\n          for (var i = 0; i < items.length; i++) {\n            if (itemName === 'attributes' ? dom.getAttrib(node, items[i]) : getStyle(dom, node, items[i])) {\n              return true;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    var matchNode = function (ed, node, name, vars, similar) {\n      var formatList = ed.formatter.get(name);\n      var dom = ed.dom;\n      if (formatList && node) {\n        for (var i = 0; i < formatList.length; i++) {\n          var format = formatList[i];\n          if (matchName$1(ed.dom, node, format) && matchItems(dom, node, format, 'attributes', similar, vars) && matchItems(dom, node, format, 'styles', similar, vars)) {\n            var classes = format.classes;\n            if (classes) {\n              for (var x = 0; x < classes.length; x++) {\n                if (!ed.dom.hasClass(node, replaceVars(classes[x], vars))) {\n                  return;\n                }\n              }\n            }\n            return format;\n          }\n        }\n      }\n    };\n    var match$2 = function (editor, name, vars, node, similar) {\n      if (node) {\n        return matchParents(editor, node, name, vars, similar);\n      }\n      node = editor.selection.getNode();\n      if (matchParents(editor, node, name, vars, similar)) {\n        return true;\n      }\n      var startNode = editor.selection.getStart();\n      if (startNode !== node) {\n        if (matchParents(editor, startNode, name, vars, similar)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var matchAll = function (editor, names, vars) {\n      var matchedFormatNames = [];\n      var checkedMap = {};\n      var startElement = editor.selection.getStart();\n      editor.dom.getParent(startElement, function (node) {\n        for (var i = 0; i < names.length; i++) {\n          var name_1 = names[i];\n          if (!checkedMap[name_1] && matchNode(editor, node, name_1, vars)) {\n            checkedMap[name_1] = true;\n            matchedFormatNames.push(name_1);\n          }\n        }\n      }, editor.dom.getRoot());\n      return matchedFormatNames;\n    };\n    var closest = function (editor, names) {\n      var isRoot = function (elm) {\n        return eq(elm, SugarElement.fromDom(editor.getBody()));\n      };\n      var match = function (elm, name) {\n        return matchNode(editor, elm.dom, name) ? Optional.some(name) : Optional.none();\n      };\n      return Optional.from(editor.selection.getStart(true)).bind(function (rawElm) {\n        return closest$1(SugarElement.fromDom(rawElm), function (elm) {\n          return findMap(names, function (name) {\n            return match(elm, name);\n          });\n        }, isRoot);\n      }).getOrNull();\n    };\n    var canApply = function (editor, name) {\n      var formatList = editor.formatter.get(name);\n      var dom = editor.dom;\n      if (formatList) {\n        var startNode = editor.selection.getStart();\n        var parents = getParents$2(dom, startNode);\n        for (var x = formatList.length - 1; x >= 0; x--) {\n          var format = formatList[x];\n          if (!isSelectorFormat(format) || isNonNullable(format.defaultBlock)) {\n            return true;\n          }\n          for (var i = parents.length - 1; i >= 0; i--) {\n            if (dom.is(parents[i], format.selector)) {\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    };\n    var matchAllOnNode = function (editor, node, formatNames) {\n      return foldl(formatNames, function (acc, name) {\n        var matchSimilar = isVariableFormatName(editor, name);\n        if (editor.formatter.matchNode(node, name, {}, matchSimilar)) {\n          return acc.concat([name]);\n        } else {\n          return acc;\n        }\n      }, []);\n    };\n\n    var ZWSP = ZWSP$1, CARET_ID = '_mce_caret';\n    var importNode = function (ownerDocument, node) {\n      return ownerDocument.importNode(node, true);\n    };\n    var getEmptyCaretContainers = function (node) {\n      var nodes = [];\n      while (node) {\n        if (node.nodeType === 3 && node.nodeValue !== ZWSP || node.childNodes.length > 1) {\n          return [];\n        }\n        if (node.nodeType === 1) {\n          nodes.push(node);\n        }\n        node = node.firstChild;\n      }\n      return nodes;\n    };\n    var isCaretContainerEmpty = function (node) {\n      return getEmptyCaretContainers(node).length > 0;\n    };\n    var findFirstTextNode = function (node) {\n      if (node) {\n        var walker = new DomTreeWalker(node, node);\n        for (node = walker.current(); node; node = walker.next()) {\n          if (isText$7(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var createCaretContainer = function (fill) {\n      var caretContainer = SugarElement.fromTag('span');\n      setAll$1(caretContainer, {\n        'id': CARET_ID,\n        'data-mce-bogus': '1',\n        'data-mce-type': 'format-caret'\n      });\n      if (fill) {\n        append$1(caretContainer, SugarElement.fromText(ZWSP));\n      }\n      return caretContainer;\n    };\n    var trimZwspFromCaretContainer = function (caretContainerNode) {\n      var textNode = findFirstTextNode(caretContainerNode);\n      if (textNode && textNode.nodeValue.charAt(0) === ZWSP) {\n        textNode.deleteData(0, 1);\n      }\n      return textNode;\n    };\n    var removeCaretContainerNode = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (isCaretContainerEmpty(node)) {\n        deleteElement$2(editor, false, SugarElement.fromDom(node), moveCaret);\n      } else {\n        var rng = selection.getRng();\n        var block = dom.getParent(node, dom.isBlock);\n        var startContainer = rng.startContainer;\n        var startOffset = rng.startOffset;\n        var endContainer = rng.endContainer;\n        var endOffset = rng.endOffset;\n        var textNode = trimZwspFromCaretContainer(node);\n        dom.remove(node, true);\n        if (startContainer === textNode && startOffset > 0) {\n          rng.setStart(textNode, startOffset - 1);\n        }\n        if (endContainer === textNode && endOffset > 0) {\n          rng.setEnd(textNode, endOffset - 1);\n        }\n        if (block && dom.isEmpty(block)) {\n          fillWithPaddingBr(SugarElement.fromDom(block));\n        }\n        selection.setRng(rng);\n      }\n    };\n    var removeCaretContainer = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (!node) {\n        node = getParentCaretContainer(editor.getBody(), selection.getStart());\n        if (!node) {\n          while (node = dom.get(CARET_ID)) {\n            removeCaretContainerNode(editor, node, false);\n          }\n        }\n      } else {\n        removeCaretContainerNode(editor, node, moveCaret);\n      }\n    };\n    var insertCaretContainerNode = function (editor, caretContainer, formatNode) {\n      var dom = editor.dom, block = dom.getParent(formatNode, curry(isTextBlock$1, editor));\n      if (block && dom.isEmpty(block)) {\n        formatNode.parentNode.replaceChild(caretContainer, formatNode);\n      } else {\n        removeTrailingBr(SugarElement.fromDom(formatNode));\n        if (dom.isEmpty(formatNode)) {\n          formatNode.parentNode.replaceChild(caretContainer, formatNode);\n        } else {\n          dom.insertAfter(caretContainer, formatNode);\n        }\n      }\n    };\n    var appendNode = function (parentNode, node) {\n      parentNode.appendChild(node);\n      return node;\n    };\n    var insertFormatNodesIntoCaretContainer = function (formatNodes, caretContainer) {\n      var innerMostFormatNode = foldr(formatNodes, function (parentNode, formatNode) {\n        return appendNode(parentNode, formatNode.cloneNode(false));\n      }, caretContainer);\n      return appendNode(innerMostFormatNode, innerMostFormatNode.ownerDocument.createTextNode(ZWSP));\n    };\n    var cleanFormatNode = function (editor, caretContainer, formatNode, name, vars, similar) {\n      var formatter = editor.formatter;\n      var dom = editor.dom;\n      var validFormats = filter$4(keys(formatter.get()), function (formatName) {\n        return formatName !== name && !contains$2(formatName, 'removeformat');\n      });\n      var matchedFormats = matchAllOnNode(editor, formatNode, validFormats);\n      var uniqueFormats = filter$4(matchedFormats, function (fmtName) {\n        return !areSimilarFormats(editor, fmtName, name);\n      });\n      if (uniqueFormats.length > 0) {\n        var clonedFormatNode = formatNode.cloneNode(false);\n        dom.add(caretContainer, clonedFormatNode);\n        formatter.remove(name, vars, clonedFormatNode, similar);\n        dom.remove(clonedFormatNode);\n        return Optional.some(clonedFormatNode);\n      } else {\n        return Optional.none();\n      }\n    };\n    var applyCaretFormat = function (editor, name, vars) {\n      var caretContainer, textNode;\n      var selection = editor.selection;\n      var selectionRng = selection.getRng();\n      var offset = selectionRng.startOffset;\n      var container = selectionRng.startContainer;\n      var text = container.nodeValue;\n      caretContainer = getParentCaretContainer(editor.getBody(), selection.getStart());\n      if (caretContainer) {\n        textNode = findFirstTextNode(caretContainer);\n      }\n      var wordcharRegex = /[^\\s\\u00a0\\u00ad\\u200b\\ufeff]/;\n      if (text && offset > 0 && offset < text.length && wordcharRegex.test(text.charAt(offset)) && wordcharRegex.test(text.charAt(offset - 1))) {\n        var bookmark = selection.getBookmark();\n        selectionRng.collapse(true);\n        var rng = expandRng(editor, selectionRng, editor.formatter.get(name));\n        rng = split(rng);\n        editor.formatter.apply(name, vars, rng);\n        selection.moveToBookmark(bookmark);\n      } else {\n        if (!caretContainer || textNode.nodeValue !== ZWSP) {\n          caretContainer = importNode(editor.getDoc(), createCaretContainer(true).dom);\n          textNode = caretContainer.firstChild;\n          selectionRng.insertNode(caretContainer);\n          offset = 1;\n          editor.formatter.apply(name, vars, caretContainer);\n        } else {\n          editor.formatter.apply(name, vars, caretContainer);\n        }\n        selection.setCursorLocation(textNode, offset);\n      }\n    };\n    var removeCaretFormat = function (editor, name, vars, similar) {\n      var dom = editor.dom;\n      var selection = editor.selection;\n      var hasContentAfter, node, formatNode;\n      var parents = [];\n      var rng = selection.getRng();\n      var container = rng.startContainer;\n      var offset = rng.startOffset;\n      node = container;\n      if (container.nodeType === 3) {\n        if (offset !== container.nodeValue.length) {\n          hasContentAfter = true;\n        }\n        node = node.parentNode;\n      }\n      while (node) {\n        if (matchNode(editor, node, name, vars, similar)) {\n          formatNode = node;\n          break;\n        }\n        if (node.nextSibling) {\n          hasContentAfter = true;\n        }\n        parents.push(node);\n        node = node.parentNode;\n      }\n      if (!formatNode) {\n        return;\n      }\n      if (hasContentAfter) {\n        var bookmark = selection.getBookmark();\n        rng.collapse(true);\n        var expandedRng = expandRng(editor, rng, editor.formatter.get(name), true);\n        expandedRng = split(expandedRng);\n        editor.formatter.remove(name, vars, expandedRng, similar);\n        selection.moveToBookmark(bookmark);\n      } else {\n        var caretContainer = getParentCaretContainer(editor.getBody(), formatNode);\n        var newCaretContainer = createCaretContainer(false).dom;\n        insertCaretContainerNode(editor, newCaretContainer, caretContainer !== null ? caretContainer : formatNode);\n        var cleanedFormatNode = cleanFormatNode(editor, newCaretContainer, formatNode, name, vars, similar);\n        var caretTextNode = insertFormatNodesIntoCaretContainer(parents.concat(cleanedFormatNode.toArray()), newCaretContainer);\n        removeCaretContainerNode(editor, caretContainer, false);\n        selection.setCursorLocation(caretTextNode, 1);\n        if (dom.isEmpty(formatNode)) {\n          dom.remove(formatNode);\n        }\n      }\n    };\n    var disableCaretContainer = function (editor, keyCode) {\n      var selection = editor.selection, body = editor.getBody();\n      removeCaretContainer(editor, null, false);\n      if ((keyCode === 8 || keyCode === 46) && selection.isCollapsed() && selection.getStart().innerHTML === ZWSP) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n      if (keyCode === 37 || keyCode === 39) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n    };\n    var setup$k = function (editor) {\n      editor.on('mouseup keydown', function (e) {\n        disableCaretContainer(editor, e.keyCode);\n      });\n    };\n    var replaceWithCaretFormat = function (targetNode, formatNodes) {\n      var caretContainer = createCaretContainer(false);\n      var innerMost = insertFormatNodesIntoCaretContainer(formatNodes, caretContainer.dom);\n      before$4(SugarElement.fromDom(targetNode), caretContainer);\n      remove$7(SugarElement.fromDom(targetNode));\n      return CaretPosition(innerMost, 0);\n    };\n    var isFormatElement = function (editor, element) {\n      var inlineElements = editor.schema.getTextInlineElements();\n      return has$2(inlineElements, name(element)) && !isCaretNode(element.dom) && !isBogus$2(element.dom);\n    };\n    var isEmptyCaretFormatElement = function (element) {\n      return isCaretNode(element.dom) && isCaretContainerEmpty(element.dom);\n    };\n\n    var postProcessHooks = {};\n    var filter = filter$2;\n    var each$b = each$i;\n    var addPostProcessHook = function (name, hook) {\n      var hooks = postProcessHooks[name];\n      if (!hooks) {\n        postProcessHooks[name] = [];\n      }\n      postProcessHooks[name].push(hook);\n    };\n    var postProcess$1 = function (name, editor) {\n      each$b(postProcessHooks[name], function (hook) {\n        hook(editor);\n      });\n    };\n    addPostProcessHook('pre', function (editor) {\n      var rng = editor.selection.getRng();\n      var blocks;\n      var hasPreSibling = function (pre) {\n        return isPre(pre.previousSibling) && indexOf$1(blocks, pre.previousSibling) !== -1;\n      };\n      var joinPre = function (pre1, pre2) {\n        DomQuery(pre2).remove();\n        DomQuery(pre1).append('<br><br>').append(pre2.childNodes);\n      };\n      var isPre = matchNodeNames(['pre']);\n      if (!rng.collapsed) {\n        blocks = editor.selection.getSelectedBlocks();\n        each$b(filter(filter(blocks, isPre), hasPreSibling), function (pre) {\n          joinPre(pre.previousSibling, pre);\n        });\n      }\n    });\n\n    var each$a = Tools.each;\n    var isElementNode$1 = function (node) {\n      return isElement$5(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus$2(node);\n    };\n    var findElementSibling = function (node, siblingName) {\n      for (var sibling = node; sibling; sibling = sibling[siblingName]) {\n        if (isText$7(sibling) && isNotEmpty(sibling.data)) {\n          return node;\n        }\n        if (isElement$5(sibling) && !isBookmarkNode$1(sibling)) {\n          return sibling;\n        }\n      }\n      return node;\n    };\n    var mergeSiblingsNodes = function (dom, prev, next) {\n      var elementUtils = ElementUtils(dom);\n      if (prev && next) {\n        prev = findElementSibling(prev, 'previousSibling');\n        next = findElementSibling(next, 'nextSibling');\n        if (elementUtils.compare(prev, next)) {\n          for (var sibling = prev.nextSibling; sibling && sibling !== next;) {\n            var tmpSibling = sibling;\n            sibling = sibling.nextSibling;\n            prev.appendChild(tmpSibling);\n          }\n          dom.remove(next);\n          Tools.each(Tools.grep(next.childNodes), function (node) {\n            prev.appendChild(node);\n          });\n          return prev;\n        }\n      }\n      return next;\n    };\n    var mergeSiblings = function (dom, format, vars, node) {\n      if (node && format.merge_siblings !== false) {\n        var newNode = mergeSiblingsNodes(dom, getNonWhiteSpaceSibling(node), node);\n        mergeSiblingsNodes(dom, newNode, getNonWhiteSpaceSibling(newNode, true));\n      }\n    };\n    var clearChildStyles = function (dom, format, node) {\n      if (format.clear_child_styles) {\n        var selector = format.links ? '*:not(a)' : '*';\n        each$a(dom.select(selector, node), function (node) {\n          if (isElementNode$1(node)) {\n            each$a(format.styles, function (value, name) {\n              dom.setStyle(node, name, '');\n            });\n          }\n        });\n      }\n    };\n    var processChildElements = function (node, filter, process) {\n      each$a(node.childNodes, function (node) {\n        if (isElementNode$1(node)) {\n          if (filter(node)) {\n            process(node);\n          }\n          if (node.hasChildNodes()) {\n            processChildElements(node, filter, process);\n          }\n        }\n      });\n    };\n    var unwrapEmptySpan = function (dom, node) {\n      if (node.nodeName === 'SPAN' && dom.getAttribs(node).length === 0) {\n        dom.remove(node, true);\n      }\n    };\n    var hasStyle = function (dom, name) {\n      return function (node) {\n        return !!(node && getStyle(dom, node, name));\n      };\n    };\n    var applyStyle = function (dom, name, value) {\n      return function (node) {\n        dom.setStyle(node, name, value);\n        if (node.getAttribute('style') === '') {\n          node.removeAttribute('style');\n        }\n        unwrapEmptySpan(dom, node);\n      };\n    };\n\n    var removeResult = Adt.generate([\n      { keep: [] },\n      { rename: ['name'] },\n      { removed: [] }\n    ]);\n    var MCE_ATTR_RE = /^(src|href|style)$/;\n    var each$9 = Tools.each;\n    var isEq$2 = isEq$5;\n    var isTableCellOrRow = function (node) {\n      return /^(TR|TH|TD)$/.test(node.nodeName);\n    };\n    var isChildOfInlineParent = function (dom, node, parent) {\n      return dom.isChildOf(node, parent) && node !== parent && !dom.isBlock(parent);\n    };\n    var getContainer = function (ed, rng, start) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (isElement$5(container)) {\n        var lastIdx = container.childNodes.length - 1;\n        if (!start && offset) {\n          offset--;\n        }\n        container = container.childNodes[offset > lastIdx ? lastIdx : offset];\n      }\n      if (isText$7(container) && start && offset >= container.nodeValue.length) {\n        container = new DomTreeWalker(container, ed.getBody()).next() || container;\n      }\n      if (isText$7(container) && !start && offset === 0) {\n        container = new DomTreeWalker(container, ed.getBody()).prev() || container;\n      }\n      return container;\n    };\n    var normalizeTableSelection = function (node, start) {\n      var prop = start ? 'firstChild' : 'lastChild';\n      if (isTableCellOrRow(node) && node[prop]) {\n        var childNode = node[prop];\n        if (node.nodeName === 'TR') {\n          return childNode[prop] || childNode;\n        } else {\n          return childNode;\n        }\n      }\n      return node;\n    };\n    var wrap$1 = function (dom, node, name, attrs) {\n      var wrapper = dom.create(name, attrs);\n      node.parentNode.insertBefore(wrapper, node);\n      wrapper.appendChild(node);\n      return wrapper;\n    };\n    var wrapWithSiblings = function (dom, node, next, name, attrs) {\n      var start = SugarElement.fromDom(node);\n      var wrapper = SugarElement.fromDom(dom.create(name, attrs));\n      var siblings = next ? nextSiblings(start) : prevSiblings(start);\n      append(wrapper, siblings);\n      if (next) {\n        before$4(start, wrapper);\n        prepend(wrapper, start);\n      } else {\n        after$3(start, wrapper);\n        append$1(wrapper, start);\n      }\n      return wrapper.dom;\n    };\n    var matchName = function (dom, node, format) {\n      if (isInlineFormat(format) && isEq$2(node, format.inline)) {\n        return true;\n      }\n      if (isBlockFormat(format) && isEq$2(node, format.block)) {\n        return true;\n      }\n      if (isSelectorFormat(format)) {\n        return isElement$5(node) && dom.is(node, format.selector);\n      }\n    };\n    var isColorFormatAndAnchor = function (node, format) {\n      return format.links && node.nodeName === 'A';\n    };\n    var find = function (dom, node, next, inc) {\n      var sibling = getNonWhiteSpaceSibling(node, next, inc);\n      return isNullable(sibling) || sibling.nodeName === 'BR' || dom.isBlock(sibling);\n    };\n    var removeNode = function (ed, node, format) {\n      var parentNode = node.parentNode;\n      var rootBlockElm;\n      var dom = ed.dom, forcedRootBlock = getForcedRootBlock(ed);\n      if (isBlockFormat(format)) {\n        if (!forcedRootBlock) {\n          if (dom.isBlock(node) && !dom.isBlock(parentNode)) {\n            if (!find(dom, node, false) && !find(dom, node.firstChild, true, true)) {\n              node.insertBefore(dom.create('br'), node.firstChild);\n            }\n            if (!find(dom, node, true) && !find(dom, node.lastChild, false, true)) {\n              node.appendChild(dom.create('br'));\n            }\n          }\n        } else {\n          if (parentNode === dom.getRoot()) {\n            if (!format.list_block || !isEq$2(node, format.list_block)) {\n              each$k(from(node.childNodes), function (node) {\n                if (isValid(ed, forcedRootBlock, node.nodeName.toLowerCase())) {\n                  if (!rootBlockElm) {\n                    rootBlockElm = wrap$1(dom, node, forcedRootBlock);\n                    dom.setAttribs(rootBlockElm, ed.settings.forced_root_block_attrs);\n                  } else {\n                    rootBlockElm.appendChild(node);\n                  }\n                } else {\n                  rootBlockElm = null;\n                }\n              });\n            }\n          }\n        }\n      }\n      if (isMixedFormat(format) && !isEq$2(format.inline, node)) {\n        return;\n      }\n      dom.remove(node, true);\n    };\n    var removeFormatInternal = function (ed, format, vars, node, compareNode) {\n      var stylesModified;\n      var dom = ed.dom;\n      if (!matchName(dom, node, format) && !isColorFormatAndAnchor(node, format)) {\n        return removeResult.keep();\n      }\n      var elm = node;\n      if (isInlineFormat(format) && format.remove === 'all' && isArray$1(format.preserve_attributes)) {\n        var attrsToPreserve = filter$4(dom.getAttribs(elm), function (attr) {\n          return contains$3(format.preserve_attributes, attr.name.toLowerCase());\n        });\n        dom.removeAllAttribs(elm);\n        each$k(attrsToPreserve, function (attr) {\n          return dom.setAttrib(elm, attr.name, attr.value);\n        });\n        if (attrsToPreserve.length > 0) {\n          return removeResult.rename('span');\n        }\n      }\n      if (format.remove !== 'all') {\n        each$9(format.styles, function (value, name) {\n          value = normalizeStyleValue(dom, replaceVars(value, vars), name + '');\n          if (isNumber(name)) {\n            name = value;\n            compareNode = null;\n          }\n          if (format.remove_similar || (!compareNode || isEq$2(getStyle(dom, compareNode, name), value))) {\n            dom.setStyle(elm, name, '');\n          }\n          stylesModified = true;\n        });\n        if (stylesModified && dom.getAttrib(elm, 'style') === '') {\n          elm.removeAttribute('style');\n          elm.removeAttribute('data-mce-style');\n        }\n        each$9(format.attributes, function (value, name) {\n          var valueOut;\n          value = replaceVars(value, vars);\n          if (isNumber(name)) {\n            name = value;\n            compareNode = null;\n          }\n          if (format.remove_similar || (!compareNode || isEq$2(dom.getAttrib(compareNode, name), value))) {\n            if (name === 'class') {\n              value = dom.getAttrib(elm, name);\n              if (value) {\n                valueOut = '';\n                each$k(value.split(/\\s+/), function (cls) {\n                  if (/mce\\-\\w+/.test(cls)) {\n                    valueOut += (valueOut ? ' ' : '') + cls;\n                  }\n                });\n                if (valueOut) {\n                  dom.setAttrib(elm, name, valueOut);\n                  return;\n                }\n              }\n            }\n            if (MCE_ATTR_RE.test(name)) {\n              elm.removeAttribute('data-mce-' + name);\n            }\n            if (name === 'style' && matchNodeNames(['li'])(elm) && dom.getStyle(elm, 'list-style-type') === 'none') {\n              elm.removeAttribute(name);\n              dom.setStyle(elm, 'list-style-type', 'none');\n              return;\n            }\n            if (name === 'class') {\n              elm.removeAttribute('className');\n            }\n            elm.removeAttribute(name);\n          }\n        });\n        each$9(format.classes, function (value) {\n          value = replaceVars(value, vars);\n          if (!compareNode || dom.hasClass(compareNode, value)) {\n            dom.removeClass(elm, value);\n          }\n        });\n        var attrs = dom.getAttribs(elm);\n        for (var i = 0; i < attrs.length; i++) {\n          var attrName = attrs[i].nodeName;\n          if (attrName.indexOf('_') !== 0 && attrName.indexOf('data-') !== 0) {\n            return removeResult.keep();\n          }\n        }\n      }\n      if (format.remove !== 'none') {\n        removeNode(ed, elm, format);\n        return removeResult.removed();\n      }\n      return removeResult.keep();\n    };\n    var removeFormat$1 = function (ed, format, vars, node, compareNode) {\n      return removeFormatInternal(ed, format, vars, node, compareNode).fold(never, function (newName) {\n        ed.dom.rename(node, newName);\n        return true;\n      }, always);\n    };\n    var findFormatRoot = function (editor, container, name, vars, similar) {\n      var formatRoot;\n      each$k(getParents$2(editor.dom, container.parentNode).reverse(), function (parent) {\n        if (!formatRoot && parent.id !== '_start' && parent.id !== '_end') {\n          var format = matchNode(editor, parent, name, vars, similar);\n          if (format && format.split !== false) {\n            formatRoot = parent;\n          }\n        }\n      });\n      return formatRoot;\n    };\n    var removeFormatFromClone = function (editor, format, vars, clone) {\n      return removeFormatInternal(editor, format, vars, clone, clone).fold(constant(clone), function (newName) {\n        var fragment = editor.dom.createFragment();\n        fragment.appendChild(clone);\n        return editor.dom.rename(clone, newName);\n      }, constant(null));\n    };\n    var wrapAndSplit = function (editor, formatList, formatRoot, container, target, split, format, vars) {\n      var clone, lastClone, firstClone;\n      var dom = editor.dom;\n      if (formatRoot) {\n        var formatRootParent = formatRoot.parentNode;\n        for (var parent_1 = container.parentNode; parent_1 && parent_1 !== formatRootParent; parent_1 = parent_1.parentNode) {\n          clone = dom.clone(parent_1, false);\n          for (var i = 0; i < formatList.length; i++) {\n            clone = removeFormatFromClone(editor, formatList[i], vars, clone);\n            if (clone === null) {\n              break;\n            }\n          }\n          if (clone) {\n            if (lastClone) {\n              clone.appendChild(lastClone);\n            }\n            if (!firstClone) {\n              firstClone = clone;\n            }\n            lastClone = clone;\n          }\n        }\n        if (split && (!format.mixed || !dom.isBlock(formatRoot))) {\n          container = dom.split(formatRoot, container);\n        }\n        if (lastClone) {\n          target.parentNode.insertBefore(lastClone, target);\n          firstClone.appendChild(target);\n          if (isInlineFormat(format)) {\n            mergeSiblings(dom, format, vars, lastClone);\n          }\n        }\n      }\n      return container;\n    };\n    var remove$1 = function (ed, name, vars, node, similar) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var contentEditable = true;\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var splitToFormatRoot = function (container) {\n        var formatRoot = findFormatRoot(ed, container, name, vars, similar);\n        return wrapAndSplit(ed, formatList, formatRoot, container, container, true, format, vars);\n      };\n      var isRemoveBookmarkNode = function (node) {\n        return isBookmarkNode$1(node) && isElement$5(node) && (node.id === '_start' || node.id === '_end');\n      };\n      var removeNodeFormat = function (node) {\n        return exists(formatList, function (fmt) {\n          return removeFormat$1(ed, fmt, vars, node, node);\n        });\n      };\n      var process = function (node) {\n        var lastContentEditable = true;\n        var hasContentEditableState = false;\n        if (isElement$5(node) && dom.getContentEditable(node)) {\n          lastContentEditable = contentEditable;\n          contentEditable = dom.getContentEditable(node) === 'true';\n          hasContentEditableState = true;\n        }\n        var children = from(node.childNodes);\n        if (contentEditable && !hasContentEditableState) {\n          var removed = removeNodeFormat(node);\n          var currentNodeMatches = removed || exists(formatList, function (f) {\n            return matchName$1(dom, node, f);\n          });\n          var parentNode = node.parentNode;\n          if (!currentNodeMatches && isNonNullable(parentNode) && shouldExpandToSelector(format)) {\n            removeNodeFormat(parentNode);\n          }\n        }\n        if (format.deep) {\n          if (children.length) {\n            for (var i = 0; i < children.length; i++) {\n              process(children[i]);\n            }\n            if (hasContentEditableState) {\n              contentEditable = lastContentEditable;\n            }\n          }\n        }\n        var textDecorations = [\n          'underline',\n          'line-through',\n          'overline'\n        ];\n        each$k(textDecorations, function (decoration) {\n          if (isElement$5(node) && ed.dom.getStyle(node, 'text-decoration') === decoration && node.parentNode && getTextDecoration(dom, node.parentNode) === decoration) {\n            removeFormat$1(ed, {\n              deep: false,\n              exact: true,\n              inline: 'span',\n              styles: { textDecoration: decoration }\n            }, null, node);\n          }\n        });\n      };\n      var unwrap = function (start) {\n        var node = dom.get(start ? '_start' : '_end');\n        var out = node[start ? 'firstChild' : 'lastChild'];\n        if (isRemoveBookmarkNode(out)) {\n          out = out[start ? 'firstChild' : 'lastChild'];\n        }\n        if (isText$7(out) && out.data.length === 0) {\n          out = start ? node.previousSibling || node.nextSibling : node.nextSibling || node.previousSibling;\n        }\n        dom.remove(node, true);\n        return out;\n      };\n      var removeRngStyle = function (rng) {\n        var startContainer, endContainer;\n        var expandedRng = expandRng(ed, rng, formatList, rng.collapsed);\n        if (format.split) {\n          expandedRng = split(expandedRng);\n          startContainer = getContainer(ed, expandedRng, true);\n          endContainer = getContainer(ed, expandedRng);\n          if (startContainer !== endContainer) {\n            startContainer = normalizeTableSelection(startContainer, true);\n            endContainer = normalizeTableSelection(endContainer, false);\n            if (isChildOfInlineParent(dom, startContainer, endContainer)) {\n              var marker = Optional.from(startContainer.firstChild).getOr(startContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, true, 'span', {\n                'id': '_start',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(true);\n              return;\n            }\n            if (isChildOfInlineParent(dom, endContainer, startContainer)) {\n              var marker = Optional.from(endContainer.lastChild).getOr(endContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, false, 'span', {\n                'id': '_end',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(false);\n              return;\n            }\n            startContainer = wrap$1(dom, startContainer, 'span', {\n              'id': '_start',\n              'data-mce-type': 'bookmark'\n            });\n            endContainer = wrap$1(dom, endContainer, 'span', {\n              'id': '_end',\n              'data-mce-type': 'bookmark'\n            });\n            var newRng = dom.createRng();\n            newRng.setStartAfter(startContainer);\n            newRng.setEndBefore(endContainer);\n            walk$2(dom, newRng, function (nodes) {\n              each$k(nodes, function (n) {\n                if (!isBookmarkNode$1(n) && !isBookmarkNode$1(n.parentNode)) {\n                  splitToFormatRoot(n);\n                }\n              });\n            });\n            splitToFormatRoot(startContainer);\n            splitToFormatRoot(endContainer);\n            startContainer = unwrap(true);\n            endContainer = unwrap();\n          } else {\n            startContainer = endContainer = splitToFormatRoot(startContainer);\n          }\n          expandedRng.startContainer = startContainer.parentNode ? startContainer.parentNode : startContainer;\n          expandedRng.startOffset = dom.nodeIndex(startContainer);\n          expandedRng.endContainer = endContainer.parentNode ? endContainer.parentNode : endContainer;\n          expandedRng.endOffset = dom.nodeIndex(endContainer) + 1;\n        }\n        walk$2(dom, expandedRng, function (nodes) {\n          each$k(nodes, process);\n        });\n      };\n      if (node) {\n        if (isNode(node)) {\n          var rng = dom.createRng();\n          rng.setStartBefore(node);\n          rng.setEndAfter(node);\n          removeRngStyle(rng);\n        } else {\n          removeRngStyle(node);\n        }\n        fireFormatRemove(ed, name, node, vars);\n        return;\n      }\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0; i < formatList.length; i++) {\n          if (formatList[i].ceFalseOverride) {\n            if (removeFormat$1(ed, formatList[i], vars, node, node)) {\n              break;\n            }\n          }\n        }\n        fireFormatRemove(ed, name, node, vars);\n        return;\n      }\n      if (!selection.isCollapsed() || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\n        preserve(selection, true, function () {\n          runOnRanges(ed, removeRngStyle);\n        });\n        if (isInlineFormat(format) && match$2(ed, name, vars, selection.getStart())) {\n          moveStart(dom, selection, selection.getRng());\n        }\n        ed.nodeChanged();\n      } else {\n        removeCaretFormat(ed, name, vars, similar);\n      }\n      fireFormatRemove(ed, name, node, vars);\n    };\n\n    var each$8 = Tools.each;\n    var mergeTextDecorationsAndColor = function (dom, format, vars, node) {\n      var processTextDecorationsAndColor = function (n) {\n        if (n.nodeType === 1 && n.parentNode && n.parentNode.nodeType === 1) {\n          var textDecoration = getTextDecoration(dom, n.parentNode);\n          if (dom.getStyle(n, 'color') && textDecoration) {\n            dom.setStyle(n, 'text-decoration', textDecoration);\n          } else if (dom.getStyle(n, 'text-decoration') === textDecoration) {\n            dom.setStyle(n, 'text-decoration', null);\n          }\n        }\n      };\n      if (format.styles && (format.styles.color || format.styles.textDecoration)) {\n        Tools.walk(node, processTextDecorationsAndColor, 'childNodes');\n        processTextDecorationsAndColor(node);\n      }\n    };\n    var mergeBackgroundColorAndFontSize = function (dom, format, vars, node) {\n      if (format.styles && format.styles.backgroundColor) {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'backgroundColor', replaceVars(format.styles.backgroundColor, vars)));\n      }\n    };\n    var mergeSubSup = function (dom, format, vars, node) {\n      if (isInlineFormat(format) && (format.inline === 'sub' || format.inline === 'sup')) {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'fontSize', ''));\n        dom.remove(dom.select(format.inline === 'sup' ? 'sub' : 'sup', node), true);\n      }\n    };\n    var mergeWithChildren = function (editor, formatList, vars, node) {\n      each$8(formatList, function (format) {\n        if (isInlineFormat(format)) {\n          each$8(editor.dom.select(format.inline, node), function (child) {\n            if (!isElementNode$1(child)) {\n              return;\n            }\n            removeFormat$1(editor, format, vars, child, format.exact ? child : null);\n          });\n        }\n        clearChildStyles(editor.dom, format, node);\n      });\n    };\n    var mergeWithParents = function (editor, format, name, vars, node) {\n      if (matchNode(editor, node.parentNode, name, vars)) {\n        if (removeFormat$1(editor, format, vars, node)) {\n          return;\n        }\n      }\n      if (format.merge_with_parents) {\n        editor.dom.getParent(node.parentNode, function (parent) {\n          if (matchNode(editor, parent, name, vars)) {\n            removeFormat$1(editor, format, vars, node);\n            return true;\n          }\n        });\n      }\n    };\n\n    var each$7 = Tools.each;\n    var isElementNode = function (node) {\n      return isElement$5(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus$2(node);\n    };\n    var canFormatBR = function (editor, format, node, parentName) {\n      if (canFormatEmptyLines(editor) && isInlineFormat(format)) {\n        var validBRParentElements = getTextRootBlockElements(editor.schema);\n        var hasCaretNodeSibling = sibling(SugarElement.fromDom(node), function (sibling) {\n          return isCaretNode(sibling.dom);\n        });\n        return hasNonNullableKey(validBRParentElements, parentName) && isEmpty$2(SugarElement.fromDom(node.parentNode), false) && !hasCaretNodeSibling;\n      } else {\n        return false;\n      }\n    };\n    var applyFormat$1 = function (ed, name, vars, node) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var isCollapsed = !node && ed.selection.isCollapsed();\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var setElementFormat = function (elm, fmt) {\n        if (fmt === void 0) {\n          fmt = format;\n        }\n        if (isFunction(fmt.onformat)) {\n          fmt.onformat(elm, fmt, vars, node);\n        }\n        each$7(fmt.styles, function (value, name) {\n          dom.setStyle(elm, name, replaceVars(value, vars));\n        });\n        if (fmt.styles) {\n          var styleVal = dom.getAttrib(elm, 'style');\n          if (styleVal) {\n            dom.setAttrib(elm, 'data-mce-style', styleVal);\n          }\n        }\n        each$7(fmt.attributes, function (value, name) {\n          dom.setAttrib(elm, name, replaceVars(value, vars));\n        });\n        each$7(fmt.classes, function (value) {\n          value = replaceVars(value, vars);\n          if (!dom.hasClass(elm, value)) {\n            dom.addClass(elm, value);\n          }\n        });\n      };\n      var applyNodeStyle = function (formatList, node) {\n        var found = false;\n        each$7(formatList, function (format) {\n          if (!isSelectorFormat(format)) {\n            return false;\n          }\n          if (isNonNullable(format.collapsed) && format.collapsed !== isCollapsed) {\n            return;\n          }\n          if (dom.is(node, format.selector) && !isCaretNode(node)) {\n            setElementFormat(node, format);\n            found = true;\n            return false;\n          }\n        });\n        return found;\n      };\n      var createWrapElement = function (wrapName) {\n        if (isString$1(wrapName)) {\n          var wrapElm = dom.create(wrapName);\n          setElementFormat(wrapElm);\n          return wrapElm;\n        } else {\n          return null;\n        }\n      };\n      var applyRngStyle = function (dom, rng, nodeSpecific) {\n        var newWrappers = [];\n        var contentEditable = true;\n        var wrapName = format.inline || format.block;\n        var wrapElm = createWrapElement(wrapName);\n        walk$2(dom, rng, function (nodes) {\n          var currentWrapElm;\n          var process = function (node) {\n            var hasContentEditableState = false;\n            var lastContentEditable = contentEditable;\n            var nodeName = node.nodeName.toLowerCase();\n            var parentNode = node.parentNode;\n            var parentName = parentNode.nodeName.toLowerCase();\n            if (isElement$5(node) && dom.getContentEditable(node)) {\n              lastContentEditable = contentEditable;\n              contentEditable = dom.getContentEditable(node) === 'true';\n              hasContentEditableState = true;\n            }\n            if (isBr$5(node) && !canFormatBR(ed, format, node, parentName)) {\n              currentWrapElm = null;\n              if (isBlockFormat(format)) {\n                dom.remove(node);\n              }\n              return;\n            }\n            if (isBlockFormat(format) && format.wrapper && matchNode(ed, node, name, vars)) {\n              currentWrapElm = null;\n              return;\n            }\n            if (contentEditable && !hasContentEditableState && isBlockFormat(format) && !format.wrapper && isTextBlock$1(ed, nodeName) && isValid(ed, parentName, wrapName)) {\n              var elm = dom.rename(node, wrapName);\n              setElementFormat(elm);\n              newWrappers.push(elm);\n              currentWrapElm = null;\n              return;\n            }\n            if (isSelectorFormat(format)) {\n              var found = applyNodeStyle(formatList, node);\n              if (!found && isNonNullable(parentNode) && shouldExpandToSelector(format)) {\n                found = applyNodeStyle(formatList, parentNode);\n              }\n              if (!isInlineFormat(format) || found) {\n                currentWrapElm = null;\n                return;\n              }\n            }\n            if (contentEditable && !hasContentEditableState && isValid(ed, wrapName, nodeName) && isValid(ed, parentName, wrapName) && !(!nodeSpecific && isText$7(node) && isZwsp(node.data)) && !isCaretNode(node) && (!isInlineFormat(format) || !dom.isBlock(node))) {\n              if (!currentWrapElm) {\n                currentWrapElm = dom.clone(wrapElm, false);\n                node.parentNode.insertBefore(currentWrapElm, node);\n                newWrappers.push(currentWrapElm);\n              }\n              currentWrapElm.appendChild(node);\n            } else {\n              currentWrapElm = null;\n              each$k(from(node.childNodes), process);\n              if (hasContentEditableState) {\n                contentEditable = lastContentEditable;\n              }\n              currentWrapElm = null;\n            }\n          };\n          each$k(nodes, process);\n        });\n        if (format.links === true) {\n          each$k(newWrappers, function (node) {\n            var process = function (node) {\n              if (node.nodeName === 'A') {\n                setElementFormat(node, format);\n              }\n              each$k(from(node.childNodes), process);\n            };\n            process(node);\n          });\n        }\n        each$k(newWrappers, function (node) {\n          var getChildCount = function (node) {\n            var count = 0;\n            each$k(node.childNodes, function (node) {\n              if (!isEmptyTextNode$1(node) && !isBookmarkNode$1(node)) {\n                count++;\n              }\n            });\n            return count;\n          };\n          var mergeStyles = function (node) {\n            var childElement = find$3(node.childNodes, isElementNode).filter(function (child) {\n              return matchName$1(dom, child, format);\n            });\n            return childElement.map(function (child) {\n              var clone = dom.clone(child, false);\n              setElementFormat(clone);\n              dom.replace(clone, node, true);\n              dom.remove(child, true);\n              return clone;\n            }).getOr(node);\n          };\n          var childCount = getChildCount(node);\n          if ((newWrappers.length > 1 || !dom.isBlock(node)) && childCount === 0) {\n            dom.remove(node, true);\n            return;\n          }\n          if (isInlineFormat(format) || isBlockFormat(format) && format.wrapper) {\n            if (!format.exact && childCount === 1) {\n              node = mergeStyles(node);\n            }\n            mergeWithChildren(ed, formatList, vars, node);\n            mergeWithParents(ed, format, name, vars, node);\n            mergeBackgroundColorAndFontSize(dom, format, vars, node);\n            mergeTextDecorationsAndColor(dom, format, vars, node);\n            mergeSubSup(dom, format, vars, node);\n            mergeSiblings(dom, format, vars, node);\n          }\n        });\n      };\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0, l = formatList.length; i < l; i++) {\n          var formatItem = formatList[i];\n          if (formatItem.ceFalseOverride && isSelectorFormat(formatItem) && dom.is(node, formatItem.selector)) {\n            setElementFormat(node, formatItem);\n            break;\n          }\n        }\n        fireFormatApply(ed, name, node, vars);\n        return;\n      }\n      if (format) {\n        if (node) {\n          if (isNode(node)) {\n            if (!applyNodeStyle(formatList, node)) {\n              var rng = dom.createRng();\n              rng.setStartBefore(node);\n              rng.setEndAfter(node);\n              applyRngStyle(dom, expandRng(ed, rng, formatList), true);\n            }\n          } else {\n            applyRngStyle(dom, node, true);\n          }\n        } else {\n          if (!isCollapsed || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\n            var curSelNode = selection.getNode();\n            var firstFormat = formatList[0];\n            if (!ed.settings.forced_root_block && firstFormat.defaultBlock && !dom.getParent(curSelNode, dom.isBlock)) {\n              applyFormat$1(ed, firstFormat.defaultBlock);\n            }\n            selection.setRng(normalize(selection.getRng()));\n            preserve(selection, true, function () {\n              runOnRanges(ed, function (selectionRng, fake) {\n                var expandedRng = fake ? selectionRng : expandRng(ed, selectionRng, formatList);\n                applyRngStyle(dom, expandedRng, false);\n              });\n            });\n            moveStart(dom, selection, selection.getRng());\n            ed.nodeChanged();\n          } else {\n            applyCaretFormat(ed, name, vars);\n          }\n        }\n        postProcess$1(name, ed);\n      }\n      fireFormatApply(ed, name, node, vars);\n    };\n\n    var hasVars = function (value) {\n      return has$2(value, 'vars');\n    };\n    var setup$j = function (registeredFormatListeners, editor) {\n      registeredFormatListeners.set({});\n      editor.on('NodeChange', function (e) {\n        updateAndFireChangeCallbacks(editor, e.element, registeredFormatListeners.get());\n      });\n      editor.on('FormatApply FormatRemove', function (e) {\n        var element = Optional.from(e.node).map(function (nodeOrRange) {\n          return isNode(nodeOrRange) ? nodeOrRange : nodeOrRange.startContainer;\n        }).bind(function (node) {\n          return isElement$5(node) ? Optional.some(node) : Optional.from(node.parentElement);\n        }).getOrThunk(function () {\n          return fallbackElement(editor);\n        });\n        updateAndFireChangeCallbacks(editor, element, registeredFormatListeners.get());\n      });\n    };\n    var fallbackElement = function (editor) {\n      return editor.selection.getStart();\n    };\n    var matchingNode = function (editor, parents, format, similar, vars) {\n      var isMatchingNode = function (node) {\n        var matchingFormat = editor.formatter.matchNode(node, format, vars !== null && vars !== void 0 ? vars : {}, similar);\n        return !isUndefined(matchingFormat);\n      };\n      var isUnableToMatch = function (node) {\n        if (matchesUnInheritedFormatSelector(editor, node, format)) {\n          return true;\n        } else {\n          if (!similar) {\n            return isNonNullable(editor.formatter.matchNode(node, format, vars, true));\n          } else {\n            return false;\n          }\n        }\n      };\n      return findUntil$1(parents, isMatchingNode, isUnableToMatch);\n    };\n    var getParents = function (editor, elm) {\n      var element = elm !== null && elm !== void 0 ? elm : fallbackElement(editor);\n      return filter$4(getParents$2(editor.dom, element), function (node) {\n        return isElement$5(node) && !isBogus$2(node);\n      });\n    };\n    var updateAndFireChangeCallbacks = function (editor, elm, registeredCallbacks) {\n      var parents = getParents(editor, elm);\n      each$j(registeredCallbacks, function (data, format) {\n        var runIfChanged = function (spec) {\n          var match = matchingNode(editor, parents, format, spec.similar, hasVars(spec) ? spec.vars : undefined);\n          var isSet = match.isSome();\n          if (spec.state.get() !== isSet) {\n            spec.state.set(isSet);\n            var node_1 = match.getOr(elm);\n            if (hasVars(spec)) {\n              spec.callback(isSet, {\n                node: node_1,\n                format: format,\n                parents: parents\n              });\n            } else {\n              each$k(spec.callbacks, function (callback) {\n                return callback(isSet, {\n                  node: node_1,\n                  format: format,\n                  parents: parents\n                });\n              });\n            }\n          }\n        };\n        each$k([\n          data.withSimilar,\n          data.withoutSimilar\n        ], runIfChanged);\n        each$k(data.withVars, runIfChanged);\n      });\n    };\n    var addListeners = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\n      var formatChangeItems = registeredFormatListeners.get();\n      each$k(formats.split(','), function (format) {\n        var group = get$9(formatChangeItems, format).getOrThunk(function () {\n          var base = {\n            withSimilar: {\n              state: Cell(false),\n              similar: true,\n              callbacks: []\n            },\n            withoutSimilar: {\n              state: Cell(false),\n              similar: false,\n              callbacks: []\n            },\n            withVars: []\n          };\n          formatChangeItems[format] = base;\n          return base;\n        });\n        var getCurrent = function () {\n          var parents = getParents(editor);\n          return matchingNode(editor, parents, format, similar, vars).isSome();\n        };\n        if (isUndefined(vars)) {\n          var toAppendTo = similar ? group.withSimilar : group.withoutSimilar;\n          toAppendTo.callbacks.push(callback);\n          if (toAppendTo.callbacks.length === 1) {\n            toAppendTo.state.set(getCurrent());\n          }\n        } else {\n          group.withVars.push({\n            state: Cell(getCurrent()),\n            similar: similar,\n            vars: vars,\n            callback: callback\n          });\n        }\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    var removeListeners = function (registeredFormatListeners, formats, callback) {\n      var formatChangeItems = registeredFormatListeners.get();\n      each$k(formats.split(','), function (format) {\n        return get$9(formatChangeItems, format).each(function (group) {\n          formatChangeItems[format] = {\n            withSimilar: __assign(__assign({}, group.withSimilar), {\n              callbacks: filter$4(group.withSimilar.callbacks, function (cb) {\n                return cb !== callback;\n              })\n            }),\n            withoutSimilar: __assign(__assign({}, group.withoutSimilar), {\n              callbacks: filter$4(group.withoutSimilar.callbacks, function (cb) {\n                return cb !== callback;\n              })\n            }),\n            withVars: filter$4(group.withVars, function (item) {\n              return item.callback !== callback;\n            })\n          };\n        });\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    var formatChangedInternal = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\n      if (registeredFormatListeners.get() === null) {\n        setup$j(registeredFormatListeners, editor);\n      }\n      addListeners(editor, registeredFormatListeners, formats, callback, similar, vars);\n      return {\n        unbind: function () {\n          return removeListeners(registeredFormatListeners, formats, callback);\n        }\n      };\n    };\n\n    var toggle = function (editor, name, vars, node) {\n      var fmt = editor.formatter.get(name);\n      if (match$2(editor, name, vars, node) && (!('toggle' in fmt[0]) || fmt[0].toggle)) {\n        remove$1(editor, name, vars, node);\n      } else {\n        applyFormat$1(editor, name, vars, node);\n      }\n    };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || document;\n      var fragment = doc.createDocumentFragment();\n      each$k(elements, function (element) {\n        fragment.appendChild(element.dom);\n      });\n      return SugarElement.fromDom(fragment);\n    };\n\n    var tableModel = function (element, width, rows) {\n      return {\n        element: element,\n        width: width,\n        rows: rows\n      };\n    };\n    var tableRow = function (element, cells) {\n      return {\n        element: element,\n        cells: cells\n      };\n    };\n    var cellPosition = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var getSpan = function (td, key) {\n      var value = parseInt(get$6(td, key), 10);\n      return isNaN(value) ? 1 : value;\n    };\n    var fillout = function (table, x, y, tr, td) {\n      var rowspan = getSpan(td, 'rowspan');\n      var colspan = getSpan(td, 'colspan');\n      var rows = table.rows;\n      for (var y2 = y; y2 < y + rowspan; y2++) {\n        if (!rows[y2]) {\n          rows[y2] = tableRow(deep$1(tr), []);\n        }\n        for (var x2 = x; x2 < x + colspan; x2++) {\n          var cells = rows[y2].cells;\n          cells[x2] = y2 === y && x2 === x ? td : shallow(td);\n        }\n      }\n    };\n    var cellExists = function (table, x, y) {\n      var rows = table.rows;\n      var cells = rows[y] ? rows[y].cells : [];\n      return !!cells[x];\n    };\n    var skipCellsX = function (table, x, y) {\n      while (cellExists(table, x, y)) {\n        x++;\n      }\n      return x;\n    };\n    var getWidth = function (rows) {\n      return foldl(rows, function (acc, row) {\n        return row.cells.length > acc ? row.cells.length : acc;\n      }, 0);\n    };\n    var findElementPos = function (table, element) {\n      var rows = table.rows;\n      for (var y = 0; y < rows.length; y++) {\n        var cells = rows[y].cells;\n        for (var x = 0; x < cells.length; x++) {\n          if (eq(cells[x], element)) {\n            return Optional.some(cellPosition(x, y));\n          }\n        }\n      }\n      return Optional.none();\n    };\n    var extractRows = function (table, sx, sy, ex, ey) {\n      var newRows = [];\n      var rows = table.rows;\n      for (var y = sy; y <= ey; y++) {\n        var cells = rows[y].cells;\n        var slice = sx < ex ? cells.slice(sx, ex + 1) : cells.slice(ex, sx + 1);\n        newRows.push(tableRow(rows[y].element, slice));\n      }\n      return newRows;\n    };\n    var subTable = function (table, startPos, endPos) {\n      var sx = startPos.x, sy = startPos.y;\n      var ex = endPos.x, ey = endPos.y;\n      var newRows = sy < ey ? extractRows(table, sx, sy, ex, ey) : extractRows(table, sx, ey, ex, sy);\n      return tableModel(table.element, getWidth(newRows), newRows);\n    };\n    var createDomTable = function (table, rows) {\n      var tableElement = shallow(table.element);\n      var tableBody = SugarElement.fromTag('tbody');\n      append(tableBody, rows);\n      append$1(tableElement, tableBody);\n      return tableElement;\n    };\n    var modelRowsToDomRows = function (table) {\n      return map$3(table.rows, function (row) {\n        var cells = map$3(row.cells, function (cell) {\n          var td = deep$1(cell);\n          remove$6(td, 'colspan');\n          remove$6(td, 'rowspan');\n          return td;\n        });\n        var tr = shallow(row.element);\n        append(tr, cells);\n        return tr;\n      });\n    };\n    var fromDom = function (tableElm) {\n      var table = tableModel(shallow(tableElm), 0, []);\n      each$k(descendants(tableElm, 'tr'), function (tr, y) {\n        each$k(descendants(tr, 'td,th'), function (td, x) {\n          fillout(table, skipCellsX(table, x, y), y, tr, td);\n        });\n      });\n      return tableModel(table.element, getWidth(table.rows), table.rows);\n    };\n    var toDom = function (table) {\n      return createDomTable(table, modelRowsToDomRows(table));\n    };\n    var subsection = function (table, startElement, endElement) {\n      return findElementPos(table, startElement).bind(function (startPos) {\n        return findElementPos(table, endElement).map(function (endPos) {\n          return subTable(table, startPos, endPos);\n        });\n      });\n    };\n\n    var findParentListContainer = function (parents) {\n      return find$3(parents, function (elm) {\n        return name(elm) === 'ul' || name(elm) === 'ol';\n      });\n    };\n    var getFullySelectedListWrappers = function (parents, rng) {\n      return find$3(parents, function (elm) {\n        return name(elm) === 'li' && hasAllContentsSelected(elm, rng);\n      }).fold(constant([]), function (_li) {\n        return findParentListContainer(parents).map(function (listCont) {\n          var listElm = SugarElement.fromTag(name(listCont));\n          var listStyles = filter$3(getAllRaw(listCont), function (_style, name) {\n            return startsWith(name, 'list-style');\n          });\n          setAll(listElm, listStyles);\n          return [\n            SugarElement.fromTag('li'),\n            listElm\n          ];\n        }).getOr([]);\n      });\n    };\n    var wrap = function (innerElm, elms) {\n      var wrapped = foldl(elms, function (acc, elm) {\n        append$1(elm, acc);\n        return elm;\n      }, innerElm);\n      return elms.length > 0 ? fromElements([wrapped]) : wrapped;\n    };\n    var directListWrappers = function (commonAnchorContainer) {\n      if (isListItem(commonAnchorContainer)) {\n        return parent(commonAnchorContainer).filter(isList).fold(constant([]), function (listElm) {\n          return [\n            commonAnchorContainer,\n            listElm\n          ];\n        });\n      } else {\n        return isList(commonAnchorContainer) ? [commonAnchorContainer] : [];\n      }\n    };\n    var getWrapElements = function (rootNode, rng) {\n      var commonAnchorContainer = SugarElement.fromDom(rng.commonAncestorContainer);\n      var parents = parentsAndSelf(commonAnchorContainer, rootNode);\n      var wrapElements = filter$4(parents, function (elm) {\n        return isInline$1(elm) || isHeading(elm);\n      });\n      var listWrappers = getFullySelectedListWrappers(parents, rng);\n      var allWrappers = wrapElements.concat(listWrappers.length ? listWrappers : directListWrappers(commonAnchorContainer));\n      return map$3(allWrappers, shallow);\n    };\n    var emptyFragment = function () {\n      return fromElements([]);\n    };\n    var getFragmentFromRange = function (rootNode, rng) {\n      return wrap(SugarElement.fromDom(rng.cloneContents()), getWrapElements(rootNode, rng));\n    };\n    var getParentTable = function (rootElm, cell) {\n      return ancestor$2(cell, 'table', curry(eq, rootElm));\n    };\n    var getTableFragment = function (rootNode, selectedTableCells) {\n      return getParentTable(rootNode, selectedTableCells[0]).bind(function (tableElm) {\n        var firstCell = selectedTableCells[0];\n        var lastCell = selectedTableCells[selectedTableCells.length - 1];\n        var fullTableModel = fromDom(tableElm);\n        return subsection(fullTableModel, firstCell, lastCell).map(function (sectionedTableModel) {\n          return fromElements([toDom(sectionedTableModel)]);\n        });\n      }).getOrThunk(emptyFragment);\n    };\n    var getSelectionFragment = function (rootNode, ranges) {\n      return ranges.length > 0 && ranges[0].collapsed ? emptyFragment() : getFragmentFromRange(rootNode, ranges[0]);\n    };\n    var read$3 = function (rootNode, ranges) {\n      var selectedCells = getCellsFromElementOrRanges(ranges, rootNode);\n      return selectedCells.length > 0 ? getTableFragment(rootNode, selectedCells) : getSelectionFragment(rootNode, ranges);\n    };\n\n    var trimLeadingCollapsibleText = function (text) {\n      return text.replace(/^[ \\f\\n\\r\\t\\v]+/, '');\n    };\n    var isCollapsibleWhitespace = function (text, index) {\n      return index >= 0 && index < text.length && isWhiteSpace(text.charAt(index));\n    };\n    var getInnerText = function (bin, shouldTrim) {\n      var text = trim$2(bin.innerText);\n      return shouldTrim ? trimLeadingCollapsibleText(text) : text;\n    };\n    var getContextNodeName = function (parentBlockOpt) {\n      return parentBlockOpt.map(function (block) {\n        return block.nodeName;\n      }).getOr('div').toLowerCase();\n    };\n    var getTextContent = function (editor) {\n      return Optional.from(editor.selection.getRng()).map(function (rng) {\n        var parentBlockOpt = Optional.from(editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock));\n        var body = editor.getBody();\n        var contextNodeName = getContextNodeName(parentBlockOpt);\n        var shouldTrimSpaces = Env.browser.isIE() && contextNodeName !== 'pre';\n        var bin = editor.dom.add(body, contextNodeName, {\n          'data-mce-bogus': 'all',\n          'style': 'overflow: hidden; opacity: 0;'\n        }, rng.cloneContents());\n        var text = getInnerText(bin, shouldTrimSpaces);\n        var nonRenderedText = trim$2(bin.textContent);\n        editor.dom.remove(bin);\n        if (isCollapsibleWhitespace(nonRenderedText, 0) || isCollapsibleWhitespace(nonRenderedText, nonRenderedText.length - 1)) {\n          var parentBlock = parentBlockOpt.getOr(body);\n          var parentBlockText = getInnerText(parentBlock, shouldTrimSpaces);\n          var textIndex = parentBlockText.indexOf(text);\n          if (textIndex === -1) {\n            return text;\n          } else {\n            var hasProceedingSpace = isCollapsibleWhitespace(parentBlockText, textIndex - 1);\n            var hasTrailingSpace = isCollapsibleWhitespace(parentBlockText, textIndex + text.length);\n            return (hasProceedingSpace ? ' ' : '') + text + (hasTrailingSpace ? ' ' : '');\n          }\n        } else {\n          return text;\n        }\n      }).getOr('');\n    };\n    var getSerializedContent = function (editor, args) {\n      var rng = editor.selection.getRng(), tmpElm = editor.dom.create('body');\n      var sel = editor.selection.getSel();\n      var ranges = processRanges(editor, getRanges(sel));\n      var fragment = args.contextual ? read$3(SugarElement.fromDom(editor.getBody()), ranges).dom : rng.cloneContents();\n      if (fragment) {\n        tmpElm.appendChild(fragment);\n      }\n      return editor.selection.serializer.serialize(tmpElm, args);\n    };\n    var setupArgs$1 = function (args, format) {\n      return __assign(__assign({}, args), {\n        format: format,\n        get: true,\n        selection: true\n      });\n    };\n    var getSelectedContentInternal = function (editor, format, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var defaultedArgs = setupArgs$1(args, format);\n      var updatedArgs = editor.fire('BeforeGetContent', defaultedArgs);\n      if (updatedArgs.isDefaultPrevented()) {\n        editor.fire('GetContent', updatedArgs);\n        return updatedArgs.content;\n      }\n      if (updatedArgs.format === 'text') {\n        return getTextContent(editor);\n      } else {\n        updatedArgs.getInner = true;\n        var content = getSerializedContent(editor, updatedArgs);\n        if (updatedArgs.format === 'tree') {\n          return content;\n        } else {\n          updatedArgs.content = editor.selection.isCollapsed() ? '' : content;\n          editor.fire('GetContent', updatedArgs);\n          return updatedArgs.content;\n        }\n      }\n    };\n\n    var KEEP = 0, INSERT = 1, DELETE = 2;\n    var diff = function (left, right) {\n      var size = left.length + right.length + 2;\n      var vDown = new Array(size);\n      var vUp = new Array(size);\n      var snake = function (start, end, diag) {\n        return {\n          start: start,\n          end: end,\n          diag: diag\n        };\n      };\n      var buildScript = function (start1, end1, start2, end2, script) {\n        var middle = getMiddleSnake(start1, end1, start2, end2);\n        if (middle === null || middle.start === end1 && middle.diag === end1 - end2 || middle.end === start1 && middle.diag === start1 - start2) {\n          var i = start1;\n          var j = start2;\n          while (i < end1 || j < end2) {\n            if (i < end1 && j < end2 && left[i] === right[j]) {\n              script.push([\n                KEEP,\n                left[i]\n              ]);\n              ++i;\n              ++j;\n            } else {\n              if (end1 - start1 > end2 - start2) {\n                script.push([\n                  DELETE,\n                  left[i]\n                ]);\n                ++i;\n              } else {\n                script.push([\n                  INSERT,\n                  right[j]\n                ]);\n                ++j;\n              }\n            }\n          }\n        } else {\n          buildScript(start1, middle.start, start2, middle.start - middle.diag, script);\n          for (var i2 = middle.start; i2 < middle.end; ++i2) {\n            script.push([\n              KEEP,\n              left[i2]\n            ]);\n          }\n          buildScript(middle.end, end1, middle.end - middle.diag, end2, script);\n        }\n      };\n      var buildSnake = function (start, diag, end1, end2) {\n        var end = start;\n        while (end - diag < end2 && end < end1 && left[end] === right[end - diag]) {\n          ++end;\n        }\n        return snake(start, end, diag);\n      };\n      var getMiddleSnake = function (start1, end1, start2, end2) {\n        var m = end1 - start1;\n        var n = end2 - start2;\n        if (m === 0 || n === 0) {\n          return null;\n        }\n        var delta = m - n;\n        var sum = n + m;\n        var offset = (sum % 2 === 0 ? sum : sum + 1) / 2;\n        vDown[1 + offset] = start1;\n        vUp[1 + offset] = end1 + 1;\n        var d, k, i, x, y;\n        for (d = 0; d <= offset; ++d) {\n          for (k = -d; k <= d; k += 2) {\n            i = k + offset;\n            if (k === -d || k !== d && vDown[i - 1] < vDown[i + 1]) {\n              vDown[i] = vDown[i + 1];\n            } else {\n              vDown[i] = vDown[i - 1] + 1;\n            }\n            x = vDown[i];\n            y = x - start1 + start2 - k;\n            while (x < end1 && y < end2 && left[x] === right[y]) {\n              vDown[i] = ++x;\n              ++y;\n            }\n            if (delta % 2 !== 0 && delta - d <= k && k <= delta + d) {\n              if (vUp[i - delta] <= vDown[i]) {\n                return buildSnake(vUp[i - delta], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n          for (k = delta - d; k <= delta + d; k += 2) {\n            i = k + offset - delta;\n            if (k === delta - d || k !== delta + d && vUp[i + 1] <= vUp[i - 1]) {\n              vUp[i] = vUp[i + 1] - 1;\n            } else {\n              vUp[i] = vUp[i - 1];\n            }\n            x = vUp[i] - 1;\n            y = x - start1 + start2 - k;\n            while (x >= start1 && y >= start2 && left[x] === right[y]) {\n              vUp[i] = x--;\n              y--;\n            }\n            if (delta % 2 === 0 && -d <= k && k <= d) {\n              if (vUp[i] <= vDown[i + delta]) {\n                return buildSnake(vUp[i], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n        }\n      };\n      var script = [];\n      buildScript(0, left.length, 0, right.length, script);\n      return script;\n    };\n\n    var getOuterHtml = function (elm) {\n      if (isElement$5(elm)) {\n        return elm.outerHTML;\n      } else if (isText$7(elm)) {\n        return Entities.encodeRaw(elm.data, false);\n      } else if (isComment(elm)) {\n        return '<!--' + elm.data + '-->';\n      }\n      return '';\n    };\n    var createFragment = function (html) {\n      var node;\n      var container = document.createElement('div');\n      var frag = document.createDocumentFragment();\n      if (html) {\n        container.innerHTML = html;\n      }\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var insertAt = function (elm, html, index) {\n      var fragment = createFragment(html);\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.insertBefore(fragment, target);\n      } else {\n        elm.appendChild(fragment);\n      }\n    };\n    var removeAt = function (elm, index) {\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.removeChild(target);\n      }\n    };\n    var applyDiff = function (diff, elm) {\n      var index = 0;\n      each$k(diff, function (action) {\n        if (action[0] === KEEP) {\n          index++;\n        } else if (action[0] === INSERT) {\n          insertAt(elm, action[1], index);\n          index++;\n        } else if (action[0] === DELETE) {\n          removeAt(elm, index);\n        }\n      });\n    };\n    var read$2 = function (elm) {\n      return filter$4(map$3(from(elm.childNodes), getOuterHtml), function (item) {\n        return item.length > 0;\n      });\n    };\n    var write = function (fragments, elm) {\n      var currentFragments = map$3(from(elm.childNodes), getOuterHtml);\n      applyDiff(diff(currentFragments, fragments), elm);\n      return elm;\n    };\n\n    var lazyTempDocument = cached(function () {\n      return document.implementation.createHTMLDocument('undo');\n    });\n    var hasIframes = function (html) {\n      return html.indexOf('</iframe>') !== -1;\n    };\n    var createFragmentedLevel = function (fragments) {\n      return {\n        type: 'fragmented',\n        fragments: fragments,\n        content: '',\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createCompleteLevel = function (content) {\n      return {\n        type: 'complete',\n        fragments: null,\n        content: content,\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createFromEditor = function (editor) {\n      var fragments = read$2(editor.getBody());\n      var trimmedFragments = bind(fragments, function (html) {\n        var trimmed = trimInternal(editor.serializer, html);\n        return trimmed.length > 0 ? [trimmed] : [];\n      });\n      var content = trimmedFragments.join('');\n      return hasIframes(content) ? createFragmentedLevel(trimmedFragments) : createCompleteLevel(content);\n    };\n    var applyToEditor = function (editor, level, before) {\n      var bookmark = before ? level.beforeBookmark : level.bookmark;\n      if (level.type === 'fragmented') {\n        write(level.fragments, editor.getBody());\n      } else {\n        editor.setContent(level.content, {\n          format: 'raw',\n          no_selection: isNonNullable(bookmark) && isPathBookmark(bookmark) ? !bookmark.isFakeCaret : true\n        });\n      }\n      editor.selection.moveToBookmark(bookmark);\n    };\n    var getLevelContent = function (level) {\n      return level.type === 'fragmented' ? level.fragments.join('') : level.content;\n    };\n    var getCleanLevelContent = function (level) {\n      var elm = SugarElement.fromTag('body', lazyTempDocument());\n      set(elm, getLevelContent(level));\n      each$k(descendants(elm, '*[data-mce-bogus]'), unwrap);\n      return get$3(elm);\n    };\n    var hasEqualContent = function (level1, level2) {\n      return getLevelContent(level1) === getLevelContent(level2);\n    };\n    var hasEqualCleanedContent = function (level1, level2) {\n      return getCleanLevelContent(level1) === getCleanLevelContent(level2);\n    };\n    var isEq$1 = function (level1, level2) {\n      if (!level1 || !level2) {\n        return false;\n      } else if (hasEqualContent(level1, level2)) {\n        return true;\n      } else {\n        return hasEqualCleanedContent(level1, level2);\n      }\n    };\n\n    var isUnlocked = function (locks) {\n      return locks.get() === 0;\n    };\n\n    var setTyping = function (undoManager, typing, locks) {\n      if (isUnlocked(locks)) {\n        undoManager.typing = typing;\n      }\n    };\n    var endTyping = function (undoManager, locks) {\n      if (undoManager.typing) {\n        setTyping(undoManager, false, locks);\n        undoManager.add();\n      }\n    };\n    var endTypingLevelIgnoreLocks = function (undoManager) {\n      if (undoManager.typing) {\n        undoManager.typing = false;\n        undoManager.add();\n      }\n    };\n\n    var beforeChange$1 = function (editor, locks, beforeBookmark) {\n      if (isUnlocked(locks)) {\n        beforeBookmark.set(getUndoBookmark(editor.selection));\n      }\n    };\n    var addUndoLevel$1 = function (editor, undoManager, index, locks, beforeBookmark, level, event) {\n      var currentLevel = createFromEditor(editor);\n      level = level || {};\n      level = Tools.extend(level, currentLevel);\n      if (isUnlocked(locks) === false || editor.removed) {\n        return null;\n      }\n      var lastLevel = undoManager.data[index.get()];\n      if (editor.fire('BeforeAddUndo', {\n          level: level,\n          lastLevel: lastLevel,\n          originalEvent: event\n        }).isDefaultPrevented()) {\n        return null;\n      }\n      if (lastLevel && isEq$1(lastLevel, level)) {\n        return null;\n      }\n      if (undoManager.data[index.get()]) {\n        beforeBookmark.get().each(function (bm) {\n          undoManager.data[index.get()].beforeBookmark = bm;\n        });\n      }\n      var customUndoRedoLevels = getCustomUndoRedoLevels(editor);\n      if (customUndoRedoLevels) {\n        if (undoManager.data.length > customUndoRedoLevels) {\n          for (var i = 0; i < undoManager.data.length - 1; i++) {\n            undoManager.data[i] = undoManager.data[i + 1];\n          }\n          undoManager.data.length--;\n          index.set(undoManager.data.length);\n        }\n      }\n      level.bookmark = getUndoBookmark(editor.selection);\n      if (index.get() < undoManager.data.length - 1) {\n        undoManager.data.length = index.get() + 1;\n      }\n      undoManager.data.push(level);\n      index.set(undoManager.data.length - 1);\n      var args = {\n        level: level,\n        lastLevel: lastLevel,\n        originalEvent: event\n      };\n      if (index.get() > 0) {\n        editor.setDirty(true);\n        editor.fire('AddUndo', args);\n        editor.fire('change', args);\n      } else {\n        editor.fire('AddUndo', args);\n      }\n      return level;\n    };\n    var clear$1 = function (editor, undoManager, index) {\n      undoManager.data = [];\n      index.set(0);\n      undoManager.typing = false;\n      editor.fire('ClearUndos');\n    };\n    var extra$1 = function (editor, undoManager, index, callback1, callback2) {\n      if (undoManager.transact(callback1)) {\n        var bookmark = undoManager.data[index.get()].bookmark;\n        var lastLevel = undoManager.data[index.get() - 1];\n        applyToEditor(editor, lastLevel, true);\n        if (undoManager.transact(callback2)) {\n          undoManager.data[index.get() - 1].beforeBookmark = bookmark;\n        }\n      }\n    };\n    var redo$1 = function (editor, index, data) {\n      var level;\n      if (index.get() < data.length - 1) {\n        index.set(index.get() + 1);\n        level = data[index.get()];\n        applyToEditor(editor, level, false);\n        editor.setDirty(true);\n        editor.fire('Redo', { level: level });\n      }\n      return level;\n    };\n    var undo$1 = function (editor, undoManager, locks, index) {\n      var level;\n      if (undoManager.typing) {\n        undoManager.add();\n        undoManager.typing = false;\n        setTyping(undoManager, false, locks);\n      }\n      if (index.get() > 0) {\n        index.set(index.get() - 1);\n        level = undoManager.data[index.get()];\n        applyToEditor(editor, level, true);\n        editor.setDirty(true);\n        editor.fire('Undo', { level: level });\n      }\n      return level;\n    };\n    var reset$1 = function (undoManager) {\n      undoManager.clear();\n      undoManager.add();\n    };\n    var hasUndo$1 = function (editor, undoManager, index) {\n      return index.get() > 0 || undoManager.typing && undoManager.data[0] && !isEq$1(createFromEditor(editor), undoManager.data[0]);\n    };\n    var hasRedo$1 = function (undoManager, index) {\n      return index.get() < undoManager.data.length - 1 && !undoManager.typing;\n    };\n    var transact$1 = function (undoManager, locks, callback) {\n      endTyping(undoManager, locks);\n      undoManager.beforeChange();\n      undoManager.ignore(callback);\n      return undoManager.add();\n    };\n    var ignore$1 = function (locks, callback) {\n      try {\n        locks.set(locks.get() + 1);\n        callback();\n      } finally {\n        locks.set(locks.get() - 1);\n      }\n    };\n\n    var addVisualInternal = function (editor, elm) {\n      var dom = editor.dom;\n      var scope = isNonNullable(elm) ? elm : editor.getBody();\n      if (isUndefined(editor.hasVisual)) {\n        editor.hasVisual = isVisualAidsEnabled(editor);\n      }\n      each$k(dom.select('table,a', scope), function (matchedElm) {\n        switch (matchedElm.nodeName) {\n        case 'TABLE':\n          var cls = getVisualAidsTableClass(editor);\n          var value = dom.getAttrib(matchedElm, 'border');\n          if ((!value || value === '0') && editor.hasVisual) {\n            dom.addClass(matchedElm, cls);\n          } else {\n            dom.removeClass(matchedElm, cls);\n          }\n          break;\n        case 'A':\n          if (!dom.getAttrib(matchedElm, 'href')) {\n            var value_1 = dom.getAttrib(matchedElm, 'name') || matchedElm.id;\n            var cls_1 = getVisualAidsAnchorClass(editor);\n            if (value_1 && editor.hasVisual) {\n              dom.addClass(matchedElm, cls_1);\n            } else {\n              dom.removeClass(matchedElm, cls_1);\n            }\n          }\n          break;\n        }\n      });\n      editor.fire('VisualAid', {\n        element: elm,\n        hasVisual: editor.hasVisual\n      });\n    };\n\n    var makePlainAdaptor = function (editor) {\n      return {\n        undoManager: {\n          beforeChange: function (locks, beforeBookmark) {\n            return beforeChange$1(editor, locks, beforeBookmark);\n          },\n          add: function (undoManager, index, locks, beforeBookmark, level, event) {\n            return addUndoLevel$1(editor, undoManager, index, locks, beforeBookmark, level, event);\n          },\n          undo: function (undoManager, locks, index) {\n            return undo$1(editor, undoManager, locks, index);\n          },\n          redo: function (index, data) {\n            return redo$1(editor, index, data);\n          },\n          clear: function (undoManager, index) {\n            return clear$1(editor, undoManager, index);\n          },\n          reset: function (undoManager) {\n            return reset$1(undoManager);\n          },\n          hasUndo: function (undoManager, index) {\n            return hasUndo$1(editor, undoManager, index);\n          },\n          hasRedo: function (undoManager, index) {\n            return hasRedo$1(undoManager, index);\n          },\n          transact: function (undoManager, locks, callback) {\n            return transact$1(undoManager, locks, callback);\n          },\n          ignore: function (locks, callback) {\n            return ignore$1(locks, callback);\n          },\n          extra: function (undoManager, index, callback1, callback2) {\n            return extra$1(editor, undoManager, index, callback1, callback2);\n          }\n        },\n        formatter: {\n          match: function (name, vars, node, similar) {\n            return match$2(editor, name, vars, node, similar);\n          },\n          matchAll: function (names, vars) {\n            return matchAll(editor, names, vars);\n          },\n          matchNode: function (node, name, vars, similar) {\n            return matchNode(editor, node, name, vars, similar);\n          },\n          canApply: function (name) {\n            return canApply(editor, name);\n          },\n          closest: function (names) {\n            return closest(editor, names);\n          },\n          apply: function (name, vars, node) {\n            return applyFormat$1(editor, name, vars, node);\n          },\n          remove: function (name, vars, node, similar) {\n            return remove$1(editor, name, vars, node, similar);\n          },\n          toggle: function (name, vars, node) {\n            return toggle(editor, name, vars, node);\n          },\n          formatChanged: function (registeredFormatListeners, formats, callback, similar, vars) {\n            return formatChangedInternal(editor, registeredFormatListeners, formats, callback, similar, vars);\n          }\n        },\n        editor: {\n          getContent: function (args, format) {\n            return getContentInternal(editor, args, format);\n          },\n          setContent: function (content, args) {\n            return setContentInternal(editor, content, args);\n          },\n          insertContent: function (value, details) {\n            return insertHtmlAtCaret(editor, value, details);\n          },\n          addVisual: function (elm) {\n            return addVisualInternal(editor, elm);\n          }\n        },\n        selection: {\n          getContent: function (format, args) {\n            return getSelectedContentInternal(editor, format, args);\n          }\n        },\n        raw: {\n          getModel: function () {\n            return Optional.none();\n          }\n        }\n      };\n    };\n    var makeRtcAdaptor = function (rtcEditor) {\n      var defaultVars = function (vars) {\n        return isObject(vars) ? vars : {};\n      };\n      var undoManager = rtcEditor.undoManager, formatter = rtcEditor.formatter, editor = rtcEditor.editor, selection = rtcEditor.selection, raw = rtcEditor.raw;\n      return {\n        undoManager: {\n          beforeChange: undoManager.beforeChange,\n          add: undoManager.add,\n          undo: undoManager.undo,\n          redo: undoManager.redo,\n          clear: undoManager.clear,\n          reset: undoManager.reset,\n          hasUndo: undoManager.hasUndo,\n          hasRedo: undoManager.hasRedo,\n          transact: function (_undoManager, _locks, fn) {\n            return undoManager.transact(fn);\n          },\n          ignore: function (_locks, callback) {\n            return undoManager.ignore(callback);\n          },\n          extra: function (_undoManager, _index, callback1, callback2) {\n            return undoManager.extra(callback1, callback2);\n          }\n        },\n        formatter: {\n          match: function (name, vars, _node, similar) {\n            return formatter.match(name, defaultVars(vars), similar);\n          },\n          matchAll: formatter.matchAll,\n          matchNode: formatter.matchNode,\n          canApply: function (name) {\n            return formatter.canApply(name);\n          },\n          closest: function (names) {\n            return formatter.closest(names);\n          },\n          apply: function (name, vars, _node) {\n            return formatter.apply(name, defaultVars(vars));\n          },\n          remove: function (name, vars, _node, _similar) {\n            return formatter.remove(name, defaultVars(vars));\n          },\n          toggle: function (name, vars, _node) {\n            return formatter.toggle(name, defaultVars(vars));\n          },\n          formatChanged: function (_rfl, formats, callback, similar, vars) {\n            return formatter.formatChanged(formats, callback, similar, vars);\n          }\n        },\n        editor: {\n          getContent: function (args, _format) {\n            return editor.getContent(args);\n          },\n          setContent: function (content, args) {\n            return editor.setContent(content, args);\n          },\n          insertContent: function (content, _details) {\n            return editor.insertContent(content);\n          },\n          addVisual: editor.addVisual\n        },\n        selection: {\n          getContent: function (_format, args) {\n            return selection.getContent(args);\n          }\n        },\n        raw: {\n          getModel: function () {\n            return Optional.some(raw.getRawModel());\n          }\n        }\n      };\n    };\n    var makeNoopAdaptor = function () {\n      var nul = constant(null);\n      var empty = constant('');\n      return {\n        undoManager: {\n          beforeChange: noop,\n          add: nul,\n          undo: nul,\n          redo: nul,\n          clear: noop,\n          reset: noop,\n          hasUndo: never,\n          hasRedo: never,\n          transact: nul,\n          ignore: noop,\n          extra: noop\n        },\n        formatter: {\n          match: never,\n          matchAll: constant([]),\n          matchNode: constant(undefined),\n          canApply: never,\n          closest: empty,\n          apply: noop,\n          remove: noop,\n          toggle: noop,\n          formatChanged: constant({ unbind: noop })\n        },\n        editor: {\n          getContent: empty,\n          setContent: empty,\n          insertContent: noop,\n          addVisual: noop\n        },\n        selection: { getContent: empty },\n        raw: { getModel: constant(Optional.none()) }\n      };\n    };\n    var isRtc = function (editor) {\n      return has$2(editor.plugins, 'rtc');\n    };\n    var getRtcSetup = function (editor) {\n      return get$9(editor.plugins, 'rtc').bind(function (rtcPlugin) {\n        return Optional.from(rtcPlugin.setup);\n      });\n    };\n    var setup$i = function (editor) {\n      var editorCast = editor;\n      return getRtcSetup(editor).fold(function () {\n        editorCast.rtcInstance = makePlainAdaptor(editor);\n        return Optional.none();\n      }, function (setup) {\n        editorCast.rtcInstance = makeNoopAdaptor();\n        return Optional.some(function () {\n          return setup().then(function (rtcEditor) {\n            editorCast.rtcInstance = makeRtcAdaptor(rtcEditor);\n            return rtcEditor.rtc.isRemote;\n          });\n        });\n      });\n    };\n    var getRtcInstanceWithFallback = function (editor) {\n      return editor.rtcInstance ? editor.rtcInstance : makePlainAdaptor(editor);\n    };\n    var getRtcInstanceWithError = function (editor) {\n      var rtcInstance = editor.rtcInstance;\n      if (!rtcInstance) {\n        throw new Error('Failed to get RTC instance not yet initialized.');\n      } else {\n        return rtcInstance;\n      }\n    };\n    var beforeChange = function (editor, locks, beforeBookmark) {\n      getRtcInstanceWithError(editor).undoManager.beforeChange(locks, beforeBookmark);\n    };\n    var addUndoLevel = function (editor, undoManager, index, locks, beforeBookmark, level, event) {\n      return getRtcInstanceWithError(editor).undoManager.add(undoManager, index, locks, beforeBookmark, level, event);\n    };\n    var undo = function (editor, undoManager, locks, index) {\n      return getRtcInstanceWithError(editor).undoManager.undo(undoManager, locks, index);\n    };\n    var redo = function (editor, index, data) {\n      return getRtcInstanceWithError(editor).undoManager.redo(index, data);\n    };\n    var clear = function (editor, undoManager, index) {\n      getRtcInstanceWithError(editor).undoManager.clear(undoManager, index);\n    };\n    var reset = function (editor, undoManager) {\n      getRtcInstanceWithError(editor).undoManager.reset(undoManager);\n    };\n    var hasUndo = function (editor, undoManager, index) {\n      return getRtcInstanceWithError(editor).undoManager.hasUndo(undoManager, index);\n    };\n    var hasRedo = function (editor, undoManager, index) {\n      return getRtcInstanceWithError(editor).undoManager.hasRedo(undoManager, index);\n    };\n    var transact = function (editor, undoManager, locks, callback) {\n      return getRtcInstanceWithError(editor).undoManager.transact(undoManager, locks, callback);\n    };\n    var ignore = function (editor, locks, callback) {\n      getRtcInstanceWithError(editor).undoManager.ignore(locks, callback);\n    };\n    var extra = function (editor, undoManager, index, callback1, callback2) {\n      getRtcInstanceWithError(editor).undoManager.extra(undoManager, index, callback1, callback2);\n    };\n    var matchFormat = function (editor, name, vars, node, similar) {\n      return getRtcInstanceWithError(editor).formatter.match(name, vars, node, similar);\n    };\n    var matchAllFormats = function (editor, names, vars) {\n      return getRtcInstanceWithError(editor).formatter.matchAll(names, vars);\n    };\n    var matchNodeFormat = function (editor, node, name, vars, similar) {\n      return getRtcInstanceWithError(editor).formatter.matchNode(node, name, vars, similar);\n    };\n    var canApplyFormat = function (editor, name) {\n      return getRtcInstanceWithError(editor).formatter.canApply(name);\n    };\n    var closestFormat = function (editor, names) {\n      return getRtcInstanceWithError(editor).formatter.closest(names);\n    };\n    var applyFormat = function (editor, name, vars, node) {\n      getRtcInstanceWithError(editor).formatter.apply(name, vars, node);\n    };\n    var removeFormat = function (editor, name, vars, node, similar) {\n      getRtcInstanceWithError(editor).formatter.remove(name, vars, node, similar);\n    };\n    var toggleFormat = function (editor, name, vars, node) {\n      getRtcInstanceWithError(editor).formatter.toggle(name, vars, node);\n    };\n    var formatChanged = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\n      return getRtcInstanceWithError(editor).formatter.formatChanged(registeredFormatListeners, formats, callback, similar, vars);\n    };\n    var getContent$2 = function (editor, args, format) {\n      return getRtcInstanceWithFallback(editor).editor.getContent(args, format);\n    };\n    var setContent$2 = function (editor, content, args) {\n      return getRtcInstanceWithFallback(editor).editor.setContent(content, args);\n    };\n    var insertContent = function (editor, value, details) {\n      return getRtcInstanceWithFallback(editor).editor.insertContent(value, details);\n    };\n    var getSelectedContent = function (editor, format, args) {\n      return getRtcInstanceWithError(editor).selection.getContent(format, args);\n    };\n    var addVisual$1 = function (editor, elm) {\n      return getRtcInstanceWithError(editor).editor.addVisual(elm);\n    };\n\n    var getContent$1 = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var format = args.format ? args.format : 'html';\n      return getSelectedContent(editor, format, args);\n    };\n\n    var removeEmpty = function (text) {\n      if (text.dom.length === 0) {\n        remove$7(text);\n        return Optional.none();\n      } else {\n        return Optional.some(text);\n      }\n    };\n    var walkPastBookmark = function (node, start) {\n      return node.filter(function (elm) {\n        return BookmarkManager.isBookmarkNode(elm.dom);\n      }).bind(start ? nextSibling : prevSibling);\n    };\n    var merge = function (outer, inner, rng, start) {\n      var outerElm = outer.dom;\n      var innerElm = inner.dom;\n      var oldLength = start ? outerElm.length : innerElm.length;\n      if (start) {\n        mergeTextNodes(outerElm, innerElm, false, !start);\n        rng.setStart(innerElm, oldLength);\n      } else {\n        mergeTextNodes(innerElm, outerElm, false, !start);\n        rng.setEnd(innerElm, oldLength);\n      }\n    };\n    var normalizeTextIfRequired = function (inner, start) {\n      parent(inner).each(function (root) {\n        var text = inner.dom;\n        if (start && needsToBeNbspLeft(root, CaretPosition(text, 0))) {\n          normalizeWhitespaceAfter(text, 0);\n        } else if (!start && needsToBeNbspRight(root, CaretPosition(text, text.length))) {\n          normalizeWhitespaceBefore(text, text.length);\n        }\n      });\n    };\n    var mergeAndNormalizeText = function (outerNode, innerNode, rng, start) {\n      outerNode.bind(function (outer) {\n        var normalizer = start ? normalizeWhitespaceBefore : normalizeWhitespaceAfter;\n        normalizer(outer.dom, start ? outer.dom.length : 0);\n        return innerNode.filter(isText$8).map(function (inner) {\n          return merge(outer, inner, rng, start);\n        });\n      }).orThunk(function () {\n        var innerTextNode = walkPastBookmark(innerNode, start).or(innerNode).filter(isText$8);\n        return innerTextNode.map(function (inner) {\n          return normalizeTextIfRequired(inner, start);\n        });\n      });\n    };\n    var rngSetContent = function (rng, fragment) {\n      var firstChild = Optional.from(fragment.firstChild).map(SugarElement.fromDom);\n      var lastChild = Optional.from(fragment.lastChild).map(SugarElement.fromDom);\n      rng.deleteContents();\n      rng.insertNode(fragment);\n      var prevText = firstChild.bind(prevSibling).filter(isText$8).bind(removeEmpty);\n      var nextText = lastChild.bind(nextSibling).filter(isText$8).bind(removeEmpty);\n      mergeAndNormalizeText(prevText, firstChild, rng, true);\n      mergeAndNormalizeText(nextText, lastChild, rng, false);\n      rng.collapse(false);\n    };\n    var setupArgs = function (args, content) {\n      return __assign(__assign({ format: 'html' }, args), {\n        set: true,\n        selection: true,\n        content: content\n      });\n    };\n    var cleanContent = function (editor, args) {\n      if (args.format !== 'raw') {\n        var rng = editor.selection.getRng();\n        var contextBlock = editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock);\n        var contextArgs = contextBlock ? { context: contextBlock.nodeName.toLowerCase() } : {};\n        var node = editor.parser.parse(args.content, __assign(__assign({\n          isRootContent: true,\n          forced_root_block: false\n        }, contextArgs), args));\n        return HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(node);\n      } else {\n        return args.content;\n      }\n    };\n    var setContent$1 = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var defaultedArgs = setupArgs(args, content);\n      var updatedArgs = defaultedArgs;\n      if (!defaultedArgs.no_events) {\n        var eventArgs = editor.fire('BeforeSetContent', defaultedArgs);\n        if (eventArgs.isDefaultPrevented()) {\n          editor.fire('SetContent', eventArgs);\n          return;\n        } else {\n          updatedArgs = eventArgs;\n        }\n      }\n      updatedArgs.content = cleanContent(editor, updatedArgs);\n      var rng = editor.selection.getRng();\n      rngSetContent(rng, rng.createContextualFragment(updatedArgs.content));\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n      if (!updatedArgs.no_events) {\n        editor.fire('SetContent', updatedArgs);\n      }\n    };\n\n    var deleteFromCallbackMap = function (callbackMap, selector, callback) {\n      if (callbackMap && has$2(callbackMap, selector)) {\n        var newCallbacks = filter$4(callbackMap[selector], function (cb) {\n          return cb !== callback;\n        });\n        if (newCallbacks.length === 0) {\n          delete callbackMap[selector];\n        } else {\n          callbackMap[selector] = newCallbacks;\n        }\n      }\n    };\n    function SelectorChanged (dom, editor) {\n      var selectorChangedData;\n      var currentSelectors;\n      var findMatchingNode = function (selector, nodes) {\n        return find$3(nodes, function (node) {\n          return dom.is(node, selector);\n        });\n      };\n      var getParents = function (elem) {\n        return dom.getParents(elem, null, dom.getRoot());\n      };\n      return {\n        selectorChangedWithUnbind: function (selector, callback) {\n          if (!selectorChangedData) {\n            selectorChangedData = {};\n            currentSelectors = {};\n            editor.on('NodeChange', function (e) {\n              var node = e.element;\n              var parents = getParents(node);\n              var matchedSelectors = {};\n              Tools.each(selectorChangedData, function (callbacks, selector) {\n                findMatchingNode(selector, parents).each(function (node) {\n                  if (!currentSelectors[selector]) {\n                    each$k(callbacks, function (callback) {\n                      callback(true, {\n                        node: node,\n                        selector: selector,\n                        parents: parents\n                      });\n                    });\n                    currentSelectors[selector] = callbacks;\n                  }\n                  matchedSelectors[selector] = callbacks;\n                });\n              });\n              Tools.each(currentSelectors, function (callbacks, selector) {\n                if (!matchedSelectors[selector]) {\n                  delete currentSelectors[selector];\n                  Tools.each(callbacks, function (callback) {\n                    callback(false, {\n                      node: node,\n                      selector: selector,\n                      parents: parents\n                    });\n                  });\n                }\n              });\n            });\n          }\n          if (!selectorChangedData[selector]) {\n            selectorChangedData[selector] = [];\n          }\n          selectorChangedData[selector].push(callback);\n          findMatchingNode(selector, getParents(editor.selection.getStart())).each(function () {\n            currentSelectors[selector] = selectorChangedData[selector];\n          });\n          return {\n            unbind: function () {\n              deleteFromCallbackMap(selectorChangedData, selector, callback);\n              deleteFromCallbackMap(currentSelectors, selector, callback);\n            }\n          };\n        }\n      };\n    }\n\n    var isNativeIeSelection = function (rng) {\n      return !!rng.select;\n    };\n    var isAttachedToDom = function (node) {\n      return !!(node && node.ownerDocument) && contains$1(SugarElement.fromDom(node.ownerDocument), SugarElement.fromDom(node));\n    };\n    var isValidRange = function (rng) {\n      if (!rng) {\n        return false;\n      } else if (isNativeIeSelection(rng)) {\n        return true;\n      } else {\n        return isAttachedToDom(rng.startContainer) && isAttachedToDom(rng.endContainer);\n      }\n    };\n    var EditorSelection = function (dom, win, serializer, editor) {\n      var selectedRange;\n      var explicitRange;\n      var selectorChangedWithUnbind = SelectorChanged(dom, editor).selectorChangedWithUnbind;\n      var setCursorLocation = function (node, offset) {\n        var rng = dom.createRng();\n        if (isNonNullable(node) && isNonNullable(offset)) {\n          rng.setStart(node, offset);\n          rng.setEnd(node, offset);\n          setRng(rng);\n          collapse(false);\n        } else {\n          moveEndPoint(dom, rng, editor.getBody(), true);\n          setRng(rng);\n        }\n      };\n      var getContent = function (args) {\n        return getContent$1(editor, args);\n      };\n      var setContent = function (content, args) {\n        return setContent$1(editor, content, args);\n      };\n      var getStart$1 = function (real) {\n        return getStart(editor.getBody(), getRng$1(), real);\n      };\n      var getEnd$1 = function (real) {\n        return getEnd(editor.getBody(), getRng$1(), real);\n      };\n      var getBookmark = function (type, normalized) {\n        return bookmarkManager.getBookmark(type, normalized);\n      };\n      var moveToBookmark = function (bookmark) {\n        return bookmarkManager.moveToBookmark(bookmark);\n      };\n      var select$1 = function (node, content) {\n        select(dom, node, content).each(setRng);\n        return node;\n      };\n      var isCollapsed = function () {\n        var rng = getRng$1(), sel = getSel();\n        if (!rng || rng.item) {\n          return false;\n        }\n        if (rng.compareEndPoints) {\n          return rng.compareEndPoints('StartToEnd', rng) === 0;\n        }\n        return !sel || rng.collapsed;\n      };\n      var collapse = function (toStart) {\n        var rng = getRng$1();\n        rng.collapse(!!toStart);\n        setRng(rng);\n      };\n      var getSel = function () {\n        return win.getSelection ? win.getSelection() : win.document.selection;\n      };\n      var getRng$1 = function () {\n        var selection, rng, elm;\n        var tryCompareBoundaryPoints = function (how, sourceRange, destinationRange) {\n          try {\n            return sourceRange.compareBoundaryPoints(how, destinationRange);\n          } catch (ex) {\n            return -1;\n          }\n        };\n        var doc = win.document;\n        if (editor.bookmark !== undefined && hasFocus(editor) === false) {\n          var bookmark = getRng(editor);\n          if (bookmark.isSome()) {\n            return bookmark.map(function (r) {\n              return processRanges(editor, [r])[0];\n            }).getOr(doc.createRange());\n          }\n        }\n        try {\n          if ((selection = getSel()) && !isRestrictedNode(selection.anchorNode)) {\n            if (selection.rangeCount > 0) {\n              rng = selection.getRangeAt(0);\n            } else {\n              rng = selection.createRange ? selection.createRange() : doc.createRange();\n            }\n            rng = processRanges(editor, [rng])[0];\n          }\n        } catch (ex) {\n        }\n        if (!rng) {\n          rng = doc.createRange ? doc.createRange() : doc.body.createTextRange();\n        }\n        if (rng.setStart && rng.startContainer.nodeType === 9 && rng.collapsed) {\n          elm = dom.getRoot();\n          rng.setStart(elm, 0);\n          rng.setEnd(elm, 0);\n        }\n        if (selectedRange && explicitRange) {\n          if (tryCompareBoundaryPoints(rng.START_TO_START, rng, selectedRange) === 0 && tryCompareBoundaryPoints(rng.END_TO_END, rng, selectedRange) === 0) {\n            rng = explicitRange;\n          } else {\n            selectedRange = null;\n            explicitRange = null;\n          }\n        }\n        return rng;\n      };\n      var setRng = function (rng, forward) {\n        var node;\n        if (!isValidRange(rng)) {\n          return;\n        }\n        var ieRange = isNativeIeSelection(rng) ? rng : null;\n        if (ieRange) {\n          explicitRange = null;\n          try {\n            ieRange.select();\n          } catch (ex) {\n          }\n          return;\n        }\n        var sel = getSel();\n        var evt = editor.fire('SetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n        rng = evt.range;\n        if (sel) {\n          explicitRange = rng;\n          try {\n            sel.removeAllRanges();\n            sel.addRange(rng);\n          } catch (ex) {\n          }\n          if (forward === false && sel.extend) {\n            sel.collapse(rng.endContainer, rng.endOffset);\n            sel.extend(rng.startContainer, rng.startOffset);\n          }\n          selectedRange = sel.rangeCount > 0 ? sel.getRangeAt(0) : null;\n        }\n        if (!rng.collapsed && rng.startContainer === rng.endContainer && sel.setBaseAndExtent && !Env.ie) {\n          if (rng.endOffset - rng.startOffset < 2) {\n            if (rng.startContainer.hasChildNodes()) {\n              node = rng.startContainer.childNodes[rng.startOffset];\n              if (node && node.tagName === 'IMG') {\n                sel.setBaseAndExtent(rng.startContainer, rng.startOffset, rng.endContainer, rng.endOffset);\n                if (sel.anchorNode !== rng.startContainer || sel.focusNode !== rng.endContainer) {\n                  sel.setBaseAndExtent(node, 0, node, 1);\n                }\n              }\n            }\n          }\n        }\n        editor.fire('AfterSetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n      };\n      var setNode = function (elm) {\n        setContent(dom.getOuterHTML(elm));\n        return elm;\n      };\n      var getNode$1 = function () {\n        return getNode(editor.getBody(), getRng$1());\n      };\n      var getSelectedBlocks$1 = function (startElm, endElm) {\n        return getSelectedBlocks(dom, getRng$1(), startElm, endElm);\n      };\n      var isForward = function () {\n        var sel = getSel();\n        var anchorNode = sel === null || sel === void 0 ? void 0 : sel.anchorNode;\n        var focusNode = sel === null || sel === void 0 ? void 0 : sel.focusNode;\n        if (!sel || !anchorNode || !focusNode || isRestrictedNode(anchorNode) || isRestrictedNode(focusNode)) {\n          return true;\n        }\n        var anchorRange = dom.createRng();\n        anchorRange.setStart(anchorNode, sel.anchorOffset);\n        anchorRange.collapse(true);\n        var focusRange = dom.createRng();\n        focusRange.setStart(focusNode, sel.focusOffset);\n        focusRange.collapse(true);\n        return anchorRange.compareBoundaryPoints(anchorRange.START_TO_START, focusRange) <= 0;\n      };\n      var normalize = function () {\n        var rng = getRng$1();\n        var sel = getSel();\n        if (!hasMultipleRanges(sel) && hasAnyRanges(editor)) {\n          var normRng = normalize$2(dom, rng);\n          normRng.each(function (normRng) {\n            setRng(normRng, isForward());\n          });\n          return normRng.getOr(rng);\n        }\n        return rng;\n      };\n      var selectorChanged = function (selector, callback) {\n        selectorChangedWithUnbind(selector, callback);\n        return exports;\n      };\n      var getScrollContainer = function () {\n        var scrollContainer;\n        var node = dom.getRoot();\n        while (node && node.nodeName !== 'BODY') {\n          if (node.scrollHeight > node.clientHeight) {\n            scrollContainer = node;\n            break;\n          }\n          node = node.parentNode;\n        }\n        return scrollContainer;\n      };\n      var scrollIntoView = function (elm, alignToTop) {\n        if (isNonNullable(elm)) {\n          scrollElementIntoView(editor, elm, alignToTop);\n        } else {\n          scrollRangeIntoView(editor, getRng$1(), alignToTop);\n        }\n      };\n      var placeCaretAt = function (clientX, clientY) {\n        return setRng(fromPoint(clientX, clientY, editor.getDoc()));\n      };\n      var getBoundingClientRect = function () {\n        var rng = getRng$1();\n        return rng.collapsed ? CaretPosition.fromRangeStart(rng).getClientRects()[0] : rng.getBoundingClientRect();\n      };\n      var destroy = function () {\n        win = selectedRange = explicitRange = null;\n        controlSelection.destroy();\n      };\n      var exports = {\n        bookmarkManager: null,\n        controlSelection: null,\n        dom: dom,\n        win: win,\n        serializer: serializer,\n        editor: editor,\n        collapse: collapse,\n        setCursorLocation: setCursorLocation,\n        getContent: getContent,\n        setContent: setContent,\n        getBookmark: getBookmark,\n        moveToBookmark: moveToBookmark,\n        select: select$1,\n        isCollapsed: isCollapsed,\n        isForward: isForward,\n        setNode: setNode,\n        getNode: getNode$1,\n        getSel: getSel,\n        setRng: setRng,\n        getRng: getRng$1,\n        getStart: getStart$1,\n        getEnd: getEnd$1,\n        getSelectedBlocks: getSelectedBlocks$1,\n        normalize: normalize,\n        selectorChanged: selectorChanged,\n        selectorChangedWithUnbind: selectorChangedWithUnbind,\n        getScrollContainer: getScrollContainer,\n        scrollIntoView: scrollIntoView,\n        placeCaretAt: placeCaretAt,\n        getBoundingClientRect: getBoundingClientRect,\n        destroy: destroy\n      };\n      var bookmarkManager = BookmarkManager(exports);\n      var controlSelection = ControlSelection(exports, editor);\n      exports.bookmarkManager = bookmarkManager;\n      exports.controlSelection = controlSelection;\n      return exports;\n    };\n\n    var removeAttrs = function (node, names) {\n      each$k(names, function (name) {\n        node.attr(name, null);\n      });\n    };\n    var addFontToSpansFilter = function (domParser, styles, fontSizes) {\n      domParser.addNodeFilter('font', function (nodes) {\n        each$k(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          var color = node.attr('color');\n          var face = node.attr('face');\n          var size = node.attr('size');\n          if (color) {\n            props.color = color;\n          }\n          if (face) {\n            props['font-family'] = face;\n          }\n          if (size) {\n            props['font-size'] = fontSizes[parseInt(node.attr('size'), 10) - 1];\n          }\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n          removeAttrs(node, [\n            'color',\n            'face',\n            'size'\n          ]);\n        });\n      });\n    };\n    var addStrikeToSpanFilter = function (domParser, styles) {\n      domParser.addNodeFilter('strike', function (nodes) {\n        each$k(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          props['text-decoration'] = 'line-through';\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n        });\n      });\n    };\n    var addFilters = function (domParser, settings) {\n      var styles = Styles();\n      if (settings.convert_fonts_to_spans) {\n        addFontToSpansFilter(domParser, styles, Tools.explode(settings.font_size_legacy_values));\n      }\n      addStrikeToSpanFilter(domParser, styles);\n    };\n    var register$2 = function (domParser, settings) {\n      if (settings.inline_styles) {\n        addFilters(domParser, settings);\n      }\n    };\n\n    var blobUriToBlob = function (url) {\n      return new promiseObj(function (resolve, reject) {\n        var rejectWithError = function () {\n          reject('Cannot convert ' + url + ' to Blob. Resource might not exist or is inaccessible.');\n        };\n        try {\n          var xhr_1 = new XMLHttpRequest();\n          xhr_1.open('GET', url, true);\n          xhr_1.responseType = 'blob';\n          xhr_1.onload = function () {\n            if (xhr_1.status === 200) {\n              resolve(xhr_1.response);\n            } else {\n              rejectWithError();\n            }\n          };\n          xhr_1.onerror = rejectWithError;\n          xhr_1.send();\n        } catch (ex) {\n          rejectWithError();\n        }\n      });\n    };\n    var parseDataUri = function (uri) {\n      var type;\n      var uriParts = decodeURIComponent(uri).split(',');\n      var matches = /data:([^;]+)/.exec(uriParts[0]);\n      if (matches) {\n        type = matches[1];\n      }\n      return {\n        type: type,\n        data: uriParts[1]\n      };\n    };\n    var buildBlob = function (type, data) {\n      var str;\n      try {\n        str = atob(data);\n      } catch (e) {\n        return Optional.none();\n      }\n      var arr = new Uint8Array(str.length);\n      for (var i = 0; i < arr.length; i++) {\n        arr[i] = str.charCodeAt(i);\n      }\n      return Optional.some(new Blob([arr], { type: type }));\n    };\n    var dataUriToBlob = function (uri) {\n      return new promiseObj(function (resolve) {\n        var _a = parseDataUri(uri), type = _a.type, data = _a.data;\n        buildBlob(type, data).fold(function () {\n          return resolve(new Blob([]));\n        }, resolve);\n      });\n    };\n    var uriToBlob = function (url) {\n      if (url.indexOf('blob:') === 0) {\n        return blobUriToBlob(url);\n      }\n      if (url.indexOf('data:') === 0) {\n        return dataUriToBlob(url);\n      }\n      return null;\n    };\n    var blobToDataUri = function (blob) {\n      return new promiseObj(function (resolve) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n\n    var count$1 = 0;\n    var uniqueId = function (prefix) {\n      return (prefix || 'blobid') + count$1++;\n    };\n    var imageToBlobInfo = function (blobCache, img, resolve, reject) {\n      var base64, blobInfo;\n      if (img.src.indexOf('blob:') === 0) {\n        blobInfo = blobCache.getByUri(img.src);\n        if (blobInfo) {\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        } else {\n          uriToBlob(img.src).then(function (blob) {\n            blobToDataUri(blob).then(function (dataUri) {\n              base64 = parseDataUri(dataUri).data;\n              blobInfo = blobCache.create(uniqueId(), blob, base64);\n              blobCache.add(blobInfo);\n              resolve({\n                image: img,\n                blobInfo: blobInfo\n              });\n            });\n          }, function (err) {\n            reject(err);\n          });\n        }\n        return;\n      }\n      var _a = parseDataUri(img.src), data = _a.data, type = _a.type;\n      base64 = data;\n      blobInfo = blobCache.getByData(base64, type);\n      if (blobInfo) {\n        resolve({\n          image: img,\n          blobInfo: blobInfo\n        });\n      } else {\n        uriToBlob(img.src).then(function (blob) {\n          blobInfo = blobCache.create(uniqueId(), blob, base64);\n          blobCache.add(blobInfo);\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        }, function (err) {\n          reject(err);\n        });\n      }\n    };\n    var getAllImages = function (elm) {\n      return elm ? from(elm.getElementsByTagName('img')) : [];\n    };\n    var ImageScanner = function (uploadStatus, blobCache) {\n      var cachedPromises = {};\n      var findAll = function (elm, predicate) {\n        if (!predicate) {\n          predicate = always;\n        }\n        var images = filter$4(getAllImages(elm), function (img) {\n          var src = img.src;\n          if (!Env.fileApi) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-bogus')) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-placeholder')) {\n            return false;\n          }\n          if (!src || src === Env.transparentSrc) {\n            return false;\n          }\n          if (src.indexOf('blob:') === 0) {\n            return !uploadStatus.isUploaded(src) && predicate(img);\n          }\n          if (src.indexOf('data:') === 0) {\n            return predicate(img);\n          }\n          return false;\n        });\n        var promises = map$3(images, function (img) {\n          if (cachedPromises[img.src] !== undefined) {\n            return new promiseObj(function (resolve) {\n              cachedPromises[img.src].then(function (imageInfo) {\n                if (typeof imageInfo === 'string') {\n                  return imageInfo;\n                }\n                resolve({\n                  image: img,\n                  blobInfo: imageInfo.blobInfo\n                });\n              });\n            });\n          }\n          var newPromise = new promiseObj(function (resolve, reject) {\n            imageToBlobInfo(blobCache, img, resolve, reject);\n          }).then(function (result) {\n            delete cachedPromises[result.image.src];\n            return result;\n          }).catch(function (error) {\n            delete cachedPromises[img.src];\n            return error;\n          });\n          cachedPromises[img.src] = newPromise;\n          return newPromise;\n        });\n        return promiseObj.all(promises);\n      };\n      return { findAll: findAll };\n    };\n\n    var paddEmptyNode = function (settings, args, blockElements, node) {\n      var brPreferred = settings.padd_empty_with_br || args.insert;\n      if (brPreferred && blockElements[node.name]) {\n        node.empty().append(new AstNode('br', 1)).shortEnded = true;\n      } else {\n        node.empty().append(new AstNode('#text', 3)).value = nbsp;\n      }\n    };\n    var isPaddedWithNbsp = function (node) {\n      return hasOnlyChild(node, '#text') && node.firstChild.value === nbsp;\n    };\n    var hasOnlyChild = function (node, name) {\n      return node && node.firstChild && node.firstChild === node.lastChild && node.firstChild.name === name;\n    };\n    var isPadded = function (schema, node) {\n      var rule = schema.getElementRule(node.name);\n      return rule && rule.paddEmpty;\n    };\n    var isEmpty = function (schema, nonEmptyElements, whitespaceElements, node) {\n      return node.isEmpty(nonEmptyElements, whitespaceElements, function (node) {\n        return isPadded(schema, node);\n      });\n    };\n    var isLineBreakNode = function (node, blockElements) {\n      return node && (has$2(blockElements, node.name) || node.name === 'br');\n    };\n\n    var isBogusImage = function (img) {\n      return isNonNullable(img.attr('data-mce-bogus'));\n    };\n    var isInternalImageSource = function (img) {\n      return img.attr('src') === Env.transparentSrc || isNonNullable(img.attr('data-mce-placeholder'));\n    };\n    var isValidDataImg = function (img, settings) {\n      if (settings.images_dataimg_filter) {\n        var imgElem_1 = new Image();\n        imgElem_1.src = img.attr('src');\n        each$j(img.attributes.map, function (value, key) {\n          imgElem_1.setAttribute(key, value);\n        });\n        return settings.images_dataimg_filter(imgElem_1);\n      } else {\n        return true;\n      }\n    };\n    var registerBase64ImageFilter = function (parser, settings) {\n      var blobCache = settings.blob_cache;\n      var processImage = function (img) {\n        var inputSrc = img.attr('src');\n        if (isInternalImageSource(img) || isBogusImage(img)) {\n          return;\n        }\n        parseDataUri$1(inputSrc).filter(function () {\n          return isValidDataImg(img, settings);\n        }).bind(function (_a) {\n          var type = _a.type, data = _a.data;\n          return Optional.from(blobCache.getByData(data, type)).orThunk(function () {\n            return buildBlob(type, data).map(function (blob) {\n              var blobInfo = blobCache.create(uniqueId(), blob, data);\n              blobCache.add(blobInfo);\n              return blobInfo;\n            });\n          });\n        }).each(function (blobInfo) {\n          img.attr('src', blobInfo.blobUri());\n        });\n      };\n      if (blobCache) {\n        parser.addAttributeFilter('src', function (nodes) {\n          return each$k(nodes, processImage);\n        });\n      }\n    };\n    var register$1 = function (parser, settings) {\n      var schema = parser.schema;\n      if (settings.remove_trailing_brs) {\n        parser.addNodeFilter('br', function (nodes, _, args) {\n          var i;\n          var l = nodes.length;\n          var node;\n          var blockElements = Tools.extend({}, schema.getBlockElements());\n          var nonEmptyElements = schema.getNonEmptyElements();\n          var parent, lastParent, prev, prevName;\n          var whiteSpaceElements = schema.getWhiteSpaceElements();\n          var elementRule, textNode;\n          blockElements.body = 1;\n          for (i = 0; i < l; i++) {\n            node = nodes[i];\n            parent = node.parent;\n            if (blockElements[node.parent.name] && node === parent.lastChild) {\n              prev = node.prev;\n              while (prev) {\n                prevName = prev.name;\n                if (prevName !== 'span' || prev.attr('data-mce-type') !== 'bookmark') {\n                  if (prevName === 'br') {\n                    node = null;\n                  }\n                  break;\n                }\n                prev = prev.prev;\n              }\n              if (node) {\n                node.remove();\n                if (isEmpty(schema, nonEmptyElements, whiteSpaceElements, parent)) {\n                  elementRule = schema.getElementRule(parent.name);\n                  if (elementRule) {\n                    if (elementRule.removeEmpty) {\n                      parent.remove();\n                    } else if (elementRule.paddEmpty) {\n                      paddEmptyNode(settings, args, blockElements, parent);\n                    }\n                  }\n                }\n              }\n            } else {\n              lastParent = node;\n              while (parent && parent.firstChild === lastParent && parent.lastChild === lastParent) {\n                lastParent = parent;\n                if (blockElements[parent.name]) {\n                  break;\n                }\n                parent = parent.parent;\n              }\n              if (lastParent === parent && settings.padd_empty_with_br !== true) {\n                textNode = new AstNode('#text', 3);\n                textNode.value = nbsp;\n                node.replace(textNode);\n              }\n            }\n          }\n        });\n      }\n      parser.addAttributeFilter('href', function (nodes) {\n        var i = nodes.length;\n        var appendRel = function (rel) {\n          var parts = rel.split(' ').filter(function (p) {\n            return p.length > 0;\n          });\n          return parts.concat(['noopener']).sort().join(' ');\n        };\n        var addNoOpener = function (rel) {\n          var newRel = rel ? Tools.trim(rel) : '';\n          if (!/\\b(noopener)\\b/g.test(newRel)) {\n            return appendRel(newRel);\n          } else {\n            return newRel;\n          }\n        };\n        if (!settings.allow_unsafe_link_target) {\n          while (i--) {\n            var node = nodes[i];\n            if (node.name === 'a' && node.attr('target') === '_blank') {\n              node.attr('rel', addNoOpener(node.attr('rel')));\n            }\n          }\n        }\n      });\n      if (!settings.allow_html_in_named_anchor) {\n        parser.addAttributeFilter('id,name', function (nodes) {\n          var i = nodes.length, sibling, prevSibling, parent, node;\n          while (i--) {\n            node = nodes[i];\n            if (node.name === 'a' && node.firstChild && !node.attr('href')) {\n              parent = node.parent;\n              sibling = node.lastChild;\n              do {\n                prevSibling = sibling.prev;\n                parent.insert(sibling, node);\n                sibling = prevSibling;\n              } while (sibling);\n            }\n          }\n        });\n      }\n      if (settings.fix_list_elements) {\n        parser.addNodeFilter('ul,ol', function (nodes) {\n          var i = nodes.length, node, parentNode;\n          while (i--) {\n            node = nodes[i];\n            parentNode = node.parent;\n            if (parentNode.name === 'ul' || parentNode.name === 'ol') {\n              if (node.prev && node.prev.name === 'li') {\n                node.prev.append(node);\n              } else {\n                var li = new AstNode('li', 1);\n                li.attr('style', 'list-style-type: none');\n                node.wrap(li);\n              }\n            }\n          }\n        });\n      }\n      if (settings.validate && schema.getValidClasses()) {\n        parser.addAttributeFilter('class', function (nodes) {\n          var validClasses = schema.getValidClasses();\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            var classList = node.attr('class').split(' ');\n            var classValue = '';\n            for (var ci = 0; ci < classList.length; ci++) {\n              var className = classList[ci];\n              var valid = false;\n              var validClassesMap = validClasses['*'];\n              if (validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              validClassesMap = validClasses[node.name];\n              if (!valid && validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              if (valid) {\n                if (classValue) {\n                  classValue += ' ';\n                }\n                classValue += className;\n              }\n            }\n            if (!classValue.length) {\n              classValue = null;\n            }\n            node.attr('class', classValue);\n          }\n        });\n      }\n      registerBase64ImageFilter(parser, settings);\n    };\n\n    var makeMap = Tools.makeMap, each$6 = Tools.each, explode$2 = Tools.explode, extend$4 = Tools.extend;\n    var DomParser = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var nodeFilters = {};\n      var attributeFilters = [];\n      var matchedNodes = {};\n      var matchedAttributes = {};\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      settings.root_name = settings.root_name || 'body';\n      var fixInvalidChildren = function (nodes) {\n        var nonSplitableElements = makeMap('tr,td,th,tbody,thead,tfoot,table');\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var whitespaceElements = schema.getWhiteSpaceElements();\n        var textBlockElements = schema.getTextBlockElements();\n        var specialElements = schema.getSpecialElements();\n        var removeOrUnwrapInvalidNode = function (node, originalNodeParent) {\n          if (originalNodeParent === void 0) {\n            originalNodeParent = node.parent;\n          }\n          if (specialElements[node.name]) {\n            node.empty().remove();\n          } else {\n            var children = node.children();\n            for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n              var childNode = children_1[_i];\n              if (!schema.isValidChild(originalNodeParent.name, childNode.name)) {\n                removeOrUnwrapInvalidNode(childNode, originalNodeParent);\n              }\n            }\n            node.unwrap();\n          }\n        };\n        for (var ni = 0; ni < nodes.length; ni++) {\n          var node = nodes[ni];\n          var parent_1 = void 0, newParent = void 0, tempNode = void 0;\n          if (!node.parent || node.fixed) {\n            continue;\n          }\n          if (textBlockElements[node.name] && node.parent.name === 'li') {\n            var sibling = node.next;\n            while (sibling) {\n              if (textBlockElements[sibling.name]) {\n                sibling.name = 'li';\n                sibling.fixed = true;\n                node.parent.insert(sibling, node.parent);\n              } else {\n                break;\n              }\n              sibling = sibling.next;\n            }\n            node.unwrap();\n            continue;\n          }\n          var parents = [node];\n          for (parent_1 = node.parent; parent_1 && !schema.isValidChild(parent_1.name, node.name) && !nonSplitableElements[parent_1.name]; parent_1 = parent_1.parent) {\n            parents.push(parent_1);\n          }\n          if (parent_1 && parents.length > 1) {\n            if (schema.isValidChild(parent_1.name, node.name)) {\n              parents.reverse();\n              newParent = filterNode(parents[0].clone());\n              var currentNode = newParent;\n              for (var i = 0; i < parents.length - 1; i++) {\n                if (schema.isValidChild(currentNode.name, parents[i].name)) {\n                  tempNode = filterNode(parents[i].clone());\n                  currentNode.append(tempNode);\n                } else {\n                  tempNode = currentNode;\n                }\n                for (var childNode = parents[i].firstChild; childNode && childNode !== parents[i + 1];) {\n                  var nextNode = childNode.next;\n                  tempNode.append(childNode);\n                  childNode = nextNode;\n                }\n                currentNode = tempNode;\n              }\n              if (!isEmpty(schema, nonEmptyElements, whitespaceElements, newParent)) {\n                parent_1.insert(newParent, parents[0], true);\n                parent_1.insert(node, newParent);\n              } else {\n                parent_1.insert(node, parents[0], true);\n              }\n              parent_1 = parents[0];\n              if (isEmpty(schema, nonEmptyElements, whitespaceElements, parent_1) || hasOnlyChild(parent_1, 'br')) {\n                parent_1.empty().remove();\n              }\n            } else {\n              removeOrUnwrapInvalidNode(node);\n            }\n          } else if (node.parent) {\n            if (node.name === 'li') {\n              var sibling = node.prev;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\n                sibling.append(node);\n                continue;\n              }\n              sibling = node.next;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\n                sibling.insert(node, sibling.firstChild, true);\n                continue;\n              }\n              node.wrap(filterNode(new AstNode('ul', 1)));\n              continue;\n            }\n            if (schema.isValidChild(node.parent.name, 'div') && schema.isValidChild('div', node.name)) {\n              node.wrap(filterNode(new AstNode('div', 1)));\n            } else {\n              removeOrUnwrapInvalidNode(node);\n            }\n          }\n        }\n      };\n      var filterNode = function (node) {\n        var name = node.name;\n        if (name in nodeFilters) {\n          var list = matchedNodes[name];\n          if (list) {\n            list.push(node);\n          } else {\n            matchedNodes[name] = [node];\n          }\n        }\n        var i = attributeFilters.length;\n        while (i--) {\n          var attrName = attributeFilters[i].name;\n          if (attrName in node.attributes.map) {\n            var list = matchedAttributes[attrName];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedAttributes[attrName] = [node];\n            }\n          }\n        }\n        return node;\n      };\n      var addNodeFilter = function (name, callback) {\n        each$6(explode$2(name), function (name) {\n          var list = nodeFilters[name];\n          if (!list) {\n            nodeFilters[name] = list = [];\n          }\n          list.push(callback);\n        });\n      };\n      var getNodeFilters = function () {\n        var out = [];\n        for (var name_1 in nodeFilters) {\n          if (has$2(nodeFilters, name_1)) {\n            out.push({\n              name: name_1,\n              callbacks: nodeFilters[name_1]\n            });\n          }\n        }\n        return out;\n      };\n      var addAttributeFilter = function (name, callback) {\n        each$6(explode$2(name), function (name) {\n          var i;\n          for (i = 0; i < attributeFilters.length; i++) {\n            if (attributeFilters[i].name === name) {\n              attributeFilters[i].callbacks.push(callback);\n              return;\n            }\n          }\n          attributeFilters.push({\n            name: name,\n            callbacks: [callback]\n          });\n        });\n      };\n      var getAttributeFilters = function () {\n        return [].concat(attributeFilters);\n      };\n      var parse = function (html, args) {\n        var nodes, i, l, fi, fl, list, name;\n        var invalidChildren = [];\n        var node;\n        var getRootBlockName = function (name) {\n          if (name === false) {\n            return '';\n          } else if (name === true) {\n            return 'p';\n          } else {\n            return name;\n          }\n        };\n        args = args || {};\n        matchedNodes = {};\n        matchedAttributes = {};\n        var blockElements = extend$4(makeMap('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\n        var textRootBlockElements = getTextRootBlockElements(schema);\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var children = schema.children;\n        var validate = settings.validate;\n        var forcedRootBlockName = 'forced_root_block' in args ? args.forced_root_block : settings.forced_root_block;\n        var rootBlockName = getRootBlockName(forcedRootBlockName);\n        var whiteSpaceElements = schema.getWhiteSpaceElements();\n        var startWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\n        var endWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\n        var allWhiteSpaceRegExp = /[ \\t\\r\\n]+/g;\n        var isAllWhiteSpaceRegExp = /^[ \\t\\r\\n]+$/;\n        var isInWhiteSpacePreservedElement = has$2(whiteSpaceElements, args.context) || has$2(whiteSpaceElements, settings.root_name);\n        var addRootBlocks = function () {\n          var node = rootNode.firstChild, rootBlockNode = null;\n          var trim = function (rootBlock) {\n            if (rootBlock) {\n              node = rootBlock.firstChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(startWhiteSpaceRegExp, '');\n              }\n              node = rootBlock.lastChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(endWhiteSpaceRegExp, '');\n              }\n            }\n          };\n          if (!schema.isValidChild(rootNode.name, rootBlockName.toLowerCase())) {\n            return;\n          }\n          while (node) {\n            var next = node.next;\n            if (node.type === 3 || node.type === 1 && node.name !== 'p' && !blockElements[node.name] && !node.attr('data-mce-type')) {\n              if (!rootBlockNode) {\n                rootBlockNode = createNode(rootBlockName, 1);\n                rootBlockNode.attr(settings.forced_root_block_attrs);\n                rootNode.insert(rootBlockNode, node);\n                rootBlockNode.append(node);\n              } else {\n                rootBlockNode.append(node);\n              }\n            } else {\n              trim(rootBlockNode);\n              rootBlockNode = null;\n            }\n            node = next;\n          }\n          trim(rootBlockNode);\n        };\n        var createNode = function (name, type) {\n          var node = new AstNode(name, type);\n          var list;\n          if (name in nodeFilters) {\n            list = matchedNodes[name];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedNodes[name] = [node];\n            }\n          }\n          return node;\n        };\n        var removeWhitespaceBefore = function (node) {\n          var blockElements = schema.getBlockElements();\n          for (var textNode = node.prev; textNode && textNode.type === 3;) {\n            var textVal = textNode.value.replace(endWhiteSpaceRegExp, '');\n            if (textVal.length > 0) {\n              textNode.value = textVal;\n              return;\n            }\n            var textNodeNext = textNode.next;\n            if (textNodeNext) {\n              if (textNodeNext.type === 3 && textNodeNext.value.length) {\n                textNode = textNode.prev;\n                continue;\n              }\n              if (!blockElements[textNodeNext.name] && textNodeNext.name !== 'script' && textNodeNext.name !== 'style') {\n                textNode = textNode.prev;\n                continue;\n              }\n            }\n            var sibling = textNode.prev;\n            textNode.remove();\n            textNode = sibling;\n          }\n        };\n        var cloneAndExcludeBlocks = function (input) {\n          var output = {};\n          for (var name_2 in input) {\n            if (name_2 !== 'li' && name_2 !== 'p') {\n              output[name_2] = input[name_2];\n            }\n          }\n          return output;\n        };\n        var isTextRootBlockEmpty = function (node) {\n          var tempNode = node;\n          while (isNonNullable(tempNode)) {\n            if (tempNode.name in textRootBlockElements) {\n              return isEmpty(schema, nonEmptyElements, whiteSpaceElements, tempNode);\n            } else {\n              tempNode = tempNode.parent;\n            }\n          }\n          return false;\n        };\n        var parser = SaxParser({\n          validate: validate,\n          document: settings.document,\n          allow_html_data_urls: settings.allow_html_data_urls,\n          allow_svg_data_urls: settings.allow_svg_data_urls,\n          allow_script_urls: settings.allow_script_urls,\n          allow_conditional_comments: settings.allow_conditional_comments,\n          preserve_cdata: settings.preserve_cdata,\n          self_closing_elements: cloneAndExcludeBlocks(schema.getSelfClosingElements()),\n          cdata: function (text) {\n            node.append(createNode('#cdata', 4)).value = text;\n          },\n          text: function (text, raw) {\n            var textNode;\n            if (!isInWhiteSpacePreservedElement) {\n              text = text.replace(allWhiteSpaceRegExp, ' ');\n              if (isLineBreakNode(node.lastChild, blockElements)) {\n                text = text.replace(startWhiteSpaceRegExp, '');\n              }\n            }\n            if (text.length !== 0) {\n              textNode = createNode('#text', 3);\n              textNode.raw = !!raw;\n              node.append(textNode).value = text;\n            }\n          },\n          comment: function (text) {\n            node.append(createNode('#comment', 8)).value = text;\n          },\n          pi: function (name, text) {\n            node.append(createNode(name, 7)).value = text;\n            removeWhitespaceBefore(node);\n          },\n          doctype: function (text) {\n            var newNode = node.append(createNode('#doctype', 10));\n            newNode.value = text;\n            removeWhitespaceBefore(node);\n          },\n          start: function (name, attrs, empty) {\n            var elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              var newNode = createNode(elementRule.outputName || name, 1);\n              newNode.attributes = attrs;\n              newNode.shortEnded = empty;\n              node.append(newNode);\n              var parent_2 = children[node.name];\n              if (parent_2 && children[newNode.name] && !parent_2[newNode.name]) {\n                invalidChildren.push(newNode);\n              }\n              var attrFiltersLen = attributeFilters.length;\n              while (attrFiltersLen--) {\n                var attrName = attributeFilters[attrFiltersLen].name;\n                if (attrName in attrs.map) {\n                  list = matchedAttributes[attrName];\n                  if (list) {\n                    list.push(newNode);\n                  } else {\n                    matchedAttributes[attrName] = [newNode];\n                  }\n                }\n              }\n              if (blockElements[name]) {\n                removeWhitespaceBefore(newNode);\n              }\n              if (!empty) {\n                node = newNode;\n              }\n              if (!isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = true;\n              }\n            }\n          },\n          end: function (name) {\n            var textNode, text, sibling;\n            var elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              if (blockElements[name]) {\n                if (!isInWhiteSpacePreservedElement) {\n                  textNode = node.firstChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(startWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.next;\n                    } else {\n                      sibling = textNode.next;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.next;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                  textNode = node.lastChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(endWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.prev;\n                    } else {\n                      sibling = textNode.prev;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.prev;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                }\n              }\n              if (isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = false;\n              }\n              var isNodeEmpty = isEmpty(schema, nonEmptyElements, whiteSpaceElements, node);\n              var parentNode = node.parent;\n              if (elementRule.paddInEmptyBlock && isNodeEmpty && isTextRootBlockEmpty(node)) {\n                paddEmptyNode(settings, args, blockElements, node);\n              } else if (elementRule.removeEmpty && isNodeEmpty) {\n                if (blockElements[node.name]) {\n                  node.empty().remove();\n                } else {\n                  node.unwrap();\n                }\n              } else if (elementRule.paddEmpty && (isPaddedWithNbsp(node) || isNodeEmpty)) {\n                paddEmptyNode(settings, args, blockElements, node);\n              }\n              node = parentNode;\n            }\n          }\n        }, schema);\n        var rootNode = node = new AstNode(args.context || settings.root_name, 11);\n        parser.parse(html, args.format);\n        if (validate && invalidChildren.length) {\n          if (!args.context) {\n            fixInvalidChildren(invalidChildren);\n          } else {\n            args.invalid = true;\n          }\n        }\n        if (rootBlockName && (rootNode.name === 'body' || args.isRootContent)) {\n          addRootBlocks();\n        }\n        if (!args.invalid) {\n          for (name in matchedNodes) {\n            if (!has$2(matchedNodes, name)) {\n              continue;\n            }\n            list = nodeFilters[name];\n            nodes = matchedNodes[name];\n            fi = nodes.length;\n            while (fi--) {\n              if (!nodes[fi].parent) {\n                nodes.splice(fi, 1);\n              }\n            }\n            for (i = 0, l = list.length; i < l; i++) {\n              list[i](nodes, name, args);\n            }\n          }\n          for (i = 0, l = attributeFilters.length; i < l; i++) {\n            list = attributeFilters[i];\n            if (list.name in matchedAttributes) {\n              nodes = matchedAttributes[list.name];\n              fi = nodes.length;\n              while (fi--) {\n                if (!nodes[fi].parent) {\n                  nodes.splice(fi, 1);\n                }\n              }\n              for (fi = 0, fl = list.callbacks.length; fi < fl; fi++) {\n                list.callbacks[fi](nodes, list.name, args);\n              }\n            }\n          }\n        }\n        return rootNode;\n      };\n      var exports = {\n        schema: schema,\n        addAttributeFilter: addAttributeFilter,\n        getAttributeFilters: getAttributeFilters,\n        addNodeFilter: addNodeFilter,\n        getNodeFilters: getNodeFilters,\n        filterNode: filterNode,\n        parse: parse\n      };\n      register$1(exports, settings);\n      register$2(exports, settings);\n      return exports;\n    };\n\n    var register = function (htmlParser, settings, dom) {\n      htmlParser.addAttributeFilter('data-mce-tabindex', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          node.attr('tabindex', node.attr('data-mce-tabindex'));\n          node.attr(name, null);\n        }\n      });\n      htmlParser.addAttributeFilter('src,href,style', function (nodes, name) {\n        var internalName = 'data-mce-' + name;\n        var urlConverter = settings.url_converter;\n        var urlConverterScope = settings.url_converter_scope;\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var value = node.attr(internalName);\n          if (value !== undefined) {\n            node.attr(name, value.length > 0 ? value : null);\n            node.attr(internalName, null);\n          } else {\n            value = node.attr(name);\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n            } else if (urlConverter) {\n              value = urlConverter.call(urlConverterScope, value, name, node.name);\n            }\n            node.attr(name, value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var value = node.attr('class');\n          if (value) {\n            value = node.attr('class').replace(/(?:^|\\s)mce-item-\\w+(?!\\S)/g, '');\n            node.attr('class', value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes, name, args) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          if (node.attr('data-mce-type') === 'bookmark' && !args.cleanup) {\n            var hasChildren = Optional.from(node.firstChild).exists(function (firstChild) {\n              return !isZwsp(firstChild.value);\n            });\n            if (hasChildren) {\n              node.unwrap();\n            } else {\n              node.remove();\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('noscript', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i].firstChild;\n          if (node) {\n            node.value = Entities.decode(node.value);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('script,style', function (nodes, name) {\n        var trim = function (value) {\n          return value.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g, '\\n').replace(/^[\\r\\n]*|[\\r\\n]*$/g, '').replace(/^\\s*((<!--)?(\\s*\\/\\/)?\\s*<!\\[CDATA\\[|(<!--\\s*)?\\/\\*\\s*<!\\[CDATA\\[\\s*\\*\\/|(\\/\\/)?\\s*<!--|\\/\\*\\s*<!--\\s*\\*\\/)\\s*[\\r\\n]*/gi, '').replace(/\\s*(\\/\\*\\s*\\]\\]>\\s*\\*\\/(-->)?|\\s*\\/\\/\\s*\\]\\]>(-->)?|\\/\\/\\s*(-->)?|\\]\\]>|\\/\\*\\s*-->\\s*\\*\\/|\\s*-->\\s*)\\s*$/g, '');\n        };\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var value = node.firstChild ? node.firstChild.value : '';\n          if (name === 'script') {\n            var type = node.attr('type');\n            if (type) {\n              node.attr('type', type === 'mce-no/type' ? null : type.replace(/^mce\\-/, ''));\n            }\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '// <![CDATA[\\n' + trim(value) + '\\n// ]]>';\n            }\n          } else {\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '<!--\\n' + trim(value) + '\\n-->';\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('#comment', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          if (settings.preserve_cdata && node.value.indexOf('[CDATA[') === 0) {\n            node.name = '#cdata';\n            node.type = 4;\n            node.value = dom.decode(node.value.replace(/^\\[CDATA\\[|\\]\\]$/g, ''));\n          } else if (node.value.indexOf('mce:protected ') === 0) {\n            node.name = '#text';\n            node.type = 3;\n            node.raw = true;\n            node.value = unescape(node.value).substr(14);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('xml:namespace,input', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          if (node.type === 7) {\n            node.remove();\n          } else if (node.type === 1) {\n            if (name === 'input' && !node.attr('type')) {\n              node.attr('type', 'text');\n            }\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes) {\n        each$k(nodes, function (node) {\n          if (node.attr('data-mce-type') === 'format-caret') {\n            if (node.isEmpty(htmlParser.schema.getNonEmptyElements())) {\n              node.remove();\n            } else {\n              node.unwrap();\n            }\n          }\n        });\n      });\n      htmlParser.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style,' + 'data-mce-selected,data-mce-expando,' + 'data-mce-type,data-mce-resize,data-mce-placeholder', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].attr(name, null);\n        }\n      });\n    };\n    var trimTrailingBr = function (rootNode) {\n      var isBr = function (node) {\n        return node && node.name === 'br';\n      };\n      var brNode1 = rootNode.lastChild;\n      if (isBr(brNode1)) {\n        var brNode2 = brNode1.prev;\n        if (isBr(brNode2)) {\n          brNode1.remove();\n          brNode2.remove();\n        }\n      }\n    };\n\n    var preProcess = function (editor, node, args) {\n      var oldDoc;\n      var dom = editor.dom;\n      var clonedNode = node.cloneNode(true);\n      var impl = document.implementation;\n      if (impl.createHTMLDocument) {\n        var doc_1 = impl.createHTMLDocument('');\n        Tools.each(clonedNode.nodeName === 'BODY' ? clonedNode.childNodes : [clonedNode], function (node) {\n          doc_1.body.appendChild(doc_1.importNode(node, true));\n        });\n        if (clonedNode.nodeName !== 'BODY') {\n          clonedNode = doc_1.body.firstChild;\n        } else {\n          clonedNode = doc_1.body;\n        }\n        oldDoc = dom.doc;\n        dom.doc = doc_1;\n      }\n      firePreProcess(editor, __assign(__assign({}, args), { node: clonedNode }));\n      if (oldDoc) {\n        dom.doc = oldDoc;\n      }\n      return clonedNode;\n    };\n    var shouldFireEvent = function (editor, args) {\n      return editor && editor.hasEventListeners('PreProcess') && !args.no_events;\n    };\n    var process = function (editor, node, args) {\n      return shouldFireEvent(editor, args) ? preProcess(editor, node, args) : node;\n    };\n\n    var addTempAttr = function (htmlParser, tempAttrs, name) {\n      if (Tools.inArray(tempAttrs, name) === -1) {\n        htmlParser.addAttributeFilter(name, function (nodes, name) {\n          var i = nodes.length;\n          while (i--) {\n            nodes[i].attr(name, null);\n          }\n        });\n        tempAttrs.push(name);\n      }\n    };\n    var postProcess = function (editor, args, content) {\n      if (!args.no_events && editor) {\n        var outArgs = firePostProcess(editor, __assign(__assign({}, args), { content: content }));\n        return outArgs.content;\n      } else {\n        return content;\n      }\n    };\n    var getHtmlFromNode = function (dom, node, args) {\n      var html = trim$2(args.getInner ? node.innerHTML : dom.getOuterHTML(node));\n      return args.selection || isWsPreserveElement(SugarElement.fromDom(node)) ? html : Tools.trim(html);\n    };\n    var parseHtml = function (htmlParser, html, args) {\n      var parserArgs = args.selection ? __assign({ forced_root_block: false }, args) : args;\n      var rootNode = htmlParser.parse(html, parserArgs);\n      trimTrailingBr(rootNode);\n      return rootNode;\n    };\n    var serializeNode = function (settings, schema, node) {\n      var htmlSerializer = HtmlSerializer(settings, schema);\n      return htmlSerializer.serialize(node);\n    };\n    var toHtml = function (editor, settings, schema, rootNode, args) {\n      var content = serializeNode(settings, schema, rootNode);\n      return postProcess(editor, args, content);\n    };\n    var DomSerializerImpl = function (settings, editor) {\n      var tempAttrs = ['data-mce-selected'];\n      var dom = editor && editor.dom ? editor.dom : DOMUtils.DOM;\n      var schema = editor && editor.schema ? editor.schema : Schema(settings);\n      settings.entity_encoding = settings.entity_encoding || 'named';\n      settings.remove_trailing_brs = 'remove_trailing_brs' in settings ? settings.remove_trailing_brs : true;\n      var htmlParser = DomParser(settings, schema);\n      register(htmlParser, settings, dom);\n      var serialize = function (node, parserArgs) {\n        if (parserArgs === void 0) {\n          parserArgs = {};\n        }\n        var args = __assign({ format: 'html' }, parserArgs);\n        var targetNode = process(editor, node, args);\n        var html = getHtmlFromNode(dom, targetNode, args);\n        var rootNode = parseHtml(htmlParser, html, args);\n        return args.format === 'tree' ? rootNode : toHtml(editor, settings, schema, rootNode, args);\n      };\n      return {\n        schema: schema,\n        addNodeFilter: htmlParser.addNodeFilter,\n        addAttributeFilter: htmlParser.addAttributeFilter,\n        serialize: serialize,\n        addRules: schema.addValidElements,\n        setRules: schema.setValidElements,\n        addTempAttr: curry(addTempAttr, htmlParser, tempAttrs),\n        getTempAttrs: constant(tempAttrs),\n        getNodeFilters: htmlParser.getNodeFilters,\n        getAttributeFilters: htmlParser.getAttributeFilters\n      };\n    };\n\n    var DomSerializer = function (settings, editor) {\n      var domSerializer = DomSerializerImpl(settings, editor);\n      return {\n        schema: domSerializer.schema,\n        addNodeFilter: domSerializer.addNodeFilter,\n        addAttributeFilter: domSerializer.addAttributeFilter,\n        serialize: domSerializer.serialize,\n        addRules: domSerializer.addRules,\n        setRules: domSerializer.setRules,\n        addTempAttr: domSerializer.addTempAttr,\n        getTempAttrs: domSerializer.getTempAttrs,\n        getNodeFilters: domSerializer.getNodeFilters,\n        getAttributeFilters: domSerializer.getAttributeFilters\n      };\n    };\n\n    var defaultFormat = 'html';\n    var getContent = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var format = args.format ? args.format : defaultFormat;\n      return getContent$2(editor, args, format);\n    };\n\n    var setContent = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      return setContent$2(editor, content, args);\n    };\n\n    var DOM$7 = DOMUtils.DOM;\n    var restoreOriginalStyles = function (editor) {\n      DOM$7.setStyle(editor.id, 'display', editor.orgDisplay);\n    };\n    var safeDestroy = function (x) {\n      return Optional.from(x).each(function (x) {\n        return x.destroy();\n      });\n    };\n    var clearDomReferences = function (editor) {\n      editor.contentAreaContainer = editor.formElement = editor.container = editor.editorContainer = null;\n      editor.bodyElement = editor.contentDocument = editor.contentWindow = null;\n      editor.iframeElement = editor.targetElm = null;\n      if (editor.selection) {\n        editor.selection = editor.selection.win = editor.selection.dom = editor.selection.dom.doc = null;\n      }\n    };\n    var restoreForm = function (editor) {\n      var form = editor.formElement;\n      if (form) {\n        if (form._mceOldSubmit) {\n          form.submit = form._mceOldSubmit;\n          form._mceOldSubmit = null;\n        }\n        DOM$7.unbind(form, 'submit reset', editor.formEventDelegate);\n      }\n    };\n    var remove = function (editor) {\n      if (!editor.removed) {\n        var _selectionOverrides = editor._selectionOverrides, editorUpload = editor.editorUpload;\n        var body = editor.getBody();\n        var element = editor.getElement();\n        if (body) {\n          editor.save({ is_removing: true });\n        }\n        editor.removed = true;\n        editor.unbindAllNativeEvents();\n        if (editor.hasHiddenInput && element) {\n          DOM$7.remove(element.nextSibling);\n        }\n        fireRemove(editor);\n        editor.editorManager.remove(editor);\n        if (!editor.inline && body) {\n          restoreOriginalStyles(editor);\n        }\n        fireDetach(editor);\n        DOM$7.remove(editor.getContainer());\n        safeDestroy(_selectionOverrides);\n        safeDestroy(editorUpload);\n        editor.destroy();\n      }\n    };\n    var destroy = function (editor, automatic) {\n      var selection = editor.selection, dom = editor.dom;\n      if (editor.destroyed) {\n        return;\n      }\n      if (!automatic && !editor.removed) {\n        editor.remove();\n        return;\n      }\n      if (!automatic) {\n        editor.editorManager.off('beforeunload', editor._beforeUnload);\n        if (editor.theme && editor.theme.destroy) {\n          editor.theme.destroy();\n        }\n        safeDestroy(selection);\n        safeDestroy(dom);\n      }\n      restoreForm(editor);\n      clearDomReferences(editor);\n      editor.destroyed = true;\n    };\n\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          objects[_i] = arguments[_i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (has$2(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n\n    var deprecatedSettings = ('autoresize_on_init,content_editable_state,convert_fonts_to_spans,inline_styles,padd_empty_with_br,block_elements,' + 'boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,' + 'force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,' + 'non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,' + 'tab_focus,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,' + 'paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists').split(',');\n    var deprecatedPlugins = 'bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor'.split(',');\n    var movedToPremiumPlugins = 'imagetools,toc'.split(',');\n    var getDeprecatedSettings = function (settings) {\n      var settingNames = filter$4(deprecatedSettings, function (setting) {\n        return has$2(settings, setting);\n      });\n      var forcedRootBlock = settings.forced_root_block;\n      if (forcedRootBlock === false || forcedRootBlock === '') {\n        settingNames.push('forced_root_block (false only)');\n      }\n      return sort(settingNames);\n    };\n    var getDeprecatedPlugins = function (settings) {\n      var plugins = Tools.makeMap(settings.plugins, ' ');\n      var hasPlugin = function (plugin) {\n        return has$2(plugins, plugin);\n      };\n      var pluginNames = __spreadArray(__spreadArray([], filter$4(deprecatedPlugins, hasPlugin), true), bind(movedToPremiumPlugins, function (plugin) {\n        return hasPlugin(plugin) ? [plugin + ' (moving to premium)'] : [];\n      }), true);\n      return sort(pluginNames);\n    };\n    var logDeprecationsWarning = function (rawSettings, finalSettings) {\n      var deprecatedSettings = getDeprecatedSettings(rawSettings);\n      var deprecatedPlugins = getDeprecatedPlugins(finalSettings);\n      var hasDeprecatedPlugins = deprecatedPlugins.length > 0;\n      var hasDeprecatedSettings = deprecatedSettings.length > 0;\n      var isLegacyMobileTheme = finalSettings.theme === 'mobile';\n      if (hasDeprecatedPlugins || hasDeprecatedSettings || isLegacyMobileTheme) {\n        var listJoiner = '\\n- ';\n        var themesMessage = isLegacyMobileTheme ? '\\n\\nThemes:' + listJoiner + 'mobile' : '';\n        var pluginsMessage = hasDeprecatedPlugins ? '\\n\\nPlugins:' + listJoiner + deprecatedPlugins.join(listJoiner) : '';\n        var settingsMessage = hasDeprecatedSettings ? '\\n\\nSettings:' + listJoiner + deprecatedSettings.join(listJoiner) : '';\n        console.warn('The following deprecated features are currently enabled, these will be removed in TinyMCE 6.0. ' + 'See https://www.tiny.cloud/docs/release-notes/6.0-upcoming-changes/ for more information.' + themesMessage + pluginsMessage + settingsMessage);\n      }\n    };\n\n    var sectionResult = function (sections, settings) {\n      return {\n        sections: constant(sections),\n        settings: constant(settings)\n      };\n    };\n    var deviceDetection = detect().deviceType;\n    var isTouch = deviceDetection.isTouch();\n    var isPhone = deviceDetection.isPhone();\n    var isTablet = deviceDetection.isTablet();\n    var legacyMobilePlugins = [\n      'lists',\n      'autolink',\n      'autosave'\n    ];\n    var defaultTouchSettings = {\n      table_grid: false,\n      object_resizing: false,\n      resize: false\n    };\n    var normalizePlugins = function (plugins) {\n      var pluginNames = isArray$1(plugins) ? plugins.join(' ') : plugins;\n      var trimmedPlugins = map$3(isString$1(pluginNames) ? pluginNames.split(' ') : [], trim$4);\n      return filter$4(trimmedPlugins, function (item) {\n        return item.length > 0;\n      });\n    };\n    var filterLegacyMobilePlugins = function (plugins) {\n      return filter$4(plugins, curry(contains$3, legacyMobilePlugins));\n    };\n    var extractSections = function (keys, settings) {\n      var result = bifilter(settings, function (value, key) {\n        return contains$3(keys, key);\n      });\n      return sectionResult(result.t, result.f);\n    };\n    var getSection = function (sectionResult, name, defaults) {\n      if (defaults === void 0) {\n        defaults = {};\n      }\n      var sections = sectionResult.sections();\n      var sectionSettings = get$9(sections, name).getOr({});\n      return Tools.extend({}, defaults, sectionSettings);\n    };\n    var hasSection = function (sectionResult, name) {\n      return has$2(sectionResult.sections(), name);\n    };\n    var isSectionTheme = function (sectionResult, name, theme) {\n      var section = sectionResult.sections();\n      return hasSection(sectionResult, name) && section[name].theme === theme;\n    };\n    var getSectionConfig = function (sectionResult, name) {\n      return hasSection(sectionResult, name) ? sectionResult.sections()[name] : {};\n    };\n    var getToolbarMode = function (settings, defaultVal) {\n      return get$9(settings, 'toolbar_mode').orThunk(function () {\n        return get$9(settings, 'toolbar_drawer').map(function (val) {\n          return val === false ? 'wrap' : val;\n        });\n      }).getOr(defaultVal);\n    };\n    var getDefaultSettings = function (settings, id, documentBaseUrl, isTouch, editor) {\n      var baseDefaults = {\n        id: id,\n        theme: 'silver',\n        toolbar_mode: getToolbarMode(settings, 'floating'),\n        plugins: '',\n        document_base_url: documentBaseUrl,\n        add_form_submit_trigger: true,\n        submit_patch: true,\n        add_unload_trigger: true,\n        convert_urls: true,\n        relative_urls: true,\n        remove_script_host: true,\n        object_resizing: true,\n        doctype: '<!DOCTYPE html>',\n        visual: true,\n        font_size_legacy_values: 'xx-small,small,medium,large,x-large,xx-large,300%',\n        forced_root_block: 'p',\n        hidden_input: true,\n        inline_styles: true,\n        convert_fonts_to_spans: true,\n        indent: true,\n        indent_before: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        indent_after: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        entity_encoding: 'named',\n        url_converter: editor.convertURL,\n        url_converter_scope: editor\n      };\n      return __assign(__assign({}, baseDefaults), isTouch ? defaultTouchSettings : {});\n    };\n    var getDefaultMobileSettings = function (mobileSettings, isPhone) {\n      var defaultMobileSettings = {\n        resize: false,\n        toolbar_mode: getToolbarMode(mobileSettings, 'scrolling'),\n        toolbar_sticky: false\n      };\n      var defaultPhoneSettings = { menubar: false };\n      return __assign(__assign(__assign({}, defaultTouchSettings), defaultMobileSettings), isPhone ? defaultPhoneSettings : {});\n    };\n    var getExternalPlugins = function (overrideSettings, settings) {\n      var userDefinedExternalPlugins = settings.external_plugins ? settings.external_plugins : {};\n      if (overrideSettings && overrideSettings.external_plugins) {\n        return Tools.extend({}, overrideSettings.external_plugins, userDefinedExternalPlugins);\n      } else {\n        return userDefinedExternalPlugins;\n      }\n    };\n    var combinePlugins = function (forcedPlugins, plugins) {\n      return [].concat(normalizePlugins(forcedPlugins)).concat(normalizePlugins(plugins));\n    };\n    var getPlatformPlugins = function (isMobileDevice, sectionResult, desktopPlugins, mobilePlugins) {\n      if (isMobileDevice && isSectionTheme(sectionResult, 'mobile', 'mobile')) {\n        return filterLegacyMobilePlugins(mobilePlugins);\n      } else if (isMobileDevice && hasSection(sectionResult, 'mobile')) {\n        return mobilePlugins;\n      } else {\n        return desktopPlugins;\n      }\n    };\n    var processPlugins = function (isMobileDevice, sectionResult, defaultOverrideSettings, settings) {\n      var forcedPlugins = normalizePlugins(defaultOverrideSettings.forced_plugins);\n      var desktopPlugins = normalizePlugins(settings.plugins);\n      var mobileConfig = getSectionConfig(sectionResult, 'mobile');\n      var mobilePlugins = mobileConfig.plugins ? normalizePlugins(mobileConfig.plugins) : desktopPlugins;\n      var platformPlugins = getPlatformPlugins(isMobileDevice, sectionResult, desktopPlugins, mobilePlugins);\n      var combinedPlugins = combinePlugins(forcedPlugins, platformPlugins);\n      if (Env.browser.isIE() && contains$3(combinedPlugins, 'rtc')) {\n        throw new Error('RTC plugin is not supported on IE 11.');\n      }\n      return Tools.extend(settings, { plugins: combinedPlugins.join(' ') });\n    };\n    var isOnMobile = function (isMobileDevice, sectionResult) {\n      return isMobileDevice && hasSection(sectionResult, 'mobile');\n    };\n    var combineSettings = function (isMobileDevice, isPhone, defaultSettings, defaultOverrideSettings, settings) {\n      var defaultDeviceSettings = isMobileDevice ? { mobile: getDefaultMobileSettings(settings.mobile || {}, isPhone) } : {};\n      var sectionResult = extractSections(['mobile'], deepMerge(defaultDeviceSettings, settings));\n      var extendedSettings = Tools.extend(defaultSettings, defaultOverrideSettings, sectionResult.settings(), isOnMobile(isMobileDevice, sectionResult) ? getSection(sectionResult, 'mobile') : {}, {\n        validate: true,\n        external_plugins: getExternalPlugins(defaultOverrideSettings, sectionResult.settings())\n      });\n      return processPlugins(isMobileDevice, sectionResult, defaultOverrideSettings, extendedSettings);\n    };\n    var getEditorSettings = function (editor, id, documentBaseUrl, defaultOverrideSettings, settings) {\n      var defaultSettings = getDefaultSettings(settings, id, documentBaseUrl, isTouch, editor);\n      var finalSettings = combineSettings(isPhone || isTablet, isPhone, defaultSettings, defaultOverrideSettings, settings);\n      if (finalSettings.deprecation_warnings !== false) {\n        logDeprecationsWarning(settings, finalSettings);\n      }\n      return finalSettings;\n    };\n    var getFiltered = function (predicate, editor, name) {\n      return Optional.from(editor.settings[name]).filter(predicate);\n    };\n    var getParamObject = function (value) {\n      var output = {};\n      if (typeof value === 'string') {\n        each$k(value.indexOf('=') > 0 ? value.split(/[;,](?![^=;,]*(?:[;,]|$))/) : value.split(','), function (val) {\n          var arr = val.split('=');\n          if (arr.length > 1) {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[1]);\n          } else {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[0]);\n          }\n        });\n      } else {\n        output = value;\n      }\n      return output;\n    };\n    var isArrayOf = function (p) {\n      return function (a) {\n        return isArray$1(a) && forall(a, p);\n      };\n    };\n    var getParam = function (editor, name, defaultVal, type) {\n      var value = name in editor.settings ? editor.settings[name] : defaultVal;\n      if (type === 'hash') {\n        return getParamObject(value);\n      } else if (type === 'string') {\n        return getFiltered(isString$1, editor, name).getOr(defaultVal);\n      } else if (type === 'number') {\n        return getFiltered(isNumber, editor, name).getOr(defaultVal);\n      } else if (type === 'boolean') {\n        return getFiltered(isBoolean, editor, name).getOr(defaultVal);\n      } else if (type === 'object') {\n        return getFiltered(isObject, editor, name).getOr(defaultVal);\n      } else if (type === 'array') {\n        return getFiltered(isArray$1, editor, name).getOr(defaultVal);\n      } else if (type === 'string[]') {\n        return getFiltered(isArrayOf(isString$1), editor, name).getOr(defaultVal);\n      } else if (type === 'function') {\n        return getFiltered(isFunction, editor, name).getOr(defaultVal);\n      } else {\n        return value;\n      }\n    };\n\n    var CreateIconManager = function () {\n      var lookup = {};\n      var add = function (id, iconPack) {\n        lookup[id] = iconPack;\n      };\n      var get = function (id) {\n        if (lookup[id]) {\n          return lookup[id];\n        }\n        return { icons: {} };\n      };\n      var has = function (id) {\n        return has$2(lookup, id);\n      };\n      return {\n        add: add,\n        get: get,\n        has: has\n      };\n    };\n    var IconManager = CreateIconManager();\n\n    var getProp = function (propName, elm) {\n      var rawElm = elm.dom;\n      return rawElm[propName];\n    };\n    var getComputedSizeProp = function (propName, elm) {\n      return parseInt(get$5(elm, propName), 10);\n    };\n    var getClientWidth = curry(getProp, 'clientWidth');\n    var getClientHeight = curry(getProp, 'clientHeight');\n    var getMarginTop = curry(getComputedSizeProp, 'margin-top');\n    var getMarginLeft = curry(getComputedSizeProp, 'margin-left');\n    var getBoundingClientRect = function (elm) {\n      return elm.dom.getBoundingClientRect();\n    };\n    var isInsideElementContentArea = function (bodyElm, clientX, clientY) {\n      var clientWidth = getClientWidth(bodyElm);\n      var clientHeight = getClientHeight(bodyElm);\n      return clientX >= 0 && clientY >= 0 && clientX <= clientWidth && clientY <= clientHeight;\n    };\n    var transpose = function (inline, elm, clientX, clientY) {\n      var clientRect = getBoundingClientRect(elm);\n      var deltaX = inline ? clientRect.left + elm.dom.clientLeft + getMarginLeft(elm) : 0;\n      var deltaY = inline ? clientRect.top + elm.dom.clientTop + getMarginTop(elm) : 0;\n      var x = clientX - deltaX;\n      var y = clientY - deltaY;\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var isXYInContentArea = function (editor, clientX, clientY) {\n      var bodyElm = SugarElement.fromDom(editor.getBody());\n      var targetElm = editor.inline ? bodyElm : documentElement(bodyElm);\n      var transposedPoint = transpose(editor.inline, targetElm, clientX, clientY);\n      return isInsideElementContentArea(targetElm, transposedPoint.x, transposedPoint.y);\n    };\n    var fromDomSafe = function (node) {\n      return Optional.from(node).map(SugarElement.fromDom);\n    };\n    var isEditorAttachedToDom = function (editor) {\n      var rawContainer = editor.inline ? editor.getBody() : editor.getContentAreaContainer();\n      return fromDomSafe(rawContainer).map(inBody).getOr(false);\n    };\n\n    var NotificationManagerImpl = function () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a NotificationManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        close: unimplemented,\n        reposition: unimplemented,\n        getArgs: unimplemented\n      };\n    };\n\n    var NotificationManager = function (editor) {\n      var notifications = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getNotificationManagerImpl ? theme.getNotificationManagerImpl() : NotificationManagerImpl();\n      };\n      var getTopNotification = function () {\n        return Optional.from(notifications[0]);\n      };\n      var isEqual = function (a, b) {\n        return a.type === b.type && a.text === b.text && !a.progressBar && !a.timeout && !b.progressBar && !b.timeout;\n      };\n      var reposition = function () {\n        if (notifications.length > 0) {\n          getImplementation().reposition(notifications);\n        }\n      };\n      var addNotification = function (notification) {\n        notifications.push(notification);\n      };\n      var closeNotification = function (notification) {\n        findIndex$2(notifications, function (otherNotification) {\n          return otherNotification === notification;\n        }).each(function (index) {\n          notifications.splice(index, 1);\n        });\n      };\n      var open = function (spec, fireEvent) {\n        if (fireEvent === void 0) {\n          fireEvent = true;\n        }\n        if (editor.removed || !isEditorAttachedToDom(editor)) {\n          return;\n        }\n        if (fireEvent) {\n          editor.fire('BeforeOpenNotification', { notification: spec });\n        }\n        return find$3(notifications, function (notification) {\n          return isEqual(getImplementation().getArgs(notification), spec);\n        }).getOrThunk(function () {\n          editor.editorManager.setActive(editor);\n          var notification = getImplementation().open(spec, function () {\n            closeNotification(notification);\n            reposition();\n            getTopNotification().fold(function () {\n              return editor.focus();\n            }, function (top) {\n              return focus$1(SugarElement.fromDom(top.getEl()));\n            });\n          });\n          addNotification(notification);\n          reposition();\n          editor.fire('OpenNotification', { notification: __assign({}, notification) });\n          return notification;\n        });\n      };\n      var close = function () {\n        getTopNotification().each(function (notification) {\n          getImplementation().close(notification);\n          closeNotification(notification);\n          reposition();\n        });\n      };\n      var getNotifications = constant(notifications);\n      var registerEvents = function (editor) {\n        editor.on('SkinLoaded', function () {\n          var serviceMessage = getServiceMessage(editor);\n          if (serviceMessage) {\n            open({\n              text: serviceMessage,\n              type: 'warning',\n              timeout: 0\n            }, false);\n          }\n          reposition();\n        });\n        editor.on('show ResizeEditor ResizeWindow NodeChange', function () {\n          Delay.requestAnimationFrame(reposition);\n        });\n        editor.on('remove', function () {\n          each$k(notifications.slice(), function (notification) {\n            getImplementation().close(notification);\n          });\n        });\n      };\n      registerEvents(editor);\n      return {\n        open: open,\n        close: close,\n        getNotifications: getNotifications\n      };\n    };\n\n    var PluginManager = AddOnManager.PluginManager;\n\n    var ThemeManager = AddOnManager.ThemeManager;\n\n    function WindowManagerImpl () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a WindowManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        openUrl: unimplemented,\n        alert: unimplemented,\n        confirm: unimplemented,\n        close: unimplemented,\n        getParams: unimplemented,\n        setParams: unimplemented\n      };\n    }\n\n    var WindowManager = function (editor) {\n      var dialogs = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getWindowManagerImpl ? theme.getWindowManagerImpl() : WindowManagerImpl();\n      };\n      var funcBind = function (scope, f) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return f ? f.apply(scope, args) : undefined;\n        };\n      };\n      var fireOpenEvent = function (dialog) {\n        editor.fire('OpenWindow', { dialog: dialog });\n      };\n      var fireCloseEvent = function (dialog) {\n        editor.fire('CloseWindow', { dialog: dialog });\n      };\n      var addDialog = function (dialog) {\n        dialogs.push(dialog);\n        fireOpenEvent(dialog);\n      };\n      var closeDialog = function (dialog) {\n        fireCloseEvent(dialog);\n        dialogs = filter$4(dialogs, function (otherDialog) {\n          return otherDialog !== dialog;\n        });\n        if (dialogs.length === 0) {\n          editor.focus();\n        }\n      };\n      var getTopDialog = function () {\n        return Optional.from(dialogs[dialogs.length - 1]);\n      };\n      var storeSelectionAndOpenDialog = function (openDialog) {\n        editor.editorManager.setActive(editor);\n        store(editor);\n        var dialog = openDialog();\n        addDialog(dialog);\n        return dialog;\n      };\n      var open = function (args, params) {\n        return storeSelectionAndOpenDialog(function () {\n          return getImplementation().open(args, params, closeDialog);\n        });\n      };\n      var openUrl = function (args) {\n        return storeSelectionAndOpenDialog(function () {\n          return getImplementation().openUrl(args, closeDialog);\n        });\n      };\n      var alert = function (message, callback, scope) {\n        var windowManagerImpl = getImplementation();\n        windowManagerImpl.alert(message, funcBind(scope ? scope : windowManagerImpl, callback));\n      };\n      var confirm = function (message, callback, scope) {\n        var windowManagerImpl = getImplementation();\n        windowManagerImpl.confirm(message, funcBind(scope ? scope : windowManagerImpl, callback));\n      };\n      var close = function () {\n        getTopDialog().each(function (dialog) {\n          getImplementation().close(dialog);\n          closeDialog(dialog);\n        });\n      };\n      editor.on('remove', function () {\n        each$k(dialogs, function (dialog) {\n          getImplementation().close(dialog);\n        });\n      });\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        confirm: confirm,\n        close: close\n      };\n    };\n\n    var displayNotification = function (editor, message) {\n      editor.notificationManager.open({\n        type: 'error',\n        text: message\n      });\n    };\n    var displayError = function (editor, message) {\n      if (editor._skinLoaded) {\n        displayNotification(editor, message);\n      } else {\n        editor.on('SkinLoaded', function () {\n          displayNotification(editor, message);\n        });\n      }\n    };\n    var uploadError = function (editor, message) {\n      displayError(editor, I18n.translate([\n        'Failed to upload image: {0}',\n        message\n      ]));\n    };\n    var logError = function (editor, errorType, msg) {\n      fireError(editor, errorType, { message: msg });\n      console.error(msg);\n    };\n    var createLoadError = function (type, url, name) {\n      return name ? 'Failed to load ' + type + ': ' + name + ' from url ' + url : 'Failed to load ' + type + ' url: ' + url;\n    };\n    var pluginLoadError = function (editor, url, name) {\n      logError(editor, 'PluginLoadError', createLoadError('plugin', url, name));\n    };\n    var iconsLoadError = function (editor, url, name) {\n      logError(editor, 'IconsLoadError', createLoadError('icons', url, name));\n    };\n    var languageLoadError = function (editor, url, name) {\n      logError(editor, 'LanguageLoadError', createLoadError('language', url, name));\n    };\n    var pluginInitError = function (editor, name, err) {\n      var message = I18n.translate([\n        'Failed to initialize plugin: {0}',\n        name\n      ]);\n      fireError(editor, 'PluginLoadError', { message: message });\n      initError(message, err);\n      displayError(editor, message);\n    };\n    var initError = function (message) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      var console = window.console;\n      if (console) {\n        if (console.error) {\n          console.error.apply(console, __spreadArray([message], x, false));\n        } else {\n          console.log.apply(console, __spreadArray([message], x, false));\n        }\n      }\n    };\n\n    var isContentCssSkinName = function (url) {\n      return /^[a-z0-9\\-]+$/i.test(url);\n    };\n    var getContentCssUrls = function (editor) {\n      return transformToUrls(editor, getContentCss(editor));\n    };\n    var getFontCssUrls = function (editor) {\n      return transformToUrls(editor, getFontCss(editor));\n    };\n    var transformToUrls = function (editor, cssLinks) {\n      var skinUrl = editor.editorManager.baseURL + '/skins/content';\n      var suffix = editor.editorManager.suffix;\n      var contentCssFile = 'content' + suffix + '.css';\n      var inline = editor.inline === true;\n      return map$3(cssLinks, function (url) {\n        if (isContentCssSkinName(url) && !inline) {\n          return skinUrl + '/' + url + '/' + contentCssFile;\n        } else {\n          return editor.documentBaseURI.toAbsolute(url);\n        }\n      });\n    };\n    var appendContentCssFromSettings = function (editor) {\n      editor.contentCSS = editor.contentCSS.concat(getContentCssUrls(editor), getFontCssUrls(editor));\n    };\n\n    var UploadStatus = function () {\n      var PENDING = 1, UPLOADED = 2;\n      var blobUriStatuses = {};\n      var createStatus = function (status, resultUri) {\n        return {\n          status: status,\n          resultUri: resultUri\n        };\n      };\n      var hasBlobUri = function (blobUri) {\n        return blobUri in blobUriStatuses;\n      };\n      var getResultUri = function (blobUri) {\n        var result = blobUriStatuses[blobUri];\n        return result ? result.resultUri : null;\n      };\n      var isPending = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === PENDING : false;\n      };\n      var isUploaded = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === UPLOADED : false;\n      };\n      var markPending = function (blobUri) {\n        blobUriStatuses[blobUri] = createStatus(PENDING, null);\n      };\n      var markUploaded = function (blobUri, resultUri) {\n        blobUriStatuses[blobUri] = createStatus(UPLOADED, resultUri);\n      };\n      var removeFailed = function (blobUri) {\n        delete blobUriStatuses[blobUri];\n      };\n      var destroy = function () {\n        blobUriStatuses = {};\n      };\n      return {\n        hasBlobUri: hasBlobUri,\n        getResultUri: getResultUri,\n        isPending: isPending,\n        isUploaded: isUploaded,\n        markPending: markPending,\n        markUploaded: markUploaded,\n        removeFailed: removeFailed,\n        destroy: destroy\n      };\n    };\n\n    var count = 0;\n    var seed = function () {\n      var rnd = function () {\n        return Math.round(Math.random() * 4294967295).toString(36);\n      };\n      var now = new Date().getTime();\n      return 's' + now.toString(36) + rnd() + rnd() + rnd();\n    };\n    var uuid = function (prefix) {\n      return prefix + count++ + seed();\n    };\n\n    var BlobCache = function () {\n      var cache = [];\n      var mimeToExt = function (mime) {\n        var mimes = {\n          'image/jpeg': 'jpg',\n          'image/jpg': 'jpg',\n          'image/gif': 'gif',\n          'image/png': 'png',\n          'image/apng': 'apng',\n          'image/avif': 'avif',\n          'image/svg+xml': 'svg',\n          'image/webp': 'webp',\n          'image/bmp': 'bmp',\n          'image/tiff': 'tiff'\n        };\n        return mimes[mime.toLowerCase()] || 'dat';\n      };\n      var create = function (o, blob, base64, name, filename) {\n        if (isString$1(o)) {\n          var id = o;\n          return toBlobInfo({\n            id: id,\n            name: name,\n            filename: filename,\n            blob: blob,\n            base64: base64\n          });\n        } else if (isObject(o)) {\n          return toBlobInfo(o);\n        } else {\n          throw new Error('Unknown input type');\n        }\n      };\n      var toBlobInfo = function (o) {\n        if (!o.blob || !o.base64) {\n          throw new Error('blob and base64 representations of the image are required for BlobInfo to be created');\n        }\n        var id = o.id || uuid('blobid');\n        var name = o.name || id;\n        var blob = o.blob;\n        return {\n          id: constant(id),\n          name: constant(name),\n          filename: constant(o.filename || name + '.' + mimeToExt(blob.type)),\n          blob: constant(blob),\n          base64: constant(o.base64),\n          blobUri: constant(o.blobUri || URL.createObjectURL(blob)),\n          uri: constant(o.uri)\n        };\n      };\n      var add = function (blobInfo) {\n        if (!get(blobInfo.id())) {\n          cache.push(blobInfo);\n        }\n      };\n      var findFirst = function (predicate) {\n        return find$3(cache, predicate).getOrUndefined();\n      };\n      var get = function (id) {\n        return findFirst(function (cachedBlobInfo) {\n          return cachedBlobInfo.id() === id;\n        });\n      };\n      var getByUri = function (blobUri) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.blobUri() === blobUri;\n        });\n      };\n      var getByData = function (base64, type) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.base64() === base64 && blobInfo.blob().type === type;\n        });\n      };\n      var removeByUri = function (blobUri) {\n        cache = filter$4(cache, function (blobInfo) {\n          if (blobInfo.blobUri() === blobUri) {\n            URL.revokeObjectURL(blobInfo.blobUri());\n            return false;\n          }\n          return true;\n        });\n      };\n      var destroy = function () {\n        each$k(cache, function (cachedBlobInfo) {\n          URL.revokeObjectURL(cachedBlobInfo.blobUri());\n        });\n        cache = [];\n      };\n      return {\n        create: create,\n        add: add,\n        get: get,\n        getByUri: getByUri,\n        getByData: getByData,\n        findFirst: findFirst,\n        removeByUri: removeByUri,\n        destroy: destroy\n      };\n    };\n\n    var Uploader = function (uploadStatus, settings) {\n      var pendingPromises = {};\n      var pathJoin = function (path1, path2) {\n        if (path1) {\n          return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n        }\n        return path2;\n      };\n      var defaultHandler = function (blobInfo, success, failure, progress) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('POST', settings.url);\n        xhr.withCredentials = settings.credentials;\n        xhr.upload.onprogress = function (e) {\n          progress(e.loaded / e.total * 100);\n        };\n        xhr.onerror = function () {\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n        };\n        xhr.onload = function () {\n          if (xhr.status < 200 || xhr.status >= 300) {\n            failure('HTTP Error: ' + xhr.status);\n            return;\n          }\n          var json = JSON.parse(xhr.responseText);\n          if (!json || typeof json.location !== 'string') {\n            failure('Invalid JSON: ' + xhr.responseText);\n            return;\n          }\n          success(pathJoin(settings.basePath, json.location));\n        };\n        var formData = new FormData();\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\n        xhr.send(formData);\n      };\n      var noUpload = function () {\n        return new promiseObj(function (resolve) {\n          resolve([]);\n        });\n      };\n      var handlerSuccess = function (blobInfo, url) {\n        return {\n          url: url,\n          blobInfo: blobInfo,\n          status: true\n        };\n      };\n      var handlerFailure = function (blobInfo, message, options) {\n        return {\n          url: '',\n          blobInfo: blobInfo,\n          status: false,\n          error: {\n            message: message,\n            options: options\n          }\n        };\n      };\n      var resolvePending = function (blobUri, result) {\n        Tools.each(pendingPromises[blobUri], function (resolve) {\n          resolve(result);\n        });\n        delete pendingPromises[blobUri];\n      };\n      var uploadBlobInfo = function (blobInfo, handler, openNotification) {\n        uploadStatus.markPending(blobInfo.blobUri());\n        return new promiseObj(function (resolve) {\n          var notification, progress;\n          try {\n            var closeNotification_1 = function () {\n              if (notification) {\n                notification.close();\n                progress = noop;\n              }\n            };\n            var success = function (url) {\n              closeNotification_1();\n              uploadStatus.markUploaded(blobInfo.blobUri(), url);\n              resolvePending(blobInfo.blobUri(), handlerSuccess(blobInfo, url));\n              resolve(handlerSuccess(blobInfo, url));\n            };\n            var failure = function (error, options) {\n              var failureOptions = options ? options : {};\n              closeNotification_1();\n              uploadStatus.removeFailed(blobInfo.blobUri());\n              resolvePending(blobInfo.blobUri(), handlerFailure(blobInfo, error, failureOptions));\n              resolve(handlerFailure(blobInfo, error, failureOptions));\n            };\n            progress = function (percent) {\n              if (percent < 0 || percent > 100) {\n                return;\n              }\n              Optional.from(notification).orThunk(function () {\n                return Optional.from(openNotification).map(apply);\n              }).each(function (n) {\n                notification = n;\n                n.progressBar.value(percent);\n              });\n            };\n            handler(blobInfo, success, failure, progress);\n          } catch (ex) {\n            resolve(handlerFailure(blobInfo, ex.message, {}));\n          }\n        });\n      };\n      var isDefaultHandler = function (handler) {\n        return handler === defaultHandler;\n      };\n      var pendingUploadBlobInfo = function (blobInfo) {\n        var blobUri = blobInfo.blobUri();\n        return new promiseObj(function (resolve) {\n          pendingPromises[blobUri] = pendingPromises[blobUri] || [];\n          pendingPromises[blobUri].push(resolve);\n        });\n      };\n      var uploadBlobs = function (blobInfos, openNotification) {\n        blobInfos = Tools.grep(blobInfos, function (blobInfo) {\n          return !uploadStatus.isUploaded(blobInfo.blobUri());\n        });\n        return promiseObj.all(Tools.map(blobInfos, function (blobInfo) {\n          return uploadStatus.isPending(blobInfo.blobUri()) ? pendingUploadBlobInfo(blobInfo) : uploadBlobInfo(blobInfo, settings.handler, openNotification);\n        }));\n      };\n      var upload = function (blobInfos, openNotification) {\n        return !settings.url && isDefaultHandler(settings.handler) ? noUpload() : uploadBlobs(blobInfos, openNotification);\n      };\n      if (isFunction(settings.handler) === false) {\n        settings.handler = defaultHandler;\n      }\n      return { upload: upload };\n    };\n\n    var openNotification = function (editor) {\n      return function () {\n        return editor.notificationManager.open({\n          text: editor.translate('Image uploading...'),\n          type: 'info',\n          timeout: -1,\n          progressBar: true\n        });\n      };\n    };\n    var createUploader = function (editor, uploadStatus) {\n      return Uploader(uploadStatus, {\n        url: getImageUploadUrl(editor),\n        basePath: getImageUploadBasePath(editor),\n        credentials: getImagesUploadCredentials(editor),\n        handler: getImagesUploadHandler(editor)\n      });\n    };\n    var ImageUploader = function (editor) {\n      var uploadStatus = UploadStatus();\n      var uploader = createUploader(editor, uploadStatus);\n      return {\n        upload: function (blobInfos, showNotification) {\n          if (showNotification === void 0) {\n            showNotification = true;\n          }\n          return uploader.upload(blobInfos, showNotification ? openNotification(editor) : undefined);\n        }\n      };\n    };\n\n    var UploadChangeHandler = function (editor) {\n      var lastChangedLevel = Cell(null);\n      editor.on('change AddUndo', function (e) {\n        lastChangedLevel.set(__assign({}, e.level));\n      });\n      var fireIfChanged = function () {\n        var data = editor.undoManager.data;\n        last$2(data).filter(function (level) {\n          return !isEq$1(lastChangedLevel.get(), level);\n        }).each(function (level) {\n          editor.setDirty(true);\n          editor.fire('change', {\n            level: level,\n            lastLevel: get$a(data, data.length - 2).getOrNull()\n          });\n        });\n      };\n      return { fireIfChanged: fireIfChanged };\n    };\n    var EditorUpload = function (editor) {\n      var blobCache = BlobCache();\n      var uploader, imageScanner;\n      var uploadStatus = UploadStatus();\n      var urlFilters = [];\n      var changeHandler = UploadChangeHandler(editor);\n      var aliveGuard = function (callback) {\n        return function (result) {\n          if (editor.selection) {\n            return callback(result);\n          }\n          return [];\n        };\n      };\n      var cacheInvalidator = function (url) {\n        return url + (url.indexOf('?') === -1 ? '?' : '&') + new Date().getTime();\n      };\n      var replaceString = function (content, search, replace) {\n        var index = 0;\n        do {\n          index = content.indexOf(search, index);\n          if (index !== -1) {\n            content = content.substring(0, index) + replace + content.substr(index + search.length);\n            index += replace.length - search.length + 1;\n          }\n        } while (index !== -1);\n        return content;\n      };\n      var replaceImageUrl = function (content, targetUrl, replacementUrl) {\n        var replacementString = 'src=\"' + replacementUrl + '\"' + (replacementUrl === Env.transparentSrc ? ' data-mce-placeholder=\"1\"' : '');\n        content = replaceString(content, 'src=\"' + targetUrl + '\"', replacementString);\n        content = replaceString(content, 'data-mce-src=\"' + targetUrl + '\"', 'data-mce-src=\"' + replacementUrl + '\"');\n        return content;\n      };\n      var replaceUrlInUndoStack = function (targetUrl, replacementUrl) {\n        each$k(editor.undoManager.data, function (level) {\n          if (level.type === 'fragmented') {\n            level.fragments = map$3(level.fragments, function (fragment) {\n              return replaceImageUrl(fragment, targetUrl, replacementUrl);\n            });\n          } else {\n            level.content = replaceImageUrl(level.content, targetUrl, replacementUrl);\n          }\n        });\n      };\n      var replaceImageUriInView = function (image, resultUri) {\n        var src = editor.convertURL(resultUri, 'src');\n        replaceUrlInUndoStack(image.src, resultUri);\n        editor.$(image).attr({\n          'src': shouldReuseFileName(editor) ? cacheInvalidator(resultUri) : resultUri,\n          'data-mce-src': src\n        });\n      };\n      var uploadImages = function (callback) {\n        if (!uploader) {\n          uploader = createUploader(editor, uploadStatus);\n        }\n        return scanForImages().then(aliveGuard(function (imageInfos) {\n          var blobInfos = map$3(imageInfos, function (imageInfo) {\n            return imageInfo.blobInfo;\n          });\n          return uploader.upload(blobInfos, openNotification(editor)).then(aliveGuard(function (result) {\n            var imagesToRemove = [];\n            var filteredResult = map$3(result, function (uploadInfo, index) {\n              var blobInfo = imageInfos[index].blobInfo;\n              var image = imageInfos[index].image;\n              if (uploadInfo.status && shouldReplaceBlobUris(editor)) {\n                blobCache.removeByUri(image.src);\n                if (isRtc(editor)) ; else {\n                  replaceImageUriInView(image, uploadInfo.url);\n                }\n              } else if (uploadInfo.error) {\n                if (uploadInfo.error.options.remove) {\n                  replaceUrlInUndoStack(image.getAttribute('src'), Env.transparentSrc);\n                  imagesToRemove.push(image);\n                }\n                uploadError(editor, uploadInfo.error.message);\n              }\n              return {\n                element: image,\n                status: uploadInfo.status,\n                uploadUri: uploadInfo.url,\n                blobInfo: blobInfo\n              };\n            });\n            if (filteredResult.length > 0) {\n              changeHandler.fireIfChanged();\n            }\n            if (imagesToRemove.length > 0) {\n              if (isRtc(editor)) {\n                console.error('Removing images on failed uploads is currently unsupported for RTC');\n              } else {\n                editor.undoManager.transact(function () {\n                  each$k(imagesToRemove, function (element) {\n                    editor.dom.remove(element);\n                    blobCache.removeByUri(element.src);\n                  });\n                });\n              }\n            }\n            if (callback) {\n              callback(filteredResult);\n            }\n            return filteredResult;\n          }));\n        }));\n      };\n      var uploadImagesAuto = function (callback) {\n        if (isAutomaticUploadsEnabled(editor)) {\n          return uploadImages(callback);\n        }\n      };\n      var isValidDataUriImage = function (imgElm) {\n        if (forall(urlFilters, function (filter) {\n            return filter(imgElm);\n          }) === false) {\n          return false;\n        }\n        if (imgElm.getAttribute('src').indexOf('data:') === 0) {\n          var dataImgFilter = getImagesDataImgFilter(editor);\n          return dataImgFilter(imgElm);\n        }\n        return true;\n      };\n      var addFilter = function (filter) {\n        urlFilters.push(filter);\n      };\n      var scanForImages = function () {\n        if (!imageScanner) {\n          imageScanner = ImageScanner(uploadStatus, blobCache);\n        }\n        return imageScanner.findAll(editor.getBody(), isValidDataUriImage).then(aliveGuard(function (result) {\n          result = filter$4(result, function (resultItem) {\n            if (typeof resultItem === 'string') {\n              displayError(editor, resultItem);\n              return false;\n            }\n            return true;\n          });\n          if (isRtc(editor)) ; else {\n            each$k(result, function (resultItem) {\n              replaceUrlInUndoStack(resultItem.image.src, resultItem.blobInfo.blobUri());\n              resultItem.image.src = resultItem.blobInfo.blobUri();\n              resultItem.image.removeAttribute('data-mce-src');\n            });\n          }\n          return result;\n        }));\n      };\n      var destroy = function () {\n        blobCache.destroy();\n        uploadStatus.destroy();\n        imageScanner = uploader = null;\n      };\n      var replaceBlobUris = function (content) {\n        return content.replace(/src=\"(blob:[^\"]+)\"/g, function (match, blobUri) {\n          var resultUri = uploadStatus.getResultUri(blobUri);\n          if (resultUri) {\n            return 'src=\"' + resultUri + '\"';\n          }\n          var blobInfo = blobCache.getByUri(blobUri);\n          if (!blobInfo) {\n            blobInfo = foldl(editor.editorManager.get(), function (result, editor) {\n              return result || editor.editorUpload && editor.editorUpload.blobCache.getByUri(blobUri);\n            }, null);\n          }\n          if (blobInfo) {\n            var blob = blobInfo.blob();\n            return 'src=\"data:' + blob.type + ';base64,' + blobInfo.base64() + '\"';\n          }\n          return match;\n        });\n      };\n      editor.on('SetContent', function () {\n        if (isAutomaticUploadsEnabled(editor)) {\n          uploadImagesAuto();\n        } else {\n          scanForImages();\n        }\n      });\n      editor.on('RawSaveContent', function (e) {\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('GetContent', function (e) {\n        if (e.source_view || e.format === 'raw' || e.format === 'tree') {\n          return;\n        }\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('PostRender', function () {\n        editor.parser.addNodeFilter('img', function (images) {\n          each$k(images, function (img) {\n            var src = img.attr('src');\n            if (blobCache.getByUri(src)) {\n              return;\n            }\n            var resultUri = uploadStatus.getResultUri(src);\n            if (resultUri) {\n              img.attr('src', resultUri);\n            }\n          });\n        });\n      });\n      return {\n        blobCache: blobCache,\n        addFilter: addFilter,\n        uploadImages: uploadImages,\n        uploadImagesAuto: uploadImagesAuto,\n        scanForImages: scanForImages,\n        destroy: destroy\n      };\n    };\n\n    var get = function (dom) {\n      var formats = {\n        valigntop: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'top' }\n          }],\n        valignmiddle: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'middle' }\n          }],\n        valignbottom: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'bottom' }\n          }],\n        alignleft: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-left',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'left' },\n            inherit: false,\n            preview: false,\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table,audio,video',\n            collapsed: false,\n            styles: { float: 'left' },\n            preview: 'font-family font-size'\n          }\n        ],\n        aligncenter: [\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'center' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-center',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'img,audio,video',\n            collapsed: false,\n            styles: {\n              display: 'block',\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignright: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-right',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'right' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table,audio,video',\n            collapsed: false,\n            styles: { float: 'right' },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignjustify: [{\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'justify' },\n            inherit: false,\n            defaultBlock: 'div',\n            preview: 'font-family font-size'\n          }],\n        bold: [\n          {\n            inline: 'strong',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontWeight: 'bold' }\n          },\n          {\n            inline: 'b',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        italic: [\n          {\n            inline: 'em',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontStyle: 'italic' }\n          },\n          {\n            inline: 'i',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        underline: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'underline' },\n            exact: true\n          },\n          {\n            inline: 'u',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        strikethrough: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'line-through' },\n            exact: true\n          },\n          {\n            inline: 'strike',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 's',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        forecolor: {\n          inline: 'span',\n          styles: { color: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        hilitecolor: {\n          inline: 'span',\n          styles: { backgroundColor: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        fontname: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontFamily: '%value' },\n          clear_child_styles: true\n        },\n        fontsize: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontSize: '%value' },\n          clear_child_styles: true\n        },\n        lineheight: {\n          selector: 'h1,h2,h3,h4,h5,h6,p,li,td,th,div',\n          defaultBlock: 'p',\n          styles: { lineHeight: '%value' }\n        },\n        fontsize_class: {\n          inline: 'span',\n          attributes: { class: '%value' }\n        },\n        blockquote: {\n          block: 'blockquote',\n          wrapper: true,\n          remove: 'all'\n        },\n        subscript: { inline: 'sub' },\n        superscript: { inline: 'sup' },\n        code: { inline: 'code' },\n        link: {\n          inline: 'a',\n          selector: 'a',\n          remove: 'all',\n          split: true,\n          deep: true,\n          onmatch: function (node, _fmt, _itemName) {\n            return isElement$5(node) && node.hasAttribute('href');\n          },\n          onformat: function (elm, _fmt, vars) {\n            Tools.each(vars, function (value, key) {\n              dom.setAttrib(elm, key, value);\n            });\n          }\n        },\n        lang: {\n          inline: 'span',\n          clear_child_styles: true,\n          remove_similar: true,\n          attributes: {\n            'lang': '%value',\n            'data-mce-lang': function (vars) {\n              var _a;\n              return (_a = vars === null || vars === void 0 ? void 0 : vars.customValue) !== null && _a !== void 0 ? _a : null;\n            }\n          }\n        },\n        removeformat: [\n          {\n            selector: 'b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small',\n            remove: 'all',\n            split: true,\n            expand: false,\n            block_expand: true,\n            deep: true\n          },\n          {\n            selector: 'span',\n            attributes: [\n              'style',\n              'class'\n            ],\n            remove: 'empty',\n            split: true,\n            expand: false,\n            deep: true\n          },\n          {\n            selector: '*',\n            attributes: [\n              'style',\n              'class'\n            ],\n            split: false,\n            expand: false,\n            deep: true\n          }\n        ]\n      };\n      Tools.each('p h1 h2 h3 h4 h5 h6 div address pre dt dd samp'.split(/\\s/), function (name) {\n        formats[name] = {\n          block: name,\n          remove: 'all'\n        };\n      });\n      return formats;\n    };\n\n    var FormatRegistry = function (editor) {\n      var formats = {};\n      var get$1 = function (name) {\n        return isNonNullable(name) ? formats[name] : formats;\n      };\n      var has = function (name) {\n        return has$2(formats, name);\n      };\n      var register = function (name, format) {\n        if (name) {\n          if (!isString$1(name)) {\n            each$j(name, function (format, name) {\n              register(name, format);\n            });\n          } else {\n            if (!isArray$1(format)) {\n              format = [format];\n            }\n            each$k(format, function (format) {\n              if (isUndefined(format.deep)) {\n                format.deep = !isSelectorFormat(format);\n              }\n              if (isUndefined(format.split)) {\n                format.split = !isSelectorFormat(format) || isInlineFormat(format);\n              }\n              if (isUndefined(format.remove) && isSelectorFormat(format) && !isInlineFormat(format)) {\n                format.remove = 'none';\n              }\n              if (isSelectorFormat(format) && isInlineFormat(format)) {\n                format.mixed = true;\n                format.block_expand = true;\n              }\n              if (isString$1(format.classes)) {\n                format.classes = format.classes.split(/\\s+/);\n              }\n            });\n            formats[name] = format;\n          }\n        }\n      };\n      var unregister = function (name) {\n        if (name && formats[name]) {\n          delete formats[name];\n        }\n        return formats;\n      };\n      register(get(editor.dom));\n      register(getFormats(editor));\n      return {\n        get: get$1,\n        has: has,\n        register: register,\n        unregister: unregister\n      };\n    };\n\n    var each$5 = Tools.each;\n    var dom = DOMUtils.DOM;\n    var parsedSelectorToHtml = function (ancestry, editor) {\n      var elm, item, fragment;\n      var schema = editor && editor.schema || Schema({});\n      var decorate = function (elm, item) {\n        if (item.classes.length) {\n          dom.addClass(elm, item.classes.join(' '));\n        }\n        dom.setAttribs(elm, item.attrs);\n      };\n      var createElement = function (sItem) {\n        item = typeof sItem === 'string' ? {\n          name: sItem,\n          classes: [],\n          attrs: {}\n        } : sItem;\n        var elm = dom.create(item.name);\n        decorate(elm, item);\n        return elm;\n      };\n      var getRequiredParent = function (elm, candidate) {\n        var name = typeof elm !== 'string' ? elm.nodeName.toLowerCase() : elm;\n        var elmRule = schema.getElementRule(name);\n        var parentsRequired = elmRule && elmRule.parentsRequired;\n        if (parentsRequired && parentsRequired.length) {\n          return candidate && Tools.inArray(parentsRequired, candidate) !== -1 ? candidate : parentsRequired[0];\n        } else {\n          return false;\n        }\n      };\n      var wrapInHtml = function (elm, ancestry, siblings) {\n        var parent, parentCandidate;\n        var ancestor = ancestry.length > 0 && ancestry[0];\n        var ancestorName = ancestor && ancestor.name;\n        var parentRequired = getRequiredParent(elm, ancestorName);\n        if (parentRequired) {\n          if (ancestorName === parentRequired) {\n            parentCandidate = ancestry[0];\n            ancestry = ancestry.slice(1);\n          } else {\n            parentCandidate = parentRequired;\n          }\n        } else if (ancestor) {\n          parentCandidate = ancestry[0];\n          ancestry = ancestry.slice(1);\n        } else if (!siblings) {\n          return elm;\n        }\n        if (parentCandidate) {\n          parent = createElement(parentCandidate);\n          parent.appendChild(elm);\n        }\n        if (siblings) {\n          if (!parent) {\n            parent = dom.create('div');\n            parent.appendChild(elm);\n          }\n          Tools.each(siblings, function (sibling) {\n            var siblingElm = createElement(sibling);\n            parent.insertBefore(siblingElm, elm);\n          });\n        }\n        return wrapInHtml(parent, ancestry, parentCandidate && parentCandidate.siblings);\n      };\n      if (ancestry && ancestry.length) {\n        item = ancestry[0];\n        elm = createElement(item);\n        fragment = dom.create('div');\n        fragment.appendChild(wrapInHtml(elm, ancestry.slice(1), item.siblings));\n        return fragment;\n      } else {\n        return '';\n      }\n    };\n    var parseSelectorItem = function (item) {\n      var tagName;\n      var obj = {\n        classes: [],\n        attrs: {}\n      };\n      item = obj.selector = Tools.trim(item);\n      if (item !== '*') {\n        tagName = item.replace(/(?:([#\\.]|::?)([\\w\\-]+)|(\\[)([^\\]]+)\\]?)/g, function ($0, $1, $2, $3, $4) {\n          switch ($1) {\n          case '#':\n            obj.attrs.id = $2;\n            break;\n          case '.':\n            obj.classes.push($2);\n            break;\n          case ':':\n            if (Tools.inArray('checked disabled enabled read-only required'.split(' '), $2) !== -1) {\n              obj.attrs[$2] = $2;\n            }\n            break;\n          }\n          if ($3 === '[') {\n            var m = $4.match(/([\\w\\-]+)(?:\\=\\\"([^\\\"]+))?/);\n            if (m) {\n              obj.attrs[m[1]] = m[2];\n            }\n          }\n          return '';\n        });\n      }\n      obj.name = tagName || 'div';\n      return obj;\n    };\n    var parseSelector = function (selector) {\n      if (!selector || typeof selector !== 'string') {\n        return [];\n      }\n      selector = selector.split(/\\s*,\\s*/)[0];\n      selector = selector.replace(/\\s*(~\\+|~|\\+|>)\\s*/g, '$1');\n      return Tools.map(selector.split(/(?:>|\\s+(?![^\\[\\]]+\\]))/), function (item) {\n        var siblings = Tools.map(item.split(/(?:~\\+|~|\\+)/), parseSelectorItem);\n        var obj = siblings.pop();\n        if (siblings.length) {\n          obj.siblings = siblings;\n        }\n        return obj;\n      }).reverse();\n    };\n    var getCssText = function (editor, format) {\n      var name, previewFrag;\n      var previewCss = '', parentFontSize;\n      var previewStyles = getPreviewStyles(editor);\n      if (previewStyles === '') {\n        return '';\n      }\n      var removeVars = function (val) {\n        return val.replace(/%(\\w+)/g, '');\n      };\n      if (typeof format === 'string') {\n        format = editor.formatter.get(format);\n        if (!format) {\n          return;\n        }\n        format = format[0];\n      }\n      if ('preview' in format) {\n        var previewOpt = get$9(format, 'preview');\n        if (is$1(previewOpt, false)) {\n          return '';\n        } else {\n          previewStyles = previewOpt.getOr(previewStyles);\n        }\n      }\n      name = format.block || format.inline || 'span';\n      var items = parseSelector(format.selector);\n      if (items.length) {\n        if (!items[0].name) {\n          items[0].name = name;\n        }\n        name = format.selector;\n        previewFrag = parsedSelectorToHtml(items, editor);\n      } else {\n        previewFrag = parsedSelectorToHtml([name], editor);\n      }\n      var previewElm = dom.select(name, previewFrag)[0] || previewFrag.firstChild;\n      each$5(format.styles, function (value, name) {\n        var newValue = removeVars(value);\n        if (newValue) {\n          dom.setStyle(previewElm, name, newValue);\n        }\n      });\n      each$5(format.attributes, function (value, name) {\n        var newValue = removeVars(value);\n        if (newValue) {\n          dom.setAttrib(previewElm, name, newValue);\n        }\n      });\n      each$5(format.classes, function (value) {\n        var newValue = removeVars(value);\n        if (!dom.hasClass(previewElm, newValue)) {\n          dom.addClass(previewElm, newValue);\n        }\n      });\n      editor.fire('PreviewFormats');\n      dom.setStyles(previewFrag, {\n        position: 'absolute',\n        left: -65535\n      });\n      editor.getBody().appendChild(previewFrag);\n      parentFontSize = dom.getStyle(editor.getBody(), 'fontSize', true);\n      parentFontSize = /px$/.test(parentFontSize) ? parseInt(parentFontSize, 10) : 0;\n      each$5(previewStyles.split(' '), function (name) {\n        var value = dom.getStyle(previewElm, name, true);\n        if (name === 'background-color' && /transparent|rgba\\s*\\([^)]+,\\s*0\\)/.test(value)) {\n          value = dom.getStyle(editor.getBody(), name, true);\n          if (dom.toHex(value).toLowerCase() === '#ffffff') {\n            return;\n          }\n        }\n        if (name === 'color') {\n          if (dom.toHex(value).toLowerCase() === '#000000') {\n            return;\n          }\n        }\n        if (name === 'font-size') {\n          if (/em|%$/.test(value)) {\n            if (parentFontSize === 0) {\n              return;\n            }\n            var numValue = parseFloat(value) / (/%$/.test(value) ? 100 : 1);\n            value = numValue * parentFontSize + 'px';\n          }\n        }\n        if (name === 'border' && value) {\n          previewCss += 'padding:0 2px;';\n        }\n        previewCss += name + ':' + value + ';';\n      });\n      editor.fire('AfterPreviewFormats');\n      dom.remove(previewFrag);\n      return previewCss;\n    };\n\n    var setup$h = function (editor) {\n      editor.addShortcut('meta+b', '', 'Bold');\n      editor.addShortcut('meta+i', '', 'Italic');\n      editor.addShortcut('meta+u', '', 'Underline');\n      for (var i = 1; i <= 6; i++) {\n        editor.addShortcut('access+' + i, '', [\n          'FormatBlock',\n          false,\n          'h' + i\n        ]);\n      }\n      editor.addShortcut('access+7', '', [\n        'FormatBlock',\n        false,\n        'p'\n      ]);\n      editor.addShortcut('access+8', '', [\n        'FormatBlock',\n        false,\n        'div'\n      ]);\n      editor.addShortcut('access+9', '', [\n        'FormatBlock',\n        false,\n        'address'\n      ]);\n    };\n\n    var Formatter = function (editor) {\n      var formats = FormatRegistry(editor);\n      var formatChangeState = Cell(null);\n      setup$h(editor);\n      setup$k(editor);\n      return {\n        get: formats.get,\n        has: formats.has,\n        register: formats.register,\n        unregister: formats.unregister,\n        apply: function (name, vars, node) {\n          applyFormat(editor, name, vars, node);\n        },\n        remove: function (name, vars, node, similar) {\n          removeFormat(editor, name, vars, node, similar);\n        },\n        toggle: function (name, vars, node) {\n          toggleFormat(editor, name, vars, node);\n        },\n        match: function (name, vars, node, similar) {\n          return matchFormat(editor, name, vars, node, similar);\n        },\n        closest: function (names) {\n          return closestFormat(editor, names);\n        },\n        matchAll: function (names, vars) {\n          return matchAllFormats(editor, names, vars);\n        },\n        matchNode: function (node, name, vars, similar) {\n          return matchNodeFormat(editor, node, name, vars, similar);\n        },\n        canApply: function (name) {\n          return canApplyFormat(editor, name);\n        },\n        formatChanged: function (formats, callback, similar, vars) {\n          return formatChanged(editor, formatChangeState, formats, callback, similar, vars);\n        },\n        getCssText: curry(getCssText, editor)\n      };\n    };\n\n    var shouldIgnoreCommand = function (cmd) {\n      switch (cmd.toLowerCase()) {\n      case 'undo':\n      case 'redo':\n      case 'mcerepaint':\n      case 'mcefocus':\n        return true;\n      default:\n        return false;\n      }\n    };\n    var registerEvents = function (editor, undoManager, locks) {\n      var isFirstTypedCharacter = Cell(false);\n      var addNonTypingUndoLevel = function (e) {\n        setTyping(undoManager, false, locks);\n        undoManager.add({}, e);\n      };\n      editor.on('init', function () {\n        undoManager.add();\n      });\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command;\n        if (!shouldIgnoreCommand(cmd)) {\n          endTyping(undoManager, locks);\n          undoManager.beforeChange();\n        }\n      });\n      editor.on('ExecCommand', function (e) {\n        var cmd = e.command;\n        if (!shouldIgnoreCommand(cmd)) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('ObjectResizeStart cut', function () {\n        undoManager.beforeChange();\n      });\n      editor.on('SaveContent ObjectResized blur', addNonTypingUndoLevel);\n      editor.on('dragend', addNonTypingUndoLevel);\n      editor.on('keyup', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45 || e.ctrlKey) {\n          addNonTypingUndoLevel();\n          editor.nodeChanged();\n        }\n        if (keyCode === 46 || keyCode === 8) {\n          editor.nodeChanged();\n        }\n        if (isFirstTypedCharacter.get() && undoManager.typing && isEq$1(createFromEditor(editor), undoManager.data[0]) === false) {\n          if (editor.isDirty() === false) {\n            editor.setDirty(true);\n            editor.fire('change', {\n              level: undoManager.data[0],\n              lastLevel: null\n            });\n          }\n          editor.fire('TypingUndo');\n          isFirstTypedCharacter.set(false);\n          editor.nodeChanged();\n        }\n      });\n      editor.on('keydown', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45) {\n          if (undoManager.typing) {\n            addNonTypingUndoLevel(e);\n          }\n          return;\n        }\n        var modKey = e.ctrlKey && !e.altKey || e.metaKey;\n        if ((keyCode < 16 || keyCode > 20) && keyCode !== 224 && keyCode !== 91 && !undoManager.typing && !modKey) {\n          undoManager.beforeChange();\n          setTyping(undoManager, true, locks);\n          undoManager.add({}, e);\n          isFirstTypedCharacter.set(true);\n        }\n      });\n      editor.on('mousedown', function (e) {\n        if (undoManager.typing) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      var isInsertReplacementText = function (event) {\n        return event.inputType === 'insertReplacementText';\n      };\n      var isInsertTextDataNull = function (event) {\n        return event.inputType === 'insertText' && event.data === null;\n      };\n      var isInsertFromPasteOrDrop = function (event) {\n        return event.inputType === 'insertFromPaste' || event.inputType === 'insertFromDrop';\n      };\n      editor.on('input', function (e) {\n        if (e.inputType && (isInsertReplacementText(e) || isInsertTextDataNull(e) || isInsertFromPasteOrDrop(e))) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('AddUndo Undo Redo ClearUndos', function (e) {\n        if (!e.isDefaultPrevented()) {\n          editor.nodeChanged();\n        }\n      });\n    };\n    var addKeyboardShortcuts = function (editor) {\n      editor.addShortcut('meta+z', '', 'Undo');\n      editor.addShortcut('meta+y,meta+shift+z', '', 'Redo');\n    };\n\n    var UndoManager = function (editor) {\n      var beforeBookmark = value();\n      var locks = Cell(0);\n      var index = Cell(0);\n      var undoManager = {\n        data: [],\n        typing: false,\n        beforeChange: function () {\n          beforeChange(editor, locks, beforeBookmark);\n        },\n        add: function (level, event) {\n          return addUndoLevel(editor, undoManager, index, locks, beforeBookmark, level, event);\n        },\n        undo: function () {\n          return undo(editor, undoManager, locks, index);\n        },\n        redo: function () {\n          return redo(editor, index, undoManager.data);\n        },\n        clear: function () {\n          clear(editor, undoManager, index);\n        },\n        reset: function () {\n          reset(editor, undoManager);\n        },\n        hasUndo: function () {\n          return hasUndo(editor, undoManager, index);\n        },\n        hasRedo: function () {\n          return hasRedo(editor, undoManager, index);\n        },\n        transact: function (callback) {\n          return transact(editor, undoManager, locks, callback);\n        },\n        ignore: function (callback) {\n          ignore(editor, locks, callback);\n        },\n        extra: function (callback1, callback2) {\n          extra(editor, undoManager, index, callback1, callback2);\n        }\n      };\n      if (!isRtc(editor)) {\n        registerEvents(editor, undoManager, locks);\n      }\n      addKeyboardShortcuts(editor);\n      return undoManager;\n    };\n\n    var nonTypingKeycodes = [\n      9,\n      27,\n      VK.HOME,\n      VK.END,\n      19,\n      20,\n      44,\n      144,\n      145,\n      33,\n      34,\n      45,\n      16,\n      17,\n      18,\n      91,\n      92,\n      93,\n      VK.DOWN,\n      VK.UP,\n      VK.LEFT,\n      VK.RIGHT\n    ].concat(Env.browser.isFirefox() ? [224] : []);\n    var placeholderAttr = 'data-mce-placeholder';\n    var isKeyboardEvent = function (e) {\n      return e.type === 'keydown' || e.type === 'keyup';\n    };\n    var isDeleteEvent = function (e) {\n      var keyCode = e.keyCode;\n      return keyCode === VK.BACKSPACE || keyCode === VK.DELETE;\n    };\n    var isNonTypingKeyboardEvent = function (e) {\n      if (isKeyboardEvent(e)) {\n        var keyCode = e.keyCode;\n        return !isDeleteEvent(e) && (VK.metaKeyPressed(e) || e.altKey || keyCode >= 112 && keyCode <= 123 || contains$3(nonTypingKeycodes, keyCode));\n      } else {\n        return false;\n      }\n    };\n    var isTypingKeyboardEvent = function (e) {\n      return isKeyboardEvent(e) && !(isDeleteEvent(e) || e.type === 'keyup' && e.keyCode === 229);\n    };\n    var isVisuallyEmpty = function (dom, rootElm, forcedRootBlock) {\n      if (isEmpty$2(SugarElement.fromDom(rootElm), false)) {\n        var isForcedRootBlockFalse = forcedRootBlock === '';\n        var firstElement = rootElm.firstElementChild;\n        if (!firstElement) {\n          return true;\n        } else if (dom.getStyle(rootElm.firstElementChild, 'padding-left') || dom.getStyle(rootElm.firstElementChild, 'padding-right')) {\n          return false;\n        } else {\n          return isForcedRootBlockFalse ? !dom.isBlock(firstElement) : forcedRootBlock === firstElement.nodeName.toLowerCase();\n        }\n      } else {\n        return false;\n      }\n    };\n    var setup$g = function (editor) {\n      var dom = editor.dom;\n      var rootBlock = getForcedRootBlock(editor);\n      var placeholder = getPlaceholder(editor);\n      var updatePlaceholder = function (e, initial) {\n        if (isNonTypingKeyboardEvent(e)) {\n          return;\n        }\n        var body = editor.getBody();\n        var showPlaceholder = isTypingKeyboardEvent(e) ? false : isVisuallyEmpty(dom, body, rootBlock);\n        var isPlaceholderShown = dom.getAttrib(body, placeholderAttr) !== '';\n        if (isPlaceholderShown !== showPlaceholder || initial) {\n          dom.setAttrib(body, placeholderAttr, showPlaceholder ? placeholder : null);\n          dom.setAttrib(body, 'aria-placeholder', showPlaceholder ? placeholder : null);\n          firePlaceholderToggle(editor, showPlaceholder);\n          editor.on(showPlaceholder ? 'keydown' : 'keyup', updatePlaceholder);\n          editor.off(showPlaceholder ? 'keyup' : 'keydown', updatePlaceholder);\n        }\n      };\n      if (placeholder) {\n        editor.on('init', function (e) {\n          updatePlaceholder(e, true);\n          editor.on('change SetContent ExecCommand', updatePlaceholder);\n          editor.on('paste', function (e) {\n            return Delay.setEditorTimeout(editor, function () {\n              return updatePlaceholder(e);\n            });\n          });\n        });\n      }\n    };\n\n    var strongRtl = /[\\u0591-\\u07FF\\uFB1D-\\uFDFF\\uFE70-\\uFEFC]/;\n    var hasStrongRtl = function (text) {\n      return strongRtl.test(text);\n    };\n\n    var isInlineTarget = function (editor, elm) {\n      return is$2(SugarElement.fromDom(elm), getInlineBoundarySelector(editor));\n    };\n    var isRtl = function (element) {\n      return DOMUtils.DOM.getStyle(element, 'direction', true) === 'rtl' || hasStrongRtl(element.textContent);\n    };\n    var findInlineParents = function (isInlineTarget, rootNode, pos) {\n      return filter$4(DOMUtils.DOM.getParents(pos.container(), '*', rootNode), isInlineTarget);\n    };\n    var findRootInline = function (isInlineTarget, rootNode, pos) {\n      var parents = findInlineParents(isInlineTarget, rootNode, pos);\n      return Optional.from(parents[parents.length - 1]);\n    };\n    var hasSameParentBlock = function (rootNode, node1, node2) {\n      var block1 = getParentBlock$2(node1, rootNode);\n      var block2 = getParentBlock$2(node2, rootNode);\n      return block1 && block1 === block2;\n    };\n    var isAtZwsp = function (pos) {\n      return isBeforeInline(pos) || isAfterInline(pos);\n    };\n    var normalizePosition = function (forward, pos) {\n      if (!pos) {\n        return pos;\n      }\n      var container = pos.container(), offset = pos.offset();\n      if (forward) {\n        if (isCaretContainerInline(container)) {\n          if (isText$7(container.nextSibling)) {\n            return CaretPosition(container.nextSibling, 0);\n          } else {\n            return CaretPosition.after(container);\n          }\n        } else {\n          return isBeforeInline(pos) ? CaretPosition(container, offset + 1) : pos;\n        }\n      } else {\n        if (isCaretContainerInline(container)) {\n          if (isText$7(container.previousSibling)) {\n            return CaretPosition(container.previousSibling, container.previousSibling.data.length);\n          } else {\n            return CaretPosition.before(container);\n          }\n        } else {\n          return isAfterInline(pos) ? CaretPosition(container, offset - 1) : pos;\n        }\n      }\n    };\n    var normalizeForwards = curry(normalizePosition, true);\n    var normalizeBackwards = curry(normalizePosition, false);\n\n    var isBeforeRoot = function (rootNode) {\n      return function (elm) {\n        return eq(rootNode, SugarElement.fromDom(elm.dom.parentNode));\n      };\n    };\n    var isTextBlockOrListItem = function (element) {\n      return isTextBlock$2(element) || isListItem(element);\n    };\n    var getParentBlock$1 = function (rootNode, elm) {\n      if (contains$1(rootNode, elm)) {\n        return closest$3(elm, isTextBlockOrListItem, isBeforeRoot(rootNode));\n      } else {\n        return Optional.none();\n      }\n    };\n    var placeCaretInEmptyBody = function (editor) {\n      var body = editor.getBody();\n      var node = body.firstChild && editor.dom.isBlock(body.firstChild) ? body.firstChild : body;\n      editor.selection.setCursorLocation(node, 0);\n    };\n    var paddEmptyBody = function (editor) {\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        placeCaretInEmptyBody(editor);\n      }\n    };\n    var willDeleteLastPositionInElement = function (forward, fromPos, elm) {\n      return lift2(firstPositionIn(elm), lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = normalizePosition(true, firstPos);\n        var normalizedLastPos = normalizePosition(false, lastPos);\n        var normalizedFromPos = normalizePosition(false, fromPos);\n        if (forward) {\n          return nextPosition(elm, normalizedFromPos).exists(function (nextPos) {\n            return nextPos.isEqual(normalizedLastPos) && fromPos.isEqual(normalizedFirstPos);\n          });\n        } else {\n          return prevPosition(elm, normalizedFromPos).exists(function (prevPos) {\n            return prevPos.isEqual(normalizedFirstPos) && fromPos.isEqual(normalizedLastPos);\n          });\n        }\n      }).getOr(true);\n    };\n\n    var blockPosition = function (block, position) {\n      return {\n        block: block,\n        position: position\n      };\n    };\n    var blockBoundary = function (from, to) {\n      return {\n        from: from,\n        to: to\n      };\n    };\n    var getBlockPosition = function (rootNode, pos) {\n      var rootElm = SugarElement.fromDom(rootNode);\n      var containerElm = SugarElement.fromDom(pos.container());\n      return getParentBlock$1(rootElm, containerElm).map(function (block) {\n        return blockPosition(block, pos);\n      });\n    };\n    var isDifferentBlocks = function (blockBoundary) {\n      return eq(blockBoundary.from.block, blockBoundary.to.block) === false;\n    };\n    var hasSameParent = function (blockBoundary) {\n      return parent(blockBoundary.from.block).bind(function (parent1) {\n        return parent(blockBoundary.to.block).filter(function (parent2) {\n          return eq(parent1, parent2);\n        });\n      }).isSome();\n    };\n    var isEditable$1 = function (blockBoundary) {\n      return isContentEditableFalse$b(blockBoundary.from.block.dom) === false && isContentEditableFalse$b(blockBoundary.to.block.dom) === false;\n    };\n    var skipLastBr = function (rootNode, forward, blockPosition) {\n      if (isBr$5(blockPosition.position.getNode()) && isEmpty$2(blockPosition.block) === false) {\n        return positionIn(false, blockPosition.block.dom).bind(function (lastPositionInBlock) {\n          if (lastPositionInBlock.isEqual(blockPosition.position)) {\n            return fromPosition(forward, rootNode, lastPositionInBlock).bind(function (to) {\n              return getBlockPosition(rootNode, to);\n            });\n          } else {\n            return Optional.some(blockPosition);\n          }\n        }).getOr(blockPosition);\n      } else {\n        return blockPosition;\n      }\n    };\n    var readFromRange = function (rootNode, forward, rng) {\n      var fromBlockPos = getBlockPosition(rootNode, CaretPosition.fromRangeStart(rng));\n      var toBlockPos = fromBlockPos.bind(function (blockPos) {\n        return fromPosition(forward, rootNode, blockPos.position).bind(function (to) {\n          return getBlockPosition(rootNode, to).map(function (blockPos) {\n            return skipLastBr(rootNode, forward, blockPos);\n          });\n        });\n      });\n      return lift2(fromBlockPos, toBlockPos, blockBoundary).filter(function (blockBoundary) {\n        return isDifferentBlocks(blockBoundary) && hasSameParent(blockBoundary) && isEditable$1(blockBoundary);\n      });\n    };\n    var read$1 = function (rootNode, forward, rng) {\n      return rng.collapsed ? readFromRange(rootNode, forward, rng) : Optional.none();\n    };\n\n    var getChildrenUntilBlockBoundary = function (block) {\n      var children$1 = children(block);\n      return findIndex$2(children$1, isBlock$2).fold(constant(children$1), function (index) {\n        return children$1.slice(0, index);\n      });\n    };\n    var extractChildren = function (block) {\n      var children = getChildrenUntilBlockBoundary(block);\n      each$k(children, remove$7);\n      return children;\n    };\n    var removeEmptyRoot = function (rootNode, block) {\n      var parents = parentsAndSelf(block, rootNode);\n      return find$3(parents.reverse(), function (element) {\n        return isEmpty$2(element);\n      }).each(remove$7);\n    };\n    var isEmptyBefore = function (el) {\n      return filter$4(prevSiblings(el), function (el) {\n        return !isEmpty$2(el);\n      }).length === 0;\n    };\n    var nestedBlockMerge = function (rootNode, fromBlock, toBlock, insertionPoint) {\n      if (isEmpty$2(toBlock)) {\n        fillWithPaddingBr(toBlock);\n        return firstPositionIn(toBlock.dom);\n      }\n      if (isEmptyBefore(insertionPoint) && isEmpty$2(fromBlock)) {\n        before$4(insertionPoint, SugarElement.fromTag('br'));\n      }\n      var position = prevPosition(toBlock.dom, CaretPosition.before(insertionPoint.dom));\n      each$k(extractChildren(fromBlock), function (child) {\n        before$4(insertionPoint, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var sidelongBlockMerge = function (rootNode, fromBlock, toBlock) {\n      if (isEmpty$2(toBlock)) {\n        remove$7(toBlock);\n        if (isEmpty$2(fromBlock)) {\n          fillWithPaddingBr(fromBlock);\n        }\n        return firstPositionIn(fromBlock.dom);\n      }\n      var position = lastPositionIn(toBlock.dom);\n      each$k(extractChildren(fromBlock), function (child) {\n        append$1(toBlock, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var findInsertionPoint = function (toBlock, block) {\n      var parentsAndSelf$1 = parentsAndSelf(block, toBlock);\n      return Optional.from(parentsAndSelf$1[parentsAndSelf$1.length - 1]);\n    };\n    var getInsertionPoint = function (fromBlock, toBlock) {\n      return contains$1(toBlock, fromBlock) ? findInsertionPoint(toBlock, fromBlock) : Optional.none();\n    };\n    var trimBr = function (first, block) {\n      positionIn(first, block.dom).map(function (position) {\n        return position.getNode();\n      }).map(SugarElement.fromDom).filter(isBr$4).each(remove$7);\n    };\n    var mergeBlockInto = function (rootNode, fromBlock, toBlock) {\n      trimBr(true, fromBlock);\n      trimBr(false, toBlock);\n      return getInsertionPoint(fromBlock, toBlock).fold(curry(sidelongBlockMerge, rootNode, fromBlock, toBlock), curry(nestedBlockMerge, rootNode, fromBlock, toBlock));\n    };\n    var mergeBlocks = function (rootNode, forward, block1, block2) {\n      return forward ? mergeBlockInto(rootNode, block2, block1) : mergeBlockInto(rootNode, block1, block2);\n    };\n\n    var backspaceDelete$8 = function (editor, forward) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var position = read$1(rootNode.dom, forward, editor.selection.getRng()).bind(function (blockBoundary) {\n        return mergeBlocks(rootNode, forward, blockBoundary.from.block, blockBoundary.to.block);\n      });\n      position.each(function (pos) {\n        editor.selection.setRng(pos.toRange());\n      });\n      return position.isSome();\n    };\n\n    var deleteRangeMergeBlocks = function (rootNode, selection) {\n      var rng = selection.getRng();\n      return lift2(getParentBlock$1(rootNode, SugarElement.fromDom(rng.startContainer)), getParentBlock$1(rootNode, SugarElement.fromDom(rng.endContainer)), function (block1, block2) {\n        if (eq(block1, block2) === false) {\n          rng.deleteContents();\n          mergeBlocks(rootNode, true, block1, block2).each(function (pos) {\n            selection.setRng(pos.toRange());\n          });\n          return true;\n        } else {\n          return false;\n        }\n      }).getOr(false);\n    };\n    var isRawNodeInTable = function (root, rawNode) {\n      var node = SugarElement.fromDom(rawNode);\n      var isRoot = curry(eq, root);\n      return ancestor$3(node, isTableCell$4, isRoot).isSome();\n    };\n    var isSelectionInTable = function (root, rng) {\n      return isRawNodeInTable(root, rng.startContainer) || isRawNodeInTable(root, rng.endContainer);\n    };\n    var isEverythingSelected = function (root, rng) {\n      var noPrevious = prevPosition(root.dom, CaretPosition.fromRangeStart(rng)).isNone();\n      var noNext = nextPosition(root.dom, CaretPosition.fromRangeEnd(rng)).isNone();\n      return !isSelectionInTable(root, rng) && noPrevious && noNext;\n    };\n    var emptyEditor = function (editor) {\n      editor.setContent('');\n      editor.selection.setCursorLocation();\n      return true;\n    };\n    var deleteRange$1 = function (editor) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      return isEverythingSelected(rootNode, rng) ? emptyEditor(editor) : deleteRangeMergeBlocks(rootNode, editor.selection);\n    };\n    var backspaceDelete$7 = function (editor, _forward) {\n      return editor.selection.isCollapsed() ? false : deleteRange$1(editor);\n    };\n\n    var isContentEditableTrue$2 = isContentEditableTrue$4;\n    var isContentEditableFalse$4 = isContentEditableFalse$b;\n    var showCaret = function (direction, editor, node, before, scrollIntoView) {\n      return Optional.from(editor._selectionOverrides.showCaret(direction, node, before, scrollIntoView));\n    };\n    var getNodeRange = function (node) {\n      var rng = node.ownerDocument.createRange();\n      rng.selectNode(node);\n      return rng;\n    };\n    var selectNode = function (editor, node) {\n      var e = editor.fire('BeforeObjectSelected', { target: node });\n      if (e.isDefaultPrevented()) {\n        return Optional.none();\n      }\n      return Optional.some(getNodeRange(node));\n    };\n    var renderCaretAtRange = function (editor, range, scrollIntoView) {\n      var normalizedRange = normalizeRange(1, editor.getBody(), range);\n      var caretPosition = CaretPosition.fromRangeStart(normalizedRange);\n      var caretPositionNode = caretPosition.getNode();\n      if (isInlineFakeCaretTarget(caretPositionNode)) {\n        return showCaret(1, editor, caretPositionNode, !caretPosition.isAtEnd(), false);\n      }\n      var caretPositionBeforeNode = caretPosition.getNode(true);\n      if (isInlineFakeCaretTarget(caretPositionBeforeNode)) {\n        return showCaret(1, editor, caretPositionBeforeNode, false, false);\n      }\n      var ceRoot = editor.dom.getParent(caretPosition.getNode(), function (node) {\n        return isContentEditableFalse$4(node) || isContentEditableTrue$2(node);\n      });\n      if (isInlineFakeCaretTarget(ceRoot)) {\n        return showCaret(1, editor, ceRoot, false, scrollIntoView);\n      }\n      return Optional.none();\n    };\n    var renderRangeCaret = function (editor, range, scrollIntoView) {\n      return range.collapsed ? renderCaretAtRange(editor, range, scrollIntoView).getOr(range) : range;\n    };\n\n    var isBeforeBoundary = function (pos) {\n      return isBeforeContentEditableFalse(pos) || isBeforeMedia(pos);\n    };\n    var isAfterBoundary = function (pos) {\n      return isAfterContentEditableFalse(pos) || isAfterMedia(pos);\n    };\n    var trimEmptyTextNode = function (dom, node) {\n      if (isText$7(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var deleteContentAndShowCaret = function (editor, range, node, direction, forward, peekCaretPosition) {\n      showCaret(direction, editor, peekCaretPosition.getNode(!forward), forward, true).each(function (caretRange) {\n        if (range.collapsed) {\n          var deleteRange = range.cloneRange();\n          if (forward) {\n            deleteRange.setEnd(caretRange.startContainer, caretRange.startOffset);\n          } else {\n            deleteRange.setStart(caretRange.endContainer, caretRange.endOffset);\n          }\n          deleteRange.deleteContents();\n        } else {\n          range.deleteContents();\n        }\n        editor.selection.setRng(caretRange);\n      });\n      trimEmptyTextNode(editor.dom, node);\n      return true;\n    };\n    var deleteBoundaryText = function (editor, forward) {\n      var range = editor.selection.getRng();\n      if (!isText$7(range.commonAncestorContainer)) {\n        return false;\n      }\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextPosFn = curry(getVisualCaretPosition, forward ? caretWalker.next : caretWalker.prev);\n      var isBeforeFn = forward ? isBeforeBoundary : isAfterBoundary;\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var nextCaretPosition = normalizePosition(forward, getNextPosFn(caretPosition));\n      if (!nextCaretPosition || !isMoveInsideSameBlock(caretPosition, nextCaretPosition)) {\n        return false;\n      } else if (isBeforeFn(nextCaretPosition)) {\n        return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, nextCaretPosition);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, peekCaretPosition);\n        }\n      }\n      return false;\n    };\n    var backspaceDelete$6 = function (editor, forward) {\n      return deleteBoundaryText(editor, forward);\n    };\n\n    var isCompoundElement = function (node) {\n      return isTableCell$4(SugarElement.fromDom(node)) || isListItem(SugarElement.fromDom(node));\n    };\n    var DeleteAction = Adt.generate([\n      { remove: ['element'] },\n      { moveToElement: ['element'] },\n      { moveToPosition: ['position'] }\n    ]);\n    var isAtContentEditableBlockCaret = function (forward, from) {\n      var elm = from.getNode(forward === false);\n      var caretLocation = forward ? 'after' : 'before';\n      return isElement$5(elm) && elm.getAttribute('data-mce-caret') === caretLocation;\n    };\n    var isDeleteFromCefDifferentBlocks = function (root, forward, from, to) {\n      var inSameBlock = function (elm) {\n        return isInline$1(SugarElement.fromDom(elm)) && !isInSameBlock(from, to, root);\n      };\n      return getRelativeCefElm(!forward, from).fold(function () {\n        return getRelativeCefElm(forward, to).fold(never, inSameBlock);\n      }, inSameBlock);\n    };\n    var deleteEmptyBlockOrMoveToCef = function (root, forward, from, to) {\n      var toCefElm = to.getNode(forward === false);\n      return getParentBlock$1(SugarElement.fromDom(root), SugarElement.fromDom(from.getNode())).map(function (blockElm) {\n        return isEmpty$2(blockElm) ? DeleteAction.remove(blockElm.dom) : DeleteAction.moveToElement(toCefElm);\n      }).orThunk(function () {\n        return Optional.some(DeleteAction.moveToElement(toCefElm));\n      });\n    };\n    var findCefPosition = function (root, forward, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isCompoundElement(to.getNode())) {\n          return Optional.none();\n        } else if (isDeleteFromCefDifferentBlocks(root, forward, from, to)) {\n          return Optional.none();\n        } else if (forward && isContentEditableFalse$b(to.getNode())) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward === false && isContentEditableFalse$b(to.getNode(true))) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward && isAfterContentEditableFalse(from)) {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        } else if (forward === false && isBeforeContentEditableFalse(from)) {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var getContentEditableBlockAction = function (forward, elm) {\n      if (forward && isContentEditableFalse$b(elm.nextSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.nextSibling));\n      } else if (forward === false && isContentEditableFalse$b(elm.previousSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.previousSibling));\n      } else {\n        return Optional.none();\n      }\n    };\n    var skipMoveToActionFromInlineCefToContent = function (root, from, deleteAction) {\n      return deleteAction.fold(function (elm) {\n        return Optional.some(DeleteAction.remove(elm));\n      }, function (elm) {\n        return Optional.some(DeleteAction.moveToElement(elm));\n      }, function (to) {\n        if (isInSameBlock(from, to, root)) {\n          return Optional.none();\n        } else {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        }\n      });\n    };\n    var getContentEditableAction = function (root, forward, from) {\n      if (isAtContentEditableBlockCaret(forward, from)) {\n        return getContentEditableBlockAction(forward, from.getNode(forward === false)).fold(function () {\n          return findCefPosition(root, forward, from);\n        }, Optional.some);\n      } else {\n        return findCefPosition(root, forward, from).bind(function (deleteAction) {\n          return skipMoveToActionFromInlineCefToContent(root, from, deleteAction);\n        });\n      }\n    };\n    var read = function (root, forward, rng) {\n      var normalizedRange = normalizeRange(forward ? 1 : -1, root, rng);\n      var from = CaretPosition.fromRangeStart(normalizedRange);\n      var rootElement = SugarElement.fromDom(root);\n      if (forward === false && isAfterContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode(true)));\n      } else if (forward && isBeforeContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode()));\n      } else if (forward === false && isBeforeContentEditableFalse(from) && isAfterBr(rootElement, from)) {\n        return findPreviousBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else if (forward && isAfterContentEditableFalse(from) && isBeforeBr$1(rootElement, from)) {\n        return findNextBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else {\n        return getContentEditableAction(root, forward, from);\n      }\n    };\n\n    var deleteElement$1 = function (editor, forward) {\n      return function (element) {\n        editor._selectionOverrides.hideFakeCaret();\n        deleteElement$2(editor, forward, SugarElement.fromDom(element));\n        return true;\n      };\n    };\n    var moveToElement = function (editor, forward) {\n      return function (element) {\n        var pos = forward ? CaretPosition.before(element) : CaretPosition.after(element);\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var moveToPosition = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var getAncestorCe = function (editor, node) {\n      return Optional.from(getContentEditableRoot$1(editor.getBody(), node));\n    };\n    var backspaceDeleteCaret = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      return getAncestorCe(editor, selectedNode).filter(isContentEditableFalse$b).fold(function () {\n        return read(editor.getBody(), forward, editor.selection.getRng()).exists(function (deleteAction) {\n          return deleteAction.fold(deleteElement$1(editor, forward), moveToElement(editor, forward), moveToPosition(editor));\n        });\n      }, always);\n    };\n    var deleteOffscreenSelection = function (rootElement) {\n      each$k(descendants(rootElement, '.mce-offscreen-selection'), remove$7);\n    };\n    var backspaceDeleteRange = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      if (isContentEditableFalse$b(selectedNode) && !isTableCell$5(selectedNode)) {\n        var hasCefAncestor = getAncestorCe(editor, selectedNode.parentNode).filter(isContentEditableFalse$b);\n        return hasCefAncestor.fold(function () {\n          deleteOffscreenSelection(SugarElement.fromDom(editor.getBody()));\n          deleteElement$2(editor, forward, SugarElement.fromDom(editor.selection.getNode()));\n          paddEmptyBody(editor);\n          return true;\n        }, always);\n      }\n      return false;\n    };\n    var paddEmptyElement = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var ceRoot = getContentEditableRoot$1(editor.getBody(), selection.getNode());\n      if (isContentEditableTrue$4(ceRoot) && dom.isBlock(ceRoot) && dom.isEmpty(ceRoot)) {\n        var br = dom.create('br', { 'data-mce-bogus': '1' });\n        dom.setHTML(ceRoot, '');\n        ceRoot.appendChild(br);\n        selection.setRng(CaretPosition.before(br).toRange());\n      }\n      return true;\n    };\n    var backspaceDelete$5 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return backspaceDeleteCaret(editor, forward);\n      } else {\n        return backspaceDeleteRange(editor, forward);\n      }\n    };\n\n    var deleteCaret$2 = function (editor, forward) {\n      var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return fromPosition(forward, editor.getBody(), fromPos).filter(function (pos) {\n        return forward ? isBeforeImageBlock(pos) : isAfterImageBlock(pos);\n      }).bind(function (pos) {\n        return Optional.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, pos));\n      }).exists(function (elm) {\n        editor.selection.select(elm);\n        return true;\n      });\n    };\n    var backspaceDelete$4 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$2(editor, forward) : false;\n    };\n\n    var isText = isText$7;\n    var startsWithCaretContainer = function (node) {\n      return isText(node) && node.data[0] === ZWSP$1;\n    };\n    var endsWithCaretContainer = function (node) {\n      return isText(node) && node.data[node.data.length - 1] === ZWSP$1;\n    };\n    var createZwsp = function (node) {\n      return node.ownerDocument.createTextNode(ZWSP$1);\n    };\n    var insertBefore = function (node) {\n      if (isText(node.previousSibling)) {\n        if (endsWithCaretContainer(node.previousSibling)) {\n          return node.previousSibling;\n        } else {\n          node.previousSibling.appendData(ZWSP$1);\n          return node.previousSibling;\n        }\n      } else if (isText(node)) {\n        if (startsWithCaretContainer(node)) {\n          return node;\n        } else {\n          node.insertData(0, ZWSP$1);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        node.parentNode.insertBefore(newNode, node);\n        return newNode;\n      }\n    };\n    var insertAfter = function (node) {\n      if (isText(node.nextSibling)) {\n        if (startsWithCaretContainer(node.nextSibling)) {\n          return node.nextSibling;\n        } else {\n          node.nextSibling.insertData(0, ZWSP$1);\n          return node.nextSibling;\n        }\n      } else if (isText(node)) {\n        if (endsWithCaretContainer(node)) {\n          return node;\n        } else {\n          node.appendData(ZWSP$1);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        if (node.nextSibling) {\n          node.parentNode.insertBefore(newNode, node.nextSibling);\n        } else {\n          node.parentNode.appendChild(newNode);\n        }\n        return newNode;\n      }\n    };\n    var insertInline = function (before, node) {\n      return before ? insertBefore(node) : insertAfter(node);\n    };\n    var insertInlineBefore = curry(insertInline, true);\n    var insertInlineAfter = curry(insertInline, false);\n\n    var insertInlinePos = function (pos, before) {\n      if (isText$7(pos.container())) {\n        return insertInline(before, pos.container());\n      } else {\n        return insertInline(before, pos.getNode());\n      }\n    };\n    var isPosCaretContainer = function (pos, caret) {\n      var caretNode = caret.get();\n      return caretNode && pos.container() === caretNode && isCaretContainerInline(caretNode);\n    };\n    var renderCaret = function (caret, location) {\n      return location.fold(function (element) {\n        remove$2(caret.get());\n        var text = insertInlineBefore(element);\n        caret.set(text);\n        return Optional.some(CaretPosition(text, text.length - 1));\n      }, function (element) {\n        return firstPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            remove$2(caret.get());\n            var text = insertInlinePos(pos, true);\n            caret.set(text);\n            return CaretPosition(text, 1);\n          } else {\n            return CaretPosition(caret.get(), 1);\n          }\n        });\n      }, function (element) {\n        return lastPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            remove$2(caret.get());\n            var text = insertInlinePos(pos, false);\n            caret.set(text);\n            return CaretPosition(text, text.length - 1);\n          } else {\n            return CaretPosition(caret.get(), caret.get().length - 1);\n          }\n        });\n      }, function (element) {\n        remove$2(caret.get());\n        var text = insertInlineAfter(element);\n        caret.set(text);\n        return Optional.some(CaretPosition(text, 1));\n      });\n    };\n\n    var evaluateUntil = function (fns, args) {\n      for (var i = 0; i < fns.length; i++) {\n        var result = fns[i].apply(null, args);\n        if (result.isSome()) {\n          return result;\n        }\n      }\n      return Optional.none();\n    };\n\n    var Location = Adt.generate([\n      { before: ['element'] },\n      { start: ['element'] },\n      { end: ['element'] },\n      { after: ['element'] }\n    ]);\n    var rescope$1 = function (rootNode, node) {\n      var parentBlock = getParentBlock$2(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var before = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeForwards(pos);\n      var scope = rescope$1(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return nextPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.before(inline);\n        });\n      }, Optional.none);\n    };\n    var isNotInsideFormatCaretContainer = function (rootNode, elm) {\n      return getParentCaretContainer(rootNode, elm) === null;\n    };\n    var findInsideRootInline = function (isInlineTarget, rootNode, pos) {\n      return findRootInline(isInlineTarget, rootNode, pos).filter(curry(isNotInsideFormatCaretContainer, rootNode));\n    };\n    var start$1 = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeBackwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var prevPos = prevPosition(inline, nPos);\n        return prevPos.isNone() ? Optional.some(Location.start(inline)) : Optional.none();\n      });\n    };\n    var end = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeForwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var nextPos = nextPosition(inline, nPos);\n        return nextPos.isNone() ? Optional.some(Location.end(inline)) : Optional.none();\n      });\n    };\n    var after = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeBackwards(pos);\n      var scope = rescope$1(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return prevPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.after(inline);\n        });\n      }, Optional.none);\n    };\n    var isValidLocation = function (location) {\n      return isRtl(getElement(location)) === false;\n    };\n    var readLocation = function (isInlineTarget, rootNode, pos) {\n      var location = evaluateUntil([\n        before,\n        start$1,\n        end,\n        after\n      ], [\n        isInlineTarget,\n        rootNode,\n        pos\n      ]);\n      return location.filter(isValidLocation);\n    };\n    var getElement = function (location) {\n      return location.fold(identity, identity, identity, identity);\n    };\n    var getName = function (location) {\n      return location.fold(constant('before'), constant('start'), constant('end'), constant('after'));\n    };\n    var outside = function (location) {\n      return location.fold(Location.before, Location.before, Location.after, Location.after);\n    };\n    var inside = function (location) {\n      return location.fold(Location.start, Location.start, Location.end, Location.end);\n    };\n    var isEq = function (location1, location2) {\n      return getName(location1) === getName(location2) && getElement(location1) === getElement(location2);\n    };\n    var betweenInlines = function (forward, isInlineTarget, rootNode, from, to, location) {\n      return lift2(findRootInline(isInlineTarget, rootNode, from), findRootInline(isInlineTarget, rootNode, to), function (fromInline, toInline) {\n        if (fromInline !== toInline && hasSameParentBlock(rootNode, fromInline, toInline)) {\n          return Location.after(forward ? fromInline : toInline);\n        } else {\n          return location;\n        }\n      }).getOr(location);\n    };\n    var skipNoMovement = function (fromLocation, toLocation) {\n      return fromLocation.fold(always, function (fromLocation) {\n        return !isEq(fromLocation, toLocation);\n      });\n    };\n    var findLocationTraverse = function (forward, isInlineTarget, rootNode, fromLocation, pos) {\n      var from = normalizePosition(forward, pos);\n      var to = fromPosition(forward, rootNode, from).map(curry(normalizePosition, forward));\n      var location = to.fold(function () {\n        return fromLocation.map(outside);\n      }, function (to) {\n        return readLocation(isInlineTarget, rootNode, to).map(curry(betweenInlines, forward, isInlineTarget, rootNode, from, to)).filter(curry(skipNoMovement, fromLocation));\n      });\n      return location.filter(isValidLocation);\n    };\n    var findLocationSimple = function (forward, location) {\n      if (forward) {\n        return location.fold(compose(Optional.some, Location.start), Optional.none, compose(Optional.some, Location.after), Optional.none);\n      } else {\n        return location.fold(Optional.none, compose(Optional.some, Location.before), Optional.none, compose(Optional.some, Location.end));\n      }\n    };\n    var findLocation$1 = function (forward, isInlineTarget, rootNode, pos) {\n      var from = normalizePosition(forward, pos);\n      var fromLocation = readLocation(isInlineTarget, rootNode, from);\n      return readLocation(isInlineTarget, rootNode, from).bind(curry(findLocationSimple, forward)).orThunk(function () {\n        return findLocationTraverse(forward, isInlineTarget, rootNode, fromLocation, pos);\n      });\n    };\n    curry(findLocation$1, false);\n    curry(findLocation$1, true);\n\n    var hasSelectionModifyApi = function (editor) {\n      return isFunction(editor.selection.getSel().modify);\n    };\n    var moveRel = function (forward, selection, pos) {\n      var delta = forward ? 1 : -1;\n      selection.setRng(CaretPosition(pos.container(), pos.offset() + delta).toRange());\n      selection.getSel().modify('move', forward ? 'forward' : 'backward', 'word');\n      return true;\n    };\n    var moveByWord = function (forward, editor) {\n      var rng = editor.selection.getRng();\n      var pos = forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n      if (!hasSelectionModifyApi(editor)) {\n        return false;\n      } else if (forward && isBeforeInline(pos)) {\n        return moveRel(true, editor.selection, pos);\n      } else if (!forward && isAfterInline(pos)) {\n        return moveRel(false, editor.selection, pos);\n      } else {\n        return false;\n      }\n    };\n\n    var BreakType;\n    (function (BreakType) {\n      BreakType[BreakType['Br'] = 0] = 'Br';\n      BreakType[BreakType['Block'] = 1] = 'Block';\n      BreakType[BreakType['Wrap'] = 2] = 'Wrap';\n      BreakType[BreakType['Eol'] = 3] = 'Eol';\n    }(BreakType || (BreakType = {})));\n    var flip = function (direction, positions) {\n      return direction === HDirection.Backwards ? reverse(positions) : positions;\n    };\n    var walk = function (direction, caretWalker, pos) {\n      return direction === HDirection.Forwards ? caretWalker.next(pos) : caretWalker.prev(pos);\n    };\n    var getBreakType = function (scope, direction, currentPos, nextPos) {\n      if (isBr$5(nextPos.getNode(direction === HDirection.Forwards))) {\n        return BreakType.Br;\n      } else if (isInSameBlock(currentPos, nextPos) === false) {\n        return BreakType.Block;\n      } else {\n        return BreakType.Wrap;\n      }\n    };\n    var getPositionsUntil = function (predicate, direction, scope, start) {\n      var caretWalker = CaretWalker(scope);\n      var currentPos = start;\n      var positions = [];\n      while (currentPos) {\n        var nextPos = walk(direction, caretWalker, currentPos);\n        if (!nextPos) {\n          break;\n        }\n        if (isBr$5(nextPos.getNode(false))) {\n          if (direction === HDirection.Forwards) {\n            return {\n              positions: flip(direction, positions).concat([nextPos]),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          } else {\n            return {\n              positions: flip(direction, positions),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          }\n        }\n        if (!nextPos.isVisible()) {\n          currentPos = nextPos;\n          continue;\n        }\n        if (predicate(currentPos, nextPos)) {\n          var breakType = getBreakType(scope, direction, currentPos, nextPos);\n          return {\n            positions: flip(direction, positions),\n            breakType: breakType,\n            breakAt: Optional.some(nextPos)\n          };\n        }\n        positions.push(nextPos);\n        currentPos = nextPos;\n      }\n      return {\n        positions: flip(direction, positions),\n        breakType: BreakType.Eol,\n        breakAt: Optional.none()\n      };\n    };\n    var getAdjacentLinePositions = function (direction, getPositionsUntilBreak, scope, start) {\n      return getPositionsUntilBreak(scope, start).breakAt.map(function (pos) {\n        var positions = getPositionsUntilBreak(scope, pos).positions;\n        return direction === HDirection.Backwards ? positions.concat(pos) : [pos].concat(positions);\n      }).getOr([]);\n    };\n    var findClosestHorizontalPositionFromPoint = function (positions, x) {\n      return foldl(positions, function (acc, newPos) {\n        return acc.fold(function () {\n          return Optional.some(newPos);\n        }, function (lastPos) {\n          return lift2(head(lastPos.getClientRects()), head(newPos.getClientRects()), function (lastRect, newRect) {\n            var lastDist = Math.abs(x - lastRect.left);\n            var newDist = Math.abs(x - newRect.left);\n            return newDist <= lastDist ? newPos : lastPos;\n          }).or(acc);\n        });\n      }, Optional.none());\n    };\n    var findClosestHorizontalPosition = function (positions, pos) {\n      return head(pos.getClientRects()).bind(function (targetRect) {\n        return findClosestHorizontalPositionFromPoint(positions, targetRect.left);\n      });\n    };\n    var getPositionsUntilPreviousLine = curry(getPositionsUntil, CaretPosition.isAbove, -1);\n    var getPositionsUntilNextLine = curry(getPositionsUntil, CaretPosition.isBelow, 1);\n    var getPositionsAbove = curry(getAdjacentLinePositions, -1, getPositionsUntilPreviousLine);\n    var getPositionsBelow = curry(getAdjacentLinePositions, 1, getPositionsUntilNextLine);\n    var isAtFirstLine = function (scope, pos) {\n      return getPositionsUntilPreviousLine(scope, pos).breakAt.isNone();\n    };\n    var isAtLastLine = function (scope, pos) {\n      return getPositionsUntilNextLine(scope, pos).breakAt.isNone();\n    };\n    var getFirstLinePositions = function (scope) {\n      return firstPositionIn(scope).map(function (pos) {\n        return [pos].concat(getPositionsUntilNextLine(scope, pos).positions);\n      }).getOr([]);\n    };\n    var getLastLinePositions = function (scope) {\n      return lastPositionIn(scope).map(function (pos) {\n        return getPositionsUntilPreviousLine(scope, pos).positions.concat(pos);\n      }).getOr([]);\n    };\n\n    var getNodeClientRects = function (node) {\n      var toArrayWithNode = function (clientRects) {\n        return map$3(clientRects, function (rect) {\n          var clientRect = clone(rect);\n          clientRect.node = node;\n          return clientRect;\n        });\n      };\n      if (isElement$5(node)) {\n        return toArrayWithNode(node.getClientRects());\n      }\n      if (isText$7(node)) {\n        var rng = node.ownerDocument.createRange();\n        rng.setStart(node, 0);\n        rng.setEnd(node, node.data.length);\n        return toArrayWithNode(rng.getClientRects());\n      }\n    };\n    var getClientRects = function (nodes) {\n      return bind(nodes, getNodeClientRects);\n    };\n\n    var VDirection;\n    (function (VDirection) {\n      VDirection[VDirection['Up'] = -1] = 'Up';\n      VDirection[VDirection['Down'] = 1] = 'Down';\n    }(VDirection || (VDirection = {})));\n    var findUntil = function (direction, root, predicateFn, node) {\n      while (node = findNode$1(node, direction, isEditableCaretCandidate$1, root)) {\n        if (predicateFn(node)) {\n          return;\n        }\n      }\n    };\n    var walkUntil$1 = function (direction, isAboveFn, isBeflowFn, root, predicateFn, caretPosition) {\n      var line = 0;\n      var result = [];\n      var add = function (node) {\n        var clientRects = getClientRects([node]);\n        if (direction === -1) {\n          clientRects = clientRects.reverse();\n        }\n        for (var i = 0; i < clientRects.length; i++) {\n          var clientRect = clientRects[i];\n          if (isBeflowFn(clientRect, targetClientRect)) {\n            continue;\n          }\n          if (result.length > 0 && isAboveFn(clientRect, last$1(result))) {\n            line++;\n          }\n          clientRect.line = line;\n          if (predicateFn(clientRect)) {\n            return true;\n          }\n          result.push(clientRect);\n        }\n      };\n      var targetClientRect = last$1(caretPosition.getClientRects());\n      if (!targetClientRect) {\n        return result;\n      }\n      var node = caretPosition.getNode();\n      add(node);\n      findUntil(direction, root, add, node);\n      return result;\n    };\n    var aboveLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line > lineNumber;\n    };\n    var isLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line === lineNumber;\n    };\n    var upUntil = curry(walkUntil$1, VDirection.Up, isAbove$1, isBelow$1);\n    var downUntil = curry(walkUntil$1, VDirection.Down, isBelow$1, isAbove$1);\n    var positionsUntil = function (direction, root, predicateFn, node) {\n      var caretWalker = CaretWalker(root);\n      var walkFn;\n      var isBelowFn;\n      var isAboveFn;\n      var caretPosition;\n      var result = [];\n      var line = 0;\n      var getClientRect = function (caretPosition) {\n        if (direction === 1) {\n          return last$1(caretPosition.getClientRects());\n        }\n        return last$1(caretPosition.getClientRects());\n      };\n      if (direction === 1) {\n        walkFn = caretWalker.next;\n        isBelowFn = isBelow$1;\n        isAboveFn = isAbove$1;\n        caretPosition = CaretPosition.after(node);\n      } else {\n        walkFn = caretWalker.prev;\n        isBelowFn = isAbove$1;\n        isAboveFn = isBelow$1;\n        caretPosition = CaretPosition.before(node);\n      }\n      var targetClientRect = getClientRect(caretPosition);\n      do {\n        if (!caretPosition.isVisible()) {\n          continue;\n        }\n        var rect = getClientRect(caretPosition);\n        if (isAboveFn(rect, targetClientRect)) {\n          continue;\n        }\n        if (result.length > 0 && isBelowFn(rect, last$1(result))) {\n          line++;\n        }\n        var clientRect = clone(rect);\n        clientRect.position = caretPosition;\n        clientRect.line = line;\n        if (predicateFn(clientRect)) {\n          return result;\n        }\n        result.push(clientRect);\n      } while (caretPosition = walkFn(caretPosition));\n      return result;\n    };\n    var isAboveLine = function (lineNumber) {\n      return function (clientRect) {\n        return aboveLineNumber(lineNumber, clientRect);\n      };\n    };\n    var isLine = function (lineNumber) {\n      return function (clientRect) {\n        return isLineNumber(lineNumber, clientRect);\n      };\n    };\n\n    var isContentEditableFalse$3 = isContentEditableFalse$b;\n    var findNode = findNode$1;\n    var distanceToRectLeft = function (clientRect, clientX) {\n      return Math.abs(clientRect.left - clientX);\n    };\n    var distanceToRectRight = function (clientRect, clientX) {\n      return Math.abs(clientRect.right - clientX);\n    };\n    var isInsideX = function (clientX, clientRect) {\n      return clientX >= clientRect.left && clientX <= clientRect.right;\n    };\n    var isInsideY = function (clientY, clientRect) {\n      return clientY >= clientRect.top && clientY <= clientRect.bottom;\n    };\n    var isNodeClientRect = function (rect) {\n      return hasNonNullableKey(rect, 'node');\n    };\n    var findClosestClientRect = function (clientRects, clientX, allowInside) {\n      if (allowInside === void 0) {\n        allowInside = always;\n      }\n      return reduce(clientRects, function (oldClientRect, clientRect) {\n        if (isInsideX(clientX, clientRect)) {\n          return allowInside(clientRect) ? clientRect : oldClientRect;\n        }\n        if (isInsideX(clientX, oldClientRect)) {\n          return allowInside(oldClientRect) ? oldClientRect : clientRect;\n        }\n        var oldDistance = Math.min(distanceToRectLeft(oldClientRect, clientX), distanceToRectRight(oldClientRect, clientX));\n        var newDistance = Math.min(distanceToRectLeft(clientRect, clientX), distanceToRectRight(clientRect, clientX));\n        if (newDistance === oldDistance && isNodeClientRect(clientRect) && isContentEditableFalse$3(clientRect.node)) {\n          return clientRect;\n        }\n        if (newDistance < oldDistance) {\n          return clientRect;\n        }\n        return oldClientRect;\n      });\n    };\n    var walkUntil = function (direction, root, predicateFn, startNode, includeChildren) {\n      var node = findNode(startNode, direction, isEditableCaretCandidate$1, root, !includeChildren);\n      do {\n        if (!node || predicateFn(node)) {\n          return;\n        }\n      } while (node = findNode(node, direction, isEditableCaretCandidate$1, root));\n    };\n    var findLineNodeRects = function (root, targetNodeRect, includeChildren) {\n      if (includeChildren === void 0) {\n        includeChildren = true;\n      }\n      var clientRects = [];\n      var collect = function (checkPosFn, node) {\n        var lineRects = filter$4(getClientRects([node]), function (clientRect) {\n          return !checkPosFn(clientRect, targetNodeRect);\n        });\n        clientRects = clientRects.concat(lineRects);\n        return lineRects.length === 0;\n      };\n      clientRects.push(targetNodeRect);\n      walkUntil(VDirection.Up, root, curry(collect, isAbove$1), targetNodeRect.node, includeChildren);\n      walkUntil(VDirection.Down, root, curry(collect, isBelow$1), targetNodeRect.node, includeChildren);\n      return clientRects;\n    };\n    var getFakeCaretTargets = function (root) {\n      return filter$4(from(root.getElementsByTagName('*')), isFakeCaretTarget);\n    };\n    var caretInfo = function (clientRect, clientX) {\n      return {\n        node: clientRect.node,\n        before: distanceToRectLeft(clientRect, clientX) < distanceToRectRight(clientRect, clientX)\n      };\n    };\n    var closestFakeCaret = function (root, clientX, clientY) {\n      var fakeTargetNodeRects = getClientRects(getFakeCaretTargets(root));\n      var targetNodeRects = filter$4(fakeTargetNodeRects, curry(isInsideY, clientY));\n      var checkInside = function (clientRect) {\n        return !isTable$3(clientRect.node) && !isMedia$2(clientRect.node);\n      };\n      var closestNodeRect = findClosestClientRect(targetNodeRects, clientX, checkInside);\n      if (closestNodeRect) {\n        var includeChildren = checkInside(closestNodeRect);\n        closestNodeRect = findClosestClientRect(findLineNodeRects(root, closestNodeRect, includeChildren), clientX, checkInside);\n        if (closestNodeRect && isFakeCaretTarget(closestNodeRect.node)) {\n          return caretInfo(closestNodeRect, clientX);\n        }\n      }\n      return null;\n    };\n\n    var moveToRange = function (editor, rng) {\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, editor.selection.getRng());\n    };\n    var renderRangeCaretOpt = function (editor, range, scrollIntoView) {\n      return Optional.some(renderRangeCaret(editor, range, scrollIntoView));\n    };\n    var moveHorizontally = function (editor, direction, range, isBefore, isAfter, isElement) {\n      var forwards = direction === HDirection.Forwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextPosFn = curry(getVisualCaretPosition, forwards ? caretWalker.next : caretWalker.prev);\n      var isBeforeFn = forwards ? isBefore : isAfter;\n      if (!range.collapsed) {\n        var node = getSelectedNode(range);\n        if (isElement(node)) {\n          return showCaret(direction, editor, node, direction === HDirection.Backwards, false);\n        }\n      }\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      if (isBeforeFn(caretPosition)) {\n        return selectNode(editor, caretPosition.getNode(!forwards));\n      }\n      var nextCaretPosition = normalizePosition(forwards, getNextPosFn(caretPosition));\n      var rangeIsInContainerBlock = isRangeInCaretContainerBlock(range);\n      if (!nextCaretPosition) {\n        return rangeIsInContainerBlock ? Optional.some(range) : Optional.none();\n      }\n      if (isBeforeFn(nextCaretPosition)) {\n        return showCaret(direction, editor, nextCaretPosition.getNode(!forwards), forwards, false);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return showCaret(direction, editor, peekCaretPosition.getNode(!forwards), forwards, false);\n        }\n      }\n      if (rangeIsInContainerBlock) {\n        return renderRangeCaretOpt(editor, nextCaretPosition.toRange(), false);\n      }\n      return Optional.none();\n    };\n    var moveVertically = function (editor, direction, range, isBefore, isAfter, isElement) {\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var caretClientRect = last$1(caretPosition.getClientRects());\n      var forwards = direction === VDirection.Down;\n      if (!caretClientRect) {\n        return Optional.none();\n      }\n      var walkerFn = forwards ? downUntil : upUntil;\n      var linePositions = walkerFn(editor.getBody(), isAboveLine(1), caretPosition);\n      var nextLinePositions = filter$4(linePositions, isLine(1));\n      var clientX = caretClientRect.left;\n      var nextLineRect = findClosestClientRect(nextLinePositions, clientX);\n      if (nextLineRect && isElement(nextLineRect.node)) {\n        var dist1 = Math.abs(clientX - nextLineRect.left);\n        var dist2 = Math.abs(clientX - nextLineRect.right);\n        return showCaret(direction, editor, nextLineRect.node, dist1 < dist2, false);\n      }\n      var currentNode;\n      if (isBefore(caretPosition)) {\n        currentNode = caretPosition.getNode();\n      } else if (isAfter(caretPosition)) {\n        currentNode = caretPosition.getNode(true);\n      } else {\n        currentNode = getSelectedNode(range);\n      }\n      if (currentNode) {\n        var caretPositions = positionsUntil(direction, editor.getBody(), isAboveLine(1), currentNode);\n        var closestNextLineRect = findClosestClientRect(filter$4(caretPositions, isLine(1)), clientX);\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n        closestNextLineRect = last$1(filter$4(caretPositions, isLine(0)));\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n      }\n      if (nextLinePositions.length === 0) {\n        return getLineEndPoint(editor, forwards).filter(forwards ? isAfter : isBefore).map(function (pos) {\n          return renderRangeCaret(editor, pos.toRange(), false);\n        });\n      }\n      return Optional.none();\n    };\n    var getLineEndPoint = function (editor, forward) {\n      var rng = editor.selection.getRng();\n      var body = editor.getBody();\n      if (forward) {\n        var from = CaretPosition.fromRangeEnd(rng);\n        var result = getPositionsUntilNextLine(body, from);\n        return last$2(result.positions);\n      } else {\n        var from = CaretPosition.fromRangeStart(rng);\n        var result = getPositionsUntilPreviousLine(body, from);\n        return head(result.positions);\n      }\n    };\n    var moveToLineEndPoint$3 = function (editor, forward, isElementPosition) {\n      return getLineEndPoint(editor, forward).filter(isElementPosition).exists(function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      });\n    };\n\n    var setCaretPosition = function (editor, pos) {\n      var rng = editor.dom.createRng();\n      rng.setStart(pos.container(), pos.offset());\n      rng.setEnd(pos.container(), pos.offset());\n      editor.selection.setRng(rng);\n    };\n    var setSelected = function (state, elm) {\n      if (state) {\n        elm.setAttribute('data-mce-selected', 'inline-boundary');\n      } else {\n        elm.removeAttribute('data-mce-selected');\n      }\n    };\n    var renderCaretLocation = function (editor, caret, location) {\n      return renderCaret(caret, location).map(function (pos) {\n        setCaretPosition(editor, pos);\n        return location;\n      });\n    };\n    var findLocation = function (editor, caret, forward) {\n      var rootNode = editor.getBody();\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var location = findLocation$1(forward, isInlineTarget$1, rootNode, from);\n      return location.bind(function (location) {\n        return renderCaretLocation(editor, caret, location);\n      });\n    };\n    var toggleInlines = function (isInlineTarget, dom, elms) {\n      var inlineBoundaries = map$3(descendants(SugarElement.fromDom(dom.getRoot()), '*[data-mce-selected=\"inline-boundary\"]'), function (e) {\n        return e.dom;\n      });\n      var selectedInlines = filter$4(inlineBoundaries, isInlineTarget);\n      var targetInlines = filter$4(elms, isInlineTarget);\n      each$k(difference(selectedInlines, targetInlines), curry(setSelected, false));\n      each$k(difference(targetInlines, selectedInlines), curry(setSelected, true));\n    };\n    var safeRemoveCaretContainer = function (editor, caret) {\n      if (editor.selection.isCollapsed() && editor.composing !== true && caret.get()) {\n        var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n        if (CaretPosition.isTextPosition(pos) && isAtZwsp(pos) === false) {\n          setCaretPosition(editor, removeAndReposition(caret.get(), pos));\n          caret.set(null);\n        }\n      }\n    };\n    var renderInsideInlineCaret = function (isInlineTarget, editor, caret, elms) {\n      if (editor.selection.isCollapsed()) {\n        var inlines = filter$4(elms, isInlineTarget);\n        each$k(inlines, function (_inline) {\n          var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n          readLocation(isInlineTarget, editor.getBody(), pos).bind(function (location) {\n            return renderCaretLocation(editor, caret, location);\n          });\n        });\n      }\n    };\n    var move$2 = function (editor, caret, forward) {\n      return isInlineBoundariesEnabled(editor) ? findLocation(editor, caret, forward).isSome() : false;\n    };\n    var moveWord = function (forward, editor, _caret) {\n      return isInlineBoundariesEnabled(editor) ? moveByWord(forward, editor) : false;\n    };\n    var setupSelectedState = function (editor) {\n      var caret = Cell(null);\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.on('NodeChange', function (e) {\n        if (isInlineBoundariesEnabled(editor) && !(Env.browser.isIE() && e.initial)) {\n          toggleInlines(isInlineTarget$1, editor.dom, e.parents);\n          safeRemoveCaretContainer(editor, caret);\n          renderInsideInlineCaret(isInlineTarget$1, editor, caret, e.parents);\n        }\n      });\n      return caret;\n    };\n    var moveNextWord = curry(moveWord, true);\n    var movePrevWord = curry(moveWord, false);\n    var moveToLineEndPoint$2 = function (editor, forward, caret) {\n      if (isInlineBoundariesEnabled(editor)) {\n        var linePoint = getLineEndPoint(editor, forward).getOrThunk(function () {\n          var rng = editor.selection.getRng();\n          return forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n        });\n        return readLocation(curry(isInlineTarget, editor), editor.getBody(), linePoint).exists(function (loc) {\n          var outsideLoc = outside(loc);\n          return renderCaret(caret, outsideLoc).exists(function (pos) {\n            setCaretPosition(editor, pos);\n            return true;\n          });\n        });\n      } else {\n        return false;\n      }\n    };\n\n    var rangeFromPositions = function (from, to) {\n      var range = document.createRange();\n      range.setStart(from.container(), from.offset());\n      range.setEnd(to.container(), to.offset());\n      return range;\n    };\n    var hasOnlyTwoOrLessPositionsLeft = function (elm) {\n      return lift2(firstPositionIn(elm), lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = normalizePosition(true, firstPos);\n        var normalizedLastPos = normalizePosition(false, lastPos);\n        return nextPosition(elm, normalizedFirstPos).forall(function (pos) {\n          return pos.isEqual(normalizedLastPos);\n        });\n      }).getOr(true);\n    };\n    var setCaretLocation = function (editor, caret) {\n      return function (location) {\n        return renderCaret(caret, location).exists(function (pos) {\n          setCaretPosition(editor, pos);\n          return true;\n        });\n      };\n    };\n    var deleteFromTo = function (editor, caret, from, to) {\n      var rootNode = editor.getBody();\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.undoManager.ignore(function () {\n        editor.selection.setRng(rangeFromPositions(from, to));\n        editor.execCommand('Delete');\n        readLocation(isInlineTarget$1, rootNode, CaretPosition.fromRangeStart(editor.selection.getRng())).map(inside).map(setCaretLocation(editor, caret));\n      });\n      editor.nodeChanged();\n    };\n    var rescope = function (rootNode, node) {\n      var parentBlock = getParentBlock$2(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var backspaceDeleteCollapsed = function (editor, caret, forward, from) {\n      var rootNode = rescope(editor.getBody(), from.container());\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var fromLocation = readLocation(isInlineTarget$1, rootNode, from);\n      return fromLocation.bind(function (location) {\n        if (forward) {\n          return location.fold(constant(Optional.some(inside(location))), Optional.none, constant(Optional.some(outside(location))), Optional.none);\n        } else {\n          return location.fold(Optional.none, constant(Optional.some(outside(location))), Optional.none, constant(Optional.some(inside(location))));\n        }\n      }).map(setCaretLocation(editor, caret)).getOrThunk(function () {\n        var toPosition = navigate(forward, rootNode, from);\n        var toLocation = toPosition.bind(function (pos) {\n          return readLocation(isInlineTarget$1, rootNode, pos);\n        });\n        return lift2(fromLocation, toLocation, function () {\n          return findRootInline(isInlineTarget$1, rootNode, from).exists(function (elm) {\n            if (hasOnlyTwoOrLessPositionsLeft(elm)) {\n              deleteElement$2(editor, forward, SugarElement.fromDom(elm));\n              return true;\n            } else {\n              return false;\n            }\n          });\n        }).orThunk(function () {\n          return toLocation.bind(function (_) {\n            return toPosition.map(function (to) {\n              if (forward) {\n                deleteFromTo(editor, caret, from, to);\n              } else {\n                deleteFromTo(editor, caret, to, from);\n              }\n              return true;\n            });\n          });\n        }).getOr(false);\n      });\n    };\n    var backspaceDelete$3 = function (editor, caret, forward) {\n      if (editor.selection.isCollapsed() && isInlineBoundariesEnabled(editor)) {\n        var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n        return backspaceDeleteCollapsed(editor, caret, forward, from);\n      }\n      return false;\n    };\n\n    var getParentInlines = function (rootElm, startElm) {\n      var parents = parentsAndSelf(startElm, rootElm);\n      return findIndex$2(parents, isBlock$2).fold(constant(parents), function (index) {\n        return parents.slice(0, index);\n      });\n    };\n    var hasOnlyOneChild = function (elm) {\n      return childNodesCount(elm) === 1;\n    };\n    var deleteLastPosition = function (forward, editor, target, parentInlines) {\n      var isFormatElement$1 = curry(isFormatElement, editor);\n      var formatNodes = map$3(filter$4(parentInlines, isFormatElement$1), function (elm) {\n        return elm.dom;\n      });\n      if (formatNodes.length === 0) {\n        deleteElement$2(editor, forward, target);\n      } else {\n        var pos = replaceWithCaretFormat(target.dom, formatNodes);\n        editor.selection.setRng(pos.toRange());\n      }\n    };\n    var deleteCaret$1 = function (editor, forward) {\n      var rootElm = SugarElement.fromDom(editor.getBody());\n      var startElm = SugarElement.fromDom(editor.selection.getStart());\n      var parentInlines = filter$4(getParentInlines(rootElm, startElm), hasOnlyOneChild);\n      return last$2(parentInlines).exists(function (target) {\n        var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n        if (willDeleteLastPositionInElement(forward, fromPos, target.dom) && !isEmptyCaretFormatElement(target)) {\n          deleteLastPosition(forward, editor, target, parentInlines);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var backspaceDelete$2 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$1(editor, forward) : false;\n    };\n\n    var deleteElement = function (editor, forward, element) {\n      editor._selectionOverrides.hideFakeCaret();\n      deleteElement$2(editor, forward, SugarElement.fromDom(element));\n      return true;\n    };\n    var deleteCaret = function (editor, forward) {\n      var isNearMedia = forward ? isBeforeMedia : isAfterMedia;\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var fromPos = getNormalizedRangeEndPoint(direction, editor.getBody(), editor.selection.getRng());\n      if (isNearMedia(fromPos)) {\n        return deleteElement(editor, forward, fromPos.getNode(!forward));\n      } else {\n        return Optional.from(normalizePosition(forward, fromPos)).filter(function (pos) {\n          return isNearMedia(pos) && isMoveInsideSameBlock(fromPos, pos);\n        }).exists(function (pos) {\n          return deleteElement(editor, forward, pos.getNode(!forward));\n        });\n      }\n    };\n    var deleteRange = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      return isMedia$2(selectedNode) ? deleteElement(editor, forward, selectedNode) : false;\n    };\n    var backspaceDelete$1 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret(editor, forward) : deleteRange(editor, forward);\n    };\n\n    var isEditable = function (target) {\n      return closest$3(target, function (elm) {\n        return isContentEditableTrue$4(elm.dom) || isContentEditableFalse$b(elm.dom);\n      }).exists(function (elm) {\n        return isContentEditableTrue$4(elm.dom);\n      });\n    };\n    var parseIndentValue = function (value) {\n      var number = parseInt(value, 10);\n      return isNaN(number) ? 0 : number;\n    };\n    var getIndentStyleName = function (useMargin, element) {\n      var indentStyleName = useMargin || isTable$2(element) ? 'margin' : 'padding';\n      var suffix = get$5(element, 'direction') === 'rtl' ? '-right' : '-left';\n      return indentStyleName + suffix;\n    };\n    var indentElement = function (dom, command, useMargin, value, unit, element) {\n      var indentStyleName = getIndentStyleName(useMargin, SugarElement.fromDom(element));\n      if (command === 'outdent') {\n        var styleValue = Math.max(0, parseIndentValue(element.style[indentStyleName]) - value);\n        dom.setStyle(element, indentStyleName, styleValue ? styleValue + unit : '');\n      } else {\n        var styleValue = parseIndentValue(element.style[indentStyleName]) + value + unit;\n        dom.setStyle(element, indentStyleName, styleValue);\n      }\n    };\n    var validateBlocks = function (editor, blocks) {\n      return forall(blocks, function (block) {\n        var indentStyleName = getIndentStyleName(shouldIndentUseMargin(editor), block);\n        var intentValue = getRaw(block, indentStyleName).map(parseIndentValue).getOr(0);\n        var contentEditable = editor.dom.getContentEditable(block.dom);\n        return contentEditable !== 'false' && intentValue > 0;\n      });\n    };\n    var canOutdent = function (editor) {\n      var blocks = getBlocksToIndent(editor);\n      return !editor.mode.isReadOnly() && (blocks.length > 1 || validateBlocks(editor, blocks));\n    };\n    var isListComponent = function (el) {\n      return isList(el) || isListItem(el);\n    };\n    var parentIsListComponent = function (el) {\n      return parent(el).exists(isListComponent);\n    };\n    var getBlocksToIndent = function (editor) {\n      return filter$4(fromDom$1(editor.selection.getSelectedBlocks()), function (el) {\n        return !isListComponent(el) && !parentIsListComponent(el) && isEditable(el);\n      });\n    };\n    var handle = function (editor, command) {\n      var dom = editor.dom, selection = editor.selection, formatter = editor.formatter;\n      var indentation = getIndentation(editor);\n      var indentUnit = /[a-z%]+$/i.exec(indentation)[0];\n      var indentValue = parseInt(indentation, 10);\n      var useMargin = shouldIndentUseMargin(editor);\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (!editor.queryCommandState('InsertUnorderedList') && !editor.queryCommandState('InsertOrderedList')) {\n        if (forcedRootBlock === '' && !dom.getParent(selection.getNode(), dom.isBlock)) {\n          formatter.apply('div');\n        }\n      }\n      each$k(getBlocksToIndent(editor), function (block) {\n        indentElement(dom, command, useMargin, indentValue, indentUnit, block.dom);\n      });\n    };\n\n    var backspaceDelete = function (editor, _forward) {\n      if (editor.selection.isCollapsed() && canOutdent(editor)) {\n        var dom = editor.dom;\n        var rng = editor.selection.getRng();\n        var pos = CaretPosition.fromRangeStart(rng);\n        var block = dom.getParent(rng.startContainer, dom.isBlock);\n        if (block !== null && isAtStartOfBlock(SugarElement.fromDom(block), pos)) {\n          handle(editor, 'outdent');\n          return true;\n        }\n      }\n      return false;\n    };\n\n    var nativeCommand = function (editor, command) {\n      editor.getDoc().execCommand(command, false, null);\n    };\n    var deleteCommand = function (editor, caret) {\n      if (backspaceDelete(editor)) {\n        return;\n      } else if (backspaceDelete$5(editor, false)) {\n        return;\n      } else if (backspaceDelete$6(editor, false)) {\n        return;\n      } else if (backspaceDelete$3(editor, caret, false)) {\n        return;\n      } else if (backspaceDelete$8(editor, false)) {\n        return;\n      } else if (backspaceDelete$9(editor)) {\n        return;\n      } else if (backspaceDelete$4(editor, false)) {\n        return;\n      } else if (backspaceDelete$1(editor, false)) {\n        return;\n      } else if (backspaceDelete$7(editor)) {\n        return;\n      } else if (backspaceDelete$2(editor, false)) {\n        return;\n      } else {\n        nativeCommand(editor, 'Delete');\n        paddEmptyBody(editor);\n      }\n    };\n    var forwardDeleteCommand = function (editor, caret) {\n      if (backspaceDelete$5(editor, true)) {\n        return;\n      } else if (backspaceDelete$6(editor, true)) {\n        return;\n      } else if (backspaceDelete$3(editor, caret, true)) {\n        return;\n      } else if (backspaceDelete$8(editor, true)) {\n        return;\n      } else if (backspaceDelete$9(editor)) {\n        return;\n      } else if (backspaceDelete$4(editor, true)) {\n        return;\n      } else if (backspaceDelete$1(editor, true)) {\n        return;\n      } else if (backspaceDelete$7(editor)) {\n        return;\n      } else if (backspaceDelete$2(editor, true)) {\n        return;\n      } else {\n        nativeCommand(editor, 'ForwardDelete');\n      }\n    };\n    var setup$f = function (editor, caret) {\n      editor.addCommand('delete', function () {\n        deleteCommand(editor, caret);\n      });\n      editor.addCommand('forwardDelete', function () {\n        forwardDeleteCommand(editor, caret);\n      });\n    };\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      if (event.touches === undefined || event.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(event.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x);\n      var distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var setup$e = function (editor) {\n      var startData = value();\n      var longpressFired = Cell(false);\n      var debounceLongpress = last(function (e) {\n        editor.fire('longpress', __assign(__assign({}, e), { type: 'longpress' }));\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      editor.on('touchstart', function (e) {\n        getTouch(e).each(function (touch) {\n          debounceLongpress.cancel();\n          var data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: e.target\n          };\n          debounceLongpress.throttle(e);\n          longpressFired.set(false);\n          startData.set(data);\n        });\n      }, true);\n      editor.on('touchmove', function (e) {\n        debounceLongpress.cancel();\n        getTouch(e).each(function (touch) {\n          startData.on(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.clear();\n              longpressFired.set(false);\n              editor.fire('longpresscancel');\n            }\n          });\n        });\n      }, true);\n      editor.on('touchend touchcancel', function (e) {\n        debounceLongpress.cancel();\n        if (e.type === 'touchcancel') {\n          return;\n        }\n        startData.get().filter(function (data) {\n          return data.target.isEqualNode(e.target);\n        }).each(function () {\n          if (longpressFired.get()) {\n            e.preventDefault();\n          } else {\n            editor.fire('tap', __assign(__assign({}, e), { type: 'tap' }));\n          }\n        });\n      }, true);\n    };\n\n    var isBlockElement = function (blockElements, node) {\n      return has$2(blockElements, node.nodeName);\n    };\n    var isValidTarget = function (blockElements, node) {\n      if (isText$7(node)) {\n        return true;\n      } else if (isElement$5(node)) {\n        return !isBlockElement(blockElements, node) && !isBookmarkNode$1(node);\n      } else {\n        return false;\n      }\n    };\n    var hasBlockParent = function (blockElements, root, node) {\n      return exists(parents(SugarElement.fromDom(node), SugarElement.fromDom(root)), function (elm) {\n        return isBlockElement(blockElements, elm.dom);\n      });\n    };\n    var shouldRemoveTextNode = function (blockElements, node) {\n      if (isText$7(node)) {\n        if (node.nodeValue.length === 0) {\n          return true;\n        } else if (/^\\s+$/.test(node.nodeValue) && (!node.nextSibling || isBlockElement(blockElements, node.nextSibling))) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var addRootBlocks = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var schema = editor.schema, blockElements = schema.getBlockElements();\n      var node = selection.getStart();\n      var rootNode = editor.getBody();\n      var rootBlockNode, tempNode, wrapped;\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (!node || !isElement$5(node) || !forcedRootBlock) {\n        return;\n      }\n      var rootNodeName = rootNode.nodeName.toLowerCase();\n      if (!schema.isValidChild(rootNodeName, forcedRootBlock.toLowerCase()) || hasBlockParent(blockElements, rootNode, node)) {\n        return;\n      }\n      var rng = selection.getRng();\n      var startContainer = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endContainer = rng.endContainer;\n      var endOffset = rng.endOffset;\n      var restoreSelection = hasFocus(editor);\n      node = rootNode.firstChild;\n      while (node) {\n        if (isValidTarget(blockElements, node)) {\n          if (shouldRemoveTextNode(blockElements, node)) {\n            tempNode = node;\n            node = node.nextSibling;\n            dom.remove(tempNode);\n            continue;\n          }\n          if (!rootBlockNode) {\n            rootBlockNode = dom.create(forcedRootBlock, getForcedRootBlockAttrs(editor));\n            node.parentNode.insertBefore(rootBlockNode, node);\n            wrapped = true;\n          }\n          tempNode = node;\n          node = node.nextSibling;\n          rootBlockNode.appendChild(tempNode);\n        } else {\n          rootBlockNode = null;\n          node = node.nextSibling;\n        }\n      }\n      if (wrapped && restoreSelection) {\n        rng.setStart(startContainer, startOffset);\n        rng.setEnd(endContainer, endOffset);\n        selection.setRng(rng);\n        editor.nodeChanged();\n      }\n    };\n    var setup$d = function (editor) {\n      if (getForcedRootBlock(editor)) {\n        editor.on('NodeChange', curry(addRootBlocks, editor));\n      }\n    };\n\n    var findBlockCaretContainer = function (editor) {\n      return descendant(SugarElement.fromDom(editor.getBody()), '*[data-mce-caret]').map(function (elm) {\n        return elm.dom;\n      }).getOrNull();\n    };\n    var removeIeControlRect = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var showBlockCaretContainer = function (editor, blockCaretContainer) {\n      if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n        showCaretContainerBlock(blockCaretContainer);\n        removeIeControlRect(editor);\n        editor.selection.scrollIntoView(blockCaretContainer);\n      }\n    };\n    var handleBlockContainer = function (editor, e) {\n      var blockCaretContainer = findBlockCaretContainer(editor);\n      if (!blockCaretContainer) {\n        return;\n      }\n      if (e.type === 'compositionstart') {\n        e.preventDefault();\n        e.stopPropagation();\n        showBlockCaretContainer(editor, blockCaretContainer);\n        return;\n      }\n      if (hasContent(blockCaretContainer)) {\n        showBlockCaretContainer(editor, blockCaretContainer);\n        editor.undoManager.add();\n      }\n    };\n    var setup$c = function (editor) {\n      editor.on('keyup compositionstart', curry(handleBlockContainer, editor));\n    };\n\n    var isContentEditableFalse$2 = isContentEditableFalse$b;\n    var moveToCeFalseHorizontally = function (direction, editor, range) {\n      return moveHorizontally(editor, direction, range, isBeforeContentEditableFalse, isAfterContentEditableFalse, isContentEditableFalse$2);\n    };\n    var moveToCeFalseVertically = function (direction, editor, range) {\n      var isBefore = function (caretPosition) {\n        return isBeforeContentEditableFalse(caretPosition) || isBeforeTable(caretPosition);\n      };\n      var isAfter = function (caretPosition) {\n        return isAfterContentEditableFalse(caretPosition) || isAfterTable(caretPosition);\n      };\n      return moveVertically(editor, direction, range, isBefore, isAfter, isContentEditableFalse$2);\n    };\n    var createTextBlock = function (editor) {\n      var textBlock = editor.dom.create(getForcedRootBlock(editor));\n      if (!Env.ie || Env.ie >= 11) {\n        textBlock.innerHTML = '<br data-mce-bogus=\"1\">';\n      }\n      return textBlock;\n    };\n    var exitPreBlock = function (editor, direction, range) {\n      var caretWalker = CaretWalker(editor.getBody());\n      var getVisualCaretPosition$1 = curry(getVisualCaretPosition, direction === 1 ? caretWalker.next : caretWalker.prev);\n      if (range.collapsed && hasForcedRootBlock(editor)) {\n        var pre = editor.dom.getParent(range.startContainer, 'PRE');\n        if (!pre) {\n          return;\n        }\n        var caretPos = getVisualCaretPosition$1(CaretPosition.fromRangeStart(range));\n        if (!caretPos) {\n          var newBlock = createTextBlock(editor);\n          if (direction === 1) {\n            editor.$(pre).after(newBlock);\n          } else {\n            editor.$(pre).before(newBlock);\n          }\n          editor.selection.select(newBlock, true);\n          editor.selection.collapse();\n        }\n      }\n    };\n    var getHorizontalRange = function (editor, forward) {\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var range = editor.selection.getRng();\n      return moveToCeFalseHorizontally(direction, editor, range).orThunk(function () {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    var getVerticalRange = function (editor, down) {\n      var direction = down ? 1 : -1;\n      var range = editor.selection.getRng();\n      return moveToCeFalseVertically(direction, editor, range).orThunk(function () {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    var moveH$2 = function (editor, forward) {\n      return getHorizontalRange(editor, forward).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveV$3 = function (editor, down) {\n      return getVerticalRange(editor, down).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveToLineEndPoint$1 = function (editor, forward) {\n      var isCefPosition = forward ? isAfterContentEditableFalse : isBeforeContentEditableFalse;\n      return moveToLineEndPoint$3(editor, forward, isCefPosition);\n    };\n\n    var isTarget = function (node) {\n      return contains$3(['figcaption'], name(node));\n    };\n    var rangeBefore = function (target) {\n      var rng = document.createRange();\n      rng.setStartBefore(target.dom);\n      rng.setEndBefore(target.dom);\n      return rng;\n    };\n    var insertElement = function (root, elm, forward) {\n      if (forward) {\n        append$1(root, elm);\n      } else {\n        prepend(root, elm);\n      }\n    };\n    var insertBr = function (root, forward) {\n      var br = SugarElement.fromTag('br');\n      insertElement(root, br, forward);\n      return rangeBefore(br);\n    };\n    var insertBlock = function (root, forward, blockName, attrs) {\n      var block = SugarElement.fromTag(blockName);\n      var br = SugarElement.fromTag('br');\n      setAll$1(block, attrs);\n      append$1(block, br);\n      insertElement(root, block, forward);\n      return rangeBefore(br);\n    };\n    var insertEmptyLine = function (root, rootBlockName, attrs, forward) {\n      if (rootBlockName === '') {\n        return insertBr(root, forward);\n      } else {\n        return insertBlock(root, forward, rootBlockName, attrs);\n      }\n    };\n    var getClosestTargetBlock = function (pos, root) {\n      var isRoot = curry(eq, root);\n      return closest$3(SugarElement.fromDom(pos.container()), isBlock$2, isRoot).filter(isTarget);\n    };\n    var isAtFirstOrLastLine = function (root, forward, pos) {\n      return forward ? isAtLastLine(root.dom, pos) : isAtFirstLine(root.dom, pos);\n    };\n    var moveCaretToNewEmptyLine = function (editor, forward) {\n      var root = SugarElement.fromDom(editor.getBody());\n      var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      var rootBlock = getForcedRootBlock(editor);\n      var rootBlockAttrs = getForcedRootBlockAttrs(editor);\n      return getClosestTargetBlock(pos, root).exists(function () {\n        if (isAtFirstOrLastLine(root, forward, pos)) {\n          var rng = insertEmptyLine(root, rootBlock, rootBlockAttrs, forward);\n          editor.selection.setRng(rng);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var moveV$2 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return moveCaretToNewEmptyLine(editor, forward);\n      } else {\n        return false;\n      }\n    };\n\n    var defaultPatterns = function (patterns) {\n      return map$3(patterns, function (pattern) {\n        return __assign({\n          shiftKey: false,\n          altKey: false,\n          ctrlKey: false,\n          metaKey: false,\n          keyCode: 0,\n          action: noop\n        }, pattern);\n      });\n    };\n    var matchesEvent = function (pattern, evt) {\n      return evt.keyCode === pattern.keyCode && evt.shiftKey === pattern.shiftKey && evt.altKey === pattern.altKey && evt.ctrlKey === pattern.ctrlKey && evt.metaKey === pattern.metaKey;\n    };\n    var match$1 = function (patterns, evt) {\n      return bind(defaultPatterns(patterns), function (pattern) {\n        return matchesEvent(pattern, evt) ? [pattern] : [];\n      });\n    };\n    var action = function (f) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      return function () {\n        return f.apply(null, x);\n      };\n    };\n    var execute = function (patterns, evt) {\n      return find$3(match$1(patterns, evt), function (pattern) {\n        return pattern.action();\n      });\n    };\n\n    var moveH$1 = function (editor, forward) {\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var range = editor.selection.getRng();\n      return moveHorizontally(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia$2).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveV$1 = function (editor, down) {\n      var direction = down ? 1 : -1;\n      var range = editor.selection.getRng();\n      return moveVertically(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia$2).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveToLineEndPoint = function (editor, forward) {\n      var isNearMedia = forward ? isAfterMedia : isBeforeMedia;\n      return moveToLineEndPoint$3(editor, forward, isNearMedia);\n    };\n\n    var deflate = function (rect, delta) {\n      return {\n        left: rect.left - delta,\n        top: rect.top - delta,\n        right: rect.right + delta * 2,\n        bottom: rect.bottom + delta * 2,\n        width: rect.width + delta,\n        height: rect.height + delta\n      };\n    };\n    var getCorners = function (getYAxisValue, tds) {\n      return bind(tds, function (td) {\n        var rect = deflate(clone(td.getBoundingClientRect()), -1);\n        return [\n          {\n            x: rect.left,\n            y: getYAxisValue(rect),\n            cell: td\n          },\n          {\n            x: rect.right,\n            y: getYAxisValue(rect),\n            cell: td\n          }\n        ];\n      });\n    };\n    var findClosestCorner = function (corners, x, y) {\n      return foldl(corners, function (acc, newCorner) {\n        return acc.fold(function () {\n          return Optional.some(newCorner);\n        }, function (oldCorner) {\n          var oldDist = Math.sqrt(Math.abs(oldCorner.x - x) + Math.abs(oldCorner.y - y));\n          var newDist = Math.sqrt(Math.abs(newCorner.x - x) + Math.abs(newCorner.y - y));\n          return Optional.some(newDist < oldDist ? newCorner : oldCorner);\n        });\n      }, Optional.none());\n    };\n    var getClosestCell = function (getYAxisValue, isTargetCorner, table, x, y) {\n      var cells = descendants(SugarElement.fromDom(table), 'td,th,caption').map(function (e) {\n        return e.dom;\n      });\n      var corners = filter$4(getCorners(getYAxisValue, cells), function (corner) {\n        return isTargetCorner(corner, y);\n      });\n      return findClosestCorner(corners, x, y).map(function (corner) {\n        return corner.cell;\n      });\n    };\n    var getBottomValue = function (rect) {\n      return rect.bottom;\n    };\n    var getTopValue = function (rect) {\n      return rect.top;\n    };\n    var isAbove = function (corner, y) {\n      return corner.y < y;\n    };\n    var isBelow = function (corner, y) {\n      return corner.y > y;\n    };\n    var getClosestCellAbove = curry(getClosestCell, getBottomValue, isAbove);\n    var getClosestCellBelow = curry(getClosestCell, getTopValue, isBelow);\n    var findClosestPositionInAboveCell = function (table, pos) {\n      return head(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellAbove(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getLastLinePositions(cell), pos);\n      });\n    };\n    var findClosestPositionInBelowCell = function (table, pos) {\n      return last$2(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellBelow(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getFirstLinePositions(cell), pos);\n      });\n    };\n\n    var hasNextBreak = function (getPositionsUntil, scope, lineInfo) {\n      return lineInfo.breakAt.exists(function (breakPos) {\n        return getPositionsUntil(scope, breakPos).breakAt.isSome();\n      });\n    };\n    var startsWithWrapBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Wrap && lineInfo.positions.length === 0;\n    };\n    var startsWithBrBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Br && lineInfo.positions.length === 1;\n    };\n    var isAtTableCellLine = function (getPositionsUntil, scope, pos) {\n      var lineInfo = getPositionsUntil(scope, pos);\n      if (startsWithWrapBreak(lineInfo) || !isBr$5(pos.getNode()) && startsWithBrBreak(lineInfo)) {\n        return !hasNextBreak(getPositionsUntil, scope, lineInfo);\n      } else {\n        return lineInfo.breakAt.isNone();\n      }\n    };\n    var isAtFirstTableCellLine = curry(isAtTableCellLine, getPositionsUntilPreviousLine);\n    var isAtLastTableCellLine = curry(isAtTableCellLine, getPositionsUntilNextLine);\n    var isCaretAtStartOrEndOfTable = function (forward, rng, table) {\n      var caretPos = CaretPosition.fromRangeStart(rng);\n      return positionIn(!forward, table).exists(function (pos) {\n        return pos.isEqual(caretPos);\n      });\n    };\n    var navigateHorizontally = function (editor, forward, table, _td) {\n      var rng = editor.selection.getRng();\n      var direction = forward ? 1 : -1;\n      if (isFakeCaretTableBrowser() && isCaretAtStartOrEndOfTable(forward, rng, table)) {\n        showCaret(direction, editor, table, !forward, false).each(function (newRng) {\n          moveToRange(editor, newRng);\n        });\n        return true;\n      }\n      return false;\n    };\n    var getClosestAbovePosition = function (root, table, start) {\n      return findClosestPositionInAboveCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsAbove(root, CaretPosition.before(table)), rect.left);\n        });\n      }).getOr(CaretPosition.before(table));\n    };\n    var getClosestBelowPosition = function (root, table, start) {\n      return findClosestPositionInBelowCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsBelow(root, CaretPosition.after(table)), rect.left);\n        });\n      }).getOr(CaretPosition.after(table));\n    };\n    var getTable = function (previous, pos) {\n      var node = pos.getNode(previous);\n      return isElement$5(node) && node.nodeName === 'TABLE' ? Optional.some(node) : Optional.none();\n    };\n    var renderBlock = function (down, editor, table, pos) {\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (forcedRootBlock) {\n        editor.undoManager.transact(function () {\n          var element = SugarElement.fromTag(forcedRootBlock);\n          setAll$1(element, getForcedRootBlockAttrs(editor));\n          append$1(element, SugarElement.fromTag('br'));\n          if (down) {\n            after$3(SugarElement.fromDom(table), element);\n          } else {\n            before$4(SugarElement.fromDom(table), element);\n          }\n          var rng = editor.dom.createRng();\n          rng.setStart(element.dom, 0);\n          rng.setEnd(element.dom, 0);\n          moveToRange(editor, rng);\n        });\n      } else {\n        moveToRange(editor, pos.toRange());\n      }\n    };\n    var moveCaret = function (editor, down, pos) {\n      var table = down ? getTable(true, pos) : getTable(false, pos);\n      var last = down === false;\n      table.fold(function () {\n        return moveToRange(editor, pos.toRange());\n      }, function (table) {\n        return positionIn(last, editor.getBody()).filter(function (lastPos) {\n          return lastPos.isEqual(pos);\n        }).fold(function () {\n          return moveToRange(editor, pos.toRange());\n        }, function (_) {\n          return renderBlock(down, editor, table, pos);\n        });\n      });\n    };\n    var navigateVertically = function (editor, down, table, td) {\n      var rng = editor.selection.getRng();\n      var pos = CaretPosition.fromRangeStart(rng);\n      var root = editor.getBody();\n      if (!down && isAtFirstTableCellLine(td, pos)) {\n        var newPos = getClosestAbovePosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else if (down && isAtLastTableCellLine(td, pos)) {\n        var newPos = getClosestBelowPosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var move$1 = function (editor, forward, mover) {\n      return Optional.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(function (td) {\n        return Optional.from(editor.dom.getParent(td, 'table')).map(function (table) {\n          return mover(editor, forward, table, td);\n        });\n      }).getOr(false);\n    };\n    var moveH = function (editor, forward) {\n      return move$1(editor, forward, navigateHorizontally);\n    };\n    var moveV = function (editor, forward) {\n      return move$1(editor, forward, navigateVertically);\n    };\n\n    var executeKeydownOverride$3 = function (editor, caret, evt) {\n      var os = detect().os;\n      execute([\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$2, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$2, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$3, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$3, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$1, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$1, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$1, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$1, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(move$2, editor, caret, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(move$2, editor, caret, false)\n        },\n        {\n          keyCode: VK.RIGHT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: action(moveNextWord, editor, caret)\n        },\n        {\n          keyCode: VK.LEFT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: action(movePrevWord, editor, caret)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$2, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$2, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$b = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$3(editor, caret, evt);\n        }\n      });\n    };\n\n    var executeKeydownOverride$2 = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$5, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$5, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$6, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$6, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$3, editor, caret, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$3, editor, caret, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$9, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$9, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$4, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$4, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$1, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$1, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$7, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$7, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$8, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$8, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$2, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$2, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var executeKeyupOverride = function (editor, evt) {\n      execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(paddEmptyElement, editor)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(paddEmptyElement, editor)\n        }\n      ], evt);\n    };\n    var setup$a = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$2(editor, caret, evt);\n        }\n      });\n      editor.on('keyup', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeyupOverride(editor, evt);\n        }\n      });\n    };\n\n    var firstNonWhiteSpaceNodeSibling = function (node) {\n      while (node) {\n        if (node.nodeType === 1 || node.nodeType === 3 && node.data && /[\\r\\n\\s]/.test(node.data)) {\n          return node;\n        }\n        node = node.nextSibling;\n      }\n    };\n    var moveToCaretPosition = function (editor, root) {\n      var node, lastNode = root;\n      var dom = editor.dom;\n      var moveCaretBeforeOnEnterElementsMap = editor.schema.getMoveCaretBeforeOnEnterElements();\n      if (!root) {\n        return;\n      }\n      if (/^(LI|DT|DD)$/.test(root.nodeName)) {\n        var firstChild = firstNonWhiteSpaceNodeSibling(root.firstChild);\n        if (firstChild && /^(UL|OL|DL)$/.test(firstChild.nodeName)) {\n          root.insertBefore(dom.doc.createTextNode(nbsp), root.firstChild);\n        }\n      }\n      var rng = dom.createRng();\n      root.normalize();\n      if (root.hasChildNodes()) {\n        var walker = new DomTreeWalker(root, root);\n        while (node = walker.current()) {\n          if (isText$7(node)) {\n            rng.setStart(node, 0);\n            rng.setEnd(node, 0);\n            break;\n          }\n          if (moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]) {\n            rng.setStartBefore(node);\n            rng.setEndBefore(node);\n            break;\n          }\n          lastNode = node;\n          node = walker.next();\n        }\n        if (!node) {\n          rng.setStart(lastNode, 0);\n          rng.setEnd(lastNode, 0);\n        }\n      } else {\n        if (isBr$5(root)) {\n          if (root.nextSibling && dom.isBlock(root.nextSibling)) {\n            rng.setStartBefore(root);\n            rng.setEndBefore(root);\n          } else {\n            rng.setStartAfter(root);\n            rng.setEndAfter(root);\n          }\n        } else {\n          rng.setStart(root, 0);\n          rng.setEnd(root, 0);\n        }\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    var getEditableRoot$1 = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var getParentBlock = function (editor) {\n      return Optional.from(editor.dom.getParent(editor.selection.getStart(true), editor.dom.isBlock));\n    };\n    var getParentBlockName = function (editor) {\n      return getParentBlock(editor).fold(constant(''), function (parentBlock) {\n        return parentBlock.nodeName.toUpperCase();\n      });\n    };\n    var isListItemParentBlock = function (editor) {\n      return getParentBlock(editor).filter(function (elm) {\n        return isListItem(SugarElement.fromDom(elm));\n      }).isSome();\n    };\n\n    var hasFirstChild = function (elm, name) {\n      return elm.firstChild && elm.firstChild.nodeName === name;\n    };\n    var isFirstChild = function (elm) {\n      var _a;\n      return ((_a = elm.parentNode) === null || _a === void 0 ? void 0 : _a.firstChild) === elm;\n    };\n    var hasParent = function (elm, parentName) {\n      return elm && elm.parentNode && elm.parentNode.nodeName === parentName;\n    };\n    var isListBlock = function (elm) {\n      return elm && /^(OL|UL|LI)$/.test(elm.nodeName);\n    };\n    var isNestedList = function (elm) {\n      return isListBlock(elm) && isListBlock(elm.parentNode);\n    };\n    var getContainerBlock = function (containerBlock) {\n      var containerBlockParent = containerBlock.parentNode;\n      if (/^(LI|DT|DD)$/.test(containerBlockParent.nodeName)) {\n        return containerBlockParent;\n      }\n      return containerBlock;\n    };\n    var isFirstOrLastLi = function (containerBlock, parentBlock, first) {\n      var node = containerBlock[first ? 'firstChild' : 'lastChild'];\n      while (node) {\n        if (isElement$5(node)) {\n          break;\n        }\n        node = node[first ? 'nextSibling' : 'previousSibling'];\n      }\n      return node === parentBlock;\n    };\n    var insert$3 = function (editor, createNewBlock, containerBlock, parentBlock, newBlockName) {\n      var dom = editor.dom;\n      var rng = editor.selection.getRng();\n      if (containerBlock === editor.getBody()) {\n        return;\n      }\n      if (isNestedList(containerBlock)) {\n        newBlockName = 'LI';\n      }\n      var newBlock = newBlockName ? createNewBlock(newBlockName) : dom.create('BR');\n      if (isFirstOrLastLi(containerBlock, parentBlock, true) && isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        if (hasParent(containerBlock, 'LI')) {\n          var containerBlockParent = getContainerBlock(containerBlock);\n          dom.insertAfter(newBlock, containerBlockParent);\n          if (isFirstChild(containerBlock)) {\n            dom.remove(containerBlockParent);\n          } else {\n            dom.remove(containerBlock);\n          }\n        } else {\n          dom.replace(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, true)) {\n        if (hasParent(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n          newBlock.appendChild(dom.doc.createTextNode(' '));\n          newBlock.appendChild(containerBlock);\n        } else {\n          containerBlock.parentNode.insertBefore(newBlock, containerBlock);\n        }\n        dom.remove(parentBlock);\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n        dom.remove(parentBlock);\n      } else {\n        containerBlock = getContainerBlock(containerBlock);\n        var tmpRng = rng.cloneRange();\n        tmpRng.setStartAfter(parentBlock);\n        tmpRng.setEndAfter(containerBlock);\n        var fragment = tmpRng.extractContents();\n        if (newBlockName === 'LI' && hasFirstChild(fragment, 'LI')) {\n          newBlock = fragment.firstChild;\n          dom.insertAfter(fragment, containerBlock);\n        } else {\n          dom.insertAfter(fragment, containerBlock);\n          dom.insertAfter(newBlock, containerBlock);\n        }\n        dom.remove(parentBlock);\n      }\n      moveToCaretPosition(editor, newBlock);\n    };\n\n    var trimZwsp = function (fragment) {\n      each$k(descendants$1(SugarElement.fromDom(fragment), isText$8), function (text) {\n        var rawNode = text.dom;\n        rawNode.nodeValue = trim$2(rawNode.nodeValue);\n      });\n    };\n    var isEmptyAnchor = function (dom, elm) {\n      return elm && elm.nodeName === 'A' && dom.isEmpty(elm);\n    };\n    var isTableCell = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var emptyBlock = function (elm) {\n      elm.innerHTML = '<br data-mce-bogus=\"1\">';\n    };\n    var containerAndSiblingName = function (container, nodeName) {\n      return container.nodeName === nodeName || container.previousSibling && container.previousSibling.nodeName === nodeName;\n    };\n    var canSplitBlock = function (dom, node) {\n      return node && dom.isBlock(node) && !/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName) && !/^(fixed|absolute)/i.test(node.style.position) && dom.getContentEditable(node) !== 'true';\n    };\n    var trimInlineElementsOnLeftSideOfBlock = function (dom, nonEmptyElementsMap, block) {\n      var node = block;\n      var firstChilds = [];\n      var i;\n      if (!node) {\n        return;\n      }\n      while (node = node.firstChild) {\n        if (dom.isBlock(node)) {\n          return;\n        }\n        if (isElement$5(node) && !nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          firstChilds.push(node);\n        }\n      }\n      i = firstChilds.length;\n      while (i--) {\n        node = firstChilds[i];\n        if (!node.hasChildNodes() || node.firstChild === node.lastChild && node.firstChild.nodeValue === '') {\n          dom.remove(node);\n        } else {\n          if (isEmptyAnchor(dom, node)) {\n            dom.remove(node);\n          }\n        }\n      }\n    };\n    var normalizeZwspOffset = function (start, container, offset) {\n      if (isText$7(container) === false) {\n        return offset;\n      } else if (start) {\n        return offset === 1 && container.data.charAt(offset - 1) === ZWSP$1 ? 0 : offset;\n      } else {\n        return offset === container.data.length - 1 && container.data.charAt(offset) === ZWSP$1 ? container.data.length : offset;\n      }\n    };\n    var includeZwspInRange = function (rng) {\n      var newRng = rng.cloneRange();\n      newRng.setStart(rng.startContainer, normalizeZwspOffset(true, rng.startContainer, rng.startOffset));\n      newRng.setEnd(rng.endContainer, normalizeZwspOffset(false, rng.endContainer, rng.endOffset));\n      return newRng;\n    };\n    var trimLeadingLineBreaks = function (node) {\n      do {\n        if (isText$7(node)) {\n          node.nodeValue = node.nodeValue.replace(/^[\\r\\n]+/, '');\n        }\n        node = node.firstChild;\n      } while (node);\n    };\n    var getEditableRoot = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var applyAttributes = function (editor, node, forcedRootBlockAttrs) {\n      var dom = editor.dom;\n      Optional.from(forcedRootBlockAttrs.style).map(dom.parseStyle).each(function (attrStyles) {\n        var currentStyles = getAllRaw(SugarElement.fromDom(node));\n        var newStyles = __assign(__assign({}, currentStyles), attrStyles);\n        dom.setStyles(node, newStyles);\n      });\n      var attrClassesOpt = Optional.from(forcedRootBlockAttrs.class).map(function (attrClasses) {\n        return attrClasses.split(/\\s+/);\n      });\n      var currentClassesOpt = Optional.from(node.className).map(function (currentClasses) {\n        return filter$4(currentClasses.split(/\\s+/), function (clazz) {\n          return clazz !== '';\n        });\n      });\n      lift2(attrClassesOpt, currentClassesOpt, function (attrClasses, currentClasses) {\n        var filteredClasses = filter$4(currentClasses, function (clazz) {\n          return !contains$3(attrClasses, clazz);\n        });\n        var newClasses = __spreadArray(__spreadArray([], attrClasses, true), filteredClasses, true);\n        dom.setAttrib(node, 'class', newClasses.join(' '));\n      });\n      var appliedAttrs = [\n        'style',\n        'class'\n      ];\n      var remainingAttrs = filter$3(forcedRootBlockAttrs, function (_, attrs) {\n        return !contains$3(appliedAttrs, attrs);\n      });\n      dom.setAttribs(node, remainingAttrs);\n    };\n    var setForcedBlockAttrs = function (editor, node) {\n      var forcedRootBlockName = getForcedRootBlock(editor);\n      if (forcedRootBlockName && forcedRootBlockName.toLowerCase() === node.tagName.toLowerCase()) {\n        var forcedRootBlockAttrs = getForcedRootBlockAttrs(editor);\n        applyAttributes(editor, node, forcedRootBlockAttrs);\n      }\n    };\n    var wrapSelfAndSiblingsInDefaultBlock = function (editor, newBlockName, rng, container, offset) {\n      var newBlock, parentBlock, startNode, node, next, rootBlockName;\n      var blockName = newBlockName || 'P';\n      var dom = editor.dom, editableRoot = getEditableRoot(dom, container);\n      parentBlock = dom.getParent(container, dom.isBlock);\n      if (!parentBlock || !canSplitBlock(dom, parentBlock)) {\n        parentBlock = parentBlock || editableRoot;\n        if (parentBlock === editor.getBody() || isTableCell(parentBlock)) {\n          rootBlockName = parentBlock.nodeName.toLowerCase();\n        } else {\n          rootBlockName = parentBlock.parentNode.nodeName.toLowerCase();\n        }\n        if (!parentBlock.hasChildNodes()) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          parentBlock.appendChild(newBlock);\n          rng.setStart(newBlock, 0);\n          rng.setEnd(newBlock, 0);\n          return newBlock;\n        }\n        node = container;\n        while (node.parentNode !== parentBlock) {\n          node = node.parentNode;\n        }\n        while (node && !dom.isBlock(node)) {\n          startNode = node;\n          node = node.previousSibling;\n        }\n        if (startNode && editor.schema.isValidChild(rootBlockName, blockName.toLowerCase())) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          startNode.parentNode.insertBefore(newBlock, startNode);\n          node = startNode;\n          while (node && !dom.isBlock(node)) {\n            next = node.nextSibling;\n            newBlock.appendChild(node);\n            node = next;\n          }\n          rng.setStart(container, offset);\n          rng.setEnd(container, offset);\n        }\n      }\n      return container;\n    };\n    var addBrToBlockIfNeeded = function (dom, block) {\n      block.normalize();\n      var lastChild = block.lastChild;\n      if (!lastChild || /^(left|right)$/gi.test(dom.getStyle(lastChild, 'float', true))) {\n        dom.add(block, 'br');\n      }\n    };\n    var insert$2 = function (editor, evt) {\n      var tmpRng, container, offset, parentBlock;\n      var newBlock, fragment, containerBlock, parentBlockName, newBlockName, isAfterLastNodeInContainer;\n      var dom = editor.dom;\n      var schema = editor.schema, nonEmptyElementsMap = schema.getNonEmptyElements();\n      var rng = editor.selection.getRng();\n      var createNewBlock = function (name) {\n        var node = container, block, clonedNode, caretNode;\n        var textInlineElements = schema.getTextInlineElements();\n        if (name || parentBlockName === 'TABLE' || parentBlockName === 'HR') {\n          block = dom.create(name || newBlockName);\n        } else {\n          block = parentBlock.cloneNode(false);\n        }\n        caretNode = block;\n        if (shouldKeepStyles(editor) === false) {\n          dom.setAttrib(block, 'style', null);\n          dom.setAttrib(block, 'class', null);\n        } else {\n          do {\n            if (textInlineElements[node.nodeName]) {\n              if (isCaretNode(node) || isBookmarkNode$1(node)) {\n                continue;\n              }\n              clonedNode = node.cloneNode(false);\n              dom.setAttrib(clonedNode, 'id', '');\n              if (block.hasChildNodes()) {\n                clonedNode.appendChild(block.firstChild);\n                block.appendChild(clonedNode);\n              } else {\n                caretNode = clonedNode;\n                block.appendChild(clonedNode);\n              }\n            }\n          } while ((node = node.parentNode) && node !== editableRoot);\n        }\n        setForcedBlockAttrs(editor, block);\n        emptyBlock(caretNode);\n        return block;\n      };\n      var isCaretAtStartOrEndOfBlock = function (start) {\n        var node, name;\n        var normalizedOffset = normalizeZwspOffset(start, container, offset);\n        if (isText$7(container) && (start ? normalizedOffset > 0 : normalizedOffset < container.nodeValue.length)) {\n          return false;\n        }\n        if (container.parentNode === parentBlock && isAfterLastNodeInContainer && !start) {\n          return true;\n        }\n        if (start && isElement$5(container) && container === parentBlock.firstChild) {\n          return true;\n        }\n        if (containerAndSiblingName(container, 'TABLE') || containerAndSiblingName(container, 'HR')) {\n          return isAfterLastNodeInContainer && !start || !isAfterLastNodeInContainer && start;\n        }\n        var walker = new DomTreeWalker(container, parentBlock);\n        if (isText$7(container)) {\n          if (start && normalizedOffset === 0) {\n            walker.prev();\n          } else if (!start && normalizedOffset === container.nodeValue.length) {\n            walker.next();\n          }\n        }\n        while (node = walker.current()) {\n          if (isElement$5(node)) {\n            if (!node.getAttribute('data-mce-bogus')) {\n              name = node.nodeName.toLowerCase();\n              if (nonEmptyElementsMap[name] && name !== 'br') {\n                return false;\n              }\n            }\n          } else if (isText$7(node) && !isWhitespaceText(node.nodeValue)) {\n            return false;\n          }\n          if (start) {\n            walker.prev();\n          } else {\n            walker.next();\n          }\n        }\n        return true;\n      };\n      var insertNewBlockAfter = function () {\n        if (/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName) && containerBlockName !== 'HGROUP') {\n          newBlock = createNewBlock(newBlockName);\n        } else {\n          newBlock = createNewBlock();\n        }\n        if (shouldEndContainerOnEmptyBlock(editor) && canSplitBlock(dom, containerBlock) && dom.isEmpty(parentBlock)) {\n          newBlock = dom.split(containerBlock, parentBlock);\n        } else {\n          dom.insertAfter(newBlock, parentBlock);\n        }\n        moveToCaretPosition(editor, newBlock);\n      };\n      normalize$2(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      newBlockName = getForcedRootBlock(editor);\n      var shiftKey = !!(evt && evt.shiftKey);\n      var ctrlKey = !!(evt && evt.ctrlKey);\n      if (isElement$5(container) && container.hasChildNodes()) {\n        isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && isText$7(container)) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var editableRoot = getEditableRoot(dom, container);\n      if (!editableRoot) {\n        return;\n      }\n      if (newBlockName && !shiftKey || !newBlockName && shiftKey) {\n        container = wrapSelfAndSiblingsInDefaultBlock(editor, newBlockName, rng, container, offset);\n      }\n      parentBlock = dom.getParent(container, dom.isBlock);\n      containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : '';\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      if (containerBlockName === 'LI' && !ctrlKey) {\n        parentBlock = containerBlock;\n        containerBlock = containerBlock.parentNode;\n        parentBlockName = containerBlockName;\n      }\n      if (/^(LI|DT|DD)$/.test(parentBlockName)) {\n        if (dom.isEmpty(parentBlock)) {\n          insert$3(editor, createNewBlock, containerBlock, parentBlock, newBlockName);\n          return;\n        }\n      }\n      if (newBlockName && parentBlock === editor.getBody()) {\n        return;\n      }\n      newBlockName = newBlockName || 'P';\n      if (isCaretContainerBlock$1(parentBlock)) {\n        newBlock = showCaretContainerBlock(parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        setForcedBlockAttrs(editor, newBlock);\n        moveToCaretPosition(editor, newBlock);\n      } else if (isCaretAtStartOrEndOfBlock()) {\n        insertNewBlockAfter();\n      } else if (isCaretAtStartOrEndOfBlock(true)) {\n        newBlock = parentBlock.parentNode.insertBefore(createNewBlock(), parentBlock);\n        moveToCaretPosition(editor, containerAndSiblingName(parentBlock, 'HR') ? newBlock : parentBlock);\n      } else {\n        tmpRng = includeZwspInRange(rng).cloneRange();\n        tmpRng.setEndAfter(parentBlock);\n        fragment = tmpRng.extractContents();\n        trimZwsp(fragment);\n        trimLeadingLineBreaks(fragment);\n        newBlock = fragment.firstChild;\n        dom.insertAfter(fragment, parentBlock);\n        trimInlineElementsOnLeftSideOfBlock(dom, nonEmptyElementsMap, newBlock);\n        addBrToBlockIfNeeded(dom, parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        newBlock.normalize();\n        if (dom.isEmpty(newBlock)) {\n          dom.remove(newBlock);\n          insertNewBlockAfter();\n        } else {\n          setForcedBlockAttrs(editor, newBlock);\n          moveToCaretPosition(editor, newBlock);\n        }\n      }\n      dom.setAttrib(newBlock, 'id', '');\n      editor.fire('NewBlock', { newBlock: newBlock });\n    };\n\n    var hasRightSideContent = function (schema, container, parentBlock) {\n      var walker = new DomTreeWalker(container, parentBlock);\n      var node;\n      var nonEmptyElementsMap = schema.getNonEmptyElements();\n      while (node = walker.next()) {\n        if (nonEmptyElementsMap[node.nodeName.toLowerCase()] || node.length > 0) {\n          return true;\n        }\n      }\n    };\n    var moveSelectionToBr = function (editor, brElm, extraBr) {\n      var rng = editor.dom.createRng();\n      if (!extraBr) {\n        rng.setStartAfter(brElm);\n        rng.setEndAfter(brElm);\n      } else {\n        rng.setStartBefore(brElm);\n        rng.setEndBefore(brElm);\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    var insertBrAtCaret = function (editor, evt) {\n      var selection = editor.selection;\n      var dom = editor.dom;\n      var rng = selection.getRng();\n      var brElm;\n      var extraBr;\n      normalize$2(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      var offset = rng.startOffset;\n      var container = rng.startContainer;\n      if (container.nodeType === 1 && container.hasChildNodes()) {\n        var isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && container.nodeType === 3) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var parentBlock = dom.getParent(container, dom.isBlock);\n      var containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      var isControlKey = !!(evt && evt.ctrlKey);\n      if (containerBlockName === 'LI' && !isControlKey) {\n        parentBlock = containerBlock;\n      }\n      if (container && container.nodeType === 3 && offset >= container.nodeValue.length) {\n        if (!hasRightSideContent(editor.schema, container, parentBlock)) {\n          brElm = dom.create('br');\n          rng.insertNode(brElm);\n          rng.setStartAfter(brElm);\n          rng.setEndAfter(brElm);\n          extraBr = true;\n        }\n      }\n      brElm = dom.create('br');\n      rangeInsertNode(dom, rng, brElm);\n      moveSelectionToBr(editor, brElm, extraBr);\n      editor.undoManager.add();\n    };\n    var insertBrBefore = function (editor, inline) {\n      var br = SugarElement.fromTag('br');\n      before$4(SugarElement.fromDom(inline), br);\n      editor.undoManager.add();\n    };\n    var insertBrAfter = function (editor, inline) {\n      if (!hasBrAfter(editor.getBody(), inline)) {\n        after$3(SugarElement.fromDom(inline), SugarElement.fromTag('br'));\n      }\n      var br = SugarElement.fromTag('br');\n      after$3(SugarElement.fromDom(inline), br);\n      moveSelectionToBr(editor, br.dom, false);\n      editor.undoManager.add();\n    };\n    var isBeforeBr = function (pos) {\n      return isBr$5(pos.getNode());\n    };\n    var hasBrAfter = function (rootNode, startNode) {\n      if (isBeforeBr(CaretPosition.after(startNode))) {\n        return true;\n      } else {\n        return nextPosition(rootNode, CaretPosition.after(startNode)).map(function (pos) {\n          return isBr$5(pos.getNode());\n        }).getOr(false);\n      }\n    };\n    var isAnchorLink = function (elm) {\n      return elm && elm.nodeName === 'A' && 'href' in elm;\n    };\n    var isInsideAnchor = function (location) {\n      return location.fold(never, isAnchorLink, isAnchorLink, never);\n    };\n    var readInlineAnchorLocation = function (editor) {\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var position = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return readLocation(isInlineTarget$1, editor.getBody(), position).filter(isInsideAnchor);\n    };\n    var insertBrOutsideAnchor = function (editor, location) {\n      location.fold(noop, curry(insertBrBefore, editor), curry(insertBrAfter, editor), noop);\n    };\n    var insert$1 = function (editor, evt) {\n      var anchorLocation = readInlineAnchorLocation(editor);\n      if (anchorLocation.isSome()) {\n        anchorLocation.each(curry(insertBrOutsideAnchor, editor));\n      } else {\n        insertBrAtCaret(editor, evt);\n      }\n    };\n\n    var matchesSelector = function (editor, selector) {\n      return getParentBlock(editor).filter(function (parentBlock) {\n        return selector.length > 0 && is$2(SugarElement.fromDom(parentBlock), selector);\n      }).isSome();\n    };\n    var shouldInsertBr = function (editor) {\n      return matchesSelector(editor, getBrNewLineSelector(editor));\n    };\n    var shouldBlockNewLine$1 = function (editor) {\n      return matchesSelector(editor, getNoNewLineSelector(editor));\n    };\n\n    var newLineAction = Adt.generate([\n      { br: [] },\n      { block: [] },\n      { none: [] }\n    ]);\n    var shouldBlockNewLine = function (editor, _shiftKey) {\n      return shouldBlockNewLine$1(editor);\n    };\n    var isBrMode = function (requiredState) {\n      return function (editor, _shiftKey) {\n        var brMode = getForcedRootBlock(editor) === '';\n        return brMode === requiredState;\n      };\n    };\n    var inListBlock = function (requiredState) {\n      return function (editor, _shiftKey) {\n        return isListItemParentBlock(editor) === requiredState;\n      };\n    };\n    var inBlock = function (blockName, requiredState) {\n      return function (editor, _shiftKey) {\n        var state = getParentBlockName(editor) === blockName.toUpperCase();\n        return state === requiredState;\n      };\n    };\n    var inPreBlock = function (requiredState) {\n      return inBlock('pre', requiredState);\n    };\n    var inSummaryBlock = function () {\n      return inBlock('summary', true);\n    };\n    var shouldPutBrInPre = function (requiredState) {\n      return function (editor, _shiftKey) {\n        return shouldPutBrInPre$1(editor) === requiredState;\n      };\n    };\n    var inBrContext = function (editor, _shiftKey) {\n      return shouldInsertBr(editor);\n    };\n    var hasShiftKey = function (_editor, shiftKey) {\n      return shiftKey;\n    };\n    var canInsertIntoEditableRoot = function (editor) {\n      var forcedRootBlock = getForcedRootBlock(editor);\n      var rootEditable = getEditableRoot$1(editor.dom, editor.selection.getStart());\n      return rootEditable && editor.schema.isValidChild(rootEditable.nodeName, forcedRootBlock ? forcedRootBlock : 'P');\n    };\n    var match = function (predicates, action) {\n      return function (editor, shiftKey) {\n        var isMatch = foldl(predicates, function (res, p) {\n          return res && p(editor, shiftKey);\n        }, true);\n        return isMatch ? Optional.some(action) : Optional.none();\n      };\n    };\n    var getAction = function (editor, evt) {\n      return evaluateUntil([\n        match([shouldBlockNewLine], newLineAction.none()),\n        match([inSummaryBlock()], newLineAction.br()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(false)\n        ], newLineAction.block()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(true),\n          hasShiftKey\n        ], newLineAction.block()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(true)\n        ], newLineAction.br()),\n        match([\n          inListBlock(true),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([inListBlock(true)], newLineAction.block()),\n        match([\n          isBrMode(true),\n          hasShiftKey,\n          canInsertIntoEditableRoot\n        ], newLineAction.block()),\n        match([isBrMode(true)], newLineAction.br()),\n        match([inBrContext], newLineAction.br()),\n        match([\n          isBrMode(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([canInsertIntoEditableRoot], newLineAction.block())\n      ], [\n        editor,\n        !!(evt && evt.shiftKey)\n      ]).getOr(newLineAction.none());\n    };\n\n    var insert = function (editor, evt) {\n      getAction(editor, evt).fold(function () {\n        insert$1(editor, evt);\n      }, function () {\n        insert$2(editor, evt);\n      }, noop);\n    };\n\n    var handleEnterKeyEvent = function (editor, event) {\n      if (event.isDefaultPrevented()) {\n        return;\n      }\n      event.preventDefault();\n      endTypingLevelIgnoreLocks(editor.undoManager);\n      editor.undoManager.transact(function () {\n        if (editor.selection.isCollapsed() === false) {\n          editor.execCommand('Delete');\n        }\n        insert(editor, event);\n      });\n    };\n    var setup$9 = function (editor) {\n      editor.on('keydown', function (event) {\n        if (event.keyCode === VK.ENTER) {\n          handleEnterKeyEvent(editor, event);\n        }\n      });\n    };\n\n    var executeKeydownOverride$1 = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$1, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$1, editor, false)\n        },\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint, editor, false)\n        },\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$2, editor, true, caret)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$2, editor, false, caret)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$8 = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$1(editor, caret, evt);\n        }\n      });\n    };\n\n    var browser = detect().browser;\n    var setupIeInput = function (editor) {\n      var keypressThrotter = first(function () {\n        if (!editor.composing) {\n          normalizeNbspsInEditor(editor);\n        }\n      }, 0);\n      if (browser.isIE()) {\n        editor.on('keypress', function (_e) {\n          keypressThrotter.throttle();\n        });\n        editor.on('remove', function (_e) {\n          keypressThrotter.cancel();\n        });\n      }\n    };\n    var setup$7 = function (editor) {\n      setupIeInput(editor);\n      editor.on('input', function (e) {\n        if (e.isComposing === false) {\n          normalizeNbspsInEditor(editor);\n        }\n      });\n    };\n\n    var platform = detect();\n    var executeKeyupAction = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.PAGE_UP,\n          action: action(moveToLineEndPoint$2, editor, false, caret)\n        },\n        {\n          keyCode: VK.PAGE_DOWN,\n          action: action(moveToLineEndPoint$2, editor, true, caret)\n        }\n      ], evt);\n    };\n    var stopImmediatePropagation = function (e) {\n      return e.stopImmediatePropagation();\n    };\n    var isPageUpDown = function (evt) {\n      return evt.keyCode === VK.PAGE_UP || evt.keyCode === VK.PAGE_DOWN;\n    };\n    var setNodeChangeBlocker = function (blocked, editor, block) {\n      if (block && !blocked.get()) {\n        editor.on('NodeChange', stopImmediatePropagation, true);\n      } else if (!block && blocked.get()) {\n        editor.off('NodeChange', stopImmediatePropagation);\n      }\n      blocked.set(block);\n    };\n    var setup$6 = function (editor, caret) {\n      if (platform.os.isOSX()) {\n        return;\n      }\n      var blocked = Cell(false);\n      editor.on('keydown', function (evt) {\n        if (isPageUpDown(evt)) {\n          setNodeChangeBlocker(blocked, editor, true);\n        }\n      });\n      editor.on('keyup', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeyupAction(editor, caret, evt);\n        }\n        if (isPageUpDown(evt) && blocked.get()) {\n          setNodeChangeBlocker(blocked, editor, false);\n          editor.nodeChanged();\n        }\n      });\n    };\n\n    var insertTextAtPosition = function (text, pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (isText$7(container)) {\n        container.insertData(offset, text);\n        return Optional.some(CaretPosition(container, offset + text.length));\n      } else {\n        return getElementFromPosition(pos).map(function (elm) {\n          var textNode = SugarElement.fromText(text);\n          if (pos.isAtEnd()) {\n            after$3(elm, textNode);\n          } else {\n            before$4(elm, textNode);\n          }\n          return CaretPosition(textNode.dom, text.length);\n        });\n      }\n    };\n    var insertNbspAtPosition = curry(insertTextAtPosition, nbsp);\n    var insertSpaceAtPosition = curry(insertTextAtPosition, ' ');\n\n    var locationToCaretPosition = function (root) {\n      return function (location) {\n        return location.fold(function (element) {\n          return prevPosition(root.dom, CaretPosition.before(element));\n        }, function (element) {\n          return firstPositionIn(element);\n        }, function (element) {\n          return lastPositionIn(element);\n        }, function (element) {\n          return nextPosition(root.dom, CaretPosition.after(element));\n        });\n      };\n    };\n    var insertInlineBoundarySpaceOrNbsp = function (root, pos) {\n      return function (checkPos) {\n        return needsToHaveNbsp(root, checkPos) ? insertNbspAtPosition(pos) : insertSpaceAtPosition(pos);\n      };\n    };\n    var setSelection = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        editor.nodeChanged();\n        return true;\n      };\n    };\n    var insertSpaceOrNbspAtSelection = function (editor) {\n      var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      var root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        var isInlineTarget$1 = curry(isInlineTarget, editor);\n        var caretPosition = CaretPosition.fromRangeStart(editor.selection.getRng());\n        return readLocation(isInlineTarget$1, editor.getBody(), caretPosition).bind(locationToCaretPosition(root)).bind(insertInlineBoundarySpaceOrNbsp(root, pos)).exists(setSelection(editor));\n      } else {\n        return false;\n      }\n    };\n\n    var executeKeydownOverride = function (editor, evt) {\n      execute([{\n          keyCode: VK.SPACEBAR,\n          action: action(insertSpaceOrNbspAtSelection, editor)\n        }], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$5 = function (editor) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride(editor, evt);\n        }\n      });\n    };\n\n    var registerKeyboardOverrides = function (editor) {\n      var caret = setupSelectedState(editor);\n      setup$c(editor);\n      setup$b(editor, caret);\n      setup$a(editor, caret);\n      setup$9(editor);\n      setup$5(editor);\n      setup$7(editor);\n      setup$8(editor, caret);\n      setup$6(editor, caret);\n      return caret;\n    };\n    var setup$4 = function (editor) {\n      if (!isRtc(editor)) {\n        return registerKeyboardOverrides(editor);\n      } else {\n        return Cell(null);\n      }\n    };\n\n    var NodeChange = function () {\n      function NodeChange(editor) {\n        this.lastPath = [];\n        this.editor = editor;\n        var lastRng;\n        var self = this;\n        if (!('onselectionchange' in editor.getDoc())) {\n          editor.on('NodeChange click mouseup keyup focus', function (e) {\n            var nativeRng = editor.selection.getRng();\n            var fakeRng = {\n              startContainer: nativeRng.startContainer,\n              startOffset: nativeRng.startOffset,\n              endContainer: nativeRng.endContainer,\n              endOffset: nativeRng.endOffset\n            };\n            if (e.type === 'nodechange' || !isEq$4(fakeRng, lastRng)) {\n              editor.fire('SelectionChange');\n            }\n            lastRng = fakeRng;\n          });\n        }\n        editor.on('contextmenu', function () {\n          editor.fire('SelectionChange');\n        });\n        editor.on('SelectionChange', function () {\n          var startElm = editor.selection.getStart(true);\n          if (!startElm || !Env.range && editor.selection.isCollapsed()) {\n            return;\n          }\n          if (hasAnyRanges(editor) && !self.isSameElementPath(startElm) && editor.dom.isChildOf(startElm, editor.getBody())) {\n            editor.nodeChanged({ selectionChange: true });\n          }\n        });\n        editor.on('mouseup', function (e) {\n          if (!e.isDefaultPrevented() && hasAnyRanges(editor)) {\n            if (editor.selection.getNode().nodeName === 'IMG') {\n              Delay.setEditorTimeout(editor, function () {\n                editor.nodeChanged();\n              });\n            } else {\n              editor.nodeChanged();\n            }\n          }\n        });\n      }\n      NodeChange.prototype.nodeChanged = function (args) {\n        var selection = this.editor.selection;\n        var node, parents, root;\n        if (this.editor.initialized && selection && !shouldDisableNodeChange(this.editor) && !this.editor.mode.isReadOnly()) {\n          root = this.editor.getBody();\n          node = selection.getStart(true) || root;\n          if (node.ownerDocument !== this.editor.getDoc() || !this.editor.dom.isChildOf(node, root)) {\n            node = root;\n          }\n          parents = [];\n          this.editor.dom.getParent(node, function (node) {\n            if (node === root) {\n              return true;\n            }\n            parents.push(node);\n          });\n          args = args || {};\n          args.element = node;\n          args.parents = parents;\n          this.editor.fire('NodeChange', args);\n        }\n      };\n      NodeChange.prototype.isSameElementPath = function (startElm) {\n        var i;\n        var currentPath = this.editor.$(startElm).parentsUntil(this.editor.getBody()).add(startElm);\n        if (currentPath.length === this.lastPath.length) {\n          for (i = currentPath.length; i >= 0; i--) {\n            if (currentPath[i] !== this.lastPath[i]) {\n              break;\n            }\n          }\n          if (i === -1) {\n            this.lastPath = currentPath;\n            return true;\n          }\n        }\n        this.lastPath = currentPath;\n        return false;\n      };\n      return NodeChange;\n    }();\n\n    var preventSummaryToggle = function (editor) {\n      editor.on('click', function (e) {\n        if (editor.dom.getParent(e.target, 'details')) {\n          e.preventDefault();\n        }\n      });\n    };\n    var filterDetails = function (editor) {\n      editor.parser.addNodeFilter('details', function (elms) {\n        each$k(elms, function (details) {\n          details.attr('data-mce-open', details.attr('open'));\n          details.attr('open', 'open');\n        });\n      });\n      editor.serializer.addNodeFilter('details', function (elms) {\n        each$k(elms, function (details) {\n          var open = details.attr('data-mce-open');\n          details.attr('open', isString$1(open) ? open : null);\n          details.attr('data-mce-open', null);\n        });\n      });\n    };\n    var setup$3 = function (editor) {\n      preventSummaryToggle(editor);\n      filterDetails(editor);\n    };\n\n    var isTextBlockNode = function (node) {\n      return isElement$5(node) && isTextBlock$2(SugarElement.fromDom(node));\n    };\n    var normalizeSelection = function (editor) {\n      var rng = editor.selection.getRng();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      var endPos = CaretPosition.fromRangeEnd(rng);\n      if (CaretPosition.isElementPosition(startPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          firstPositionIn(container).each(function (pos) {\n            return rng.setStart(pos.container(), pos.offset());\n          });\n        }\n      }\n      if (CaretPosition.isElementPosition(endPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          lastPositionIn(container).each(function (pos) {\n            return rng.setEnd(pos.container(), pos.offset());\n          });\n        }\n      }\n      editor.selection.setRng(normalize(rng));\n    };\n    var setup$2 = function (editor) {\n      editor.on('click', function (e) {\n        if (e.detail >= 3) {\n          normalizeSelection(editor);\n        }\n      });\n    };\n\n    var getAbsolutePosition = function (elm) {\n      var clientRect = elm.getBoundingClientRect();\n      var doc = elm.ownerDocument;\n      var docElem = doc.documentElement;\n      var win = doc.defaultView;\n      return {\n        top: clientRect.top + win.pageYOffset - docElem.clientTop,\n        left: clientRect.left + win.pageXOffset - docElem.clientLeft\n      };\n    };\n    var getBodyPosition = function (editor) {\n      return editor.inline ? getAbsolutePosition(editor.getBody()) : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getScrollPosition = function (editor) {\n      var body = editor.getBody();\n      return editor.inline ? {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      } : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getBodyScroll = function (editor) {\n      var body = editor.getBody(), docElm = editor.getDoc().documentElement;\n      var inlineScroll = {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      };\n      var iframeScroll = {\n        left: body.scrollLeft || docElm.scrollLeft,\n        top: body.scrollTop || docElm.scrollTop\n      };\n      return editor.inline ? inlineScroll : iframeScroll;\n    };\n    var getMousePosition = function (editor, event) {\n      if (event.target.ownerDocument !== editor.getDoc()) {\n        var iframePosition = getAbsolutePosition(editor.getContentAreaContainer());\n        var scrollPosition = getBodyScroll(editor);\n        return {\n          left: event.pageX - iframePosition.left + scrollPosition.left,\n          top: event.pageY - iframePosition.top + scrollPosition.top\n        };\n      }\n      return {\n        left: event.pageX,\n        top: event.pageY\n      };\n    };\n    var calculatePosition = function (bodyPosition, scrollPosition, mousePosition) {\n      return {\n        pageX: mousePosition.left - bodyPosition.left + scrollPosition.left,\n        pageY: mousePosition.top - bodyPosition.top + scrollPosition.top\n      };\n    };\n    var calc = function (editor, event) {\n      return calculatePosition(getBodyPosition(editor), getScrollPosition(editor), getMousePosition(editor, event));\n    };\n\n    var isContentEditableFalse$1 = isContentEditableFalse$b, isContentEditableTrue$1 = isContentEditableTrue$4;\n    var isDraggable = function (rootElm, elm) {\n      return isContentEditableFalse$1(elm) && elm !== rootElm;\n    };\n    var isValidDropTarget = function (editor, targetElement, dragElement) {\n      if (targetElement === dragElement || editor.dom.isChildOf(targetElement, dragElement)) {\n        return false;\n      }\n      return !isContentEditableFalse$1(targetElement);\n    };\n    var cloneElement = function (elm) {\n      var cloneElm = elm.cloneNode(true);\n      cloneElm.removeAttribute('data-mce-selected');\n      return cloneElm;\n    };\n    var createGhost = function (editor, elm, width, height) {\n      var dom = editor.dom;\n      var clonedElm = elm.cloneNode(true);\n      dom.setStyles(clonedElm, {\n        width: width,\n        height: height\n      });\n      dom.setAttrib(clonedElm, 'data-mce-selected', null);\n      var ghostElm = dom.create('div', {\n        'class': 'mce-drag-container',\n        'data-mce-bogus': 'all',\n        'unselectable': 'on',\n        'contenteditable': 'false'\n      });\n      dom.setStyles(ghostElm, {\n        position: 'absolute',\n        opacity: 0.5,\n        overflow: 'hidden',\n        border: 0,\n        padding: 0,\n        margin: 0,\n        width: width,\n        height: height\n      });\n      dom.setStyles(clonedElm, {\n        margin: 0,\n        boxSizing: 'border-box'\n      });\n      ghostElm.appendChild(clonedElm);\n      return ghostElm;\n    };\n    var appendGhostToBody = function (ghostElm, bodyElm) {\n      if (ghostElm.parentNode !== bodyElm) {\n        bodyElm.appendChild(ghostElm);\n      }\n    };\n    var moveGhost = function (ghostElm, position, width, height, maxX, maxY) {\n      var overflowX = 0, overflowY = 0;\n      ghostElm.style.left = position.pageX + 'px';\n      ghostElm.style.top = position.pageY + 'px';\n      if (position.pageX + width > maxX) {\n        overflowX = position.pageX + width - maxX;\n      }\n      if (position.pageY + height > maxY) {\n        overflowY = position.pageY + height - maxY;\n      }\n      ghostElm.style.width = width - overflowX + 'px';\n      ghostElm.style.height = height - overflowY + 'px';\n    };\n    var removeElement = function (elm) {\n      if (elm && elm.parentNode) {\n        elm.parentNode.removeChild(elm);\n      }\n    };\n    var isLeftMouseButtonPressed = function (e) {\n      return e.button === 0;\n    };\n    var applyRelPos = function (state, position) {\n      return {\n        pageX: position.pageX - state.relX,\n        pageY: position.pageY + 5\n      };\n    };\n    var start = function (state, editor) {\n      return function (e) {\n        if (isLeftMouseButtonPressed(e)) {\n          var ceElm = find$3(editor.dom.getParents(e.target), or(isContentEditableFalse$1, isContentEditableTrue$1)).getOr(null);\n          if (isDraggable(editor.getBody(), ceElm)) {\n            var elmPos = editor.dom.getPos(ceElm);\n            var bodyElm = editor.getBody();\n            var docElm = editor.getDoc().documentElement;\n            state.set({\n              element: ceElm,\n              dragging: false,\n              screenX: e.screenX,\n              screenY: e.screenY,\n              maxX: (editor.inline ? bodyElm.scrollWidth : docElm.offsetWidth) - 2,\n              maxY: (editor.inline ? bodyElm.scrollHeight : docElm.offsetHeight) - 2,\n              relX: e.pageX - elmPos.x,\n              relY: e.pageY - elmPos.y,\n              width: ceElm.offsetWidth,\n              height: ceElm.offsetHeight,\n              ghost: createGhost(editor, ceElm, ceElm.offsetWidth, ceElm.offsetHeight)\n            });\n          }\n        }\n      };\n    };\n    var move = function (state, editor) {\n      var throttledPlaceCaretAt = Delay.throttle(function (clientX, clientY) {\n        editor._selectionOverrides.hideFakeCaret();\n        editor.selection.placeCaretAt(clientX, clientY);\n      }, 0);\n      editor.on('remove', throttledPlaceCaretAt.stop);\n      return function (e) {\n        return state.on(function (state) {\n          var movement = Math.max(Math.abs(e.screenX - state.screenX), Math.abs(e.screenY - state.screenY));\n          if (!state.dragging && movement > 10) {\n            var args = editor.fire('dragstart', { target: state.element });\n            if (args.isDefaultPrevented()) {\n              return;\n            }\n            state.dragging = true;\n            editor.focus();\n          }\n          if (state.dragging) {\n            var targetPos = applyRelPos(state, calc(editor, e));\n            appendGhostToBody(state.ghost, editor.getBody());\n            moveGhost(state.ghost, targetPos, state.width, state.height, state.maxX, state.maxY);\n            throttledPlaceCaretAt(e.clientX, e.clientY);\n          }\n        });\n      };\n    };\n    var getRawTarget = function (selection) {\n      var rng = selection.getSel().getRangeAt(0);\n      var startContainer = rng.startContainer;\n      return startContainer.nodeType === 3 ? startContainer.parentNode : startContainer;\n    };\n    var drop = function (state, editor) {\n      return function (e) {\n        state.on(function (state) {\n          if (state.dragging) {\n            if (isValidDropTarget(editor, getRawTarget(editor.selection), state.element)) {\n              var targetClone_1 = cloneElement(state.element);\n              var args = editor.fire('drop', {\n                clientX: e.clientX,\n                clientY: e.clientY\n              });\n              if (!args.isDefaultPrevented()) {\n                editor.undoManager.transact(function () {\n                  removeElement(state.element);\n                  editor.insertContent(editor.dom.getOuterHTML(targetClone_1));\n                  editor._selectionOverrides.hideFakeCaret();\n                });\n              }\n            }\n            editor.fire('dragend');\n          }\n        });\n        removeDragState(state);\n      };\n    };\n    var stop = function (state, editor) {\n      return function () {\n        state.on(function (state) {\n          if (state.dragging) {\n            editor.fire('dragend');\n          }\n        });\n        removeDragState(state);\n      };\n    };\n    var removeDragState = function (state) {\n      state.on(function (state) {\n        removeElement(state.ghost);\n      });\n      state.clear();\n    };\n    var bindFakeDragEvents = function (editor) {\n      var state = value();\n      var pageDom = DOMUtils.DOM;\n      var rootDocument = document;\n      var dragStartHandler = start(state, editor);\n      var dragHandler = move(state, editor);\n      var dropHandler = drop(state, editor);\n      var dragEndHandler = stop(state, editor);\n      editor.on('mousedown', dragStartHandler);\n      editor.on('mousemove', dragHandler);\n      editor.on('mouseup', dropHandler);\n      pageDom.bind(rootDocument, 'mousemove', dragHandler);\n      pageDom.bind(rootDocument, 'mouseup', dragEndHandler);\n      editor.on('remove', function () {\n        pageDom.unbind(rootDocument, 'mousemove', dragHandler);\n        pageDom.unbind(rootDocument, 'mouseup', dragEndHandler);\n      });\n      editor.on('keydown', function (e) {\n        if (e.keyCode === VK.ESC) {\n          dragEndHandler();\n        }\n      });\n    };\n    var blockIeDrop = function (editor) {\n      editor.on('drop', function (e) {\n        var realTarget = typeof e.clientX !== 'undefined' ? editor.getDoc().elementFromPoint(e.clientX, e.clientY) : null;\n        if (isContentEditableFalse$1(realTarget) || editor.dom.getContentEditableParent(realTarget) === 'false') {\n          e.preventDefault();\n        }\n      });\n    };\n    var blockUnsupportedFileDrop = function (editor) {\n      var preventFileDrop = function (e) {\n        if (!e.isDefaultPrevented()) {\n          var dataTransfer = e.dataTransfer;\n          if (dataTransfer && (contains$3(dataTransfer.types, 'Files') || dataTransfer.files.length > 0)) {\n            e.preventDefault();\n            if (e.type === 'drop') {\n              displayError(editor, 'Dropped file type is not supported');\n            }\n          }\n        }\n      };\n      var preventFileDropIfUIElement = function (e) {\n        if (isUIElement(editor, e.target)) {\n          preventFileDrop(e);\n        }\n      };\n      var setup = function () {\n        var pageDom = DOMUtils.DOM;\n        var dom = editor.dom;\n        var doc = document;\n        var editorRoot = editor.inline ? editor.getBody() : editor.getDoc();\n        var eventNames = [\n          'drop',\n          'dragover'\n        ];\n        each$k(eventNames, function (name) {\n          pageDom.bind(doc, name, preventFileDropIfUIElement);\n          dom.bind(editorRoot, name, preventFileDrop);\n        });\n        editor.on('remove', function () {\n          each$k(eventNames, function (name) {\n            pageDom.unbind(doc, name, preventFileDropIfUIElement);\n            dom.unbind(editorRoot, name, preventFileDrop);\n          });\n        });\n      };\n      editor.on('init', function () {\n        Delay.setEditorTimeout(editor, setup, 0);\n      });\n    };\n    var init$2 = function (editor) {\n      bindFakeDragEvents(editor);\n      blockIeDrop(editor);\n      if (shouldBlockUnsupportedDrop(editor)) {\n        blockUnsupportedFileDrop(editor);\n      }\n    };\n\n    var setup$1 = function (editor) {\n      var renderFocusCaret = first(function () {\n        if (!editor.removed && editor.getBody().contains(document.activeElement)) {\n          var rng = editor.selection.getRng();\n          if (rng.collapsed) {\n            var caretRange = renderRangeCaret(editor, rng, false);\n            editor.selection.setRng(caretRange);\n          }\n        }\n      }, 0);\n      editor.on('focus', function () {\n        renderFocusCaret.throttle();\n      });\n      editor.on('blur', function () {\n        renderFocusCaret.cancel();\n      });\n    };\n\n    var setup = function (editor) {\n      editor.on('init', function () {\n        editor.on('focusin', function (e) {\n          var target = e.target;\n          if (isMedia$2(target)) {\n            var ceRoot = getContentEditableRoot$1(editor.getBody(), target);\n            var node = isContentEditableFalse$b(ceRoot) ? ceRoot : target;\n            if (editor.selection.getNode() !== node) {\n              selectNode(editor, node).each(function (rng) {\n                return editor.selection.setRng(rng);\n              });\n            }\n          }\n        });\n      });\n    };\n\n    var isContentEditableTrue = isContentEditableTrue$4;\n    var isContentEditableFalse = isContentEditableFalse$b;\n    var getContentEditableRoot = function (editor, node) {\n      return getContentEditableRoot$1(editor.getBody(), node);\n    };\n    var SelectionOverrides = function (editor) {\n      var selection = editor.selection, dom = editor.dom;\n      var isBlock = dom.isBlock;\n      var rootNode = editor.getBody();\n      var fakeCaret = FakeCaret(editor, rootNode, isBlock, function () {\n        return hasFocus(editor);\n      });\n      var realSelectionId = 'sel-' + dom.uniqueId();\n      var elementSelectionAttr = 'data-mce-selected';\n      var selectedElement;\n      var isFakeSelectionElement = function (node) {\n        return dom.hasClass(node, 'mce-offscreen-selection');\n      };\n      var isFakeSelectionTargetElement = function (node) {\n        return node !== rootNode && (isContentEditableFalse(node) || isMedia$2(node)) && dom.isChildOf(node, rootNode);\n      };\n      var isNearFakeSelectionElement = function (pos) {\n        return isBeforeContentEditableFalse(pos) || isAfterContentEditableFalse(pos) || isBeforeMedia(pos) || isAfterMedia(pos);\n      };\n      var getRealSelectionElement = function () {\n        var container = dom.get(realSelectionId);\n        return container ? container.getElementsByTagName('*')[0] : container;\n      };\n      var setRange = function (range) {\n        if (range) {\n          selection.setRng(range);\n        }\n      };\n      var getRange = selection.getRng;\n      var showCaret = function (direction, node, before, scrollIntoView) {\n        if (scrollIntoView === void 0) {\n          scrollIntoView = true;\n        }\n        var e = editor.fire('ShowCaret', {\n          target: node,\n          direction: direction,\n          before: before\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        if (scrollIntoView) {\n          selection.scrollIntoView(node, direction === -1);\n        }\n        return fakeCaret.show(before, node);\n      };\n      var showBlockCaretContainer = function (blockCaretContainer) {\n        if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n          showCaretContainerBlock(blockCaretContainer);\n          setRange(getRange());\n          selection.scrollIntoView(blockCaretContainer);\n        }\n      };\n      var registerEvents = function () {\n        editor.on('mouseup', function (e) {\n          var range = getRange();\n          if (range.collapsed && isXYInContentArea(editor, e.clientX, e.clientY)) {\n            renderCaretAtRange(editor, range, false).each(setRange);\n          }\n        });\n        editor.on('click', function (e) {\n          var contentEditableRoot = getContentEditableRoot(editor, e.target);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse(contentEditableRoot)) {\n              e.preventDefault();\n              editor.focus();\n            }\n            if (isContentEditableTrue(contentEditableRoot)) {\n              if (dom.isChildOf(contentEditableRoot, selection.getNode())) {\n                removeElementSelection();\n              }\n            }\n          }\n        });\n        editor.on('blur NewBlock', removeElementSelection);\n        editor.on('ResizeWindow FullscreenStateChanged', fakeCaret.reposition);\n        var hasNormalCaretPosition = function (elm) {\n          var start = elm.firstChild;\n          if (isNullable(start)) {\n            return false;\n          }\n          var startPos = CaretPosition.before(start);\n          if (isBr$5(startPos.getNode()) && elm.childNodes.length === 1) {\n            return !isNearFakeSelectionElement(startPos);\n          } else {\n            var caretWalker = CaretWalker(elm);\n            var newPos = caretWalker.next(startPos);\n            return newPos && !isNearFakeSelectionElement(newPos);\n          }\n        };\n        var isInSameBlock = function (node1, node2) {\n          var block1 = dom.getParent(node1, isBlock);\n          var block2 = dom.getParent(node2, isBlock);\n          return block1 === block2;\n        };\n        var hasBetterMouseTarget = function (targetNode, caretNode) {\n          var targetBlock = dom.getParent(targetNode, isBlock);\n          var caretBlock = dom.getParent(caretNode, isBlock);\n          if (isNullable(targetBlock)) {\n            return false;\n          }\n          if (targetNode !== caretBlock && dom.isChildOf(targetBlock, caretBlock) && isContentEditableFalse(getContentEditableRoot(editor, targetBlock)) === false) {\n            return true;\n          }\n          return !dom.isChildOf(caretBlock, targetBlock) && !isInSameBlock(targetBlock, caretBlock) && hasNormalCaretPosition(targetBlock);\n        };\n        editor.on('tap', function (e) {\n          var targetElm = e.target;\n          var contentEditableRoot = getContentEditableRoot(editor, targetElm);\n          if (isContentEditableFalse(contentEditableRoot)) {\n            e.preventDefault();\n            selectNode(editor, contentEditableRoot).each(setElementSelection);\n          } else if (isFakeSelectionTargetElement(targetElm)) {\n            selectNode(editor, targetElm).each(setElementSelection);\n          }\n        }, true);\n        editor.on('mousedown', function (e) {\n          var targetElm = e.target;\n          if (targetElm !== rootNode && targetElm.nodeName !== 'HTML' && !dom.isChildOf(targetElm, rootNode)) {\n            return;\n          }\n          if (isXYInContentArea(editor, e.clientX, e.clientY) === false) {\n            return;\n          }\n          var contentEditableRoot = getContentEditableRoot(editor, targetElm);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse(contentEditableRoot)) {\n              e.preventDefault();\n              selectNode(editor, contentEditableRoot).each(setElementSelection);\n            } else {\n              removeElementSelection();\n              if (!(isContentEditableTrue(contentEditableRoot) && e.shiftKey) && !isXYWithinRange(e.clientX, e.clientY, selection.getRng())) {\n                hideFakeCaret();\n                selection.placeCaretAt(e.clientX, e.clientY);\n              }\n            }\n          } else if (isFakeSelectionTargetElement(targetElm)) {\n            selectNode(editor, targetElm).each(setElementSelection);\n          } else if (isFakeCaretTarget(targetElm) === false) {\n            removeElementSelection();\n            hideFakeCaret();\n            var fakeCaretInfo = closestFakeCaret(rootNode, e.clientX, e.clientY);\n            if (fakeCaretInfo) {\n              if (!hasBetterMouseTarget(targetElm, fakeCaretInfo.node)) {\n                e.preventDefault();\n                var range = showCaret(1, fakeCaretInfo.node, fakeCaretInfo.before, false);\n                setRange(range);\n                editor.getBody().focus();\n              }\n            }\n          }\n        });\n        editor.on('keypress', function (e) {\n          if (VK.modifierPressed(e)) {\n            return;\n          }\n          if (isContentEditableFalse(selection.getNode())) {\n            e.preventDefault();\n          }\n        });\n        editor.on('GetSelectionRange', function (e) {\n          var rng = e.range;\n          if (selectedElement) {\n            if (!selectedElement.parentNode) {\n              selectedElement = null;\n              return;\n            }\n            rng = rng.cloneRange();\n            rng.selectNode(selectedElement);\n            e.range = rng;\n          }\n        });\n        editor.on('SetSelectionRange', function (e) {\n          e.range = normalizeShortEndedElementSelection(e.range);\n          var rng = setElementSelection(e.range, e.forward);\n          if (rng) {\n            e.range = rng;\n          }\n        });\n        var isPasteBin = function (node) {\n          return node.id === 'mcepastebin';\n        };\n        editor.on('AfterSetSelectionRange', function (e) {\n          var rng = e.range;\n          var parentNode = rng.startContainer.parentNode;\n          if (!isRangeInCaretContainer(rng) && !isPasteBin(parentNode)) {\n            hideFakeCaret();\n          }\n          if (!isFakeSelectionElement(parentNode)) {\n            removeElementSelection();\n          }\n        });\n        editor.on('copy', function (e) {\n          var clipboardData = e.clipboardData;\n          if (!e.isDefaultPrevented() && e.clipboardData && !Env.ie) {\n            var realSelectionElement = getRealSelectionElement();\n            if (realSelectionElement) {\n              e.preventDefault();\n              clipboardData.clearData();\n              clipboardData.setData('text/html', realSelectionElement.outerHTML);\n              clipboardData.setData('text/plain', realSelectionElement.outerText || realSelectionElement.innerText);\n            }\n          }\n        });\n        init$2(editor);\n        setup$1(editor);\n        setup(editor);\n      };\n      var isWithinCaretContainer = function (node) {\n        return isCaretContainer$2(node) || startsWithCaretContainer$1(node) || endsWithCaretContainer$1(node);\n      };\n      var isRangeInCaretContainer = function (rng) {\n        return isWithinCaretContainer(rng.startContainer) || isWithinCaretContainer(rng.endContainer);\n      };\n      var normalizeShortEndedElementSelection = function (rng) {\n        var shortEndedElements = editor.schema.getShortEndedElements();\n        var newRng = dom.createRng();\n        var startContainer = rng.startContainer;\n        var startOffset = rng.startOffset;\n        var endContainer = rng.endContainer;\n        var endOffset = rng.endOffset;\n        if (has$2(shortEndedElements, startContainer.nodeName.toLowerCase())) {\n          if (startOffset === 0) {\n            newRng.setStartBefore(startContainer);\n          } else {\n            newRng.setStartAfter(startContainer);\n          }\n        } else {\n          newRng.setStart(startContainer, startOffset);\n        }\n        if (has$2(shortEndedElements, endContainer.nodeName.toLowerCase())) {\n          if (endOffset === 0) {\n            newRng.setEndBefore(endContainer);\n          } else {\n            newRng.setEndAfter(endContainer);\n          }\n        } else {\n          newRng.setEnd(endContainer, endOffset);\n        }\n        return newRng;\n      };\n      var setupOffscreenSelection = function (node, targetClone, origTargetClone) {\n        var $ = editor.$;\n        var $realSelectionContainer = descendant(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).fold(function () {\n          return $([]);\n        }, function (elm) {\n          return $([elm.dom]);\n        });\n        if ($realSelectionContainer.length === 0) {\n          $realSelectionContainer = $('<div data-mce-bogus=\"all\" class=\"mce-offscreen-selection\"></div>').attr('id', realSelectionId);\n          $realSelectionContainer.appendTo(editor.getBody());\n        }\n        var newRange = dom.createRng();\n        if (targetClone === origTargetClone && Env.ie) {\n          $realSelectionContainer.empty().append('<p style=\"font-size: 0\" data-mce-bogus=\"all\">\\xA0</p>').append(targetClone);\n          newRange.setStartAfter($realSelectionContainer[0].firstChild.firstChild);\n          newRange.setEndAfter(targetClone);\n        } else {\n          $realSelectionContainer.empty().append(nbsp).append(targetClone).append(nbsp);\n          newRange.setStart($realSelectionContainer[0].firstChild, 1);\n          newRange.setEnd($realSelectionContainer[0].lastChild, 0);\n        }\n        $realSelectionContainer.css({ top: dom.getPos(node, editor.getBody()).y });\n        $realSelectionContainer[0].focus();\n        var sel = selection.getSel();\n        sel.removeAllRanges();\n        sel.addRange(newRange);\n        return newRange;\n      };\n      var selectElement = function (elm) {\n        var targetClone = elm.cloneNode(true);\n        var e = editor.fire('ObjectSelected', {\n          target: elm,\n          targetClone: targetClone\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        var range = setupOffscreenSelection(elm, e.targetClone, targetClone);\n        var nodeElm = SugarElement.fromDom(elm);\n        each$k(descendants(SugarElement.fromDom(editor.getBody()), '*[data-mce-selected]'), function (elm) {\n          if (!eq(nodeElm, elm)) {\n            remove$6(elm, elementSelectionAttr);\n          }\n        });\n        if (!dom.getAttrib(elm, elementSelectionAttr)) {\n          elm.setAttribute(elementSelectionAttr, '1');\n        }\n        selectedElement = elm;\n        hideFakeCaret();\n        return range;\n      };\n      var setElementSelection = function (range, forward) {\n        if (!range) {\n          return null;\n        }\n        if (range.collapsed) {\n          if (!isRangeInCaretContainer(range)) {\n            var dir = forward ? 1 : -1;\n            var caretPosition = getNormalizedRangeEndPoint(dir, rootNode, range);\n            var beforeNode = caretPosition.getNode(!forward);\n            if (isFakeCaretTarget(beforeNode)) {\n              return showCaret(dir, beforeNode, forward ? !caretPosition.isAtEnd() : false, false);\n            }\n            var afterNode = caretPosition.getNode(forward);\n            if (isFakeCaretTarget(afterNode)) {\n              return showCaret(dir, afterNode, forward ? false : !caretPosition.isAtEnd(), false);\n            }\n          }\n          return null;\n        }\n        var startContainer = range.startContainer;\n        var startOffset = range.startOffset;\n        var endOffset = range.endOffset;\n        if (startContainer.nodeType === 3 && startOffset === 0 && isContentEditableFalse(startContainer.parentNode)) {\n          startContainer = startContainer.parentNode;\n          startOffset = dom.nodeIndex(startContainer);\n          startContainer = startContainer.parentNode;\n        }\n        if (startContainer.nodeType !== 1) {\n          return null;\n        }\n        if (endOffset === startOffset + 1 && startContainer === range.endContainer) {\n          var node = startContainer.childNodes[startOffset];\n          if (isFakeSelectionTargetElement(node)) {\n            return selectElement(node);\n          }\n        }\n        return null;\n      };\n      var removeElementSelection = function () {\n        if (selectedElement) {\n          selectedElement.removeAttribute(elementSelectionAttr);\n        }\n        descendant(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).each(remove$7);\n        selectedElement = null;\n      };\n      var destroy = function () {\n        fakeCaret.destroy();\n        selectedElement = null;\n      };\n      var hideFakeCaret = function () {\n        fakeCaret.hide();\n      };\n      if (Env.ceFalse && !isRtc(editor)) {\n        registerEvents();\n      }\n      return {\n        showCaret: showCaret,\n        showBlockCaretContainer: showBlockCaretContainer,\n        hideFakeCaret: hideFakeCaret,\n        destroy: destroy\n      };\n    };\n\n    var Quirks = function (editor) {\n      var each = Tools.each;\n      var BACKSPACE = VK.BACKSPACE, DELETE = VK.DELETE, dom = editor.dom, selection = editor.selection, parser = editor.parser;\n      var isGecko = Env.gecko, isIE = Env.ie, isWebKit = Env.webkit;\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      var mceInternalDataType = isIE ? 'Text' : 'URL';\n      var setEditorCommandState = function (cmd, state) {\n        try {\n          editor.getDoc().execCommand(cmd, false, state);\n        } catch (ex) {\n        }\n      };\n      var isDefaultPrevented = function (e) {\n        return e.isDefaultPrevented();\n      };\n      var setMceInternalContent = function (e) {\n        var selectionHtml, internalContent;\n        if (e.dataTransfer) {\n          if (editor.selection.isCollapsed() && e.target.tagName === 'IMG') {\n            selection.select(e.target);\n          }\n          selectionHtml = editor.selection.getContent();\n          if (selectionHtml.length > 0) {\n            internalContent = mceInternalUrlPrefix + escape(editor.id) + ',' + escape(selectionHtml);\n            e.dataTransfer.setData(mceInternalDataType, internalContent);\n          }\n        }\n      };\n      var getMceInternalContent = function (e) {\n        var internalContent;\n        if (e.dataTransfer) {\n          internalContent = e.dataTransfer.getData(mceInternalDataType);\n          if (internalContent && internalContent.indexOf(mceInternalUrlPrefix) >= 0) {\n            internalContent = internalContent.substr(mceInternalUrlPrefix.length).split(',');\n            return {\n              id: unescape(internalContent[0]),\n              html: unescape(internalContent[1])\n            };\n          }\n        }\n        return null;\n      };\n      var insertClipboardContents = function (content, internal) {\n        if (editor.queryCommandSupported('mceInsertClipboardContent')) {\n          editor.execCommand('mceInsertClipboardContent', false, {\n            content: content,\n            internal: internal\n          });\n        } else {\n          editor.execCommand('mceInsertContent', false, content);\n        }\n      };\n      var emptyEditorWhenDeleting = function () {\n        var serializeRng = function (rng) {\n          var body = dom.create('body');\n          var contents = rng.cloneContents();\n          body.appendChild(contents);\n          return selection.serializer.serialize(body, { format: 'html' });\n        };\n        var allContentsSelected = function (rng) {\n          var selection = serializeRng(rng);\n          var allRng = dom.createRng();\n          allRng.selectNode(editor.getBody());\n          var allSelection = serializeRng(allRng);\n          return selection === allSelection;\n        };\n        editor.on('keydown', function (e) {\n          var keyCode = e.keyCode;\n          var isCollapsed, body;\n          if (!isDefaultPrevented(e) && (keyCode === DELETE || keyCode === BACKSPACE)) {\n            isCollapsed = editor.selection.isCollapsed();\n            body = editor.getBody();\n            if (isCollapsed && !dom.isEmpty(body)) {\n              return;\n            }\n            if (!isCollapsed && !allContentsSelected(editor.selection.getRng())) {\n              return;\n            }\n            e.preventDefault();\n            editor.setContent('');\n            if (body.firstChild && dom.isBlock(body.firstChild)) {\n              editor.selection.setCursorLocation(body.firstChild, 0);\n            } else {\n              editor.selection.setCursorLocation(body, 0);\n            }\n            editor.nodeChanged();\n          }\n        });\n      };\n      var selectAll = function () {\n        editor.shortcuts.add('meta+a', null, 'SelectAll');\n      };\n      var documentElementEditingFocus = function () {\n        if (!editor.inline) {\n          dom.bind(editor.getDoc(), 'mousedown mouseup', function (e) {\n            var rng;\n            if (e.target === editor.getDoc().documentElement) {\n              rng = selection.getRng();\n              editor.getBody().focus();\n              if (e.type === 'mousedown') {\n                if (isCaretContainer$2(rng.startContainer)) {\n                  return;\n                }\n                selection.placeCaretAt(e.clientX, e.clientY);\n              } else {\n                selection.setRng(rng);\n              }\n            }\n          });\n        }\n      };\n      var removeHrOnBackspace = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (!editor.getBody().getElementsByTagName('hr').length) {\n              return;\n            }\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var node = selection.getNode();\n              var previousSibling = node.previousSibling;\n              if (node.nodeName === 'HR') {\n                dom.remove(node);\n                e.preventDefault();\n                return;\n              }\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'hr') {\n                dom.remove(previousSibling);\n                e.preventDefault();\n              }\n            }\n          }\n        });\n      };\n      var focusBody = function () {\n        if (!Range.prototype.getClientRects) {\n          editor.on('mousedown', function (e) {\n            if (!isDefaultPrevented(e) && e.target.nodeName === 'HTML') {\n              var body_1 = editor.getBody();\n              body_1.blur();\n              Delay.setEditorTimeout(editor, function () {\n                body_1.focus();\n              });\n            }\n          });\n        }\n      };\n      var selectControlElements = function () {\n        editor.on('click', function (e) {\n          var target = e.target;\n          if (/^(IMG|HR)$/.test(target.nodeName) && dom.getContentEditableParent(target) !== 'false') {\n            e.preventDefault();\n            editor.selection.select(target);\n            editor.nodeChanged();\n          }\n          if (target.nodeName === 'A' && dom.hasClass(target, 'mce-item-anchor')) {\n            e.preventDefault();\n            selection.select(target);\n          }\n        });\n      };\n      var removeStylesWhenDeletingAcrossBlockElements = function () {\n        var getAttributeApplyFunction = function () {\n          var template = dom.getAttribs(selection.getStart().cloneNode(false));\n          return function () {\n            var target = selection.getStart();\n            if (target !== editor.getBody()) {\n              dom.setAttrib(target, 'style', null);\n              each(template, function (attr) {\n                target.setAttributeNode(attr.cloneNode(true));\n              });\n            }\n          };\n        };\n        var isSelectionAcrossElements = function () {\n          return !selection.isCollapsed() && dom.getParent(selection.getStart(), dom.isBlock) !== dom.getParent(selection.getEnd(), dom.isBlock);\n        };\n        editor.on('keypress', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && (e.keyCode === 8 || e.keyCode === 46) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            editor.getDoc().execCommand('delete', false, null);\n            applyAttributes();\n            e.preventDefault();\n            return false;\n          }\n        });\n        dom.bind(editor.getDoc(), 'cut', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            Delay.setEditorTimeout(editor, function () {\n              applyAttributes();\n            });\n          }\n        });\n      };\n      var disableBackspaceIntoATable = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var previousSibling = selection.getNode().previousSibling;\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'table') {\n                e.preventDefault();\n                return false;\n              }\n            }\n          }\n        });\n      };\n      var removeBlockQuoteOnBackSpace = function () {\n        editor.on('keydown', function (e) {\n          var rng, parent;\n          if (isDefaultPrevented(e) || e.keyCode !== VK.BACKSPACE) {\n            return;\n          }\n          rng = selection.getRng();\n          var container = rng.startContainer;\n          var offset = rng.startOffset;\n          var root = dom.getRoot();\n          parent = container;\n          if (!rng.collapsed || offset !== 0) {\n            return;\n          }\n          while (parent && parent.parentNode && parent.parentNode.firstChild === parent && parent.parentNode !== root) {\n            parent = parent.parentNode;\n          }\n          if (parent.tagName === 'BLOCKQUOTE') {\n            editor.formatter.toggle('blockquote', null, parent);\n            rng = dom.createRng();\n            rng.setStart(container, 0);\n            rng.setEnd(container, 0);\n            selection.setRng(rng);\n          }\n        });\n      };\n      var setGeckoEditingOptions = function () {\n        var setOpts = function () {\n          setEditorCommandState('StyleWithCSS', false);\n          setEditorCommandState('enableInlineTableEditing', false);\n          if (!getObjectResizing(editor)) {\n            setEditorCommandState('enableObjectResizing', false);\n          }\n        };\n        if (!isReadOnly$1(editor)) {\n          editor.on('BeforeExecCommand mousedown', setOpts);\n        }\n      };\n      var addBrAfterLastLinks = function () {\n        var fixLinks = function () {\n          each(dom.select('a'), function (node) {\n            var parentNode = node.parentNode;\n            var root = dom.getRoot();\n            if (parentNode.lastChild === node) {\n              while (parentNode && !dom.isBlock(parentNode)) {\n                if (parentNode.parentNode.lastChild !== parentNode || parentNode === root) {\n                  return;\n                }\n                parentNode = parentNode.parentNode;\n              }\n              dom.add(parentNode, 'br', { 'data-mce-bogus': 1 });\n            }\n          });\n        };\n        editor.on('SetContent ExecCommand', function (e) {\n          if (e.type === 'setcontent' || e.command === 'mceInsertLink') {\n            fixLinks();\n          }\n        });\n      };\n      var setDefaultBlockType = function () {\n        if (getForcedRootBlock(editor)) {\n          editor.on('init', function () {\n            setEditorCommandState('DefaultParagraphSeparator', getForcedRootBlock(editor));\n          });\n        }\n      };\n      var normalizeSelection = function () {\n        editor.on('keyup focusin mouseup', function (e) {\n          if (!VK.modifierPressed(e)) {\n            selection.normalize();\n          }\n        }, true);\n      };\n      var showBrokenImageIcon = function () {\n        editor.contentStyles.push('img:-moz-broken {' + '-moz-force-broken-image-icon:1;' + 'min-width:24px;' + 'min-height:24px' + '}');\n      };\n      var restoreFocusOnKeyDown = function () {\n        if (!editor.inline) {\n          editor.on('keydown', function () {\n            if (document.activeElement === document.body) {\n              editor.getWin().focus();\n            }\n          });\n        }\n      };\n      var bodyHeight = function () {\n        if (!editor.inline) {\n          editor.contentStyles.push('body {min-height: 150px}');\n          editor.on('click', function (e) {\n            var rng;\n            if (e.target.nodeName === 'HTML') {\n              if (Env.ie > 11) {\n                editor.getBody().focus();\n                return;\n              }\n              rng = editor.selection.getRng();\n              editor.getBody().focus();\n              editor.selection.setRng(rng);\n              editor.selection.normalize();\n              editor.nodeChanged();\n            }\n          });\n        }\n      };\n      var blockCmdArrowNavigation = function () {\n        if (Env.mac) {\n          editor.on('keydown', function (e) {\n            if (VK.metaKeyPressed(e) && !e.shiftKey && (e.keyCode === 37 || e.keyCode === 39)) {\n              e.preventDefault();\n              var selection_1 = editor.selection.getSel();\n              selection_1.modify('move', e.keyCode === 37 ? 'backward' : 'forward', 'lineboundary');\n            }\n          });\n        }\n      };\n      var disableAutoUrlDetect = function () {\n        setEditorCommandState('AutoUrlDetect', false);\n      };\n      var tapLinksAndImages = function () {\n        editor.on('click', function (e) {\n          var elm = e.target;\n          do {\n            if (elm.tagName === 'A') {\n              e.preventDefault();\n              return;\n            }\n          } while (elm = elm.parentNode);\n        });\n        editor.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');\n      };\n      var blockFormSubmitInsideEditor = function () {\n        editor.on('init', function () {\n          editor.dom.bind(editor.getBody(), 'submit', function (e) {\n            e.preventDefault();\n          });\n        });\n      };\n      var removeAppleInterchangeBrs = function () {\n        parser.addNodeFilter('br', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            if (nodes[i].attr('class') === 'Apple-interchange-newline') {\n              nodes[i].remove();\n            }\n          }\n        });\n      };\n      var ieInternalDragAndDrop = function () {\n        editor.on('dragstart', function (e) {\n          setMceInternalContent(e);\n        });\n        editor.on('drop', function (e) {\n          if (!isDefaultPrevented(e)) {\n            var internalContent = getMceInternalContent(e);\n            if (internalContent && internalContent.id !== editor.id) {\n              e.preventDefault();\n              var rng = fromPoint(e.x, e.y, editor.getDoc());\n              selection.setRng(rng);\n              insertClipboardContents(internalContent.html, true);\n            }\n          }\n        });\n      };\n      var refreshContentEditable = noop;\n      var isHidden = function () {\n        if (!isGecko || editor.removed) {\n          return false;\n        }\n        var sel = editor.selection.getSel();\n        return !sel || !sel.rangeCount || sel.rangeCount === 0;\n      };\n      var setupRtc = function () {\n        if (isWebKit) {\n          documentElementEditingFocus();\n          selectControlElements();\n          blockFormSubmitInsideEditor();\n          selectAll();\n          if (Env.iOS) {\n            restoreFocusOnKeyDown();\n            bodyHeight();\n            tapLinksAndImages();\n          }\n        }\n        if (isGecko) {\n          focusBody();\n          setGeckoEditingOptions();\n          showBrokenImageIcon();\n          blockCmdArrowNavigation();\n        }\n      };\n      var setup = function () {\n        removeBlockQuoteOnBackSpace();\n        emptyEditorWhenDeleting();\n        if (!Env.windowsPhone) {\n          normalizeSelection();\n        }\n        if (isWebKit) {\n          documentElementEditingFocus();\n          selectControlElements();\n          setDefaultBlockType();\n          blockFormSubmitInsideEditor();\n          disableBackspaceIntoATable();\n          removeAppleInterchangeBrs();\n          if (Env.iOS) {\n            restoreFocusOnKeyDown();\n            bodyHeight();\n            tapLinksAndImages();\n          } else {\n            selectAll();\n          }\n        }\n        if (Env.ie >= 11) {\n          bodyHeight();\n          disableBackspaceIntoATable();\n        }\n        if (Env.ie) {\n          selectAll();\n          disableAutoUrlDetect();\n          ieInternalDragAndDrop();\n        }\n        if (isGecko) {\n          removeHrOnBackspace();\n          focusBody();\n          removeStylesWhenDeletingAcrossBlockElements();\n          setGeckoEditingOptions();\n          addBrAfterLastLinks();\n          showBrokenImageIcon();\n          blockCmdArrowNavigation();\n          disableBackspaceIntoATable();\n        }\n      };\n      if (isRtc(editor)) {\n        setupRtc();\n      } else {\n        setup();\n      }\n      return {\n        refreshContentEditable: refreshContentEditable,\n        isHidden: isHidden\n      };\n    };\n\n    var DOM$6 = DOMUtils.DOM;\n    var appendStyle = function (editor, text) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var container = getStyleContainer(getRootNode(body));\n      var style = SugarElement.fromTag('style');\n      set$1(style, 'type', 'text/css');\n      append$1(style, SugarElement.fromText(text));\n      append$1(container, style);\n      editor.on('remove', function () {\n        remove$7(style);\n      });\n    };\n    var getRootName = function (editor) {\n      return editor.inline ? editor.getElement().nodeName.toLowerCase() : undefined;\n    };\n    var removeUndefined = function (obj) {\n      return filter$3(obj, function (v) {\n        return isUndefined(v) === false;\n      });\n    };\n    var mkSchemaSettings = function (editor) {\n      var settings = editor.settings;\n      return removeUndefined({\n        block_elements: settings.block_elements,\n        boolean_attributes: settings.boolean_attributes,\n        custom_elements: settings.custom_elements,\n        extended_valid_elements: settings.extended_valid_elements,\n        invalid_elements: settings.invalid_elements,\n        invalid_styles: settings.invalid_styles,\n        move_caret_before_on_enter_elements: settings.move_caret_before_on_enter_elements,\n        non_empty_elements: settings.non_empty_elements,\n        schema: settings.schema,\n        self_closing_elements: settings.self_closing_elements,\n        short_ended_elements: settings.short_ended_elements,\n        special: settings.special,\n        text_block_elements: settings.text_block_elements,\n        text_inline_elements: settings.text_inline_elements,\n        valid_children: settings.valid_children,\n        valid_classes: settings.valid_classes,\n        valid_elements: settings.valid_elements,\n        valid_styles: settings.valid_styles,\n        verify_html: settings.verify_html,\n        whitespace_elements: settings.whitespace_elements,\n        padd_empty_block_inline_children: settings.format_empty_lines\n      });\n    };\n    var mkParserSettings = function (editor) {\n      var settings = editor.settings;\n      var blobCache = editor.editorUpload.blobCache;\n      return removeUndefined({\n        allow_conditional_comments: settings.allow_conditional_comments,\n        allow_html_data_urls: settings.allow_html_data_urls,\n        allow_svg_data_urls: settings.allow_svg_data_urls,\n        allow_html_in_named_anchor: settings.allow_html_in_named_anchor,\n        allow_script_urls: settings.allow_script_urls,\n        allow_unsafe_link_target: settings.allow_unsafe_link_target,\n        convert_fonts_to_spans: settings.convert_fonts_to_spans,\n        fix_list_elements: settings.fix_list_elements,\n        font_size_legacy_values: settings.font_size_legacy_values,\n        forced_root_block: settings.forced_root_block,\n        forced_root_block_attrs: settings.forced_root_block_attrs,\n        padd_empty_with_br: settings.padd_empty_with_br,\n        preserve_cdata: settings.preserve_cdata,\n        remove_trailing_brs: settings.remove_trailing_brs,\n        inline_styles: settings.inline_styles,\n        root_name: getRootName(editor),\n        validate: true,\n        blob_cache: blobCache,\n        document: editor.getDoc(),\n        images_dataimg_filter: settings.images_dataimg_filter\n      });\n    };\n    var mkSerializerSettings = function (editor) {\n      var settings = editor.settings;\n      return __assign(__assign(__assign({}, mkParserSettings(editor)), mkSchemaSettings(editor)), removeUndefined({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope,\n        element_format: settings.element_format,\n        entities: settings.entities,\n        entity_encoding: settings.entity_encoding,\n        indent: settings.indent,\n        indent_after: settings.indent_after,\n        indent_before: settings.indent_before\n      }));\n    };\n    var createParser = function (editor) {\n      var parser = DomParser(mkParserSettings(editor), editor.schema);\n      parser.addAttributeFilter('src,href,style,tabindex', function (nodes, name) {\n        var i = nodes.length, node, value;\n        var dom = editor.dom;\n        var internalName = 'data-mce-' + name;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr(name);\n          if (value && !node.attr(internalName)) {\n            if (value.indexOf('data:') === 0 || value.indexOf('blob:') === 0) {\n              continue;\n            }\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n              if (!value.length) {\n                value = null;\n              }\n              node.attr(internalName, value);\n              node.attr(name, value);\n            } else if (name === 'tabindex') {\n              node.attr(internalName, value);\n              node.attr(name, null);\n            } else {\n              node.attr(internalName, editor.convertURL(value, name, node.name));\n            }\n          }\n        }\n      });\n      parser.addNodeFilter('script', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var type = node.attr('type') || 'no/type';\n          if (type.indexOf('mce-') !== 0) {\n            node.attr('type', 'mce-' + type);\n          }\n        }\n      });\n      if (editor.settings.preserve_cdata) {\n        parser.addNodeFilter('#cdata', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            node.type = 8;\n            node.name = '#comment';\n            node.value = '[CDATA[' + editor.dom.encode(node.value) + ']]';\n          }\n        });\n      }\n      parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div', function (nodes) {\n        var i = nodes.length;\n        var nonEmptyElements = editor.schema.getNonEmptyElements();\n        while (i--) {\n          var node = nodes[i];\n          if (node.isEmpty(nonEmptyElements) && node.getAll('br').length === 0) {\n            node.append(new AstNode('br', 1)).shortEnded = true;\n          }\n        }\n      });\n      return parser;\n    };\n    var autoFocus = function (editor) {\n      if (editor.settings.auto_focus) {\n        Delay.setEditorTimeout(editor, function () {\n          var focusEditor;\n          if (editor.settings.auto_focus === true) {\n            focusEditor = editor;\n          } else {\n            focusEditor = editor.editorManager.get(editor.settings.auto_focus);\n          }\n          if (!focusEditor.destroyed) {\n            focusEditor.focus();\n          }\n        }, 100);\n      }\n    };\n    var moveSelectionToFirstCaretPosition = function (editor) {\n      var root = editor.dom.getRoot();\n      if (!editor.inline && (!hasAnyRanges(editor) || editor.selection.getStart(true) === root)) {\n        firstPositionIn(root).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = isTable$3(node) ? firstPositionIn(node).getOr(pos) : pos;\n          if (Env.browser.isIE()) {\n            storeNative(editor, caretPos.toRange());\n          } else {\n            editor.selection.setRng(caretPos.toRange());\n          }\n        });\n      }\n    };\n    var initEditor = function (editor) {\n      editor.bindPendingEventDelegates();\n      editor.initialized = true;\n      fireInit(editor);\n      editor.focus(true);\n      moveSelectionToFirstCaretPosition(editor);\n      editor.nodeChanged({ initial: true });\n      editor.execCallback('init_instance_callback', editor);\n      autoFocus(editor);\n    };\n    var getStyleSheetLoader$1 = function (editor) {\n      return editor.inline ? editor.ui.styleSheetLoader : editor.dom.styleSheetLoader;\n    };\n    var makeStylesheetLoadingPromises = function (editor, css, framedFonts) {\n      var promises = [new promiseObj(function (resolve, reject) {\n          return getStyleSheetLoader$1(editor).loadAll(css, resolve, reject);\n        })];\n      if (editor.inline) {\n        return promises;\n      } else {\n        return promises.concat([new promiseObj(function (resolve, reject) {\n            return editor.ui.styleSheetLoader.loadAll(framedFonts, resolve, reject);\n          })]);\n      }\n    };\n    var loadContentCss = function (editor) {\n      var styleSheetLoader = getStyleSheetLoader$1(editor);\n      var fontCss = getFontCss(editor);\n      var css = editor.contentCSS;\n      var removeCss = function () {\n        styleSheetLoader.unloadAll(css);\n        if (!editor.inline) {\n          editor.ui.styleSheetLoader.unloadAll(fontCss);\n        }\n      };\n      var loaded = function () {\n        if (editor.removed) {\n          removeCss();\n        } else {\n          editor.on('remove', removeCss);\n        }\n      };\n      if (editor.contentStyles.length > 0) {\n        var contentCssText_1 = '';\n        Tools.each(editor.contentStyles, function (style) {\n          contentCssText_1 += style + '\\r\\n';\n        });\n        editor.dom.addStyle(contentCssText_1);\n      }\n      var allStylesheets = promiseObj.all(makeStylesheetLoadingPromises(editor, css, fontCss)).then(loaded).catch(loaded);\n      if (editor.settings.content_style) {\n        appendStyle(editor, editor.settings.content_style);\n      }\n      return allStylesheets;\n    };\n    var preInit = function (editor) {\n      var settings = editor.settings, doc = editor.getDoc(), body = editor.getBody();\n      firePreInit(editor);\n      if (!settings.browser_spellcheck && !settings.gecko_spellcheck) {\n        doc.body.spellcheck = false;\n        DOM$6.setAttrib(body, 'spellcheck', 'false');\n      }\n      editor.quirks = Quirks(editor);\n      firePostRender(editor);\n      var directionality = getDirectionality(editor);\n      if (directionality !== undefined) {\n        body.dir = directionality;\n      }\n      if (settings.protect) {\n        editor.on('BeforeSetContent', function (e) {\n          Tools.each(settings.protect, function (pattern) {\n            e.content = e.content.replace(pattern, function (str) {\n              return '<!--mce:protected ' + escape(str) + '-->';\n            });\n          });\n        });\n      }\n      editor.on('SetContent', function () {\n        editor.addVisual(editor.getBody());\n      });\n      editor.on('compositionstart compositionend', function (e) {\n        editor.composing = e.type === 'compositionstart';\n      });\n    };\n    var loadInitialContent = function (editor) {\n      if (!isRtc(editor)) {\n        editor.load({\n          initial: true,\n          format: 'html'\n        });\n      }\n      editor.startContent = editor.getContent({ format: 'raw' });\n    };\n    var initEditorWithInitialContent = function (editor) {\n      if (editor.removed !== true) {\n        loadInitialContent(editor);\n        initEditor(editor);\n      }\n    };\n    var initContentBody = function (editor, skipWrite) {\n      var settings = editor.settings;\n      var targetElm = editor.getElement();\n      var doc = editor.getDoc();\n      if (!settings.inline) {\n        editor.getElement().style.visibility = editor.orgVisibility;\n      }\n      if (!skipWrite && !editor.inline) {\n        doc.open();\n        doc.write(editor.iframeHTML);\n        doc.close();\n      }\n      if (editor.inline) {\n        DOM$6.addClass(targetElm, 'mce-content-body');\n        editor.contentDocument = doc = document;\n        editor.contentWindow = window;\n        editor.bodyElement = targetElm;\n        editor.contentAreaContainer = targetElm;\n      }\n      var body = editor.getBody();\n      body.disabled = true;\n      editor.readonly = !!settings.readonly;\n      if (!editor.readonly) {\n        if (editor.inline && DOM$6.getStyle(body, 'position', true) === 'static') {\n          body.style.position = 'relative';\n        }\n        body.contentEditable = editor.getParam('content_editable_state', true);\n      }\n      body.disabled = false;\n      editor.editorUpload = EditorUpload(editor);\n      editor.schema = Schema(mkSchemaSettings(editor));\n      editor.dom = DOMUtils(doc, {\n        keep_values: true,\n        url_converter: editor.convertURL,\n        url_converter_scope: editor,\n        hex_colors: settings.force_hex_style_colors,\n        update_styles: true,\n        root_element: editor.inline ? editor.getBody() : null,\n        collect: function () {\n          return editor.inline;\n        },\n        schema: editor.schema,\n        contentCssCors: shouldUseContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor),\n        onSetAttrib: function (e) {\n          editor.fire('SetAttrib', e);\n        }\n      });\n      editor.parser = createParser(editor);\n      editor.serializer = DomSerializer(mkSerializerSettings(editor), editor);\n      editor.selection = EditorSelection(editor.dom, editor.getWin(), editor.serializer, editor);\n      editor.annotator = Annotator(editor);\n      editor.formatter = Formatter(editor);\n      editor.undoManager = UndoManager(editor);\n      editor._nodeChangeDispatcher = new NodeChange(editor);\n      editor._selectionOverrides = SelectionOverrides(editor);\n      setup$e(editor);\n      setup$3(editor);\n      if (!isRtc(editor)) {\n        setup$2(editor);\n      }\n      var caret = setup$4(editor);\n      setup$f(editor, caret);\n      setup$d(editor);\n      setup$g(editor);\n      var setupRtcThunk = setup$i(editor);\n      preInit(editor);\n      setupRtcThunk.fold(function () {\n        loadContentCss(editor).then(function () {\n          return initEditorWithInitialContent(editor);\n        });\n      }, function (setupRtc) {\n        editor.setProgressState(true);\n        loadContentCss(editor).then(function () {\n          setupRtc().then(function (_rtcMode) {\n            editor.setProgressState(false);\n            initEditorWithInitialContent(editor);\n          }, function (err) {\n            editor.notificationManager.open({\n              type: 'error',\n              text: String(err)\n            });\n            initEditorWithInitialContent(editor);\n          });\n        });\n      });\n    };\n\n    var DOM$5 = DOMUtils.DOM;\n    var relaxDomain = function (editor, ifr) {\n      if (document.domain !== window.location.hostname && Env.browser.isIE()) {\n        var bodyUuid = uuid('mce');\n        editor[bodyUuid] = function () {\n          initContentBody(editor);\n        };\n        var domainRelaxUrl = 'javascript:(function(){' + 'document.open();document.domain=\"' + document.domain + '\";' + 'var ed = window.parent.tinymce.get(\"' + editor.id + '\");document.write(ed.iframeHTML);' + 'document.close();ed.' + bodyUuid + '(true);})()';\n        DOM$5.setAttrib(ifr, 'src', domainRelaxUrl);\n        return true;\n      }\n      return false;\n    };\n    var createIframeElement = function (id, title, height, customAttrs) {\n      var iframe = SugarElement.fromTag('iframe');\n      setAll$1(iframe, customAttrs);\n      setAll$1(iframe, {\n        id: id + '_ifr',\n        frameBorder: '0',\n        allowTransparency: 'true',\n        title: title\n      });\n      add$1(iframe, 'tox-edit-area__iframe');\n      return iframe;\n    };\n    var getIframeHtml = function (editor) {\n      var iframeHTML = getDocType(editor) + '<html><head>';\n      if (getDocumentBaseUrl(editor) !== editor.documentBaseUrl) {\n        iframeHTML += '<base href=\"' + editor.documentBaseURI.getURI() + '\" />';\n      }\n      iframeHTML += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';\n      var bodyId = getBodyId(editor);\n      var bodyClass = getBodyClass(editor);\n      var translatedAriaText = editor.translate(getIframeAriaText(editor));\n      if (getContentSecurityPolicy(editor)) {\n        iframeHTML += '<meta http-equiv=\"Content-Security-Policy\" content=\"' + getContentSecurityPolicy(editor) + '\" />';\n      }\n      iframeHTML += '</head>' + ('<body id=\"' + bodyId + '\" class=\"mce-content-body ' + bodyClass + '\" data-id=\"' + editor.id + '\" aria-label=\"' + translatedAriaText + '\">') + '<br>' + '</body></html>';\n      return iframeHTML;\n    };\n    var createIframe = function (editor, o) {\n      var iframeTitle = editor.translate('Rich Text Area');\n      var ifr = createIframeElement(editor.id, iframeTitle, o.height, getIframeAttrs(editor)).dom;\n      ifr.onload = function () {\n        ifr.onload = null;\n        editor.fire('load');\n      };\n      var isDomainRelaxed = relaxDomain(editor, ifr);\n      editor.contentAreaContainer = o.iframeContainer;\n      editor.iframeElement = ifr;\n      editor.iframeHTML = getIframeHtml(editor);\n      DOM$5.add(o.iframeContainer, ifr);\n      return isDomainRelaxed;\n    };\n    var init$1 = function (editor, boxInfo) {\n      var isDomainRelaxed = createIframe(editor, boxInfo);\n      if (boxInfo.editorContainer) {\n        DOM$5.get(boxInfo.editorContainer).style.display = editor.orgDisplay;\n        editor.hidden = DOM$5.isHidden(boxInfo.editorContainer);\n      }\n      editor.getElement().style.display = 'none';\n      DOM$5.setAttrib(editor.id, 'aria-hidden', 'true');\n      if (!isDomainRelaxed) {\n        initContentBody(editor);\n      }\n    };\n\n    var DOM$4 = DOMUtils.DOM;\n    var initPlugin = function (editor, initializedPlugins, plugin) {\n      var Plugin = PluginManager.get(plugin);\n      var pluginUrl = PluginManager.urls[plugin] || editor.documentBaseUrl.replace(/\\/$/, '');\n      plugin = Tools.trim(plugin);\n      if (Plugin && Tools.inArray(initializedPlugins, plugin) === -1) {\n        Tools.each(PluginManager.dependencies(plugin), function (dep) {\n          initPlugin(editor, initializedPlugins, dep);\n        });\n        if (editor.plugins[plugin]) {\n          return;\n        }\n        try {\n          var pluginInstance = new Plugin(editor, pluginUrl, editor.$);\n          editor.plugins[plugin] = pluginInstance;\n          if (pluginInstance.init) {\n            pluginInstance.init(editor, pluginUrl);\n            initializedPlugins.push(plugin);\n          }\n        } catch (e) {\n          pluginInitError(editor, plugin, e);\n        }\n      }\n    };\n    var trimLegacyPrefix = function (name) {\n      return name.replace(/^\\-/, '');\n    };\n    var initPlugins = function (editor) {\n      var initializedPlugins = [];\n      Tools.each(getPlugins(editor).split(/[ ,]/), function (name) {\n        initPlugin(editor, initializedPlugins, trimLegacyPrefix(name));\n      });\n    };\n    var initIcons = function (editor) {\n      var iconPackName = Tools.trim(getIconPackName(editor));\n      var currentIcons = editor.ui.registry.getAll().icons;\n      var loadIcons = __assign(__assign({}, IconManager.get('default').icons), IconManager.get(iconPackName).icons);\n      each$j(loadIcons, function (svgData, icon) {\n        if (!has$2(currentIcons, icon)) {\n          editor.ui.registry.addIcon(icon, svgData);\n        }\n      });\n    };\n    var initTheme = function (editor) {\n      var theme = getTheme(editor);\n      if (isString$1(theme)) {\n        editor.settings.theme = trimLegacyPrefix(theme);\n        var Theme = ThemeManager.get(theme);\n        editor.theme = new Theme(editor, ThemeManager.urls[theme]);\n        if (editor.theme.init) {\n          editor.theme.init(editor, ThemeManager.urls[theme] || editor.documentBaseUrl.replace(/\\/$/, ''), editor.$);\n        }\n      } else {\n        editor.theme = {};\n      }\n    };\n    var renderFromLoadedTheme = function (editor) {\n      return editor.theme.renderUI();\n    };\n    var renderFromThemeFunc = function (editor) {\n      var elm = editor.getElement();\n      var theme = getTheme(editor);\n      var info = theme(editor, elm);\n      if (info.editorContainer.nodeType) {\n        info.editorContainer.id = info.editorContainer.id || editor.id + '_parent';\n      }\n      if (info.iframeContainer && info.iframeContainer.nodeType) {\n        info.iframeContainer.id = info.iframeContainer.id || editor.id + '_iframecontainer';\n      }\n      info.height = info.iframeHeight ? info.iframeHeight : elm.offsetHeight;\n      return info;\n    };\n    var createThemeFalseResult = function (element) {\n      return {\n        editorContainer: element,\n        iframeContainer: element,\n        api: {}\n      };\n    };\n    var renderThemeFalseIframe = function (targetElement) {\n      var iframeContainer = DOM$4.create('div');\n      DOM$4.insertAfter(iframeContainer, targetElement);\n      return createThemeFalseResult(iframeContainer);\n    };\n    var renderThemeFalse = function (editor) {\n      var targetElement = editor.getElement();\n      return editor.inline ? createThemeFalseResult(null) : renderThemeFalseIframe(targetElement);\n    };\n    var renderThemeUi = function (editor) {\n      var elm = editor.getElement();\n      editor.orgDisplay = elm.style.display;\n      if (isString$1(getTheme(editor))) {\n        return renderFromLoadedTheme(editor);\n      } else if (isFunction(getTheme(editor))) {\n        return renderFromThemeFunc(editor);\n      } else {\n        return renderThemeFalse(editor);\n      }\n    };\n    var augmentEditorUiApi = function (editor, api) {\n      var uiApiFacade = {\n        show: Optional.from(api.show).getOr(noop),\n        hide: Optional.from(api.hide).getOr(noop),\n        disable: Optional.from(api.disable).getOr(noop),\n        isDisabled: Optional.from(api.isDisabled).getOr(never),\n        enable: function () {\n          if (!editor.mode.isReadOnly()) {\n            Optional.from(api.enable).map(call);\n          }\n        }\n      };\n      editor.ui = __assign(__assign({}, editor.ui), uiApiFacade);\n    };\n    var init = function (editor) {\n      editor.fire('ScriptsLoaded');\n      initIcons(editor);\n      initTheme(editor);\n      initPlugins(editor);\n      var renderInfo = renderThemeUi(editor);\n      augmentEditorUiApi(editor, Optional.from(renderInfo.api).getOr({}));\n      var boxInfo = {\n        editorContainer: renderInfo.editorContainer,\n        iframeContainer: renderInfo.iframeContainer\n      };\n      editor.editorContainer = boxInfo.editorContainer ? boxInfo.editorContainer : null;\n      appendContentCssFromSettings(editor);\n      if (editor.inline) {\n        return initContentBody(editor);\n      } else {\n        return init$1(editor, boxInfo);\n      }\n    };\n\n    var DOM$3 = DOMUtils.DOM;\n    var hasSkipLoadPrefix = function (name) {\n      return name.charAt(0) === '-';\n    };\n    var loadLanguage = function (scriptLoader, editor) {\n      var languageCode = getLanguageCode(editor);\n      var languageUrl = getLanguageUrl(editor);\n      if (I18n.hasCode(languageCode) === false && languageCode !== 'en') {\n        var url_1 = languageUrl !== '' ? languageUrl : editor.editorManager.baseURL + '/langs/' + languageCode + '.js';\n        scriptLoader.add(url_1, noop, undefined, function () {\n          languageLoadError(editor, url_1, languageCode);\n        });\n      }\n    };\n    var loadTheme = function (scriptLoader, editor, suffix, callback) {\n      var theme = getTheme(editor);\n      if (isString$1(theme)) {\n        if (!hasSkipLoadPrefix(theme) && !has$2(ThemeManager.urls, theme)) {\n          var themeUrl = getThemeUrl(editor);\n          if (themeUrl) {\n            ThemeManager.load(theme, editor.documentBaseURI.toAbsolute(themeUrl));\n          } else {\n            ThemeManager.load(theme, 'themes/' + theme + '/theme' + suffix + '.js');\n          }\n        }\n        scriptLoader.loadQueue(function () {\n          ThemeManager.waitFor(theme, callback);\n        });\n      } else {\n        callback();\n      }\n    };\n    var getIconsUrlMetaFromUrl = function (editor) {\n      return Optional.from(getIconsUrl(editor)).filter(function (url) {\n        return url.length > 0;\n      }).map(function (url) {\n        return {\n          url: url,\n          name: Optional.none()\n        };\n      });\n    };\n    var getIconsUrlMetaFromName = function (editor, name, suffix) {\n      return Optional.from(name).filter(function (name) {\n        return name.length > 0 && !IconManager.has(name);\n      }).map(function (name) {\n        return {\n          url: editor.editorManager.baseURL + '/icons/' + name + '/icons' + suffix + '.js',\n          name: Optional.some(name)\n        };\n      });\n    };\n    var loadIcons = function (scriptLoader, editor, suffix) {\n      var defaultIconsUrl = getIconsUrlMetaFromName(editor, 'default', suffix);\n      var customIconsUrl = getIconsUrlMetaFromUrl(editor).orThunk(function () {\n        return getIconsUrlMetaFromName(editor, getIconPackName(editor), '');\n      });\n      each$k(cat([\n        defaultIconsUrl,\n        customIconsUrl\n      ]), function (urlMeta) {\n        scriptLoader.add(urlMeta.url, noop, undefined, function () {\n          iconsLoadError(editor, urlMeta.url, urlMeta.name.getOrUndefined());\n        });\n      });\n    };\n    var loadPlugins = function (editor, suffix) {\n      Tools.each(getExternalPlugins$1(editor), function (url, name) {\n        PluginManager.load(name, url, noop, undefined, function () {\n          pluginLoadError(editor, url, name);\n        });\n        editor.settings.plugins += ' ' + name;\n      });\n      Tools.each(getPlugins(editor).split(/[ ,]/), function (plugin) {\n        plugin = Tools.trim(plugin);\n        if (plugin && !PluginManager.urls[plugin]) {\n          if (hasSkipLoadPrefix(plugin)) {\n            plugin = plugin.substr(1, plugin.length);\n            var dependencies = PluginManager.dependencies(plugin);\n            Tools.each(dependencies, function (depPlugin) {\n              var defaultSettings = {\n                prefix: 'plugins/',\n                resource: depPlugin,\n                suffix: '/plugin' + suffix + '.js'\n              };\n              var dep = PluginManager.createUrl(defaultSettings, depPlugin);\n              PluginManager.load(dep.resource, dep, noop, undefined, function () {\n                pluginLoadError(editor, dep.prefix + dep.resource + dep.suffix, dep.resource);\n              });\n            });\n          } else {\n            var url_2 = {\n              prefix: 'plugins/',\n              resource: plugin,\n              suffix: '/plugin' + suffix + '.js'\n            };\n            PluginManager.load(plugin, url_2, noop, undefined, function () {\n              pluginLoadError(editor, url_2.prefix + url_2.resource + url_2.suffix, plugin);\n            });\n          }\n        }\n      });\n    };\n    var loadScripts = function (editor, suffix) {\n      var scriptLoader = ScriptLoader.ScriptLoader;\n      loadTheme(scriptLoader, editor, suffix, function () {\n        loadLanguage(scriptLoader, editor);\n        loadIcons(scriptLoader, editor, suffix);\n        loadPlugins(editor, suffix);\n        scriptLoader.loadQueue(function () {\n          if (!editor.removed) {\n            init(editor);\n          }\n        }, editor, function () {\n          if (!editor.removed) {\n            init(editor);\n          }\n        });\n      });\n    };\n    var getStyleSheetLoader = function (element, editor) {\n      return instance.forElement(element, {\n        contentCssCors: hasContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor)\n      });\n    };\n    var render = function (editor) {\n      var id = editor.id;\n      I18n.setCode(getLanguageCode(editor));\n      var readyHandler = function () {\n        DOM$3.unbind(window, 'ready', readyHandler);\n        editor.render();\n      };\n      if (!EventUtils.Event.domLoaded) {\n        DOM$3.bind(window, 'ready', readyHandler);\n        return;\n      }\n      if (!editor.getElement()) {\n        return;\n      }\n      if (!Env.contentEditable) {\n        return;\n      }\n      var element = SugarElement.fromDom(editor.getElement());\n      var snapshot = clone$3(element);\n      editor.on('remove', function () {\n        eachr(element.dom.attributes, function (attr) {\n          return remove$6(element, attr.name);\n        });\n        setAll$1(element, snapshot);\n      });\n      editor.ui.styleSheetLoader = getStyleSheetLoader(element, editor);\n      if (!isInline(editor)) {\n        editor.orgVisibility = editor.getElement().style.visibility;\n        editor.getElement().style.visibility = 'hidden';\n      } else {\n        editor.inline = true;\n      }\n      var form = editor.getElement().form || DOM$3.getParent(id, 'form');\n      if (form) {\n        editor.formElement = form;\n        if (hasHiddenInput(editor) && !isTextareaOrInput(editor.getElement())) {\n          DOM$3.insertAfter(DOM$3.create('input', {\n            type: 'hidden',\n            name: id\n          }), id);\n          editor.hasHiddenInput = true;\n        }\n        editor.formEventDelegate = function (e) {\n          editor.fire(e.type, e);\n        };\n        DOM$3.bind(form, 'submit reset', editor.formEventDelegate);\n        editor.on('reset', function () {\n          editor.resetContent();\n        });\n        if (shouldPatchSubmit(editor) && !form.submit.nodeType && !form.submit.length && !form._mceOldSubmit) {\n          form._mceOldSubmit = form.submit;\n          form.submit = function () {\n            editor.editorManager.triggerSave();\n            editor.setDirty(false);\n            return form._mceOldSubmit(form);\n          };\n        }\n      }\n      editor.windowManager = WindowManager(editor);\n      editor.notificationManager = NotificationManager(editor);\n      if (isEncodingXml(editor)) {\n        editor.on('GetContent', function (e) {\n          if (e.save) {\n            e.content = DOM$3.encode(e.content);\n          }\n        });\n      }\n      if (shouldAddFormSubmitTrigger(editor)) {\n        editor.on('submit', function () {\n          if (editor.initialized) {\n            editor.save();\n          }\n        });\n      }\n      if (shouldAddUnloadTrigger(editor)) {\n        editor._beforeUnload = function () {\n          if (editor.initialized && !editor.destroyed && !editor.isHidden()) {\n            editor.save({\n              format: 'raw',\n              no_events: true,\n              set_dirty: false\n            });\n          }\n        };\n        editor.editorManager.on('BeforeUnload', editor._beforeUnload);\n      }\n      editor.editorManager.add(editor);\n      loadScripts(editor, editor.suffix);\n    };\n\n    var addVisual = function (editor, elm) {\n      return addVisual$1(editor, elm);\n    };\n\n    var legacyPropNames = {\n      'font-size': 'size',\n      'font-family': 'face'\n    };\n    var getSpecifiedFontProp = function (propName, rootElm, elm) {\n      var getProperty = function (elm) {\n        return getRaw(elm, propName).orThunk(function () {\n          if (name(elm) === 'font') {\n            return get$9(legacyPropNames, propName).bind(function (legacyPropName) {\n              return getOpt(elm, legacyPropName);\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n      };\n      var isRoot = function (elm) {\n        return eq(SugarElement.fromDom(rootElm), elm);\n      };\n      return closest$1(SugarElement.fromDom(elm), function (elm) {\n        return getProperty(elm);\n      }, isRoot);\n    };\n    var normalizeFontFamily = function (fontFamily) {\n      return fontFamily.replace(/[\\'\\\"\\\\]/g, '').replace(/,\\s+/g, ',');\n    };\n    var getComputedFontProp = function (propName, elm) {\n      return Optional.from(DOMUtils.DOM.getStyle(elm, propName, true));\n    };\n    var getFontProp = function (propName) {\n      return function (rootElm, elm) {\n        return Optional.from(elm).map(SugarElement.fromDom).filter(isElement$6).bind(function (element) {\n          return getSpecifiedFontProp(propName, rootElm, element.dom).or(getComputedFontProp(propName, element.dom));\n        }).getOr('');\n      };\n    };\n    var getFontSize = getFontProp('font-size');\n    var getFontFamily = compose(normalizeFontFamily, getFontProp('font-family'));\n\n    var findFirstCaretElement = function (editor) {\n      return firstPositionIn(editor.getBody()).map(function (caret) {\n        var container = caret.container();\n        return isText$7(container) ? container.parentNode : container;\n      });\n    };\n    var getCaretElement = function (editor) {\n      return Optional.from(editor.selection.getRng()).bind(function (rng) {\n        var root = editor.getBody();\n        var atStartOfNode = rng.startContainer === root && rng.startOffset === 0;\n        return atStartOfNode ? Optional.none() : Optional.from(editor.selection.getStart(true));\n      });\n    };\n    var bindRange = function (editor, binder) {\n      return getCaretElement(editor).orThunk(curry(findFirstCaretElement, editor)).map(SugarElement.fromDom).filter(isElement$6).bind(binder);\n    };\n    var mapRange = function (editor, mapper) {\n      return bindRange(editor, compose1(Optional.some, mapper));\n    };\n\n    var fromFontSizeNumber = function (editor, value) {\n      if (/^[0-9.]+$/.test(value)) {\n        var fontSizeNumber = parseInt(value, 10);\n        if (fontSizeNumber >= 1 && fontSizeNumber <= 7) {\n          var fontSizes = getFontStyleValues(editor);\n          var fontClasses = getFontSizeClasses(editor);\n          if (fontClasses) {\n            return fontClasses[fontSizeNumber - 1] || value;\n          } else {\n            return fontSizes[fontSizeNumber - 1] || value;\n          }\n        } else {\n          return value;\n        }\n      } else {\n        return value;\n      }\n    };\n    var normalizeFontNames = function (font) {\n      var fonts = font.split(/\\s*,\\s*/);\n      return map$3(fonts, function (font) {\n        if (font.indexOf(' ') !== -1 && !(startsWith(font, '\"') || startsWith(font, '\\''))) {\n          return '\\'' + font + '\\'';\n        } else {\n          return font;\n        }\n      }).join(',');\n    };\n    var fontNameAction = function (editor, value) {\n      var font = fromFontSizeNumber(editor, value);\n      editor.formatter.toggle('fontname', { value: normalizeFontNames(font) });\n      editor.nodeChanged();\n    };\n    var fontNameQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        return getFontFamily(editor.getBody(), elm.dom);\n      }).getOr('');\n    };\n    var fontSizeAction = function (editor, value) {\n      editor.formatter.toggle('fontsize', { value: fromFontSizeNumber(editor, value) });\n      editor.nodeChanged();\n    };\n    var fontSizeQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        return getFontSize(editor.getBody(), elm.dom);\n      }).getOr('');\n    };\n\n    var lineHeightQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        var root = SugarElement.fromDom(editor.getBody());\n        var specifiedStyle = closest$1(elm, function (elm) {\n          return getRaw(elm, 'line-height');\n        }, curry(eq, root));\n        var computedStyle = function () {\n          var lineHeight = parseFloat(get$5(elm, 'line-height'));\n          var fontSize = parseFloat(get$5(elm, 'font-size'));\n          return String(lineHeight / fontSize);\n        };\n        return specifiedStyle.getOrThunk(computedStyle);\n      }).getOr('');\n    };\n    var lineHeightAction = function (editor, lineHeight) {\n      editor.formatter.toggle('lineheight', { value: String(lineHeight) });\n      editor.nodeChanged();\n    };\n\n    var processValue = function (value) {\n      if (typeof value !== 'string') {\n        var details = Tools.extend({\n          paste: value.paste,\n          data: { paste: value.paste }\n        }, value);\n        return {\n          content: value.content,\n          details: details\n        };\n      }\n      return {\n        content: value,\n        details: {}\n      };\n    };\n    var insertAtCaret = function (editor, value) {\n      var result = processValue(value);\n      insertContent(editor, result.content, result.details);\n    };\n\n    var each$4 = Tools.each;\n    var map = Tools.map, inArray = Tools.inArray;\n    var EditorCommands = function () {\n      function EditorCommands(editor) {\n        this.commands = {\n          state: {},\n          exec: {},\n          value: {}\n        };\n        this.editor = editor;\n        this.setupCommands(editor);\n      }\n      EditorCommands.prototype.execCommand = function (command, ui, value, args) {\n        var func, state = false;\n        var self = this;\n        if (self.editor.removed) {\n          return;\n        }\n        if (command.toLowerCase() !== 'mcefocus') {\n          if (!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(command) && (!args || !args.skip_focus)) {\n            self.editor.focus();\n          } else {\n            restore(self.editor);\n          }\n        }\n        args = self.editor.fire('BeforeExecCommand', {\n          command: command,\n          ui: ui,\n          value: value\n        });\n        if (args.isDefaultPrevented()) {\n          return false;\n        }\n        var customCommand = command.toLowerCase();\n        if (func = self.commands.exec[customCommand]) {\n          func(customCommand, ui, value);\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        each$4(this.editor.plugins, function (p) {\n          if (p.execCommand && p.execCommand(command, ui, value)) {\n            self.editor.fire('ExecCommand', {\n              command: command,\n              ui: ui,\n              value: value\n            });\n            state = true;\n            return false;\n          }\n        });\n        if (state) {\n          return state;\n        }\n        if (self.editor.theme && self.editor.theme.execCommand && self.editor.theme.execCommand(command, ui, value)) {\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        try {\n          state = self.editor.getDoc().execCommand(command, ui, value);\n        } catch (ex) {\n        }\n        if (state) {\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        return false;\n      };\n      EditorCommands.prototype.queryCommandState = function (command) {\n        var func;\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = this.commands.state[command]) {\n          return func(command);\n        }\n        try {\n          return this.editor.getDoc().queryCommandState(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      EditorCommands.prototype.queryCommandValue = function (command) {\n        var func;\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = this.commands.value[command]) {\n          return func(command);\n        }\n        try {\n          return this.editor.getDoc().queryCommandValue(command);\n        } catch (ex) {\n        }\n      };\n      EditorCommands.prototype.addCommands = function (commandList, type) {\n        if (type === void 0) {\n          type = 'exec';\n        }\n        var self = this;\n        each$4(commandList, function (callback, command) {\n          each$4(command.toLowerCase().split(','), function (command) {\n            self.commands[type][command] = callback;\n          });\n        });\n      };\n      EditorCommands.prototype.addCommand = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.exec[command] = function (command, ui, value, args) {\n          return callback.call(scope || _this.editor, ui, value, args);\n        };\n      };\n      EditorCommands.prototype.queryCommandSupported = function (command) {\n        command = command.toLowerCase();\n        if (this.commands.exec[command]) {\n          return true;\n        }\n        try {\n          return this.editor.getDoc().queryCommandSupported(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      EditorCommands.prototype.addQueryStateHandler = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.state[command] = function () {\n          return callback.call(scope || _this.editor);\n        };\n      };\n      EditorCommands.prototype.addQueryValueHandler = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.value[command] = function () {\n          return callback.call(scope || _this.editor);\n        };\n      };\n      EditorCommands.prototype.hasCustomCommand = function (command) {\n        command = command.toLowerCase();\n        return !!this.commands.exec[command];\n      };\n      EditorCommands.prototype.execNativeCommand = function (command, ui, value) {\n        if (ui === undefined) {\n          ui = false;\n        }\n        if (value === undefined) {\n          value = null;\n        }\n        return this.editor.getDoc().execCommand(command, ui, value);\n      };\n      EditorCommands.prototype.isFormatMatch = function (name) {\n        return this.editor.formatter.match(name);\n      };\n      EditorCommands.prototype.toggleFormat = function (name, value) {\n        this.editor.formatter.toggle(name, value);\n        this.editor.nodeChanged();\n      };\n      EditorCommands.prototype.storeSelection = function (type) {\n        this.selectionBookmark = this.editor.selection.getBookmark(type);\n      };\n      EditorCommands.prototype.restoreSelection = function () {\n        this.editor.selection.moveToBookmark(this.selectionBookmark);\n      };\n      EditorCommands.prototype.setupCommands = function (editor) {\n        var self = this;\n        this.addCommands({\n          'mceResetDesignMode,mceBeginUndoLevel': noop,\n          'mceEndUndoLevel,mceAddUndoLevel': function () {\n            editor.undoManager.add();\n          },\n          'mceFocus': function (_command, _ui, value) {\n            focus(editor, value);\n          },\n          'Cut,Copy,Paste': function (command) {\n            var doc = editor.getDoc();\n            var failed;\n            try {\n              self.execNativeCommand(command);\n            } catch (ex) {\n              failed = true;\n            }\n            if (command === 'paste' && !doc.queryCommandEnabled(command)) {\n              failed = true;\n            }\n            if (failed || !doc.queryCommandSupported(command)) {\n              var msg = editor.translate('Your browser doesn\\'t support direct access to the clipboard. ' + 'Please use the Ctrl+X/C/V keyboard shortcuts instead.');\n              if (Env.mac) {\n                msg = msg.replace(/Ctrl\\+/g, '\\u2318+');\n              }\n              editor.notificationManager.open({\n                text: msg,\n                type: 'error'\n              });\n            }\n          },\n          'unlink': function () {\n            if (editor.selection.isCollapsed()) {\n              var elm = editor.dom.getParent(editor.selection.getStart(), 'a');\n              if (elm) {\n                editor.dom.remove(elm, true);\n              }\n              return;\n            }\n            editor.formatter.remove('link');\n          },\n          'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone': function (command) {\n            var align = command.substring(7);\n            if (align === 'full') {\n              align = 'justify';\n            }\n            each$4('left,center,right,justify'.split(','), function (name) {\n              if (align !== name) {\n                editor.formatter.remove('align' + name);\n              }\n            });\n            if (align !== 'none') {\n              self.toggleFormat('align' + align);\n            }\n          },\n          'InsertUnorderedList,InsertOrderedList': function (command) {\n            var listParent;\n            self.execNativeCommand(command);\n            var listElm = editor.dom.getParent(editor.selection.getNode(), 'ol,ul');\n            if (listElm) {\n              listParent = listElm.parentNode;\n              if (/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)) {\n                self.storeSelection();\n                editor.dom.split(listParent, listElm);\n                self.restoreSelection();\n              }\n            }\n          },\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n            self.toggleFormat(command);\n          },\n          'ForeColor,HiliteColor': function (command, ui, value) {\n            self.toggleFormat(command, { value: value });\n          },\n          'FontName': function (command, ui, value) {\n            fontNameAction(editor, value);\n          },\n          'FontSize': function (command, ui, value) {\n            fontSizeAction(editor, value);\n          },\n          'LineHeight': function (command, ui, value) {\n            lineHeightAction(editor, value);\n          },\n          'Lang': function (command, ui, lang) {\n            self.toggleFormat(command, {\n              value: lang.code,\n              customValue: lang.customCode\n            });\n          },\n          'RemoveFormat': function (command) {\n            editor.formatter.remove(command);\n          },\n          'mceBlockQuote': function () {\n            self.toggleFormat('blockquote');\n          },\n          'FormatBlock': function (command, ui, value) {\n            return self.toggleFormat(value || 'p');\n          },\n          'mceCleanup': function () {\n            var bookmark = editor.selection.getBookmark();\n            editor.setContent(editor.getContent());\n            editor.selection.moveToBookmark(bookmark);\n          },\n          'mceRemoveNode': function (command, ui, value) {\n            var node = value || editor.selection.getNode();\n            if (node !== editor.getBody()) {\n              self.storeSelection();\n              editor.dom.remove(node, true);\n              self.restoreSelection();\n            }\n          },\n          'mceSelectNodeDepth': function (command, ui, value) {\n            var counter = 0;\n            editor.dom.getParent(editor.selection.getNode(), function (node) {\n              if (node.nodeType === 1 && counter++ === value) {\n                editor.selection.select(node);\n                return false;\n              }\n            }, editor.getBody());\n          },\n          'mceSelectNode': function (command, ui, value) {\n            editor.selection.select(value);\n          },\n          'mceInsertContent': function (command, ui, value) {\n            insertAtCaret(editor, value);\n          },\n          'mceInsertRawHTML': function (command, ui, value) {\n            editor.selection.setContent('tiny_mce_marker');\n            var content = editor.getContent();\n            editor.setContent(content.replace(/tiny_mce_marker/g, function () {\n              return value;\n            }));\n          },\n          'mceInsertNewLine': function (command, ui, value) {\n            insert(editor, value);\n          },\n          'mceToggleFormat': function (command, ui, value) {\n            self.toggleFormat(value);\n          },\n          'mceSetContent': function (command, ui, value) {\n            editor.setContent(value);\n          },\n          'Indent,Outdent': function (command) {\n            handle(editor, command);\n          },\n          'mceRepaint': noop,\n          'InsertHorizontalRule': function () {\n            editor.execCommand('mceInsertContent', false, '<hr />');\n          },\n          'mceToggleVisualAid': function () {\n            editor.hasVisual = !editor.hasVisual;\n            editor.addVisual();\n          },\n          'mceReplaceContent': function (command, ui, value) {\n            editor.execCommand('mceInsertContent', false, value.replace(/\\{\\$selection\\}/g, editor.selection.getContent({ format: 'text' })));\n          },\n          'mceInsertLink': function (command, ui, value) {\n            if (typeof value === 'string') {\n              value = { href: value };\n            }\n            var anchor = editor.dom.getParent(editor.selection.getNode(), 'a');\n            value.href = value.href.replace(/ /g, '%20');\n            if (!anchor || !value.href) {\n              editor.formatter.remove('link');\n            }\n            if (value.href) {\n              editor.formatter.apply('link', value, anchor);\n            }\n          },\n          'selectAll': function () {\n            var editingHost = editor.dom.getParent(editor.selection.getStart(), isContentEditableTrue$4);\n            if (editingHost) {\n              var rng = editor.dom.createRng();\n              rng.selectNodeContents(editingHost);\n              editor.selection.setRng(rng);\n            }\n          },\n          'mceNewDocument': function () {\n            editor.setContent('');\n          },\n          'InsertLineBreak': function (command, ui, value) {\n            insert$1(editor, value);\n            return true;\n          }\n        });\n        var alignStates = function (name) {\n          return function () {\n            var selection = editor.selection;\n            var nodes = selection.isCollapsed() ? [editor.dom.getParent(selection.getNode(), editor.dom.isBlock)] : selection.getSelectedBlocks();\n            var matches = map(nodes, function (node) {\n              return !!editor.formatter.matchNode(node, name);\n            });\n            return inArray(matches, true) !== -1;\n          };\n        };\n        self.addCommands({\n          'JustifyLeft': alignStates('alignleft'),\n          'JustifyCenter': alignStates('aligncenter'),\n          'JustifyRight': alignStates('alignright'),\n          'JustifyFull': alignStates('alignjustify'),\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n            return self.isFormatMatch(command);\n          },\n          'mceBlockQuote': function () {\n            return self.isFormatMatch('blockquote');\n          },\n          'Outdent': function () {\n            return canOutdent(editor);\n          },\n          'InsertUnorderedList,InsertOrderedList': function (command) {\n            var list = editor.dom.getParent(editor.selection.getNode(), 'ul,ol');\n            return list && (command === 'insertunorderedlist' && list.tagName === 'UL' || command === 'insertorderedlist' && list.tagName === 'OL');\n          }\n        }, 'state');\n        self.addCommands({\n          Undo: function () {\n            editor.undoManager.undo();\n          },\n          Redo: function () {\n            editor.undoManager.redo();\n          }\n        });\n        self.addQueryValueHandler('FontName', function () {\n          return fontNameQuery(editor);\n        }, this);\n        self.addQueryValueHandler('FontSize', function () {\n          return fontSizeQuery(editor);\n        }, this);\n        self.addQueryValueHandler('LineHeight', function () {\n          return lineHeightQuery(editor);\n        }, this);\n      };\n      return EditorCommands;\n    }();\n\n    var internalContentEditableAttr = 'data-mce-contenteditable';\n    var toggleClass = function (elm, cls, state) {\n      if (has(elm, cls) && state === false) {\n        remove$3(elm, cls);\n      } else if (state) {\n        add$1(elm, cls);\n      }\n    };\n    var setEditorCommandState = function (editor, cmd, state) {\n      try {\n        editor.getDoc().execCommand(cmd, false, String(state));\n      } catch (ex) {\n      }\n    };\n    var setContentEditable = function (elm, state) {\n      elm.dom.contentEditable = state ? 'true' : 'false';\n    };\n    var switchOffContentEditableTrue = function (elm) {\n      each$k(descendants(elm, '*[contenteditable=\"true\"]'), function (elm) {\n        set$1(elm, internalContentEditableAttr, 'true');\n        setContentEditable(elm, false);\n      });\n    };\n    var switchOnContentEditableTrue = function (elm) {\n      each$k(descendants(elm, '*[' + internalContentEditableAttr + '=\"true\"]'), function (elm) {\n        remove$6(elm, internalContentEditableAttr);\n        setContentEditable(elm, true);\n      });\n    };\n    var removeFakeSelection = function (editor) {\n      Optional.from(editor.selection.getNode()).each(function (elm) {\n        elm.removeAttribute('data-mce-selected');\n      });\n    };\n    var restoreFakeSelection = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var toggleReadOnly = function (editor, state) {\n      var body = SugarElement.fromDom(editor.getBody());\n      toggleClass(body, 'mce-content-readonly', state);\n      if (state) {\n        editor.selection.controlSelection.hideResizeRect();\n        editor._selectionOverrides.hideFakeCaret();\n        removeFakeSelection(editor);\n        editor.readonly = true;\n        setContentEditable(body, false);\n        switchOffContentEditableTrue(body);\n      } else {\n        editor.readonly = false;\n        setContentEditable(body, true);\n        switchOnContentEditableTrue(body);\n        setEditorCommandState(editor, 'StyleWithCSS', false);\n        setEditorCommandState(editor, 'enableInlineTableEditing', false);\n        setEditorCommandState(editor, 'enableObjectResizing', false);\n        if (hasEditorOrUiFocus(editor)) {\n          editor.focus();\n        }\n        restoreFakeSelection(editor);\n        editor.nodeChanged();\n      }\n    };\n    var isReadOnly = function (editor) {\n      return editor.readonly;\n    };\n    var registerFilters = function (editor) {\n      editor.parser.addAttributeFilter('contenteditable', function (nodes) {\n        if (isReadOnly(editor)) {\n          each$k(nodes, function (node) {\n            node.attr(internalContentEditableAttr, node.attr('contenteditable'));\n            node.attr('contenteditable', 'false');\n          });\n        }\n      });\n      editor.serializer.addAttributeFilter(internalContentEditableAttr, function (nodes) {\n        if (isReadOnly(editor)) {\n          each$k(nodes, function (node) {\n            node.attr('contenteditable', node.attr(internalContentEditableAttr));\n          });\n        }\n      });\n      editor.serializer.addTempAttr(internalContentEditableAttr);\n    };\n    var registerReadOnlyContentFilters = function (editor) {\n      if (editor.serializer) {\n        registerFilters(editor);\n      } else {\n        editor.on('PreInit', function () {\n          registerFilters(editor);\n        });\n      }\n    };\n    var isClickEvent = function (e) {\n      return e.type === 'click';\n    };\n    var getAnchorHrefOpt = function (editor, elm) {\n      var isRoot = function (elm) {\n        return eq(elm, SugarElement.fromDom(editor.getBody()));\n      };\n      return closest$2(elm, 'a', isRoot).bind(function (a) {\n        return getOpt(a, 'href');\n      });\n    };\n    var processReadonlyEvents = function (editor, e) {\n      if (isClickEvent(e) && !VK.metaKeyPressed(e)) {\n        var elm = SugarElement.fromDom(e.target);\n        getAnchorHrefOpt(editor, elm).each(function (href) {\n          e.preventDefault();\n          if (/^#/.test(href)) {\n            var targetEl = editor.dom.select(href + ',[name=\"' + removeLeading(href, '#') + '\"]');\n            if (targetEl.length) {\n              editor.selection.scrollIntoView(targetEl[0], true);\n            }\n          } else {\n            window.open(href, '_blank', 'rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes');\n          }\n        });\n      }\n    };\n    var registerReadOnlySelectionBlockers = function (editor) {\n      editor.on('ShowCaret', function (e) {\n        if (isReadOnly(editor)) {\n          e.preventDefault();\n        }\n      });\n      editor.on('ObjectSelected', function (e) {\n        if (isReadOnly(editor)) {\n          e.preventDefault();\n        }\n      });\n    };\n\n    var nativeEvents = Tools.makeMap('focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange ' + 'mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover ' + 'draggesture dragdrop drop drag submit ' + 'compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel', ' ');\n    var EventDispatcher = function () {\n      function EventDispatcher(settings) {\n        this.bindings = {};\n        this.settings = settings || {};\n        this.scope = this.settings.scope || this;\n        this.toggleEvent = this.settings.toggleEvent || never;\n      }\n      EventDispatcher.isNative = function (name) {\n        return !!nativeEvents[name.toLowerCase()];\n      };\n      EventDispatcher.prototype.fire = function (name, args) {\n        var lcName = name.toLowerCase();\n        var event = normalize$3(lcName, args || {}, this.scope);\n        if (this.settings.beforeFire) {\n          this.settings.beforeFire(event);\n        }\n        var handlers = this.bindings[lcName];\n        if (handlers) {\n          for (var i = 0, l = handlers.length; i < l; i++) {\n            var callback = handlers[i];\n            if (callback.removed) {\n              continue;\n            }\n            if (callback.once) {\n              this.off(lcName, callback.func);\n            }\n            if (event.isImmediatePropagationStopped()) {\n              return event;\n            }\n            if (callback.func.call(this.scope, event) === false) {\n              event.preventDefault();\n              return event;\n            }\n          }\n        }\n        return event;\n      };\n      EventDispatcher.prototype.on = function (name, callback, prepend, extra) {\n        if (callback === false) {\n          callback = never;\n        }\n        if (callback) {\n          var wrappedCallback = {\n            func: callback,\n            removed: false\n          };\n          if (extra) {\n            Tools.extend(wrappedCallback, extra);\n          }\n          var names = name.toLowerCase().split(' ');\n          var i = names.length;\n          while (i--) {\n            var currentName = names[i];\n            var handlers = this.bindings[currentName];\n            if (!handlers) {\n              handlers = [];\n              this.toggleEvent(currentName, true);\n            }\n            if (prepend) {\n              handlers = __spreadArray([wrappedCallback], handlers, true);\n            } else {\n              handlers = __spreadArray(__spreadArray([], handlers, true), [wrappedCallback], false);\n            }\n            this.bindings[currentName] = handlers;\n          }\n        }\n        return this;\n      };\n      EventDispatcher.prototype.off = function (name, callback) {\n        var _this = this;\n        if (name) {\n          var names = name.toLowerCase().split(' ');\n          var i = names.length;\n          while (i--) {\n            var currentName = names[i];\n            var handlers = this.bindings[currentName];\n            if (!currentName) {\n              each$j(this.bindings, function (_value, bindingName) {\n                _this.toggleEvent(bindingName, false);\n                delete _this.bindings[bindingName];\n              });\n              return this;\n            }\n            if (handlers) {\n              if (!callback) {\n                handlers.length = 0;\n              } else {\n                var filteredHandlers = partition(handlers, function (handler) {\n                  return handler.func === callback;\n                });\n                handlers = filteredHandlers.fail;\n                this.bindings[currentName] = handlers;\n                each$k(filteredHandlers.pass, function (handler) {\n                  handler.removed = true;\n                });\n              }\n              if (!handlers.length) {\n                this.toggleEvent(name, false);\n                delete this.bindings[currentName];\n              }\n            }\n          }\n        } else {\n          each$j(this.bindings, function (_value, name) {\n            _this.toggleEvent(name, false);\n          });\n          this.bindings = {};\n        }\n        return this;\n      };\n      EventDispatcher.prototype.once = function (name, callback, prepend) {\n        return this.on(name, callback, prepend, { once: true });\n      };\n      EventDispatcher.prototype.has = function (name) {\n        name = name.toLowerCase();\n        return !(!this.bindings[name] || this.bindings[name].length === 0);\n      };\n      return EventDispatcher;\n    }();\n\n    var getEventDispatcher = function (obj) {\n      if (!obj._eventDispatcher) {\n        obj._eventDispatcher = new EventDispatcher({\n          scope: obj,\n          toggleEvent: function (name, state) {\n            if (EventDispatcher.isNative(name) && obj.toggleNativeEvent) {\n              obj.toggleNativeEvent(name, state);\n            }\n          }\n        });\n      }\n      return obj._eventDispatcher;\n    };\n    var Observable = {\n      fire: function (name, args, bubble) {\n        var self = this;\n        if (self.removed && name !== 'remove' && name !== 'detach') {\n          return args;\n        }\n        var dispatcherArgs = getEventDispatcher(self).fire(name, args);\n        if (bubble !== false && self.parent) {\n          var parent_1 = self.parent();\n          while (parent_1 && !dispatcherArgs.isPropagationStopped()) {\n            parent_1.fire(name, dispatcherArgs, false);\n            parent_1 = parent_1.parent();\n          }\n        }\n        return dispatcherArgs;\n      },\n      on: function (name, callback, prepend) {\n        return getEventDispatcher(this).on(name, callback, prepend);\n      },\n      off: function (name, callback) {\n        return getEventDispatcher(this).off(name, callback);\n      },\n      once: function (name, callback) {\n        return getEventDispatcher(this).once(name, callback);\n      },\n      hasEventListeners: function (name) {\n        return getEventDispatcher(this).has(name);\n      }\n    };\n\n    var DOM$2 = DOMUtils.DOM;\n    var customEventRootDelegates;\n    var getEventTarget = function (editor, eventName) {\n      if (eventName === 'selectionchange') {\n        return editor.getDoc();\n      }\n      if (!editor.inline && /^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)) {\n        return editor.getDoc().documentElement;\n      }\n      var eventRoot = getEventRoot(editor);\n      if (eventRoot) {\n        if (!editor.eventRoot) {\n          editor.eventRoot = DOM$2.select(eventRoot)[0];\n        }\n        return editor.eventRoot;\n      }\n      return editor.getBody();\n    };\n    var isListening = function (editor) {\n      return !editor.hidden && !isReadOnly(editor);\n    };\n    var fireEvent = function (editor, eventName, e) {\n      if (isListening(editor)) {\n        editor.fire(eventName, e);\n      } else if (isReadOnly(editor)) {\n        processReadonlyEvents(editor, e);\n      }\n    };\n    var bindEventDelegate = function (editor, eventName) {\n      var delegate;\n      if (!editor.delegates) {\n        editor.delegates = {};\n      }\n      if (editor.delegates[eventName] || editor.removed) {\n        return;\n      }\n      var eventRootElm = getEventTarget(editor, eventName);\n      if (getEventRoot(editor)) {\n        if (!customEventRootDelegates) {\n          customEventRootDelegates = {};\n          editor.editorManager.on('removeEditor', function () {\n            if (!editor.editorManager.activeEditor) {\n              if (customEventRootDelegates) {\n                each$j(customEventRootDelegates, function (_value, name) {\n                  editor.dom.unbind(getEventTarget(editor, name));\n                });\n                customEventRootDelegates = null;\n              }\n            }\n          });\n        }\n        if (customEventRootDelegates[eventName]) {\n          return;\n        }\n        delegate = function (e) {\n          var target = e.target;\n          var editors = editor.editorManager.get();\n          var i = editors.length;\n          while (i--) {\n            var body = editors[i].getBody();\n            if (body === target || DOM$2.isChildOf(target, body)) {\n              fireEvent(editors[i], eventName, e);\n            }\n          }\n        };\n        customEventRootDelegates[eventName] = delegate;\n        DOM$2.bind(eventRootElm, eventName, delegate);\n      } else {\n        delegate = function (e) {\n          fireEvent(editor, eventName, e);\n        };\n        DOM$2.bind(eventRootElm, eventName, delegate);\n        editor.delegates[eventName] = delegate;\n      }\n    };\n    var EditorObservable = __assign(__assign({}, Observable), {\n      bindPendingEventDelegates: function () {\n        var self = this;\n        Tools.each(self._pendingNativeEvents, function (name) {\n          bindEventDelegate(self, name);\n        });\n      },\n      toggleNativeEvent: function (name, state) {\n        var self = this;\n        if (name === 'focus' || name === 'blur') {\n          return;\n        }\n        if (self.removed) {\n          return;\n        }\n        if (state) {\n          if (self.initialized) {\n            bindEventDelegate(self, name);\n          } else {\n            if (!self._pendingNativeEvents) {\n              self._pendingNativeEvents = [name];\n            } else {\n              self._pendingNativeEvents.push(name);\n            }\n          }\n        } else if (self.initialized) {\n          self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\n          delete self.delegates[name];\n        }\n      },\n      unbindAllNativeEvents: function () {\n        var self = this;\n        var body = self.getBody();\n        var dom = self.dom;\n        if (self.delegates) {\n          each$j(self.delegates, function (value, name) {\n            self.dom.unbind(getEventTarget(self, name), name, value);\n          });\n          delete self.delegates;\n        }\n        if (!self.inline && body && dom) {\n          body.onload = null;\n          dom.unbind(self.getWin());\n          dom.unbind(self.getDoc());\n        }\n        if (dom) {\n          dom.unbind(body);\n          dom.unbind(self.getContainer());\n        }\n      }\n    });\n\n    var defaultModes = [\n      'design',\n      'readonly'\n    ];\n    var switchToMode = function (editor, activeMode, availableModes, mode) {\n      var oldMode = availableModes[activeMode.get()];\n      var newMode = availableModes[mode];\n      try {\n        newMode.activate();\n      } catch (e) {\n        console.error('problem while activating editor mode ' + mode + ':', e);\n        return;\n      }\n      oldMode.deactivate();\n      if (oldMode.editorReadOnly !== newMode.editorReadOnly) {\n        toggleReadOnly(editor, newMode.editorReadOnly);\n      }\n      activeMode.set(mode);\n      fireSwitchMode(editor, mode);\n    };\n    var setMode = function (editor, availableModes, activeMode, mode) {\n      if (mode === activeMode.get()) {\n        return;\n      } else if (!has$2(availableModes, mode)) {\n        throw new Error('Editor mode \\'' + mode + '\\' is invalid');\n      }\n      if (editor.initialized) {\n        switchToMode(editor, activeMode, availableModes, mode);\n      } else {\n        editor.on('init', function () {\n          return switchToMode(editor, activeMode, availableModes, mode);\n        });\n      }\n    };\n    var registerMode = function (availableModes, mode, api) {\n      var _a;\n      if (contains$3(defaultModes, mode)) {\n        throw new Error('Cannot override default mode ' + mode);\n      }\n      return __assign(__assign({}, availableModes), (_a = {}, _a[mode] = __assign(__assign({}, api), {\n        deactivate: function () {\n          try {\n            api.deactivate();\n          } catch (e) {\n            console.error('problem while deactivating editor mode ' + mode + ':', e);\n          }\n        }\n      }), _a));\n    };\n\n    var create$4 = function (editor) {\n      var activeMode = Cell('design');\n      var availableModes = Cell({\n        design: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: false\n        },\n        readonly: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: true\n        }\n      });\n      registerReadOnlyContentFilters(editor);\n      registerReadOnlySelectionBlockers(editor);\n      return {\n        isReadOnly: function () {\n          return isReadOnly(editor);\n        },\n        set: function (mode) {\n          return setMode(editor, availableModes.get(), activeMode, mode);\n        },\n        get: function () {\n          return activeMode.get();\n        },\n        register: function (mode, api) {\n          availableModes.set(registerMode(availableModes.get(), mode, api));\n        }\n      };\n    };\n\n    var each$3 = Tools.each, explode$1 = Tools.explode;\n    var keyCodeLookup = {\n      f1: 112,\n      f2: 113,\n      f3: 114,\n      f4: 115,\n      f5: 116,\n      f6: 117,\n      f7: 118,\n      f8: 119,\n      f9: 120,\n      f10: 121,\n      f11: 122,\n      f12: 123\n    };\n    var modifierNames = Tools.makeMap('alt,ctrl,shift,meta,access');\n    var parseShortcut = function (pattern) {\n      var key;\n      var shortcut = {};\n      each$3(explode$1(pattern.toLowerCase(), '+'), function (value) {\n        if (value in modifierNames) {\n          shortcut[value] = true;\n        } else {\n          if (/^[0-9]{2,}$/.test(value)) {\n            shortcut.keyCode = parseInt(value, 10);\n          } else {\n            shortcut.charCode = value.charCodeAt(0);\n            shortcut.keyCode = keyCodeLookup[value] || value.toUpperCase().charCodeAt(0);\n          }\n        }\n      });\n      var id = [shortcut.keyCode];\n      for (key in modifierNames) {\n        if (shortcut[key]) {\n          id.push(key);\n        } else {\n          shortcut[key] = false;\n        }\n      }\n      shortcut.id = id.join(',');\n      if (shortcut.access) {\n        shortcut.alt = true;\n        if (Env.mac) {\n          shortcut.ctrl = true;\n        } else {\n          shortcut.shift = true;\n        }\n      }\n      if (shortcut.meta) {\n        if (Env.mac) {\n          shortcut.meta = true;\n        } else {\n          shortcut.ctrl = true;\n          shortcut.meta = false;\n        }\n      }\n      return shortcut;\n    };\n    var Shortcuts = function () {\n      function Shortcuts(editor) {\n        this.shortcuts = {};\n        this.pendingPatterns = [];\n        this.editor = editor;\n        var self = this;\n        editor.on('keyup keypress keydown', function (e) {\n          if ((self.hasModifier(e) || self.isFunctionKey(e)) && !e.isDefaultPrevented()) {\n            each$3(self.shortcuts, function (shortcut) {\n              if (self.matchShortcut(e, shortcut)) {\n                self.pendingPatterns = shortcut.subpatterns.slice(0);\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(shortcut);\n                }\n                return true;\n              }\n            });\n            if (self.matchShortcut(e, self.pendingPatterns[0])) {\n              if (self.pendingPatterns.length === 1) {\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(self.pendingPatterns[0]);\n                }\n              }\n              self.pendingPatterns.shift();\n            }\n          }\n        });\n      }\n      Shortcuts.prototype.add = function (pattern, desc, cmdFunc, scope) {\n        var self = this;\n        var func = self.normalizeCommandFunc(cmdFunc);\n        each$3(explode$1(Tools.trim(pattern)), function (pattern) {\n          var shortcut = self.createShortcut(pattern, desc, func, scope);\n          self.shortcuts[shortcut.id] = shortcut;\n        });\n        return true;\n      };\n      Shortcuts.prototype.remove = function (pattern) {\n        var shortcut = this.createShortcut(pattern);\n        if (this.shortcuts[shortcut.id]) {\n          delete this.shortcuts[shortcut.id];\n          return true;\n        }\n        return false;\n      };\n      Shortcuts.prototype.normalizeCommandFunc = function (cmdFunc) {\n        var self = this;\n        var cmd = cmdFunc;\n        if (typeof cmd === 'string') {\n          return function () {\n            self.editor.execCommand(cmd, false, null);\n          };\n        } else if (Tools.isArray(cmd)) {\n          return function () {\n            self.editor.execCommand(cmd[0], cmd[1], cmd[2]);\n          };\n        } else {\n          return cmd;\n        }\n      };\n      Shortcuts.prototype.createShortcut = function (pattern, desc, cmdFunc, scope) {\n        var shortcuts = Tools.map(explode$1(pattern, '>'), parseShortcut);\n        shortcuts[shortcuts.length - 1] = Tools.extend(shortcuts[shortcuts.length - 1], {\n          func: cmdFunc,\n          scope: scope || this.editor\n        });\n        return Tools.extend(shortcuts[0], {\n          desc: this.editor.translate(desc),\n          subpatterns: shortcuts.slice(1)\n        });\n      };\n      Shortcuts.prototype.hasModifier = function (e) {\n        return e.altKey || e.ctrlKey || e.metaKey;\n      };\n      Shortcuts.prototype.isFunctionKey = function (e) {\n        return e.type === 'keydown' && e.keyCode >= 112 && e.keyCode <= 123;\n      };\n      Shortcuts.prototype.matchShortcut = function (e, shortcut) {\n        if (!shortcut) {\n          return false;\n        }\n        if (shortcut.ctrl !== e.ctrlKey || shortcut.meta !== e.metaKey) {\n          return false;\n        }\n        if (shortcut.alt !== e.altKey || shortcut.shift !== e.shiftKey) {\n          return false;\n        }\n        if (e.keyCode === shortcut.keyCode || e.charCode && e.charCode === shortcut.charCode) {\n          e.preventDefault();\n          return true;\n        }\n        return false;\n      };\n      Shortcuts.prototype.executeShortcutAction = function (shortcut) {\n        return shortcut.func ? shortcut.func.call(shortcut.scope) : null;\n      };\n      return Shortcuts;\n    }();\n\n    var create$3 = function () {\n      var buttons = {};\n      var menuItems = {};\n      var popups = {};\n      var icons = {};\n      var contextMenus = {};\n      var contextToolbars = {};\n      var sidebars = {};\n      var add = function (collection, type) {\n        return function (name, spec) {\n          return collection[name.toLowerCase()] = __assign(__assign({}, spec), { type: type });\n        };\n      };\n      var addIcon = function (name, svgData) {\n        return icons[name.toLowerCase()] = svgData;\n      };\n      return {\n        addButton: add(buttons, 'button'),\n        addGroupToolbarButton: add(buttons, 'grouptoolbarbutton'),\n        addToggleButton: add(buttons, 'togglebutton'),\n        addMenuButton: add(buttons, 'menubutton'),\n        addSplitButton: add(buttons, 'splitbutton'),\n        addMenuItem: add(menuItems, 'menuitem'),\n        addNestedMenuItem: add(menuItems, 'nestedmenuitem'),\n        addToggleMenuItem: add(menuItems, 'togglemenuitem'),\n        addAutocompleter: add(popups, 'autocompleter'),\n        addContextMenu: add(contextMenus, 'contextmenu'),\n        addContextToolbar: add(contextToolbars, 'contexttoolbar'),\n        addContextForm: add(contextToolbars, 'contextform'),\n        addSidebar: add(sidebars, 'sidebar'),\n        addIcon: addIcon,\n        getAll: function () {\n          return {\n            buttons: buttons,\n            menuItems: menuItems,\n            icons: icons,\n            popups: popups,\n            contextMenus: contextMenus,\n            contextToolbars: contextToolbars,\n            sidebars: sidebars\n          };\n        }\n      };\n    };\n\n    var registry = function () {\n      var bridge = create$3();\n      return {\n        addAutocompleter: bridge.addAutocompleter,\n        addButton: bridge.addButton,\n        addContextForm: bridge.addContextForm,\n        addContextMenu: bridge.addContextMenu,\n        addContextToolbar: bridge.addContextToolbar,\n        addIcon: bridge.addIcon,\n        addMenuButton: bridge.addMenuButton,\n        addMenuItem: bridge.addMenuItem,\n        addNestedMenuItem: bridge.addNestedMenuItem,\n        addSidebar: bridge.addSidebar,\n        addSplitButton: bridge.addSplitButton,\n        addToggleButton: bridge.addToggleButton,\n        addGroupToolbarButton: bridge.addGroupToolbarButton,\n        addToggleMenuItem: bridge.addToggleMenuItem,\n        getAll: bridge.getAll\n      };\n    };\n\n    var DOM$1 = DOMUtils.DOM;\n    var extend$3 = Tools.extend, each$2 = Tools.each;\n    var resolve = Tools.resolve;\n    var ie = Env.ie;\n    var Editor = function () {\n      function Editor(id, settings, editorManager) {\n        var _this = this;\n        this.plugins = {};\n        this.contentCSS = [];\n        this.contentStyles = [];\n        this.loadedCSS = {};\n        this.isNotDirty = false;\n        this.editorManager = editorManager;\n        this.documentBaseUrl = editorManager.documentBaseURL;\n        extend$3(this, EditorObservable);\n        this.settings = getEditorSettings(this, id, this.documentBaseUrl, editorManager.defaultSettings, settings);\n        if (this.settings.suffix) {\n          editorManager.suffix = this.settings.suffix;\n        }\n        this.suffix = editorManager.suffix;\n        if (this.settings.base_url) {\n          editorManager._setBaseUrl(this.settings.base_url);\n        }\n        this.baseUri = editorManager.baseURI;\n        if (this.settings.referrer_policy) {\n          ScriptLoader.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy);\n          DOMUtils.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy);\n        }\n        AddOnManager.languageLoad = this.settings.language_load;\n        AddOnManager.baseURL = editorManager.baseURL;\n        this.id = id;\n        this.setDirty(false);\n        this.documentBaseURI = new URI(this.settings.document_base_url, { base_uri: this.baseUri });\n        this.baseURI = this.baseUri;\n        this.inline = !!this.settings.inline;\n        this.shortcuts = new Shortcuts(this);\n        this.editorCommands = new EditorCommands(this);\n        if (this.settings.cache_suffix) {\n          Env.cacheSuffix = this.settings.cache_suffix.replace(/^[\\?\\&]+/, '');\n        }\n        this.ui = {\n          registry: registry(),\n          styleSheetLoader: undefined,\n          show: noop,\n          hide: noop,\n          enable: noop,\n          disable: noop,\n          isDisabled: never\n        };\n        var self = this;\n        var modeInstance = create$4(self);\n        this.mode = modeInstance;\n        this.setMode = modeInstance.set;\n        editorManager.fire('SetupEditor', { editor: this });\n        this.execCallback('setup', this);\n        this.$ = DomQuery.overrideDefaults(function () {\n          return {\n            context: _this.inline ? _this.getBody() : _this.getDoc(),\n            element: _this.getBody()\n          };\n        });\n      }\n      Editor.prototype.render = function () {\n        render(this);\n      };\n      Editor.prototype.focus = function (skipFocus) {\n        this.execCommand('mceFocus', false, skipFocus);\n      };\n      Editor.prototype.hasFocus = function () {\n        return hasFocus(this);\n      };\n      Editor.prototype.execCallback = function (name) {\n        var x = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          x[_i - 1] = arguments[_i];\n        }\n        var self = this;\n        var callback = self.settings[name], scope;\n        if (!callback) {\n          return;\n        }\n        if (self.callbackLookup && (scope = self.callbackLookup[name])) {\n          callback = scope.func;\n          scope = scope.scope;\n        }\n        if (typeof callback === 'string') {\n          scope = callback.replace(/\\.\\w+$/, '');\n          scope = scope ? resolve(scope) : 0;\n          callback = resolve(callback);\n          self.callbackLookup = self.callbackLookup || {};\n          self.callbackLookup[name] = {\n            func: callback,\n            scope: scope\n          };\n        }\n        return callback.apply(scope || self, x);\n      };\n      Editor.prototype.translate = function (text) {\n        return I18n.translate(text);\n      };\n      Editor.prototype.getParam = function (name, defaultVal, type) {\n        return getParam(this, name, defaultVal, type);\n      };\n      Editor.prototype.hasPlugin = function (name, loaded) {\n        var hasPlugin = contains$3(getPlugins(this).split(/[ ,]/), name);\n        if (hasPlugin) {\n          return loaded ? PluginManager.get(name) !== undefined : true;\n        } else {\n          return false;\n        }\n      };\n      Editor.prototype.nodeChanged = function (args) {\n        this._nodeChangeDispatcher.nodeChanged(args);\n      };\n      Editor.prototype.addCommand = function (name, callback, scope) {\n        this.editorCommands.addCommand(name, callback, scope);\n      };\n      Editor.prototype.addQueryStateHandler = function (name, callback, scope) {\n        this.editorCommands.addQueryStateHandler(name, callback, scope);\n      };\n      Editor.prototype.addQueryValueHandler = function (name, callback, scope) {\n        this.editorCommands.addQueryValueHandler(name, callback, scope);\n      };\n      Editor.prototype.addShortcut = function (pattern, desc, cmdFunc, scope) {\n        this.shortcuts.add(pattern, desc, cmdFunc, scope);\n      };\n      Editor.prototype.execCommand = function (cmd, ui, value, args) {\n        return this.editorCommands.execCommand(cmd, ui, value, args);\n      };\n      Editor.prototype.queryCommandState = function (cmd) {\n        return this.editorCommands.queryCommandState(cmd);\n      };\n      Editor.prototype.queryCommandValue = function (cmd) {\n        return this.editorCommands.queryCommandValue(cmd);\n      };\n      Editor.prototype.queryCommandSupported = function (cmd) {\n        return this.editorCommands.queryCommandSupported(cmd);\n      };\n      Editor.prototype.show = function () {\n        var self = this;\n        if (self.hidden) {\n          self.hidden = false;\n          if (self.inline) {\n            self.getBody().contentEditable = 'true';\n          } else {\n            DOM$1.show(self.getContainer());\n            DOM$1.hide(self.id);\n          }\n          self.load();\n          self.fire('show');\n        }\n      };\n      Editor.prototype.hide = function () {\n        var self = this, doc = self.getDoc();\n        if (!self.hidden) {\n          if (ie && doc && !self.inline) {\n            doc.execCommand('SelectAll');\n          }\n          self.save();\n          if (self.inline) {\n            self.getBody().contentEditable = 'false';\n            if (self === self.editorManager.focusedEditor) {\n              self.editorManager.focusedEditor = null;\n            }\n          } else {\n            DOM$1.hide(self.getContainer());\n            DOM$1.setStyle(self.id, 'display', self.orgDisplay);\n          }\n          self.hidden = true;\n          self.fire('hide');\n        }\n      };\n      Editor.prototype.isHidden = function () {\n        return !!this.hidden;\n      };\n      Editor.prototype.setProgressState = function (state, time) {\n        this.fire('ProgressState', {\n          state: state,\n          time: time\n        });\n      };\n      Editor.prototype.load = function (args) {\n        var self = this;\n        var elm = self.getElement(), html;\n        if (self.removed) {\n          return '';\n        }\n        if (elm) {\n          args = args || {};\n          args.load = true;\n          var value = isTextareaOrInput(elm) ? elm.value : elm.innerHTML;\n          html = self.setContent(value, args);\n          args.element = elm;\n          if (!args.no_events) {\n            self.fire('LoadContent', args);\n          }\n          args.element = elm = null;\n          return html;\n        }\n      };\n      Editor.prototype.save = function (args) {\n        var self = this;\n        var elm = self.getElement(), html, form;\n        if (!elm || !self.initialized || self.removed) {\n          return;\n        }\n        args = args || {};\n        args.save = true;\n        args.element = elm;\n        html = args.content = self.getContent(args);\n        if (!args.no_events) {\n          self.fire('SaveContent', args);\n        }\n        if (args.format === 'raw') {\n          self.fire('RawSaveContent', args);\n        }\n        html = args.content;\n        if (!isTextareaOrInput(elm)) {\n          if (args.is_removing || !self.inline) {\n            elm.innerHTML = html;\n          }\n          if (form = DOM$1.getParent(self.id, 'form')) {\n            each$2(form.elements, function (elm) {\n              if (elm.name === self.id) {\n                elm.value = html;\n                return false;\n              }\n            });\n          }\n        } else {\n          elm.value = html;\n        }\n        args.element = elm = null;\n        if (args.set_dirty !== false) {\n          self.setDirty(false);\n        }\n        return html;\n      };\n      Editor.prototype.setContent = function (content, args) {\n        return setContent(this, content, args);\n      };\n      Editor.prototype.getContent = function (args) {\n        return getContent(this, args);\n      };\n      Editor.prototype.insertContent = function (content, args) {\n        if (args) {\n          content = extend$3({ content: content }, args);\n        }\n        this.execCommand('mceInsertContent', false, content);\n      };\n      Editor.prototype.resetContent = function (initialContent) {\n        if (initialContent === undefined) {\n          setContent(this, this.startContent, { format: 'raw' });\n        } else {\n          setContent(this, initialContent);\n        }\n        this.undoManager.reset();\n        this.setDirty(false);\n        this.nodeChanged();\n      };\n      Editor.prototype.isDirty = function () {\n        return !this.isNotDirty;\n      };\n      Editor.prototype.setDirty = function (state) {\n        var oldState = !this.isNotDirty;\n        this.isNotDirty = !state;\n        if (state && state !== oldState) {\n          this.fire('dirty');\n        }\n      };\n      Editor.prototype.getContainer = function () {\n        var self = this;\n        if (!self.container) {\n          self.container = DOM$1.get(self.editorContainer || self.id + '_parent');\n        }\n        return self.container;\n      };\n      Editor.prototype.getContentAreaContainer = function () {\n        return this.contentAreaContainer;\n      };\n      Editor.prototype.getElement = function () {\n        if (!this.targetElm) {\n          this.targetElm = DOM$1.get(this.id);\n        }\n        return this.targetElm;\n      };\n      Editor.prototype.getWin = function () {\n        var self = this;\n        var elm;\n        if (!self.contentWindow) {\n          elm = self.iframeElement;\n          if (elm) {\n            self.contentWindow = elm.contentWindow;\n          }\n        }\n        return self.contentWindow;\n      };\n      Editor.prototype.getDoc = function () {\n        var self = this;\n        var win;\n        if (!self.contentDocument) {\n          win = self.getWin();\n          if (win) {\n            self.contentDocument = win.document;\n          }\n        }\n        return self.contentDocument;\n      };\n      Editor.prototype.getBody = function () {\n        var doc = this.getDoc();\n        return this.bodyElement || (doc ? doc.body : null);\n      };\n      Editor.prototype.convertURL = function (url, name, elm) {\n        var self = this, settings = self.settings;\n        if (settings.urlconverter_callback) {\n          return self.execCallback('urlconverter_callback', url, elm, true, name);\n        }\n        if (!settings.convert_urls || elm && elm.nodeName === 'LINK' || url.indexOf('file:') === 0 || url.length === 0) {\n          return url;\n        }\n        if (settings.relative_urls) {\n          return self.documentBaseURI.toRelative(url);\n        }\n        url = self.documentBaseURI.toAbsolute(url, settings.remove_script_host);\n        return url;\n      };\n      Editor.prototype.addVisual = function (elm) {\n        addVisual(this, elm);\n      };\n      Editor.prototype.remove = function () {\n        remove(this);\n      };\n      Editor.prototype.destroy = function (automatic) {\n        destroy(this, automatic);\n      };\n      Editor.prototype.uploadImages = function (callback) {\n        return this.editorUpload.uploadImages(callback);\n      };\n      Editor.prototype._scanForImages = function () {\n        return this.editorUpload.scanForImages();\n      };\n      Editor.prototype.addButton = function () {\n        throw new Error('editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead');\n      };\n      Editor.prototype.addSidebar = function () {\n        throw new Error('editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead');\n      };\n      Editor.prototype.addMenuItem = function () {\n        throw new Error('editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead');\n      };\n      Editor.prototype.addContextToolbar = function () {\n        throw new Error('editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead');\n      };\n      return Editor;\n    }();\n\n    var DOM = DOMUtils.DOM;\n    var explode = Tools.explode, each$1 = Tools.each, extend$2 = Tools.extend;\n    var instanceCounter = 0, boundGlobalEvents = false;\n    var beforeUnloadDelegate;\n    var legacyEditors = [];\n    var editors = [];\n    var isValidLegacyKey = function (id) {\n      return id !== 'length';\n    };\n    var globalEventDelegate = function (e) {\n      var type = e.type;\n      each$1(EditorManager.get(), function (editor) {\n        switch (type) {\n        case 'scroll':\n          editor.fire('ScrollWindow', e);\n          break;\n        case 'resize':\n          editor.fire('ResizeWindow', e);\n          break;\n        }\n      });\n    };\n    var toggleGlobalEvents = function (state) {\n      if (state !== boundGlobalEvents) {\n        if (state) {\n          DomQuery(window).on('resize scroll', globalEventDelegate);\n        } else {\n          DomQuery(window).off('resize scroll', globalEventDelegate);\n        }\n        boundGlobalEvents = state;\n      }\n    };\n    var removeEditorFromList = function (targetEditor) {\n      var oldEditors = editors;\n      delete legacyEditors[targetEditor.id];\n      for (var i = 0; i < legacyEditors.length; i++) {\n        if (legacyEditors[i] === targetEditor) {\n          legacyEditors.splice(i, 1);\n          break;\n        }\n      }\n      editors = filter$4(editors, function (editor) {\n        return targetEditor !== editor;\n      });\n      if (EditorManager.activeEditor === targetEditor) {\n        EditorManager.activeEditor = editors.length > 0 ? editors[0] : null;\n      }\n      if (EditorManager.focusedEditor === targetEditor) {\n        EditorManager.focusedEditor = null;\n      }\n      return oldEditors.length !== editors.length;\n    };\n    var purgeDestroyedEditor = function (editor) {\n      if (editor && editor.initialized && !(editor.getContainer() || editor.getBody()).parentNode) {\n        removeEditorFromList(editor);\n        editor.unbindAllNativeEvents();\n        editor.destroy(true);\n        editor.removed = true;\n        editor = null;\n      }\n      return editor;\n    };\n    var isQuirksMode = document.compatMode !== 'CSS1Compat';\n    var EditorManager = __assign(__assign({}, Observable), {\n      baseURI: null,\n      baseURL: null,\n      defaultSettings: {},\n      documentBaseURL: null,\n      suffix: null,\n      $: DomQuery,\n      majorVersion: '5',\n      minorVersion: '10.5',\n      releaseDate: '2022-05-25',\n      editors: legacyEditors,\n      i18n: I18n,\n      activeEditor: null,\n      focusedEditor: null,\n      settings: {},\n      setup: function () {\n        var self = this;\n        var baseURL, documentBaseURL, suffix = '';\n        documentBaseURL = URI.getDocumentBaseUrl(document.location);\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(documentBaseURL)) {\n          documentBaseURL = documentBaseURL.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(documentBaseURL)) {\n            documentBaseURL += '/';\n          }\n        }\n        var preInit = window.tinymce || window.tinyMCEPreInit;\n        if (preInit) {\n          baseURL = preInit.base || preInit.baseURL;\n          suffix = preInit.suffix;\n        } else {\n          var scripts = document.getElementsByTagName('script');\n          for (var i = 0; i < scripts.length; i++) {\n            var src = scripts[i].src || '';\n            if (src === '') {\n              continue;\n            }\n            var srcScript = src.substring(src.lastIndexOf('/'));\n            if (/tinymce(\\.full|\\.jquery|)(\\.min|\\.dev|)\\.js/.test(src)) {\n              if (srcScript.indexOf('.min') !== -1) {\n                suffix = '.min';\n              }\n              baseURL = src.substring(0, src.lastIndexOf('/'));\n              break;\n            }\n          }\n          if (!baseURL && document.currentScript) {\n            var src = document.currentScript.src;\n            if (src.indexOf('.min') !== -1) {\n              suffix = '.min';\n            }\n            baseURL = src.substring(0, src.lastIndexOf('/'));\n          }\n        }\n        self.baseURL = new URI(documentBaseURL).toAbsolute(baseURL);\n        self.documentBaseURL = documentBaseURL;\n        self.baseURI = new URI(self.baseURL);\n        self.suffix = suffix;\n        setup$l(self);\n      },\n      overrideDefaults: function (defaultSettings) {\n        var baseUrl = defaultSettings.base_url;\n        if (baseUrl) {\n          this._setBaseUrl(baseUrl);\n        }\n        var suffix = defaultSettings.suffix;\n        if (defaultSettings.suffix) {\n          this.suffix = suffix;\n        }\n        this.defaultSettings = defaultSettings;\n        var pluginBaseUrls = defaultSettings.plugin_base_urls;\n        if (pluginBaseUrls !== undefined) {\n          each$j(pluginBaseUrls, function (pluginBaseUrl, pluginName) {\n            AddOnManager.PluginManager.urls[pluginName] = pluginBaseUrl;\n          });\n        }\n      },\n      init: function (settings) {\n        var self = this;\n        var result;\n        var invalidInlineTargets = Tools.makeMap('area base basefont br col frame hr img input isindex link meta param embed source wbr track ' + 'colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu', ' ');\n        var isInvalidInlineTarget = function (settings, elm) {\n          return settings.inline && elm.tagName.toLowerCase() in invalidInlineTargets;\n        };\n        var createId = function (elm) {\n          var id = elm.id;\n          if (!id) {\n            id = get$9(elm, 'name').filter(function (name) {\n              return !DOM.get(name);\n            }).getOrThunk(DOM.uniqueId);\n            elm.setAttribute('id', id);\n          }\n          return id;\n        };\n        var execCallback = function (name) {\n          var callback = settings[name];\n          if (!callback) {\n            return;\n          }\n          return callback.apply(self, []);\n        };\n        var hasClass = function (elm, className) {\n          return className.constructor === RegExp ? className.test(elm.className) : DOM.hasClass(elm, className);\n        };\n        var findTargets = function (settings) {\n          var targets = [];\n          if (Env.browser.isIE() && Env.browser.version.major < 11) {\n            initError('TinyMCE does not support the browser you are using. For a list of supported' + ' browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/');\n            return [];\n          } else if (isQuirksMode) {\n            initError('Failed to initialize the editor as the document is not in standards mode. ' + 'TinyMCE requires standards mode.');\n            return [];\n          }\n          if (settings.types) {\n            each$1(settings.types, function (type) {\n              targets = targets.concat(DOM.select(type.selector));\n            });\n            return targets;\n          } else if (settings.selector) {\n            return DOM.select(settings.selector);\n          } else if (settings.target) {\n            return [settings.target];\n          }\n          switch (settings.mode) {\n          case 'exact':\n            var l = settings.elements || '';\n            if (l.length > 0) {\n              each$1(explode(l), function (id) {\n                var elm = DOM.get(id);\n                if (elm) {\n                  targets.push(elm);\n                } else {\n                  each$1(document.forms, function (f) {\n                    each$1(f.elements, function (e) {\n                      if (e.name === id) {\n                        id = 'mce_editor_' + instanceCounter++;\n                        DOM.setAttrib(e, 'id', id);\n                        targets.push(e);\n                      }\n                    });\n                  });\n                }\n              });\n            }\n            break;\n          case 'textareas':\n          case 'specific_textareas':\n            each$1(DOM.select('textarea'), function (elm) {\n              if (settings.editor_deselector && hasClass(elm, settings.editor_deselector)) {\n                return;\n              }\n              if (!settings.editor_selector || hasClass(elm, settings.editor_selector)) {\n                targets.push(elm);\n              }\n            });\n            break;\n          }\n          return targets;\n        };\n        var provideResults = function (editors) {\n          result = editors;\n        };\n        var initEditors = function () {\n          var initCount = 0;\n          var editors = [];\n          var targets;\n          var createEditor = function (id, settings, targetElm) {\n            var editor = new Editor(id, settings, self);\n            editors.push(editor);\n            editor.on('init', function () {\n              if (++initCount === targets.length) {\n                provideResults(editors);\n              }\n            });\n            editor.targetElm = editor.targetElm || targetElm;\n            editor.render();\n          };\n          DOM.unbind(window, 'ready', initEditors);\n          execCallback('onpageload');\n          targets = DomQuery.unique(findTargets(settings));\n          if (settings.types) {\n            each$1(settings.types, function (type) {\n              Tools.each(targets, function (elm) {\n                if (DOM.is(elm, type.selector)) {\n                  createEditor(createId(elm), extend$2({}, settings, type), elm);\n                  return false;\n                }\n                return true;\n              });\n            });\n            return;\n          }\n          Tools.each(targets, function (elm) {\n            purgeDestroyedEditor(self.get(elm.id));\n          });\n          targets = Tools.grep(targets, function (elm) {\n            return !self.get(elm.id);\n          });\n          if (targets.length === 0) {\n            provideResults([]);\n          } else {\n            each$1(targets, function (elm) {\n              if (isInvalidInlineTarget(settings, elm)) {\n                initError('Could not initialize inline editor on invalid inline target element', elm);\n              } else {\n                createEditor(createId(elm), settings, elm);\n              }\n            });\n          }\n        };\n        self.settings = settings;\n        DOM.bind(window, 'ready', initEditors);\n        return new promiseObj(function (resolve) {\n          if (result) {\n            resolve(result);\n          } else {\n            provideResults = function (editors) {\n              resolve(editors);\n            };\n          }\n        });\n      },\n      get: function (id) {\n        if (arguments.length === 0) {\n          return editors.slice(0);\n        } else if (isString$1(id)) {\n          return find$3(editors, function (editor) {\n            return editor.id === id;\n          }).getOr(null);\n        } else if (isNumber(id)) {\n          return editors[id] ? editors[id] : null;\n        } else {\n          return null;\n        }\n      },\n      add: function (editor) {\n        var self = this;\n        var existingEditor = legacyEditors[editor.id];\n        if (existingEditor === editor) {\n          return editor;\n        }\n        if (self.get(editor.id) === null) {\n          if (isValidLegacyKey(editor.id)) {\n            legacyEditors[editor.id] = editor;\n          }\n          legacyEditors.push(editor);\n          editors.push(editor);\n        }\n        toggleGlobalEvents(true);\n        self.activeEditor = editor;\n        self.fire('AddEditor', { editor: editor });\n        if (!beforeUnloadDelegate) {\n          beforeUnloadDelegate = function (e) {\n            var event = self.fire('BeforeUnload');\n            if (event.returnValue) {\n              e.preventDefault();\n              e.returnValue = event.returnValue;\n              return event.returnValue;\n            }\n          };\n          window.addEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        return editor;\n      },\n      createEditor: function (id, settings) {\n        return this.add(new Editor(id, settings, this));\n      },\n      remove: function (selector) {\n        var self = this;\n        var i, editor;\n        if (!selector) {\n          for (i = editors.length - 1; i >= 0; i--) {\n            self.remove(editors[i]);\n          }\n          return;\n        }\n        if (isString$1(selector)) {\n          each$1(DOM.select(selector), function (elm) {\n            editor = self.get(elm.id);\n            if (editor) {\n              self.remove(editor);\n            }\n          });\n          return;\n        }\n        editor = selector;\n        if (isNull(self.get(editor.id))) {\n          return null;\n        }\n        if (removeEditorFromList(editor)) {\n          self.fire('RemoveEditor', { editor: editor });\n        }\n        if (editors.length === 0) {\n          window.removeEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        editor.remove();\n        toggleGlobalEvents(editors.length > 0);\n        return editor;\n      },\n      execCommand: function (cmd, ui, value) {\n        var self = this, editor = self.get(value);\n        switch (cmd) {\n        case 'mceAddEditor':\n          if (!self.get(value)) {\n            new Editor(value, self.settings, self).render();\n          }\n          return true;\n        case 'mceRemoveEditor':\n          if (editor) {\n            editor.remove();\n          }\n          return true;\n        case 'mceToggleEditor':\n          if (!editor) {\n            self.execCommand('mceAddEditor', false, value);\n            return true;\n          }\n          if (editor.isHidden()) {\n            editor.show();\n          } else {\n            editor.hide();\n          }\n          return true;\n        }\n        if (self.activeEditor) {\n          return self.activeEditor.execCommand(cmd, ui, value);\n        }\n        return false;\n      },\n      triggerSave: function () {\n        each$1(editors, function (editor) {\n          editor.save();\n        });\n      },\n      addI18n: function (code, items) {\n        I18n.add(code, items);\n      },\n      translate: function (text) {\n        return I18n.translate(text);\n      },\n      setActive: function (editor) {\n        var activeEditor = this.activeEditor;\n        if (this.activeEditor !== editor) {\n          if (activeEditor) {\n            activeEditor.fire('deactivate', { relatedTarget: editor });\n          }\n          editor.fire('activate', { relatedTarget: activeEditor });\n        }\n        this.activeEditor = editor;\n      },\n      _setBaseUrl: function (baseUrl) {\n        this.baseURL = new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\\/+$/, ''));\n        this.baseURI = new URI(this.baseURL);\n      }\n    });\n    EditorManager.setup();\n\n    var min$1 = Math.min, max$1 = Math.max, round$1 = Math.round;\n    var relativePosition = function (rect, targetRect, rel) {\n      var x = targetRect.x;\n      var y = targetRect.y;\n      var w = rect.w;\n      var h = rect.h;\n      var targetW = targetRect.w;\n      var targetH = targetRect.h;\n      var relChars = (rel || '').split('');\n      if (relChars[0] === 'b') {\n        y += targetH;\n      }\n      if (relChars[1] === 'r') {\n        x += targetW;\n      }\n      if (relChars[0] === 'c') {\n        y += round$1(targetH / 2);\n      }\n      if (relChars[1] === 'c') {\n        x += round$1(targetW / 2);\n      }\n      if (relChars[3] === 'b') {\n        y -= h;\n      }\n      if (relChars[4] === 'r') {\n        x -= w;\n      }\n      if (relChars[3] === 'c') {\n        y -= round$1(h / 2);\n      }\n      if (relChars[4] === 'c') {\n        x -= round$1(w / 2);\n      }\n      return create$2(x, y, w, h);\n    };\n    var findBestRelativePosition = function (rect, targetRect, constrainRect, rels) {\n      var pos, i;\n      for (i = 0; i < rels.length; i++) {\n        pos = relativePosition(rect, targetRect, rels[i]);\n        if (pos.x >= constrainRect.x && pos.x + pos.w <= constrainRect.w + constrainRect.x && pos.y >= constrainRect.y && pos.y + pos.h <= constrainRect.h + constrainRect.y) {\n          return rels[i];\n        }\n      }\n      return null;\n    };\n    var inflate = function (rect, w, h) {\n      return create$2(rect.x - w, rect.y - h, rect.w + w * 2, rect.h + h * 2);\n    };\n    var intersect = function (rect, cropRect) {\n      var x1 = max$1(rect.x, cropRect.x);\n      var y1 = max$1(rect.y, cropRect.y);\n      var x2 = min$1(rect.x + rect.w, cropRect.x + cropRect.w);\n      var y2 = min$1(rect.y + rect.h, cropRect.y + cropRect.h);\n      if (x2 - x1 < 0 || y2 - y1 < 0) {\n        return null;\n      }\n      return create$2(x1, y1, x2 - x1, y2 - y1);\n    };\n    var clamp = function (rect, clampRect, fixedSize) {\n      var x1 = rect.x;\n      var y1 = rect.y;\n      var x2 = rect.x + rect.w;\n      var y2 = rect.y + rect.h;\n      var cx2 = clampRect.x + clampRect.w;\n      var cy2 = clampRect.y + clampRect.h;\n      var underflowX1 = max$1(0, clampRect.x - x1);\n      var underflowY1 = max$1(0, clampRect.y - y1);\n      var overflowX2 = max$1(0, x2 - cx2);\n      var overflowY2 = max$1(0, y2 - cy2);\n      x1 += underflowX1;\n      y1 += underflowY1;\n      if (fixedSize) {\n        x2 += underflowX1;\n        y2 += underflowY1;\n        x1 -= overflowX2;\n        y1 -= overflowY2;\n      }\n      x2 -= overflowX2;\n      y2 -= overflowY2;\n      return create$2(x1, y1, x2 - x1, y2 - y1);\n    };\n    var create$2 = function (x, y, w, h) {\n      return {\n        x: x,\n        y: y,\n        w: w,\n        h: h\n      };\n    };\n    var fromClientRect = function (clientRect) {\n      return create$2(clientRect.left, clientRect.top, clientRect.width, clientRect.height);\n    };\n    var Rect = {\n      inflate: inflate,\n      relativePosition: relativePosition,\n      findBestRelativePosition: findBestRelativePosition,\n      intersect: intersect,\n      clamp: clamp,\n      create: create$2,\n      fromClientRect: fromClientRect\n    };\n\n    var awaiter = function (resolveCb, rejectCb, timeout) {\n      if (timeout === void 0) {\n        timeout = 1000;\n      }\n      var done = false;\n      var timer = null;\n      var complete = function (completer) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (!done) {\n            done = true;\n            if (timer !== null) {\n              clearTimeout(timer);\n              timer = null;\n            }\n            completer.apply(null, args);\n          }\n        };\n      };\n      var resolve = complete(resolveCb);\n      var reject = complete(rejectCb);\n      var start = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!done && timer === null) {\n          timer = setTimeout(function () {\n            return reject.apply(null, args);\n          }, timeout);\n        }\n      };\n      return {\n        start: start,\n        resolve: resolve,\n        reject: reject\n      };\n    };\n    var create$1 = function () {\n      var tasks = {};\n      var resultFns = {};\n      var load = function (id, url) {\n        var loadErrMsg = 'Script at URL \"' + url + '\" failed to load';\n        var runErrMsg = 'Script at URL \"' + url + '\" did not call `tinymce.Resource.add(\\'' + id + '\\', data)` within 1 second';\n        if (tasks[id] !== undefined) {\n          return tasks[id];\n        } else {\n          var task = new promiseObj(function (resolve, reject) {\n            var waiter = awaiter(resolve, reject);\n            resultFns[id] = waiter.resolve;\n            ScriptLoader.ScriptLoader.loadScript(url, function () {\n              return waiter.start(runErrMsg);\n            }, function () {\n              return waiter.reject(loadErrMsg);\n            });\n          });\n          tasks[id] = task;\n          return task;\n        }\n      };\n      var add = function (id, data) {\n        if (resultFns[id] !== undefined) {\n          resultFns[id](data);\n          delete resultFns[id];\n        }\n        tasks[id] = promiseObj.resolve(data);\n      };\n      return {\n        load: load,\n        add: add\n      };\n    };\n    var Resource = create$1();\n\n    var each = Tools.each, extend$1 = Tools.extend;\n    var extendClass, initializing;\n    var Class = function () {\n    };\n    Class.extend = extendClass = function (props) {\n      var self = this;\n      var _super = self.prototype;\n      var Class = function () {\n        var i, mixins, mixin;\n        var self = this;\n        if (!initializing) {\n          if (self.init) {\n            self.init.apply(self, arguments);\n          }\n          mixins = self.Mixins;\n          if (mixins) {\n            i = mixins.length;\n            while (i--) {\n              mixin = mixins[i];\n              if (mixin.init) {\n                mixin.init.apply(self, arguments);\n              }\n            }\n          }\n        }\n      };\n      var dummy = function () {\n        return this;\n      };\n      var createMethod = function (name, fn) {\n        return function () {\n          var self = this;\n          var tmp = self._super;\n          self._super = _super[name];\n          var ret = fn.apply(self, arguments);\n          self._super = tmp;\n          return ret;\n        };\n      };\n      initializing = true;\n      var prototype = new self();\n      initializing = false;\n      if (props.Mixins) {\n        each(props.Mixins, function (mixin) {\n          for (var name_1 in mixin) {\n            if (name_1 !== 'init') {\n              props[name_1] = mixin[name_1];\n            }\n          }\n        });\n        if (_super.Mixins) {\n          props.Mixins = _super.Mixins.concat(props.Mixins);\n        }\n      }\n      if (props.Methods) {\n        each(props.Methods.split(','), function (name) {\n          props[name] = dummy;\n        });\n      }\n      if (props.Properties) {\n        each(props.Properties.split(','), function (name) {\n          var fieldName = '_' + name;\n          props[name] = function (value) {\n            var self = this;\n            if (value !== undefined) {\n              self[fieldName] = value;\n              return self;\n            }\n            return self[fieldName];\n          };\n        });\n      }\n      if (props.Statics) {\n        each(props.Statics, function (func, name) {\n          Class[name] = func;\n        });\n      }\n      if (props.Defaults && _super.Defaults) {\n        props.Defaults = extend$1({}, _super.Defaults, props.Defaults);\n      }\n      each$j(props, function (member, name) {\n        if (typeof member === 'function' && _super[name]) {\n          prototype[name] = createMethod(name, member);\n        } else {\n          prototype[name] = member;\n        }\n      });\n      Class.prototype = prototype;\n      Class.constructor = Class;\n      Class.extend = extendClass;\n      return Class;\n    };\n\n    var min = Math.min, max = Math.max, round = Math.round;\n    var Color = function (value) {\n      var self = {};\n      var r = 0, g = 0, b = 0;\n      var rgb2hsv = function (r, g, b) {\n        var h, s, v;\n        h = 0;\n        s = 0;\n        v = 0;\n        r = r / 255;\n        g = g / 255;\n        b = b / 255;\n        var minRGB = min(r, min(g, b));\n        var maxRGB = max(r, max(g, b));\n        if (minRGB === maxRGB) {\n          v = minRGB;\n          return {\n            h: 0,\n            s: 0,\n            v: v * 100\n          };\n        }\n        var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n        h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n        h = 60 * (h - d / (maxRGB - minRGB));\n        s = (maxRGB - minRGB) / maxRGB;\n        v = maxRGB;\n        return {\n          h: round(h),\n          s: round(s * 100),\n          v: round(v * 100)\n        };\n      };\n      var hsvToRgb = function (hue, saturation, brightness) {\n        hue = (parseInt(hue, 10) || 0) % 360;\n        saturation = parseInt(saturation, 10) / 100;\n        brightness = parseInt(brightness, 10) / 100;\n        saturation = max(0, min(saturation, 1));\n        brightness = max(0, min(brightness, 1));\n        if (saturation === 0) {\n          r = g = b = round(255 * brightness);\n          return;\n        }\n        var side = hue / 60;\n        var chroma = brightness * saturation;\n        var x = chroma * (1 - Math.abs(side % 2 - 1));\n        var match = brightness - chroma;\n        switch (Math.floor(side)) {\n        case 0:\n          r = chroma;\n          g = x;\n          b = 0;\n          break;\n        case 1:\n          r = x;\n          g = chroma;\n          b = 0;\n          break;\n        case 2:\n          r = 0;\n          g = chroma;\n          b = x;\n          break;\n        case 3:\n          r = 0;\n          g = x;\n          b = chroma;\n          break;\n        case 4:\n          r = x;\n          g = 0;\n          b = chroma;\n          break;\n        case 5:\n          r = chroma;\n          g = 0;\n          b = x;\n          break;\n        default:\n          r = g = b = 0;\n        }\n        r = round(255 * (r + match));\n        g = round(255 * (g + match));\n        b = round(255 * (b + match));\n      };\n      var toHex = function () {\n        var hex = function (val) {\n          val = parseInt(val, 10).toString(16);\n          return val.length > 1 ? val : '0' + val;\n        };\n        return '#' + hex(r) + hex(g) + hex(b);\n      };\n      var toRgb = function () {\n        return {\n          r: r,\n          g: g,\n          b: b\n        };\n      };\n      var toHsv = function () {\n        return rgb2hsv(r, g, b);\n      };\n      var parse = function (value) {\n        var matches;\n        if (typeof value === 'object') {\n          if ('r' in value) {\n            r = value.r;\n            g = value.g;\n            b = value.b;\n          } else if ('v' in value) {\n            hsvToRgb(value.h, value.s, value.v);\n          }\n        } else {\n          if (matches = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)[^\\)]*\\)/gi.exec(value)) {\n            r = parseInt(matches[1], 10);\n            g = parseInt(matches[2], 10);\n            b = parseInt(matches[3], 10);\n          } else if (matches = /#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(value)) {\n            r = parseInt(matches[1], 16);\n            g = parseInt(matches[2], 16);\n            b = parseInt(matches[3], 16);\n          } else if (matches = /#([0-F])([0-F])([0-F])/gi.exec(value)) {\n            r = parseInt(matches[1] + matches[1], 16);\n            g = parseInt(matches[2] + matches[2], 16);\n            b = parseInt(matches[3] + matches[3], 16);\n          }\n        }\n        r = r < 0 ? 0 : r > 255 ? 255 : r;\n        g = g < 0 ? 0 : g > 255 ? 255 : g;\n        b = b < 0 ? 0 : b > 255 ? 255 : b;\n        return self;\n      };\n      if (value) {\n        parse(value);\n      }\n      self.toRgb = toRgb;\n      self.toHsv = toHsv;\n      self.toHex = toHex;\n      self.parse = parse;\n      return self;\n    };\n\n    var serialize = function (obj) {\n      var data = JSON.stringify(obj);\n      if (!isString$1(data)) {\n        return data;\n      }\n      return data.replace(/[\\u0080-\\uFFFF]/g, function (match) {\n        var hexCode = match.charCodeAt(0).toString(16);\n        return '\\\\u' + '0000'.substring(hexCode.length) + hexCode;\n      });\n    };\n    var JSONUtils = {\n      serialize: serialize,\n      parse: function (text) {\n        try {\n          return JSON.parse(text);\n        } catch (ex) {\n        }\n      }\n    };\n\n    var JSONP = {\n      callbacks: {},\n      count: 0,\n      send: function (settings) {\n        var self = this, dom = DOMUtils.DOM, count = settings.count !== undefined ? settings.count : self.count;\n        var id = 'tinymce_jsonp_' + count;\n        self.callbacks[count] = function (json) {\n          dom.remove(id);\n          delete self.callbacks[count];\n          settings.callback(json);\n        };\n        dom.add(dom.doc.body, 'script', {\n          id: id,\n          src: settings.url,\n          type: 'text/javascript'\n        });\n        self.count++;\n      }\n    };\n\n    var XHR = __assign(__assign({}, Observable), {\n      send: function (settings) {\n        var xhr, count = 0;\n        var ready = function () {\n          if (!settings.async || xhr.readyState === 4 || count++ > 10000) {\n            if (settings.success && count < 10000 && xhr.status === 200) {\n              settings.success.call(settings.success_scope, '' + xhr.responseText, xhr, settings);\n            } else if (settings.error) {\n              settings.error.call(settings.error_scope, count > 10000 ? 'TIMED_OUT' : 'GENERAL', xhr, settings);\n            }\n            xhr = null;\n          } else {\n            Delay.setTimeout(ready, 10);\n          }\n        };\n        settings.scope = settings.scope || this;\n        settings.success_scope = settings.success_scope || settings.scope;\n        settings.error_scope = settings.error_scope || settings.scope;\n        settings.async = settings.async !== false;\n        settings.data = settings.data || '';\n        XHR.fire('beforeInitialize', { settings: settings });\n        xhr = new XMLHttpRequest();\n        if (xhr.overrideMimeType) {\n          xhr.overrideMimeType(settings.content_type);\n        }\n        xhr.open(settings.type || (settings.data ? 'POST' : 'GET'), settings.url, settings.async);\n        if (settings.crossDomain) {\n          xhr.withCredentials = true;\n        }\n        if (settings.content_type) {\n          xhr.setRequestHeader('Content-Type', settings.content_type);\n        }\n        if (settings.requestheaders) {\n          Tools.each(settings.requestheaders, function (header) {\n            xhr.setRequestHeader(header.key, header.value);\n          });\n        }\n        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n        xhr = XHR.fire('beforeSend', {\n          xhr: xhr,\n          settings: settings\n        }).xhr;\n        xhr.send(settings.data);\n        if (!settings.async) {\n          return ready();\n        }\n        Delay.setTimeout(ready, 10);\n      }\n    });\n\n    var extend = Tools.extend;\n    var JSONRequest = function () {\n      function JSONRequest(settings) {\n        this.settings = extend({}, settings);\n        this.count = 0;\n      }\n      JSONRequest.sendRPC = function (o) {\n        return new JSONRequest().send(o);\n      };\n      JSONRequest.prototype.send = function (args) {\n        var ecb = args.error, scb = args.success;\n        var xhrArgs = extend(this.settings, args);\n        xhrArgs.success = function (c, x) {\n          c = JSONUtils.parse(c);\n          if (typeof c === 'undefined') {\n            c = { error: 'JSON Parse error.' };\n          }\n          if (c.error) {\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, c.error, x);\n          } else {\n            scb.call(xhrArgs.success_scope || xhrArgs.scope, c.result);\n          }\n        };\n        xhrArgs.error = function (ty, x) {\n          if (ecb) {\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, ty, x);\n          }\n        };\n        xhrArgs.data = JSONUtils.serialize({\n          id: args.id || 'c' + this.count++,\n          method: args.method,\n          params: args.params\n        });\n        xhrArgs.content_type = 'application/json';\n        XHR.send(xhrArgs);\n      };\n      return JSONRequest;\n    }();\n\n    var create = function () {\n      return function () {\n        var data = {};\n        var keys = [];\n        var storage = {\n          getItem: function (key) {\n            var item = data[key];\n            return item ? item : null;\n          },\n          setItem: function (key, value) {\n            keys.push(key);\n            data[key] = String(value);\n          },\n          key: function (index) {\n            return keys[index];\n          },\n          removeItem: function (key) {\n            keys = keys.filter(function (k) {\n              return k === key;\n            });\n            delete data[key];\n          },\n          clear: function () {\n            keys = [];\n            data = {};\n          },\n          length: 0\n        };\n        Object.defineProperty(storage, 'length', {\n          get: function () {\n            return keys.length;\n          },\n          configurable: false,\n          enumerable: false\n        });\n        return storage;\n      }();\n    };\n\n    var localStorage;\n    try {\n      var test = '__storage_test__';\n      localStorage = window.localStorage;\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n    } catch (e) {\n      localStorage = create();\n    }\n    var LocalStorage = localStorage;\n\n    var publicApi = {\n      geom: { Rect: Rect },\n      util: {\n        Promise: promiseObj,\n        Delay: Delay,\n        Tools: Tools,\n        VK: VK,\n        URI: URI,\n        Class: Class,\n        EventDispatcher: EventDispatcher,\n        Observable: Observable,\n        I18n: I18n,\n        XHR: XHR,\n        JSON: JSONUtils,\n        JSONRequest: JSONRequest,\n        JSONP: JSONP,\n        LocalStorage: LocalStorage,\n        Color: Color,\n        ImageUploader: ImageUploader\n      },\n      dom: {\n        EventUtils: EventUtils,\n        Sizzle: Sizzle,\n        DomQuery: DomQuery,\n        TreeWalker: DomTreeWalker,\n        TextSeeker: TextSeeker,\n        DOMUtils: DOMUtils,\n        ScriptLoader: ScriptLoader,\n        RangeUtils: RangeUtils,\n        Serializer: DomSerializer,\n        StyleSheetLoader: StyleSheetLoader,\n        ControlSelection: ControlSelection,\n        BookmarkManager: BookmarkManager,\n        Selection: EditorSelection,\n        Event: EventUtils.Event\n      },\n      html: {\n        Styles: Styles,\n        Entities: Entities,\n        Node: AstNode,\n        Schema: Schema,\n        SaxParser: SaxParser,\n        DomParser: DomParser,\n        Writer: Writer,\n        Serializer: HtmlSerializer\n      },\n      Env: Env,\n      AddOnManager: AddOnManager,\n      Annotator: Annotator,\n      Formatter: Formatter,\n      UndoManager: UndoManager,\n      EditorCommands: EditorCommands,\n      WindowManager: WindowManager,\n      NotificationManager: NotificationManager,\n      EditorObservable: EditorObservable,\n      Shortcuts: Shortcuts,\n      Editor: Editor,\n      FocusManager: FocusManager,\n      EditorManager: EditorManager,\n      DOM: DOMUtils.DOM,\n      ScriptLoader: ScriptLoader.ScriptLoader,\n      PluginManager: PluginManager,\n      ThemeManager: ThemeManager,\n      IconManager: IconManager,\n      Resource: Resource,\n      trim: Tools.trim,\n      isArray: Tools.isArray,\n      is: Tools.is,\n      toArray: Tools.toArray,\n      makeMap: Tools.makeMap,\n      each: Tools.each,\n      map: Tools.map,\n      grep: Tools.grep,\n      inArray: Tools.inArray,\n      extend: Tools.extend,\n      create: Tools.create,\n      walk: Tools.walk,\n      createNS: Tools.createNS,\n      resolve: Tools.resolve,\n      explode: Tools.explode,\n      _addCacheSuffix: Tools._addCacheSuffix,\n      isOpera: Env.opera,\n      isWebKit: Env.webkit,\n      isIE: Env.ie,\n      isGecko: Env.gecko,\n      isMac: Env.mac\n    };\n    var tinymce = Tools.extend(EditorManager, publicApi);\n\n    var exportToModuleLoaders = function (tinymce) {\n      if (typeof module === 'object') {\n        try {\n          module.exports = tinymce;\n        } catch (_) {\n        }\n      }\n    };\n    var exportToWindowGlobal = function (tinymce) {\n      window.tinymce = tinymce;\n      window.tinyMCE = tinymce;\n    };\n    exportToWindowGlobal(tinymce);\n    exportToModuleLoaders(tinymce);\n\n}());\n"],"names":["typeOf$1","x","undefined","t","Array","prototype","isPrototypeOf","constructor","name","String","eq$2","f","eq","eqString","y","eqArray","eqa","length","len","i","eqSortedArray","compareFn","contramap","xs","slice","call","sort","sort$1","eqRecord","kx","Object","keys","ky","q","eqAny","tx","indexOf","isEquatableType","isType$1","type","value","isSimpleType","eq$1","a","isString$1","isObject","isArray$1","isNull","isBoolean","isUndefined","isNullable","isNonNullable","isFunction","isNumber","noop","compose","fa","fb","args","_i","arguments","apply","compose1","fbc","fab","constant","identity","tripleEquals","b","curry","fn","initialArgs","restArgs","all","concat","not","never","always","none","NONE","thunk","id","fold","n","_s","isSome","isNone","getOr","getOrThunk","getOrDie","msg","Error","getOrNull","getOrUndefined","or","orThunk","map","each","bind","exists","forall","filter","toArray","toString","some","constant_a","self","me","s","Optional","from","nativeSlice","nativeIndexOf","nativePush","push","rawIndexOf","ts","contains$3","pred","map$3","r","each$k","eachr","partition","pass","fail","filter$4","foldr","acc","foldl","findUntil$1","until","find$3","findIndex$2","flatten","reverse","difference","a1","a2","comparator","copy","get$a","head","last$2","findMap","arr","hasOwnProperty$1","hasOwnProperty","each$j","obj","props","k","map$2","tupleMap","v","tuple","objAcc","internalFilter","onTrue","onFalse","filter$3","values","mapToArray","get$9","key","has$2","hasNonNullableKey","isArray","each$i","o","cb","l","map$1","array","callback","out","item","index","filter$2","indexOf$1","reduce","collection","iteratee","accumulator","thisArg","findIndex$1","predicate","last$1","__assign","assign","p","this","__spreadArray","to","pack","ar","cached","called","unknown$2","nu$4","major","minor","Version","nu","detect","versionRegexes","agent","cleanedAgent","toLowerCase","regexes","test","firstMatch","group","Number","replace","find$2","unknown","detect$2","candidates","userAgent","candidate","search","contains$2","str","substr","startsWith","prefix","start","checkRange","blank","trim$4","lTrim","rTrim","isNotEmpty","isEmpty$3","normalVersionRegex","checkContains","target","uastring","browsers","brand","oses","PlatformInfo","edge","chrome","opera","firefox","safari","nu$3","info","current","version","isBrowser","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","ie","windows","android","linux","solaris","freebsd","chromeos","nu$2","isOS","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","ios","osx","PlatformDetection","userAgentDataOpt","mediaMatch","browser","userAgentData","brands","uaBrand","lcBrand","_a","parseInt","detectBrowser$1","detectBrowser","os","detectOs","deviceType","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","DeviceType","query","window","matchMedia","matches","platform$2","navigator","platform$1","browser$4","webkit","fileApi","URL","createObjectURL","windowsPhone","Env","gecko","mac","iOS","contentEditable","transparentSrc","caretAfter","range","getSelection","documentMode","document","ceFalse","cacheSuffix","container","experimentalShadowDom","canHaveCSP","desktop","whiteSpaceRegExp$2","trim$3","is$3","walk$3","Tools","trim","is","makeMap","items","delim","split","grep","inArray","hasOwn","extend","exts","ext","name_1","create","root","sp","scn","c","de","cn","exec","match","ns","createNS","onCreate","resolve","parent","static","walk","explode","d","_addCacheSuffix","url","fromDom$2","node","dom","SugarElement","fromHtml","html","scope","div","createElement","innerHTML","hasChildNodes","childNodes","console","error","fromTag","tag","fromText","text","createTextNode","fromDom","fromPoint","docElm","elementFromPoint","recurse","e","cur","is$2","element","selector","nodeType","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","e1","e2","ieContains","compareDocumentPosition","Node","DOCUMENT_POSITION_CONTAINED_BY","contains$1","d1","d2","contains","regularContains","Function","nodeName","isType","isElement$6","isText$8","isDocument$2","isDocumentFragment$1","owner$1","ownerDocument","documentOrOwner","dos","defaultView","parentNode","prevSibling","previousSibling","nextSibling","prevSiblings","nextSiblings","children","child$1","cs","firstChild","lastChild","childNodesCount","isShadowRoot","host","supported","Element","attachShadow","getRootNode","isSupported$1","getStyleContainer","doc","getHead","getShadowHost","isOpenShadowHost","shadowRoot","before$4","marker","insertBefore","after$3","append$1","prepend","appendChild","append","elements","empty","textContent","rogue","remove$7","removeChild","unwrap","wrapper","children$1","inBody","getShadowRoot","body","left","top","translate","SugarPosition","firstDefinedOrZero","viewport","offsetLeft","offsetTop","box","getBoundingClientRect","boxPosition","get$8","_DOC","scrollLeft","documentElement","scrollTop","win","scrollTo","intoView","alignToTop","scrollIntoViewIfNeeded","scrollIntoView","bounds","width","height","right","bottom","getBounds","_win","scroll","get$7","clientWidth","clientHeight","visualViewport","Math","max","pageLeft","pageTop","isNodeType","isRestrictedNode","getPrototypeOf","isElement$5","matchNodeNames","names","lowercasedNames","matchStyleValues","computed","getComputedStyle","getPropertyValue","hasAttribute","attrName","isBogus$2","isTable$3","tagName","hasContentEditableState","getAttribute","isTextareaOrInput","isText$7","isComment","isDocument$1","isDocumentFragment","isBr$5","isImg","isContentEditableTrue$4","isContentEditableFalse$b","isTableCell$5","isMedia$2","is$1","lhs","rhs","lift2","oa","ob","isSupported","style","rawSet","setAttribute","set$1","setAll$1","attrs","get$6","getOpt","remove$6","removeAttribute","setAll","css","property","setProperty","internalSet","get$5","getUnsafeProperty","getRaw","raw","getAllRaw","ruleName","browser$3","firstElement","nodes","hasChild","elm","child","getPos","rootElm","pos","clientLeft","clientTop","offsetParent","castOffsetParent","caption","bodyTop","captionTop","captionHeight","offsetHeight","getTableCaptionDeltaY","exports$1","module$1","exports","define","module","require","global","factory","commonjsGlobal","globalThis","g","promise","setTimeoutFunc","setTimeout","Promise","TypeError","_state","_handled","_value","_deferreds","doResolve","handle","deferred","_immediateFn","onFulfilled","onRejected","ret","reject","newValue","then","finale","_unhandledRejectionFn","Handler","done","reason","ex","prom","remaining","res","val","race","setImmediate","err","warn","_setImmediateFn","_setUnhandledRejectionFn","promisePolyfill","boltExport","amd","EphoxContactWrapper","Promise$1","nu$1","baseFn","data","callbacks","get","nCallback","isReady","run","cbs","LazyValue","pure","errorReporter","make","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","cache","Future","par$1","asyncValues","count","asyncValue","value$1","isValue","isError","_opt","_f","_","onValue","mapError","toOptional","message","onError","Result","fromOption","opt","Adt","cases","constructors","adt","acase","keys$1","argLength","branches","branchKeys","join","reqKey","foldArgs","log","label","params","bothErrors","firstError","secondError","bothValues","unite","result","ClosestOrAncestor","ancestor","isRoot","requestAnimationFramePromise","attrValue","support","Expr","getText","isXML","tokenize","compile","select$1","outermostContext","sortInput","hasDuplicate","setDocument","document$1","docElem","documentIsHTML","rbuggyQSA","rbuggyMatches","ancestor$3","stop","el","closest$3","ancestor$2","descendant","base","querySelector","one","closest$2","promiseObj","wrappedSetTimeout","time","wrappedSetInterval","setInterval","debounce","timer","func","clearTimeout","Delay","requestAnimationFrame","requestAnimationFrameFunc","vendors","setEditorTimeout","editor","removed","setEditorInterval","clearInterval","throttle","StyleSheetLoader","documentOrShadowRoot","settings","idCount","loadedStates","edos","maxLoadTime","load","success","failure","link","urlWithSuffix","state","passed","failed","getOrCreateState","status","onload","onerror","waitForWebKitLinkLoaded","testCallback","waitCallback","styleSheets","owner","ownerNode","Date","now","startTime","linkElem","rel","contentCssCors","referrerPolicy","loadF","unload","styleContainer","loadAll","urls","futures","parts","unloadAll","_setReferrerPolicy","instance","WeakMap","forElement","referenceElement","rootDom","sl","set","create$8","DomTreeWalker","startNode","rootNode","next","prev","prev2","shallow","findSibling","findPreviousNode","startName","siblingName","sibling","lazyLookup","lookup","mapToObject","isHeading","isBlock$2","isInline$1","isBr$4","isTextBlock$2","isList","isListItem","isTableSection","isTableCell$4","isWsPreserveElement","nbsp","ZWSP$1","isZwsp","char","trim$2","isElement$4","isText$6","isCaretContainerBlock$1","isCaretContainerInline","isCaretContainer$2","hasContent","isBeforeInline","charAt","offset","isAtStart","isAfterInline","isAtEnd","insertBlock$1","blockName","before","br","blockNode","startsWithCaretContainer$1","endsWithCaretContainer$1","showCaretContainerBlock","caretContainer","brs","getElementsByTagName","lastBr","isRangeInCaretContainerBlock","startContainer","isContentEditableTrue$3","isContentEditableFalse$a","isBr$3","isText$5","isInvalidTextElement","isAtomicInline","isTable$1","isCaretContainer$1","isCaretCandidate$3","isNonUiContentEditableFalse","isUnselectable","isEditableCaretCandidate$1","isInEditable","whiteSpaceRegExp$1","isWhitespaceText","hasWhitespacePreserveParent","rootElement","isContent$1","isWhitespace","isNamedAnchor","isBookmark","isBogus$1","isBogusAll","isEmpty$2","skipBogus","targetNode","brCount","walker","isEmptyNode","isInlineContent","isBookmarkNode$2","isSpan","isKeepTextNode","prevIsInline","nextIsInline","surroundedByInlineContent","trimNode","currentChildren","isDocument","isKeepElement","remove","makeMap$3","attrsCharsRegExp","textCharsRegExp","rawCharsRegExp","entityRegExp","asciiMap","baseEntities","reverseEntities","buildEntitiesLookup","radix","chr","entity","fromCharCode","namedEntities","encodeRaw","attr","encodeNumeric","charCodeAt","encodeNamed","entities","Entities","encodeAllRaw","getEncodeFunc","entitiesMap","nameMap","named","numeric","decode","innerText","nativeDecode","mapCache","dummyObj","makeMap$2","each$h","extend$5","explode$3","inArray$2","split$1","createMap","defaultValue","extendWith","toUpperCase","getTextRootBlockElements","schema","getTextBlockElements","compileElementMap","mode","styles","Schema","patternElements","customElementsMap","specialElements","createLookupTable","option","schemaItems","globalAttributes","blockContent","phrasingContent","flowContent","html4BlockContent","html4PhrasingContent","add","attributes","ni","attributesOrder","arrayToMap","addAttrs","schemaItem","table","script","compileSchema","verify_html","valid_elements","validStyles","valid_styles","invalidStyles","invalid_styles","validClasses","valid_classes","whiteSpaceElementsMap","selfClosingElementsMap","shortEndedElementsMap","boolAttrMap","nonEmptyOrMoveCaretBeforeOnEnter","nonEmptyElementsMap","moveCaretBeforeOnEnterElementsMap","textBlockElementsMap","blockElementsMap","textInlineElementsMap","special","RegExp","patternToRegExp","addValidElements","validElements","ei","ai","al","attrData","elementName","attrType","outputName","globalAttributesOrder","elementRuleRegExp","attrRuleRegExp","hasPatternsRegExp","validElementsArr","paddEmpty","removeEmpty","removeEmptyAttrs","attributesRequired","required","splice","attributesDefault","attributesForced","forcedValue","validValues","attributePatterns","pattern","setValidElements","addCustomElements","customElements","customElementRegExp","text_block_elements","block_elements","rule","inline","cloneName","customRule","elmName","addValidChildren","validChildren","childRuleRegExp","getElementRule","_val","padd_empty_block_inline_children","paddInEmptyBlock","custom_elements","valid_children","extended_valid_elements","dd","dt","li","td","th","tr","tbody","thead","tfoot","legend","area","param","parents","parentsRequired","invalid_elements","getValidStyles","getInvalidStyles","getValidClasses","getBoolAttrs","getBlockElements","getTextInlineElements","getShortEndedElements","getSelfClosingElements","getNonEmptyElements","getMoveCaretBeforeOnEnterElements","getWhiteSpaceElements","getSpecialElements","getCustomElements","isValidChild","isValid","attrPatterns","toHex","hex","Styles","_this","rgbRegExp","urlOrStrRegExp","styleRegExp","trimRightRegExp","encodingLookup","invisibleChar","encodingItems","color","parse","isEncoded","urlConverter","url_converter","urlConverterScope","url_converter_scope","compress","suffix","noJoin","canCompress","encode","keepSlashes","decodeSingleHexSequence","escSeq","decodeHexSequences","processUrl","url2","url3","str2","allow_script_urls","scriptUrl","allow_svg_data_urls","lastIndex","border","serialize","serializeStyles","styleList","i_1","styleMap","deprecated","keyLocation","layerX","layerY","returnValue","webkitMovementX","webkitMovementY","keyIdentifier","mozPressure","isNativeEvent","event","Event","initEvent","normalize$3","originalEvent","fallbackTarget","composedPath","clone$2","srcElement","preventDefault","needsNormalizing","defaultPrevented","isDefaultPrevented","stopPropagation","cancelBubble","isPropagationStopped","stopImmediatePropagation","isImmediatePropagationStopped","hasIsDefaultPrevented","mouseEventRe","addEvent","capture","addEventListener","attachEvent","removeEvent","removeEventListener","detachEvent","fix","isMouseEvent","pageX","clientX","eventDoc","mouseEvent","pageY","clientY","metaKey","bindOnReady","eventUtils","domLoaded","readyHandler","readyState","EventUtils","events","expando","hasMouseEnterLeave","hasFocusIn","callbackList","fakeName","nativeHandler","defaultNativeHandler","evt","executeHandlers","namesList","mouseEnterLeave","currentTarget","related","relatedTarget","unbind","ci","eventMap","fire","parentWindow","clean","destroy","cancel","preferredDoc","dirruns","classCache","createCache","tokenCache","compilerCache","sortOrder","strundefined","MAX_NEGATIVE","pop","push_native","push$1","slice$1","whitespace","identifier","pseudos","rtrim","rcomma","rcombinators","rattributeQuotes","rpseudo","ridentifier","matchExpr","ID","CLASS","TAG","ATTR","PSEUDO","CHILD","bool","needsContext","rinputs","rheader","rnative","rquickExpr$1","rsibling","rescape","runescape","funescape","escaped","escapedWhitespace","high","els","j","Sizzle","context","results","seed","m","groups","old","nid","newContext","newSelector","getElementById","getElementsByClassName","qsa","toSelector","testContext","querySelectorAll","qsaError","cacheLength","shift","markFunction","siblingCheck","diff","sourceIndex","createPositionalPseudo","argument","matchIndexes","setFilters","tokens","addCombinator","matcher","combinator","dir","checkNonElements","doneName","first","xml","oldCache","outerCache","newCache","elementMatcher","matchers","condense","unmatched","newUnmatched","mapped","setMatcher","preFilter","postFilter","postFinder","postSelector","temp","preMap","postMap","preexisting","elems","contexts","multipleContexts","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","relative","implicitRelative","matchContext","matchAnyContext","hasCompare","getTop","getById","find","attrId","tmp","className","disconnectedMatch","adown","bup","compare","sortDetached","aup","ap","bp","unshift","expr","matchesSelector","attrHandle","getAttributeNode","specified","uniqueSort","duplicates","detectDuplicates","sortStable","nodeValue","selectors","createPseudo","excess","unquoted","nodeNameSelector","operator","check","what","last","simple","forward","ofType","nodeIndex","useCache","pseudo","idx","matched","input","has","lang","elemLang","hash","location","focus","activeElement","hasFocus","href","tabIndex","enabled","disabled","checked","selected","selectedIndex","header","button","even","odd","lt","gt","nth","createInputPseudo","createButtonPseudo","filters","parseOnly","soFar","preFilters","setMatchers","elementMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","random","matcherFromGroupMatchers","select","token","compiled","rquickExpr","Event$1","skipUniques","isDefined","isString","createFragment$1","fragDoc","frag","createDocumentFragment","domManipulate","targetNodes","sourceItem","getElementDocument","DomQuery","makeArray","hasClass","wrap$2","lastParent","newWrapper","cloneNode","numericCssMap","booleanMap","propFix","for","class","readonly","cssFix","float","attrHooks","cssHooks","DomQueryConstructor","init","whiteSpaceRegExp","trim$1","each$g","grep$2","unique","hook","prop","removeAttr","camel","dashed","removeProperty","currentStyle","after","appendTo","prependTo","replaceWith","content","wrap","wrapAll","wrapInner","contents","clone","addClass","toggleClass","removeClass","classState","existingClassName","on","off","trigger","show","hide","closest","object","sibling$1","firstSibling","contentDocument","contentWindow","wrappedResult","parentsUntil","nextUntil","prevUntil","overrideDefaults","defaults","sub","each$f","grep$1","simpleSelectorRe","updateInternalStyleAttr","$elm","rawValue","findNodeIndex","normalized","lastNodeType","DOMUtils","addedStyles","files","counter","styleSheetLoader","boundEvents","ownEvents","$","getRoot","$$","getAttrib","defaultVal","getAttribs","setAttrib","originalValue","onSetAttrib","attrElm","root_element","getPos$1","getStyle","getSize","w","h","offsetWidth","elms","getParents","collect","selectorVal","_findSib","setAttribs","setHTML","canHaveHTML","parentElm","newElm","keepChildren","$node","cls","oldElm","replaceChild","isNonEmptyElement","createRng","createRange","rv","getContentEditable","stdMode","boxModel","isBlock","deep","clone_1","getViewPort","argWin","vp","getRect","size","getParent","getNext","getPrev","createHTML","outHtml","createFragment","setStyle","update_styles","setStyles","stylesArg","removeAllAttribs","removeAttributeNode","parseStyle","cssText","serializeStyle","addStyle","styleElm","DOM","styleSheet","loadCSS","isHidden","uniqueId","getOuterHTML","outerHTML","setOuterHTML","insertAfter","reference","referenceNode","rename","attrNode","findCommonAncestor","pe","ps","rgbVal","isEmpty","bogusVal","splitElm","replacementElm","beforeFragment","afterFragment","setStart","setEnd","extractContents","getContentEditableParent","isChildOf","dumpRng","startOffset","endContainer","endOffset","getContext","keepValues","keep_values","keepUrlHook","src","setupAttrHooks","DOM$a","each$e","ScriptLoader","states","queue","scriptLoadedCallbacks","queueLoadedCallbacks","loading","loadScript","cleanup","isDone","markDone","loadQueue","loadScripts","scripts","failures","execCallbacks","loadingScripts","notifyCallbacks","Cell","initial","currentCode","getLanguageData","I18n","getData","setCode","newCode","getCode","code","langData","translation","getLangData","textstr","removeContext","isTokenised","values_1","$1","$2","isRtl","hasCode","AddOnManager","_listeners","runListeners","matchedListeners","listener","dependencies","createUrl","baseUrl","dep","resource","addOnUrl","urlString","baseURL","substring","lastIndexOf","deps","newUrl","loadDependencies","waitFor","requireLangPack","languages","languageLoad","language","addOn","addOnConstructor","addComponents","pluginName","pluginUrl","PluginManager","ThemeManager","subject","doRevoke","revoke","clear","isSet","singleton","rate","read$4","supports","classList","add$2","clazz","add$3","remove$4","remove$5","add$1","cleanClass","get$4","descendants$1","descendants","annotation","dataAnnotation","dataAnnotationId","identify","annotationName","rng","selection","getRng","getBody","an","newStart","getAttr","has$1","uid","findMarkers","setup$n","_registry","changeCallbacks","initData","listeners","previous","withCallbacks","updateCallbacks","callbackMap","outputData","onNodeChange","annotations","fireNoAnnotation","fireCallbacks","addListener","setup$m","registry","serializer","addNodeFilter","spans","span","identifyParserNode","persistent","generate","getTime","floor","docDom","fragment","contentElements","clone$1","original","isDeep","deep$1","TextWalker","isBoundary","direction","TextSeeker","isBlockBoundary","process","newOffset","backwards","forwards","round$2","round","rect","collapse","toStart","isValidOverflow","overflowY","rect1","rect2","min","isAbove$1","halfHeight","isBelow$1","containsXY","getSelectedNode","getNode$1","safeOffset","clamp$2","extendingChars","isExtendingChar","ch","isElement$3","isCaretCandidate$2","isBlock$1","isFloated","isValidElementCaretCandidate","and","isNotPre","isText$4","isBr$2","nodeIndex$1","resolveIndex$1","createRange$1","isWhiteSpace$1","isRange","isHiddenWhiteSpaceRange","isZeroRect","getBoundingClientRect$1","clientRect","clientRects","getClientRects","brNode","nbsp$1","getBrClientRect","sc","ec","so","eo","newRng","cloneRange","setEndAfter","getBoundingClientRectWebKitText","collapseAndInflateWidth","newClientRect","getCaretPositionClientRects","caretPosition","addUniqueAndValidRect","addCharacterOffset","beforeNode","CaretPosition","toRange","isVisible","isEqual","getNode","fromRangeStart","fromRangeEnd","isAbove","pos1","pos2","isBelow","isTextPosition","isElementPosition","HDirection","trimEmptyTextNode$1","rangeInsertNode","insertNode","insertFragment","isText$3","isBogus","normalizedParent","getChildNodes","equal","createPathItem","numTextFragments","normalizedNodeIndex","create$6","outputOffset","path","normalizedTextOffset","parentsUntil$1","resolve$2","paths","resolvePathItem","dataLen","targetOffset","findTextPosition","isContentEditableFalse$9","getPoint","point","trimmedOffset","getNormalizedTextOffset","findIndex","moveEndPoint$1","normalizeTableCellSelection","getOffsetBookmark","findAdjacentContentEditableFalseElm","bookmark","isCollapsed","end","isFakeCaret","getLocation","createBookmarkSpan","filled","getPersistentBookmark","collapsed","rng2","endBookmarkNode","startBookmarkNode","moveToBookmark","keep","getBookmark$2","getCaretBookmark","getRangeBookmark","getUndoBookmark","DOM$9","getBodySetting","getParam","bodyObj","getContentSecurityPolicy","getForcedRootBlock","block","getForcedRootBlockAttrs","isAutomaticUploadsEnabled","shouldReuseFileName","getIconPackName","getImageUploadUrl","getImageUploadBasePath","getImagesUploadCredentials","getImagesUploadHandler","shouldUseContentCssCors","getReferrerPolicy","getLanguageCode","shouldIndentUseMargin","getFontCss","fontCss","getObjectResizing","getEventRoot","getTheme","shouldValidate","isInlineBoundariesEnabled","hasContentCssCors","getPlugins","isElement$2","isText$2","removeNode$1","trimCount","trimmedText","deleteZwspChars","deleteData","removeUnchanged","remove$2","removeElementAndReposition","newPosition","indexOf$2","removeTextCaretContainer","removeTextAndReposition","removeAndReposition","removeElementCaretContainer","caretContainerNode","browser$2","isContentEditableFalse$8","isMedia$1","isTableCell$3","getAbsoluteClientRect","scrollX","scrollY","rootRect","margin","FakeCaret","cursorInterval","lastVisualCaret","rootBlock","caretBlock","fakeCaretTargetNodes","trimInlineCaretContainers","caretState","caret","startBlink","textNode","splitText","insertInline$1","isInlineFakeCaretTarget","getCss","reposition","isFakeCaretTableBrowser","isFakeCaretTarget","isContentEditableFalse$7","isMedia","isBlockLike","isCaretContainer","isCaretContainerBlock","isElement$1","isCaretCandidate$1","isForwards","isBackwards","skipCaretContainers","findNode$1","predicateFn","isCefOrCaretContainer","getParentBlock$2","isInSameBlock","caretPosition1","caretPosition2","getChildNodeAtRelativeOffset","relativeOffset","beforeAfter","setStartBefore","setEndBefore","setStartAfter","isNodesInSameBlock","node1","node2","lean","before$2","after$2","normalizeRange","leanLeft","leanRight","location_1","getRelativeCefElm","getNormalizedRangeEndPoint","normalizedRange","getElementFromPosition","getVisualCaretPosition","walkFn","isMoveInsideSameBlock","inSameBlock","expected","isContentEditableFalse$6","isText$1","isElement","isBr$1","isCaretCandidate","isAtomic","isAtomicContentEditableFalse","isEditableCaretCandidate","nodeAtIndex","getCaretCandidatePosition","findCaretPosition$1","startPos","nextNode","innerNode","Forwards","moveForwardFromBr","rootContentEditableFalseElm","getParents$3","CaretWalker","Backwards","isBeforeOrStart","position","isAfterOrEnd","isBeforeAfterSameElement","shouldSkipPosition","fromPosition","navigate","navigateIgnore","ignoreFilter","positionIn","walkToPositionIn","nextPosition","prevPosition","firstPositionIn","lastPositionIn","CARET_ID$1","isCaretNode","getParentCaretContainer","isPathBookmark","addBogus","tryFindRangePosition","padEmptyCaretContainer","isEmpty$1","insertZwsp","setEndPoint","isValidTextNode","restoreEndPoint","appendData","resolve$1","resolvePaths","isStringPathBookmark","resolveCaretPositionBookmark","isIdBookmark","endPos","spos","epos","resolveId","isIndexBookmark","selectNode","resolveIndex","isRangeBookmark","getBookmark$1","setRng","isBookmarkNode$1","isNbsp","actual","isWhiteSpace","isContent","isNode","moveStart","isInlineBlock","isWhiteSpaceNode$1","getNonWhiteSpaceSibling","inc","nextName","isTextBlock$1","ed","allowSpaces","replaceVars","vars","isEq$5","str1","normalizeStyleValue","getTextDecoration","decoration","getParents$2","areSimilarFormats","formatName","otherFormatName","validKeys","filterObj","format","validKey","formatter","fmt1","filteredFmt1","fmt2","filteredFmt2","equal$1","isBlockFormat","isSelectorFormat","isInlineFormat","shouldExpandToSelector","expand","isBookmarkNode","getParents$1","isWhiteSpaceNode","isTextBlock","findParentContentEditable","walkText","findSpace","findContent","findWordEndPoint","includeTrailingSpaces","lastTextNode","textSeeker","textOffset","findSelectorEndPoint","formatList","curFormat","findBlockEndPoint","scopeRoot","isAtBlockBoundary$1","findParentContainer","block_expand","isSelfOrParentBookmark","expandRng","includeTrailingSpace","walk$2","exclude","firstNode","lastNode","collectSiblings","endNode","siblings","findEndPoint","walkBoundary","parent_1","siblings_1","startPoint","endPoint","getRanges","ranges","rangeCount","getRangeAt","getCellsFromRanges","getSelectedNodes","getCellsFromElementOrRanges","selectedCells","getCellsFromEditor","getSel","getClosestTable","cell","getFirstChildren","getLastChildren$1","hasAllContentsSelected","getStartNode","getEndNode","moveEndPoint","hasAnyRanges","sel","runOnRanges","executor","fakeSelectionNodes","fakeNodeRng","preserve","fillBookmark","api$1","getOption","NodeValue","get$2","wrapName","isZeroWidth","isAnnotation","makeAnnotation","eDoc","decorate","_b","getOwnPropertySymbols","propertyIsEnumerable","__rest","master","_c","_d","_e","classes","annotate","newWrappers","getDoc","finishWrapper","processElements","processElement","wrap$3","processNodes","annotateWithBookmark","undoManager","transact","initialRng","hasFakeSelection","applyWordGrab","selectionRng","Annotator","register","changes","annotationChanged","getAll","directory","markers","nodesAlready","findAll","BookmarkManager","getBookmark","getContentEditableRoot$1","isXYWithinRange","fireError","errorType","fireFormatApply","fireFormatRemove","VK","BACKSPACE","DELETE","DOWN","ENTER","ESC","LEFT","RIGHT","SPACEBAR","TAB","UP","PAGE_UP","PAGE_DOWN","END","HOME","modifierPressed","shiftKey","ctrlKey","altKey","metaKeyPressed","isContentEditableFalse$5","ControlSelection","selectedElm","selectedElmGhost","resizeHelper","selectedHandle","resizeBackdrop","startX","startY","startW","startH","ratio","resizeStarted","startScrollWidth","startScrollHeight","elementSelectionAttr","editableDoc","rootDocument","abs","resizeHandles","nw","ne","se","sw","isImage","contextMenuSelectImage","touch","touches","isEventOnImageOutsideRange","getResizeTargets","firstElementChild","isResizable","setSizeProp","targets","setGhostElmSize","ghostElm","resizeGhostElement","deltaX","deltaY","proportional","resizeHelperX","resizeHelperY","screenX","screenY","getResizeImgProportional","display","selectedElmX","selectedElmY","scrollWidth","scrollHeight","origin","fireObjectResizeStart","endGhostResize","wasResizeStarted","showResizeRect","fireObjectResized","nodeChanged","targetElm","unbindResizeHandleEvents","targetWidth","targetHeight","hideResizeRect","selectedValue","handleElm","startDrag","updateResizeRect","controlElm","isChildOrEqual","img","disableGeckoResize","getStart","getEnd","isWithinContentEditableFalse","execCommand","handleMSControlSelect_1","delayedSelect","throttledUpdateResizeRect","composing","hasCeProperty","pointDoc","caretPositionFromPoint","offsetNode","caretRangeFromPoint","createTextRange","moveToPoint","rects","moveToElementText","findClosestIeRange","parentElement","findParent$1","moveOutOfContentEditableFalse","isEq$4","rng1","hasParent$1","findParent","hasParentWithName","isTable","isTableCell$2","isCeFalseCaretContainer","hasBrBeforeAfter","findTextNodeRelative","isAfterNode","lastInlineElement","parentBlockContainer","normalizeEndPoint","directionLeft","hasContentEditableFalseParent","isPrevNode","normalize$2","normRng","RangeUtils","normalize","normalizedRng","compareRanges","getCaretRangeFromPoint","documentFocusInHandler","api","getOffset","parseFloat","aggregate","properties","isNaN","getOuter","cumulativeInclusions","Dimension","walkUp","navigation","view","rest","Navigation","freeze","__proto__","frameElement","find$1","frames","pathTo","loc","excludeFromDescend","markerInfo","cleanupFun","pageYOffset","pageXOffset","absolute","get$1","createMarker","descend","withMarker","preserveWith","applyWithMarker","withScrollEvents","fireScrollIntoViewEvent","fireAfterScrollIntoViewEvent","withElement","elementMarker","startElement","endElement","scrollToMarker","viewHeight","intoWindowIfNeeded","viewportBottom","markerTop","markerBottom","largerThanViewport","intoWindow","innerHeight","intoFrame","frameViewHeight","op","viewportBounds","rangeIntoWindow","elementIntoWindow","rangeIntoFrame","elementIntoFrame","scrollRangeIntoView","hasFocus$1","active","SimRange","soffset","finish","foffset","adt$1","Situ","situ","domRange","exact","SimSelection","exactFromRange","simRange","getWin","startSitu","_finishSitu","_soffset","_finish","_foffset","getStart$1","browser$1","clamp$1","normalizeRng","isOrContains","isRngInRoot","shouldStore","nativeRangeToSelectionRange","readRange","bookmarkToNativeRng","store","newBookmark","validate","FocusManager","isEditorUIElement","registerEditorEvents","throttledStore","registerFocusOut","registerMouseUp","selectionChange","isManualNodeChange","register$3","mouseUpPage","registerPageMouseUp","DOM$8","isUIElement","customSelector","getCustomUiSelector","registerEvents$1","editorManager","focusedEditor","setActive","blurredEditor","getElement","getActiveElement","activeEditor","composed","getOriginalEventTarget","unregisterDocumentEvents","getFocusInElement","getCollapsedNode","normalizeSelection$1","caretPos","focusBody","hasElementFocus","rawBody","hasInlineFocus","iframeElement","hasIframeFocus","hasEditorOrUiFocus","hasUiFocus","activateEditor","skipFocus","quirks","refreshContentEditable","bookmarkRng","contentEditableHost","getContentEditableHost","focusEditor","getEndpointElement","real","skipEmptyTextNodes","orig","processRanges","typeLookup","walk$1","isEmptyTextNode","AstNode","insert","selfAttrs","cloneAttrs","selfAttr","shortEnded","refNode","restoreDataUris","re","imageId","uris","each$d","queryParts","DEFAULT_PORTS","ftp","http","https","mailto","safeSvgDataUrlElements","isInvalidUri","uri","allow_html_data_urls","allowSvgDataUrls","blockSvgDataUris","URI","baseUri","base_uri","source","isProtocolRelative","protocol","toAbsPath","urlMatch","part","userInfo","port","parseDataUri","uriComponents","decodeURIComponent","isDomSafe","options","decodedUri","unescape","getDocumentBaseUrl","pathname","setPath","pathMatch","file","getURI","toRelative","output","relativeUri","tu","uu","toRelPath","anchor","toAbsolute","noHost","absoluteUri","isSameOrigin","defaultPort","breakPoint","normalizedBase","outPath","nb","normalizedPath","noProtoHost","filteredClobberElements","findMatchingEndTagIndex","startIndex","startTagRegExp","endTagRegExp","shortEndedElements","startMatch","findCommentEndIndex","endMatch","lcHtml","isConditionalComment","endIfIndex","endIndex","endCommentRegexp","checkBogusAttribute","regExp","attrString","SaxParser","form","fix_self_closing","comment","cdata","pi","doctype","parseInternal","base64Extract","endRegExp","attrList","textData","isInternalElement","isShortEnded","elementRule","isValidElement","attribsValue","validAttributesMap","validAttributePatterns","stack","filteredUrlAttrs","parsingMode","processEndTag","valid","processText","processComment","allow_conditional_comments","processMalformedComment","startTag","parseAttribute","val2","val3","processAttr","fillAttrsMap","isValidPrefixAttrName","attrRule","tokenRegExp","attrRegExp","selfClosing","self_closing_elements","removeInternalElements","remove_internals","fixSelfClosing","processHtml","matchText","bogusValue","preserve_cdata","dataImageUri","chunks","extractBase64DataUris","findEndTag","trimInternal","bogusAllRegExp","tempAttrs","trimContentRegExp","trimHtml","getTempAttrs","matchLength","endTagIndex","trimExternal","getContentFromBody","defaultedArgs","getInner","setupArgs$3","updatedArgs","no_events","emptyRegExp","trimEmptyContents","each$c","ElementUtils","attribs","compareObjects","obj1","obj2","makeMap$1","Writer","indent","indentBefore","indent_before","indentAfter","indent_after","entity_encoding","htmlOutput","element_format","reset","getContent","HtmlSerializer","writer","handlers","handler","sortedAttrs","inner","nonInheritableStyles","Set","shorthandStyleProps","getStyleProps","hasInheritableStyles","isNonInheritableStyle","hasStyleConflict","nodeStyleProps","parentNodeStyleProps","valueMismatch","parentValue","nodeStyleProp","propExists","longhandProps","isChar","delta","isBeforeSpace","isAfterSpace","isEmptyText","matchesElementPosition","isImageBlock","isCefNode","isBogusAll$1","isBeforeImageBlock","isAfterImageBlock","isBeforeMedia","isAfterMedia","isBeforeTable","isAfterTable","isBeforeContentEditableFalse","isAfterContentEditableFalse","removeTrailingBr","allBrs","rawNode","getLastChildren","fillWithPaddingBr","trimBlockTrailingBr","lastChildPrevSibling","rawParent","parents$1","parentsAndSelf","navigateIgnoreEmptyTextNodes","getClosestBlock$1","isAtBeforeAfterBlockBoundary","newPos","fromBlock","isAtBlockBoundary","isAtStartOfBlock","isAtEndOfBlock","isBeforeBlock","isAfterBlock","isBr","findBr","parentBlocks","isBeforeBr$1","isAfterBr","getElementFromPrevPosition","findPreviousBr","findNextBr","isInMiddleOfText","getClosestBlock","hasSpaceBefore","hasSpaceAfter","isInPre","isPreValue","isAtLineBoundary","isAtBeginningOfBody","isAtEndOfBody","needsToBeNbspLeft","needsToBeNbspRight","needsToBeNbsp","isNbspAt","hasNbsp","normalizeNbspInMiddleOfTextNode","newText","chars","normalizeNbspMiddle","normalizeNbsps","firstPos","normalizeNbspAtStart","lastPos","normalizeNbspAtEnd","normalizeNbspsInEditor","normalize$1","isEndOfContent","isStartOfContent","replaceData","previousCharIsSpace","normalizeContent","normalizeWhitespaceAfter","whitespaceCount","normalizeWhitespaceBefore","mergeTextNodes","prevNode","normalizeWhitespace","mergeToPrev","whitespaceOffset","newNode","removeNode","insertData","needsReposition","getPreviousSiblingCaretPosition","getNextSiblingCaretPosition","findCaretPositionBackwards","startPosition","findCaretPositionBackwardsFromElm","findCaretPositionForward","findCaretPositionForwardsFromElm","findCaretPosOutsideElmAfterDelete","findCaretPosition","setSelection$1","paddEmptyBlock","deleteNormalized","afterDeletePosOpt","oc","prevTextOpt","nextTextOpt","deleteElement$2","moveCaret","afterDeletePos","parentBlock","normalizedAfterDeletePos","isInlineElement","setContent","setCursorLocation","paddPos","getTableCells","tableCellRng","deleteAction","singleCellTable","fullTable","partialTable","multiTable","getClosestCell$1","isExpandedCellRng","cellRng","getTableFromCellRng","startParentTable","endParentTable","getTableSelectionFromCellRng","cells","tableSelection","getTableSelections","selectionDetails","isSameTable","sameTableSelection","startCell","endCell","startTableSelection","getCellRangeFromStartTable","endTableSelection","getCellRangeFromEndTable","getCellIndex","getSelectedCells","isSingleCellTableContentSelected","optCellRng","rows","isSingleCellTable","unselectCells","startTable","endTable","otherContentRng","getActionFromRange","isRootFromElement","getCellRng","getTable","isStartInTable","isEndInTable","isMultiTable","getTableDetailsFromRange","startTableSelectedCells","endTableSelectedCells","handleMultiTable","handleSingleTable","freefallRtl","cleanCells","deleteContentInsideCell","isFirstCellInSelection","insideTableRng","deleteCellContents","collapseAndRestoreCellSelection","selectedNode","emptySingleTableCells","outsideDetails","editorRng","cellsToClean","outsideBlock","getOutsideBlock","deleteContents","startInTable","emptyBlock","handleEmptyBlock","endPointCell","emptyMultiTableCells","startTableCells","endTableCells","betweenRng","startTableCellsToClean","endTableCellsToClean","moveSelection","lastBlock","additionalCleanupNodes","deleteTableElement","deleteTableRange","startElm","getParentCaption","action","deleteCellRange","emptyElement","deleteCaptionRange","getParentCell","deleteCaretInsideCaption","fromCaption","isDeleteOfLastCharPos","emptyCaretCaption","toCaption","validateCaretCaption","deleteCaretCells","fromCell","toCell","deleteBetweenCells","isNearTable","deleteCaret$3","fromPos","isBeforeOrAfterTable","deleteCaretCaption","backspaceDelete$9","deleteRange$2","normalizeBlockSelectionRange","commonAncestorContainer","newEndPos","isPaddedEmptyBlock","hasOnlyOneChild$1","isPaddingNode","isListFragment","nonEmptyElements","isEmptyFragmentElement","isListItemPadded","isPadding","trimListItems","getParentLi","findLastOf","newCaretPos","insertBefore$1","findFirstIn","insertAtCaret$1","domFragment","cleanupDomFragment","toDomFragment","liTarget","liElms","isAt","caretWalker","insertAfter$1","beforeRng","afterRng","cloneContents","getSplit","insertMiddle","isTableCell$1","deleteSelectedContent","isTableCellContentSelected","insertHtmlAtCaret","details","trimOrPadLeftRight","parser","merge","bookmarkHtml","paste","caretElement","canHaveChildren","parserArgs","isParentBlockLi","markFragmentElements","_selectionOverrides","showBlockCaretContainer","invalid","validInsertion","textInlineElements","root_1","elementUtils_1","reduceInlineTextElements","nextRng","parentEditableElm","isPartOfFragment","findNextCaretRng","moveSelectionToMarker","trimBrsFromTableCell","addVisual","traverse","filter$1","nodeFilters","attributeFilters","nodeMatches","attrMatches","name_2","findMatchingNodes","isTreeNode","setEditorHtml","noSelection","setContentInternal","setupArgs$2","getNodeFilters","getAttributeFilters","no_selection","setContentTree","padd","forcedRootBlockName","isRootContent","setContentString","sibling$2","ensureIsRoot","closest$1","transform","transformed","isEq$3","matchesUnInheritedFormatSelector","inherit","matchParents","similar","matchNode","matchName$1","matchItems","itemName","onmatch","expectedValue","isEmptyValue","match$2","rawElm","matchAllOnNode","formatNames","matchSimilar","isVariableValue","field","fieldValues","isVariableFormatName","ZWSP","CARET_ID","isCaretContainerEmpty","getEmptyCaretContainers","findFirstTextNode","createCaretContainer","fill","removeCaretContainerNode","trimZwspFromCaretContainer","removeCaretContainer","appendNode","insertFormatNodesIntoCaretContainer","formatNodes","innerMostFormatNode","formatNode","removeCaretFormat","hasContentAfter","expandedRng","newCaretContainer","insertCaretContainerNode","cleanedFormatNode","validFormats","matchedFormats","fmtName","clonedFormatNode","cleanFormatNode","caretTextNode","setup$k","keyCode","disableCaretContainer","isFormatElement","inlineElements","postProcessHooks","each$b","addPostProcessHook","blocks","isPre","getSelectedBlocks","pre","pre1","pre2","each$a","isElementNode$1","findElementSibling","mergeSiblingsNodes","elementUtils","tmpSibling","mergeSiblings","merge_siblings","processChildElements","hasStyle","applyStyle","unwrapEmptySpan","removeResult","MCE_ATTR_RE","each$9","isEq$2","isChildOfInlineParent","getContainer","lastIdx","normalizeTableSelection","isTableCellOrRow","childNode","wrap$1","wrapWithSiblings","rootBlockElm","forcedRootBlock","list_block","forced_root_block_attrs","isMixedFormat","removeFormatInternal","compareNode","stylesModified","matchName","links","isColorFormatAndAnchor","preserve_attributes","attrsToPreserve","remove_similar","valueOut","removeFormat$1","newName","removeFormatFromClone","remove$1","splitToFormatRoot","formatRoot","findFormatRoot","lastClone","firstClone","formatRootParent","mixed","wrapAndSplit","removeNodeFormat","fmt","lastContentEditable","currentNodeMatches","textDecoration","isRemoveBookmarkNode","removeRngStyle","ceFalseOverride","each$8","mergeWithChildren","clear_child_styles","clearChildStyles","each$7","isElementNode","applyFormat$1","setElementFormat","onformat","styleVal","applyNodeStyle","found","createWrapElement","wrapElm","applyRngStyle","nodeSpecific","currentWrapElm","parentName","canFormatEmptyLines","validBRParentElements","hasCaretNodeSibling","canFormatBR","childCount","isEmptyTextNode$1","getChildCount","childElement","mergeStyles","merge_with_parents","mergeWithParents","backgroundColor","mergeBackgroundColorAndFontSize","processTextDecorationsAndColor","mergeTextDecorationsAndColor","mergeSubSup","wordcharRegex","importNode","applyCaretFormat","curSelNode","firstFormat","forced_root_block","defaultBlock","fake","postProcess$1","formatItem","hasVars","fallbackElement","matchingNode","matchingFormat","updateAndFireChangeCallbacks","registeredCallbacks","runIfChanged","spec","node_1","withSimilar","withoutSimilar","withVars","formatChangedInternal","registeredFormatListeners","formats","nodeOrRange","setup$j","formatChangeItems","getCurrent","toAppendTo","addListeners","removeListeners","fromElements","tableModel","tableRow","cellPosition","getSpan","cellExists","getWidth","row","findElementPos","extractRows","sx","sy","ey","newRows","tableElm","rowspan","colspan","y2","x2","fillout","skipCellsX","toDom","tableElement","tableBody","createDomTable","modelRowsToDomRows","subsection","subTable","getFullySelectedListWrappers","_li","findParentListContainer","listCont","listElm","listStyles","_style","getWrapElements","commonAnchorContainer","wrapElements","listWrappers","allWrappers","directListWrappers","emptyFragment","getFragmentFromRange","innerElm","wrapped","getTableFragment","selectedTableCells","firstCell","lastCell","fullTableModel","sectionedTableModel","read$3","getSelectionFragment","isCollapsibleWhitespace","getInnerText","bin","shouldTrim","trimLeadingCollapsibleText","getSelectedContentInternal","setupArgs$1","parentBlockOpt","contextNodeName","getContextNodeName","shouldTrimSpaces","nonRenderedText","parentBlockText","textIndex","getTextContent","tmpElm","contextual","getSerializedContent","getOuterHtml","insertAt","write","fragments","vDown","vUp","buildScript","buildSnake","getMiddleSnake","currentFragments","removeAt","applyDiff","start1","end1","start2","end2","middle","diag","i2","snake","sum","lazyTempDocument","implementation","createHTMLDocument","createFromEditor","trimmedFragments","trimmed","beforeBookmark","createFragmentedLevel","createCompleteLevel","applyToEditor","level","getLevelContent","getCleanLevelContent","isEq$1","level1","level2","hasEqualContent","hasEqualCleanedContent","isUnlocked","locks","setTyping","typing","endTyping","makePlainAdaptor","beforeChange","beforeChange$1","currentLevel","lastLevel","bm","customUndoRedoLevels","getCustomUndoRedoLevels","setDirty","addUndoLevel$1","undo","undo$1","redo","redo$1","clear$1","reset$1","hasUndo","hasUndo$1","hasRedo","hasRedo$1","ignore","transact$1","ignore$1","extra","callback1","callback2","extra$1","matchAll","matchedFormatNames","checkedMap","canApply","toggle","formatChanged","getContentInternal","insertContent","hasVisual","isVisualAidsEnabled","matchedElm","getVisualAidsTableClass","value_1","cls_1","getVisualAidsAnchorClass","addVisualInternal","getModel","isRtc","plugins","setup$i","editorCast","rtcPlugin","setup","getRtcSetup","rtcInstance","nul","makeNoopAdaptor","rtcEditor","defaultVars","_undoManager","_locks","_index","_node","_similar","_rfl","_format","_details","getRawModel","makeRtcAdaptor","rtc","isRemote","getRtcInstanceWithFallback","getRtcInstanceWithError","getContent$1","getSelectedContent","mergeAndNormalizeText","outerNode","outer","outerElm","oldLength","innerTextNode","walkPastBookmark","normalizeTextIfRequired","setContent$1","setupArgs","eventArgs","contextBlock","contextArgs","cleanContent","prevText","nextText","rngSetContent","createContextualFragment","deleteFromCallbackMap","newCallbacks","merger","isNativeIeSelection","isAttachedToDom","EditorSelection","selectedRange","explicitRange","selectorChangedWithUnbind","selectorChangedData","currentSelectors","findMatchingNode","matchedSelectors","SelectorChanged","getRng$1","tryCompareBoundaryPoints","how","sourceRange","destinationRange","compareBoundaryPoints","anchorNode","START_TO_START","END_TO_END","isValidRange","ieRange","removeAllRanges","addRange","setBaseAndExtent","focusNode","isForward","anchorRange","anchorOffset","focusRange","focusOffset","bookmarkManager","controlSelection","compareEndPoints","setNode","endElm","selectedBlocks","selectorChanged","getScrollContainer","scrollContainer","scrollElementIntoView","placeCaretAt","addFontToSpansFilter","domParser","fontSizes","face","removeAttrs","addFilters","convert_fonts_to_spans","font_size_legacy_values","addStrikeToSpanFilter","uriParts","buildBlob","atob","Uint8Array","Blob","uriToBlob","rejectWithError","xhr_1","XMLHttpRequest","open","responseType","response","send","blobUriToBlob","count$1","imageToBlobInfo","blobCache","base64","blobInfo","getByData","image","blob","getByUri","reader","FileReader","onloadend","readAsDataURL","blobToDataUri","dataUri","ImageScanner","uploadStatus","cachedPromises","images","getAllImages","isUploaded","promises","imageInfo","newPromise","catch","paddEmptyNode","blockElements","padd_empty_with_br","hasOnlyChild","whitespaceElements","isPadded","registerBase64ImageFilter","blob_cache","processImage","inputSrc","isInternalImageSource","isBogusImage","parseDataUri$1","images_dataimg_filter","imgElem_1","Image","isValidDataImg","blobUri","addAttributeFilter","each$6","explode$2","extend$4","DomParser","matchedNodes","matchedAttributes","root_name","filterNode","list","fi","fl","invalidChildren","textRootBlockElements","rootBlockName","getRootBlockName","whiteSpaceElements","startWhiteSpaceRegExp","endWhiteSpaceRegExp","allWhiteSpaceRegExp","isAllWhiteSpaceRegExp","isInWhiteSpacePreservedElement","createNode","removeWhitespaceBefore","textVal","textNodeNext","cloneAndExcludeBlocks","isLineBreakNode","parent_2","attrFiltersLen","isNodeEmpty","tempNode","isTextRootBlockEmpty","isPaddedWithNbsp","nonSplitableElements","textBlockElements","removeOrUnwrapInvalidNode","originalNodeParent","children_1","newParent","fixed","currentNode","fixInvalidChildren","rootBlockNode","addRootBlocks","remove_trailing_brs","prevName","newRel","allow_unsafe_link_target","appendRel","allow_html_in_named_anchor","fix_list_elements","classValue","validClassesMap","register$1","inline_styles","register$2","hasEventListeners","shouldFireEvent","oldDoc","clonedNode","impl","doc_1","firePreProcess","preProcess","addTempAttr","htmlParser","toHtml","serializeNode","outArgs","firePostProcess","postProcess","DomSerializerImpl","internalName","hasChildren","getHtmlFromNode","brNode1","brNode2","trimTrailingBr","parseHtml","addRules","setRules","DomSerializer","domSerializer","getContent$2","setContent$2","DOM$7","safeDestroy","editorUpload","save","is_removing","unbindAllNativeEvents","hasHiddenInput","fireRemove","orgDisplay","restoreOriginalStyles","fireDetach","automatic","destroyed","_beforeUnload","theme","formElement","_mceOldSubmit","submit","formEventDelegate","restoreForm","contentAreaContainer","editorContainer","bodyElement","clearDomReferences","deepMerge","objects","curObject","deprecatedSettings","deprecatedPlugins","movedToPremiumPlugins","getDeprecatedSettings","settingNames","setting","getDeprecatedPlugins","hasPlugin","plugin","pluginNames","deviceDetection","legacyMobilePlugins","defaultTouchSettings","table_grid","object_resizing","resize","normalizePlugins","trimmedPlugins","extractSections","sections","sectionResult","hasSection","getToolbarMode","getDefaultMobileSettings","mobileSettings","defaultMobileSettings","toolbar_mode","toolbar_sticky","menubar","getExternalPlugins","overrideSettings","userDefinedExternalPlugins","external_plugins","getPlatformPlugins","isMobileDevice","desktopPlugins","mobilePlugins","section","isSectionTheme","processPlugins","defaultOverrideSettings","forcedPlugins","forced_plugins","mobileConfig","getSectionConfig","combinedPlugins","combinePlugins","combineSettings","defaultSettings","defaultDeviceSettings","mobile","extendedSettings","isOnMobile","sectionSettings","getSection","getEditorSettings","documentBaseUrl","baseDefaults","document_base_url","add_form_submit_trigger","submit_patch","add_unload_trigger","convert_urls","relative_urls","remove_script_host","visual","hidden_input","convertURL","getDefaultSettings","finalSettings","deprecation_warnings","rawSettings","hasDeprecatedPlugins","hasDeprecatedSettings","isLegacyMobileTheme","listJoiner","themesMessage","pluginsMessage","settingsMessage","logDeprecationsWarning","getFiltered","getParamObject","IconManager","iconPack","icons","getProp","propName","getComputedSizeProp","getClientWidth","getClientHeight","getMarginTop","getMarginLeft","isXYInContentArea","bodyElm","transposedPoint","transpose","isInsideElementContentArea","isEditorAttachedToDom","rawContainer","getContentAreaContainer","NotificationManager","notifications","getImplementation","unimplemented","getNotificationManagerImpl","close","getArgs","getTopNotification","closeNotification","notification","otherNotification","fireEvent","progressBar","timeout","getEl","addNotification","getNotifications","serviceMessage","getServiceMessage","registerEvents","WindowManager","dialogs","getWindowManagerImpl","openUrl","alert","confirm","getParams","setParams","funcBind","addDialog","dialog","fireOpenEvent","closeDialog","fireCloseEvent","otherDialog","storeSelectionAndOpenDialog","openDialog","windowManagerImpl","displayNotification","notificationManager","displayError","_skinLoaded","logError","createLoadError","pluginLoadError","initError","getContentCssUrls","transformToUrls","contentCss","getContentCss","cssLinks","skinUrl","contentCssFile","isContentCssSkinName","documentBaseURI","appendContentCssFromSettings","contentCSS","getFontCssUrls","UploadStatus","blobUriStatuses","createStatus","resultUri","hasBlobUri","getResultUri","isPending","markPending","markUploaded","removeFailed","uuid","rnd","Uploader","pendingPromises","defaultHandler","progress","xhr","withCredentials","credentials","upload","onprogress","loaded","total","path1","path2","json","JSON","responseText","basePath","formData","FormData","filename","handlerSuccess","handlerFailure","resolvePending","uploadBlobs","blobInfos","openNotification","pendingUploadBlobInfo","closeNotification_1","failureOptions","percent","uploadBlobInfo","createUploader","EditorUpload","uploader","imageScanner","toBlobInfo","mime","findFirst","cachedBlobInfo","removeByUri","revokeObjectURL","BlobCache","urlFilters","changeHandler","lastChangedLevel","fireIfChanged","UploadChangeHandler","aliveGuard","replaceString","replaceImageUrl","targetUrl","replacementUrl","replacementString","replaceUrlInUndoStack","uploadImages","scanForImages","imageInfos","imagesToRemove","filteredResult","uploadInfo","shouldReplaceBlobUris","replaceImageUriInView","uploadError","uploadUri","uploadImagesAuto","isValidDataUriImage","imgElm","dataImgFilter","getImagesDataImgFilter","resultItem","replaceBlobUris","source_view","addFilter","FormatRegistry","valigntop","verticalAlign","valignmiddle","valignbottom","alignleft","preview","textAlign","aligncenter","marginLeft","marginRight","alignright","alignjustify","bold","fontWeight","italic","fontStyle","underline","strikethrough","forecolor","hilitecolor","fontname","fontFamily","fontsize","fontSize","lineheight","lineHeight","fontsize_class","blockquote","subscript","superscript","_fmt","_itemName","customValue","removeformat","getFormats","unregister","each$5","parsedSelectorToHtml","ancestry","sItem","wrapInHtml","parentCandidate","ancestorName","parentRequired","elmRule","getRequiredParent","siblingElm","parseSelectorItem","$0","$3","$4","getCssText","previewFrag","parentFontSize","previewCss","previewStyles","getPreviewStyles","removeVars","previewOpt","previewElm","Formatter","formatChangeState","addShortcut","setup$h","applyFormat","removeFormat","toggleFormat","matchFormat","closestFormat","matchAllFormats","matchNodeFormat","canApplyFormat","shouldIgnoreCommand","cmd","UndoManager","addUndoLevel","isFirstTypedCharacter","addNonTypingUndoLevel","command","isDirty","modKey","inputType","isInsertFromPasteOrDrop","addKeyboardShortcuts","nonTypingKeycodes","placeholderAttr","isKeyboardEvent","isDeleteEvent","setup$g","placeholder","getPlaceholder","updatePlaceholder","isNonTypingKeyboardEvent","showPlaceholder","isTypingKeyboardEvent","isForcedRootBlockFalse","isVisuallyEmpty","firePlaceholderToggle","strongRtl","isInlineTarget","getInlineBoundarySelector","findRootInline","findInlineParents","normalizePosition","normalizeForwards","normalizeBackwards","isTextBlockOrListItem","getParentBlock$1","isBeforeRoot","paddEmptyBody","placeCaretInEmptyBody","blockBoundary","getBlockPosition","containerElm","blockPosition","readFromRange","fromBlockPos","toBlockPos","blockPos","lastPositionInBlock","skipLastBr","isDifferentBlocks","parent1","parent2","hasSameParent","isEditable$1","getChildrenUntilBlockBoundary","extractChildren","removeEmptyRoot","nestedBlockMerge","toBlock","insertionPoint","sidelongBlockMerge","getInsertionPoint","parentsAndSelf$1","findInsertionPoint","trimBr","mergeBlockInto","mergeBlocks","block1","block2","backspaceDelete$8","read$1","isRawNodeInTable","isEverythingSelected","noPrevious","noNext","isSelectionInTable","deleteRange$1","emptyEditor","deleteRangeMergeBlocks","backspaceDelete$7","_forward","isContentEditableTrue$2","isContentEditableFalse$4","showCaret","getNodeRange","renderCaretAtRange","caretPositionNode","caretPositionBeforeNode","ceRoot","renderRangeCaret","isBeforeBoundary","isAfterBoundary","deleteContentAndShowCaret","peekCaretPosition","caretRange","deleteRange","trimEmptyTextNode","backspaceDelete$6","getNextPosFn","isBeforeFn","nextCaretPosition","deleteBoundaryText","DeleteAction","moveToElement","moveToPosition","deleteEmptyBlockOrMoveToCef","toCefElm","blockElm","findCefPosition","isDeleteFromCefDifferentBlocks","getContentEditableAction","caretLocation","isAtContentEditableBlockCaret","getContentEditableBlockAction","skipMoveToActionFromInlineCefToContent","getAncestorCe","backspaceDeleteCaret","read","hideFakeCaret","deleteElement$1","backspaceDeleteRange","paddEmptyElement","backspaceDelete$5","backspaceDelete$4","deleteCaret$2","isText","startsWithCaretContainer","endsWithCaretContainer","createZwsp","insertInline","insertInlineBefore","insertInlineAfter","insertInlinePos","isPosCaretContainer","caretNode","renderCaret","evaluateUntil","fns","Location","rescope$1","nPos","isNotInsideFormatCaretContainer","findInsideRootInline","start$1","isValidLocation","readLocation","getName","outside","inside","betweenInlines","fromInline","toInline","hasSameParentBlock","skipNoMovement","fromLocation","toLocation","location2","location1","findLocationSimple","findLocation$1","findLocationTraverse","BreakType","moveRel","modify","moveByWord","hasSelectionModifyApi","VDirection","flip","positions","getBreakType","currentPos","nextPos","Br","Block","Wrap","getPositionsUntil","breakType","breakAt","Eol","getAdjacentLinePositions","getPositionsUntilBreak","findClosestHorizontalPositionFromPoint","lastRect","newRect","lastDist","findClosestHorizontalPosition","targetRect","getPositionsUntilPreviousLine","getPositionsUntilNextLine","getPositionsAbove","getPositionsBelow","getNodeClientRects","toArrayWithNode","customEventRootDelegates","beforeUnloadDelegate","walkUntil$1","isAboveFn","isBeflowFn","line","targetClientRect","findUntil","upUntil","Up","downUntil","Down","isAboveLine","lineNumber","aboveLineNumber","isLine","isLineNumber","isContentEditableFalse$3","findNode","distanceToRectLeft","distanceToRectRight","isInsideX","isInsideY","findClosestClientRect","allowInside","oldClientRect","oldDistance","newDistance","walkUntil","includeChildren","closestFakeCaret","fakeTargetNodeRects","getFakeCaretTargets","targetNodeRects","checkInside","closestNodeRect","targetNodeRect","checkPosFn","lineRects","findLineNodeRects","caretInfo","moveToRange","renderRangeCaretOpt","moveHorizontally","isBefore","isAfter","rangeIsInContainerBlock","moveVertically","caretClientRect","linePositions","nextLinePositions","nextLineRect","dist1","dist2","caretPositions","isBelowFn","getClientRect","positionsUntil","closestNextLineRect","getLineEndPoint","moveToLineEndPoint$3","setCaretPosition","setSelected","renderCaretLocation","safeRemoveCaretContainer","isAtZwsp","move$2","isInlineTarget$1","findLocation","moveWord","_caret","setupSelectedState","inlineBoundaries","selectedInlines","targetInlines","toggleInlines","inlines","_inline","renderInsideInlineCaret","moveNextWord","movePrevWord","moveToLineEndPoint$2","linePoint","outsideLoc","setCaretLocation","deleteFromTo","rangeFromPositions","backspaceDeleteCollapsed","rescope","toPosition","normalizedFirstPos","normalizedLastPos","hasOnlyTwoOrLessPositionsLeft","backspaceDelete$3","hasOnlyOneChild","deleteLastPosition","parentInlines","isFormatElement$1","innerMost","replaceWithCaretFormat","deleteCaret$1","getParentInlines","normalizedFromPos","prevPos","willDeleteLastPositionInElement","backspaceDelete$2","deleteElement","backspaceDelete$1","isNearMedia","deleteCaret","parseIndentValue","number","getIndentStyleName","useMargin","canOutdent","getBlocksToIndent","isReadOnly","indentStyleName","intentValue","validateBlocks","isListComponent","parentIsListComponent","indentation","getIndentation","indentUnit","indentValue","queryCommandState","unit","styleValue","indentElement","backspaceDelete","nativeCommand","setup$f","addCommand","deleteCommand","forwardDeleteCommand","getTouch","setup$e","startData","longpressFired","debounceLongpress","distX","distY","isFarEnough","isEqualNode","isBlockElement","isValidTarget","shouldRemoveTextNode","rootNodeName","hasBlockParent","restoreSelection","blockCaretContainer","removeIeControlRect","handleBlockContainer","findBlockCaretContainer","isContentEditableFalse$2","exitPreBlock","getVisualCaretPosition$1","hasForcedRootBlock","newBlock","textBlock","createTextBlock","getHorizontalRange","moveToCeFalseHorizontally","getVerticalRange","down","moveToCeFalseVertically","moveH$2","newRange","moveV$3","moveToLineEndPoint$1","isTarget","rangeBefore","insertElement","insertEmptyLine","insertBr","insertBlock","isAtFirstOrLastLine","isAtLastLine","isAtFirstLine","moveCaretToNewEmptyLine","rootBlockAttrs","getClosestTargetBlock","moveV$2","match$1","patterns","defaultPatterns","matchesEvent","execute","moveH$1","moveV$1","moveToLineEndPoint","getClosestCell","getYAxisValue","isTargetCorner","corners","tds","deflate","getCorners","corner","newCorner","oldCorner","oldDist","sqrt","newDist","findClosestCorner","getClosestCellAbove","getClosestCellBelow","findClosestPositionInAboveCell","findClosestPositionInBelowCell","isAtTableCellLine","lineInfo","startsWithWrapBreak","startsWithBrBreak","breakPos","hasNextBreak","isAtFirstTableCellLine","isAtLastTableCellLine","navigateHorizontally","_td","isCaretAtStartOrEndOfTable","renderBlock","navigateVertically","getClosestAbovePosition","getClosestBelowPosition","move$1","mover","moveH","moveV","setup$b","executeKeydownOverride$3","setup$a","executeKeydownOverride$2","executeKeyupOverride","moveToCaretPosition","firstNonWhiteSpaceNodeSibling","getParentBlock","hasParent","isListBlock","getContainerBlock","containerBlock","containerBlockParent","isFirstOrLastLi","insert$3","createNewBlock","newBlockName","isFirstChild","tmpRng","hasFirstChild","isEmptyAnchor","containerAndSiblingName","canSplitBlock","normalizeZwspOffset","getEditableRoot","editableRoot","setForcedBlockAttrs","forcedRootBlockAttrs","attrStyles","currentStyles","newStyles","attrClassesOpt","attrClasses","currentClassesOpt","currentClasses","filteredClasses","newClasses","appliedAttrs","remainingAttrs","applyAttributes","insert$2","parentBlockName","isAfterLastNodeInContainer","shouldKeepStyles","isCaretAtStartOrEndOfBlock","normalizedOffset","insertNewBlockAfter","containerBlockName","shouldEndContainerOnEmptyBlock","isTableCell","wrapSelfAndSiblingsInDefaultBlock","includeZwspInRange","trimZwsp","trimLeadingLineBreaks","firstChilds","trimInlineElementsOnLeftSideOfBlock","addBrToBlockIfNeeded","moveSelectionToBr","brElm","extraBr","insertBrAtCaret","isControlKey","hasRightSideContent","insertBrBefore","insertBrAfter","hasBrAfter","isAnchorLink","isInsideAnchor","insertBrOutsideAnchor","insert$1","anchorLocation","readInlineAnchorLocation","newLineAction","shouldBlockNewLine","_shiftKey","getNoNewLineSelector","shouldBlockNewLine$1","isBrMode","requiredState","inListBlock","isListItemParentBlock","inBlock","getParentBlockName","inPreBlock","shouldPutBrInPre","shouldPutBrInPre$1","inBrContext","getBrNewLineSelector","shouldInsertBr","hasShiftKey","_editor","canInsertIntoEditableRoot","rootEditable","getEditableRoot$1","predicates","getAction","setup$9","handleEnterKeyEvent","setup$8","executeKeydownOverride$1","setup$7","keypressThrotter","setupIeInput","isComposing","platform","isPageUpDown","setNodeChangeBlocker","blocked","setup$6","executeKeyupAction","insertTextAtPosition","insertNbspAtPosition","insertSpaceAtPosition","insertInlineBoundarySpaceOrNbsp","checkPos","needsToHaveNbsp","insertSpaceOrNbspAtSelection","locationToCaretPosition","setSelection","setup$5","executeKeydownOverride","registerKeyboardOverrides","setup$c","NodeChange","lastRng","lastPath","nativeRng","fakeRng","isSameElementPath","initialized","currentPath","setup$3","preventSummaryToggle","filterDetails","isTextBlockNode","setup$2","detail","normalizeSelection","getAbsolutePosition","calc","bodyPosition","getBodyPosition","scrollPosition","getScrollPosition","mousePosition","iframePosition","inlineScroll","iframeScroll","getBodyScroll","getMousePosition","isContentEditableFalse$1","isContentEditableTrue$1","createGhost","clonedElm","opacity","overflow","padding","boxSizing","removeElement","isLeftMouseButtonPressed","ceElm","elmPos","dragging","maxX","maxY","relX","relY","ghost","drop","targetElement","dragElement","isValidDropTarget","targetClone_1","cloneElm","removeDragState","bindFakeDragEvents","pageDom","dragStartHandler","dragHandler","throttledPlaceCaretAt","movement","targetPos","applyRelPos","overflowX","moveGhost","move","dropHandler","dragEndHandler","init$2","realTarget","blockIeDrop","shouldBlockUnsupportedDrop","preventFileDrop","dataTransfer","types","preventFileDropIfUIElement","editorRoot","eventNames","blockUnsupportedFileDrop","isContentEditableTrue","isContentEditableFalse","getContentEditableRoot","SelectionOverrides","selectedElement","fakeCaret","realSelectionId","isFakeSelectionTargetElement","isNearFakeSelectionElement","setRange","getRange","isWithinCaretContainer","isRangeInCaretContainer","normalizeShortEndedElementSelection","selectElement","targetClone","origTargetClone","$realSelectionContainer","setupOffscreenSelection","nodeElm","setElementSelection","afterNode","removeElementSelection","contentEditableRoot","hasBetterMouseTarget","targetBlock","hasNormalCaretPosition","fakeCaretInfo","clipboardData","realSelectionElement","clearData","setData","outerText","renderFocusCaret","setup$1","Quirks","getAttributeApplyFunction","isSelectionAcrossElements","isGecko","isWebKit","mceInternalUrlPrefix","mceInternalDataType","setEditorCommandState","emptyEditorWhenDeleting","serializeRng","allRng","allContentsSelected","selectAll","shortcuts","documentElementEditingFocus","Range","body_1","blur","selectControlElements","disableBackspaceIntoATable","setGeckoEditingOptions","isReadOnly$1","addBrAfterLastLinks","showBrokenImageIcon","contentStyles","restoreFocusOnKeyDown","bodyHeight","blockCmdArrowNavigation","tapLinksAndImages","blockFormSubmitInsideEditor","ieInternalDragAndDrop","selectionHtml","internalContent","escape","setMceInternalContent","getMceInternalContent","internal","queryCommandSupported","template","setAttributeNode","DOM$6","getRootName","removeUndefined","mkSchemaSettings","boolean_attributes","move_caret_before_on_enter_elements","non_empty_elements","short_ended_elements","text_inline_elements","whitespace_elements","format_empty_lines","mkParserSettings","moveSelectionToFirstCaretPosition","storeNative","initEditor","bindPendingEventDelegates","fireInit","execCallback","auto_focus","autoFocus","getStyleSheetLoader$1","ui","loadContentCss","removeCss","contentCssText_1","allStylesheets","framedFonts","makeStylesheetLoadingPromises","content_style","appendStyle","preInit","firePreInit","browser_spellcheck","gecko_spellcheck","spellcheck","firePostRender","directionality","getDirectionality","protect","initEditorWithInitialContent","startContent","loadInitialContent","initContentBody","skipWrite","visibility","orgVisibility","iframeHTML","hex_colors","force_hex_style_colors","createParser","mkSerializerSettings","annotator","_nodeChangeDispatcher","setup$4","setup$d","setupRtcThunk","setupRtc","setProgressState","_rtcMode","DOM$5","getIframeHtml","getDocType","bodyId","getBodyId","bodyClass","getBodyClass","translatedAriaText","getIframeAriaText","createIframe","title","customAttrs","iframe","iframeTitle","ifr","getIframeAttrs","frameBorder","allowTransparency","isDomainRelaxed","domain","hostname","bodyUuid","domainRelaxUrl","relaxDomain","iframeContainer","DOM$4","initPlugin","initializedPlugins","Plugin","pluginInstance","pluginInitError","trimLegacyPrefix","createThemeFalseResult","renderThemeFalse","renderThemeFalseIframe","renderThemeUi","renderUI","renderFromLoadedTheme","iframeHeight","renderFromThemeFunc","iconPackName","currentIcons","loadIcons","svgData","icon","addIcon","initIcons","Theme","initTheme","initPlugins","renderInfo","uiApiFacade","disable","isDisabled","enable","augmentEditorUiApi","boxInfo","hidden","init$1","DOM$3","hasSkipLoadPrefix","loadLanguage","scriptLoader","languageCode","languageUrl","getLanguageUrl","url_1","languageLoadError","getIconsUrlMetaFromName","defaultIconsUrl","customIconsUrl","getIconsUrl","getIconsUrlMetaFromUrl","cat","urlMeta","iconsLoadError","themeUrl","getThemeUrl","loadTheme","getExternalPlugins$1","depPlugin","url_2","loadPlugins","render","snapshot","clone$3","getStyleSheetLoader","isInline","resetContent","shouldPatchSubmit","triggerSave","windowManager","isEncodingXml","shouldAddFormSubmitTrigger","shouldAddUnloadTrigger","set_dirty","addVisual$1","legacyPropNames","getSpecifiedFontProp","legacyPropName","getProperty","getFontProp","getComputedFontProp","getFontSize","getFontFamily","findFirstCaretElement","bindRange","binder","getCaretElement","mapRange","mapper","fromFontSizeNumber","fontSizeNumber","getFontStyleValues","fontClasses","getFontSizeClasses","normalizeFontNames","font","fonts","insertAtCaret","processValue","each$4","EditorCommands","commands","setupCommands","skip_focus","customCommand","queryCommandValue","addCommands","commandList","addQueryStateHandler","addQueryValueHandler","hasCustomCommand","execNativeCommand","isFormatMatch","storeSelection","selectionBookmark","_command","_ui","queryCommandEnabled","align","listParent","fontNameAction","fontSizeAction","lineHeightAction","customCode","editingHost","selectNodeContents","alignStates","Undo","Redo","fontNameQuery","fontSizeQuery","specifiedStyle","lineHeightQuery","internalContentEditableAttr","setContentEditable","toggleReadOnly","removeFakeSelection","switchOnContentEditableTrue","restoreFakeSelection","registerFilters","processReadonlyEvents","isClickEvent","getAnchorHrefOpt","targetEl","numChars","removeFromStart","nativeEvents","EventDispatcher","bindings","toggleEvent","isNative","lcName","beforeFire","once","wrappedCallback","currentName","bindingName","filteredHandlers","getEventDispatcher","_eventDispatcher","toggleNativeEvent","Observable","bubble","dispatcherArgs","DOM$2","getEventTarget","eventName","eventRoot","isListening","bindEventDelegate","delegate","delegates","eventRootElm","editors","EditorObservable","_pendingNativeEvents","defaultModes","switchToMode","activeMode","availableModes","oldMode","newMode","activate","deactivate","editorReadOnly","fireSwitchMode","create$4","design","registerReadOnlyContentFilters","registerReadOnlySelectionBlockers","setMode","registerMode","each$3","explode$1","keyCodeLookup","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","modifierNames","parseShortcut","shortcut","charCode","access","alt","ctrl","meta","Shortcuts","pendingPatterns","hasModifier","isFunctionKey","matchShortcut","subpatterns","executeShortcutAction","desc","cmdFunc","normalizeCommandFunc","createShortcut","bridge","buttons","menuItems","popups","contextMenus","contextToolbars","sidebars","addButton","addGroupToolbarButton","addToggleButton","addMenuButton","addSplitButton","addMenuItem","addNestedMenuItem","addToggleMenuItem","addAutocompleter","addContextMenu","addContextToolbar","addContextForm","addSidebar","create$3","DOM$1","extend$3","each$2","Editor","loadedCSS","isNotDirty","documentBaseURL","base_url","_setBaseUrl","baseURI","referrer_policy","language_load","editorCommands","cache_suffix","modeInstance","callbackLookup","initialContent","oldState","urlconverter_callback","_scanForImages","each$1","extend$2","instanceCounter","boundGlobalEvents","legacyEditors","globalEventDelegate","EditorManager","toggleGlobalEvents","removeEditorFromList","targetEditor","oldEditors","isQuirksMode","compatMode","majorVersion","minorVersion","releaseDate","i18n","tinymce","tinyMCEPreInit","srcScript","currentScript","pluginBaseUrls","plugin_base_urls","pluginBaseUrl","invalidInlineTargets","createId","provideResults","initEditors","initCount","createEditor","forms","editor_deselector","editor_selector","findTargets","isInvalidInlineTarget","addI18n","tasks","resultFns","extendClass","initializing","min$1","max$1","round$1","relativePosition","targetW","targetH","relChars","create$2","Rect","inflate","findBestRelativePosition","constrainRect","rels","intersect","cropRect","x1","y1","clamp","clampRect","fixedSize","cx2","cy2","underflowX1","underflowY1","overflowX2","overflowY2","fromClientRect","Resource","loadErrMsg","runErrMsg","task","waiter","resolveCb","rejectCb","complete","completer","awaiter","extend$1","Class","_super","mixins","mixin","Mixins","dummy","Methods","Properties","fieldName","Statics","Defaults","member","createMethod","localStorage","JSONUtils","stringify","hexCode","JSONP","XHR","ready","async","success_scope","error_scope","overrideMimeType","content_type","crossDomain","setRequestHeader","requestheaders","JSONRequest","sendRPC","ecb","scb","xhrArgs","ty","method","setItem","removeItem","storage","getItem","defineProperty","configurable","enumerable","publicApi","geom","util","LocalStorage","Color","hue","saturation","brightness","side","chroma","hsvToRgb","toRgb","toHsv","minRGB","maxRGB","rgb2hsv","ImageUploader","showNotification","TreeWalker","Serializer","Selection","isMac","tinyMCE","exportToWindowGlobal","exportToModuleLoaders"],"sourceRoot":""}