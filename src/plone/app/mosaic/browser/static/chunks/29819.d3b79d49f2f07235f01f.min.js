"use strict";(self.webpackChunkplone_mosaic=self.webpackChunkplone_mosaic||[]).push([[29819],{29819:function(e,a,o){o.r(a);o(35666);var t=o(65311),n=o.n(t);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,a){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,a){if(!e)return;if("string"==typeof e)return c(e,a);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return c(e,a)}(e))||a&&e&&"number"==typeof e.length){o&&(e=o);var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,l=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return r=e.done,e},e:function(e){l=!0,i=e},f:function(){try{r||null==o.return||o.return()}finally{if(l)throw i}}}}function c(e,a){(null==a||a>e.length)&&(a=e.length);for(var o=0,t=new Array(a);o<a;o++)t[o]=e[o];return t}function l(e,a){for(var o=0;o<a.length;o++){var t=a[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var s=function(e){return e.replace(/(_|\.|\/)/g,"-").toLowerCase()},m=function(){function e(a,o){var t,i,c;!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),c=function(){var e,a=this;a.mosaic.layoutManager.disableEditHtmlSource();var o=n()(".mosaic-selected-tile");o.length>0&&o.data("mosaic-tile").getType(),e=a.mosaic.options.default_available_actions;var t,i=r(a.mosaic.options.tiles);try{for(i.s();!(t=i.n()).done;){var c,l=r(t.value.tiles);try{for(l.s();!(c=l.n()).done;){var s=c.value;void 0===s.name&&(e=e.concat(s.available_actions))}}catch(e){l.e(e)}finally{l.f()}}}catch(e){i.e(e)}finally{i.f()}o.hasClass("removable")||(e=n()(e).filter((function(){return"remove"!==this}))),a.$el.find(".mosaic-option-group").show(),a.$el.find(".mosaic-button").hide(),a.$el.find(".mosaic-menu-format").find(".mosaic-option").hide().attr("disabled","disabled"),n()(a.$el.find(".mosaic-menu-format").find(".mosaic-option").get(0)).show().removeAttr("disabled");var m,d=r(e);try{for(d.s();!(m=d.n()).done;){var u=m.value;if(a.mosaic.actionManager.actions[u]&&!a.mosaic.actionManager.actions[u].visible())return;a.$el.find(".mosaic-button-"+u).show(),a.$el.find(".mosaic-icon-menu-"+u).show(),a.$el.find(".mosaic-option-"+u).show().removeAttr("disabled")}}catch(e){d.e(e)}finally{d.f()}a.mosaic.actionManager.actions.layout.visible()&&n()(".mosaic-button-layout").show(),a.$el.find(".mosaic-menu-insert").children(".mosaic-option-group-fields").children().each((function(){0===a.mosaic.panels.find(".mosaic-"+n()(this).attr("value")+"-tile").length?n()(this).show().removeAttr("disabled"):n()(this).hide().attr("disabled","disabled")})),a.$el.find(".mosaic-option-group").each((function(){0===n()(this).children(":enabled").length&&n()(this).hide()})),!a.mosaic.hasContentLayout&&a.mosaic.options.canChangeLayout?n()(".mosaic-button-savelayout").show():n()(".mosaic-button-savelayout").hide(),!a.mosaic.overlay.app&&!a.mosaic.saving&&!a.mosaic.modal&&(new Date).getTime()-a.lastChange>6e3&&(a.mosaic.queue((function(e){a.mosaic.layoutManager.saveLayoutToForm(),n()("#form-widgets-ILayoutAware-customContentLayout, [name='form.widgets.ILayoutAware.customContentLayout']").trigger("blur"),e()})),a.lastChange=(new Date).getTime())},(i="SelectedTileChange")in(t=this)?Object.defineProperty(t,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[i]=c;var l=this;l.mosaic=a,l.$el=n()(document.createElement("div")).addClass("mosaic-toolbar bg-light position-fixed top-0 start-0 end-0 p-2 border-bottom shadow-sm"),n()("body").prepend(l.$el),l.lastChange=(new Date).getTime()}var a,o,t;return a=e,(o=[{key:"initToolbar",value:function(){var e,a,o,t,i=this;for(o in i.$el.html(""),i.$el.append(n()(document.createElement("div")).addClass("mosaic-inline-toolbar w-100")),i.$el=i.$el.children(".mosaic-inline-toolbar"),i.$el.append(n()(document.createElement("div")).addClass("mosaic-toolbar-content d-flex justify-content-between")),a={},(e=i.$el.children(".mosaic-toolbar-content")).append(n()(document.createElement("div")).addClass("mosaic-toolbar-primary-functions d-flex d-grid gap-2")),a.primary_actions=e.children(".mosaic-toolbar-primary-functions"),e.append(n()(document.createElement("div")).addClass("mosaic-toolbar-secondary-functions d-flex d-grid gap-2")),a.secondary_actions=e.children(".mosaic-toolbar-secondary-functions"),a){var c,l=r(i.mosaic.options[o]);try{for(l.s();!(c=l.n()).done;){var m=c.value;if(void 0===m.actions)i.AddControl(a[o],m);else{t=m;var d=s(m.name),u=n()(document.createElement("div")).addClass("d-flex mosaic-button-group mosaic-button-group-"+d);u.append(i.AddControl(u,n().extend({},!0,t,{action:t.name.toLowerCase(),name:t.name.toLowerCase()})));var p=n()(document.createElement("div")).addClass("btn-container d-flex d-grid gap-2");u.append(p),a[o].append(u);var f,v=r(t.actions);try{for(v.s();!(f=v.n()).done;){var b=f.value;i.AddControl(p,b)}}catch(e){v.e(e)}finally{v.f()}}}}catch(e){l.e(e)}finally{l.f()}}i._mosaicToolbarLayoutEditor(a),i.mosaic.hasContentLayout&&n()(".mosaic-toolbar-secondary-functions",i.$el).addClass("d-none"),i.SelectedTileChange()}},{key:"AddControl",value:function(e,a){var o,t=this;void 0!==i(a.menu)&&a.menu?a.icon?(o=n()(document.createElement("label")),e.append(o.addClass("mosaic-icon-menu mosaic-icon-menu-"+s(a.name)+" mosaic-icon").html(a.label).attr("title",a.label).append(n()(document.createElement("select")).addClass("mosaic-menu-"+s(a.name)).data("action",a.action).on("change",(function(e){t.mosaic.actionManager.execAction(a.action,e.target)})).each((function(){var e,o,t,i=r(a.items);try{for(i.s();!(t=i.n()).done;){var c=t.value;if(void 0!==c.items)for(o in n()(this).append(n()(document.createElement("optgroup")).addClass("mosaic-option-group mosaic-option-group-"+s(c.value)).attr("label",c.label)),e=n()(this).find(".mosaic-option-group-"+s(c.value)),c.items)e.append(n()(document.createElement("option")).attr("value",c.items[o].value).addClass("mosaic-option mosaic-option-"+s(c.items[o].value)).html(c.items[o].label));else n()(this).append(n()(document.createElement("option")).attr("value",c.value).addClass("mosaic-option mosaic-option-"+s(c.value)).html(c.label))}}catch(e){i.e(e)}finally{i.f()}}))))):(o=n()(document.createElement("select")),e.append(o.addClass("pat-select2 mosaic-menu mosaic-menu-"+a.name.replace(/_/g,"-")).attr("data-pat-select2",JSON.stringify({minimumResultsForSearch:-1})).on("change",(function(e){t.mosaic.actionManager.execAction(a.action,e.target)})).each((function(){var e,o,t=r(a.items);try{for(t.s();!(o=t.n()).done;){var i=o.value;if(void 0!==i.items){n()(this).append(n()(document.createElement("optgroup")).addClass("mosaic-option-group mosaic-option-group-"+s(i.value)).attr("label",i.label)),e=n()(this).find(".mosaic-option-group-"+s(i.value));var c,l=r(i.items);try{for(l.s();!(c=l.n()).done;){var m=c.value;e.append(n()(document.createElement("option")).attr("value",m.value).addClass("mosaic-option mosaic-option-"+s(m.value)).html(m.label))}}catch(e){l.e(e)}finally{l.f()}}else n()(this).append(n()(document.createElement("option")).attr("value",i.value).addClass("mosaic-option mosaic-option-"+s(i.value)).html(i.label))}}catch(e){t.e(e)}finally{t.f()}})))):"layout"==s(a.name)?(o=n()(document.createElement("div")),e.append(o.addClass("ms-3 d-flex align-items-center me-2 text-secondary mosaic-button mosaic-button-"+s(a.name)+(a.icon?" mosaic-icon":"")).html(a.label))):(o=n()(document.createElement("button")),e.append(o.addClass("btn btn-sm btn-secondary mosaic-button mosaic-button-"+s(a.name)+(a.icon?" mosaic-icon":"")).html(a.label).attr("title",a.label).attr("type","button").data("action",a.action).on("mousedown",(function(e){t.mosaic.actionManager.execAction(a.name,e.target)})))),t.mosaic.actionManager.actions[a.name]&&(t.mosaic.actionManager.actions[a.name].visible()||o.hide())}},{key:"_mosaicToolbarLayoutEditor",value:function(e){var a,o=this;if(n()(".mosaic-toolbar-secondary-functions",o.$el).removeClass("d-none"),void 0!==o.mosaic.options.formats){var t,i=r(o.mosaic.options.formats);try{for(i.s();!(t=i.n()).done;){var c=t.value;e.primary_actions.append(n()(document.createElement("fieldset")).addClass("d-flex d-grid gap-2 btn-group mosaic-button-group mosaic-button-group-"+s(c.name))),a=e.primary_actions.children(".mosaic-button-group-"+c.name.replace(/_/g,"-"));var l,m=r(c.actions);try{for(m.s();!(l=m.n()).done;){var d=l.value;d.favorite&&o.AddControl(a,d)}}catch(e){m.e(e)}finally{m.f()}0===a.children().length&&a.remove()}}catch(e){i.e(e)}finally{i.f()}}if(void 0!==o.mosaic.options.tiles){var u,p=e.secondary_actions.find(".mosaic-menu-insert"),f=r(o.mosaic.options.tiles);try{for(f.s();!(u=f.n()).done;){var v=u.value;p.append(n()(document.createElement("optgroup")).addClass("mosaic-option-group mosaic-option-group-"+s(v.name)).attr("label",v.label)),a=e.secondary_actions.find(".mosaic-option-group-"+s(v.name));var b,h=r(v.tiles);try{for(h.s();!(b=h.n()).done;){var y=b.value;a.append(n()(document.createElement("option")).addClass("mosaic-option mosaic-option-"+s(y.name)).attr("value",y.name).html(y.label))}}catch(e){h.e(e)}finally{h.f()}0===a.children().length&&a.remove()}}catch(e){f.e(e)}finally{f.f()}}if(void 0!==o.mosaic.options.formats){var g,C=e.secondary_actions.find(".mosaic-menu-format"),w=r(o.mosaic.options.formats);try{for(w.s();!(g=w.n()).done;){var E=g.value;C.append(n()(document.createElement("optgroup")).addClass("mosaic-option-group mosaic-option-group-"+s(E.name)).attr("label",E.label)),a=e.secondary_actions.find(".mosaic-option-group-"+s(E.name));var $,A=r(E.actions);try{for(A.s();!($=A.n()).done;){var _=$.value;!1===_.favorite&&a.append(n()(document.createElement("option")).addClass("mosaic-option mosaic-option-"+s(_.name)).attr("value",_.name).html(_.label).data("action",_.action))}}catch(e){A.e(e)}finally{A.f()}0===a.children().length&&a.remove()}}catch(e){w.e(e)}finally{w.f()}}}}])&&l(a.prototype,o),t&&l(a,t),Object.defineProperty(a,"prototype",{writable:!1}),e}();a.default=m}}]);
//# sourceMappingURL=29819.d3b79d49f2f07235f01f.min.js.map