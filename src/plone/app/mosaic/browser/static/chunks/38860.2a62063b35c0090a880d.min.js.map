{"version":3,"file":"chunks/38860.2a62063b35c0090a880d.min.js","mappings":"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BIC,GAAc,CAChB,EACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,EACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,KACA,EACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,EACA,IACA,IACA,IACA,IACA,EACA,IACA,IACA,IACA,EACA,IACA,EACA,IACA,IACA,EACA,IACA,IACA,IACA,EACA,IACA,IACA,EACA,IACA,IACA,IACA,IAEEC,GAAW,SAAUC,EAASC,GAIhC,IAHA,IAEIptG,EAFAggF,EAAM,GACNqtB,EAAM,IAAI/nH,MAAM,IAEXuB,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAK,IAAI6iB,EAAI,EAAGA,EAAI,EAAGA,IACrBs2E,EAAIt2E,GAAK0jG,EAAQ1jG,EAAQ,EAAJ7iB,GAEvB,IAAS6iB,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B1J,EAAM,EACN,IAAK,IAAIjR,EAAI,EAAGA,EAAI,EAAGA,IACrBiR,GAAOmtG,EAAQzjG,EAAQ,EAAJ3a,GAASixF,EAAIjxF,GAElCs+G,EAAI3jG,EAAQ,EAAJ7iB,GAASmZ,CACnB,CACF,CACA,OAAOqtG,CACT,EA2GIC,GAAc,SAAUC,EAAI5kD,GAC9B,OAAO4kD,EAAGhB,WAAW9lC,MAAK,SAAUmT,GAClC,OAAO4zB,GAAiB5zB,EAAQ2zB,EAAGvB,UAAWrjD,EAChD,GACF,EACI6kD,GAAmB,SAAU5zB,EAAQ10F,EAAMyjE,GAC7C,IAAImd,EAAUujC,GAAazvB,GAgBvB6zB,EAfc,SAAUC,EAAYn2B,GAGtC,IAFA,IAAI9qF,EAAG+pD,EAAG7uD,EAAG5B,EACTqyB,EA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QvK,EAAKniL,MAExB,CACA0tL,EAASzB,GAAeyB,EAC1B,CAKA,OAJA,SAAuBx/K,GAErB,OADAf,QAAQgpB,KAAK,qBAAsBjoB,GAC5B,IACT,CAEF,CACA,IAAI2/K,GAAS3sK,GAAO,CAClB,IACA,OACA,UACA,UACA,OACA,UACA,QACA,QACA,IACA,MACA,MACA,MACA,QACA,aACA,OACA,KACA,SACA,SACA,UACA,SACA,OACA,OACA,MACA,WACA,UACA,OACA,WACA,KACA,YACA,MACA,UACA,MACA,SACA,MACA,MACA,KACA,KACA,UACA,KACA,WACA,aACA,SACA,OACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,MACA,QACA,MACA,MACA,QACA,SACA,KACA,OACA,MACA,OACA,UACA,OACA,WACA,QACA,MACA,OACA,KACA,WACA,SACA,SACA,IACA,UACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,UACA,SACA,SACA,QACA,SACA,SACA,OACA,SACA,SACA,QACA,MACA,UACA,MACA,QACA,QACA,KACA,WACA,WACA,QACA,KACA,QACA,OACA,KACA,QACA,KACA,IACA,KACA,MACA,QACA,QAEE4sK,GAAQ5sK,GAAO,CACjB,MACA,IACA,WACA,cACA,eACA,eACA,gBACA,mBACA,SACA,WACA,OACA,OACA,UACA,SACA,OACA,IACA,QACA,WACA,QACA,QACA,OACA,iBACA,SACA,OACA,WACA,QACA,OACA,UACA,UACA,WACA,iBACA,OACA,OACA,QACA,SACA,SACA,OACA,WACA,QACA,OACA,QACA,OACA,UAEE6sK,GAAa7sK,GAAO,CACtB,UACA,gBACA,sBACA,cACA,mBACA,oBACA,oBACA,iBACA,UACA,UACA,UACA,UACA,UACA,iBACA,UACA,UACA,cACA,eACA,WACA,eACA,qBACA,cACA,SACA,iBAEE8sK,GAAgB9sK,GAAO,CACzB,UACA,gBACA,SACA,UACA,eACA,YACA,mBACA,iBACA,gBACA,gBACA,gBACA,QACA,YACA,OACA,eACA,YACA,UACA,gBACA,SACA,MACA,aACA,UACA,QAEE+sK,GAAW/sK,GAAO,CACpB,OACA,WACA,SACA,UACA,QACA,SACA,KACA,aACA,gBACA,KACA,KACA,QACA,UACA,WACA,QACA,OACA,KACA,SACA,QACA,SACA,OACA,OACA,UACA,SACA,MACA,QACA,MACA,SACA,eAEEgtK,GAAmBhtK,GAAO,CAC5B,UACA,cACA,aACA,WACA,YACA,UACA,UACA,SACA,SACA,QACA,YACA,aACA,iBACA,cACA,SAEE1T,GAAO0T,GAAO,CAAC,UACfvU,GAAOuU,GAAO,CAChB,SACA,SACA,QACA,MACA,iBACA,eACA,uBACA,WACA,aACA,UACA,SACA,UACA,cACA,cACA,UACA,OACA,QACA,QACA,QACA,OACA,UACA,WACA,eACA,SACA,cACA,WACA,WACA,UACA,MACA,WACA,0BACA,wBACA,WACA,YACA,UACA,eACA,OACA,MACA,UACA,SACA,SACA,OACA,OACA,WACA,KACA,YACA,YACA,QACA,OACA,QACA,OACA,OACA,UACA,OACA,MACA,MACA,YACA,QACA,SACA,MACA,YACA,WACA,QACA,OACA,QACA,UACA,aACA,SACA,OACA,UACA,UACA,cACA,cACA,SACA,UACA,UACA,aACA,WACA,MACA,WACA,MACA,WACA,OACA,OACA,UACA,aACA,QACA,WACA,QACA,OACA,QACA,OACA,UACA,QACA,MACA,SACA,OACA,QACA,UACA,WACA,QACA,YACA,OACA,SACA,SACA,QACA,QACA,QACA,SAEE43D,GAAM53D,GAAO,CACf,gBACA,aACA,WACA,qBACA,SACA,gBACA,gBACA,UACA,gBACA,iBACA,QACA,OACA,KACA,QACA,OACA,gBACA,YACA,YACA,QACA,sBACA,8BACA,gBACA,kBACA,KACA,KACA,IACA,KACA,KACA,kBACA,YACA,UACA,UACA,MACA,WACA,YACA,MACA,OACA,eACA,YACA,SACA,cACA,cACA,gBACA,cACA,YACA,mBACA,eACA,aACA,eACA,cACA,KACA,KACA,KACA,KACA,aACA,WACA,gBACA,oBACA,SACA,OACA,KACA,kBACA,KACA,MACA,IACA,KACA,KACA,KACA,KACA,UACA,YACA,aACA,WACA,OACA,eACA,iBACA,eACA,mBACA,iBACA,QACA,aACA,aACA,eACA,eACA,cACA,cACA,mBACA,YACA,MACA,OACA,QACA,SACA,OACA,MACA,OACA,aACA,SACA,WACA,UACA,QACA,SACA,cACA,SACA,WACA,cACA,OACA,aACA,sBACA,mBACA,eACA,SACA,gBACA,sBACA,iBACA,IACA,KACA,KACA,SACA,OACA,OACA,cACA,YACA,UACA,SACA,SACA,QACA,OACA,kBACA,mBACA,mBACA,eACA,cACA,eACA,cACA,aACA,eACA,mBACA,oBACA,iBACA,kBACA,oBACA,iBACA,SACA,eACA,QACA,eACA,iBACA,WACA,UACA,UACA,YACA,mBACA,cACA,kBACA,iBACA,aACA,OACA,KACA,KACA,UACA,SACA,UACA,aACA,UACA,aACA,gBACA,gBACA,QACA,eACA,OACA,eACA,mBACA,mBACA,IACA,KACA,KACA,QACA,IACA,KACA,KACA,IACA,eAEEitK,GAASjtK,GAAO,CAClB,SACA,cACA,QACA,WACA,QACA,eACA,cACA,aACA,aACA,QACA,MACA,UACA,eACA,WACA,QACA,QACA,SACA,OACA,KACA,UACA,SACA,gBACA,SACA,SACA,iBACA,YACA,WACA,cACA,UACA,UACA,gBACA,WACA,WACA,OACA,WACA,WACA,aACA,UACA,SACA,SACA,cACA,gBACA,uBACA,YACA,YACA,aACA,WACA,iBACA,iBACA,YACA,UACA,QACA,UAEEktK,GAAMltK,GAAO,CACf,aACA,SACA,cACA,YACA,gBAEEmtK,GAAgBlC,GAAK,6BACrBmC,GAAWnC,GAAK,yBAChBoC,GAAYpC,GAAK,8BACjBqC,GAAYrC,GAAK,kBACjBsC,GAAiBtC,GAAK,yFACtBuC,GAAoBvC,GAAK,yBACzBwC,GAAkBxC,GAAK,+DACvByC,G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","sources":["webpack://plone-mosaic/./node_modules/tinymce/themes/silver/index.js","webpack://plone-mosaic/./node_modules/tinymce/themes/silver/theme.js"],"sourcesContent":["// Exports the \"silver\" theme for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/themes/silver')\n//   ES2015:\n//     import 'tinymce/themes/silver'\nrequire('./theme.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.7 (2022-12-06)\n */\n(function () {\n    'use strict';\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType$1 = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq$1 = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType$1('string');\n    var isObject = isType$1('object');\n    var isArray = isType$1('array');\n    var isNull = eq$1(null);\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq$1(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n    var isArrayOf = function (value, pred) {\n      if (isArray(value)) {\n        for (var i = 0, len = value.length; i < len; ++i) {\n          if (!pred(value[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    };\n\n    var noop = function () {\n    };\n    var noarg = function (f) {\n      return function () {\n        return f();\n      };\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant$1 = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity$1 = function (x) {\n      return x;\n    };\n    var tripleEquals = function (a, b) {\n      return a === b;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant$1(false);\n    var always = constant$1(true);\n\n    var global$g = tinymce.util.Tools.resolve('tinymce.ThemeManager');\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArray(to, from, pack) {\n      if (pack || arguments.length === 2)\n        for (var i = 0, l = from.length, ar; i < l; i++) {\n          if (ar || !(i in from)) {\n            if (!ar)\n              ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n          }\n        }\n      return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity$1;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant$1(null),\n        getOrUndefined: constant$1(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant$1('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant$1(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from$1 = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from$1\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    var contains$2 = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var range$2 = function (num, f) {\n      var r = [];\n      for (var i = 0; i < num; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var chunk$1 = function (array, size) {\n      var r = [];\n      for (var i = 0; i < array.length; i += size) {\n        var s = nativeSlice.call(array, i, i + size);\n        r.push(s);\n      }\n      return r;\n    };\n    var map$2 = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$1 = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition$3 = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter$2 = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each$1(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find$5 = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var findIndex$1 = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind$3 = function (xs, f) {\n      return flatten(map$2(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter$2(a1, function (x) {\n        return !contains$2(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var pure$2 = function (x) {\n      return [x];\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get$f = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get$f(xs, 0);\n    };\n    var last$2 = function (xs) {\n      return get$f(xs, xs.length - 1);\n    };\n    var from = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty$1 = Object.hasOwnProperty;\n    var each = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$1 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var find$4 = function (obj, pred) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        if (pred(x, i, obj)) {\n          return Optional.some(x);\n        }\n      }\n      return Optional.none();\n    };\n    var values = function (obj) {\n      return mapToArray(obj, identity$1);\n    };\n    var get$e = function (obj, key) {\n      return has$2(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has$2 = function (obj, key) {\n      return hasOwnProperty$1.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has$2(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var is$1 = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lhs.exists(function (left) {\n        return comparator(left, rhs);\n      });\n    };\n    var equals = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lift2(lhs, rhs, comparator).getOr(lhs.isNone() && rhs.isNone());\n    };\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var sequence = function (arr) {\n      var r = [];\n      for (var i = 0; i < arr.length; i++) {\n        var x = arr[i];\n        if (x.isSome()) {\n          r.push(x.getOrDie());\n        } else {\n          return Optional.none();\n        }\n      }\n      return Optional.some(r);\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    };\n    var mapFrom = function (a, f) {\n      return a !== undefined && a !== null ? Optional.some(f(a)) : Optional.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var addToEnd = function (str, suffix) {\n      return str + suffix;\n    };\n    var removeFromStart = function (str, numChars) {\n      return str.substring(numChars);\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var removeLeading = function (str, prefix) {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    var ensureTrailing = function (str, suffix) {\n      return endsWith(str, suffix) ? str : addToEnd(str, suffix);\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim$1 = blank(/^\\s+|\\s+$/g);\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n    var isEmpty = function (s) {\n      return !isNotEmpty(s);\n    };\n\n    var isSupported$1 = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var fromHtml$2 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml$2,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var name$2 = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement$2 = isType(ELEMENT);\n    var isText$1 = isType(TEXT);\n    var isDocument = isType(DOCUMENT);\n    var isDocumentFragment = isType(DOCUMENT_FRAGMENT);\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant$1(isiPad),\n        isiPhone: constant$1(isiPhone),\n        isTablet: constant$1(isTablet),\n        isPhone: constant$1(isPhone),\n        isTouch: constant$1(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant$1(iOSwebview),\n        isDesktop: constant$1(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$3 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$d(group(1), group(2));\n    };\n    var detect$4 = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$3();\n      }\n      return find$3(versionRegexes, cleanedAgent);\n    };\n    var unknown$3 = function () {\n      return nu$d(0, 0);\n    };\n    var nu$d = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$d,\n      detect: detect$4,\n      unknown: unknown$3\n    };\n\n    var detectBrowser$1 = function (browsers, userAgentData) {\n      return findMap(userAgentData.brands, function (uaBrand) {\n        var lcBrand = uaBrand.brand.toLowerCase();\n        return find$5(browsers, function (browser) {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(function (info) {\n          return {\n            current: info.name,\n            version: Version.nu(parseInt(uaBrand.version, 10), 0)\n          };\n        });\n      });\n    };\n\n    var detect$3 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find$5(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$3(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$3(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant$1(browsers),\n      oses: constant$1(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$2 = function () {\n      return nu$c({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$c = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$2,\n      nu: nu$c,\n      edge: constant$1(edge),\n      chrome: constant$1(chrome),\n      ie: constant$1(ie),\n      opera: constant$1(opera),\n      firefox: constant$1(firefox),\n      safari: constant$1(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown$1 = function () {\n      return nu$b({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$b = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$1,\n      nu: nu$b,\n      windows: constant$1(windows),\n      ios: constant$1(ios),\n      android: constant$1(android),\n      linux: constant$1(linux),\n      osx: constant$1(osx),\n      solaris: constant$1(solaris),\n      freebsd: constant$1(freebsd),\n      chromeos: constant$1(chromeos)\n    };\n\n    var detect$2 = function (userAgent, userAgentDataOpt, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = userAgentDataOpt.bind(function (userAgentData) {\n        return detectBrowser$1(browsers, userAgentData);\n      }).orThunk(function () {\n        return detectBrowser(browsers, userAgent);\n      }).fold(Browser.unknown, Browser.nu);\n      var os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch);\n    });\n    var detect$1 = function () {\n      return platform();\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var is = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all$3 = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map$2(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains = function (e1, e2) {\n      return detect$1().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n\n    var owner$4 = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner$4(dos);\n    };\n    var documentElement = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parentNode = function (element) {\n      return parent(element);\n    };\n    var offsetParent = function (element) {\n      return Optional.from(element.dom.offsetParent).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var children = function (element) {\n      return map$2(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child$2 = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child$2(element, 0);\n    };\n    var spot = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n    var leaf = function (element, offset) {\n      var cs = children(element);\n      return cs.length > 0 && offset < cs.length ? spot(cs[offset], 0) : spot(element, offset);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos) && isNonNullable(dos.dom.host);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported = constant$1(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getContentContainer = function (dos) {\n      return isShadowRoot(dos) ? dos : SugarElement.fromDom(documentOrOwner(dos).dom.body);\n    };\n    var isInShadowRoot = function (e) {\n      return getShadowRoot(e).isSome();\n    };\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement$2(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var inBody = function (element) {\n      var dom = isText$1(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n    var body = function () {\n      return getBody(SugarElement.fromDom(document));\n    };\n    var getBody = function (doc) {\n      var b = doc.dom.body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set$8 = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll$1 = function (element, attrs) {\n      var dom = element.dom;\n      each(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$d = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$d(element, key));\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$7 = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported$1(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported$1(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$7 = function (element, property, value) {\n      var dom = element.dom;\n      internalSet(dom, property, value);\n    };\n    var setAll = function (element, css) {\n      var dom = element.dom;\n      each(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var setOptions = function (element, css) {\n      var dom = element.dom;\n      each(css, function (v, k) {\n        v.fold(function () {\n          internalRemove(dom, k);\n        }, function (value) {\n          internalSet(dom, k, value);\n        });\n      });\n    };\n    var get$c = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported$1(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom;\n      if (isSupported$1(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    var isValidValue = function (tag, property, value) {\n      var element = SugarElement.fromTag(tag);\n      set$7(element, property, value);\n      var style = getRaw(element, property);\n      return style.isSome();\n    };\n    var remove$6 = function (element, property) {\n      var dom = element.dom;\n      internalRemove(dom, property);\n      if (is$1(getOpt(element, 'style').map(trim$1), '')) {\n        remove$7(element, 'style');\n      }\n    };\n    var reflow = function (e) {\n      return e.dom.offsetWidth;\n    };\n\n    var Dimension = function (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported$1(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$c(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$c(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    };\n\n    var api$3 = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$b = function (element) {\n      return api$3.get(element);\n    };\n    var getOuter$2 = function (element) {\n      return api$3.getOuter(element);\n    };\n    var setMax$1 = function (element, value) {\n      var inclusions = [\n        'margin-top',\n        'border-top-width',\n        'padding-top',\n        'padding-bottom',\n        'border-bottom-width',\n        'margin-bottom'\n      ];\n      var absMax = api$3.max(element, value, inclusions);\n      set$7(element, 'max-height', absMax + 'px');\n    };\n\n    var r$1 = function (left, top) {\n      var translate = function (x, y) {\n        return r$1(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r$1;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute$3 = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport$1(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport$1 = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var api$2 = Dimension('width', function (element) {\n      return element.dom.offsetWidth;\n    });\n    var set$6 = function (element, h) {\n      return api$2.set(element, h);\n    };\n    var get$a = function (element) {\n      return api$2.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api$2.getOuter(element);\n    };\n    var setMax = function (element, value) {\n      var inclusions = [\n        'margin-left',\n        'border-left-width',\n        'padding-left',\n        'padding-right',\n        'border-right-width',\n        'margin-right'\n      ];\n      var absMax = api$2.max(element, value, inclusions);\n      set$7(element, 'max-width', absMax + 'px');\n    };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: target,\n        x: x,\n        y: y,\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: raw\n      };\n    };\n    var fromRawEvent$1 = function (rawEvent) {\n      var target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      var stop = function () {\n        return rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        return rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (filter(rawEvent)) {\n          handler(fromRawEvent$1(rawEvent));\n        }\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$2 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var capture$1 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, true);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    var before$2 = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after$2 = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append$2(v, element);\n        });\n      }, function (v) {\n        before$2(v, element);\n      });\n    };\n    var prepend$1 = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append$2(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append$2 = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var appendAt = function (parent, element, index) {\n      child$2(parent, index).fold(function () {\n        append$2(parent, element);\n      }, function (v) {\n        before$2(v, element);\n      });\n    };\n\n    var before$1 = function (marker, elements) {\n      each$1(elements, function (x) {\n        before$2(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each$1(elements, function (x) {\n        append$2(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each$1(children(element), function (rogue) {\n        remove$5(rogue);\n      });\n    };\n    var remove$5 = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove$5(wrapper);\n    };\n\n    var get$9 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var to = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n\n    var get$8 = function (_win) {\n      var win = _win === undefined ? window : _win;\n      if (detect$1().browser.isFirefox()) {\n        return Optional.none();\n      } else {\n        return Optional.from(win['visualViewport']);\n      }\n    };\n    var bounds$1 = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds$3 = function (_win) {\n      var win = _win === undefined ? window : _win;\n      var doc = win.document;\n      var scroll = get$9(SugarElement.fromDom(doc));\n      return get$8(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds$1(scroll.left, scroll.top, width, height);\n      }, function (visualViewport) {\n        return bounds$1(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n      });\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant$1([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      var paths = walkUp(navigation, d);\n      return Optional.some(paths);\n    };\n\n    var view = function (doc) {\n      var _a;\n      var element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    var owner$3 = function (element) {\n      return owner$4(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner$3\n    });\n\n    var find$2 = function (element) {\n      var doc = SugarElement.fromDom(document);\n      var scroll = get$9(doc);\n      var path = pathTo(element, Navigation);\n      return path.fold(curry(absolute$3, element), function (frames) {\n        var offset = viewport$1(element);\n        var r = foldr(frames, function (b, a) {\n          var loc = viewport$1(a);\n          return {\n            left: b.left + loc.left,\n            top: b.top + loc.top\n          };\n        }, {\n          left: 0,\n          top: 0\n        });\n        return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n      });\n    };\n\n    var pointed = function (point, width, height) {\n      return {\n        point: point,\n        width: width,\n        height: height\n      };\n    };\n    var rect = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      };\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var box$1 = function (element) {\n      var xy = absolute$3(element);\n      var w = getOuter$1(element);\n      var h = getOuter$2(element);\n      return bounds(xy.left, xy.top, w, h);\n    };\n    var absolute$2 = function (element) {\n      var position = find$2(element);\n      var width = getOuter$1(element);\n      var height = getOuter$2(element);\n      return bounds(position.left, position.top, width, height);\n    };\n    var win = function () {\n      return getBounds$3(window);\n    };\n\n    var value$3 = function (o) {\n      var or = function (_opt) {\n        return value$3(o);\n      };\n      var orThunk = function (_f) {\n        return value$3(o);\n      };\n      var map = function (f) {\n        return value$3(f(o));\n      };\n      var mapError = function (_f) {\n        return value$3(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        isValue: always,\n        isError: never,\n        getOr: constant$1(o),\n        getOrThunk: constant$1(o),\n        getOrDie: constant$1(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error$1 = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = identity$1;\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error$1(message);\n      };\n      var mapError = function (f) {\n        return error$1(f(message));\n      };\n      var bind = function (_f) {\n        return error$1(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        isValue: never,\n        isError: always,\n        getOr: identity$1,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error$1(err);\n      }, value$3);\n    };\n    var Result = {\n      value: value$3,\n      error: error$1,\n      fromOption: fromOption\n    };\n\n    var SimpleResultType;\n    (function (SimpleResultType) {\n      SimpleResultType[SimpleResultType['Error'] = 0] = 'Error';\n      SimpleResultType[SimpleResultType['Value'] = 1] = 'Value';\n    }(SimpleResultType || (SimpleResultType = {})));\n    var fold$1 = function (res, onError, onValue) {\n      return res.stype === SimpleResultType.Error ? onError(res.serror) : onValue(res.svalue);\n    };\n    var partition$2 = function (results) {\n      var values = [];\n      var errors = [];\n      each$1(results, function (obj) {\n        fold$1(obj, function (err) {\n          return errors.push(err);\n        }, function (val) {\n          return values.push(val);\n        });\n      });\n      return {\n        values: values,\n        errors: errors\n      };\n    };\n    var mapError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return {\n          stype: SimpleResultType.Error,\n          serror: f(res.serror)\n        };\n      } else {\n        return res;\n      }\n    };\n    var map = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return {\n          stype: SimpleResultType.Value,\n          svalue: f(res.svalue)\n        };\n      } else {\n        return res;\n      }\n    };\n    var bind$1 = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return f(res.svalue);\n      } else {\n        return res;\n      }\n    };\n    var bindError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return f(res.serror);\n      } else {\n        return res;\n      }\n    };\n    var svalue = function (v) {\n      return {\n        stype: SimpleResultType.Value,\n        svalue: v\n      };\n    };\n    var serror = function (e) {\n      return {\n        stype: SimpleResultType.Error,\n        serror: e\n      };\n    };\n    var toResult$1 = function (res) {\n      return fold$1(res, Result.error, Result.value);\n    };\n    var fromResult$1 = function (res) {\n      return res.fold(serror, svalue);\n    };\n    var SimpleResult = {\n      fromResult: fromResult$1,\n      toResult: toResult$1,\n      svalue: svalue,\n      partition: partition$2,\n      serror: serror,\n      bind: bind$1,\n      bindError: bindError,\n      map: map,\n      mapError: mapError,\n      fold: fold$1\n    };\n\n    var field$2 = function (key, newKey, presence, prop) {\n      return {\n        tag: 'field',\n        key: key,\n        newKey: newKey,\n        presence: presence,\n        prop: prop\n      };\n    };\n    var customField$1 = function (newKey, instantiator) {\n      return {\n        tag: 'custom',\n        newKey: newKey,\n        instantiator: instantiator\n      };\n    };\n    var fold = function (value, ifField, ifCustom) {\n      switch (value.tag) {\n      case 'field':\n        return ifField(value.key, value.newKey, value.presence, value.prop);\n      case 'custom':\n        return ifCustom(value.newKey, value.instantiator);\n      }\n    };\n\n    var shallow$1 = function (old, nu) {\n      return nu;\n    };\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          objects[_i] = arguments[_i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (has$2(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n    var merge$1 = baseMerge(shallow$1);\n\n    var required$2 = function () {\n      return {\n        tag: 'required',\n        process: {}\n      };\n    };\n    var defaultedThunk = function (fallbackThunk) {\n      return {\n        tag: 'defaultedThunk',\n        process: fallbackThunk\n      };\n    };\n    var defaulted$1 = function (fallback) {\n      return defaultedThunk(constant$1(fallback));\n    };\n    var asOption = function () {\n      return {\n        tag: 'option',\n        process: {}\n      };\n    };\n    var mergeWithThunk = function (baseThunk) {\n      return {\n        tag: 'mergeWithThunk',\n        process: baseThunk\n      };\n    };\n    var mergeWith = function (base) {\n      return mergeWithThunk(constant$1(base));\n    };\n\n    var mergeValues$1 = function (values, base) {\n      return values.length > 0 ? SimpleResult.svalue(deepMerge(base, merge$1.apply(undefined, values))) : SimpleResult.svalue(base);\n    };\n    var mergeErrors$1 = function (errors) {\n      return compose(SimpleResult.serror, flatten)(errors);\n    };\n    var consolidateObj = function (objects, base) {\n      var partition = SimpleResult.partition(objects);\n      return partition.errors.length > 0 ? mergeErrors$1(partition.errors) : mergeValues$1(partition.values, base);\n    };\n    var consolidateArr = function (objects) {\n      var partitions = SimpleResult.partition(objects);\n      return partitions.errors.length > 0 ? mergeErrors$1(partitions.errors) : SimpleResult.svalue(partitions.values);\n    };\n    var ResultCombine = {\n      consolidateObj: consolidateObj,\n      consolidateArr: consolidateArr\n    };\n\n    var formatObj = function (input) {\n      return isObject(input) && keys(input).length > 100 ? ' removed due to size' : JSON.stringify(input, null, 2);\n    };\n    var formatErrors = function (errors) {\n      var es = errors.length > 10 ? errors.slice(0, 10).concat([{\n          path: [],\n          getErrorInfo: constant$1('... (only showing first ten failures)')\n        }]) : errors;\n      return map$2(es, function (e) {\n        return 'Failed path: (' + e.path.join(' > ') + ')\\n' + e.getErrorInfo();\n      });\n    };\n\n    var nu$a = function (path, getErrorInfo) {\n      return SimpleResult.serror([{\n          path: path,\n          getErrorInfo: getErrorInfo\n        }]);\n    };\n    var missingRequired = function (path, key, obj) {\n      return nu$a(path, function () {\n        return 'Could not find valid *required* value for \"' + key + '\" in ' + formatObj(obj);\n      });\n    };\n    var missingKey = function (path, key) {\n      return nu$a(path, function () {\n        return 'Choice schema did not contain choice key: \"' + key + '\"';\n      });\n    };\n    var missingBranch = function (path, branches, branch) {\n      return nu$a(path, function () {\n        return 'The chosen schema: \"' + branch + '\" did not exist in branches: ' + formatObj(branches);\n      });\n    };\n    var unsupportedFields = function (path, unsupported) {\n      return nu$a(path, function () {\n        return 'There are unsupported fields: [' + unsupported.join(', ') + '] specified';\n      });\n    };\n    var custom = function (path, err) {\n      return nu$a(path, constant$1(err));\n    };\n\n    var value$2 = function (validator) {\n      var extract = function (path, val) {\n        return SimpleResult.bindError(validator(val), function (err) {\n          return custom(path, err);\n        });\n      };\n      var toString = constant$1('val');\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var anyValue$1 = value$2(SimpleResult.svalue);\n\n    var requiredAccess = function (path, obj, key, bundle) {\n      return get$e(obj, key).fold(function () {\n        return missingRequired(path, key, obj);\n      }, bundle);\n    };\n    var fallbackAccess = function (obj, key, fallback, bundle) {\n      var v = get$e(obj, key).getOrThunk(function () {\n        return fallback(obj);\n      });\n      return bundle(v);\n    };\n    var optionAccess = function (obj, key, bundle) {\n      return bundle(get$e(obj, key));\n    };\n    var optionDefaultedAccess = function (obj, key, fallback, bundle) {\n      var opt = get$e(obj, key).map(function (val) {\n        return val === true ? fallback(obj) : val;\n      });\n      return bundle(opt);\n    };\n    var extractField = function (field, path, obj, key, prop) {\n      var bundle = function (av) {\n        return prop.extract(path.concat([key]), av);\n      };\n      var bundleAsOption = function (optValue) {\n        return optValue.fold(function () {\n          return SimpleResult.svalue(Optional.none());\n        }, function (ov) {\n          var result = prop.extract(path.concat([key]), ov);\n          return SimpleResult.map(result, Optional.some);\n        });\n      };\n      switch (field.tag) {\n      case 'required':\n        return requiredAccess(path, obj, key, bundle);\n      case 'defaultedThunk':\n        return fallbackAccess(obj, key, field.process, bundle);\n      case 'option':\n        return optionAccess(obj, key, bundleAsOption);\n      case 'defaultedOptionThunk':\n        return optionDefaultedAccess(obj, key, field.process, bundleAsOption);\n      case 'mergeWithThunk': {\n          return fallbackAccess(obj, key, constant$1({}), function (v) {\n            var result = deepMerge(field.process(obj), v);\n            return bundle(result);\n          });\n        }\n      }\n    };\n    var extractFields = function (path, obj, fields) {\n      var success = {};\n      var errors = [];\n      for (var _i = 0, fields_1 = fields; _i < fields_1.length; _i++) {\n        var field = fields_1[_i];\n        fold(field, function (key, newKey, presence, prop) {\n          var result = extractField(presence, path, obj, key, prop);\n          SimpleResult.fold(result, function (err) {\n            errors.push.apply(errors, err);\n          }, function (res) {\n            success[newKey] = res;\n          });\n        }, function (newKey, instantiator) {\n          success[newKey] = instantiator(obj);\n        });\n      }\n      return errors.length > 0 ? SimpleResult.serror(errors) : SimpleResult.svalue(success);\n    };\n    var valueThunk = function (getDelegate) {\n      var extract = function (path, val) {\n        return getDelegate().extract(path, val);\n      };\n      var toString = function () {\n        return getDelegate().toString();\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var getSetKeys = function (obj) {\n      return keys(filter$1(obj, isNonNullable));\n    };\n    var objOfOnly = function (fields) {\n      var delegate = objOf(fields);\n      var fieldNames = foldr(fields, function (acc, value) {\n        return fold(value, function (key) {\n          var _a;\n          return deepMerge(acc, (_a = {}, _a[key] = true, _a));\n        }, constant$1(acc));\n      }, {});\n      var extract = function (path, o) {\n        var keys = isBoolean(o) ? [] : getSetKeys(o);\n        var extra = filter$2(keys, function (k) {\n          return !hasNonNullableKey(fieldNames, k);\n        });\n        return extra.length === 0 ? delegate.extract(path, o) : unsupportedFields(path, extra);\n      };\n      return {\n        extract: extract,\n        toString: delegate.toString\n      };\n    };\n    var objOf = function (values) {\n      var extract = function (path, o) {\n        return extractFields(path, o, values);\n      };\n      var toString = function () {\n        var fieldStrings = map$2(values, function (value) {\n          return fold(value, function (key, _okey, _presence, prop) {\n            return key + ' -> ' + prop.toString();\n          }, function (newKey, _instantiator) {\n            return 'state(' + newKey + ')';\n          });\n        });\n        return 'obj{\\n' + fieldStrings.join('\\n') + '}';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var arrOf = function (prop) {\n      var extract = function (path, array) {\n        var results = map$2(array, function (a, i) {\n          return prop.extract(path.concat(['[' + i + ']']), a);\n        });\n        return ResultCombine.consolidateArr(results);\n      };\n      var toString = function () {\n        return 'array(' + prop.toString() + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var oneOf = function (props) {\n      var extract = function (path, val) {\n        var errors = [];\n        for (var _i = 0, props_1 = props; _i < props_1.length; _i++) {\n          var prop = props_1[_i];\n          var res = prop.extract(path, val);\n          if (res.stype === SimpleResultType.Value) {\n            return res;\n          }\n          errors.push(res);\n        }\n        return ResultCombine.consolidateArr(errors);\n      };\n      var toString = function () {\n        return 'oneOf(' + map$2(props, function (prop) {\n          return prop.toString();\n        }).join(', ') + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var setOf$1 = function (validator, prop) {\n      var validateKeys = function (path, keys) {\n        return arrOf(value$2(validator)).extract(path, keys);\n      };\n      var extract = function (path, o) {\n        var keys$1 = keys(o);\n        var validatedKeys = validateKeys(path, keys$1);\n        return SimpleResult.bind(validatedKeys, function (validKeys) {\n          var schema = map$2(validKeys, function (vk) {\n            return field$2(vk, vk, required$2(), prop);\n          });\n          return objOf(schema).extract(path, o);\n        });\n      };\n      var toString = function () {\n        return 'setOf(' + prop.toString() + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var thunk = function (_desc, processor) {\n      var getP = cached(processor);\n      var extract = function (path, val) {\n        return getP().extract(path, val);\n      };\n      var toString = function () {\n        return getP().toString();\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var arrOfObj = compose(arrOf, objOf);\n\n    var anyValue = constant$1(anyValue$1);\n    var typedValue = function (validator, expectedType) {\n      return value$2(function (a) {\n        var actualType = typeof a;\n        return validator(a) ? SimpleResult.svalue(a) : SimpleResult.serror('Expected type: ' + expectedType + ' but got: ' + actualType);\n      });\n    };\n    var number = typedValue(isNumber, 'number');\n    var string = typedValue(isString, 'string');\n    var boolean = typedValue(isBoolean, 'boolean');\n    var functionProcessor = typedValue(isFunction, 'function');\n    var isPostMessageable = function (val) {\n      if (Object(val) !== val) {\n        return true;\n      }\n      switch ({}.toString.call(val).slice(8, -1)) {\n      case 'Boolean':\n      case 'Number':\n      case 'String':\n      case 'Date':\n      case 'RegExp':\n      case 'Blob':\n      case 'FileList':\n      case 'ImageData':\n      case 'ImageBitmap':\n      case 'ArrayBuffer':\n        return true;\n      case 'Array':\n      case 'Object':\n        return Object.keys(val).every(function (prop) {\n          return isPostMessageable(val[prop]);\n        });\n      default:\n        return false;\n      }\n    };\n    var postMessageable = value$2(function (a) {\n      if (isPostMessageable(a)) {\n        return SimpleResult.svalue(a);\n      } else {\n        return SimpleResult.serror('Expected value to be acceptable for sending via postMessage');\n      }\n    });\n\n    var chooseFrom = function (path, input, branches, ch) {\n      var fields = get$e(branches, ch);\n      return fields.fold(function () {\n        return missingBranch(path, branches, ch);\n      }, function (vp) {\n        return vp.extract(path.concat(['branch: ' + ch]), input);\n      });\n    };\n    var choose$2 = function (key, branches) {\n      var extract = function (path, input) {\n        var choice = get$e(input, key);\n        return choice.fold(function () {\n          return missingKey(path, key);\n        }, function (chosen) {\n          return chooseFrom(path, input, branches, chosen);\n        });\n      };\n      var toString = function () {\n        return 'chooseOn(' + key + '). Possible values: ' + keys(branches);\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n\n    var arrOfVal = function () {\n      return arrOf(anyValue$1);\n    };\n    var valueOf = function (validator) {\n      return value$2(function (v) {\n        return validator(v).fold(SimpleResult.serror, SimpleResult.svalue);\n      });\n    };\n    var setOf = function (validator, prop) {\n      return setOf$1(function (v) {\n        return SimpleResult.fromResult(validator(v));\n      }, prop);\n    };\n    var extractValue = function (label, prop, obj) {\n      var res = prop.extract([label], obj);\n      return SimpleResult.mapError(res, function (errs) {\n        return {\n          input: obj,\n          errors: errs\n        };\n      });\n    };\n    var asRaw = function (label, prop, obj) {\n      return SimpleResult.toResult(extractValue(label, prop, obj));\n    };\n    var getOrDie = function (extraction) {\n      return extraction.fold(function (errInfo) {\n        throw new Error(formatError(errInfo));\n      }, identity$1);\n    };\n    var asRawOrDie$1 = function (label, prop, obj) {\n      return getOrDie(asRaw(label, prop, obj));\n    };\n    var formatError = function (errInfo) {\n      return 'Errors: \\n' + formatErrors(errInfo.errors).join('\\n') + '\\n\\nInput object: ' + formatObj(errInfo.input);\n    };\n    var choose$1 = function (key, branches) {\n      return choose$2(key, map$1(branches, objOf));\n    };\n    var thunkOf = function (desc, schema) {\n      return thunk(desc, schema);\n    };\n\n    var field$1 = field$2;\n    var customField = customField$1;\n    var validateEnum = function (values) {\n      return valueOf(function (value) {\n        return contains$2(values, value) ? Result.value(value) : Result.error('Unsupported value: \"' + value + '\", choose one of \"' + values.join(', ') + '\".');\n      });\n    };\n    var required$1 = function (key) {\n      return field$1(key, key, required$2(), anyValue());\n    };\n    var requiredOf = function (key, schema) {\n      return field$1(key, key, required$2(), schema);\n    };\n    var requiredNumber = function (key) {\n      return requiredOf(key, number);\n    };\n    var requiredString = function (key) {\n      return requiredOf(key, string);\n    };\n    var requiredStringEnum = function (key, values) {\n      return field$1(key, key, required$2(), validateEnum(values));\n    };\n    var requiredBoolean = function (key) {\n      return requiredOf(key, boolean);\n    };\n    var requiredFunction = function (key) {\n      return requiredOf(key, functionProcessor);\n    };\n    var forbid = function (key, message) {\n      return field$1(key, key, asOption(), value$2(function (_v) {\n        return SimpleResult.serror('The field: ' + key + ' is forbidden. ' + message);\n      }));\n    };\n    var requiredObjOf = function (key, objSchema) {\n      return field$1(key, key, required$2(), objOf(objSchema));\n    };\n    var requiredArrayOfObj = function (key, objFields) {\n      return field$1(key, key, required$2(), arrOfObj(objFields));\n    };\n    var requiredArrayOf = function (key, schema) {\n      return field$1(key, key, required$2(), arrOf(schema));\n    };\n    var option = function (key) {\n      return field$1(key, key, asOption(), anyValue());\n    };\n    var optionOf = function (key, schema) {\n      return field$1(key, key, asOption(), schema);\n    };\n    var optionNumber = function (key) {\n      return optionOf(key, number);\n    };\n    var optionString = function (key) {\n      return optionOf(key, string);\n    };\n    var optionFunction = function (key) {\n      return optionOf(key, functionProcessor);\n    };\n    var optionArrayOf = function (key, schema) {\n      return optionOf(key, arrOf(schema));\n    };\n    var optionObjOf = function (key, objSchema) {\n      return optionOf(key, objOf(objSchema));\n    };\n    var optionObjOfOnly = function (key, objSchema) {\n      return optionOf(key, objOfOnly(objSchema));\n    };\n    var defaulted = function (key, fallback) {\n      return field$1(key, key, defaulted$1(fallback), anyValue());\n    };\n    var defaultedOf = function (key, fallback, schema) {\n      return field$1(key, key, defaulted$1(fallback), schema);\n    };\n    var defaultedNumber = function (key, fallback) {\n      return defaultedOf(key, fallback, number);\n    };\n    var defaultedString = function (key, fallback) {\n      return defaultedOf(key, fallback, string);\n    };\n    var defaultedStringEnum = function (key, fallback, values) {\n      return defaultedOf(key, fallback, validateEnum(values));\n    };\n    var defaultedBoolean = function (key, fallback) {\n      return defaultedOf(key, fallback, boolean);\n    };\n    var defaultedFunction = function (key, fallback) {\n      return defaultedOf(key, fallback, functionProcessor);\n    };\n    var defaultedPostMsg = function (key, fallback) {\n      return defaultedOf(key, fallback, postMessageable);\n    };\n    var defaultedArrayOf = function (key, fallback, schema) {\n      return defaultedOf(key, fallback, arrOf(schema));\n    };\n    var defaultedObjOf = function (key, fallback, objSchema) {\n      return defaultedOf(key, fallback, objOf(objSchema));\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var generate$7 = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each$1(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains$2(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              var foldArgs = [];\n              for (var _i = 0; _i < arguments.length; _i++) {\n                foldArgs[_i] = arguments[_i];\n              }\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              var target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$7 };\n\n    Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var partition$1 = function (results) {\n      var errors = [];\n      var values = [];\n      each$1(results, function (result) {\n        result.fold(function (err) {\n          errors.push(err);\n        }, function (value) {\n          values.push(value);\n        });\n      });\n      return {\n        errors: errors,\n        values: values\n      };\n    };\n\n    var exclude$1 = function (obj, fields) {\n      var r = {};\n      each(obj, function (v, k) {\n        if (!contains$2(fields, k)) {\n          r[k] = v;\n        }\n      });\n      return r;\n    };\n\n    var wrap$2 = function (key, value) {\n      var _a;\n      return _a = {}, _a[key] = value, _a;\n    };\n    var wrapAll$1 = function (keyvalues) {\n      var r = {};\n      each$1(keyvalues, function (kv) {\n        r[kv.key] = kv.value;\n      });\n      return r;\n    };\n\n    var exclude = function (obj, fields) {\n      return exclude$1(obj, fields);\n    };\n    var wrap$1 = function (key, value) {\n      return wrap$2(key, value);\n    };\n    var wrapAll = function (keyvalues) {\n      return wrapAll$1(keyvalues);\n    };\n    var mergeValues = function (values, base) {\n      return values.length === 0 ? Result.value(base) : Result.value(deepMerge(base, merge$1.apply(undefined, values)));\n    };\n    var mergeErrors = function (errors) {\n      return Result.error(flatten(errors));\n    };\n    var consolidate = function (objs, base) {\n      var partitions = partition$1(objs);\n      return partitions.errors.length > 0 ? mergeErrors(partitions.errors) : mergeValues(partitions.values, base);\n    };\n\n    var ensureIsRoot = function (isRoot) {\n      return isFunction(isRoot) ? isRoot : never;\n    };\n    var ancestor$2 = function (scope, transform, isRoot) {\n      var element = scope.dom;\n      var stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$4 = function (scope, transform, isRoot) {\n      var current = transform(scope);\n      var stop = ensureIsRoot(isRoot);\n      return current.orThunk(function () {\n        return stop(scope) ? Optional.none() : ancestor$2(scope, transform, stop);\n      });\n    };\n\n    var isSource = function (component, simulatedEvent) {\n      return eq(component.element, simulatedEvent.event.target);\n    };\n\n    var defaultEventHandler = {\n      can: always,\n      abort: never,\n      run: noop\n    };\n    var nu$9 = function (parts) {\n      if (!hasNonNullableKey(parts, 'can') && !hasNonNullableKey(parts, 'abort') && !hasNonNullableKey(parts, 'run')) {\n        throw new Error('EventHandler defined by: ' + JSON.stringify(parts, null, 2) + ' does not have can, abort, or run!');\n      }\n      return __assign(__assign({}, defaultEventHandler), parts);\n    };\n    var all$2 = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc && f(handler).apply(undefined, args);\n        }, true);\n      };\n    };\n    var any = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc || f(handler).apply(undefined, args);\n        }, false);\n      };\n    };\n    var read$2 = function (handler) {\n      return isFunction(handler) ? {\n        can: always,\n        abort: never,\n        run: handler\n      } : handler;\n    };\n    var fuse$1 = function (handlers) {\n      var can = all$2(handlers, function (handler) {\n        return handler.can;\n      });\n      var abort = any(handlers, function (handler) {\n        return handler.abort;\n      });\n      var run = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        each$1(handlers, function (handler) {\n          handler.run.apply(undefined, args);\n        });\n      };\n      return {\n        can: can,\n        abort: abort,\n        run: run\n      };\n    };\n\n    var constant = constant$1;\n    var touchstart = constant('touchstart');\n    var touchmove = constant('touchmove');\n    var touchend = constant('touchend');\n    var touchcancel = constant('touchcancel');\n    var mousedown = constant('mousedown');\n    var mousemove = constant('mousemove');\n    var mouseout = constant('mouseout');\n    var mouseup = constant('mouseup');\n    var mouseover = constant('mouseover');\n    var focusin = constant('focusin');\n    var focusout = constant('focusout');\n    var keydown = constant('keydown');\n    var keyup = constant('keyup');\n    var input = constant('input');\n    var change = constant('change');\n    var click = constant('click');\n    var transitioncancel = constant('transitioncancel');\n    var transitionend = constant('transitionend');\n    var transitionstart = constant('transitionstart');\n    var selectstart = constant('selectstart');\n\n    var prefixName = function (name) {\n      return constant$1('alloy.' + name);\n    };\n    var alloy = { tap: prefixName('tap') };\n    var focus$4 = prefixName('focus');\n    var postBlur = prefixName('blur.post');\n    var postPaste = prefixName('paste.post');\n    var receive = prefixName('receive');\n    var execute$5 = prefixName('execute');\n    var focusItem = prefixName('focus.item');\n    var tap = alloy.tap;\n    var longpress = prefixName('longpress');\n    var sandboxClose = prefixName('sandbox.close');\n    var typeaheadCancel = prefixName('typeahead.cancel');\n    var systemInit = prefixName('system.init');\n    var documentTouchmove = prefixName('system.touchmove');\n    var documentTouchend = prefixName('system.touchend');\n    var windowScroll = prefixName('system.scroll');\n    var windowResize = prefixName('system.resize');\n    var attachedToDom = prefixName('system.attached');\n    var detachedFromDom = prefixName('system.detached');\n    var dismissRequested = prefixName('system.dismissRequested');\n    var repositionRequested = prefixName('system.repositionRequested');\n    var focusShifted = prefixName('focusmanager.shifted');\n    var slotVisibility = prefixName('slotcontainer.visibility');\n    var changeTab = prefixName('change.tab');\n    var dismissTab = prefixName('dismiss.tab');\n    var highlight$1 = prefixName('highlight');\n    var dehighlight$1 = prefixName('dehighlight');\n\n    var emit = function (component, event) {\n      dispatchWith(component, component.element, event, {});\n    };\n    var emitWith = function (component, event, properties) {\n      dispatchWith(component, component.element, event, properties);\n    };\n    var emitExecute = function (component) {\n      emit(component, execute$5());\n    };\n    var dispatch = function (component, target, event) {\n      dispatchWith(component, target, event, {});\n    };\n    var dispatchWith = function (component, target, event, properties) {\n      var data = __assign({ target: target }, properties);\n      component.getSystem().triggerEvent(event, target, data);\n    };\n    var dispatchEvent = function (component, target, event, simulatedEvent) {\n      component.getSystem().triggerEvent(event, target, simulatedEvent.event);\n    };\n\n    var derive$2 = function (configs) {\n      return wrapAll(configs);\n    };\n    var abort = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$9({ abort: predicate })\n      };\n    };\n    var can = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$9({ can: predicate })\n      };\n    };\n    var preventDefault = function (name) {\n      return {\n        key: name,\n        value: nu$9({\n          run: function (component, simulatedEvent) {\n            simulatedEvent.event.prevent();\n          }\n        })\n      };\n    };\n    var run$1 = function (name, handler) {\n      return {\n        key: name,\n        value: nu$9({ run: handler })\n      };\n    };\n    var runActionExtra = function (name, action, extra) {\n      return {\n        key: name,\n        value: nu$9({\n          run: function (component, simulatedEvent) {\n            action.apply(undefined, [\n              component,\n              simulatedEvent\n            ].concat(extra));\n          }\n        })\n      };\n    };\n    var runOnName = function (name) {\n      return function (handler) {\n        return run$1(name, handler);\n      };\n    };\n    var runOnSourceName = function (name) {\n      return function (handler) {\n        return {\n          key: name,\n          value: nu$9({\n            run: function (component, simulatedEvent) {\n              if (isSource(component, simulatedEvent)) {\n                handler(component, simulatedEvent);\n              }\n            }\n          })\n        };\n      };\n    };\n    var redirectToUid = function (name, uid) {\n      return run$1(name, function (component, simulatedEvent) {\n        component.getSystem().getByUid(uid).each(function (redirectee) {\n          dispatchEvent(redirectee, redirectee.element, name, simulatedEvent);\n        });\n      });\n    };\n    var redirectToPart = function (name, detail, partName) {\n      var uid = detail.partUids[partName];\n      return redirectToUid(name, uid);\n    };\n    var runWithTarget = function (name, f) {\n      return run$1(name, function (component, simulatedEvent) {\n        var ev = simulatedEvent.event;\n        var target = component.getSystem().getByDom(ev.target).getOrThunk(function () {\n          var closest = closest$4(ev.target, function (el) {\n            return component.getSystem().getByDom(el).toOptional();\n          }, never);\n          return closest.getOr(component);\n        });\n        f(component, target, simulatedEvent);\n      });\n    };\n    var cutter = function (name) {\n      return run$1(name, function (component, simulatedEvent) {\n        simulatedEvent.cut();\n      });\n    };\n    var stopper = function (name) {\n      return run$1(name, function (component, simulatedEvent) {\n        simulatedEvent.stop();\n      });\n    };\n    var runOnSource = function (name, f) {\n      return runOnSourceName(name)(f);\n    };\n    var runOnAttached = runOnSourceName(attachedToDom());\n    var runOnDetached = runOnSourceName(detachedFromDom());\n    var runOnInit = runOnSourceName(systemInit());\n    var runOnExecute$1 = runOnName(execute$5());\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n\n    var get$7 = function (element) {\n      return element.dom.innerHTML;\n    };\n    var set$5 = function (element, content) {\n      var owner = owner$4(element);\n      var docDom = owner.dom;\n      var fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append$2(element, fragment);\n    };\n    var getOuter = function (element) {\n      var container = SugarElement.fromTag('div');\n      var clone = SugarElement.fromDom(element.dom.cloneNode(true));\n      append$2(container, clone);\n      return get$7(container);\n    };\n\n    var clone$2 = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$2(original, false);\n    };\n\n    var getHtml = function (element) {\n      if (isShadowRoot(element)) {\n        return '#shadow-root';\n      } else {\n        var clone = shallow(element);\n        return getOuter(clone);\n      }\n    };\n\n    var element = function (elem) {\n      return getHtml(elem);\n    };\n\n    var isRecursive = function (component, originator, target) {\n      return eq(originator, component.element) && !eq(originator, target);\n    };\n    var events$i = derive$2([can(focus$4(), function (component, simulatedEvent) {\n        var event = simulatedEvent.event;\n        var originator = event.originator;\n        var target = event.target;\n        if (isRecursive(component, originator, target)) {\n          console.warn(focus$4() + ' did not get interpreted by the desired target. ' + '\\nOriginator: ' + element(originator) + '\\nTarget: ' + element(target) + '\\nCheck the ' + focus$4() + ' event handlers');\n          return false;\n        } else {\n          return true;\n        }\n      })]);\n\n    var DefaultEvents = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$i\n    });\n\n    var unique = 0;\n    var generate$6 = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var prefix$1 = constant$1('alloy-id-');\n    var idAttr$1 = constant$1('data-alloy-id');\n\n    var prefix = prefix$1();\n    var idAttr = idAttr$1();\n    var write = function (label, elem) {\n      var id = generate$6(prefix + label);\n      writeOnly(elem, id);\n      return id;\n    };\n    var writeOnly = function (elem, uid) {\n      Object.defineProperty(elem.dom, idAttr, {\n        value: uid,\n        writable: true\n      });\n    };\n    var read$1 = function (elem) {\n      var id = isElement$2(elem) ? elem.dom[idAttr] : null;\n      return Optional.from(id);\n    };\n    var generate$5 = function (prefix) {\n      return generate$6(prefix);\n    };\n\n    var make$8 = identity$1;\n\n    var NoContextApi = function (getComp) {\n      var getMessage = function (event) {\n        return 'The component must be in a context to execute: ' + event + (getComp ? '\\n' + element(getComp().element) + ' is not in context.' : '');\n      };\n      var fail = function (event) {\n        return function () {\n          throw new Error(getMessage(event));\n        };\n      };\n      var warn = function (event) {\n        return function () {\n          console.warn(getMessage(event));\n        };\n      };\n      return {\n        debugInfo: constant$1('fake'),\n        triggerEvent: warn('triggerEvent'),\n        triggerFocus: warn('triggerFocus'),\n        triggerEscape: warn('triggerEscape'),\n        broadcast: warn('broadcast'),\n        broadcastOn: warn('broadcastOn'),\n        broadcastEvent: warn('broadcastEvent'),\n        build: fail('build'),\n        addToWorld: fail('addToWorld'),\n        removeFromWorld: fail('removeFromWorld'),\n        addToGui: fail('addToGui'),\n        removeFromGui: fail('removeFromGui'),\n        getByUid: fail('getByUid'),\n        getByDom: fail('getByDom'),\n        isConnected: never\n      };\n    };\n    var singleton$1 = NoContextApi();\n\n    var markAsBehaviourApi = function (f, apiName, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: apiName,\n          parameters: cleanParameters(parameters.slice(0, 1).concat(parameters.slice(3)))\n        };\n      };\n      return f;\n    };\n    var cleanParameters = function (parameters) {\n      return map$2(parameters, function (p) {\n        return endsWith(p, '/*') ? p.substring(0, p.length - '/*'.length) : p;\n      });\n    };\n    var markAsExtraApi = function (f, extraName) {\n      var delegate = f.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: extraName,\n          parameters: cleanParameters(parameters)\n        };\n      };\n      return f;\n    };\n    var markAsSketchApi = function (f, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: 'OVERRIDE',\n          parameters: cleanParameters(parameters.slice(1))\n        };\n      };\n      return f;\n    };\n\n    var premadeTag = generate$6('alloy-premade');\n    var premade$1 = function (comp) {\n      return wrap$1(premadeTag, comp);\n    };\n    var getPremade = function (spec) {\n      return get$e(spec, premadeTag);\n    };\n    var makeApi = function (f) {\n      return markAsSketchApi(function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        return f.apply(void 0, __spreadArray([\n          component.getApis(),\n          component\n        ], rest, false));\n      }, f);\n    };\n\n    var NoState = {\n      init: function () {\n        return nu$8({ readState: constant$1('No State required') });\n      }\n    };\n    var nu$8 = function (spec) {\n      return spec;\n    };\n\n    var generateFrom$1 = function (spec, all) {\n      var schema = map$2(all, function (a) {\n        return optionObjOf(a.name(), [\n          required$1('config'),\n          defaulted('state', NoState)\n        ]);\n      });\n      var validated = asRaw('component.behaviours', objOf(schema), spec.behaviours).fold(function (errInfo) {\n        throw new Error(formatError(errInfo) + '\\nComplete spec:\\n' + JSON.stringify(spec, null, 2));\n      }, identity$1);\n      return {\n        list: all,\n        data: map$1(validated, function (optBlobThunk) {\n          var output = optBlobThunk.map(function (blob) {\n            return {\n              config: blob.config,\n              state: blob.state.init(blob.config)\n            };\n          });\n          return constant$1(output);\n        })\n      };\n    };\n    var getBehaviours$3 = function (bData) {\n      return bData.list;\n    };\n    var getData$2 = function (bData) {\n      return bData.data;\n    };\n\n    var byInnerKey = function (data, tuple) {\n      var r = {};\n      each(data, function (detail, key) {\n        each(detail, function (value, indexKey) {\n          var chain = get$e(r, indexKey).getOr([]);\n          r[indexKey] = chain.concat([tuple(key, value)]);\n        });\n      });\n      return r;\n    };\n\n    var nu$7 = function (s) {\n      return {\n        classes: isUndefined(s.classes) ? [] : s.classes,\n        attributes: isUndefined(s.attributes) ? {} : s.attributes,\n        styles: isUndefined(s.styles) ? {} : s.styles\n      };\n    };\n    var merge = function (defnA, mod) {\n      return __assign(__assign({}, defnA), {\n        attributes: __assign(__assign({}, defnA.attributes), mod.attributes),\n        styles: __assign(__assign({}, defnA.styles), mod.styles),\n        classes: defnA.classes.concat(mod.classes)\n      });\n    };\n\n    var combine$2 = function (info, baseMod, behaviours, base) {\n      var modsByBehaviour = __assign({}, baseMod);\n      each$1(behaviours, function (behaviour) {\n        modsByBehaviour[behaviour.name()] = behaviour.exhibit(info, base);\n      });\n      var byAspect = byInnerKey(modsByBehaviour, function (name, modification) {\n        return {\n          name: name,\n          modification: modification\n        };\n      });\n      var combineObjects = function (objects) {\n        return foldr(objects, function (b, a) {\n          return __assign(__assign({}, a.modification), b);\n        }, {});\n      };\n      var combinedClasses = foldr(byAspect.classes, function (b, a) {\n        return a.modification.concat(b);\n      }, []);\n      var combinedAttributes = combineObjects(byAspect.attributes);\n      var combinedStyles = combineObjects(byAspect.styles);\n      return nu$7({\n        classes: combinedClasses,\n        attributes: combinedAttributes,\n        styles: combinedStyles\n      });\n    };\n\n    var sortKeys = function (label, keyName, array, order) {\n      try {\n        var sorted = sort(array, function (a, b) {\n          var aKey = a[keyName];\n          var bKey = b[keyName];\n          var aIndex = order.indexOf(aKey);\n          var bIndex = order.indexOf(bKey);\n          if (aIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + aKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (bIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + bKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (aIndex < bIndex) {\n            return -1;\n          } else if (bIndex < aIndex) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        return Result.value(sorted);\n      } catch (err) {\n        return Result.error([err]);\n      }\n    };\n\n    var uncurried = function (handler, purpose) {\n      return {\n        handler: handler,\n        purpose: purpose\n      };\n    };\n    var curried = function (handler, purpose) {\n      return {\n        cHandler: handler,\n        purpose: purpose\n      };\n    };\n    var curryArgs = function (descHandler, extraArgs) {\n      return curried(curry.apply(undefined, [descHandler.handler].concat(extraArgs)), descHandler.purpose);\n    };\n    var getCurried = function (descHandler) {\n      return descHandler.cHandler;\n    };\n\n    var behaviourTuple = function (name, handler) {\n      return {\n        name: name,\n        handler: handler\n      };\n    };\n    var nameToHandlers = function (behaviours, info) {\n      var r = {};\n      each$1(behaviours, function (behaviour) {\n        r[behaviour.name()] = behaviour.handlers(info);\n      });\n      return r;\n    };\n    var groupByEvents = function (info, behaviours, base) {\n      var behaviourEvents = __assign(__assign({}, base), nameToHandlers(behaviours, info));\n      return byInnerKey(behaviourEvents, behaviourTuple);\n    };\n    var combine$1 = function (info, eventOrder, behaviours, base) {\n      var byEventName = groupByEvents(info, behaviours, base);\n      return combineGroups(byEventName, eventOrder);\n    };\n    var assemble = function (rawHandler) {\n      var handler = read$2(rawHandler);\n      return function (component, simulatedEvent) {\n        var rest = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n          rest[_i - 2] = arguments[_i];\n        }\n        var args = [\n          component,\n          simulatedEvent\n        ].concat(rest);\n        if (handler.abort.apply(undefined, args)) {\n          simulatedEvent.stop();\n        } else if (handler.can.apply(undefined, args)) {\n          handler.run.apply(undefined, args);\n        }\n      };\n    };\n    var missingOrderError = function (eventName, tuples) {\n      return Result.error(['The event (' + eventName + ') has more than one behaviour that listens to it.\\nWhen this occurs, you must ' + 'specify an event ordering for the behaviours in your spec (e.g. [ \"listing\", \"toggling\" ]).\\nThe behaviours that ' + 'can trigger it are: ' + JSON.stringify(map$2(tuples, function (c) {\n          return c.name;\n        }), null, 2)]);\n    };\n    var fuse = function (tuples, eventOrder, eventName) {\n      var order = eventOrder[eventName];\n      if (!order) {\n        return missingOrderError(eventName, tuples);\n      } else {\n        return sortKeys('Event: ' + eventName, 'name', tuples, order).map(function (sortedTuples) {\n          var handlers = map$2(sortedTuples, function (tuple) {\n            return tuple.handler;\n          });\n          return fuse$1(handlers);\n        });\n      }\n    };\n    var combineGroups = function (byEventName, eventOrder) {\n      var r = mapToArray(byEventName, function (tuples, eventName) {\n        var combined = tuples.length === 1 ? Result.value(tuples[0].handler) : fuse(tuples, eventOrder, eventName);\n        return combined.map(function (handler) {\n          var assembled = assemble(handler);\n          var purpose = tuples.length > 1 ? filter$2(eventOrder[eventName], function (o) {\n            return exists(tuples, function (t) {\n              return t.name === o;\n            });\n          }).join(' > ') : tuples[0].name;\n          return wrap$1(eventName, uncurried(assembled, purpose));\n        });\n      });\n      return consolidate(r, {});\n    };\n\n    var _a$2;\n    var baseBehaviour = 'alloy.base.behaviour';\n    var schema$z = objOf([\n      field$1('dom', 'dom', required$2(), objOf([\n        required$1('tag'),\n        defaulted('styles', {}),\n        defaulted('classes', []),\n        defaulted('attributes', {}),\n        option('value'),\n        option('innerHtml')\n      ])),\n      required$1('components'),\n      required$1('uid'),\n      defaulted('events', {}),\n      defaulted('apis', {}),\n      field$1('eventOrder', 'eventOrder', mergeWith((_a$2 = {}, _a$2[execute$5()] = [\n        'disabling',\n        baseBehaviour,\n        'toggling',\n        'typeaheadevents'\n      ], _a$2[focus$4()] = [\n        baseBehaviour,\n        'focusing',\n        'keying'\n      ], _a$2[systemInit()] = [\n        baseBehaviour,\n        'disabling',\n        'toggling',\n        'representing'\n      ], _a$2[input()] = [\n        baseBehaviour,\n        'representing',\n        'streaming',\n        'invalidating'\n      ], _a$2[detachedFromDom()] = [\n        baseBehaviour,\n        'representing',\n        'item-events',\n        'tooltipping'\n      ], _a$2[mousedown()] = [\n        'focusing',\n        baseBehaviour,\n        'item-type-events'\n      ], _a$2[touchstart()] = [\n        'focusing',\n        baseBehaviour,\n        'item-type-events'\n      ], _a$2[mouseover()] = [\n        'item-type-events',\n        'tooltipping'\n      ], _a$2[receive()] = [\n        'receiving',\n        'reflecting',\n        'tooltipping'\n      ], _a$2)), anyValue()),\n      option('domModification')\n    ]);\n    var toInfo = function (spec) {\n      return asRaw('custom.definition', schema$z, spec);\n    };\n    var toDefinition = function (detail) {\n      return __assign(__assign({}, detail.dom), {\n        uid: detail.uid,\n        domChildren: map$2(detail.components, function (comp) {\n          return comp.element;\n        })\n      });\n    };\n    var toModification = function (detail) {\n      return detail.domModification.fold(function () {\n        return nu$7({});\n      }, nu$7);\n    };\n    var toEvents = function (info) {\n      return info.events;\n    };\n\n    var read = function (element, attr) {\n      var value = get$d(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$4 = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set$8(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$4 = function (element, attr, id) {\n      var nu = filter$2(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set$8(element, attr, nu.join(' '));\n      } else {\n        remove$7(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$6 = function (element) {\n      return read(element, 'class');\n    };\n    var add$3 = function (element, clazz) {\n      return add$4(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$4(element, 'class', clazz);\n    };\n\n    var add$2 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$3(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$6(element);\n      if (classList.length === 0) {\n        remove$7(element, 'class');\n      }\n    };\n    var remove$2 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var add$1 = function (element, classes) {\n      each$1(classes, function (x) {\n        add$2(element, x);\n      });\n    };\n    var remove$1 = function (element, classes) {\n      each$1(classes, function (x) {\n        remove$2(element, x);\n      });\n    };\n    var hasAll = function (element, classes) {\n      return forall(classes, function (clazz) {\n        return has(element, clazz);\n      });\n    };\n\n    var get$5 = function (element) {\n      return element.dom.value;\n    };\n    var set$4 = function (element, value) {\n      if (value === undefined) {\n        throw new Error('Value.set was undefined');\n      }\n      element.dom.value = value;\n    };\n\n    var renderToDom = function (definition) {\n      var subject = SugarElement.fromTag(definition.tag);\n      setAll$1(subject, definition.attributes);\n      add$1(subject, definition.classes);\n      setAll(subject, definition.styles);\n      definition.innerHtml.each(function (html) {\n        return set$5(subject, html);\n      });\n      var children = definition.domChildren;\n      append$1(subject, children);\n      definition.value.each(function (value) {\n        set$4(subject, value);\n      });\n      if (!definition.uid) {\n        debugger;\n      }\n      writeOnly(subject, definition.uid);\n      return subject;\n    };\n\n    var getBehaviours$2 = function (spec) {\n      var behaviours = get$e(spec, 'behaviours').getOr({});\n      return bind$3(keys(behaviours), function (name) {\n        var behaviour = behaviours[name];\n        return isNonNullable(behaviour) ? [behaviour.me] : [];\n      });\n    };\n    var generateFrom = function (spec, all) {\n      return generateFrom$1(spec, all);\n    };\n    var generate$4 = function (spec) {\n      var all = getBehaviours$2(spec);\n      return generateFrom(spec, all);\n    };\n\n    var getDomDefinition = function (info, bList, bData) {\n      var definition = toDefinition(info);\n      var infoModification = toModification(info);\n      var baseModification = { 'alloy.base.modification': infoModification };\n      var modification = bList.length > 0 ? combine$2(bData, baseModification, bList, definition) : infoModification;\n      return merge(definition, modification);\n    };\n    var getEvents = function (info, bList, bData) {\n      var baseEvents = { 'alloy.base.behaviour': toEvents(info) };\n      return combine$1(bData, info.eventOrder, bList, baseEvents).getOrDie();\n    };\n    var build$2 = function (spec) {\n      var getMe = function () {\n        return me;\n      };\n      var systemApi = Cell(singleton$1);\n      var info = getOrDie(toInfo(spec));\n      var bBlob = generate$4(spec);\n      var bList = getBehaviours$3(bBlob);\n      var bData = getData$2(bBlob);\n      var modDefinition = getDomDefinition(info, bList, bData);\n      var item = renderToDom(modDefinition);\n      var events = getEvents(info, bList, bData);\n      var subcomponents = Cell(info.components);\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(getMe));\n      };\n      var syncComponents = function () {\n        var children$1 = children(item);\n        var subs = bind$3(children$1, function (child) {\n          return systemApi.get().getByDom(child).fold(function () {\n            return [];\n          }, pure$2);\n        });\n        subcomponents.set(subs);\n      };\n      var config = function (behaviour) {\n        var b = bData;\n        var f = isFunction(b[behaviour.name()]) ? b[behaviour.name()] : function () {\n          throw new Error('Could not find ' + behaviour.name() + ' in ' + JSON.stringify(spec, null, 2));\n        };\n        return f();\n      };\n      var hasConfigured = function (behaviour) {\n        return isFunction(bData[behaviour.name()]);\n      };\n      var getApis = function () {\n        return info.apis;\n      };\n      var readState = function (behaviourName) {\n        return bData[behaviourName]().map(function (b) {\n          return b.state.readState();\n        }).getOr('not enabled');\n      };\n      var me = {\n        uid: spec.uid,\n        getSystem: systemApi.get,\n        config: config,\n        hasConfigured: hasConfigured,\n        spec: spec,\n        readState: readState,\n        getApis: getApis,\n        connect: connect,\n        disconnect: disconnect,\n        element: item,\n        syncComponents: syncComponents,\n        components: subcomponents.get,\n        events: events\n      };\n      return me;\n    };\n\n    var buildSubcomponents = function (spec) {\n      var components = get$e(spec, 'components').getOr([]);\n      return map$2(components, build$1);\n    };\n    var buildFromSpec = function (userSpec) {\n      var _a = make$8(userSpec), specEvents = _a.events, spec = __rest(_a, ['events']);\n      var components = buildSubcomponents(spec);\n      var completeSpec = __assign(__assign({}, spec), {\n        events: __assign(__assign({}, DefaultEvents), specEvents),\n        components: components\n      });\n      return Result.value(build$2(completeSpec));\n    };\n    var text$1 = function (textContent) {\n      var element = SugarElement.fromText(textContent);\n      return external$2({ element: element });\n    };\n    var external$2 = function (spec) {\n      var extSpec = asRawOrDie$1('external.component', objOfOnly([\n        required$1('element'),\n        option('uid')\n      ]), spec);\n      var systemApi = Cell(NoContextApi());\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(function () {\n          return me;\n        }));\n      };\n      var uid = extSpec.uid.getOrThunk(function () {\n        return generate$5('external');\n      });\n      writeOnly(extSpec.element, uid);\n      var me = {\n        uid: uid,\n        getSystem: systemApi.get,\n        config: Optional.none,\n        hasConfigured: never,\n        connect: connect,\n        disconnect: disconnect,\n        getApis: function () {\n          return {};\n        },\n        element: extSpec.element,\n        spec: spec,\n        readState: constant$1('No state'),\n        syncComponents: noop,\n        components: constant$1([]),\n        events: {}\n      };\n      return premade$1(me);\n    };\n    var uids = generate$5;\n    var isSketchSpec$1 = function (spec) {\n      return has$2(spec, 'uid');\n    };\n    var build$1 = function (spec) {\n      return getPremade(spec).getOrThunk(function () {\n        var userSpecWithUid = isSketchSpec$1(spec) ? spec : __assign({ uid: uids('') }, spec);\n        return buildFromSpec(userSpecWithUid).getOrDie();\n      });\n    };\n    var premade = premade$1;\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor$1 = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$3 = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor$1, scope, predicate, isRoot);\n    };\n    var child$1 = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(SugarElement.fromDom(node));\n      };\n      var result = find$5(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n    var descendant$1 = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = SugarElement.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Optional.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope.dom);\n    };\n\n    var closest$2 = function (scope, predicate, isRoot) {\n      return closest$3(scope, predicate, isRoot).isSome();\n    };\n\n    var ancestor = function (scope, selector, isRoot) {\n      return ancestor$1(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var child = function (scope, selector) {\n      return child$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      var is$1 = function (element, selector) {\n        return is(element, selector);\n      };\n      return ClosestOrAncestor(is$1, ancestor, scope, selector, isRoot);\n    };\n\n    var find$1 = function (queryElem) {\n      var dependent = closest$3(queryElem, function (elem) {\n        if (!isElement$2(elem)) {\n          return false;\n        }\n        var id = get$d(elem, 'id');\n        return id !== undefined && id.indexOf('aria-owns') > -1;\n      });\n      return dependent.bind(function (dep) {\n        var id = get$d(dep, 'id');\n        var dos = getRootNode(dep);\n        return descendant(dos, '[aria-owns=\"' + id + '\"]');\n      });\n    };\n    var manager = function () {\n      var ariaId = generate$6('aria-owns');\n      var link = function (elem) {\n        set$8(elem, 'aria-owns', ariaId);\n      };\n      var unlink = function (elem) {\n        remove$7(elem, 'aria-owns');\n      };\n      return {\n        id: ariaId,\n        link: link,\n        unlink: unlink\n      };\n    };\n\n    var isAriaPartOf = function (component, queryElem) {\n      return find$1(queryElem).exists(function (owner) {\n        return isPartOf$1(component, owner);\n      });\n    };\n    var isPartOf$1 = function (component, queryElem) {\n      return closest$2(queryElem, function (el) {\n        return eq(el, component.element);\n      }, never) || isAriaPartOf(component, queryElem);\n    };\n\n    var unknown = 'unknown';\n    var EventConfiguration;\n    (function (EventConfiguration) {\n      EventConfiguration[EventConfiguration['STOP'] = 0] = 'STOP';\n      EventConfiguration[EventConfiguration['NORMAL'] = 1] = 'NORMAL';\n      EventConfiguration[EventConfiguration['LOGGING'] = 2] = 'LOGGING';\n    }(EventConfiguration || (EventConfiguration = {})));\n    var eventConfig = Cell({});\n    var makeEventLogger = function (eventName, initialTarget) {\n      var sequence = [];\n      var startTime = new Date().getTime();\n      return {\n        logEventCut: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'cut',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventStopped: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'stopped',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logNoParent: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'no-parent',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventNoHandlers: function (_name, target) {\n          sequence.push({\n            outcome: 'no-handlers-left',\n            target: target\n          });\n        },\n        logEventResponse: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'response',\n            purpose: purpose,\n            target: target\n          });\n        },\n        write: function () {\n          var finishTime = new Date().getTime();\n          if (contains$2([\n              'mousemove',\n              'mouseover',\n              'mouseout',\n              systemInit()\n            ], eventName)) {\n            return;\n          }\n          console.log(eventName, {\n            event: eventName,\n            time: finishTime - startTime,\n            target: initialTarget.dom,\n            sequence: map$2(sequence, function (s) {\n              if (!contains$2([\n                  'cut',\n                  'stopped',\n                  'response'\n                ], s.outcome)) {\n                return s.outcome;\n              } else {\n                return '{' + s.purpose + '} ' + s.outcome + ' at (' + element(s.target) + ')';\n              }\n            })\n          });\n        }\n      };\n    };\n    var processEvent = function (eventName, initialTarget, f) {\n      var status = get$e(eventConfig.get(), eventName).orThunk(function () {\n        var patterns = keys(eventConfig.get());\n        return findMap(patterns, function (p) {\n          return eventName.indexOf(p) > -1 ? Optional.some(eventConfig.get()[p]) : Optional.none();\n        });\n      }).getOr(EventConfiguration.NORMAL);\n      switch (status) {\n      case EventConfiguration.NORMAL:\n        return f(noLogger());\n      case EventConfiguration.LOGGING: {\n          var logger = makeEventLogger(eventName, initialTarget);\n          var output = f(logger);\n          logger.write();\n          return output;\n        }\n      case EventConfiguration.STOP:\n        return true;\n      }\n    };\n    var path = [\n      'alloy/data/Fields',\n      'alloy/debugging/Debugging'\n    ];\n    var getTrace = function () {\n      var err = new Error();\n      if (err.stack !== undefined) {\n        var lines = err.stack.split('\\n');\n        return find$5(lines, function (line) {\n          return line.indexOf('alloy') > 0 && !exists(path, function (p) {\n            return line.indexOf(p) > -1;\n          });\n        }).getOr(unknown);\n      } else {\n        return unknown;\n      }\n    };\n    var ignoreEvent = {\n      logEventCut: noop,\n      logEventStopped: noop,\n      logNoParent: noop,\n      logEventNoHandlers: noop,\n      logEventResponse: noop,\n      write: noop\n    };\n    var monitorEvent = function (eventName, initialTarget, f) {\n      return processEvent(eventName, initialTarget, f);\n    };\n    var noLogger = constant$1(ignoreEvent);\n\n    var menuFields = constant$1([\n      required$1('menu'),\n      required$1('selectedMenu')\n    ]);\n    var itemFields = constant$1([\n      required$1('item'),\n      required$1('selectedItem')\n    ]);\n    constant$1(objOf(itemFields().concat(menuFields())));\n    var itemSchema$3 = constant$1(objOf(itemFields()));\n\n    var _initSize = requiredObjOf('initSize', [\n      required$1('numColumns'),\n      required$1('numRows')\n    ]);\n    var itemMarkers = function () {\n      return requiredOf('markers', itemSchema$3());\n    };\n    var tieredMenuMarkers = function () {\n      return requiredObjOf('markers', [required$1('backgroundMenu')].concat(menuFields()).concat(itemFields()));\n    };\n    var markers$1 = function (required) {\n      return requiredObjOf('markers', map$2(required, required$1));\n    };\n    var onPresenceHandler = function (label, fieldName, presence) {\n      getTrace();\n      return field$1(fieldName, fieldName, presence, valueOf(function (f) {\n        return Result.value(function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return f.apply(undefined, args);\n        });\n      }));\n    };\n    var onHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, defaulted$1(noop));\n    };\n    var onKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, defaulted$1(Optional.none));\n    };\n    var onStrictHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, required$2());\n    };\n    var onStrictKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, required$2());\n    };\n    var output$1 = function (name, value) {\n      return customField(name, constant$1(value));\n    };\n    var snapshot = function (name) {\n      return customField(name, identity$1);\n    };\n    var initSize = constant$1(_initSize);\n\n    var nu$6 = function (x, y, bubble, direction, placement, boundsRestriction, labelPrefix, alwaysFit) {\n      if (alwaysFit === void 0) {\n        alwaysFit = false;\n      }\n      return {\n        x: x,\n        y: y,\n        bubble: bubble,\n        direction: direction,\n        placement: placement,\n        restriction: boundsRestriction,\n        label: labelPrefix + '-' + placement,\n        alwaysFit: alwaysFit\n      };\n    };\n\n    var adt$a = Adt.generate([\n      { southeast: [] },\n      { southwest: [] },\n      { northeast: [] },\n      { northwest: [] },\n      { south: [] },\n      { north: [] },\n      { east: [] },\n      { west: [] }\n    ]);\n    var cata$2 = function (subject, southeast, southwest, northeast, northwest, south, north, east, west) {\n      return subject.fold(southeast, southwest, northeast, northwest, south, north, east, west);\n    };\n    var cataVertical = function (subject, south, middle, north) {\n      return subject.fold(south, south, north, north, south, north, middle, middle);\n    };\n    var cataHorizontal = function (subject, east, middle, west) {\n      return subject.fold(east, west, east, west, middle, middle, east, west);\n    };\n    var southeast$3 = adt$a.southeast;\n    var southwest$3 = adt$a.southwest;\n    var northeast$3 = adt$a.northeast;\n    var northwest$3 = adt$a.northwest;\n    var south$3 = adt$a.south;\n    var north$3 = adt$a.north;\n    var east$3 = adt$a.east;\n    var west$3 = adt$a.west;\n\n    var cycleBy = function (value, delta, min, max) {\n      var r = value + delta;\n      if (r > max) {\n        return min;\n      } else if (r < min) {\n        return max;\n      } else {\n        return r;\n      }\n    };\n    var clamp$1 = function (value, min, max) {\n      return Math.min(Math.max(value, min), max);\n    };\n\n    var getRestriction = function (anchor, restriction) {\n      switch (restriction) {\n      case 1:\n        return anchor.x;\n      case 0:\n        return anchor.x + anchor.width;\n      case 2:\n        return anchor.y;\n      case 3:\n        return anchor.y + anchor.height;\n      }\n    };\n    var boundsRestriction = function (anchor, restrictions) {\n      return mapToObject([\n        'left',\n        'right',\n        'top',\n        'bottom'\n      ], function (dir) {\n        return get$e(restrictions, dir).map(function (restriction) {\n          return getRestriction(anchor, restriction);\n        });\n      });\n    };\n    var adjustBounds = function (bounds$1, restriction, bubbleOffset) {\n      var applyRestriction = function (dir, current) {\n        return restriction[dir].map(function (pos) {\n          var isVerticalAxis = dir === 'top' || dir === 'bottom';\n          var offset = isVerticalAxis ? bubbleOffset.top : bubbleOffset.left;\n          var comparator = dir === 'left' || dir === 'top' ? Math.max : Math.min;\n          var newPos = comparator(pos, current) + offset;\n          return isVerticalAxis ? clamp$1(newPos, bounds$1.y, bounds$1.bottom) : clamp$1(newPos, bounds$1.x, bounds$1.right);\n        }).getOr(current);\n      };\n      var adjustedLeft = applyRestriction('left', bounds$1.x);\n      var adjustedTop = applyRestriction('top', bounds$1.y);\n      var adjustedRight = applyRestriction('right', bounds$1.right);\n      var adjustedBottom = applyRestriction('bottom', bounds$1.bottom);\n      return bounds(adjustedLeft, adjustedTop, adjustedRight - adjustedLeft, adjustedBottom - adjustedTop);\n    };\n\n    var labelPrefix$2 = 'layout';\n    var eastX$1 = function (anchor) {\n      return anchor.x;\n    };\n    var middleX$1 = function (anchor, element) {\n      return anchor.x + anchor.width / 2 - element.width / 2;\n    };\n    var westX$1 = function (anchor, element) {\n      return anchor.x + anchor.width - element.width;\n    };\n    var northY$2 = function (anchor, element) {\n      return anchor.y - element.height;\n    };\n    var southY$2 = function (anchor) {\n      return anchor.y + anchor.height;\n    };\n    var centreY$1 = function (anchor, element) {\n      return anchor.y + anchor.height / 2 - element.height / 2;\n    };\n    var eastEdgeX$1 = function (anchor) {\n      return anchor.x + anchor.width;\n    };\n    var westEdgeX$1 = function (anchor, element) {\n      return anchor.x - element.width;\n    };\n    var southeast$2 = function (anchor, element, bubbles) {\n      return nu$6(eastX$1(anchor), southY$2(anchor), bubbles.southeast(), southeast$3(), 'southeast', boundsRestriction(anchor, {\n        left: 1,\n        top: 3\n      }), labelPrefix$2);\n    };\n    var southwest$2 = function (anchor, element, bubbles) {\n      return nu$6(westX$1(anchor, element), southY$2(anchor), bubbles.southwest(), southwest$3(), 'southwest', boundsRestriction(anchor, {\n        right: 0,\n        top: 3\n      }), labelPrefix$2);\n    };\n    var northeast$2 = function (anchor, element, bubbles) {\n      return nu$6(eastX$1(anchor), northY$2(anchor, element), bubbles.northeast(), northeast$3(), 'northeast', boundsRestriction(anchor, {\n        left: 1,\n        bottom: 2\n      }), labelPrefix$2);\n    };\n    var northwest$2 = function (anchor, element, bubbles) {\n      return nu$6(westX$1(anchor, element), northY$2(anchor, element), bubbles.northwest(), northwest$3(), 'northwest', boundsRestriction(anchor, {\n        right: 0,\n        bottom: 2\n      }), labelPrefix$2);\n    };\n    var north$2 = function (anchor, element, bubbles) {\n      return nu$6(middleX$1(anchor, element), northY$2(anchor, element), bubbles.north(), north$3(), 'north', boundsRestriction(anchor, { bottom: 2 }), labelPrefix$2);\n    };\n    var south$2 = function (anchor, element, bubbles) {\n      return nu$6(middleX$1(anchor, element), southY$2(anchor), bubbles.south(), south$3(), 'south', boundsRestriction(anchor, { top: 3 }), labelPrefix$2);\n    };\n    var east$2 = function (anchor, element, bubbles) {\n      return nu$6(eastEdgeX$1(anchor), centreY$1(anchor, element), bubbles.east(), east$3(), 'east', boundsRestriction(anchor, { left: 0 }), labelPrefix$2);\n    };\n    var west$2 = function (anchor, element, bubbles) {\n      return nu$6(westEdgeX$1(anchor, element), centreY$1(anchor, element), bubbles.west(), west$3(), 'west', boundsRestriction(anchor, { right: 1 }), labelPrefix$2);\n    };\n    var all$1 = function () {\n      return [\n        southeast$2,\n        southwest$2,\n        northeast$2,\n        northwest$2,\n        south$2,\n        north$2,\n        east$2,\n        west$2\n      ];\n    };\n    var allRtl$1 = function () {\n      return [\n        southwest$2,\n        southeast$2,\n        northwest$2,\n        northeast$2,\n        south$2,\n        north$2,\n        east$2,\n        west$2\n      ];\n    };\n    var aboveOrBelow = function () {\n      return [\n        northeast$2,\n        northwest$2,\n        southeast$2,\n        southwest$2,\n        north$2,\n        south$2\n      ];\n    };\n    var aboveOrBelowRtl = function () {\n      return [\n        northwest$2,\n        northeast$2,\n        southwest$2,\n        southeast$2,\n        north$2,\n        south$2\n      ];\n    };\n    var belowOrAbove = function () {\n      return [\n        southeast$2,\n        southwest$2,\n        northeast$2,\n        northwest$2,\n        south$2,\n        north$2\n      ];\n    };\n    var belowOrAboveRtl = function () {\n      return [\n        southwest$2,\n        southeast$2,\n        northwest$2,\n        northeast$2,\n        south$2,\n        north$2\n      ];\n    };\n\n    var chooseChannels = function (channels, message) {\n      return message.universal ? channels : filter$2(channels, function (ch) {\n        return contains$2(message.channels, ch);\n      });\n    };\n    var events$h = function (receiveConfig) {\n      return derive$2([run$1(receive(), function (component, message) {\n          var channelMap = receiveConfig.channels;\n          var channels = keys(channelMap);\n          var receivingData = message;\n          var targetChannels = chooseChannels(channels, receivingData);\n          each$1(targetChannels, function (ch) {\n            var channelInfo = channelMap[ch];\n            var channelSchema = channelInfo.schema;\n            var data = asRawOrDie$1('channel[' + ch + '] data\\nReceiver: ' + element(component.element), channelSchema, receivingData.data);\n            channelInfo.onReceive(component, data);\n          });\n        })]);\n    };\n\n    var ActiveReceiving = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$h\n    });\n\n    var ReceivingSchema = [requiredOf('channels', setOf(Result.value, objOfOnly([\n        onStrictHandler('onReceive'),\n        defaulted('schema', anyValue())\n      ])))];\n\n    var executeEvent = function (bConfig, bState, executor) {\n      return runOnExecute$1(function (component) {\n        executor(component, bConfig, bState);\n      });\n    };\n    var loadEvent = function (bConfig, bState, f) {\n      return runOnInit(function (component, _simulatedEvent) {\n        f(component, bConfig, bState);\n      });\n    };\n    var create$9 = function (schema, name, active, apis, extra, state) {\n      var configSchema = objOfOnly(schema);\n      var schemaSchema = optionObjOf(name, [optionObjOfOnly('config', schema)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var createModes$1 = function (modes, name, active, apis, extra, state) {\n      var configSchema = modes;\n      var schemaSchema = optionObjOf(name, [optionOf('config', modes)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var wrapApi = function (bName, apiFunction, apiName) {\n      var f = function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        var args = [component].concat(rest);\n        return component.config({ name: constant$1(bName) }).fold(function () {\n          throw new Error('We could not find any behaviour configuration for: ' + bName + '. Using API: ' + apiName);\n        }, function (info) {\n          var rest = Array.prototype.slice.call(args, 1);\n          return apiFunction.apply(undefined, [\n            component,\n            info.config,\n            info.state\n          ].concat(rest));\n        });\n      };\n      return markAsBehaviourApi(f, apiName, apiFunction);\n    };\n    var revokeBehaviour = function (name) {\n      return {\n        key: name,\n        value: undefined\n      };\n    };\n    var doCreate = function (configSchema, schemaSchema, name, active, apis, extra, state) {\n      var getConfig = function (info) {\n        return hasNonNullableKey(info, name) ? info[name]() : Optional.none();\n      };\n      var wrappedApis = map$1(apis, function (apiF, apiName) {\n        return wrapApi(name, apiF, apiName);\n      });\n      var wrappedExtra = map$1(extra, function (extraF, extraName) {\n        return markAsExtraApi(extraF, extraName);\n      });\n      var me = __assign(__assign(__assign({}, wrappedExtra), wrappedApis), {\n        revoke: curry(revokeBehaviour, name),\n        config: function (spec) {\n          var prepared = asRawOrDie$1(name + '-config', configSchema, spec);\n          return {\n            key: name,\n            value: {\n              config: prepared,\n              me: me,\n              configAsRaw: cached(function () {\n                return asRawOrDie$1(name + '-config', configSchema, spec);\n              }),\n              initialConfig: spec,\n              state: state\n            }\n          };\n        },\n        schema: constant$1(schemaSchema),\n        exhibit: function (info, base) {\n          return lift2(getConfig(info), get$e(active, 'exhibit'), function (behaviourInfo, exhibitor) {\n            return exhibitor(base, behaviourInfo.config, behaviourInfo.state);\n          }).getOrThunk(function () {\n            return nu$7({});\n          });\n        },\n        name: constant$1(name),\n        handlers: function (info) {\n          return getConfig(info).map(function (behaviourInfo) {\n            var getEvents = get$e(active, 'events').getOr(function () {\n              return {};\n            });\n            return getEvents(behaviourInfo.config, behaviourInfo.state);\n          }).getOr({});\n        }\n      });\n      return me;\n    };\n\n    var derive$1 = function (capabilities) {\n      return wrapAll(capabilities);\n    };\n    var simpleSchema = objOfOnly([\n      required$1('fields'),\n      required$1('name'),\n      defaulted('active', {}),\n      defaulted('apis', {}),\n      defaulted('state', NoState),\n      defaulted('extra', {})\n    ]);\n    var create$8 = function (data) {\n      var value = asRawOrDie$1('Creating behaviour: ' + data.name, simpleSchema, data);\n      return create$9(value.fields, value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var modeSchema = objOfOnly([\n      required$1('branchKey'),\n      required$1('branches'),\n      required$1('name'),\n      defaulted('active', {}),\n      defaulted('apis', {}),\n      defaulted('state', NoState),\n      defaulted('extra', {})\n    ]);\n    var createModes = function (data) {\n      var value = asRawOrDie$1('Creating behaviour: ' + data.name, modeSchema, data);\n      return createModes$1(choose$1(value.branchKey, value.branches), value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var revoke = constant$1(undefined);\n\n    var Receiving = create$8({\n      fields: ReceivingSchema,\n      name: 'receiving',\n      active: ActiveReceiving\n    });\n\n    var exhibit$6 = function (base, posConfig) {\n      return nu$7({\n        classes: [],\n        styles: posConfig.useFixed() ? {} : { position: 'relative' }\n      });\n    };\n\n    var ActivePosition = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$6\n    });\n\n    var getDocument = function () {\n      return SugarElement.fromDom(document);\n    };\n\n    var focus$3 = function (element) {\n      return element.dom.focus();\n    };\n    var blur$1 = function (element) {\n      return element.dom.blur();\n    };\n    var hasFocus = function (element) {\n      var root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    var active = function (root) {\n      if (root === void 0) {\n        root = getDocument();\n      }\n      return Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    };\n    var search = function (element) {\n      return active(getRootNode(element)).filter(function (e) {\n        return element.dom.contains(e.dom);\n      });\n    };\n\n    var preserve$1 = function (f, container) {\n      var dos = getRootNode(container);\n      var refocus = active(dos).bind(function (focused) {\n        var hasFocus = function (elem) {\n          return eq(focused, elem);\n        };\n        return hasFocus(container) ? Optional.some(container) : descendant$1(container, hasFocus);\n      });\n      var result = f(container);\n      refocus.each(function (oldFocus) {\n        active(dos).filter(function (newFocus) {\n          return eq(newFocus, oldFocus);\n        }).fold(function () {\n          focus$3(oldFocus);\n        }, noop);\n      });\n      return result;\n    };\n\n    var NuPositionCss = function (position, left, top, right, bottom) {\n      var toPx = function (num) {\n        return num + 'px';\n      };\n      return {\n        position: position,\n        left: left.map(toPx),\n        top: top.map(toPx),\n        right: right.map(toPx),\n        bottom: bottom.map(toPx)\n      };\n    };\n    var toOptions = function (position) {\n      return __assign(__assign({}, position), { position: Optional.some(position.position) });\n    };\n    var applyPositionCss = function (element, position) {\n      setOptions(element, toOptions(position));\n    };\n\n    var adt$9 = Adt.generate([\n      { none: [] },\n      {\n        relative: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      }\n    ]);\n    var positionWithDirection = function (posName, decision, x, y, width, height) {\n      var decisionRect = decision.rect;\n      var decisionX = decisionRect.x - x;\n      var decisionY = decisionRect.y - y;\n      var decisionWidth = decisionRect.width;\n      var decisionHeight = decisionRect.height;\n      var decisionRight = width - (decisionX + decisionWidth);\n      var decisionBottom = height - (decisionY + decisionHeight);\n      var left = Optional.some(decisionX);\n      var top = Optional.some(decisionY);\n      var right = Optional.some(decisionRight);\n      var bottom = Optional.some(decisionBottom);\n      var none = Optional.none();\n      return cata$2(decision.direction, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, none, top, right, none);\n      }, function () {\n        return NuPositionCss(posName, left, none, none, bottom);\n      }, function () {\n        return NuPositionCss(posName, none, none, right, bottom);\n      }, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, left, none, none, bottom);\n      }, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, none, top, right, none);\n      });\n    };\n    var reposition = function (origin, decision) {\n      return origin.fold(function () {\n        var decisionRect = decision.rect;\n        return NuPositionCss('absolute', Optional.some(decisionRect.x), Optional.some(decisionRect.y), Optional.none(), Optional.none());\n      }, function (x, y, width, height) {\n        return positionWithDirection('absolute', decision, x, y, width, height);\n      }, function (x, y, width, height) {\n        return positionWithDirection('fixed', decision, x, y, width, height);\n      });\n    };\n    var toBox = function (origin, element) {\n      var rel = curry(find$2, element);\n      var position = origin.fold(rel, rel, function () {\n        var scroll = get$9();\n        return find$2(element).translate(-scroll.left, -scroll.top);\n      });\n      var width = getOuter$1(element);\n      var height = getOuter$2(element);\n      return bounds(position.left, position.top, width, height);\n    };\n    var viewport = function (origin, getBounds) {\n      return getBounds.fold(function () {\n        return origin.fold(win, win, bounds);\n      }, function (b) {\n        return origin.fold(b, b, function () {\n          var bounds$1 = b();\n          var pos = translate$2(origin, bounds$1.x, bounds$1.y);\n          return bounds(pos.left, pos.top, bounds$1.width, bounds$1.height);\n        });\n      });\n    };\n    var translate$2 = function (origin, x, y) {\n      var pos = SugarPosition(x, y);\n      var removeScroll = function () {\n        var outerScroll = get$9();\n        return pos.translate(-outerScroll.left, -outerScroll.top);\n      };\n      return origin.fold(constant$1(pos), constant$1(pos), removeScroll);\n    };\n    var cata$1 = function (subject, onNone, onRelative, onFixed) {\n      return subject.fold(onNone, onRelative, onFixed);\n    };\n    adt$9.none;\n    var relative$1 = adt$9.relative;\n    var fixed$1 = adt$9.fixed;\n\n    var anchor = function (anchorBox, origin) {\n      return {\n        anchorBox: anchorBox,\n        origin: origin\n      };\n    };\n    var box = function (anchorBox, origin) {\n      return anchor(anchorBox, origin);\n    };\n\n    var placementAttribute = 'data-alloy-placement';\n    var setPlacement$1 = function (element, placement) {\n      set$8(element, placementAttribute, placement);\n    };\n    var getPlacement = function (element) {\n      return getOpt(element, placementAttribute);\n    };\n    var reset$2 = function (element) {\n      return remove$7(element, placementAttribute);\n    };\n\n    var adt$8 = Adt.generate([\n      { fit: ['reposition'] },\n      {\n        nofit: [\n          'reposition',\n          'visibleW',\n          'visibleH',\n          'isVisible'\n        ]\n      }\n    ]);\n    var determinePosition = function (box, bounds) {\n      var boundsX = bounds.x, boundsY = bounds.y, boundsRight = bounds.right, boundsBottom = bounds.bottom;\n      var x = box.x, y = box.y, right = box.right, bottom = box.bottom, width = box.width, height = box.height;\n      var xInBounds = x >= boundsX && x <= boundsRight;\n      var yInBounds = y >= boundsY && y <= boundsBottom;\n      var originInBounds = xInBounds && yInBounds;\n      var rightInBounds = right <= boundsRight && right >= boundsX;\n      var bottomInBounds = bottom <= boundsBottom && bottom >= boundsY;\n      var sizeInBounds = rightInBounds && bottomInBounds;\n      var visibleW = Math.min(width, x >= boundsX ? boundsRight - x : right - boundsX);\n      var visibleH = Math.min(height, y >= boundsY ? boundsBottom - y : bottom - boundsY);\n      return {\n        originInBounds: originInBounds,\n        sizeInBounds: sizeInBounds,\n        visibleW: visibleW,\n        visibleH: visibleH\n      };\n    };\n    var calcReposition = function (box, bounds$1) {\n      var boundsX = bounds$1.x, boundsY = bounds$1.y, boundsRight = bounds$1.right, boundsBottom = bounds$1.bottom;\n      var x = box.x, y = box.y, width = box.width, height = box.height;\n      var maxX = Math.max(boundsX, boundsRight - width);\n      var maxY = Math.max(boundsY, boundsBottom - height);\n      var restrictedX = clamp$1(x, boundsX, maxX);\n      var restrictedY = clamp$1(y, boundsY, maxY);\n      var restrictedWidth = Math.min(restrictedX + width, boundsRight) - restrictedX;\n      var restrictedHeight = Math.min(restrictedY + height, boundsBottom) - restrictedY;\n      return bounds(restrictedX, restrictedY, restrictedWidth, restrictedHeight);\n    };\n    var calcMaxSizes = function (direction, box, bounds) {\n      var upAvailable = constant$1(box.bottom - bounds.y);\n      var downAvailable = constant$1(bounds.bottom - box.y);\n      var maxHeight = cataVertical(direction, downAvailable, downAvailable, upAvailable);\n      var westAvailable = constant$1(box.right - bounds.x);\n      var eastAvailable = constant$1(bounds.right - box.x);\n      var maxWidth = cataHorizontal(direction, eastAvailable, eastAvailable, westAvailable);\n      return {\n        maxWidth: maxWidth,\n        maxHeight: maxHeight\n      };\n    };\n    var attempt = function (candidate, width, height, bounds$1) {\n      var bubble = candidate.bubble;\n      var bubbleOffset = bubble.offset;\n      var adjustedBounds = adjustBounds(bounds$1, candidate.restriction, bubbleOffset);\n      var newX = candidate.x + bubbleOffset.left;\n      var newY = candidate.y + bubbleOffset.top;\n      var box = bounds(newX, newY, width, height);\n      var _a = determinePosition(box, adjustedBounds), originInBounds = _a.originInBounds, sizeInBounds = _a.sizeInBounds, visibleW = _a.visibleW, visibleH = _a.visibleH;\n      var fits = originInBounds && sizeInBounds;\n      var fittedBox = fits ? box : calcReposition(box, adjustedBounds);\n      var isPartlyVisible = fittedBox.width > 0 && fittedBox.height > 0;\n      var _b = calcMaxSizes(candidate.direction, fittedBox, bounds$1), maxWidth = _b.maxWidth, maxHeight = _b.maxHeight;\n      var reposition = {\n        rect: fittedBox,\n        maxHeight: maxHeight,\n        maxWidth: maxWidth,\n        direction: candidate.direction,\n        placement: candidate.placement,\n        classes: {\n          on: bubble.classesOn,\n          off: bubble.classesOff\n        },\n        layout: candidate.label,\n        testY: newY\n      };\n      return fits || candidate.alwaysFit ? adt$8.fit(reposition) : adt$8.nofit(reposition, visibleW, visibleH, isPartlyVisible);\n    };\n    var attempts = function (element, candidates, anchorBox, elementBox, bubbles, bounds) {\n      var panelWidth = elementBox.width;\n      var panelHeight = elementBox.height;\n      var attemptBestFit = function (layout, reposition, visibleW, visibleH, isVisible) {\n        var next = layout(anchorBox, elementBox, bubbles, element, bounds);\n        var attemptLayout = attempt(next, panelWidth, panelHeight, bounds);\n        return attemptLayout.fold(constant$1(attemptLayout), function (newReposition, newVisibleW, newVisibleH, newIsVisible) {\n          var improved = isVisible === newIsVisible ? newVisibleH > visibleH || newVisibleW > visibleW : !isVisible && newIsVisible;\n          return improved ? attemptLayout : adt$8.nofit(reposition, visibleW, visibleH, isVisible);\n        });\n      };\n      var abc = foldl(candidates, function (b, a) {\n        var bestNext = curry(attemptBestFit, a);\n        return b.fold(constant$1(b), bestNext);\n      }, adt$8.nofit({\n        rect: anchorBox,\n        maxHeight: elementBox.height,\n        maxWidth: elementBox.width,\n        direction: southeast$3(),\n        placement: 'southeast',\n        classes: {\n          on: [],\n          off: []\n        },\n        layout: 'none',\n        testY: anchorBox.y\n      }, -1, -1, false));\n      return abc.fold(identity$1, identity$1);\n    };\n\n    var singleton = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var get = function () {\n        return subject.get();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        get: get,\n        set: set\n      };\n    };\n    var destroyable = function () {\n      return singleton(function (s) {\n        return s.destroy();\n      });\n    };\n    var unbindable = function () {\n      return singleton(function (s) {\n        return s.unbind();\n      });\n    };\n    var api$1 = function () {\n      var subject = destroyable();\n      var run = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { run: run });\n    };\n    var value$1 = function () {\n      var subject = singleton(noop);\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { on: on });\n    };\n\n    var filter = always;\n    var bind = function (element, event, handler) {\n      return bind$2(element, event, filter, handler);\n    };\n    var capture = function (element, event, handler) {\n      return capture$1(element, event, filter, handler);\n    };\n    var fromRawEvent = fromRawEvent$1;\n\n    var properties = [\n      'top',\n      'bottom',\n      'right',\n      'left'\n    ];\n    var timerAttr = 'data-alloy-transition-timer';\n    var isTransitioning$1 = function (element, transition) {\n      return hasAll(element, transition.classes);\n    };\n    var shouldApplyTransitionCss = function (transition, decision, lastPlacement) {\n      return lastPlacement.exists(function (placer) {\n        var mode = transition.mode;\n        return mode === 'all' ? true : placer[mode] !== decision[mode];\n      });\n    };\n    var hasChanges = function (position, intermediate) {\n      var round = function (value) {\n        return parseFloat(value).toFixed(3);\n      };\n      return find$4(intermediate, function (value, key) {\n        var newValue = position[key].map(round);\n        var val = value.map(round);\n        return !equals(newValue, val);\n      }).isSome();\n    };\n    var getTransitionDuration = function (element) {\n      var get = function (name) {\n        var style = get$c(element, name);\n        var times = isString(style) ? style.split(/\\s*,\\s*/) : [];\n        return filter$2(times, isNotEmpty);\n      };\n      var parse = function (value) {\n        if (isString(value) && /^[\\d.]+/.test(value)) {\n          var num = parseFloat(value);\n          return endsWith(value, 'ms') ? num : num * 1000;\n        } else {\n          return 0;\n        }\n      };\n      var delay = get('transition-delay');\n      var duration = get('transition-duration');\n      return foldl(duration, function (acc, dur, i) {\n        var time = parse(delay[i]) + parse(dur);\n        return Math.max(acc, time);\n      }, 0);\n    };\n    var setupTransitionListeners = function (element, transition) {\n      var transitionEnd = unbindable();\n      var transitionCancel = unbindable();\n      var timer;\n      var isSourceTransition = function (e) {\n        var _a;\n        var pseudoElement = (_a = e.raw.pseudoElement) !== null && _a !== void 0 ? _a : '';\n        return eq(e.target, element) && isEmpty(pseudoElement) && contains$2(properties, e.raw.propertyName);\n      };\n      var transitionDone = function (e) {\n        if (isNullable(e) || isSourceTransition(e)) {\n          transitionEnd.clear();\n          transitionCancel.clear();\n          var type = e === null || e === void 0 ? void 0 : e.raw.type;\n          if (isNullable(type) || type === transitionend()) {\n            clearTimeout(timer);\n            remove$7(element, timerAttr);\n            remove$1(element, transition.classes);\n          }\n        }\n      };\n      var transitionStarted = function () {\n        transitionEnd.set(bind(element, transitionend(), transitionDone));\n        transitionCancel.set(bind(element, transitioncancel(), transitionDone));\n      };\n      if ('ontransitionstart' in element.dom) {\n        var transitionStart_1 = bind(element, transitionstart(), function (e) {\n          if (isSourceTransition(e)) {\n            transitionStart_1.unbind();\n            transitionStarted();\n          }\n        });\n      } else {\n        transitionStarted();\n      }\n      var duration = getTransitionDuration(element);\n      requestAnimationFrame(function () {\n        timer = setTimeout(transitionDone, duration + 17);\n        set$8(element, timerAttr, timer);\n      });\n    };\n    var startTransitioning = function (element, transition) {\n      add$1(element, transition.classes);\n      getOpt(element, timerAttr).each(function (timerId) {\n        clearTimeout(parseInt(timerId, 10));\n        remove$7(element, timerAttr);\n      });\n      setupTransitionListeners(element, transition);\n    };\n    var applyTransitionCss = function (element, origin, position, transition, decision, lastPlacement) {\n      var shouldTransition = shouldApplyTransitionCss(transition, decision, lastPlacement);\n      if (shouldTransition || isTransitioning$1(element, transition)) {\n        set$7(element, 'position', position.position);\n        var rect = toBox(origin, element);\n        var intermediatePosition_1 = reposition(origin, __assign(__assign({}, decision), { rect: rect }));\n        var intermediateCssOptions = mapToObject(properties, function (prop) {\n          return intermediatePosition_1[prop];\n        });\n        if (hasChanges(position, intermediateCssOptions)) {\n          setOptions(element, intermediateCssOptions);\n          if (shouldTransition) {\n            startTransitioning(element, transition);\n          }\n          reflow(element);\n        }\n      } else {\n        remove$1(element, transition.classes);\n      }\n    };\n\n    var elementSize = function (p) {\n      return {\n        width: getOuter$1(p),\n        height: getOuter$2(p)\n      };\n    };\n    var layout = function (anchorBox, element, bubbles, options) {\n      remove$6(element, 'max-height');\n      remove$6(element, 'max-width');\n      var elementBox = elementSize(element);\n      return attempts(element, options.preference, anchorBox, elementBox, bubbles, options.bounds);\n    };\n    var setClasses = function (element, decision) {\n      var classInfo = decision.classes;\n      remove$1(element, classInfo.off);\n      add$1(element, classInfo.on);\n    };\n    var setHeight = function (element, decision, options) {\n      var maxHeightFunction = options.maxHeightFunction;\n      maxHeightFunction(element, decision.maxHeight);\n    };\n    var setWidth = function (element, decision, options) {\n      var maxWidthFunction = options.maxWidthFunction;\n      maxWidthFunction(element, decision.maxWidth);\n    };\n    var position$2 = function (element, decision, options) {\n      var positionCss = reposition(options.origin, decision);\n      options.transition.each(function (transition) {\n        applyTransitionCss(element, options.origin, positionCss, transition, decision, options.lastPlacement);\n      });\n      applyPositionCss(element, positionCss);\n    };\n    var setPlacement = function (element, decision) {\n      setPlacement$1(element, decision.placement);\n    };\n\n    var setMaxHeight = function (element, maxHeight) {\n      setMax$1(element, Math.floor(maxHeight));\n    };\n    var anchored = constant$1(function (element, available) {\n      setMaxHeight(element, available);\n      setAll(element, {\n        'overflow-x': 'hidden',\n        'overflow-y': 'auto'\n      });\n    });\n    var expandable$1 = constant$1(function (element, available) {\n      setMaxHeight(element, available);\n    });\n\n    var defaultOr = function (options, key, dephault) {\n      return options[key] === undefined ? dephault : options[key];\n    };\n    var simple = function (anchor, element, bubble, layouts, lastPlacement, getBounds, overrideOptions, transition) {\n      var maxHeightFunction = defaultOr(overrideOptions, 'maxHeightFunction', anchored());\n      var maxWidthFunction = defaultOr(overrideOptions, 'maxWidthFunction', noop);\n      var anchorBox = anchor.anchorBox;\n      var origin = anchor.origin;\n      var options = {\n        bounds: viewport(origin, getBounds),\n        origin: origin,\n        preference: layouts,\n        maxHeightFunction: maxHeightFunction,\n        maxWidthFunction: maxWidthFunction,\n        lastPlacement: lastPlacement,\n        transition: transition\n      };\n      return go(anchorBox, element, bubble, options);\n    };\n    var go = function (anchorBox, element, bubble, options) {\n      var decision = layout(anchorBox, element, bubble, options);\n      position$2(element, decision, options);\n      setPlacement(element, decision);\n      setClasses(element, decision);\n      setHeight(element, decision, options);\n      setWidth(element, decision, options);\n      return {\n        layout: decision.layout,\n        placement: decision.placement\n      };\n    };\n\n    var allAlignments = [\n      'valignCentre',\n      'alignLeft',\n      'alignRight',\n      'alignCentre',\n      'top',\n      'bottom',\n      'left',\n      'right',\n      'inset'\n    ];\n    var nu$5 = function (xOffset, yOffset, classes, insetModifier) {\n      if (insetModifier === void 0) {\n        insetModifier = 1;\n      }\n      var insetXOffset = xOffset * insetModifier;\n      var insetYOffset = yOffset * insetModifier;\n      var getClasses = function (prop) {\n        return get$e(classes, prop).getOr([]);\n      };\n      var make = function (xDelta, yDelta, alignmentsOn) {\n        var alignmentsOff = difference(allAlignments, alignmentsOn);\n        return {\n          offset: SugarPosition(xDelta, yDelta),\n          classesOn: bind$3(alignmentsOn, getClasses),\n          classesOff: bind$3(alignmentsOff, getClasses)\n        };\n      };\n      return {\n        southeast: function () {\n          return make(-xOffset, yOffset, [\n            'top',\n            'alignLeft'\n          ]);\n        },\n        southwest: function () {\n          return make(xOffset, yOffset, [\n            'top',\n            'alignRight'\n          ]);\n        },\n        south: function () {\n          return make(-xOffset / 2, yOffset, [\n            'top',\n            'alignCentre'\n          ]);\n        },\n        northeast: function () {\n          return make(-xOffset, -yOffset, [\n            'bottom',\n            'alignLeft'\n          ]);\n        },\n        northwest: function () {\n          return make(xOffset, -yOffset, [\n            'bottom',\n            'alignRight'\n          ]);\n        },\n        north: function () {\n          return make(-xOffset / 2, -yOffset, [\n            'bottom',\n            'alignCentre'\n          ]);\n        },\n        east: function () {\n          return make(xOffset, -yOffset / 2, [\n            'valignCentre',\n            'left'\n          ]);\n        },\n        west: function () {\n          return make(-xOffset, -yOffset / 2, [\n            'valignCentre',\n            'right'\n          ]);\n        },\n        insetNortheast: function () {\n          return make(insetXOffset, insetYOffset, [\n            'top',\n            'alignLeft',\n            'inset'\n          ]);\n        },\n        insetNorthwest: function () {\n          return make(-insetXOffset, insetYOffset, [\n            'top',\n            'alignRight',\n            'inset'\n          ]);\n        },\n        insetNorth: function () {\n          return make(-insetXOffset / 2, insetYOffset, [\n            'top',\n            'alignCentre',\n            'inset'\n          ]);\n        },\n        insetSoutheast: function () {\n          return make(insetXOffset, -insetYOffset, [\n            'bottom',\n            'alignLeft',\n            'inset'\n          ]);\n        },\n        insetSouthwest: function () {\n          return make(-insetXOffset, -insetYOffset, [\n            'bottom',\n            'alignRight',\n            'inset'\n          ]);\n        },\n        insetSouth: function () {\n          return make(-insetXOffset / 2, -insetYOffset, [\n            'bottom',\n            'alignCentre',\n            'inset'\n          ]);\n        },\n        insetEast: function () {\n          return make(-insetXOffset, -insetYOffset / 2, [\n            'valignCentre',\n            'right',\n            'inset'\n          ]);\n        },\n        insetWest: function () {\n          return make(insetXOffset, -insetYOffset / 2, [\n            'valignCentre',\n            'left',\n            'inset'\n          ]);\n        }\n      };\n    };\n    var fallback = function () {\n      return nu$5(0, 0, {});\n    };\n\n    var nu$4 = identity$1;\n\n    var onDirection = function (isLtr, isRtl) {\n      return function (element) {\n        return getDirection(element) === 'rtl' ? isRtl : isLtr;\n      };\n    };\n    var getDirection = function (element) {\n      return get$c(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var AttributeValue;\n    (function (AttributeValue) {\n      AttributeValue['TopToBottom'] = 'toptobottom';\n      AttributeValue['BottomToTop'] = 'bottomtotop';\n    }(AttributeValue || (AttributeValue = {})));\n    var Attribute = 'data-alloy-vertical-dir';\n    var isBottomToTopDir = function (el) {\n      return closest$2(el, function (current) {\n        return isElement$2(current) && get$d(current, 'data-alloy-vertical-dir') === AttributeValue.BottomToTop;\n      });\n    };\n\n    var schema$y = function () {\n      return optionObjOf('layouts', [\n        required$1('onLtr'),\n        required$1('onRtl'),\n        option('onBottomLtr'),\n        option('onBottomRtl')\n      ]);\n    };\n    var get$4 = function (elem, info, defaultLtr, defaultRtl, defaultBottomLtr, defaultBottomRtl, dirElement) {\n      var isBottomToTop = dirElement.map(isBottomToTopDir).getOr(false);\n      var customLtr = info.layouts.map(function (ls) {\n        return ls.onLtr(elem);\n      });\n      var customRtl = info.layouts.map(function (ls) {\n        return ls.onRtl(elem);\n      });\n      var ltr = isBottomToTop ? info.layouts.bind(function (ls) {\n        return ls.onBottomLtr.map(function (f) {\n          return f(elem);\n        });\n      }).or(customLtr).getOr(defaultBottomLtr) : customLtr.getOr(defaultLtr);\n      var rtl = isBottomToTop ? info.layouts.bind(function (ls) {\n        return ls.onBottomRtl.map(function (f) {\n          return f(elem);\n        });\n      }).or(customRtl).getOr(defaultBottomRtl) : customRtl.getOr(defaultRtl);\n      var f = onDirection(ltr, rtl);\n      return f(elem);\n    };\n\n    var placement$4 = function (component, anchorInfo, origin) {\n      var hotspot = anchorInfo.hotspot;\n      var anchorBox = toBox(origin, hotspot.element);\n      var layouts = get$4(component.element, anchorInfo, belowOrAbove(), belowOrAboveRtl(), aboveOrBelow(), aboveOrBelowRtl(), Optional.some(anchorInfo.hotspot.element));\n      return Optional.some(nu$4({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble.getOr(fallback()),\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var HotspotAnchor = [\n      required$1('hotspot'),\n      option('bubble'),\n      defaulted('overrides', {}),\n      schema$y(),\n      output$1('placement', placement$4)\n    ];\n\n    var placement$3 = function (component, anchorInfo, origin) {\n      var pos = translate$2(origin, anchorInfo.x, anchorInfo.y);\n      var anchorBox = bounds(pos.left, pos.top, anchorInfo.width, anchorInfo.height);\n      var layouts = get$4(component.element, anchorInfo, all$1(), allRtl$1(), all$1(), allRtl$1(), Optional.none());\n      return Optional.some(nu$4({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble,\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var MakeshiftAnchor = [\n      required$1('x'),\n      required$1('y'),\n      defaulted('height', 0),\n      defaulted('width', 0),\n      defaulted('bubble', fallback()),\n      defaulted('overrides', {}),\n      schema$y(),\n      output$1('placement', placement$3)\n    ];\n\n    var adt$7 = Adt.generate([\n      { screen: ['point'] },\n      {\n        absolute: [\n          'point',\n          'scrollLeft',\n          'scrollTop'\n        ]\n      }\n    ]);\n    var toFixed = function (pos) {\n      return pos.fold(identity$1, function (point, scrollLeft, scrollTop) {\n        return point.translate(-scrollLeft, -scrollTop);\n      });\n    };\n    var toAbsolute = function (pos) {\n      return pos.fold(identity$1, identity$1);\n    };\n    var sum = function (points) {\n      return foldl(points, function (b, a) {\n        return b.translate(a.left, a.top);\n      }, SugarPosition(0, 0));\n    };\n    var sumAsFixed = function (positions) {\n      var points = map$2(positions, toFixed);\n      return sum(points);\n    };\n    var sumAsAbsolute = function (positions) {\n      var points = map$2(positions, toAbsolute);\n      return sum(points);\n    };\n    var screen = adt$7.screen;\n    var absolute$1 = adt$7.absolute;\n\n    var getOffset = function (component, origin, anchorInfo) {\n      var win = defaultView(anchorInfo.root).dom;\n      var hasSameOwner = function (frame) {\n        var frameOwner = owner$4(frame);\n        var compOwner = owner$4(component.element);\n        return eq(frameOwner, compOwner);\n      };\n      return Optional.from(win.frameElement).map(SugarElement.fromDom).filter(hasSameOwner).map(absolute$3);\n    };\n    var getRootPoint = function (component, origin, anchorInfo) {\n      var doc = owner$4(component.element);\n      var outerScroll = get$9(doc);\n      var offset = getOffset(component, origin, anchorInfo).getOr(outerScroll);\n      return absolute$1(offset, outerScroll.left, outerScroll.top);\n    };\n\n    var getBox = function (left, top, width, height) {\n      var point = screen(SugarPosition(left, top));\n      return Optional.some(pointed(point, width, height));\n    };\n    var calcNewAnchor = function (optBox, rootPoint, anchorInfo, origin, elem) {\n      return optBox.map(function (box) {\n        var points = [\n          rootPoint,\n          box.point\n        ];\n        var topLeft = cata$1(origin, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsFixed(points);\n        });\n        var anchorBox = rect(topLeft.left, topLeft.top, box.width, box.height);\n        var layoutsLtr = anchorInfo.showAbove ? aboveOrBelow() : belowOrAbove();\n        var layoutsRtl = anchorInfo.showAbove ? aboveOrBelowRtl() : belowOrAboveRtl();\n        var layouts = get$4(elem, anchorInfo, layoutsLtr, layoutsRtl, layoutsLtr, layoutsRtl, Optional.none());\n        return nu$4({\n          anchorBox: anchorBox,\n          bubble: anchorInfo.bubble.getOr(fallback()),\n          overrides: anchorInfo.overrides,\n          layouts: layouts,\n          placer: Optional.none()\n        });\n      });\n    };\n\n    var placement$2 = function (component, anchorInfo, origin) {\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      return anchorInfo.node.filter(inBody).bind(function (target) {\n        var rect = target.dom.getBoundingClientRect();\n        var nodeBox = getBox(rect.left, rect.top, rect.width, rect.height);\n        var elem = anchorInfo.node.getOr(component.element);\n        return calcNewAnchor(nodeBox, rootPoint, anchorInfo, origin, elem);\n      });\n    };\n    var NodeAnchor = [\n      required$1('node'),\n      required$1('root'),\n      option('bubble'),\n      schema$y(),\n      defaulted('overrides', {}),\n      defaulted('showAbove', false),\n      output$1('placement', placement$2)\n    ];\n\n    var zeroWidth = '\\uFEFF';\n    var nbsp = '\\xA0';\n\n    var create$7 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$7 };\n\n    var adt$6 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart$1 = function (situ) {\n      return situ.fold(identity$1, identity$1, identity$1);\n    };\n    var before = adt$6.before;\n    var on$1 = adt$6.on;\n    var after$1 = adt$6.after;\n    var Situ = {\n      before: before,\n      on: on$1,\n      after: after$1,\n      cata: cata,\n      getStart: getStart$1\n    };\n\n    var adt$5 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$5.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$5.domRange;\n    var relative = adt$5.relative;\n    var exact = adt$5.exact;\n    var getWin = function (selection) {\n      var start = getStart(selection);\n      return defaultView(start);\n    };\n    var range$1 = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range$1\n    };\n\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom);\n      }, function (e, o) {\n        rng.setStart(e.dom, o);\n      }, function (e) {\n        rng.setStartAfter(e.dom);\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom);\n      }, function (e, o) {\n        rng.setEnd(e.dom, o);\n      }, function (e) {\n        rng.setEndAfter(e.dom);\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom,\n        width: rect.width,\n        height: rect.height\n      };\n    };\n    var getFirstRect$1 = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n    var getBounds$2 = function (rng) {\n      var rect = rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n\n    var adt$4 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(SugarElement.fromDom(range.startContainer), range.startOffset, SugarElement.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant$1(rng),\n            rtl: Optional.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Optional.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Optional.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$4.rtl(SugarElement.fromDom(rev.endContainer), rev.endOffset, SugarElement.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$4.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$4.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom, soffset);\n          rng.setEnd(finish.dom, foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom, foffset);\n          rng.setEnd(start.dom, soffset);\n          return rng;\n        }\n      });\n    };\n    adt$4.ltr;\n    adt$4.rtl;\n\n    var NodeValue = function (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    };\n\n    var api = NodeValue(isText$1, 'text');\n    var get$3 = function (element) {\n      return api.get(element);\n    };\n    var getOption = function (element) {\n      return api.getOption(element);\n    };\n\n    var getEnd = function (element) {\n      return name$2(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(nbsp) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains$2(elementsWithCursorPosition, name$2(elem));\n    };\n\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children$1 = children(element);\n        for (var i = children$1.length - 1; i >= 0; i--) {\n          var child = children$1[i];\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope);\n    };\n\n    var descendants = function (scope, selector) {\n      return all$3(selector, scope);\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner$4(start);\n      var rng = doc.dom.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var after = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var getNativeSelection = function (win) {\n      return Optional.from(win.getSelection());\n    };\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Optional.some(SimRange.create(SugarElement.fromDom(firstRng.startContainer), firstRng.startOffset, SugarElement.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      if (selection.anchorNode === null || selection.focusNode === null) {\n        return readRange(selection);\n      } else {\n        var anchor = SugarElement.fromDom(selection.anchorNode);\n        var focus_1 = SugarElement.fromDom(selection.focusNode);\n        return after(anchor, selection.anchorOffset, focus_1, selection.focusOffset) ? Optional.some(SimRange.create(anchor, selection.anchorOffset, focus_1, selection.focusOffset)) : readRange(selection);\n      }\n    };\n    var getExact = function (win) {\n      return getNativeSelection(win).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var getFirstRect = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect$1(rng);\n    };\n    var getBounds$1 = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getBounds$2(rng);\n    };\n\n    var point$1 = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n    var descendOnce$1 = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0) {\n        return point$1(element, offset);\n      } else if (offset < children$1.length) {\n        return point$1(children$1[offset], 0);\n      } else {\n        var last = children$1[children$1.length - 1];\n        var len = isText$1(last) ? get$3(last).length : children(last).length;\n        return point$1(last, len);\n      }\n    };\n\n    var descendOnce = function (element, offset) {\n      return isText$1(element) ? point$1(element, offset) : descendOnce$1(element, offset);\n    };\n    var getAnchorSelection = function (win, anchorInfo) {\n      var getSelection = anchorInfo.getSelection.getOrThunk(function () {\n        return function () {\n          return getExact(win);\n        };\n      });\n      return getSelection().map(function (sel) {\n        var modStart = descendOnce(sel.start, sel.soffset);\n        var modFinish = descendOnce(sel.finish, sel.foffset);\n        return SimSelection.range(modStart.element, modStart.offset, modFinish.element, modFinish.offset);\n      });\n    };\n    var placement$1 = function (component, anchorInfo, origin) {\n      var win = defaultView(anchorInfo.root).dom;\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      var selectionBox = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        var optRect = getBounds$1(win, SimSelection.exactFromRange(sel)).orThunk(function () {\n          var x = SugarElement.fromText(zeroWidth);\n          before$2(sel.start, x);\n          var rect = getFirstRect(win, SimSelection.exact(x, 0, x, 1));\n          remove$5(x);\n          return rect;\n        });\n        return optRect.bind(function (rawRect) {\n          return getBox(rawRect.left, rawRect.top, rawRect.width, rawRect.height);\n        });\n      });\n      var targetElement = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        return isElement$2(sel.start) ? Optional.some(sel.start) : parentNode(sel.start);\n      });\n      var elem = targetElement.getOr(component.element);\n      return calcNewAnchor(selectionBox, rootPoint, anchorInfo, origin, elem);\n    };\n    var SelectionAnchor = [\n      option('getSelection'),\n      required$1('root'),\n      option('bubble'),\n      schema$y(),\n      defaulted('overrides', {}),\n      defaulted('showAbove', false),\n      output$1('placement', placement$1)\n    ];\n\n    var labelPrefix$1 = 'link-layout';\n    var eastX = function (anchor) {\n      return anchor.x + anchor.width;\n    };\n    var westX = function (anchor, element) {\n      return anchor.x - element.width;\n    };\n    var northY$1 = function (anchor, element) {\n      return anchor.y - element.height + anchor.height;\n    };\n    var southY$1 = function (anchor) {\n      return anchor.y;\n    };\n    var southeast$1 = function (anchor, element, bubbles) {\n      return nu$6(eastX(anchor), southY$1(anchor), bubbles.southeast(), southeast$3(), 'southeast', boundsRestriction(anchor, {\n        left: 0,\n        top: 2\n      }), labelPrefix$1);\n    };\n    var southwest$1 = function (anchor, element, bubbles) {\n      return nu$6(westX(anchor, element), southY$1(anchor), bubbles.southwest(), southwest$3(), 'southwest', boundsRestriction(anchor, {\n        right: 1,\n        top: 2\n      }), labelPrefix$1);\n    };\n    var northeast$1 = function (anchor, element, bubbles) {\n      return nu$6(eastX(anchor), northY$1(anchor, element), bubbles.northeast(), northeast$3(), 'northeast', boundsRestriction(anchor, {\n        left: 0,\n        bottom: 3\n      }), labelPrefix$1);\n    };\n    var northwest$1 = function (anchor, element, bubbles) {\n      return nu$6(westX(anchor, element), northY$1(anchor, element), bubbles.northwest(), northwest$3(), 'northwest', boundsRestriction(anchor, {\n        right: 1,\n        bottom: 3\n      }), labelPrefix$1);\n    };\n    var all = function () {\n      return [\n        southeast$1,\n        southwest$1,\n        northeast$1,\n        northwest$1\n      ];\n    };\n    var allRtl = function () {\n      return [\n        southwest$1,\n        southeast$1,\n        northwest$1,\n        northeast$1\n      ];\n    };\n\n    var placement = function (component, submenuInfo, origin) {\n      var anchorBox = toBox(origin, submenuInfo.item.element);\n      var layouts = get$4(component.element, submenuInfo, all(), allRtl(), all(), allRtl(), Optional.none());\n      return Optional.some(nu$4({\n        anchorBox: anchorBox,\n        bubble: fallback(),\n        overrides: submenuInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var SubmenuAnchor = [\n      required$1('item'),\n      schema$y(),\n      defaulted('overrides', {}),\n      output$1('placement', placement)\n    ];\n\n    var AnchorSchema = choose$1('type', {\n      selection: SelectionAnchor,\n      node: NodeAnchor,\n      hotspot: HotspotAnchor,\n      submenu: SubmenuAnchor,\n      makeshift: MakeshiftAnchor\n    });\n\n    var TransitionSchema = [\n      requiredArrayOf('classes', string),\n      defaultedStringEnum('mode', 'all', [\n        'all',\n        'layout',\n        'placement'\n      ])\n    ];\n    var PositionSchema = [\n      defaulted('useFixed', never),\n      option('getBounds')\n    ];\n    var PlacementSchema = [\n      requiredOf('anchor', AnchorSchema),\n      optionObjOf('transition', TransitionSchema)\n    ];\n\n    var getFixedOrigin = function () {\n      var html = document.documentElement;\n      return fixed$1(0, 0, html.clientWidth, html.clientHeight);\n    };\n    var getRelativeOrigin = function (component) {\n      var position = absolute$3(component.element);\n      var bounds = component.element.dom.getBoundingClientRect();\n      return relative$1(position.left, position.top, bounds.width, bounds.height);\n    };\n    var place = function (component, origin, anchoring, getBounds, placee, lastPlace, transition) {\n      var anchor = box(anchoring.anchorBox, origin);\n      return simple(anchor, placee.element, anchoring.bubble, anchoring.layouts, lastPlace, getBounds, anchoring.overrides, transition);\n    };\n    var position$1 = function (component, posConfig, posState, placee, placementSpec) {\n      positionWithin(component, posConfig, posState, placee, placementSpec, Optional.none());\n    };\n    var positionWithin = function (component, posConfig, posState, placee, placementSpec, boxElement) {\n      var boundsBox = boxElement.map(box$1);\n      return positionWithinBounds(component, posConfig, posState, placee, placementSpec, boundsBox);\n    };\n    var positionWithinBounds = function (component, posConfig, posState, placee, placementSpec, bounds) {\n      var placeeDetail = asRawOrDie$1('placement.info', objOf(PlacementSchema), placementSpec);\n      var anchorage = placeeDetail.anchor;\n      var element = placee.element;\n      var placeeState = posState.get(placee.uid);\n      preserve$1(function () {\n        set$7(element, 'position', 'fixed');\n        var oldVisibility = getRaw(element, 'visibility');\n        set$7(element, 'visibility', 'hidden');\n        var origin = posConfig.useFixed() ? getFixedOrigin() : getRelativeOrigin(component);\n        var placer = anchorage.placement;\n        var getBounds = bounds.map(constant$1).or(posConfig.getBounds);\n        placer(component, anchorage, origin).each(function (anchoring) {\n          var doPlace = anchoring.placer.getOr(place);\n          var newState = doPlace(component, origin, anchoring, getBounds, placee, placeeState, placeeDetail.transition);\n          posState.set(placee.uid, newState);\n        });\n        oldVisibility.fold(function () {\n          remove$6(element, 'visibility');\n        }, function (vis) {\n          set$7(element, 'visibility', vis);\n        });\n        if (getRaw(element, 'left').isNone() && getRaw(element, 'top').isNone() && getRaw(element, 'right').isNone() && getRaw(element, 'bottom').isNone() && is$1(getRaw(element, 'position'), 'fixed')) {\n          remove$6(element, 'position');\n        }\n      }, element);\n    };\n    var getMode = function (component, pConfig, _pState) {\n      return pConfig.useFixed() ? 'fixed' : 'absolute';\n    };\n    var reset$1 = function (component, pConfig, posState, placee) {\n      var element = placee.element;\n      each$1([\n        'position',\n        'left',\n        'right',\n        'top',\n        'bottom'\n      ], function (prop) {\n        return remove$6(element, prop);\n      });\n      reset$2(element);\n      posState.clear(placee.uid);\n    };\n\n    var PositionApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        position: position$1,\n        positionWithin: positionWithin,\n        positionWithinBounds: positionWithinBounds,\n        getMode: getMode,\n        reset: reset$1\n    });\n\n    var init$g = function () {\n      var state = {};\n      var set = function (id, data) {\n        state[id] = data;\n      };\n      var get = function (id) {\n        return get$e(state, id);\n      };\n      var clear = function (id) {\n        if (isNonNullable(id)) {\n          delete state[id];\n        } else {\n          state = {};\n        }\n      };\n      return nu$8({\n        readState: function () {\n          return state;\n        },\n        clear: clear,\n        set: set,\n        get: get\n      });\n    };\n\n    var PositioningState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$g\n    });\n\n    var Positioning = create$8({\n      fields: PositionSchema,\n      name: 'positioning',\n      active: ActivePosition,\n      apis: PositionApis,\n      state: PositioningState\n    });\n\n    var fireDetaching = function (component) {\n      emit(component, detachedFromDom());\n      var children = component.components();\n      each$1(children, fireDetaching);\n    };\n    var fireAttaching = function (component) {\n      var children = component.components();\n      each$1(children, fireAttaching);\n      emit(component, attachedToDom());\n    };\n    var attach$1 = function (parent, child) {\n      append$2(parent.element, child.element);\n    };\n    var detachChildren$1 = function (component) {\n      each$1(component.components(), function (childComp) {\n        return remove$5(childComp.element);\n      });\n      empty(component.element);\n      component.syncComponents();\n    };\n    var replaceChildren = function (component, newChildren) {\n      var subs = component.components();\n      detachChildren$1(component);\n      var deleted = difference(subs, newChildren);\n      each$1(deleted, function (comp) {\n        fireDetaching(comp);\n        component.getSystem().removeFromWorld(comp);\n      });\n      each$1(newChildren, function (childComp) {\n        if (!childComp.getSystem().isConnected()) {\n          component.getSystem().addToWorld(childComp);\n          attach$1(component, childComp);\n          if (inBody(component.element)) {\n            fireAttaching(childComp);\n          }\n        } else {\n          attach$1(component, childComp);\n        }\n        component.syncComponents();\n      });\n    };\n\n    var attach = function (parent, child) {\n      attachWith(parent, child, append$2);\n    };\n    var attachWith = function (parent, child, insertion) {\n      parent.getSystem().addToWorld(child);\n      insertion(parent.element, child.element);\n      if (inBody(parent.element)) {\n        fireAttaching(child);\n      }\n      parent.syncComponents();\n    };\n    var doDetach = function (component) {\n      fireDetaching(component);\n      remove$5(component.element);\n      component.getSystem().removeFromWorld(component);\n    };\n    var detach = function (component) {\n      var parent$1 = parent(component.element).bind(function (p) {\n        return component.getSystem().getByDom(p).toOptional();\n      });\n      doDetach(component);\n      parent$1.each(function (p) {\n        p.syncComponents();\n      });\n    };\n    var detachChildren = function (component) {\n      var subs = component.components();\n      each$1(subs, doDetach);\n      empty(component.element);\n      component.syncComponents();\n    };\n    var attachSystem = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, append$2);\n    };\n    var attachSystemAfter = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, after$2);\n    };\n    var attachSystemWith = function (element, guiSystem, inserter) {\n      inserter(element, guiSystem.element);\n      var children$1 = children(guiSystem.element);\n      each$1(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireAttaching);\n      });\n    };\n    var detachSystem = function (guiSystem) {\n      var children$1 = children(guiSystem.element);\n      each$1(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireDetaching);\n      });\n      remove$5(guiSystem.element);\n    };\n\n    var rebuild = function (sandbox, sConfig, sState, data) {\n      sState.get().each(function (_data) {\n        detachChildren(sandbox);\n      });\n      var point = sConfig.getAttachPoint(sandbox);\n      attach(point, sandbox);\n      var built = sandbox.getSystem().build(data);\n      attach(sandbox, built);\n      sState.set(built);\n      return built;\n    };\n    var open$1 = function (sandbox, sConfig, sState, data) {\n      var newState = rebuild(sandbox, sConfig, sState, data);\n      sConfig.onOpen(sandbox, newState);\n      return newState;\n    };\n    var setContent = function (sandbox, sConfig, sState, data) {\n      return sState.get().map(function () {\n        return rebuild(sandbox, sConfig, sState, data);\n      });\n    };\n    var openWhileCloaked = function (sandbox, sConfig, sState, data, transaction) {\n      cloak(sandbox, sConfig);\n      open$1(sandbox, sConfig, sState, data);\n      transaction();\n      decloak(sandbox, sConfig);\n    };\n    var close$1 = function (sandbox, sConfig, sState) {\n      sState.get().each(function (data) {\n        detachChildren(sandbox);\n        detach(sandbox);\n        sConfig.onClose(sandbox, data);\n        sState.clear();\n      });\n    };\n    var isOpen$1 = function (_sandbox, _sConfig, sState) {\n      return sState.isOpen();\n    };\n    var isPartOf = function (sandbox, sConfig, sState, queryElem) {\n      return isOpen$1(sandbox, sConfig, sState) && sState.get().exists(function (data) {\n        return sConfig.isPartOf(sandbox, data, queryElem);\n      });\n    };\n    var getState$2 = function (_sandbox, _sConfig, sState) {\n      return sState.get();\n    };\n    var store = function (sandbox, cssKey, attr, newValue) {\n      getRaw(sandbox.element, cssKey).fold(function () {\n        remove$7(sandbox.element, attr);\n      }, function (v) {\n        set$8(sandbox.element, attr, v);\n      });\n      set$7(sandbox.element, cssKey, newValue);\n    };\n    var restore = function (sandbox, cssKey, attr) {\n      getOpt(sandbox.element, attr).fold(function () {\n        return remove$6(sandbox.element, cssKey);\n      }, function (oldValue) {\n        return set$7(sandbox.element, cssKey, oldValue);\n      });\n    };\n    var cloak = function (sandbox, sConfig, _sState) {\n      var sink = sConfig.getAttachPoint(sandbox);\n      set$7(sandbox.element, 'position', Positioning.getMode(sink));\n      store(sandbox, 'visibility', sConfig.cloakVisibilityAttr, 'hidden');\n    };\n    var hasPosition = function (element) {\n      return exists([\n        'top',\n        'left',\n        'right',\n        'bottom'\n      ], function (pos) {\n        return getRaw(element, pos).isSome();\n      });\n    };\n    var decloak = function (sandbox, sConfig, _sState) {\n      if (!hasPosition(sandbox.element)) {\n        remove$6(sandbox.element, 'position');\n      }\n      restore(sandbox, 'visibility', sConfig.cloakVisibilityAttr);\n    };\n\n    var SandboxApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        cloak: cloak,\n        decloak: decloak,\n        open: open$1,\n        openWhileCloaked: openWhileCloaked,\n        close: close$1,\n        isOpen: isOpen$1,\n        isPartOf: isPartOf,\n        getState: getState$2,\n        setContent: setContent\n    });\n\n    var events$g = function (sandboxConfig, sandboxState) {\n      return derive$2([run$1(sandboxClose(), function (sandbox, _simulatedEvent) {\n          close$1(sandbox, sandboxConfig, sandboxState);\n        })]);\n    };\n\n    var ActiveSandbox = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$g\n    });\n\n    var SandboxSchema = [\n      onHandler('onOpen'),\n      onHandler('onClose'),\n      required$1('isPartOf'),\n      required$1('getAttachPoint'),\n      defaulted('cloakVisibilityAttr', 'data-precloak-visibility')\n    ];\n\n    var init$f = function () {\n      var contents = value$1();\n      var readState = constant$1('not-implemented');\n      return nu$8({\n        readState: readState,\n        isOpen: contents.isSet,\n        clear: contents.clear,\n        set: contents.set,\n        get: contents.get\n      });\n    };\n\n    var SandboxState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$f\n    });\n\n    var Sandboxing = create$8({\n      fields: SandboxSchema,\n      name: 'sandboxing',\n      active: ActiveSandbox,\n      apis: SandboxApis,\n      state: SandboxState\n    });\n\n    var dismissPopups = constant$1('dismiss.popups');\n    var repositionPopups = constant$1('reposition.popups');\n    var mouseReleased = constant$1('mouse.released');\n\n    var schema$x = objOfOnly([\n      defaulted('isExtraPart', never),\n      optionObjOf('fireEventInstead', [defaulted('event', dismissRequested())])\n    ]);\n    var receivingChannel$1 = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie$1('Dismissal', schema$x, rawSpec);\n      return _a = {}, _a[dismissPopups()] = {\n        schema: objOfOnly([required$1('target')]),\n        onReceive: function (sandbox, data) {\n          if (Sandboxing.isOpen(sandbox)) {\n            var isPart = Sandboxing.isPartOf(sandbox, data.target) || detail.isExtraPart(sandbox, data.target);\n            if (!isPart) {\n              detail.fireEventInstead.fold(function () {\n                return Sandboxing.close(sandbox);\n              }, function (fe) {\n                return emit(sandbox, fe.event);\n              });\n            }\n          }\n        }\n      }, _a;\n    };\n\n    var schema$w = objOfOnly([\n      optionObjOf('fireEventInstead', [defaulted('event', repositionRequested())]),\n      requiredFunction('doReposition')\n    ]);\n    var receivingChannel = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie$1('Reposition', schema$w, rawSpec);\n      return _a = {}, _a[repositionPopups()] = {\n        onReceive: function (sandbox) {\n          if (Sandboxing.isOpen(sandbox)) {\n            detail.fireEventInstead.fold(function () {\n              return detail.doReposition(sandbox);\n            }, function (fe) {\n              return emit(sandbox, fe.event);\n            });\n          }\n        }\n      }, _a;\n    };\n\n    var onLoad$5 = function (component, repConfig, repState) {\n      repConfig.store.manager.onLoad(component, repConfig, repState);\n    };\n    var onUnload$2 = function (component, repConfig, repState) {\n      repConfig.store.manager.onUnload(component, repConfig, repState);\n    };\n    var setValue$3 = function (component, repConfig, repState, data) {\n      repConfig.store.manager.setValue(component, repConfig, repState, data);\n    };\n    var getValue$3 = function (component, repConfig, repState) {\n      return repConfig.store.manager.getValue(component, repConfig, repState);\n    };\n    var getState$1 = function (component, repConfig, repState) {\n      return repState;\n    };\n\n    var RepresentApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad$5,\n        onUnload: onUnload$2,\n        setValue: setValue$3,\n        getValue: getValue$3,\n        getState: getState$1\n    });\n\n    var events$f = function (repConfig, repState) {\n      var es = repConfig.resetOnDom ? [\n        runOnAttached(function (comp, _se) {\n          onLoad$5(comp, repConfig, repState);\n        }),\n        runOnDetached(function (comp, _se) {\n          onUnload$2(comp, repConfig, repState);\n        })\n      ] : [loadEvent(repConfig, repState, onLoad$5)];\n      return derive$2(es);\n    };\n\n    var ActiveRepresenting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$f\n    });\n\n    var memory$1 = function () {\n      var data = Cell(null);\n      var readState = function () {\n        return {\n          mode: 'memory',\n          value: data.get()\n        };\n      };\n      var isNotSet = function () {\n        return data.get() === null;\n      };\n      var clear = function () {\n        data.set(null);\n      };\n      return nu$8({\n        set: data.set,\n        get: data.get,\n        isNotSet: isNotSet,\n        clear: clear,\n        readState: readState\n      });\n    };\n    var manual = function () {\n      var readState = noop;\n      return nu$8({ readState: readState });\n    };\n    var dataset = function () {\n      var dataByValue = Cell({});\n      var dataByText = Cell({});\n      var readState = function () {\n        return {\n          mode: 'dataset',\n          dataByValue: dataByValue.get(),\n          dataByText: dataByText.get()\n        };\n      };\n      var clear = function () {\n        dataByValue.set({});\n        dataByText.set({});\n      };\n      var lookup = function (itemString) {\n        return get$e(dataByValue.get(), itemString).orThunk(function () {\n          return get$e(dataByText.get(), itemString);\n        });\n      };\n      var update = function (items) {\n        var currentDataByValue = dataByValue.get();\n        var currentDataByText = dataByText.get();\n        var newDataByValue = {};\n        var newDataByText = {};\n        each$1(items, function (item) {\n          newDataByValue[item.value] = item;\n          get$e(item, 'meta').each(function (meta) {\n            get$e(meta, 'text').each(function (text) {\n              newDataByText[text] = item;\n            });\n          });\n        });\n        dataByValue.set(__assign(__assign({}, currentDataByValue), newDataByValue));\n        dataByText.set(__assign(__assign({}, currentDataByText), newDataByText));\n      };\n      return nu$8({\n        readState: readState,\n        lookup: lookup,\n        update: update,\n        clear: clear\n      });\n    };\n    var init$e = function (spec) {\n      return spec.store.manager.state(spec);\n    };\n\n    var RepresentState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        memory: memory$1,\n        dataset: dataset,\n        manual: manual,\n        init: init$e\n    });\n\n    var setValue$2 = function (component, repConfig, repState, data) {\n      var store = repConfig.store;\n      repState.update([data]);\n      store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue$2 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      var key = store.getDataKey(component);\n      return repState.lookup(key).getOrThunk(function () {\n        return store.getFallbackEntry(key);\n      });\n    };\n    var onLoad$4 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      store.initialValue.each(function (data) {\n        setValue$2(component, repConfig, repState, data);\n      });\n    };\n    var onUnload$1 = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var DatasetStore = [\n      option('initialValue'),\n      required$1('getFallbackEntry'),\n      required$1('getDataKey'),\n      required$1('setValue'),\n      output$1('manager', {\n        setValue: setValue$2,\n        getValue: getValue$2,\n        onLoad: onLoad$4,\n        onUnload: onUnload$1,\n        state: dataset\n      })\n    ];\n\n    var getValue$1 = function (component, repConfig, _repState) {\n      return repConfig.store.getValue(component);\n    };\n    var setValue$1 = function (component, repConfig, _repState, data) {\n      repConfig.store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var onLoad$3 = function (component, repConfig, _repState) {\n      repConfig.store.initialValue.each(function (data) {\n        repConfig.store.setValue(component, data);\n      });\n    };\n    var ManualStore = [\n      required$1('getValue'),\n      defaulted('setValue', noop),\n      option('initialValue'),\n      output$1('manager', {\n        setValue: setValue$1,\n        getValue: getValue$1,\n        onLoad: onLoad$3,\n        onUnload: noop,\n        state: NoState.init\n      })\n    ];\n\n    var setValue = function (component, repConfig, repState, data) {\n      repState.set(data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue = function (component, repConfig, repState) {\n      return repState.get();\n    };\n    var onLoad$2 = function (component, repConfig, repState) {\n      repConfig.store.initialValue.each(function (initVal) {\n        if (repState.isNotSet()) {\n          repState.set(initVal);\n        }\n      });\n    };\n    var onUnload = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var MemoryStore = [\n      option('initialValue'),\n      output$1('manager', {\n        setValue: setValue,\n        getValue: getValue,\n        onLoad: onLoad$2,\n        onUnload: onUnload,\n        state: memory$1\n      })\n    ];\n\n    var RepresentSchema = [\n      defaultedOf('store', { mode: 'memory' }, choose$1('mode', {\n        memory: MemoryStore,\n        manual: ManualStore,\n        dataset: DatasetStore\n      })),\n      onHandler('onSetValue'),\n      defaulted('resetOnDom', false)\n    ];\n\n    var Representing = create$8({\n      fields: RepresentSchema,\n      name: 'representing',\n      active: ActiveRepresenting,\n      apis: RepresentApis,\n      extra: {\n        setValueFrom: function (component, source) {\n          var value = Representing.getValue(source);\n          Representing.setValue(component, value);\n        }\n      },\n      state: RepresentState\n    });\n\n    var field = function (name, forbidden) {\n      return defaultedObjOf(name, {}, map$2(forbidden, function (f) {\n        return forbid(f.name(), 'Cannot configure ' + f.name() + ' for ' + name);\n      }).concat([customField('dump', identity$1)]));\n    };\n    var get$2 = function (data) {\n      return data.dump;\n    };\n    var augment = function (data, original) {\n      return __assign(__assign({}, derive$1(original)), data.dump);\n    };\n    var SketchBehaviours = {\n      field: field,\n      augment: augment,\n      get: get$2\n    };\n\n    var _placeholder = 'placeholder';\n    var adt$3 = Adt.generate([\n      {\n        single: [\n          'required',\n          'valueThunk'\n        ]\n      },\n      {\n        multiple: [\n          'required',\n          'valueThunks'\n        ]\n      }\n    ]);\n    var isSubstituted = function (spec) {\n      return has$2(spec, 'uiType');\n    };\n    var subPlaceholder = function (owner, detail, compSpec, placeholders) {\n      if (owner.exists(function (o) {\n          return o !== compSpec.owner;\n        })) {\n        return adt$3.single(true, constant$1(compSpec));\n      }\n      return get$e(placeholders, compSpec.name).fold(function () {\n        throw new Error('Unknown placeholder component: ' + compSpec.name + '\\nKnown: [' + keys(placeholders) + ']\\nNamespace: ' + owner.getOr('none') + '\\nSpec: ' + JSON.stringify(compSpec, null, 2));\n      }, function (newSpec) {\n        return newSpec.replace();\n      });\n    };\n    var scan = function (owner, detail, compSpec, placeholders) {\n      if (isSubstituted(compSpec) && compSpec.uiType === _placeholder) {\n        return subPlaceholder(owner, detail, compSpec, placeholders);\n      } else {\n        return adt$3.single(false, constant$1(compSpec));\n      }\n    };\n    var substitute = function (owner, detail, compSpec, placeholders) {\n      var base = scan(owner, detail, compSpec, placeholders);\n      return base.fold(function (req, valueThunk) {\n        var value = isSubstituted(compSpec) ? valueThunk(detail, compSpec.config, compSpec.validated) : valueThunk(detail);\n        var childSpecs = get$e(value, 'components').getOr([]);\n        var substituted = bind$3(childSpecs, function (c) {\n          return substitute(owner, detail, c, placeholders);\n        });\n        return [__assign(__assign({}, value), { components: substituted })];\n      }, function (req, valuesThunk) {\n        if (isSubstituted(compSpec)) {\n          var values = valuesThunk(detail, compSpec.config, compSpec.validated);\n          var preprocessor = compSpec.validated.preprocess.getOr(identity$1);\n          return preprocessor(values);\n        } else {\n          return valuesThunk(detail);\n        }\n      });\n    };\n    var substituteAll = function (owner, detail, components, placeholders) {\n      return bind$3(components, function (c) {\n        return substitute(owner, detail, c, placeholders);\n      });\n    };\n    var oneReplace = function (label, replacements) {\n      var called = false;\n      var used = function () {\n        return called;\n      };\n      var replace = function () {\n        if (called) {\n          throw new Error('Trying to use the same placeholder more than once: ' + label);\n        }\n        called = true;\n        return replacements;\n      };\n      var required = function () {\n        return replacements.fold(function (req, _) {\n          return req;\n        }, function (req, _) {\n          return req;\n        });\n      };\n      return {\n        name: constant$1(label),\n        required: required,\n        used: used,\n        replace: replace\n      };\n    };\n    var substitutePlaces = function (owner, detail, components, placeholders) {\n      var ps = map$1(placeholders, function (ph, name) {\n        return oneReplace(name, ph);\n      });\n      var outcome = substituteAll(owner, detail, components, ps);\n      each(ps, function (p) {\n        if (p.used() === false && p.required()) {\n          throw new Error('Placeholder: ' + p.name() + ' was not found in components list\\nNamespace: ' + owner.getOr('none') + '\\nComponents: ' + JSON.stringify(detail.components, null, 2));\n        }\n      });\n      return outcome;\n    };\n    var single$2 = adt$3.single;\n    var multiple = adt$3.multiple;\n    var placeholder = constant$1(_placeholder);\n\n    var adt$2 = Adt.generate([\n      { required: ['data'] },\n      { external: ['data'] },\n      { optional: ['data'] },\n      { group: ['data'] }\n    ]);\n    var fFactory = defaulted('factory', { sketch: identity$1 });\n    var fSchema = defaulted('schema', []);\n    var fName = required$1('name');\n    var fPname = field$1('pname', 'pname', defaultedThunk(function (typeSpec) {\n      return '<alloy.' + generate$6(typeSpec.name) + '>';\n    }), anyValue());\n    var fGroupSchema = customField('schema', function () {\n      return [option('preprocess')];\n    });\n    var fDefaults = defaulted('defaults', constant$1({}));\n    var fOverrides = defaulted('overrides', constant$1({}));\n    var requiredSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var externalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fDefaults,\n      fOverrides\n    ]);\n    var optionalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var groupSpec = objOf([\n      fFactory,\n      fGroupSchema,\n      fName,\n      required$1('unit'),\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var asNamedPart = function (part) {\n      return part.fold(Optional.some, Optional.none, Optional.some, Optional.some);\n    };\n    var name$1 = function (part) {\n      var get = function (data) {\n        return data.name;\n      };\n      return part.fold(get, get, get, get);\n    };\n    var asCommon = function (part) {\n      return part.fold(identity$1, identity$1, identity$1, identity$1);\n    };\n    var convert = function (adtConstructor, partSchema) {\n      return function (spec) {\n        var data = asRawOrDie$1('Converting part type', partSchema, spec);\n        return adtConstructor(data);\n      };\n    };\n    var required = convert(adt$2.required, requiredSpec);\n    var external$1 = convert(adt$2.external, externalSpec);\n    var optional = convert(adt$2.optional, optionalSpec);\n    var group = convert(adt$2.group, groupSpec);\n    var original = constant$1('entirety');\n\n    var PartType = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        required: required,\n        external: external$1,\n        optional: optional,\n        group: group,\n        asNamedPart: asNamedPart,\n        name: name$1,\n        asCommon: asCommon,\n        original: original\n    });\n\n    var combine = function (detail, data, partSpec, partValidated) {\n      return deepMerge(data.defaults(detail, partSpec, partValidated), partSpec, { uid: detail.partUids[data.name] }, data.overrides(detail, partSpec, partValidated));\n    };\n    var subs = function (owner, detail, parts) {\n      var internals = {};\n      var externals = {};\n      each$1(parts, function (part) {\n        part.fold(function (data) {\n          internals[data.pname] = single$2(true, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          var partSpec = detail.parts[data.name];\n          externals[data.name] = constant$1(data.factory.sketch(combine(detail, data, partSpec[original()]), partSpec));\n        }, function (data) {\n          internals[data.pname] = single$2(false, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          internals[data.pname] = multiple(true, function (detail, _partSpec, _partValidated) {\n            var units = detail[data.name];\n            return map$2(units, function (u) {\n              return data.factory.sketch(deepMerge(data.defaults(detail, u, _partValidated), u, data.overrides(detail, u)));\n            });\n          });\n        });\n      });\n      return {\n        internals: constant$1(internals),\n        externals: constant$1(externals)\n      };\n    };\n\n    var generate$3 = function (owner, parts) {\n      var r = {};\n      each$1(parts, function (part) {\n        asNamedPart(part).each(function (np) {\n          var g = doGenerateOne(owner, np.pname);\n          r[np.name] = function (config) {\n            var validated = asRawOrDie$1('Part: ' + np.name + ' in ' + owner, objOf(np.schema), config);\n            return __assign(__assign({}, g), {\n              config: config,\n              validated: validated\n            });\n          };\n        });\n      });\n      return r;\n    };\n    var doGenerateOne = function (owner, pname) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname\n      };\n    };\n    var generateOne$1 = function (owner, pname, config) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname,\n        config: config,\n        validated: {}\n      };\n    };\n    var schemas = function (parts) {\n      return bind$3(parts, function (part) {\n        return part.fold(Optional.none, Optional.some, Optional.none, Optional.none).map(function (data) {\n          return requiredObjOf(data.name, data.schema.concat([snapshot(original())]));\n        }).toArray();\n      });\n    };\n    var names = function (parts) {\n      return map$2(parts, name$1);\n    };\n    var substitutes = function (owner, detail, parts) {\n      return subs(owner, detail, parts);\n    };\n    var components$1 = function (owner, detail, internals) {\n      return substitutePlaces(Optional.some(owner), detail, detail.components, internals);\n    };\n    var getPart = function (component, detail, partKey) {\n      var uid = detail.partUids[partKey];\n      return component.getSystem().getByUid(uid).toOptional();\n    };\n    var getPartOrDie = function (component, detail, partKey) {\n      return getPart(component, detail, partKey).getOrDie('Could not find part: ' + partKey);\n    };\n    var getParts = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each$1(partKeys, function (pk) {\n        r[pk] = constant$1(system.getByUid(uids[pk]));\n      });\n      return r;\n    };\n    var getAllParts = function (component, detail) {\n      var system = component.getSystem();\n      return map$1(detail.partUids, function (pUid, _k) {\n        return constant$1(system.getByUid(pUid));\n      });\n    };\n    var getAllPartNames = function (detail) {\n      return keys(detail.partUids);\n    };\n    var getPartsOrDie = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each$1(partKeys, function (pk) {\n        r[pk] = constant$1(system.getByUid(uids[pk]).getOrDie());\n      });\n      return r;\n    };\n    var defaultUids = function (baseUid, partTypes) {\n      var partNames = names(partTypes);\n      return wrapAll(map$2(partNames, function (pn) {\n        return {\n          key: pn,\n          value: baseUid + '-' + pn\n        };\n      }));\n    };\n    var defaultUidsSchema = function (partTypes) {\n      return field$1('partUids', 'partUids', mergeWithThunk(function (spec) {\n        return defaultUids(spec.uid, partTypes);\n      }), anyValue());\n    };\n\n    var AlloyParts = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        generate: generate$3,\n        generateOne: generateOne$1,\n        schemas: schemas,\n        names: names,\n        substitutes: substitutes,\n        components: components$1,\n        defaultUids: defaultUids,\n        defaultUidsSchema: defaultUidsSchema,\n        getAllParts: getAllParts,\n        getAllPartNames: getAllPartNames,\n        getPart: getPart,\n        getPartOrDie: getPartOrDie,\n        getParts: getParts,\n        getPartsOrDie: getPartsOrDie\n    });\n\n    var base = function (partSchemas, partUidsSchemas) {\n      var ps = partSchemas.length > 0 ? [requiredObjOf('parts', partSchemas)] : [];\n      return ps.concat([\n        required$1('uid'),\n        defaulted('dom', {}),\n        defaulted('components', []),\n        snapshot('originalSpec'),\n        defaulted('debug.sketcher', {})\n      ]).concat(partUidsSchemas);\n    };\n    var asRawOrDie = function (label, schema, spec, partSchemas, partUidsSchemas) {\n      var baseS = base(partSchemas, partUidsSchemas);\n      return asRawOrDie$1(label + ' [SpecSchema]', objOfOnly(baseS.concat(schema)), spec);\n    };\n\n    var single$1 = function (owner, schema, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var detail = asRawOrDie(owner, schema, specWithUid, [], []);\n      return factory(detail, specWithUid);\n    };\n    var composite$1 = function (owner, schema, partTypes, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var partSchemas = schemas(partTypes);\n      var partUidsSchema = defaultUidsSchema(partTypes);\n      var detail = asRawOrDie(owner, schema, specWithUid, partSchemas, [partUidsSchema]);\n      var subs = substitutes(owner, detail, partTypes);\n      var components = components$1(owner, detail, subs.internals());\n      return factory(detail, components, specWithUid, subs.externals());\n    };\n    var hasUid = function (spec) {\n      return has$2(spec, 'uid');\n    };\n    var supplyUid = function (spec) {\n      return hasUid(spec) ? spec : __assign(__assign({}, spec), { uid: generate$5('uid') });\n    };\n\n    var isSketchSpec = function (spec) {\n      return spec.uid !== undefined;\n    };\n    var singleSchema = objOfOnly([\n      required$1('name'),\n      required$1('factory'),\n      required$1('configFields'),\n      defaulted('apis', {}),\n      defaulted('extraApis', {})\n    ]);\n    var compositeSchema = objOfOnly([\n      required$1('name'),\n      required$1('factory'),\n      required$1('configFields'),\n      required$1('partFields'),\n      defaulted('apis', {}),\n      defaulted('extraApis', {})\n    ]);\n    var single = function (rawConfig) {\n      var config = asRawOrDie$1('Sketcher for ' + rawConfig.name, singleSchema, rawConfig);\n      var sketch = function (spec) {\n        return single$1(config.name, config.configFields, config.factory, spec);\n      };\n      var apis = map$1(config.apis, makeApi);\n      var extraApis = map$1(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: config.name,\n        configFields: config.configFields,\n        sketch: sketch\n      }, apis), extraApis);\n    };\n    var composite = function (rawConfig) {\n      var config = asRawOrDie$1('Sketcher for ' + rawConfig.name, compositeSchema, rawConfig);\n      var sketch = function (spec) {\n        return composite$1(config.name, config.configFields, config.partFields, config.factory, spec);\n      };\n      var parts = generate$3(config.name, config.partFields);\n      var apis = map$1(config.apis, makeApi);\n      var extraApis = map$1(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: config.name,\n        partFields: config.partFields,\n        configFields: config.configFields,\n        sketch: sketch,\n        parts: parts\n      }, apis), extraApis);\n    };\n\n    var inside = function (target) {\n      return name$2(target) === 'input' && get$d(target, 'type') !== 'radio' || name$2(target) === 'textarea';\n    };\n\n    var getCurrent = function (component, composeConfig, _composeState) {\n      return composeConfig.find(component);\n    };\n\n    var ComposeApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCurrent: getCurrent\n    });\n\n    var ComposeSchema = [required$1('find')];\n\n    var Composing = create$8({\n      fields: ComposeSchema,\n      name: 'composing',\n      apis: ComposeApis\n    });\n\n    var nativeDisabled = [\n      'input',\n      'button',\n      'textarea',\n      'select'\n    ];\n    var onLoad$1 = function (component, disableConfig, disableState) {\n      var f = disableConfig.disabled() ? disable$1 : enable$1;\n      f(component, disableConfig);\n    };\n    var hasNative = function (component, config) {\n      return config.useNative === true && contains$2(nativeDisabled, name$2(component.element));\n    };\n    var nativeIsDisabled = function (component) {\n      return has$1(component.element, 'disabled');\n    };\n    var nativeDisable = function (component) {\n      set$8(component.element, 'disabled', 'disabled');\n    };\n    var nativeEnable = function (component) {\n      remove$7(component.element, 'disabled');\n    };\n    var ariaIsDisabled = function (component) {\n      return get$d(component.element, 'aria-disabled') === 'true';\n    };\n    var ariaDisable = function (component) {\n      set$8(component.element, 'aria-disabled', 'true');\n    };\n    var ariaEnable = function (component) {\n      set$8(component.element, 'aria-disabled', 'false');\n    };\n    var disable$1 = function (component, disableConfig, _disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        add$2(component.element, disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeDisable : ariaDisable;\n      f(component);\n      disableConfig.onDisabled(component);\n    };\n    var enable$1 = function (component, disableConfig, _disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        remove$2(component.element, disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeEnable : ariaEnable;\n      f(component);\n      disableConfig.onEnabled(component);\n    };\n    var isDisabled = function (component, disableConfig) {\n      return hasNative(component, disableConfig) ? nativeIsDisabled(component) : ariaIsDisabled(component);\n    };\n    var set$3 = function (component, disableConfig, disableState, disabled) {\n      var f = disabled ? disable$1 : enable$1;\n      f(component, disableConfig);\n    };\n\n    var DisableApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        enable: enable$1,\n        disable: disable$1,\n        isDisabled: isDisabled,\n        onLoad: onLoad$1,\n        set: set$3\n    });\n\n    var exhibit$5 = function (base, disableConfig) {\n      return nu$7({ classes: disableConfig.disabled() ? disableConfig.disableClass.toArray() : [] });\n    };\n    var events$e = function (disableConfig, disableState) {\n      return derive$2([\n        abort(execute$5(), function (component, _simulatedEvent) {\n          return isDisabled(component, disableConfig);\n        }),\n        loadEvent(disableConfig, disableState, onLoad$1)\n      ]);\n    };\n\n    var ActiveDisable = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$5,\n        events: events$e\n    });\n\n    var DisableSchema = [\n      defaultedFunction('disabled', never),\n      defaulted('useNative', true),\n      option('disableClass'),\n      onHandler('onDisabled'),\n      onHandler('onEnabled')\n    ];\n\n    var Disabling = create$8({\n      fields: DisableSchema,\n      name: 'disabling',\n      active: ActiveDisable,\n      apis: DisableApis\n    });\n\n    var dehighlightAllExcept = function (component, hConfig, hState, skip) {\n      var highlighted = descendants(component.element, '.' + hConfig.highlightClass);\n      each$1(highlighted, function (h) {\n        if (!exists(skip, function (skipComp) {\n            return skipComp.element === h;\n          })) {\n          remove$2(h, hConfig.highlightClass);\n          component.getSystem().getByDom(h).each(function (target) {\n            hConfig.onDehighlight(component, target);\n            emit(target, dehighlight$1());\n          });\n        }\n      });\n    };\n    var dehighlightAll = function (component, hConfig, hState) {\n      return dehighlightAllExcept(component, hConfig, hState, []);\n    };\n    var dehighlight = function (component, hConfig, hState, target) {\n      if (isHighlighted(component, hConfig, hState, target)) {\n        remove$2(target.element, hConfig.highlightClass);\n        hConfig.onDehighlight(component, target);\n        emit(target, dehighlight$1());\n      }\n    };\n    var highlight = function (component, hConfig, hState, target) {\n      dehighlightAllExcept(component, hConfig, hState, [target]);\n      if (!isHighlighted(component, hConfig, hState, target)) {\n        add$2(target.element, hConfig.highlightClass);\n        hConfig.onHighlight(component, target);\n        emit(target, highlight$1());\n      }\n    };\n    var highlightFirst = function (component, hConfig, hState) {\n      getFirst(component, hConfig).each(function (firstComp) {\n        highlight(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightLast = function (component, hConfig, hState) {\n      getLast(component, hConfig).each(function (lastComp) {\n        highlight(component, hConfig, hState, lastComp);\n      });\n    };\n    var highlightAt = function (component, hConfig, hState, index) {\n      getByIndex(component, hConfig, hState, index).fold(function (err) {\n        throw err;\n      }, function (firstComp) {\n        highlight(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightBy = function (component, hConfig, hState, predicate) {\n      var candidates = getCandidates(component, hConfig);\n      var targetComp = find$5(candidates, predicate);\n      targetComp.each(function (c) {\n        highlight(component, hConfig, hState, c);\n      });\n    };\n    var isHighlighted = function (component, hConfig, hState, queryTarget) {\n      return has(queryTarget.element, hConfig.highlightClass);\n    };\n    var getHighlighted = function (component, hConfig, _hState) {\n      return descendant(component.element, '.' + hConfig.highlightClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOptional();\n      });\n    };\n    var getByIndex = function (component, hConfig, hState, index) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      return Optional.from(items[index]).fold(function () {\n        return Result.error(new Error('No element found with index ' + index));\n      }, component.getSystem().getByDom);\n    };\n    var getFirst = function (component, hConfig, _hState) {\n      return descendant(component.element, '.' + hConfig.itemClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOptional();\n      });\n    };\n    var getLast = function (component, hConfig, _hState) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      var last = items.length > 0 ? Optional.some(items[items.length - 1]) : Optional.none();\n      return last.bind(function (c) {\n        return component.getSystem().getByDom(c).toOptional();\n      });\n    };\n    var getDelta$2 = function (component, hConfig, hState, delta) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      var current = findIndex$1(items, function (item) {\n        return has(item, hConfig.highlightClass);\n      });\n      return current.bind(function (selected) {\n        var dest = cycleBy(selected, delta, 0, items.length - 1);\n        return component.getSystem().getByDom(items[dest]).toOptional();\n      });\n    };\n    var getPrevious = function (component, hConfig, hState) {\n      return getDelta$2(component, hConfig, hState, -1);\n    };\n    var getNext = function (component, hConfig, hState) {\n      return getDelta$2(component, hConfig, hState, +1);\n    };\n    var getCandidates = function (component, hConfig, _hState) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      return cat(map$2(items, function (i) {\n        return component.getSystem().getByDom(i).toOptional();\n      }));\n    };\n\n    var HighlightApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        dehighlightAll: dehighlightAll,\n        dehighlight: dehighlight,\n        highlight: highlight,\n        highlightFirst: highlightFirst,\n        highlightLast: highlightLast,\n        highlightAt: highlightAt,\n        highlightBy: highlightBy,\n        isHighlighted: isHighlighted,\n        getHighlighted: getHighlighted,\n        getFirst: getFirst,\n        getLast: getLast,\n        getPrevious: getPrevious,\n        getNext: getNext,\n        getCandidates: getCandidates\n    });\n\n    var HighlightSchema = [\n      required$1('highlightClass'),\n      required$1('itemClass'),\n      onHandler('onHighlight'),\n      onHandler('onDehighlight')\n    ];\n\n    var Highlighting = create$8({\n      fields: HighlightSchema,\n      name: 'highlighting',\n      apis: HighlightApis\n    });\n\n    var BACKSPACE = [8];\n    var TAB = [9];\n    var ENTER = [13];\n    var ESCAPE = [27];\n    var SPACE = [32];\n    var LEFT = [37];\n    var UP = [38];\n    var RIGHT = [39];\n    var DOWN = [40];\n\n    var cyclePrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      var after = reverse(values.slice(index + 1));\n      return find$5(before.concat(after), predicate);\n    };\n    var tryPrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      return find$5(before, predicate);\n    };\n    var cycleNext = function (values, index, predicate) {\n      var before = values.slice(0, index);\n      var after = values.slice(index + 1);\n      return find$5(after.concat(before), predicate);\n    };\n    var tryNext = function (values, index, predicate) {\n      var after = values.slice(index + 1);\n      return find$5(after, predicate);\n    };\n\n    var inSet = function (keys) {\n      return function (event) {\n        var raw = event.raw;\n        return contains$2(keys, raw.which);\n      };\n    };\n    var and = function (preds) {\n      return function (event) {\n        return forall(preds, function (pred) {\n          return pred(event);\n        });\n      };\n    };\n    var isShift = function (event) {\n      var raw = event.raw;\n      return raw.shiftKey === true;\n    };\n    var isControl = function (event) {\n      var raw = event.raw;\n      return raw.ctrlKey === true;\n    };\n    var isNotShift = not(isShift);\n\n    var rule = function (matches, action) {\n      return {\n        matches: matches,\n        classification: action\n      };\n    };\n    var choose = function (transitions, event) {\n      var transition = find$5(transitions, function (t) {\n        return t.matches(event);\n      });\n      return transition.map(function (t) {\n        return t.classification;\n      });\n    };\n\n    var reportFocusShifting = function (component, prevFocus, newFocus) {\n      var noChange = prevFocus.exists(function (p) {\n        return newFocus.exists(function (n) {\n          return eq(n, p);\n        });\n      });\n      if (!noChange) {\n        emitWith(component, focusShifted(), {\n          prevFocus: prevFocus,\n          newFocus: newFocus\n        });\n      }\n    };\n    var dom$2 = function () {\n      var get = function (component) {\n        return search(component.element);\n      };\n      var set = function (component, focusee) {\n        var prevFocus = get(component);\n        component.getSystem().triggerFocus(focusee, component.element);\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n    var highlights = function () {\n      var get = function (component) {\n        return Highlighting.getHighlighted(component).map(function (item) {\n          return item.element;\n        });\n      };\n      var set = function (component, element) {\n        var prevFocus = get(component);\n        component.getSystem().getByDom(element).fold(noop, function (item) {\n          Highlighting.highlight(component, item);\n        });\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var FocusInsideModes;\n    (function (FocusInsideModes) {\n      FocusInsideModes['OnFocusMode'] = 'onFocus';\n      FocusInsideModes['OnEnterOrSpaceMode'] = 'onEnterOrSpace';\n      FocusInsideModes['OnApiMode'] = 'onApi';\n    }(FocusInsideModes || (FocusInsideModes = {})));\n\n    var typical = function (infoSchema, stateInit, getKeydownRules, getKeyupRules, optFocusIn) {\n      var schema = function () {\n        return infoSchema.concat([\n          defaulted('focusManager', dom$2()),\n          defaultedOf('focusInside', 'onFocus', valueOf(function (val) {\n            return contains$2([\n              'onFocus',\n              'onEnterOrSpace',\n              'onApi'\n            ], val) ? Result.value(val) : Result.error('Invalid value for focusInside');\n          })),\n          output$1('handler', me),\n          output$1('state', stateInit),\n          output$1('sendFocusIn', optFocusIn)\n        ]);\n      };\n      var processKey = function (component, simulatedEvent, getRules, keyingConfig, keyingState) {\n        var rules = getRules(component, simulatedEvent, keyingConfig, keyingState);\n        return choose(rules, simulatedEvent.event).bind(function (rule) {\n          return rule(component, simulatedEvent, keyingConfig, keyingState);\n        });\n      };\n      var toEvents = function (keyingConfig, keyingState) {\n        var onFocusHandler = keyingConfig.focusInside !== FocusInsideModes.OnFocusMode ? Optional.none() : optFocusIn(keyingConfig).map(function (focusIn) {\n          return run$1(focus$4(), function (component, simulatedEvent) {\n            focusIn(component, keyingConfig, keyingState);\n            simulatedEvent.stop();\n          });\n        });\n        var tryGoInsideComponent = function (component, simulatedEvent) {\n          var isEnterOrSpace = inSet(SPACE.concat(ENTER))(simulatedEvent.event);\n          if (keyingConfig.focusInside === FocusInsideModes.OnEnterOrSpaceMode && isEnterOrSpace && isSource(component, simulatedEvent)) {\n            optFocusIn(keyingConfig).each(function (focusIn) {\n              focusIn(component, keyingConfig, keyingState);\n              simulatedEvent.stop();\n            });\n          }\n        };\n        var keyboardEvents = [\n          run$1(keydown(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeydownRules, keyingConfig, keyingState).fold(function () {\n              tryGoInsideComponent(component, simulatedEvent);\n            }, function (_) {\n              simulatedEvent.stop();\n            });\n          }),\n          run$1(keyup(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeyupRules, keyingConfig, keyingState).each(function (_) {\n              simulatedEvent.stop();\n            });\n          })\n        ];\n        return derive$2(onFocusHandler.toArray().concat(keyboardEvents));\n      };\n      var me = {\n        schema: schema,\n        processKey: processKey,\n        toEvents: toEvents\n      };\n      return me;\n    };\n\n    var create$6 = function (cyclicField) {\n      var schema = [\n        option('onEscape'),\n        option('onEnter'),\n        defaulted('selector', '[data-alloy-tabstop=\"true\"]:not(:disabled)'),\n        defaulted('firstTabstop', 0),\n        defaulted('useTabstopAt', always),\n        option('visibilitySelector')\n      ].concat([cyclicField]);\n      var isVisible = function (tabbingConfig, element) {\n        var target = tabbingConfig.visibilitySelector.bind(function (sel) {\n          return closest$1(element, sel);\n        }).getOr(element);\n        return get$b(target) > 0;\n      };\n      var findInitial = function (component, tabbingConfig) {\n        var tabstops = descendants(component.element, tabbingConfig.selector);\n        var visibles = filter$2(tabstops, function (elem) {\n          return isVisible(tabbingConfig, elem);\n        });\n        return Optional.from(visibles[tabbingConfig.firstTabstop]);\n      };\n      var findCurrent = function (component, tabbingConfig) {\n        return tabbingConfig.focusManager.get(component).bind(function (elem) {\n          return closest$1(elem, tabbingConfig.selector);\n        });\n      };\n      var isTabstop = function (tabbingConfig, element) {\n        return isVisible(tabbingConfig, element) && tabbingConfig.useTabstopAt(element);\n      };\n      var focusIn = function (component, tabbingConfig, _tabbingState) {\n        findInitial(component, tabbingConfig).each(function (target) {\n          tabbingConfig.focusManager.set(component, target);\n        });\n      };\n      var goFromTabstop = function (component, tabstops, stopIndex, tabbingConfig, cycle) {\n        return cycle(tabstops, stopIndex, function (elem) {\n          return isTabstop(tabbingConfig, elem);\n        }).fold(function () {\n          return tabbingConfig.cyclic ? Optional.some(true) : Optional.none();\n        }, function (target) {\n          tabbingConfig.focusManager.set(component, target);\n          return Optional.some(true);\n        });\n      };\n      var go = function (component, _simulatedEvent, tabbingConfig, cycle) {\n        var tabstops = descendants(component.element, tabbingConfig.selector);\n        return findCurrent(component, tabbingConfig).bind(function (tabstop) {\n          var optStopIndex = findIndex$1(tabstops, curry(eq, tabstop));\n          return optStopIndex.bind(function (stopIndex) {\n            return goFromTabstop(component, tabstops, stopIndex, tabbingConfig, cycle);\n          });\n        });\n      };\n      var goBackwards = function (component, simulatedEvent, tabbingConfig) {\n        var navigate = tabbingConfig.cyclic ? cyclePrev : tryPrev;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var goForwards = function (component, simulatedEvent, tabbingConfig) {\n        var navigate = tabbingConfig.cyclic ? cycleNext : tryNext;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var execute = function (component, simulatedEvent, tabbingConfig) {\n        return tabbingConfig.onEnter.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var exit = function (component, simulatedEvent, tabbingConfig) {\n        return tabbingConfig.onEscape.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var getKeydownRules = constant$1([\n        rule(and([\n          isShift,\n          inSet(TAB)\n        ]), goBackwards),\n        rule(inSet(TAB), goForwards),\n        rule(inSet(ESCAPE), exit),\n        rule(and([\n          isNotShift,\n          inSet(ENTER)\n        ]), execute)\n      ]);\n      var getKeyupRules = constant$1([]);\n      return typical(schema, NoState.init, getKeydownRules, getKeyupRules, function () {\n        return Optional.some(focusIn);\n      });\n    };\n\n    var AcyclicType = create$6(customField('cyclic', never));\n\n    var CyclicType = create$6(customField('cyclic', always));\n\n    var doDefaultExecute = function (component, _simulatedEvent, focused) {\n      dispatch(component, focused, execute$5());\n      return Optional.some(true);\n    };\n    var defaultExecute = function (component, simulatedEvent, focused) {\n      var isComplex = inside(focused) && inSet(SPACE)(simulatedEvent.event);\n      return isComplex ? Optional.none() : doDefaultExecute(component, simulatedEvent, focused);\n    };\n    var stopEventForFirefox = function (_component, _simulatedEvent) {\n      return Optional.some(true);\n    };\n\n    var schema$v = [\n      defaulted('execute', defaultExecute),\n      defaulted('useSpace', false),\n      defaulted('useEnter', true),\n      defaulted('useControlEnter', false),\n      defaulted('useDown', false)\n    ];\n    var execute$4 = function (component, simulatedEvent, executeConfig) {\n      return executeConfig.execute(component, simulatedEvent, component.element);\n    };\n    var getKeydownRules$5 = function (component, _simulatedEvent, executeConfig, _executeState) {\n      var spaceExec = executeConfig.useSpace && !inside(component.element) ? SPACE : [];\n      var enterExec = executeConfig.useEnter ? ENTER : [];\n      var downExec = executeConfig.useDown ? DOWN : [];\n      var execKeys = spaceExec.concat(enterExec).concat(downExec);\n      return [rule(inSet(execKeys), execute$4)].concat(executeConfig.useControlEnter ? [rule(and([\n          isControl,\n          inSet(ENTER)\n        ]), execute$4)] : []);\n    };\n    var getKeyupRules$5 = function (component, _simulatedEvent, executeConfig, _executeState) {\n      return executeConfig.useSpace && !inside(component.element) ? [rule(inSet(SPACE), stopEventForFirefox)] : [];\n    };\n    var ExecutionType = typical(schema$v, NoState.init, getKeydownRules$5, getKeyupRules$5, function () {\n      return Optional.none();\n    });\n\n    var flatgrid$1 = function () {\n      var dimensions = value$1();\n      var setGridSize = function (numRows, numColumns) {\n        dimensions.set({\n          numRows: numRows,\n          numColumns: numColumns\n        });\n      };\n      var getNumRows = function () {\n        return dimensions.get().map(function (d) {\n          return d.numRows;\n        });\n      };\n      var getNumColumns = function () {\n        return dimensions.get().map(function (d) {\n          return d.numColumns;\n        });\n      };\n      return nu$8({\n        readState: function () {\n          return dimensions.get().map(function (d) {\n            return {\n              numRows: String(d.numRows),\n              numColumns: String(d.numColumns)\n            };\n          }).getOr({\n            numRows: '?',\n            numColumns: '?'\n          });\n        },\n        setGridSize: setGridSize,\n        getNumRows: getNumRows,\n        getNumColumns: getNumColumns\n      });\n    };\n    var init$d = function (spec) {\n      return spec.state(spec);\n    };\n\n    var KeyingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        flatgrid: flatgrid$1,\n        init: init$d\n    });\n\n    var useH = function (movement) {\n      return function (component, simulatedEvent, config, state) {\n        var move = movement(component.element);\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var west$1 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveLeft, moveRight);\n      return useH(movement);\n    };\n    var east$1 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveRight, moveLeft);\n      return useH(movement);\n    };\n    var useV = function (move) {\n      return function (component, simulatedEvent, config, state) {\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var use = function (move, component, simulatedEvent, config, state) {\n      var outcome = config.focusManager.get(component).bind(function (focused) {\n        return move(component.element, focused, config, state);\n      });\n      return outcome.map(function (newFocus) {\n        config.focusManager.set(component, newFocus);\n        return true;\n      });\n    };\n    var north$1 = useV;\n    var south$1 = useV;\n    var move$1 = useV;\n\n    var isHidden$1 = function (dom) {\n      return dom.offsetWidth <= 0 && dom.offsetHeight <= 0;\n    };\n    var isVisible = function (element) {\n      return !isHidden$1(element.dom);\n    };\n\n    var locate = function (candidates, predicate) {\n      return findIndex$1(candidates, predicate).map(function (index) {\n        return {\n          index: index,\n          candidates: candidates\n        };\n      });\n    };\n\n    var locateVisible = function (container, current, selector) {\n      var predicate = function (x) {\n        return eq(x, current);\n      };\n      var candidates = descendants(container, selector);\n      var visible = filter$2(candidates, isVisible);\n      return locate(visible, predicate);\n    };\n    var findIndex = function (elements, target) {\n      return findIndex$1(elements, function (elem) {\n        return eq(target, elem);\n      });\n    };\n\n    var withGrid = function (values, index, numCols, f) {\n      var oldRow = Math.floor(index / numCols);\n      var oldColumn = index % numCols;\n      return f(oldRow, oldColumn).bind(function (address) {\n        var newIndex = address.row * numCols + address.column;\n        return newIndex >= 0 && newIndex < values.length ? Optional.some(values[newIndex]) : Optional.none();\n      });\n    };\n    var cycleHorizontal$1 = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var onLastRow = oldRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - oldRow * numCols : numCols;\n        var newColumn = cycleBy(oldColumn, delta, 0, colsInRow - 1);\n        return Optional.some({\n          row: oldRow,\n          column: newColumn\n        });\n      });\n    };\n    var cycleVertical$1 = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var newRow = cycleBy(oldRow, delta, 0, numRows - 1);\n        var onLastRow = newRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - newRow * numCols : numCols;\n        var newCol = clamp$1(oldColumn, 0, colsInRow - 1);\n        return Optional.some({\n          row: newRow,\n          column: newCol\n        });\n      });\n    };\n    var cycleRight$1 = function (values, index, numRows, numCols) {\n      return cycleHorizontal$1(values, index, numRows, numCols, +1);\n    };\n    var cycleLeft$1 = function (values, index, numRows, numCols) {\n      return cycleHorizontal$1(values, index, numRows, numCols, -1);\n    };\n    var cycleUp$1 = function (values, index, numRows, numCols) {\n      return cycleVertical$1(values, index, numRows, numCols, -1);\n    };\n    var cycleDown$1 = function (values, index, numRows, numCols) {\n      return cycleVertical$1(values, index, numRows, numCols, +1);\n    };\n\n    var schema$u = [\n      required$1('selector'),\n      defaulted('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted('captureTab', false),\n      initSize()\n    ];\n    var focusIn$3 = function (component, gridConfig, _gridState) {\n      descendant(component.element, gridConfig.selector).each(function (first) {\n        gridConfig.focusManager.set(component, first);\n      });\n    };\n    var findCurrent$1 = function (component, gridConfig) {\n      return gridConfig.focusManager.get(component).bind(function (elem) {\n        return closest$1(elem, gridConfig.selector);\n      });\n    };\n    var execute$3 = function (component, simulatedEvent, gridConfig, _gridState) {\n      return findCurrent$1(component, gridConfig).bind(function (focused) {\n        return gridConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var doMove$2 = function (cycle) {\n      return function (element, focused, gridConfig, gridState) {\n        return locateVisible(element, focused, gridConfig.selector).bind(function (identified) {\n          return cycle(identified.candidates, identified.index, gridState.getNumRows().getOr(gridConfig.initSize.numRows), gridState.getNumColumns().getOr(gridConfig.initSize.numColumns));\n        });\n      };\n    };\n    var handleTab = function (_component, _simulatedEvent, gridConfig) {\n      return gridConfig.captureTab ? Optional.some(true) : Optional.none();\n    };\n    var doEscape$1 = function (component, simulatedEvent, gridConfig) {\n      return gridConfig.onEscape(component, simulatedEvent);\n    };\n    var moveLeft$3 = doMove$2(cycleLeft$1);\n    var moveRight$3 = doMove$2(cycleRight$1);\n    var moveNorth$1 = doMove$2(cycleUp$1);\n    var moveSouth$1 = doMove$2(cycleDown$1);\n    var getKeydownRules$4 = constant$1([\n      rule(inSet(LEFT), west$1(moveLeft$3, moveRight$3)),\n      rule(inSet(RIGHT), east$1(moveLeft$3, moveRight$3)),\n      rule(inSet(UP), north$1(moveNorth$1)),\n      rule(inSet(DOWN), south$1(moveSouth$1)),\n      rule(and([\n        isShift,\n        inSet(TAB)\n      ]), handleTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), handleTab),\n      rule(inSet(ESCAPE), doEscape$1),\n      rule(inSet(SPACE.concat(ENTER)), execute$3)\n    ]);\n    var getKeyupRules$4 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var FlatgridType = typical(schema$u, flatgrid$1, getKeydownRules$4, getKeyupRules$4, function () {\n      return Optional.some(focusIn$3);\n    });\n\n    var horizontal = function (container, selector, current, delta) {\n      var isDisabledButton = function (candidate) {\n        return name$2(candidate) === 'button' && get$d(candidate, 'disabled') === 'disabled';\n      };\n      var tryCycle = function (initial, index, candidates) {\n        var newIndex = cycleBy(index, delta, 0, candidates.length - 1);\n        if (newIndex === initial) {\n          return Optional.none();\n        } else {\n          return isDisabledButton(candidates[newIndex]) ? tryCycle(initial, newIndex, candidates) : Optional.from(candidates[newIndex]);\n        }\n      };\n      return locateVisible(container, current, selector).bind(function (identified) {\n        var index = identified.index;\n        var candidates = identified.candidates;\n        return tryCycle(index, index, candidates);\n      });\n    };\n\n    var schema$t = [\n      required$1('selector'),\n      defaulted('getInitial', Optional.none),\n      defaulted('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted('executeOnMove', false),\n      defaulted('allowVertical', true)\n    ];\n    var findCurrent = function (component, flowConfig) {\n      return flowConfig.focusManager.get(component).bind(function (elem) {\n        return closest$1(elem, flowConfig.selector);\n      });\n    };\n    var execute$2 = function (component, simulatedEvent, flowConfig) {\n      return findCurrent(component, flowConfig).bind(function (focused) {\n        return flowConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn$2 = function (component, flowConfig, _state) {\n      flowConfig.getInitial(component).orThunk(function () {\n        return descendant(component.element, flowConfig.selector);\n      }).each(function (first) {\n        flowConfig.focusManager.set(component, first);\n      });\n    };\n    var moveLeft$2 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveRight$2 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var doMove$1 = function (movement) {\n      return function (component, simulatedEvent, flowConfig, flowState) {\n        return movement(component, simulatedEvent, flowConfig, flowState).bind(function () {\n          return flowConfig.executeOnMove ? execute$2(component, simulatedEvent, flowConfig) : Optional.some(true);\n        });\n      };\n    };\n    var doEscape = function (component, simulatedEvent, flowConfig) {\n      return flowConfig.onEscape(component, simulatedEvent);\n    };\n    var getKeydownRules$3 = function (_component, _se, flowConfig, _flowState) {\n      var westMovers = LEFT.concat(flowConfig.allowVertical ? UP : []);\n      var eastMovers = RIGHT.concat(flowConfig.allowVertical ? DOWN : []);\n      return [\n        rule(inSet(westMovers), doMove$1(west$1(moveLeft$2, moveRight$2))),\n        rule(inSet(eastMovers), doMove$1(east$1(moveLeft$2, moveRight$2))),\n        rule(inSet(ENTER), execute$2),\n        rule(inSet(SPACE), execute$2),\n        rule(inSet(ESCAPE), doEscape)\n      ];\n    };\n    var getKeyupRules$3 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var FlowType = typical(schema$t, NoState.init, getKeydownRules$3, getKeyupRules$3, function () {\n      return Optional.some(focusIn$2);\n    });\n\n    var toCell = function (matrix, rowIndex, columnIndex) {\n      return Optional.from(matrix[rowIndex]).bind(function (row) {\n        return Optional.from(row[columnIndex]).map(function (cell) {\n          return {\n            rowIndex: rowIndex,\n            columnIndex: columnIndex,\n            cell: cell\n          };\n        });\n      });\n    };\n    var cycleHorizontal = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = cycleBy(startCol, deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var cycleVertical = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = cycleBy(startRow, deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = clamp$1(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var moveHorizontal = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = clamp$1(startCol + deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var moveVertical = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = clamp$1(startRow + deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = clamp$1(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var cycleRight = function (matrix, startRow, startCol) {\n      return cycleHorizontal(matrix, startRow, startCol, +1);\n    };\n    var cycleLeft = function (matrix, startRow, startCol) {\n      return cycleHorizontal(matrix, startRow, startCol, -1);\n    };\n    var cycleUp = function (matrix, startRow, startCol) {\n      return cycleVertical(matrix, startCol, startRow, -1);\n    };\n    var cycleDown = function (matrix, startRow, startCol) {\n      return cycleVertical(matrix, startCol, startRow, +1);\n    };\n    var moveLeft$1 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, -1);\n    };\n    var moveRight$1 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, +1);\n    };\n    var moveUp$1 = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, -1);\n    };\n    var moveDown$1 = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, +1);\n    };\n\n    var schema$s = [\n      requiredObjOf('selectors', [\n        required$1('row'),\n        required$1('cell')\n      ]),\n      defaulted('cycles', true),\n      defaulted('previousSelector', Optional.none),\n      defaulted('execute', defaultExecute)\n    ];\n    var focusIn$1 = function (component, matrixConfig, _state) {\n      var focused = matrixConfig.previousSelector(component).orThunk(function () {\n        var selectors = matrixConfig.selectors;\n        return descendant(component.element, selectors.cell);\n      });\n      focused.each(function (cell) {\n        matrixConfig.focusManager.set(component, cell);\n      });\n    };\n    var execute$1 = function (component, simulatedEvent, matrixConfig) {\n      return search(component.element).bind(function (focused) {\n        return matrixConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var toMatrix = function (rows, matrixConfig) {\n      return map$2(rows, function (row) {\n        return descendants(row, matrixConfig.selectors.cell);\n      });\n    };\n    var doMove = function (ifCycle, ifMove) {\n      return function (element, focused, matrixConfig) {\n        var move = matrixConfig.cycles ? ifCycle : ifMove;\n        return closest$1(focused, matrixConfig.selectors.row).bind(function (inRow) {\n          var cellsInRow = descendants(inRow, matrixConfig.selectors.cell);\n          return findIndex(cellsInRow, focused).bind(function (colIndex) {\n            var allRows = descendants(element, matrixConfig.selectors.row);\n            return findIndex(allRows, inRow).bind(function (rowIndex) {\n              var matrix = toMatrix(allRows, matrixConfig);\n              return move(matrix, rowIndex, colIndex).map(function (next) {\n                return next.cell;\n              });\n            });\n          });\n        });\n      };\n    };\n    var moveLeft = doMove(cycleLeft, moveLeft$1);\n    var moveRight = doMove(cycleRight, moveRight$1);\n    var moveNorth = doMove(cycleUp, moveUp$1);\n    var moveSouth = doMove(cycleDown, moveDown$1);\n    var getKeydownRules$2 = constant$1([\n      rule(inSet(LEFT), west$1(moveLeft, moveRight)),\n      rule(inSet(RIGHT), east$1(moveLeft, moveRight)),\n      rule(inSet(UP), north$1(moveNorth)),\n      rule(inSet(DOWN), south$1(moveSouth)),\n      rule(inSet(SPACE.concat(ENTER)), execute$1)\n    ]);\n    var getKeyupRules$2 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MatrixType = typical(schema$s, NoState.init, getKeydownRules$2, getKeyupRules$2, function () {\n      return Optional.some(focusIn$1);\n    });\n\n    var schema$r = [\n      required$1('selector'),\n      defaulted('execute', defaultExecute),\n      defaulted('moveOnTab', false)\n    ];\n    var execute = function (component, simulatedEvent, menuConfig) {\n      return menuConfig.focusManager.get(component).bind(function (focused) {\n        return menuConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn = function (component, menuConfig, _state) {\n      descendant(component.element, menuConfig.selector).each(function (first) {\n        menuConfig.focusManager.set(component, first);\n      });\n    };\n    var moveUp = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveDown = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var fireShiftTab = function (component, simulatedEvent, menuConfig, menuState) {\n      return menuConfig.moveOnTab ? move$1(moveUp)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    };\n    var fireTab = function (component, simulatedEvent, menuConfig, menuState) {\n      return menuConfig.moveOnTab ? move$1(moveDown)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    };\n    var getKeydownRules$1 = constant$1([\n      rule(inSet(UP), move$1(moveUp)),\n      rule(inSet(DOWN), move$1(moveDown)),\n      rule(and([\n        isShift,\n        inSet(TAB)\n      ]), fireShiftTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), fireTab),\n      rule(inSet(ENTER), execute),\n      rule(inSet(SPACE), execute)\n    ]);\n    var getKeyupRules$1 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MenuType = typical(schema$r, NoState.init, getKeydownRules$1, getKeyupRules$1, function () {\n      return Optional.some(focusIn);\n    });\n\n    var schema$q = [\n      onKeyboardHandler('onSpace'),\n      onKeyboardHandler('onEnter'),\n      onKeyboardHandler('onShiftEnter'),\n      onKeyboardHandler('onLeft'),\n      onKeyboardHandler('onRight'),\n      onKeyboardHandler('onTab'),\n      onKeyboardHandler('onShiftTab'),\n      onKeyboardHandler('onUp'),\n      onKeyboardHandler('onDown'),\n      onKeyboardHandler('onEscape'),\n      defaulted('stopSpaceKeyup', false),\n      option('focusIn')\n    ];\n    var getKeydownRules = function (component, simulatedEvent, specialInfo) {\n      return [\n        rule(inSet(SPACE), specialInfo.onSpace),\n        rule(and([\n          isNotShift,\n          inSet(ENTER)\n        ]), specialInfo.onEnter),\n        rule(and([\n          isShift,\n          inSet(ENTER)\n        ]), specialInfo.onShiftEnter),\n        rule(and([\n          isShift,\n          inSet(TAB)\n        ]), specialInfo.onShiftTab),\n        rule(and([\n          isNotShift,\n          inSet(TAB)\n        ]), specialInfo.onTab),\n        rule(inSet(UP), specialInfo.onUp),\n        rule(inSet(DOWN), specialInfo.onDown),\n        rule(inSet(LEFT), specialInfo.onLeft),\n        rule(inSet(RIGHT), specialInfo.onRight),\n        rule(inSet(SPACE), specialInfo.onSpace),\n        rule(inSet(ESCAPE), specialInfo.onEscape)\n      ];\n    };\n    var getKeyupRules = function (component, simulatedEvent, specialInfo) {\n      return specialInfo.stopSpaceKeyup ? [rule(inSet(SPACE), stopEventForFirefox)] : [];\n    };\n    var SpecialType = typical(schema$q, NoState.init, getKeydownRules, getKeyupRules, function (specialInfo) {\n      return specialInfo.focusIn;\n    });\n\n    var acyclic = AcyclicType.schema();\n    var cyclic = CyclicType.schema();\n    var flow = FlowType.schema();\n    var flatgrid = FlatgridType.schema();\n    var matrix = MatrixType.schema();\n    var execution = ExecutionType.schema();\n    var menu = MenuType.schema();\n    var special = SpecialType.schema();\n\n    var KeyboardBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        acyclic: acyclic,\n        cyclic: cyclic,\n        flow: flow,\n        flatgrid: flatgrid,\n        matrix: matrix,\n        execution: execution,\n        menu: menu,\n        special: special\n    });\n\n    var isFlatgridState = function (keyState) {\n      return hasNonNullableKey(keyState, 'setGridSize');\n    };\n    var Keying = createModes({\n      branchKey: 'mode',\n      branches: KeyboardBranches,\n      name: 'keying',\n      active: {\n        events: function (keyingConfig, keyingState) {\n          var handler = keyingConfig.handler;\n          return handler.toEvents(keyingConfig, keyingState);\n        }\n      },\n      apis: {\n        focusIn: function (component, keyConfig, keyState) {\n          keyConfig.sendFocusIn(keyConfig).fold(function () {\n            component.getSystem().triggerFocus(component.element, component.element);\n          }, function (sendFocusIn) {\n            sendFocusIn(component, keyConfig, keyState);\n          });\n        },\n        setGridSize: function (component, keyConfig, keyState, numRows, numColumns) {\n          if (!isFlatgridState(keyState)) {\n            console.error('Layout does not support setGridSize');\n          } else {\n            keyState.setGridSize(numRows, numColumns);\n          }\n        }\n      },\n      state: KeyingState\n    });\n\n    var set$2 = function (component, replaceConfig, replaceState, data) {\n      preserve$1(function () {\n        var newChildren = map$2(data, component.getSystem().build);\n        replaceChildren(component, newChildren);\n      }, component.element);\n    };\n    var insert = function (component, replaceConfig, insertion, childSpec) {\n      var child = component.getSystem().build(childSpec);\n      attachWith(component, child, insertion);\n    };\n    var append = function (component, replaceConfig, replaceState, appendee) {\n      insert(component, replaceConfig, append$2, appendee);\n    };\n    var prepend = function (component, replaceConfig, replaceState, prependee) {\n      insert(component, replaceConfig, prepend$1, prependee);\n    };\n    var remove = function (component, replaceConfig, replaceState, removee) {\n      var children = contents(component);\n      var foundChild = find$5(children, function (child) {\n        return eq(removee.element, child.element);\n      });\n      foundChild.each(detach);\n    };\n    var contents = function (component, _replaceConfig) {\n      return component.components();\n    };\n    var replaceAt = function (component, replaceConfig, replaceState, replaceeIndex, replacer) {\n      var children = contents(component);\n      return Optional.from(children[replaceeIndex]).map(function (replacee) {\n        remove(component, replaceConfig, replaceState, replacee);\n        replacer.each(function (r) {\n          insert(component, replaceConfig, function (p, c) {\n            appendAt(p, c, replaceeIndex);\n          }, r);\n        });\n        return replacee;\n      });\n    };\n    var replaceBy = function (component, replaceConfig, replaceState, replaceePred, replacer) {\n      var children = contents(component);\n      return findIndex$1(children, replaceePred).bind(function (replaceeIndex) {\n        return replaceAt(component, replaceConfig, replaceState, replaceeIndex, replacer);\n      });\n    };\n\n    var ReplaceApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        append: append,\n        prepend: prepend,\n        remove: remove,\n        replaceAt: replaceAt,\n        replaceBy: replaceBy,\n        set: set$2,\n        contents: contents\n    });\n\n    var Replacing = create$8({\n      fields: [],\n      name: 'replacing',\n      apis: ReplaceApis\n    });\n\n    var events$d = function (name, eventHandlers) {\n      var events = derive$2(eventHandlers);\n      return create$8({\n        fields: [required$1('enabled')],\n        name: name,\n        active: { events: constant$1(events) }\n      });\n    };\n    var config = function (name, eventHandlers) {\n      var me = events$d(name, eventHandlers);\n      return {\n        key: name,\n        value: {\n          config: {},\n          me: me,\n          configAsRaw: constant$1({}),\n          initialConfig: {},\n          state: NoState\n        }\n      };\n    };\n\n    var focus$2 = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        focus$3(component.element);\n        focusConfig.onFocus(component);\n      }\n    };\n    var blur = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        blur$1(component.element);\n      }\n    };\n    var isFocused = function (component) {\n      return hasFocus(component.element);\n    };\n\n    var FocusApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        focus: focus$2,\n        blur: blur,\n        isFocused: isFocused\n    });\n\n    var exhibit$4 = function (base, focusConfig) {\n      var mod = focusConfig.ignore ? {} : { attributes: { tabindex: '-1' } };\n      return nu$7(mod);\n    };\n    var events$c = function (focusConfig) {\n      return derive$2([run$1(focus$4(), function (component, simulatedEvent) {\n          focus$2(component, focusConfig);\n          simulatedEvent.stop();\n        })].concat(focusConfig.stopMousedown ? [run$1(mousedown(), function (_, simulatedEvent) {\n          simulatedEvent.event.prevent();\n        })] : []));\n    };\n\n    var ActiveFocus = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$4,\n        events: events$c\n    });\n\n    var FocusSchema = [\n      onHandler('onFocus'),\n      defaulted('stopMousedown', false),\n      defaulted('ignore', false)\n    ];\n\n    var Focusing = create$8({\n      fields: FocusSchema,\n      name: 'focusing',\n      active: ActiveFocus,\n      apis: FocusApis\n    });\n\n    var SetupBehaviourCellState = function (initialState) {\n      var init = function () {\n        var cell = Cell(initialState);\n        var get = function () {\n          return cell.get();\n        };\n        var set = function (newState) {\n          return cell.set(newState);\n        };\n        var clear = function () {\n          return cell.set(initialState);\n        };\n        var readState = function () {\n          return cell.get();\n        };\n        return {\n          get: get,\n          set: set,\n          clear: clear,\n          readState: readState\n        };\n      };\n      return { init: init };\n    };\n\n    var updateAriaState = function (component, toggleConfig, toggleState) {\n      var ariaInfo = toggleConfig.aria;\n      ariaInfo.update(component, ariaInfo, toggleState.get());\n    };\n    var updateClass = function (component, toggleConfig, toggleState) {\n      toggleConfig.toggleClass.each(function (toggleClass) {\n        if (toggleState.get()) {\n          add$2(component.element, toggleClass);\n        } else {\n          remove$2(component.element, toggleClass);\n        }\n      });\n    };\n    var toggle$2 = function (component, toggleConfig, toggleState) {\n      set$1(component, toggleConfig, toggleState, !toggleState.get());\n    };\n    var on = function (component, toggleConfig, toggleState) {\n      toggleState.set(true);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var off = function (component, toggleConfig, toggleState) {\n      toggleState.set(false);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var set$1 = function (component, toggleConfig, toggleState, state) {\n      var action = state ? on : off;\n      action(component, toggleConfig, toggleState);\n    };\n    var isOn = function (component, toggleConfig, toggleState) {\n      return toggleState.get();\n    };\n    var onLoad = function (component, toggleConfig, toggleState) {\n      set$1(component, toggleConfig, toggleState, toggleConfig.selected);\n    };\n\n    var ToggleApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad,\n        toggle: toggle$2,\n        isOn: isOn,\n        on: on,\n        off: off,\n        set: set$1\n    });\n\n    var exhibit$3 = function () {\n      return nu$7({});\n    };\n    var events$b = function (toggleConfig, toggleState) {\n      var execute = executeEvent(toggleConfig, toggleState, toggle$2);\n      var load = loadEvent(toggleConfig, toggleState, onLoad);\n      return derive$2(flatten([\n        toggleConfig.toggleOnExecute ? [execute] : [],\n        [load]\n      ]));\n    };\n\n    var ActiveToggle = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$3,\n        events: events$b\n    });\n\n    var updatePressed = function (component, ariaInfo, status) {\n      set$8(component.element, 'aria-pressed', status);\n      if (ariaInfo.syncWithExpanded) {\n        updateExpanded(component, ariaInfo, status);\n      }\n    };\n    var updateSelected = function (component, ariaInfo, status) {\n      set$8(component.element, 'aria-selected', status);\n    };\n    var updateChecked = function (component, ariaInfo, status) {\n      set$8(component.element, 'aria-checked', status);\n    };\n    var updateExpanded = function (component, ariaInfo, status) {\n      set$8(component.element, 'aria-expanded', status);\n    };\n\n    var ToggleSchema = [\n      defaulted('selected', false),\n      option('toggleClass'),\n      defaulted('toggleOnExecute', true),\n      defaultedOf('aria', { mode: 'none' }, choose$1('mode', {\n        pressed: [\n          defaulted('syncWithExpanded', false),\n          output$1('update', updatePressed)\n        ],\n        checked: [output$1('update', updateChecked)],\n        expanded: [output$1('update', updateExpanded)],\n        selected: [output$1('update', updateSelected)],\n        none: [output$1('update', noop)]\n      }))\n    ];\n\n    var Toggling = create$8({\n      fields: ToggleSchema,\n      name: 'toggling',\n      active: ActiveToggle,\n      apis: ToggleApis,\n      state: SetupBehaviourCellState(false)\n    });\n\n    var pointerEvents = function () {\n      var onClick = function (component, simulatedEvent) {\n        simulatedEvent.stop();\n        emitExecute(component);\n      };\n      return [\n        run$1(click(), onClick),\n        run$1(tap(), onClick),\n        cutter(touchstart()),\n        cutter(mousedown())\n      ];\n    };\n    var events$a = function (optAction) {\n      var executeHandler = function (action) {\n        return runOnExecute$1(function (component, simulatedEvent) {\n          action(component);\n          simulatedEvent.stop();\n        });\n      };\n      return derive$2(flatten([\n        optAction.map(executeHandler).toArray(),\n        pointerEvents()\n      ]));\n    };\n\n    var hoverEvent = 'alloy.item-hover';\n    var focusEvent = 'alloy.item-focus';\n    var onHover = function (item) {\n      if (search(item.element).isNone() || Focusing.isFocused(item)) {\n        if (!Focusing.isFocused(item)) {\n          Focusing.focus(item);\n        }\n        emitWith(item, hoverEvent, { item: item });\n      }\n    };\n    var onFocus$1 = function (item) {\n      emitWith(item, focusEvent, { item: item });\n    };\n    var hover = constant$1(hoverEvent);\n    var focus$1 = constant$1(focusEvent);\n\n    var builder$2 = function (detail) {\n      return {\n        dom: detail.dom,\n        domModification: __assign(__assign({}, detail.domModification), { attributes: __assign(__assign(__assign({ 'role': detail.toggling.isSome() ? 'menuitemcheckbox' : 'menuitem' }, detail.domModification.attributes), { 'aria-haspopup': detail.hasSubmenu }), detail.hasSubmenu ? { 'aria-expanded': false } : {}) }),\n        behaviours: SketchBehaviours.augment(detail.itemBehaviours, [\n          detail.toggling.fold(Toggling.revoke, function (tConfig) {\n            return Toggling.config(__assign({ aria: { mode: 'checked' } }, tConfig));\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            stopMousedown: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus$1(component);\n            }\n          }),\n          Keying.config({ mode: 'execution' }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          config('item-type-events', __spreadArray(__spreadArray([], pointerEvents(), true), [\n            run$1(mouseover(), onHover),\n            run$1(focusItem(), Focusing.focus)\n          ], false))\n        ]),\n        components: detail.components,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var schema$p = [\n      required$1('data'),\n      required$1('components'),\n      required$1('dom'),\n      defaulted('hasSubmenu', false),\n      option('toggling'),\n      SketchBehaviours.field('itemBehaviours', [\n        Toggling,\n        Focusing,\n        Keying,\n        Representing\n      ]),\n      defaulted('ignoreFocus', false),\n      defaulted('domModification', {}),\n      output$1('builder', builder$2),\n      defaulted('eventOrder', {})\n    ];\n\n    var builder$1 = function (detail) {\n      return {\n        dom: detail.dom,\n        components: detail.components,\n        events: derive$2([stopper(focusItem())])\n      };\n    };\n    var schema$o = [\n      required$1('dom'),\n      required$1('components'),\n      output$1('builder', builder$1)\n    ];\n\n    var owner$2 = constant$1('item-widget');\n    var parts$h = constant$1([required({\n        name: 'widget',\n        overrides: function (detail) {\n          return {\n            behaviours: derive$1([Representing.config({\n                store: {\n                  mode: 'manual',\n                  getValue: function (_component) {\n                    return detail.data;\n                  },\n                  setValue: noop\n                }\n              })])\n          };\n        }\n      })]);\n\n    var builder = function (detail) {\n      var subs = substitutes(owner$2(), detail, parts$h());\n      var components = components$1(owner$2(), detail, subs.internals());\n      var focusWidget = function (component) {\n        return getPart(component, detail, 'widget').map(function (widget) {\n          Keying.focusIn(widget);\n          return widget;\n        });\n      };\n      var onHorizontalArrow = function (component, simulatedEvent) {\n        return inside(simulatedEvent.event.target) ? Optional.none() : function () {\n          if (detail.autofocus) {\n            simulatedEvent.setSource(component.element);\n            return Optional.none();\n          } else {\n            return Optional.none();\n          }\n        }();\n      };\n      return {\n        dom: detail.dom,\n        components: components,\n        domModification: detail.domModification,\n        events: derive$2([\n          runOnExecute$1(function (component, simulatedEvent) {\n            focusWidget(component).each(function (_widget) {\n              simulatedEvent.stop();\n            });\n          }),\n          run$1(mouseover(), onHover),\n          run$1(focusItem(), function (component, _simulatedEvent) {\n            if (detail.autofocus) {\n              focusWidget(component);\n            } else {\n              Focusing.focus(component);\n            }\n          })\n        ]),\n        behaviours: SketchBehaviours.augment(detail.widgetBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus$1(component);\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            focusIn: detail.autofocus ? function (component) {\n              focusWidget(component);\n            } : revoke(),\n            onLeft: onHorizontalArrow,\n            onRight: onHorizontalArrow,\n            onEscape: function (component, simulatedEvent) {\n              if (!Focusing.isFocused(component) && !detail.autofocus) {\n                Focusing.focus(component);\n                return Optional.some(true);\n              } else if (detail.autofocus) {\n                simulatedEvent.setSource(component.element);\n                return Optional.none();\n              } else {\n                return Optional.none();\n              }\n            }\n          })\n        ])\n      };\n    };\n    var schema$n = [\n      required$1('uid'),\n      required$1('data'),\n      required$1('components'),\n      required$1('dom'),\n      defaulted('autofocus', false),\n      defaulted('ignoreFocus', false),\n      SketchBehaviours.field('widgetBehaviours', [\n        Representing,\n        Focusing,\n        Keying\n      ]),\n      defaulted('domModification', {}),\n      defaultUidsSchema(parts$h()),\n      output$1('builder', builder)\n    ];\n\n    var itemSchema$2 = choose$1('type', {\n      widget: schema$n,\n      item: schema$p,\n      separator: schema$o\n    });\n    var configureGrid = function (detail, movementInfo) {\n      return {\n        mode: 'flatgrid',\n        selector: '.' + detail.markers.item,\n        initSize: {\n          numColumns: movementInfo.initSize.numColumns,\n          numRows: movementInfo.initSize.numRows\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMatrix = function (detail, movementInfo) {\n      return {\n        mode: 'matrix',\n        selectors: {\n          row: movementInfo.rowSelector,\n          cell: '.' + detail.markers.item\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMenu = function (detail, movementInfo) {\n      return {\n        mode: 'menu',\n        selector: '.' + detail.markers.item,\n        moveOnTab: movementInfo.moveOnTab,\n        focusManager: detail.focusManager\n      };\n    };\n    var parts$g = constant$1([group({\n        factory: {\n          sketch: function (spec) {\n            var itemInfo = asRawOrDie$1('menu.spec item', itemSchema$2, spec);\n            return itemInfo.builder(itemInfo);\n          }\n        },\n        name: 'items',\n        unit: 'item',\n        defaults: function (detail, u) {\n          return has$2(u, 'uid') ? u : __assign(__assign({}, u), { uid: generate$5('item') });\n        },\n        overrides: function (detail, u) {\n          return {\n            type: u.type,\n            ignoreFocus: detail.fakeFocus,\n            domModification: { classes: [detail.markers.item] }\n          };\n        }\n      })]);\n    var schema$m = constant$1([\n      required$1('value'),\n      required$1('items'),\n      required$1('dom'),\n      required$1('components'),\n      defaulted('eventOrder', {}),\n      field('menuBehaviours', [\n        Highlighting,\n        Representing,\n        Composing,\n        Keying\n      ]),\n      defaultedOf('movement', {\n        mode: 'menu',\n        moveOnTab: true\n      }, choose$1('mode', {\n        grid: [\n          initSize(),\n          output$1('config', configureGrid)\n        ],\n        matrix: [\n          output$1('config', configureMatrix),\n          required$1('rowSelector')\n        ],\n        menu: [\n          defaulted('moveOnTab', true),\n          output$1('config', configureMenu)\n        ]\n      })),\n      itemMarkers(),\n      defaulted('fakeFocus', false),\n      defaulted('focusManager', dom$2()),\n      onHandler('onHighlight')\n    ]);\n\n    var focus = constant$1('alloy.menu-focus');\n\n    var make$7 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.menuBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedItem,\n            itemClass: detail.markers.item,\n            onHighlight: detail.onHighlight\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          }),\n          Composing.config({ find: Optional.some }),\n          Keying.config(detail.movement.config(detail, detail.movement))\n        ]),\n        events: derive$2([\n          run$1(focus$1(), function (menu, simulatedEvent) {\n            var event = simulatedEvent.event;\n            menu.getSystem().getByDom(event.target).each(function (item) {\n              Highlighting.highlight(menu, item);\n              simulatedEvent.stop();\n              emitWith(menu, focus(), {\n                menu: menu,\n                item: item\n              });\n            });\n          }),\n          run$1(hover(), function (menu, simulatedEvent) {\n            var item = simulatedEvent.event.item;\n            Highlighting.highlight(menu, item);\n          })\n        ]),\n        components: components,\n        eventOrder: detail.eventOrder,\n        domModification: { attributes: { role: 'menu' } }\n      };\n    };\n\n    var Menu = composite({\n      name: 'Menu',\n      configFields: schema$m(),\n      partFields: parts$g(),\n      factory: make$7\n    });\n\n    var transpose$1 = function (obj) {\n      return tupleMap(obj, function (v, k) {\n        return {\n          k: v,\n          v: k\n        };\n      });\n    };\n    var trace = function (items, byItem, byMenu, finish) {\n      return get$e(byMenu, finish).bind(function (triggerItem) {\n        return get$e(items, triggerItem).bind(function (triggerMenu) {\n          var rest = trace(items, byItem, byMenu, triggerMenu);\n          return Optional.some([triggerMenu].concat(rest));\n        });\n      }).getOr([]);\n    };\n    var generate$2 = function (menus, expansions) {\n      var items = {};\n      each(menus, function (menuItems, menu) {\n        each$1(menuItems, function (item) {\n          items[item] = menu;\n        });\n      });\n      var byItem = expansions;\n      var byMenu = transpose$1(expansions);\n      var menuPaths = map$1(byMenu, function (_triggerItem, submenu) {\n        return [submenu].concat(trace(items, byItem, byMenu, submenu));\n      });\n      return map$1(items, function (menu) {\n        return get$e(menuPaths, menu).getOr([menu]);\n      });\n    };\n\n    var init$c = function () {\n      var expansions = Cell({});\n      var menus = Cell({});\n      var paths = Cell({});\n      var primary = value$1();\n      var directory = Cell({});\n      var clear = function () {\n        expansions.set({});\n        menus.set({});\n        paths.set({});\n        primary.clear();\n      };\n      var isClear = function () {\n        return primary.get().isNone();\n      };\n      var setMenuBuilt = function (menuName, built) {\n        var _a;\n        menus.set(__assign(__assign({}, menus.get()), (_a = {}, _a[menuName] = {\n          type: 'prepared',\n          menu: built\n        }, _a)));\n      };\n      var setContents = function (sPrimary, sMenus, sExpansions, dir) {\n        primary.set(sPrimary);\n        expansions.set(sExpansions);\n        menus.set(sMenus);\n        directory.set(dir);\n        var sPaths = generate$2(dir, sExpansions);\n        paths.set(sPaths);\n      };\n      var getTriggeringItem = function (menuValue) {\n        return find$4(expansions.get(), function (v, _k) {\n          return v === menuValue;\n        });\n      };\n      var getTriggerData = function (menuValue, getItemByValue, path) {\n        return getPreparedMenu(menuValue).bind(function (menu) {\n          return getTriggeringItem(menuValue).bind(function (triggeringItemValue) {\n            return getItemByValue(triggeringItemValue).map(function (triggeredItem) {\n              return {\n                triggeredMenu: menu,\n                triggeringItem: triggeredItem,\n                triggeringPath: path\n              };\n            });\n          });\n        });\n      };\n      var getTriggeringPath = function (itemValue, getItemByValue) {\n        var extraPath = filter$2(lookupItem(itemValue).toArray(), function (menuValue) {\n          return getPreparedMenu(menuValue).isSome();\n        });\n        return get$e(paths.get(), itemValue).bind(function (path) {\n          var revPath = reverse(extraPath.concat(path));\n          var triggers = bind$3(revPath, function (menuValue, menuIndex) {\n            return getTriggerData(menuValue, getItemByValue, revPath.slice(0, menuIndex + 1)).fold(function () {\n              return is$1(primary.get(), menuValue) ? [] : [Optional.none()];\n            }, function (data) {\n              return [Optional.some(data)];\n            });\n          });\n          return sequence(triggers);\n        });\n      };\n      var expand = function (itemValue) {\n        return get$e(expansions.get(), itemValue).map(function (menu) {\n          var current = get$e(paths.get(), itemValue).getOr([]);\n          return [menu].concat(current);\n        });\n      };\n      var collapse = function (itemValue) {\n        return get$e(paths.get(), itemValue).bind(function (path) {\n          return path.length > 1 ? Optional.some(path.slice(1)) : Optional.none();\n        });\n      };\n      var refresh = function (itemValue) {\n        return get$e(paths.get(), itemValue);\n      };\n      var getPreparedMenu = function (menuValue) {\n        return lookupMenu(menuValue).bind(extractPreparedMenu);\n      };\n      var lookupMenu = function (menuValue) {\n        return get$e(menus.get(), menuValue);\n      };\n      var lookupItem = function (itemValue) {\n        return get$e(expansions.get(), itemValue);\n      };\n      var otherMenus = function (path) {\n        var menuValues = directory.get();\n        return difference(keys(menuValues), path);\n      };\n      var getPrimary = function () {\n        return primary.get().bind(getPreparedMenu);\n      };\n      var getMenus = function () {\n        return menus.get();\n      };\n      return {\n        setMenuBuilt: setMenuBuilt,\n        setContents: setContents,\n        expand: expand,\n        refresh: refresh,\n        collapse: collapse,\n        lookupMenu: lookupMenu,\n        lookupItem: lookupItem,\n        otherMenus: otherMenus,\n        getPrimary: getPrimary,\n        getMenus: getMenus,\n        clear: clear,\n        isClear: isClear,\n        getTriggeringPath: getTriggeringPath\n      };\n    };\n    var extractPreparedMenu = function (prep) {\n      return prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none();\n    };\n    var LayeredState = {\n      init: init$c,\n      extractPreparedMenu: extractPreparedMenu\n    };\n\n    var make$6 = function (detail, _rawUiSpec) {\n      var submenuParentItems = value$1();\n      var buildMenus = function (container, primaryName, menus) {\n        return map$1(menus, function (spec, name) {\n          var makeSketch = function () {\n            return Menu.sketch(__assign(__assign({}, spec), {\n              value: name,\n              markers: detail.markers,\n              fakeFocus: detail.fakeFocus,\n              onHighlight: detail.onHighlight,\n              focusManager: detail.fakeFocus ? highlights() : dom$2()\n            }));\n          };\n          return name === primaryName ? {\n            type: 'prepared',\n            menu: container.getSystem().build(makeSketch())\n          } : {\n            type: 'notbuilt',\n            nbMenu: makeSketch\n          };\n        });\n      };\n      var layeredState = LayeredState.init();\n      var setup = function (container) {\n        var componentMap = buildMenus(container, detail.data.primary, detail.data.menus);\n        var directory = toDirectory();\n        layeredState.setContents(detail.data.primary, componentMap, detail.data.expansions, directory);\n        return layeredState.getPrimary();\n      };\n      var getItemValue = function (item) {\n        return Representing.getValue(item).value;\n      };\n      var getItemByValue = function (_container, menus, itemValue) {\n        return findMap(menus, function (menu) {\n          if (!menu.getSystem().isConnected()) {\n            return Optional.none();\n          }\n          var candidates = Highlighting.getCandidates(menu);\n          return find$5(candidates, function (c) {\n            return getItemValue(c) === itemValue;\n          });\n        });\n      };\n      var toDirectory = function (_container) {\n        return map$1(detail.data.menus, function (data, _menuName) {\n          return bind$3(data.items, function (item) {\n            return item.type === 'separator' ? [] : [item.data.value];\n          });\n        });\n      };\n      var setActiveMenu = function (container, menu) {\n        Highlighting.highlight(container, menu);\n        Highlighting.getHighlighted(menu).orThunk(function () {\n          return Highlighting.getFirst(menu);\n        }).each(function (item) {\n          dispatch(container, item.element, focusItem());\n        });\n      };\n      var getMenus = function (state, menuValues) {\n        return cat(map$2(menuValues, function (mv) {\n          return state.lookupMenu(mv).bind(function (prep) {\n            return prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none();\n          });\n        }));\n      };\n      var closeOthers = function (container, state, path) {\n        var others = getMenus(state, state.otherMenus(path));\n        each$1(others, function (o) {\n          remove$1(o.element, [detail.markers.backgroundMenu]);\n          if (!detail.stayInDom) {\n            Replacing.remove(container, o);\n          }\n        });\n      };\n      var getSubmenuParents = function (container) {\n        return submenuParentItems.get().getOrThunk(function () {\n          var r = {};\n          var items = descendants(container.element, '.' + detail.markers.item);\n          var parentItems = filter$2(items, function (i) {\n            return get$d(i, 'aria-haspopup') === 'true';\n          });\n          each$1(parentItems, function (i) {\n            container.getSystem().getByDom(i).each(function (itemComp) {\n              var key = getItemValue(itemComp);\n              r[key] = itemComp;\n            });\n          });\n          submenuParentItems.set(r);\n          return r;\n        });\n      };\n      var updateAriaExpansions = function (container, path) {\n        var parentItems = getSubmenuParents(container);\n        each(parentItems, function (v, k) {\n          var expanded = contains$2(path, k);\n          set$8(v.element, 'aria-expanded', expanded);\n        });\n      };\n      var updateMenuPath = function (container, state, path) {\n        return Optional.from(path[0]).bind(function (latestMenuName) {\n          return state.lookupMenu(latestMenuName).bind(function (menuPrep) {\n            if (menuPrep.type === 'notbuilt') {\n              return Optional.none();\n            } else {\n              var activeMenu = menuPrep.menu;\n              var rest = getMenus(state, path.slice(1));\n              each$1(rest, function (r) {\n                add$2(r.element, detail.markers.backgroundMenu);\n              });\n              if (!inBody(activeMenu.element)) {\n                Replacing.append(container, premade(activeMenu));\n              }\n              remove$1(activeMenu.element, [detail.markers.backgroundMenu]);\n              setActiveMenu(container, activeMenu);\n              closeOthers(container, state, path);\n              return Optional.some(activeMenu);\n            }\n          });\n        });\n      };\n      var ExpandHighlightDecision;\n      (function (ExpandHighlightDecision) {\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightSubmenu'] = 0] = 'HighlightSubmenu';\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightParent'] = 1] = 'HighlightParent';\n      }(ExpandHighlightDecision || (ExpandHighlightDecision = {})));\n      var buildIfRequired = function (container, menuName, menuPrep) {\n        if (menuPrep.type === 'notbuilt') {\n          var menu = container.getSystem().build(menuPrep.nbMenu());\n          layeredState.setMenuBuilt(menuName, menu);\n          return menu;\n        } else {\n          return menuPrep.menu;\n        }\n      };\n      var expandRight = function (container, item, decision) {\n        if (decision === void 0) {\n          decision = ExpandHighlightDecision.HighlightSubmenu;\n        }\n        if (item.hasConfigured(Disabling) && Disabling.isDisabled(item)) {\n          return Optional.some(item);\n        } else {\n          var value = getItemValue(item);\n          return layeredState.expand(value).bind(function (path) {\n            updateAriaExpansions(container, path);\n            return Optional.from(path[0]).bind(function (menuName) {\n              return layeredState.lookupMenu(menuName).bind(function (activeMenuPrep) {\n                var activeMenu = buildIfRequired(container, menuName, activeMenuPrep);\n                if (!inBody(activeMenu.element)) {\n                  Replacing.append(container, premade(activeMenu));\n                }\n                detail.onOpenSubmenu(container, item, activeMenu, reverse(path));\n                if (decision === ExpandHighlightDecision.HighlightSubmenu) {\n                  Highlighting.highlightFirst(activeMenu);\n                  return updateMenuPath(container, layeredState, path);\n                } else {\n                  Highlighting.dehighlightAll(activeMenu);\n                  return Optional.some(item);\n                }\n              });\n            });\n          });\n        }\n      };\n      var collapseLeft = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.collapse(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path).map(function (activeMenu) {\n            detail.onCollapseMenu(container, item, activeMenu);\n            return activeMenu;\n          });\n        });\n      };\n      var updateView = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.refresh(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path);\n        });\n      };\n      var onRight = function (container, item) {\n        return inside(item.element) ? Optional.none() : expandRight(container, item, ExpandHighlightDecision.HighlightSubmenu);\n      };\n      var onLeft = function (container, item) {\n        return inside(item.element) ? Optional.none() : collapseLeft(container, item);\n      };\n      var onEscape = function (container, item) {\n        return collapseLeft(container, item).orThunk(function () {\n          return detail.onEscape(container, item).map(function () {\n            return container;\n          });\n        });\n      };\n      var keyOnItem = function (f) {\n        return function (container, simulatedEvent) {\n          return closest$1(simulatedEvent.getSource(), '.' + detail.markers.item).bind(function (target) {\n            return container.getSystem().getByDom(target).toOptional().bind(function (item) {\n              return f(container, item).map(always);\n            });\n          });\n        };\n      };\n      var events = derive$2([\n        run$1(focus(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event.item;\n          layeredState.lookupItem(getItemValue(item)).each(function () {\n            var menu = simulatedEvent.event.menu;\n            Highlighting.highlight(sandbox, menu);\n            var value = getItemValue(simulatedEvent.event.item);\n            layeredState.refresh(value).each(function (path) {\n              return closeOthers(sandbox, layeredState, path);\n            });\n          });\n        }),\n        runOnExecute$1(function (component, simulatedEvent) {\n          var target = simulatedEvent.event.target;\n          component.getSystem().getByDom(target).each(function (item) {\n            var itemValue = getItemValue(item);\n            if (itemValue.indexOf('collapse-item') === 0) {\n              collapseLeft(component, item);\n            }\n            expandRight(component, item, ExpandHighlightDecision.HighlightSubmenu).fold(function () {\n              detail.onExecute(component, item);\n            }, noop);\n          });\n        }),\n        runOnAttached(function (container, _simulatedEvent) {\n          setup(container).each(function (primary) {\n            Replacing.append(container, premade(primary));\n            detail.onOpenMenu(container, primary);\n            if (detail.highlightImmediately) {\n              setActiveMenu(container, primary);\n            }\n          });\n        })\n      ].concat(detail.navigateOnHover ? [run$1(hover(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event.item;\n          updateView(sandbox, item);\n          expandRight(sandbox, item, ExpandHighlightDecision.HighlightParent);\n          detail.onHover(sandbox, item);\n        })] : []));\n      var getActiveItem = function (container) {\n        return Highlighting.getHighlighted(container).bind(Highlighting.getHighlighted);\n      };\n      var collapseMenuApi = function (container) {\n        getActiveItem(container).each(function (currentItem) {\n          collapseLeft(container, currentItem);\n        });\n      };\n      var highlightPrimary = function (container) {\n        layeredState.getPrimary().each(function (primary) {\n          setActiveMenu(container, primary);\n        });\n      };\n      var extractMenuFromContainer = function (container) {\n        return Optional.from(container.components()[0]).filter(function (comp) {\n          return get$d(comp.element, 'role') === 'menu';\n        });\n      };\n      var repositionMenus = function (container) {\n        var maybeActivePrimary = layeredState.getPrimary().bind(function (primary) {\n          return getActiveItem(container).bind(function (currentItem) {\n            var itemValue = getItemValue(currentItem);\n            var allMenus = values(layeredState.getMenus());\n            var preparedMenus = cat(map$2(allMenus, LayeredState.extractPreparedMenu));\n            return layeredState.getTriggeringPath(itemValue, function (v) {\n              return getItemByValue(container, preparedMenus, v);\n            });\n          }).map(function (triggeringPath) {\n            return {\n              primary: primary,\n              triggeringPath: triggeringPath\n            };\n          });\n        });\n        maybeActivePrimary.fold(function () {\n          extractMenuFromContainer(container).each(function (primaryMenu) {\n            detail.onRepositionMenu(container, primaryMenu, []);\n          });\n        }, function (_a) {\n          var primary = _a.primary, triggeringPath = _a.triggeringPath;\n          detail.onRepositionMenu(container, primary, triggeringPath);\n        });\n      };\n      var apis = {\n        collapseMenu: collapseMenuApi,\n        highlightPrimary: highlightPrimary,\n        repositionMenus: repositionMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.tmenuBehaviours, [\n          Keying.config({\n            mode: 'special',\n            onRight: keyOnItem(onRight),\n            onLeft: keyOnItem(onLeft),\n            onEscape: keyOnItem(onEscape),\n            focusIn: function (container, _keyInfo) {\n              layeredState.getPrimary().each(function (primary) {\n                dispatch(container, primary.element, focusItem());\n              });\n            }\n          }),\n          Highlighting.config({\n            highlightClass: detail.markers.selectedMenu,\n            itemClass: detail.markers.menu\n          }),\n          Composing.config({\n            find: function (container) {\n              return Highlighting.getHighlighted(container);\n            }\n          }),\n          Replacing.config({})\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis,\n        events: events\n      };\n    };\n    var collapseItem$1 = constant$1('collapse-item');\n\n    var tieredData = function (primary, menus, expansions) {\n      return {\n        primary: primary,\n        menus: menus,\n        expansions: expansions\n      };\n    };\n    var singleData = function (name, menu) {\n      return {\n        primary: name,\n        menus: wrap$1(name, menu),\n        expansions: {}\n      };\n    };\n    var collapseItem = function (text) {\n      return {\n        value: generate$6(collapseItem$1()),\n        meta: { text: text }\n      };\n    };\n    var tieredMenu = single({\n      name: 'TieredMenu',\n      configFields: [\n        onStrictKeyboardHandler('onExecute'),\n        onStrictKeyboardHandler('onEscape'),\n        onStrictHandler('onOpenMenu'),\n        onStrictHandler('onOpenSubmenu'),\n        onHandler('onRepositionMenu'),\n        onHandler('onCollapseMenu'),\n        defaulted('highlightImmediately', true),\n        requiredObjOf('data', [\n          required$1('primary'),\n          required$1('menus'),\n          required$1('expansions')\n        ]),\n        defaulted('fakeFocus', false),\n        onHandler('onHighlight'),\n        onHandler('onHover'),\n        tieredMenuMarkers(),\n        required$1('dom'),\n        defaulted('navigateOnHover', true),\n        defaulted('stayInDom', false),\n        field('tmenuBehaviours', [\n          Keying,\n          Highlighting,\n          Composing,\n          Replacing\n        ]),\n        defaulted('eventOrder', {})\n      ],\n      apis: {\n        collapseMenu: function (apis, tmenu) {\n          apis.collapseMenu(tmenu);\n        },\n        highlightPrimary: function (apis, tmenu) {\n          apis.highlightPrimary(tmenu);\n        },\n        repositionMenus: function (apis, tmenu) {\n          apis.repositionMenus(tmenu);\n        }\n      },\n      factory: make$6,\n      extraApis: {\n        tieredData: tieredData,\n        singleData: singleData,\n        collapseItem: collapseItem\n      }\n    });\n\n    var makeMenu = function (detail, menuSandbox, placementSpec, menuSpec, getBounds) {\n      var lazySink = function () {\n        return detail.lazySink(menuSandbox);\n      };\n      var layouts = menuSpec.type === 'horizontal' ? {\n        layouts: {\n          onLtr: function () {\n            return belowOrAbove();\n          },\n          onRtl: function () {\n            return belowOrAboveRtl();\n          }\n        }\n      } : {};\n      var isFirstTierSubmenu = function (triggeringPaths) {\n        return triggeringPaths.length === 2;\n      };\n      var getSubmenuLayouts = function (triggeringPaths) {\n        return isFirstTierSubmenu(triggeringPaths) ? layouts : {};\n      };\n      return tieredMenu.sketch({\n        dom: { tag: 'div' },\n        data: menuSpec.data,\n        markers: menuSpec.menu.markers,\n        highlightImmediately: menuSpec.menu.highlightImmediately,\n        onEscape: function () {\n          Sandboxing.close(menuSandbox);\n          detail.onEscape.map(function (handler) {\n            return handler(menuSandbox);\n          });\n          return Optional.some(true);\n        },\n        onExecute: function () {\n          return Optional.some(true);\n        },\n        onOpenMenu: function (tmenu, menu) {\n          Positioning.positionWithinBounds(lazySink().getOrDie(), menu, placementSpec, getBounds());\n        },\n        onOpenSubmenu: function (tmenu, item, submenu, triggeringPaths) {\n          var sink = lazySink().getOrDie();\n          Positioning.position(sink, submenu, {\n            anchor: __assign({\n              type: 'submenu',\n              item: item\n            }, getSubmenuLayouts(triggeringPaths))\n          });\n        },\n        onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n          var sink = lazySink().getOrDie();\n          Positioning.positionWithinBounds(sink, primaryMenu, placementSpec, getBounds());\n          each$1(submenuTriggers, function (st) {\n            var submenuLayouts = getSubmenuLayouts(st.triggeringPath);\n            Positioning.position(sink, st.triggeredMenu, {\n              anchor: __assign({\n                type: 'submenu',\n                item: st.triggeringItem\n              }, submenuLayouts)\n            });\n          });\n        }\n      });\n    };\n    var factory$m = function (detail, spec) {\n      var isPartOfRelated = function (sandbox, queryElem) {\n        var related = detail.getRelated(sandbox);\n        return related.exists(function (rel) {\n          return isPartOf$1(rel, queryElem);\n        });\n      };\n      var setContent = function (sandbox, thing) {\n        Sandboxing.setContent(sandbox, thing);\n      };\n      var showAt = function (sandbox, thing, placementSpec) {\n        showWithin(sandbox, thing, placementSpec, Optional.none());\n      };\n      var showWithin = function (sandbox, thing, placementSpec, boxElement) {\n        showWithinBounds(sandbox, thing, placementSpec, function () {\n          return boxElement.map(function (elem) {\n            return box$1(elem);\n          });\n        });\n      };\n      var showWithinBounds = function (sandbox, thing, placementSpec, getBounds) {\n        var sink = detail.lazySink(sandbox).getOrDie();\n        Sandboxing.openWhileCloaked(sandbox, thing, function () {\n          return Positioning.positionWithinBounds(sink, sandbox, placementSpec, getBounds());\n        });\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'position',\n          config: placementSpec,\n          getBounds: getBounds\n        }));\n      };\n      var showMenuAt = function (sandbox, placementSpec, menuSpec) {\n        showMenuWithinBounds(sandbox, placementSpec, menuSpec, Optional.none);\n      };\n      var showMenuWithinBounds = function (sandbox, placementSpec, menuSpec, getBounds) {\n        var menu = makeMenu(detail, sandbox, placementSpec, menuSpec, getBounds);\n        Sandboxing.open(sandbox, menu);\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'menu',\n          menu: menu\n        }));\n      };\n      var hide = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.setValue(sandbox, Optional.none());\n          Sandboxing.close(sandbox);\n        }\n      };\n      var getContent = function (sandbox) {\n        return Sandboxing.getState(sandbox);\n      };\n      var reposition = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.getValue(sandbox).each(function (state) {\n            switch (state.mode) {\n            case 'menu':\n              Sandboxing.getState(sandbox).each(tieredMenu.repositionMenus);\n              break;\n            case 'position':\n              var sink = detail.lazySink(sandbox).getOrDie();\n              Positioning.positionWithinBounds(sink, sandbox, state.config, state.getBounds());\n              break;\n            }\n          });\n        }\n      };\n      var apis = {\n        setContent: setContent,\n        showAt: showAt,\n        showWithin: showWithin,\n        showWithinBounds: showWithinBounds,\n        showMenuAt: showMenuAt,\n        showMenuWithinBounds: showMenuWithinBounds,\n        hide: hide,\n        getContent: getContent,\n        reposition: reposition,\n        isOpen: Sandboxing.isOpen\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.inlineBehaviours, [\n          Sandboxing.config({\n            isPartOf: function (sandbox, data, queryElem) {\n              return isPartOf$1(data, queryElem) || isPartOfRelated(sandbox, queryElem);\n            },\n            getAttachPoint: function (sandbox) {\n              return detail.lazySink(sandbox).getOrDie();\n            },\n            onOpen: function (sandbox) {\n              detail.onShow(sandbox);\n            },\n            onClose: function (sandbox) {\n              detail.onHide(sandbox);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: Optional.none()\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel$1(__assign({ isExtraPart: spec.isExtraPart }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel(__assign(__assign({}, detail.fireRepositionEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})), { doReposition: reposition })))\n          })\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis\n      };\n    };\n    var InlineView = single({\n      name: 'InlineView',\n      configFields: [\n        required$1('lazySink'),\n        onHandler('onShow'),\n        onHandler('onHide'),\n        optionFunction('onEscape'),\n        field('inlineBehaviours', [\n          Sandboxing,\n          Representing,\n          Receiving\n        ]),\n        optionObjOf('fireDismissalEventInstead', [defaulted('event', dismissRequested())]),\n        optionObjOf('fireRepositionEventInstead', [defaulted('event', repositionRequested())]),\n        defaulted('getRelated', Optional.none),\n        defaulted('isExtraPart', never),\n        defaulted('eventOrder', Optional.none)\n      ],\n      factory: factory$m,\n      apis: {\n        showAt: function (apis, component, anchor, thing) {\n          apis.showAt(component, anchor, thing);\n        },\n        showWithin: function (apis, component, anchor, thing, boxElement) {\n          apis.showWithin(component, anchor, thing, boxElement);\n        },\n        showWithinBounds: function (apis, component, anchor, thing, bounds) {\n          apis.showWithinBounds(component, anchor, thing, bounds);\n        },\n        showMenuAt: function (apis, component, anchor, menuSpec) {\n          apis.showMenuAt(component, anchor, menuSpec);\n        },\n        showMenuWithinBounds: function (apis, component, anchor, menuSpec, bounds) {\n          apis.showMenuWithinBounds(component, anchor, menuSpec, bounds);\n        },\n        hide: function (apis, component) {\n          apis.hide(component);\n        },\n        isOpen: function (apis, component) {\n          return apis.isOpen(component);\n        },\n        getContent: function (apis, component) {\n          return apis.getContent(component);\n        },\n        setContent: function (apis, component, thing) {\n          apis.setContent(component, thing);\n        },\n        reposition: function (apis, component) {\n          apis.reposition(component);\n        }\n      }\n    });\n\n    var labelPrefix = 'layout-inset';\n    var westEdgeX = function (anchor) {\n      return anchor.x;\n    };\n    var middleX = function (anchor, element) {\n      return anchor.x + anchor.width / 2 - element.width / 2;\n    };\n    var eastEdgeX = function (anchor, element) {\n      return anchor.x + anchor.width - element.width;\n    };\n    var northY = function (anchor) {\n      return anchor.y;\n    };\n    var southY = function (anchor, element) {\n      return anchor.y + anchor.height - element.height;\n    };\n    var centreY = function (anchor, element) {\n      return anchor.y + anchor.height / 2 - element.height / 2;\n    };\n    var southwest = function (anchor, element, bubbles) {\n      return nu$6(eastEdgeX(anchor, element), southY(anchor, element), bubbles.insetSouthwest(), northwest$3(), 'southwest', boundsRestriction(anchor, {\n        right: 0,\n        bottom: 3\n      }), labelPrefix);\n    };\n    var southeast = function (anchor, element, bubbles) {\n      return nu$6(westEdgeX(anchor), southY(anchor, element), bubbles.insetSoutheast(), northeast$3(), 'southeast', boundsRestriction(anchor, {\n        left: 1,\n        bottom: 3\n      }), labelPrefix);\n    };\n    var northwest = function (anchor, element, bubbles) {\n      return nu$6(eastEdgeX(anchor, element), northY(anchor), bubbles.insetNorthwest(), southwest$3(), 'northwest', boundsRestriction(anchor, {\n        right: 0,\n        top: 2\n      }), labelPrefix);\n    };\n    var northeast = function (anchor, element, bubbles) {\n      return nu$6(westEdgeX(anchor), northY(anchor), bubbles.insetNortheast(), southeast$3(), 'northeast', boundsRestriction(anchor, {\n        left: 1,\n        top: 2\n      }), labelPrefix);\n    };\n    var north = function (anchor, element, bubbles) {\n      return nu$6(middleX(anchor, element), northY(anchor), bubbles.insetNorth(), south$3(), 'north', boundsRestriction(anchor, { top: 2 }), labelPrefix);\n    };\n    var south = function (anchor, element, bubbles) {\n      return nu$6(middleX(anchor, element), southY(anchor, element), bubbles.insetSouth(), north$3(), 'south', boundsRestriction(anchor, { bottom: 3 }), labelPrefix);\n    };\n    var east = function (anchor, element, bubbles) {\n      return nu$6(eastEdgeX(anchor, element), centreY(anchor, element), bubbles.insetEast(), west$3(), 'east', boundsRestriction(anchor, { right: 0 }), labelPrefix);\n    };\n    var west = function (anchor, element, bubbles) {\n      return nu$6(westEdgeX(anchor), centreY(anchor, element), bubbles.insetWest(), east$3(), 'west', boundsRestriction(anchor, { left: 1 }), labelPrefix);\n    };\n    var lookupPreserveLayout = function (lastPlacement) {\n      switch (lastPlacement) {\n      case 'north':\n        return north;\n      case 'northeast':\n        return northeast;\n      case 'northwest':\n        return northwest;\n      case 'south':\n        return south;\n      case 'southeast':\n        return southeast;\n      case 'southwest':\n        return southwest;\n      case 'east':\n        return east;\n      case 'west':\n        return west;\n      }\n    };\n    var preserve = function (anchor, element, bubbles, placee, bounds) {\n      var layout = getPlacement(placee).map(lookupPreserveLayout).getOr(north);\n      return layout(anchor, element, bubbles, placee, bounds);\n    };\n    var lookupFlippedLayout = function (lastPlacement) {\n      switch (lastPlacement) {\n      case 'north':\n        return south;\n      case 'northeast':\n        return southeast;\n      case 'northwest':\n        return southwest;\n      case 'south':\n        return north;\n      case 'southeast':\n        return northeast;\n      case 'southwest':\n        return northwest;\n      case 'east':\n        return west;\n      case 'west':\n        return east;\n      }\n    };\n    var flip$2 = function (anchor, element, bubbles, placee, bounds) {\n      var layout = getPlacement(placee).map(lookupFlippedLayout).getOr(north);\n      return layout(anchor, element, bubbles, placee, bounds);\n    };\n\n    var global$f = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var factory$l = function (detail) {\n      var events = events$a(detail.action);\n      var tag = detail.dom.tag;\n      var lookupAttr = function (attr) {\n        return get$e(detail.dom, 'attributes').bind(function (attrs) {\n          return get$e(attrs, attr);\n        });\n      };\n      var getModAttributes = function () {\n        if (tag === 'button') {\n          var type = lookupAttr('type').getOr('button');\n          var roleAttrs = lookupAttr('role').map(function (role) {\n            return { role: role };\n          }).getOr({});\n          return __assign({ type: type }, roleAttrs);\n        } else {\n          var role = lookupAttr('role').getOr('button');\n          return { role: role };\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events,\n        behaviours: SketchBehaviours.augment(detail.buttonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          })\n        ]),\n        domModification: { attributes: getModAttributes() },\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Button = single({\n      name: 'Button',\n      factory: factory$l,\n      configFields: [\n        defaulted('uid', undefined),\n        required$1('dom'),\n        defaulted('components', []),\n        SketchBehaviours.field('buttonBehaviours', [\n          Focusing,\n          Keying\n        ]),\n        option('action'),\n        option('role'),\n        defaulted('eventOrder', {})\n      ]\n    });\n\n    var record = function (spec) {\n      var uid = isSketchSpec(spec) && hasNonNullableKey(spec, 'uid') ? spec.uid : generate$5('memento');\n      var get = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).getOrDie();\n      };\n      var getOpt = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).toOptional();\n      };\n      var asSpec = function () {\n        return __assign(__assign({}, spec), { uid: uid });\n      };\n      return {\n        get: get,\n        getOpt: getOpt,\n        asSpec: asSpec\n      };\n    };\n\n    var global$e = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var rtlTransform = {\n      'indent': true,\n      'outdent': true,\n      'table-insert-column-after': true,\n      'table-insert-column-before': true,\n      'paste-column-after': true,\n      'paste-column-before': true,\n      'unordered-list': true,\n      'list-bull-circle': true,\n      'list-bull-default': true,\n      'list-bull-square': true\n    };\n    var defaultIconName = 'temporary-placeholder';\n    var defaultIcon = function (icons) {\n      return function () {\n        return get$e(icons, defaultIconName).getOr('!not found!');\n      };\n    };\n    var getIconName = function (name, icons) {\n      var lcName = name.toLowerCase();\n      if (global$e.isRtl()) {\n        var rtlName = ensureTrailing(lcName, '-rtl');\n        return has$2(icons, rtlName) ? rtlName : lcName;\n      } else {\n        return lcName;\n      }\n    };\n    var lookupIcon = function (name, icons) {\n      return get$e(icons, getIconName(name, icons));\n    };\n    var get$1 = function (name, iconProvider) {\n      var icons = iconProvider();\n      return lookupIcon(name, icons).getOrThunk(defaultIcon(icons));\n    };\n    var getOr = function (name, iconProvider, fallbackIcon) {\n      var icons = iconProvider();\n      return lookupIcon(name, icons).or(fallbackIcon).getOrThunk(defaultIcon(icons));\n    };\n    var needsRtlTransform = function (iconName) {\n      return global$e.isRtl() ? has$2(rtlTransform, iconName) : false;\n    };\n    var addFocusableBehaviour = function () {\n      return config('add-focusable', [runOnAttached(function (comp) {\n          child(comp.element, 'svg').each(function (svg) {\n            return set$8(svg, 'focusable', 'false');\n          });\n        })]);\n    };\n    var renderIcon$2 = function (spec, iconName, icons, fallbackIcon) {\n      var _a, _b;\n      var rtlIconClasses = needsRtlTransform(iconName) ? ['tox-icon--flip'] : [];\n      var iconHtml = get$e(icons, getIconName(iconName, icons)).or(fallbackIcon).getOrThunk(defaultIcon(icons));\n      return {\n        dom: {\n          tag: spec.tag,\n          attributes: (_a = spec.attributes) !== null && _a !== void 0 ? _a : {},\n          classes: spec.classes.concat(rtlIconClasses),\n          innerHtml: iconHtml\n        },\n        behaviours: derive$1(__spreadArray(__spreadArray([], (_b = spec.behaviours) !== null && _b !== void 0 ? _b : [], true), [addFocusableBehaviour()], false))\n      };\n    };\n    var render$3 = function (iconName, spec, iconProvider, fallbackIcon) {\n      if (fallbackIcon === void 0) {\n        fallbackIcon = Optional.none();\n      }\n      return renderIcon$2(spec, iconName, iconProvider(), fallbackIcon);\n    };\n    var renderFirst = function (iconNames, spec, iconProvider) {\n      var icons = iconProvider();\n      var iconName = find$5(iconNames, function (name) {\n        return has$2(icons, getIconName(name, icons));\n      });\n      return renderIcon$2(spec, iconName.getOr(defaultIconName), icons, Optional.none());\n    };\n\n    var notificationIconMap = {\n      success: 'checkmark',\n      error: 'warning',\n      err: 'error',\n      warning: 'warning',\n      warn: 'warning',\n      info: 'info'\n    };\n    var factory$k = function (detail) {\n      var memBannerText = record({\n        dom: {\n          tag: 'p',\n          innerHtml: detail.translationProvider(detail.text)\n        },\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var renderPercentBar = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-bar'],\n            attributes: { style: 'width: ' + percent + '%' }\n          }\n        };\n      };\n      var renderPercentText = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-text'],\n            innerHtml: percent + '%'\n          }\n        };\n      };\n      var memBannerProgress = record({\n        dom: {\n          tag: 'div',\n          classes: detail.progress ? [\n            'tox-progress-bar',\n            'tox-progress-indicator'\n          ] : ['tox-progress-bar']\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-bar-container']\n            },\n            components: [renderPercentBar(0)]\n          },\n          renderPercentText(0)\n        ],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var updateProgress = function (comp, percent) {\n        if (comp.getSystem().isConnected()) {\n          memBannerProgress.getOpt(comp).each(function (progress) {\n            Replacing.set(progress, [\n              {\n                dom: {\n                  tag: 'div',\n                  classes: ['tox-bar-container']\n                },\n                components: [renderPercentBar(percent)]\n              },\n              renderPercentText(percent)\n            ]);\n          });\n        }\n      };\n      var updateText = function (comp, text) {\n        if (comp.getSystem().isConnected()) {\n          var banner = memBannerText.get(comp);\n          Replacing.set(banner, [text$1(text)]);\n        }\n      };\n      var apis = {\n        updateProgress: updateProgress,\n        updateText: updateText\n      };\n      var iconChoices = flatten([\n        detail.icon.toArray(),\n        detail.level.toArray(),\n        detail.level.bind(function (level) {\n          return Optional.from(notificationIconMap[level]);\n        }).toArray()\n      ]);\n      var memButton = record(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-notification__dismiss',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ]\n        },\n        components: [render$3('close', {\n            tag: 'div',\n            classes: ['tox-icon'],\n            attributes: { 'aria-label': detail.translationProvider('Close') }\n          }, detail.iconProvider)],\n        action: function (comp) {\n          detail.onAction(comp);\n        }\n      }));\n      var notificationIconSpec = renderFirst(iconChoices, {\n        tag: 'div',\n        classes: ['tox-notification__icon']\n      }, detail.iconProvider);\n      var notificationBodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-notification__body']\n        },\n        components: [memBannerText.asSpec()],\n        behaviours: derive$1([Replacing.config({})])\n      };\n      var components = [\n        notificationIconSpec,\n        notificationBodySpec\n      ];\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: detail.level.map(function (level) {\n            return [\n              'tox-notification',\n              'tox-notification--in',\n              'tox-notification--' + level\n            ];\n          }).getOr([\n            'tox-notification',\n            'tox-notification--in'\n          ])\n        },\n        behaviours: derive$1([\n          Focusing.config({}),\n          config('notification-events', [run$1(focusin(), function (comp) {\n              memButton.getOpt(comp).each(Focusing.focus);\n            })])\n        ]),\n        components: components.concat(detail.progress ? [memBannerProgress.asSpec()] : []).concat(!detail.closeButton ? [] : [memButton.asSpec()]),\n        apis: apis\n      };\n    };\n    var Notification = single({\n      name: 'Notification',\n      factory: factory$k,\n      configFields: [\n        option('level'),\n        required$1('progress'),\n        required$1('icon'),\n        required$1('onAction'),\n        required$1('text'),\n        required$1('iconProvider'),\n        required$1('translationProvider'),\n        defaultedBoolean('closeButton', true)\n      ],\n      apis: {\n        updateProgress: function (apis, comp, percent) {\n          apis.updateProgress(comp, percent);\n        },\n        updateText: function (apis, comp, text) {\n          apis.updateText(comp, text);\n        }\n      }\n    });\n\n    function NotificationManagerImpl (editor, extras, uiMothership) {\n      var sharedBackstage = extras.backstage.shared;\n      var getLayoutDirection = function (rel) {\n        switch (rel) {\n        case 'bc-bc':\n          return south;\n        case 'tc-tc':\n          return north;\n        case 'tc-bc':\n          return north$2;\n        case 'bc-tc':\n        default:\n          return south$2;\n        }\n      };\n      var reposition = function (notifications) {\n        if (notifications.length > 0) {\n          each$1(notifications, function (notification, index) {\n            if (index === 0) {\n              notification.moveRel(null, 'banner');\n            } else {\n              notification.moveRel(notifications[index - 1].getEl(), 'bc-tc');\n            }\n          });\n        }\n      };\n      var open = function (settings, closeCallback) {\n        var hideCloseButton = !settings.closeButton && settings.timeout && (settings.timeout > 0 || settings.timeout < 0);\n        var close = function () {\n          closeCallback();\n          InlineView.hide(notificationWrapper);\n        };\n        var notification = build$1(Notification.sketch({\n          text: settings.text,\n          level: contains$2([\n            'success',\n            'error',\n            'warning',\n            'warn',\n            'info'\n          ], settings.type) ? settings.type : undefined,\n          progress: settings.progressBar === true,\n          icon: Optional.from(settings.icon),\n          closeButton: !hideCloseButton,\n          onAction: close,\n          iconProvider: sharedBackstage.providers.icons,\n          translationProvider: sharedBackstage.providers.translate\n        }));\n        var notificationWrapper = build$1(InlineView.sketch(__assign({\n          dom: {\n            tag: 'div',\n            classes: ['tox-notifications-container']\n          },\n          lazySink: sharedBackstage.getSink,\n          fireDismissalEventInstead: {}\n        }, sharedBackstage.header.isPositionedAtTop() ? {} : { fireRepositionEventInstead: {} })));\n        uiMothership.add(notificationWrapper);\n        if (settings.timeout > 0) {\n          global$f.setTimeout(function () {\n            close();\n          }, settings.timeout);\n        }\n        var getBounds = function () {\n          var contentArea = box$1(SugarElement.fromDom(editor.getContentAreaContainer()));\n          var win$1 = win();\n          var x = clamp$1(win$1.x, contentArea.x, contentArea.right);\n          var y = clamp$1(win$1.y, contentArea.y, contentArea.bottom);\n          var right = Math.max(contentArea.right, win$1.right);\n          var bottom = Math.max(contentArea.bottom, win$1.bottom);\n          return Optional.some(bounds(x, y, right - x, bottom - y));\n        };\n        return {\n          close: close,\n          moveTo: function (x, y) {\n            InlineView.showAt(notificationWrapper, premade(notification), {\n              anchor: {\n                type: 'makeshift',\n                x: x,\n                y: y\n              }\n            });\n          },\n          moveRel: function (element, rel) {\n            var notificationSpec = premade(notification);\n            var anchorOverrides = { maxHeightFunction: expandable$1() };\n            if (rel !== 'banner' && isNonNullable(element)) {\n              var layoutDirection_1 = getLayoutDirection(rel);\n              var nodeAnchor = {\n                type: 'node',\n                root: body(),\n                node: Optional.some(SugarElement.fromDom(element)),\n                overrides: anchorOverrides,\n                layouts: {\n                  onRtl: function () {\n                    return [layoutDirection_1];\n                  },\n                  onLtr: function () {\n                    return [layoutDirection_1];\n                  }\n                }\n              };\n              InlineView.showWithinBounds(notificationWrapper, notificationSpec, { anchor: nodeAnchor }, getBounds);\n            } else {\n              var anchor = __assign(__assign({}, sharedBackstage.anchors.banner()), { overrides: anchorOverrides });\n              InlineView.showWithinBounds(notificationWrapper, notificationSpec, { anchor: anchor }, getBounds);\n            }\n          },\n          text: function (nuText) {\n            Notification.updateText(notification, nuText);\n          },\n          settings: settings,\n          getEl: function () {\n            return notification.element.dom;\n          },\n          progressBar: {\n            value: function (percent) {\n              Notification.updateProgress(notification, percent);\n            }\n          }\n        };\n      };\n      var close = function (notification) {\n        notification.close();\n      };\n      var getArgs = function (notification) {\n        return notification.settings;\n      };\n      return {\n        open: open,\n        close: close,\n        reposition: reposition,\n        getArgs: getArgs\n      };\n    }\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (isNull(timer)) {\n          timer = setTimeout(function () {\n            timer = null;\n            fn.apply(null, args);\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        cancel();\n        timer = setTimeout(function () {\n          timer = null;\n          fn.apply(null, args);\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var global$d = tinymce.util.Tools.resolve('tinymce.dom.TextSeeker');\n\n    var isBoundary = function (dom, node) {\n      return dom.isBlock(node) || contains$2([\n        'BR',\n        'IMG',\n        'HR',\n        'INPUT'\n      ], node.nodeName) || dom.getContentEditable(node) === 'false';\n    };\n    var repeatLeft = function (dom, node, offset, process, rootNode) {\n      var search = global$d(dom, function (node) {\n        return isBoundary(dom, node);\n      });\n      return Optional.from(search.backwards(node, offset, process, rootNode));\n    };\n\n    var autocompleteSelector = '[data-mce-autocompleter]';\n    var create$5 = function (editor, range) {\n      return detect(SugarElement.fromDom(editor.selection.getNode())).getOrThunk(function () {\n        var wrapper = SugarElement.fromHtml('<span data-mce-autocompleter=\"1\" data-mce-bogus=\"1\"></span>', editor.getDoc());\n        append$2(wrapper, SugarElement.fromDom(range.extractContents()));\n        range.insertNode(wrapper.dom);\n        parent(wrapper).each(function (elm) {\n          return elm.dom.normalize();\n        });\n        last$1(wrapper).map(function (last) {\n          editor.selection.setCursorLocation(last.dom, getEnd(last));\n        });\n        return wrapper;\n      });\n    };\n    var detect = function (elm) {\n      return closest$1(elm, autocompleteSelector);\n    };\n\n    var isValidTextRange = function (rng) {\n      return rng.collapsed && rng.startContainer.nodeType === 3;\n    };\n    var getText = function (rng) {\n      return rng.toString().replace(/\\u00A0/g, ' ').replace(/\\uFEFF/g, '');\n    };\n    var isWhitespace = function (chr) {\n      return chr !== '' && ' \\xA0\\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    };\n\n    var stripTriggerChar = function (text, triggerCh) {\n      return text.substring(triggerCh.length);\n    };\n    var findChar = function (text, index, ch) {\n      var i;\n      for (i = index - 1; i >= 0; i--) {\n        var char = text.charAt(i);\n        if (isWhitespace(char)) {\n          return Optional.none();\n        }\n        if (char === ch) {\n          break;\n        }\n      }\n      return Optional.some(i);\n    };\n    var findStart = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      if (!isValidTextRange(initRange)) {\n        return Optional.none();\n      }\n      var findTriggerChIndex = function (element, offset, text) {\n        return findChar(text, offset, ch).getOr(offset);\n      };\n      var root = dom.getParent(initRange.startContainer, dom.isBlock) || dom.getRoot();\n      return repeatLeft(dom, initRange.startContainer, initRange.startOffset, findTriggerChIndex, root).bind(function (spot) {\n        var range = initRange.cloneRange();\n        range.setStart(spot.container, spot.offset);\n        range.setEnd(initRange.endContainer, initRange.endOffset);\n        if (range.collapsed) {\n          return Optional.none();\n        }\n        var text = getText(range);\n        var triggerCharIndex = text.lastIndexOf(ch);\n        if (triggerCharIndex !== 0 || stripTriggerChar(text, ch).length < minChars) {\n          return Optional.none();\n        } else {\n          return Optional.some({\n            text: stripTriggerChar(text, ch),\n            range: range,\n            triggerChar: ch\n          });\n        }\n      });\n    };\n    var getContext = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      return detect(SugarElement.fromDom(initRange.startContainer)).fold(function () {\n        return findStart(dom, initRange, ch, minChars);\n      }, function (elm) {\n        var range = dom.createRng();\n        range.selectNode(elm.dom);\n        var text = getText(range);\n        return Optional.some({\n          range: range,\n          text: stripTriggerChar(text, ch),\n          triggerChar: ch\n        });\n      });\n    };\n\n    var setup$e = function (api, editor) {\n      editor.on('keypress compositionend', api.onKeypress.throttle);\n      editor.on('remove', api.onKeypress.cancel);\n      var redirectKeyToItem = function (item, e) {\n        emitWith(item, keydown(), { raw: e });\n      };\n      editor.on('keydown', function (e) {\n        var getItem = function () {\n          return api.getView().bind(Highlighting.getHighlighted);\n        };\n        if (e.which === 8) {\n          api.onKeypress.throttle(e);\n        }\n        if (api.isActive()) {\n          if (e.which === 27) {\n            api.cancelIfNecessary();\n          }\n          if (api.isMenuOpen()) {\n            if (e.which === 13) {\n              getItem().each(emitExecute);\n              e.preventDefault();\n            } else if (e.which === 40) {\n              getItem().fold(function () {\n                api.getView().each(Highlighting.highlightFirst);\n              }, function (item) {\n                redirectKeyToItem(item, e);\n              });\n              e.preventDefault();\n              e.stopImmediatePropagation();\n            } else if (e.which === 37 || e.which === 38 || e.which === 39) {\n              getItem().each(function (item) {\n                redirectKeyToItem(item, e);\n                e.preventDefault();\n                e.stopImmediatePropagation();\n              });\n            }\n          } else {\n            if (e.which === 13 || e.which === 38 || e.which === 40) {\n              api.cancelIfNecessary();\n            }\n          }\n        }\n      });\n      editor.on('NodeChange', function (e) {\n        if (api.isActive() && !api.isProcessingAction() && detect(SugarElement.fromDom(e.element)).isNone()) {\n          api.cancelIfNecessary();\n        }\n      });\n    };\n    var AutocompleterEditorEvents = { setup: setup$e };\n\n    var global$c = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var point = function (container, offset) {\n      return {\n        container: container,\n        offset: offset\n      };\n    };\n\n    var isText = function (node) {\n      return node.nodeType === TEXT;\n    };\n    var isElement$1 = function (node) {\n      return node.nodeType === ELEMENT;\n    };\n    var toLast = function (node) {\n      if (isText(node)) {\n        return point(node, node.data.length);\n      } else {\n        var children = node.childNodes;\n        return children.length > 0 ? toLast(children[children.length - 1]) : point(node, children.length);\n      }\n    };\n    var toLeaf = function (node, offset) {\n      var children = node.childNodes;\n      if (children.length > 0 && offset < children.length) {\n        return toLeaf(children[offset], 0);\n      } else if (children.length > 0 && isElement$1(node) && children.length === offset) {\n        return toLast(children[children.length - 1]);\n      } else {\n        return point(node, offset);\n      }\n    };\n\n    var isPreviousCharContent = function (dom, leaf) {\n      return repeatLeft(dom, leaf.container, leaf.offset, function (element, offset) {\n        return offset === 0 ? -1 : offset;\n      }, dom.getRoot()).filter(function (spot) {\n        var char = spot.container.data.charAt(spot.offset - 1);\n        return !isWhitespace(char);\n      }).isSome();\n    };\n    var isStartOfWord = function (dom) {\n      return function (rng) {\n        var leaf = toLeaf(rng.startContainer, rng.startOffset);\n        return !isPreviousCharContent(dom, leaf);\n      };\n    };\n    var getTriggerContext = function (dom, initRange, database) {\n      return findMap(database.triggerChars, function (ch) {\n        return getContext(dom, initRange, ch);\n      });\n    };\n    var lookup$2 = function (editor, getDatabase) {\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      return getTriggerContext(editor.dom, rng, database).bind(function (context) {\n        return lookupWithContext(editor, getDatabase, context);\n      });\n    };\n    var lookupWithContext = function (editor, getDatabase, context, fetchOptions) {\n      if (fetchOptions === void 0) {\n        fetchOptions = {};\n      }\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      var startText = rng.startContainer.nodeValue;\n      var autocompleters = filter$2(database.lookupByChar(context.triggerChar), function (autocompleter) {\n        return context.text.length >= autocompleter.minChars && autocompleter.matches.getOrThunk(function () {\n          return isStartOfWord(editor.dom);\n        })(context.range, startText, context.text);\n      });\n      if (autocompleters.length === 0) {\n        return Optional.none();\n      }\n      var lookupData = global$c.all(map$2(autocompleters, function (ac) {\n        var fetchResult = ac.fetch(context.text, ac.maxResults, fetchOptions);\n        return fetchResult.then(function (results) {\n          return {\n            matchText: context.text,\n            items: results,\n            columns: ac.columns,\n            onAction: ac.onAction,\n            highlightOn: ac.highlightOn\n          };\n        });\n      }));\n      return Optional.some({\n        lookupData: lookupData,\n        context: context\n      });\n    };\n\n    var separatorMenuItemSchema = objOf([\n      requiredString('type'),\n      optionString('text')\n    ]);\n    var createSeparatorMenuItem = function (spec) {\n      return asRaw('separatormenuitem', separatorMenuItemSchema, spec);\n    };\n\n    var autocompleterItemSchema = objOf([\n      defaulted('type', 'autocompleteitem'),\n      defaulted('active', false),\n      defaulted('disabled', false),\n      defaulted('meta', {}),\n      requiredString('value'),\n      optionString('text'),\n      optionString('icon')\n    ]);\n    var autocompleterSchema = objOf([\n      requiredString('type'),\n      requiredString('ch'),\n      defaultedNumber('minChars', 1),\n      defaulted('columns', 1),\n      defaultedNumber('maxResults', 10),\n      optionFunction('matches'),\n      requiredFunction('fetch'),\n      requiredFunction('onAction'),\n      defaultedArrayOf('highlightOn', [], string)\n    ]);\n    var createSeparatorItem = function (spec) {\n      return asRaw('Autocompleter.Separator', separatorMenuItemSchema, spec);\n    };\n    var createAutocompleterItem = function (spec) {\n      return asRaw('Autocompleter.Item', autocompleterItemSchema, spec);\n    };\n    var createAutocompleter = function (spec) {\n      return asRaw('Autocompleter', autocompleterSchema, spec);\n    };\n\n    var baseToolbarButtonFields = [\n      defaultedBoolean('disabled', false),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n    var toolbarButtonSchema = objOf([\n      requiredString('type'),\n      requiredFunction('onAction')\n    ].concat(baseToolbarButtonFields));\n    var createToolbarButton = function (spec) {\n      return asRaw('toolbarbutton', toolbarButtonSchema, spec);\n    };\n\n    var baseToolbarToggleButtonFields = [defaultedBoolean('active', false)].concat(baseToolbarButtonFields);\n    var toggleButtonSchema = objOf(baseToolbarToggleButtonFields.concat([\n      requiredString('type'),\n      requiredFunction('onAction')\n    ]));\n    var createToggleButton = function (spec) {\n      return asRaw('ToggleButton', toggleButtonSchema, spec);\n    };\n\n    var contextBarFields = [\n      defaultedFunction('predicate', never),\n      defaultedStringEnum('scope', 'node', [\n        'node',\n        'editor'\n      ]),\n      defaultedStringEnum('position', 'selection', [\n        'node',\n        'selection',\n        'line'\n      ])\n    ];\n\n    var contextButtonFields = baseToolbarButtonFields.concat([\n      defaulted('type', 'contextformbutton'),\n      defaulted('primary', false),\n      requiredFunction('onAction'),\n      customField('original', identity$1)\n    ]);\n    var contextToggleButtonFields = baseToolbarToggleButtonFields.concat([\n      defaulted('type', 'contextformbutton'),\n      defaulted('primary', false),\n      requiredFunction('onAction'),\n      customField('original', identity$1)\n    ]);\n    var launchButtonFields = baseToolbarButtonFields.concat([defaulted('type', 'contextformbutton')]);\n    var launchToggleButtonFields = baseToolbarToggleButtonFields.concat([defaulted('type', 'contextformtogglebutton')]);\n    var toggleOrNormal = choose$1('type', {\n      contextformbutton: contextButtonFields,\n      contextformtogglebutton: contextToggleButtonFields\n    });\n    var contextFormSchema = objOf([\n      defaulted('type', 'contextform'),\n      defaultedFunction('initValue', constant$1('')),\n      optionString('label'),\n      requiredArrayOf('commands', toggleOrNormal),\n      optionOf('launch', choose$1('type', {\n        contextformbutton: launchButtonFields,\n        contextformtogglebutton: launchToggleButtonFields\n      }))\n    ].concat(contextBarFields));\n    var createContextForm = function (spec) {\n      return asRaw('ContextForm', contextFormSchema, spec);\n    };\n\n    var contextToolbarSchema = objOf([\n      defaulted('type', 'contexttoolbar'),\n      requiredString('items')\n    ].concat(contextBarFields));\n    var createContextToolbar = function (spec) {\n      return asRaw('ContextToolbar', contextToolbarSchema, spec);\n    };\n\n    var stringArray = function (a) {\n      var all = {};\n      each$1(a, function (key) {\n        all[key] = {};\n      });\n      return keys(all);\n    };\n\n    var register$b = function (editor) {\n      var popups = editor.ui.registry.getAll().popups;\n      var dataset = map$1(popups, function (popup) {\n        return createAutocompleter(popup).fold(function (err) {\n          throw new Error(formatError(err));\n        }, identity$1);\n      });\n      var triggerChars = stringArray(mapToArray(dataset, function (v) {\n        return v.ch;\n      }));\n      var datasetValues = values(dataset);\n      var lookupByChar = function (ch) {\n        return filter$2(datasetValues, function (dv) {\n          return dv.ch === ch;\n        });\n      };\n      return {\n        dataset: dataset,\n        triggerChars: triggerChars,\n        lookupByChar: lookupByChar\n      };\n    };\n\n    var ItemResponse;\n    (function (ItemResponse) {\n      ItemResponse[ItemResponse['CLOSE_ON_EXECUTE'] = 0] = 'CLOSE_ON_EXECUTE';\n      ItemResponse[ItemResponse['BUBBLE_TO_SANDBOX'] = 1] = 'BUBBLE_TO_SANDBOX';\n    }(ItemResponse || (ItemResponse = {})));\n    var ItemResponse$1 = ItemResponse;\n\n    var navClass = 'tox-menu-nav__js';\n    var selectableClass = 'tox-collection__item';\n    var colorClass = 'tox-swatch';\n    var presetClasses = {\n      normal: navClass,\n      color: colorClass\n    };\n    var tickedClass = 'tox-collection__item--enabled';\n    var groupHeadingClass = 'tox-collection__group-heading';\n    var iconClass = 'tox-collection__item-icon';\n    var textClass = 'tox-collection__item-label';\n    var accessoryClass = 'tox-collection__item-accessory';\n    var caretClass = 'tox-collection__item-caret';\n    var checkmarkClass = 'tox-collection__item-checkmark';\n    var activeClass = 'tox-collection__item--active';\n    var containerClass = 'tox-collection__item-container';\n    var containerColumnClass = 'tox-collection__item-container--column';\n    var containerRowClass = 'tox-collection__item-container--row';\n    var containerAlignRightClass = 'tox-collection__item-container--align-right';\n    var containerAlignLeftClass = 'tox-collection__item-container--align-left';\n    var containerValignTopClass = 'tox-collection__item-container--valign-top';\n    var containerValignMiddleClass = 'tox-collection__item-container--valign-middle';\n    var containerValignBottomClass = 'tox-collection__item-container--valign-bottom';\n    var classForPreset = function (presets) {\n      return get$e(presetClasses, presets).getOr(navClass);\n    };\n\n    var forMenu = function (presets) {\n      if (presets === 'color') {\n        return 'tox-swatches';\n      } else {\n        return 'tox-menu';\n      }\n    };\n    var classes = function (presets) {\n      return {\n        backgroundMenu: 'tox-background-menu',\n        selectedMenu: 'tox-selected-menu',\n        selectedItem: 'tox-collection__item--active',\n        hasIcons: 'tox-menu--has-icons',\n        menu: forMenu(presets),\n        tieredMenu: 'tox-tiered-menu'\n      };\n    };\n\n    var markers = function (presets) {\n      var menuClasses = classes(presets);\n      return {\n        backgroundMenu: menuClasses.backgroundMenu,\n        selectedMenu: menuClasses.selectedMenu,\n        menu: menuClasses.menu,\n        selectedItem: menuClasses.selectedItem,\n        item: classForPreset(presets)\n      };\n    };\n    var dom$1 = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      return {\n        tag: 'div',\n        classes: flatten([\n          [\n            menuClasses.menu,\n            'tox-menu-' + columns + '-column'\n          ],\n          hasIcons ? [menuClasses.hasIcons] : []\n        ])\n      };\n    };\n    var components = [Menu.parts.items({})];\n    var part = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      var d = {\n        tag: 'div',\n        classes: flatten([[menuClasses.tieredMenu]])\n      };\n      return {\n        dom: d,\n        markers: markers(presets)\n      };\n    };\n\n    var chunk = function (rowDom, numColumns) {\n      return function (items) {\n        var chunks = chunk$1(items, numColumns);\n        return map$2(chunks, function (c) {\n          return {\n            dom: rowDom,\n            components: c\n          };\n        });\n      };\n    };\n    var forSwatch = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-swatches-menu'\n          ]\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-swatches']\n            },\n            components: [Menu.parts.items({\n                preprocess: columns !== 'auto' ? chunk({\n                  tag: 'div',\n                  classes: ['tox-swatches__row']\n                }, columns) : identity$1\n              })]\n          }]\n      };\n    };\n    var forToolbar = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection',\n            'tox-collection--toolbar',\n            'tox-collection--toolbar-lg'\n          ]\n        },\n        components: [Menu.parts.items({\n            preprocess: chunk({\n              tag: 'div',\n              classes: ['tox-collection__group']\n            }, columns)\n          })]\n      };\n    };\n    var preprocessCollection = function (items, isSeparator) {\n      var allSplits = [];\n      var currentSplit = [];\n      each$1(items, function (item, i) {\n        if (isSeparator(item, i)) {\n          if (currentSplit.length > 0) {\n            allSplits.push(currentSplit);\n          }\n          currentSplit = [];\n          if (has$2(item.dom, 'innerHtml')) {\n            currentSplit.push(item);\n          }\n        } else {\n          currentSplit.push(item);\n        }\n      });\n      if (currentSplit.length > 0) {\n        allSplits.push(currentSplit);\n      }\n      return map$2(allSplits, function (s) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-collection__group']\n          },\n          components: s\n        };\n      });\n    };\n    var forCollection = function (columns, initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection'\n          ].concat(columns === 1 ? ['tox-collection--list'] : ['tox-collection--grid'])\n        },\n        components: [Menu.parts.items({\n            preprocess: function (items) {\n              if (columns !== 'auto' && columns > 1) {\n                return chunk({\n                  tag: 'div',\n                  classes: ['tox-collection__group']\n                }, columns)(items);\n              } else {\n                return preprocessCollection(items, function (_item, i) {\n                  return initItems[i].type === 'separator';\n                });\n              }\n            }\n          })]\n      };\n    };\n    var forHorizontalCollection = function (initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-collection',\n            'tox-collection--horizontal'\n          ]\n        },\n        components: [Menu.parts.items({\n            preprocess: function (items) {\n              return preprocessCollection(items, function (_item, i) {\n                return initItems[i].type === 'separator';\n              });\n            }\n          })]\n      };\n    };\n\n    var menuHasIcons = function (xs) {\n      return exists(xs, function (item) {\n        return 'icon' in item && item.icon !== undefined;\n      });\n    };\n    var handleError = function (error) {\n      console.error(formatError(error));\n      console.log(error);\n      return Optional.none();\n    };\n    var createHorizontalPartialMenuWithAlloyItems = function (value, _hasIcons, items, _columns, _presets) {\n      var structure = forHorizontalCollection(items);\n      return {\n        value: value,\n        dom: structure.dom,\n        components: structure.components,\n        items: items\n      };\n    };\n    var createPartialMenuWithAlloyItems = function (value, hasIcons, items, columns, presets) {\n      if (presets === 'color') {\n        var structure = forSwatch(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 'auto') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 1) {\n        var structure = forCollection(1, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'listpreview' && columns !== 'auto') {\n        var structure = forToolbar(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      return {\n        value: value,\n        dom: dom$1(hasIcons, columns, presets),\n        components: components,\n        items: items\n      };\n    };\n\n    var cardImageFields = [\n      requiredString('type'),\n      requiredString('src'),\n      optionString('alt'),\n      defaultedArrayOf('classes', [], string)\n    ];\n    var cardImageSchema = objOf(cardImageFields);\n\n    var cardTextFields = [\n      requiredString('type'),\n      requiredString('text'),\n      optionString('name'),\n      defaultedArrayOf('classes', ['tox-collection__item-label'], string)\n    ];\n    var cardTextSchema = objOf(cardTextFields);\n\n    var itemSchema$1 = valueThunk(function () {\n      return choose$2('type', {\n        cardimage: cardImageSchema,\n        cardtext: cardTextSchema,\n        cardcontainer: cardContainerSchema\n      });\n    });\n    var cardContainerSchema = objOf([\n      requiredString('type'),\n      defaultedString('direction', 'horizontal'),\n      defaultedString('align', 'left'),\n      defaultedString('valign', 'middle'),\n      requiredArrayOf('items', itemSchema$1)\n    ]);\n\n    var commonMenuItemFields = [\n      defaultedBoolean('disabled', false),\n      optionString('text'),\n      optionString('shortcut'),\n      field$1('value', 'value', defaultedThunk(function () {\n        return generate$6('menuitem-value');\n      }), anyValue()),\n      defaulted('meta', {})\n    ];\n\n    var cardMenuItemSchema = objOf([\n      requiredString('type'),\n      optionString('label'),\n      requiredArrayOf('items', itemSchema$1),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop)\n    ].concat(commonMenuItemFields));\n    var createCardMenuItem = function (spec) {\n      return asRaw('cardmenuitem', cardMenuItemSchema, spec);\n    };\n\n    var choiceMenuItemSchema = objOf([\n      requiredString('type'),\n      defaultedBoolean('active', false),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createChoiceMenuItem = function (spec) {\n      return asRaw('choicemenuitem', choiceMenuItemSchema, spec);\n    };\n\n    var baseFields = [\n      requiredString('type'),\n      requiredString('fancytype'),\n      defaultedFunction('onAction', noop)\n    ];\n    var insertTableFields = [defaulted('initData', {})].concat(baseFields);\n    var colorSwatchFields = [defaultedObjOf('initData', {}, [\n        defaultedBoolean('allowCustomColors', true),\n        optionArrayOf('colors', anyValue())\n      ])].concat(baseFields);\n    var fancyMenuItemSchema = choose$1('fancytype', {\n      inserttable: insertTableFields,\n      colorswatch: colorSwatchFields\n    });\n    var createFancyMenuItem = function (spec) {\n      return asRaw('fancymenuitem', fancyMenuItemSchema, spec);\n    };\n\n    var menuItemSchema = objOf([\n      requiredString('type'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createMenuItem = function (spec) {\n      return asRaw('menuitem', menuItemSchema, spec);\n    };\n\n    var nestedMenuItemSchema = objOf([\n      requiredString('type'),\n      requiredFunction('getSubmenuItems'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createNestedMenuItem = function (spec) {\n      return asRaw('nestedmenuitem', nestedMenuItemSchema, spec);\n    };\n\n    var toggleMenuItemSchema = objOf([\n      requiredString('type'),\n      optionString('icon'),\n      defaultedBoolean('active', false),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      requiredFunction('onAction')\n    ].concat(commonMenuItemFields));\n    var createToggleMenuItem = function (spec) {\n      return asRaw('togglemenuitem', toggleMenuItemSchema, spec);\n    };\n\n    var detectSize = function (comp, margin, selectorClass) {\n      var descendants$1 = descendants(comp.element, '.' + selectorClass);\n      if (descendants$1.length > 0) {\n        var columnLength = findIndex$1(descendants$1, function (c) {\n          var thisTop = c.dom.getBoundingClientRect().top;\n          var cTop = descendants$1[0].dom.getBoundingClientRect().top;\n          return Math.abs(thisTop - cTop) > margin;\n        }).getOr(descendants$1.length);\n        return Optional.some({\n          numColumns: columnLength,\n          numRows: Math.ceil(descendants$1.length / columnLength)\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var namedEvents = function (name, handlers) {\n      return derive$1([config(name, handlers)]);\n    };\n    var unnamedEvents = function (handlers) {\n      return namedEvents(generate$6('unnamed-events'), handlers);\n    };\n    var SimpleBehaviours = {\n      namedEvents: namedEvents,\n      unnamedEvents: unnamedEvents\n    };\n\n    var ExclusivityChannel = generate$6('tooltip.exclusive');\n    var ShowTooltipEvent = generate$6('tooltip.show');\n    var HideTooltipEvent = generate$6('tooltip.hide');\n\n    var hideAllExclusive = function (component, _tConfig, _tState) {\n      component.getSystem().broadcastOn([ExclusivityChannel], {});\n    };\n    var setComponents = function (component, tConfig, tState, specs) {\n      tState.getTooltip().each(function (tooltip) {\n        if (tooltip.getSystem().isConnected()) {\n          Replacing.set(tooltip, specs);\n        }\n      });\n    };\n\n    var TooltippingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        hideAllExclusive: hideAllExclusive,\n        setComponents: setComponents\n    });\n\n    var events$9 = function (tooltipConfig, state) {\n      var hide = function (comp) {\n        state.getTooltip().each(function (p) {\n          detach(p);\n          tooltipConfig.onHide(comp, p);\n          state.clearTooltip();\n        });\n        state.clearTimer();\n      };\n      var show = function (comp) {\n        if (!state.isShowing()) {\n          hideAllExclusive(comp);\n          var sink = tooltipConfig.lazySink(comp).getOrDie();\n          var popup = comp.getSystem().build({\n            dom: tooltipConfig.tooltipDom,\n            components: tooltipConfig.tooltipComponents,\n            events: derive$2(tooltipConfig.mode === 'normal' ? [\n              run$1(mouseover(), function (_) {\n                emit(comp, ShowTooltipEvent);\n              }),\n              run$1(mouseout(), function (_) {\n                emit(comp, HideTooltipEvent);\n              })\n            ] : []),\n            behaviours: derive$1([Replacing.config({})])\n          });\n          state.setTooltip(popup);\n          attach(sink, popup);\n          tooltipConfig.onShow(comp, popup);\n          Positioning.position(sink, popup, { anchor: tooltipConfig.anchor(comp) });\n        }\n      };\n      return derive$2(flatten([\n        [\n          run$1(ShowTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              show(comp);\n            }, tooltipConfig.delay);\n          }),\n          run$1(HideTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              hide(comp);\n            }, tooltipConfig.delay);\n          }),\n          run$1(receive(), function (comp, message) {\n            var receivingData = message;\n            if (!receivingData.universal) {\n              if (contains$2(receivingData.channels, ExclusivityChannel)) {\n                hide(comp);\n              }\n            }\n          }),\n          runOnDetached(function (comp) {\n            hide(comp);\n          })\n        ],\n        tooltipConfig.mode === 'normal' ? [\n          run$1(focusin(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run$1(postBlur(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          }),\n          run$1(mouseover(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run$1(mouseout(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ] : [\n          run$1(highlight$1(), function (comp, _se) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run$1(dehighlight$1(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ]\n      ]));\n    };\n\n    var ActiveTooltipping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$9\n    });\n\n    var TooltippingSchema = [\n      required$1('lazySink'),\n      required$1('tooltipDom'),\n      defaulted('exclusive', true),\n      defaulted('tooltipComponents', []),\n      defaulted('delay', 300),\n      defaultedStringEnum('mode', 'normal', [\n        'normal',\n        'follow-highlight'\n      ]),\n      defaulted('anchor', function (comp) {\n        return {\n          type: 'hotspot',\n          hotspot: comp,\n          layouts: {\n            onLtr: constant$1([\n              south$2,\n              north$2,\n              southeast$2,\n              northeast$2,\n              southwest$2,\n              northwest$2\n            ]),\n            onRtl: constant$1([\n              south$2,\n              north$2,\n              southeast$2,\n              northeast$2,\n              southwest$2,\n              northwest$2\n            ])\n          }\n        };\n      }),\n      onHandler('onHide'),\n      onHandler('onShow')\n    ];\n\n    var init$b = function () {\n      var timer = value$1();\n      var popup = value$1();\n      var clearTimer = function () {\n        timer.on(clearTimeout);\n      };\n      var resetTimer = function (f, delay) {\n        clearTimer();\n        timer.set(setTimeout(f, delay));\n      };\n      var readState = constant$1('not-implemented');\n      return nu$8({\n        getTooltip: popup.get,\n        isShowing: popup.isSet,\n        setTooltip: popup.set,\n        clearTooltip: popup.clear,\n        clearTimer: clearTimer,\n        resetTimer: resetTimer,\n        readState: readState\n      });\n    };\n\n    var TooltippingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$b\n    });\n\n    var Tooltipping = create$8({\n      fields: TooltippingSchema,\n      name: 'tooltipping',\n      active: ActiveTooltipping,\n      state: TooltippingState,\n      apis: TooltippingApis\n    });\n\n    var escape = function (text) {\n      return text.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var getSkinUrl = function (editor) {\n      var skin = editor.getParam('skin');\n      var skinUrl = editor.getParam('skin_url');\n      if (skin !== false) {\n        var skinName = skin ? skin : 'oxide';\n        if (skinUrl) {\n          skinUrl = editor.documentBaseURI.toAbsolute(skinUrl);\n        } else {\n          skinUrl = global$a.baseURL + '/skins/ui/' + skinName;\n        }\n      }\n      return skinUrl;\n    };\n    var isReadOnly = function (editor) {\n      return editor.getParam('readonly', false, 'boolean');\n    };\n    var isSkinDisabled = function (editor) {\n      return editor.getParam('skin') === false;\n    };\n    var getHeightSetting = function (editor) {\n      return editor.getParam('height', Math.max(editor.getElement().offsetHeight, 200));\n    };\n    var getWidthSetting = function (editor) {\n      return editor.getParam('width', global$b.DOM.getStyle(editor.getElement(), 'width'));\n    };\n    var getMinWidthSetting = function (editor) {\n      return Optional.from(editor.getParam('min_width')).filter(isNumber);\n    };\n    var getMinHeightSetting = function (editor) {\n      return Optional.from(editor.getParam('min_height')).filter(isNumber);\n    };\n    var getMaxWidthSetting = function (editor) {\n      return Optional.from(editor.getParam('max_width')).filter(isNumber);\n    };\n    var getMaxHeightSetting = function (editor) {\n      return Optional.from(editor.getParam('max_height')).filter(isNumber);\n    };\n    var getUserStyleFormats = function (editor) {\n      return Optional.from(editor.getParam('style_formats')).filter(isArray);\n    };\n    var isMergeStyleFormats = function (editor) {\n      return editor.getParam('style_formats_merge', false, 'boolean');\n    };\n    var getLineHeightFormats = function (editor) {\n      return editor.getParam('lineheight_formats', '1 1.1 1.2 1.3 1.4 1.5 2', 'string').split(' ');\n    };\n    var getContentLanguages = function (editor) {\n      return editor.getParam('content_langs', undefined, 'array');\n    };\n    var getRemovedMenuItems = function (editor) {\n      return editor.getParam('removed_menuitems', '');\n    };\n    var isMenubarEnabled = function (editor) {\n      return editor.getParam('menubar', true, 'boolean') !== false;\n    };\n    var isToolbarEnabled = function (editor) {\n      var toolbar = editor.getParam('toolbar', true);\n      var isToolbarTrue = toolbar === true;\n      var isToolbarString = isString(toolbar);\n      var isToolbarObjectArray = isArray(toolbar) && toolbar.length > 0;\n      return !isMultipleToolbars(editor) && (isToolbarObjectArray || isToolbarString || isToolbarTrue);\n    };\n    var getMultipleToolbarsSetting = function (editor) {\n      var toolbars = range$2(9, function (num) {\n        return editor.getParam('toolbar' + (num + 1), false, 'string');\n      });\n      var toolbarArray = filter$2(toolbars, function (toolbar) {\n        return typeof toolbar === 'string';\n      });\n      return toolbarArray.length > 0 ? Optional.some(toolbarArray) : Optional.none();\n    };\n    var isMultipleToolbars = function (editor) {\n      return getMultipleToolbarsSetting(editor).fold(function () {\n        var toolbar = editor.getParam('toolbar', [], 'string[]');\n        return toolbar.length > 0;\n      }, always);\n    };\n    var ToolbarMode;\n    (function (ToolbarMode) {\n      ToolbarMode['default'] = 'wrap';\n      ToolbarMode['floating'] = 'floating';\n      ToolbarMode['sliding'] = 'sliding';\n      ToolbarMode['scrolling'] = 'scrolling';\n    }(ToolbarMode || (ToolbarMode = {})));\n    var getToolbarMode = function (editor) {\n      return editor.getParam('toolbar_mode', '', 'string');\n    };\n    var ToolbarLocation;\n    (function (ToolbarLocation) {\n      ToolbarLocation['auto'] = 'auto';\n      ToolbarLocation['top'] = 'top';\n      ToolbarLocation['bottom'] = 'bottom';\n    }(ToolbarLocation || (ToolbarLocation = {})));\n    var getToolbarGroups = function (editor) {\n      return editor.getParam('toolbar_groups', {}, 'object');\n    };\n    var getToolbarLocation = function (editor) {\n      return editor.getParam('toolbar_location', ToolbarLocation.auto, 'string');\n    };\n    var isToolbarLocationBottom = function (editor) {\n      return getToolbarLocation(editor) === ToolbarLocation.bottom;\n    };\n    var fixedContainerSelector = function (editor) {\n      return editor.getParam('fixed_toolbar_container', '', 'string');\n    };\n    var fixedToolbarContainerTarget = function (editor) {\n      return editor.getParam('fixed_toolbar_container_target');\n    };\n    var isToolbarPersist = function (editor) {\n      return editor.getParam('toolbar_persist', false, 'boolean');\n    };\n    var fixedContainerTarget = function (editor) {\n      if (!editor.inline) {\n        return Optional.none();\n      }\n      var selector = fixedContainerSelector(editor);\n      if (selector.length > 0) {\n        return descendant(body(), selector);\n      }\n      var element = fixedToolbarContainerTarget(editor);\n      if (isNonNullable(element)) {\n        return Optional.some(SugarElement.fromDom(element));\n      }\n      return Optional.none();\n    };\n    var useFixedContainer = function (editor) {\n      return editor.inline && fixedContainerTarget(editor).isSome();\n    };\n    var getUiContainer = function (editor) {\n      var fixedContainer = fixedContainerTarget(editor);\n      return fixedContainer.getOrThunk(function () {\n        return getContentContainer(getRootNode(SugarElement.fromDom(editor.getElement())));\n      });\n    };\n    var isDistractionFree = function (editor) {\n      return editor.inline && !isMenubarEnabled(editor) && !isToolbarEnabled(editor) && !isMultipleToolbars(editor);\n    };\n    var isStickyToolbar = function (editor) {\n      var isStickyToolbar = editor.getParam('toolbar_sticky', false, 'boolean');\n      return (isStickyToolbar || editor.inline) && !useFixedContainer(editor) && !isDistractionFree(editor);\n    };\n    var getStickyToolbarOffset = function (editor) {\n      return editor.getParam('toolbar_sticky_offset', 0, 'number');\n    };\n    var isDraggableModal$1 = function (editor) {\n      return editor.getParam('draggable_modal', false, 'boolean');\n    };\n    var getMenus = function (editor) {\n      var menu = editor.getParam('menu');\n      if (menu) {\n        return map$1(menu, function (menu) {\n          return __assign(__assign({}, menu), { items: menu.items });\n        });\n      } else {\n        return {};\n      }\n    };\n    var getMenubar = function (editor) {\n      return editor.getParam('menubar');\n    };\n    var getToolbar = function (editor) {\n      return editor.getParam('toolbar', true);\n    };\n    var getFilePickerCallback = function (editor) {\n      return editor.getParam('file_picker_callback');\n    };\n    var getFilePickerTypes = function (editor) {\n      return editor.getParam('file_picker_types');\n    };\n    var getFileBrowserCallbackTypes = function (editor) {\n      return editor.getParam('file_browser_callback_types');\n    };\n    var noTypeaheadUrls = function (editor) {\n      return editor.getParam('typeahead_urls') === false;\n    };\n    var getAnchorTop = function (editor) {\n      return editor.getParam('anchor_top', '#top');\n    };\n    var getAnchorBottom = function (editor) {\n      return editor.getParam('anchor_bottom', '#bottom');\n    };\n    var getFilePickerValidatorHandler = function (editor) {\n      var handler = editor.getParam('file_picker_validator_handler', undefined, 'function');\n      if (handler === undefined) {\n        return editor.getParam('filepicker_validator_handler', undefined, 'function');\n      } else {\n        return handler;\n      }\n    };\n\n    var ReadOnlyChannel = 'silver.readonly';\n    var ReadOnlyDataSchema = objOf([requiredBoolean('readonly')]);\n    var broadcastReadonly = function (uiComponents, readonly) {\n      var outerContainer = uiComponents.outerContainer;\n      var target = outerContainer.element;\n      if (readonly) {\n        uiComponents.mothership.broadcastOn([dismissPopups()], { target: target });\n        uiComponents.uiMothership.broadcastOn([dismissPopups()], { target: target });\n      }\n      uiComponents.mothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n      uiComponents.uiMothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n    };\n    var setupReadonlyModeSwitch = function (editor, uiComponents) {\n      editor.on('init', function () {\n        if (editor.mode.isReadOnly()) {\n          broadcastReadonly(uiComponents, true);\n        }\n      });\n      editor.on('SwitchMode', function () {\n        return broadcastReadonly(uiComponents, editor.mode.isReadOnly());\n      });\n      if (isReadOnly(editor)) {\n        editor.setMode('readonly');\n      }\n    };\n    var receivingConfig = function () {\n      var _a;\n      return Receiving.config({\n        channels: (_a = {}, _a[ReadOnlyChannel] = {\n          schema: ReadOnlyDataSchema,\n          onReceive: function (comp, data) {\n            Disabling.set(comp, data.readonly);\n          }\n        }, _a)\n      });\n    };\n\n    var item = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-collection__item--state-disabled'\n      });\n    };\n    var button = function (disabled) {\n      return Disabling.config({ disabled: disabled });\n    };\n    var splitButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled'\n      });\n    };\n    var toolbarButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled',\n        useNative: false\n      });\n    };\n    var DisablingConfigs = {\n      item: item,\n      button: button,\n      splitButton: splitButton,\n      toolbarButton: toolbarButton\n    };\n\n    var runWithApi = function (info, comp) {\n      var api = info.getApi(comp);\n      return function (f) {\n        f(api);\n      };\n    };\n    var onControlAttached = function (info, editorOffCell) {\n      return runOnAttached(function (comp) {\n        var run = runWithApi(info, comp);\n        run(function (api) {\n          var onDestroy = info.onSetup(api);\n          if (isFunction(onDestroy)) {\n            editorOffCell.set(onDestroy);\n          }\n        });\n      });\n    };\n    var onControlDetached = function (getApi, editorOffCell) {\n      return runOnDetached(function (comp) {\n        return runWithApi(getApi, comp)(editorOffCell.get());\n      });\n    };\n\n    var _a$1;\n    var onMenuItemExecute = function (info, itemResponse) {\n      return runOnExecute$1(function (comp, simulatedEvent) {\n        runWithApi(info, comp)(info.onAction);\n        if (!info.triggersSubmenu && itemResponse === ItemResponse$1.CLOSE_ON_EXECUTE) {\n          emit(comp, sandboxClose());\n          simulatedEvent.stop();\n        }\n      });\n    };\n    var menuItemEventOrder = (_a$1 = {}, _a$1[execute$5()] = [\n      'disabling',\n      'alloy.base.behaviour',\n      'toggling',\n      'item-events'\n    ], _a$1);\n\n    var componentRenderPipeline = cat;\n    var renderCommonItem = function (spec, structure, itemResponse, providersbackstage) {\n      var editorOffCell = Cell(noop);\n      return {\n        type: 'item',\n        dom: structure.dom,\n        components: componentRenderPipeline(structure.optComponents),\n        data: spec.data,\n        eventOrder: menuItemEventOrder,\n        hasSubmenu: spec.triggersSubmenu,\n        itemBehaviours: derive$1([\n          config('item-events', [\n            onMenuItemExecute(spec, itemResponse),\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          DisablingConfigs.item(function () {\n            return spec.disabled || providersbackstage.isDisabled();\n          }),\n          receivingConfig(),\n          Replacing.config({})\n        ].concat(spec.itemBehaviours))\n      };\n    };\n    var buildData = function (source) {\n      return {\n        value: source.value,\n        meta: __assign({ text: source.text.getOr('') }, source.meta)\n      };\n    };\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var convertText = function (source) {\n      var mac = {\n        alt: '&#x2325;',\n        ctrl: '&#x2303;',\n        shift: '&#x21E7;',\n        meta: '&#x2318;',\n        access: '&#x2303;&#x2325;'\n      };\n      var other = {\n        meta: 'Ctrl',\n        access: 'Shift+Alt'\n      };\n      var replace = global$9.mac ? mac : other;\n      var shortcut = source.split('+');\n      var updated = map$2(shortcut, function (segment) {\n        var search = segment.toLowerCase().trim();\n        return has$2(replace, search) ? replace[search] : segment;\n      });\n      return global$9.mac ? updated.join('') : updated.join('+');\n    };\n\n    var renderIcon$1 = function (name, icons, classes) {\n      if (classes === void 0) {\n        classes = [iconClass];\n      }\n      return render$3(name, {\n        tag: 'div',\n        classes: classes\n      }, icons);\n    };\n    var renderText = function (text) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [text$1(global$e.translate(text))]\n      };\n    };\n    var renderHtml = function (html, classes) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: classes,\n          innerHtml: html\n        }\n      };\n    };\n    var renderStyledText = function (style, text) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [{\n            dom: {\n              tag: style.tag,\n              styles: style.styles\n            },\n            components: [text$1(global$e.translate(text))]\n          }]\n      };\n    };\n    var renderShortcut = function (shortcut) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [accessoryClass],\n          innerHtml: convertText(shortcut)\n        }\n      };\n    };\n    var renderCheckmark = function (icons) {\n      return renderIcon$1('checkmark', icons, [checkmarkClass]);\n    };\n    var renderSubmenuCaret = function (icons) {\n      return renderIcon$1('chevron-right', icons, [caretClass]);\n    };\n    var renderDownwardsCaret = function (icons) {\n      return renderIcon$1('chevron-down', icons, [caretClass]);\n    };\n    var renderContainer = function (container, components) {\n      var directionClass = container.direction === 'vertical' ? containerColumnClass : containerRowClass;\n      var alignClass = container.align === 'left' ? containerAlignLeftClass : containerAlignRightClass;\n      var getValignClass = function () {\n        switch (container.valign) {\n        case 'top':\n          return containerValignTopClass;\n        case 'middle':\n          return containerValignMiddleClass;\n        case 'bottom':\n          return containerValignBottomClass;\n        }\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            containerClass,\n            directionClass,\n            alignClass,\n            getValignClass()\n          ]\n        },\n        components: components\n      };\n    };\n    var renderImage = function (src, classes, alt) {\n      return {\n        dom: {\n          tag: 'img',\n          classes: classes,\n          attributes: {\n            src: src,\n            alt: alt.getOr('')\n          }\n        }\n      };\n    };\n\n    var renderColorStructure = function (item, providerBackstage, fallbackIcon) {\n      var colorPickerCommand = 'custom';\n      var removeColorCommand = 'remove';\n      var itemText = item.ariaLabel;\n      var itemValue = item.value;\n      var iconSvg = item.iconContent.map(function (name) {\n        return getOr(name, providerBackstage.icons, fallbackIcon);\n      });\n      var getDom = function () {\n        var common = colorClass;\n        var icon = iconSvg.getOr('');\n        var attributes = itemText.map(function (text) {\n          return { title: providerBackstage.translate(text) };\n        }).getOr({});\n        var baseDom = {\n          tag: 'div',\n          attributes: attributes,\n          classes: [common]\n        };\n        if (itemValue === colorPickerCommand) {\n          return __assign(__assign({}, baseDom), {\n            tag: 'button',\n            classes: __spreadArray(__spreadArray([], baseDom.classes, true), ['tox-swatches__picker-btn'], false),\n            innerHtml: icon\n          });\n        } else if (itemValue === removeColorCommand) {\n          return __assign(__assign({}, baseDom), {\n            classes: __spreadArray(__spreadArray([], baseDom.classes, true), ['tox-swatch--remove'], false),\n            innerHtml: icon\n          });\n        } else {\n          return __assign(__assign({}, baseDom), {\n            attributes: __assign(__assign({}, baseDom.attributes), { 'data-mce-color': itemValue }),\n            styles: { 'background-color': itemValue }\n          });\n        }\n      };\n      return {\n        dom: getDom(),\n        optComponents: []\n      };\n    };\n    var renderItemDomStructure = function (ariaLabel) {\n      var domTitle = ariaLabel.map(function (label) {\n        return { attributes: { title: global$e.translate(label) } };\n      }).getOr({});\n      return __assign({\n        tag: 'div',\n        classes: [\n          navClass,\n          selectableClass\n        ]\n      }, domTitle);\n    };\n    var renderNormalItemStructure = function (info, providersBackstage, renderIcons, fallbackIcon) {\n      var iconSpec = {\n        tag: 'div',\n        classes: [iconClass]\n      };\n      var renderIcon = function (iconName) {\n        return render$3(iconName, iconSpec, providersBackstage.icons, fallbackIcon);\n      };\n      var renderEmptyIcon = function () {\n        return Optional.some({ dom: iconSpec });\n      };\n      var leftIcon = renderIcons ? info.iconContent.map(renderIcon).orThunk(renderEmptyIcon) : Optional.none();\n      var checkmark = info.checkMark;\n      var textRender = Optional.from(info.meta).fold(function () {\n        return renderText;\n      }, function (meta) {\n        return has$2(meta, 'style') ? curry(renderStyledText, meta.style) : renderText;\n      });\n      var content = info.htmlContent.fold(function () {\n        return info.textContent.map(textRender);\n      }, function (html) {\n        return Optional.some(renderHtml(html, [textClass]));\n      });\n      var menuItem = {\n        dom: renderItemDomStructure(info.ariaLabel),\n        optComponents: [\n          leftIcon,\n          content,\n          info.shortcutContent.map(renderShortcut),\n          checkmark,\n          info.caret\n        ]\n      };\n      return menuItem;\n    };\n    var renderItemStructure = function (info, providersBackstage, renderIcons, fallbackIcon) {\n      if (fallbackIcon === void 0) {\n        fallbackIcon = Optional.none();\n      }\n      if (info.presets === 'color') {\n        return renderColorStructure(info, providersBackstage, fallbackIcon);\n      } else {\n        return renderNormalItemStructure(info, providersBackstage, renderIcons, fallbackIcon);\n      }\n    };\n\n    var tooltipBehaviour = function (meta, sharedBackstage) {\n      return get$e(meta, 'tooltipWorker').map(function (tooltipWorker) {\n        return [Tooltipping.config({\n            lazySink: sharedBackstage.getSink,\n            tooltipDom: {\n              tag: 'div',\n              classes: ['tox-tooltip-worker-container']\n            },\n            tooltipComponents: [],\n            anchor: function (comp) {\n              return {\n                type: 'submenu',\n                item: comp,\n                overrides: { maxHeightFunction: expandable$1 }\n              };\n            },\n            mode: 'follow-highlight',\n            onShow: function (component, _tooltip) {\n              tooltipWorker(function (elm) {\n                Tooltipping.setComponents(component, [external$2({ element: SugarElement.fromDom(elm) })]);\n              });\n            }\n          })];\n      }).getOr([]);\n    };\n    var encodeText = function (text) {\n      return global$b.DOM.encode(text);\n    };\n    var replaceText = function (text, matchText) {\n      var translated = global$e.translate(text);\n      var encoded = encodeText(translated);\n      if (matchText.length > 0) {\n        var escapedMatchRegex = new RegExp(escape(matchText), 'gi');\n        return encoded.replace(escapedMatchRegex, function (match) {\n          return '<span class=\"tox-autocompleter-highlight\">' + match + '</span>';\n        });\n      } else {\n        return encoded;\n      }\n    };\n    var renderAutocompleteItem = function (spec, matchText, useText, presets, onItemValueHandler, itemResponse, sharedBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: Optional.none(),\n        htmlContent: useText ? spec.text.map(function (text) {\n          return replaceText(text, matchText);\n        }) : Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: Optional.none(),\n        checkMark: Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, sharedBackstage.providers, renderIcons, spec.icon);\n      return renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: constant$1({}),\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value, spec.meta);\n        },\n        onSetup: constant$1(noop),\n        triggersSubmenu: false,\n        itemBehaviours: tooltipBehaviour(spec.meta, sharedBackstage)\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    var render$2 = function (items, extras) {\n      return map$2(items, function (item) {\n        switch (item.type) {\n        case 'cardcontainer':\n          return renderContainer(item, render$2(item.items, extras));\n        case 'cardimage':\n          return renderImage(item.src, item.classes, item.alt);\n        case 'cardtext':\n          var shouldHighlight = item.name.exists(function (name) {\n            return contains$2(extras.cardText.highlightOn, name);\n          });\n          var matchText = shouldHighlight ? Optional.from(extras.cardText.matchText).getOr('') : '';\n          return renderHtml(replaceText(item.text, matchText), item.classes);\n        }\n      });\n    };\n    var renderCardMenuItem = function (spec, itemResponse, sharedBackstage, extras) {\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            Disabling.set(component, state);\n            each$1(descendants(component.element, '*'), function (elm) {\n              component.getSystem().getByDom(elm).each(function (comp) {\n                if (comp.hasConfigured(Disabling)) {\n                  Disabling.set(comp, state);\n                }\n              });\n            });\n          }\n        };\n      };\n      var structure = {\n        dom: renderItemDomStructure(spec.label),\n        optComponents: [Optional.some({\n            dom: {\n              tag: 'div',\n              classes: [\n                containerClass,\n                containerRowClass\n              ]\n            },\n            components: render$2(spec.items, extras)\n          })]\n      };\n      return renderCommonItem({\n        data: buildData(__assign({ text: Optional.none() }, spec)),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: Optional.from(extras.itemBehaviours).getOr([])\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    var renderChoiceItem = function (spec, useText, presets, onItemValueHandler, isSelected, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: useText ? spec.text : Optional.none(),\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: useText ? spec.shortcut : Optional.none(),\n        checkMark: useText ? Optional.some(renderCheckmark(providersBackstage.icons)) : Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value);\n        },\n        onSetup: function (api) {\n          api.setActive(isSelected);\n          return noop;\n        },\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var parts$f = generate$3(owner$2(), parts$h());\n\n    var hexColour = function (value) {\n      return { value: value };\n    };\n    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    var longformRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n    var isHexString = function (hex) {\n      return shorthandRegex.test(hex) || longformRegex.test(hex);\n    };\n    var normalizeHex = function (hex) {\n      return removeLeading(hex, '#').toUpperCase();\n    };\n    var fromString$1 = function (hex) {\n      return isHexString(hex) ? Optional.some({ value: normalizeHex(hex) }) : Optional.none();\n    };\n    var getLongForm = function (hex) {\n      var hexString = hex.value.replace(shorthandRegex, function (m, r, g, b) {\n        return r + r + g + g + b + b;\n      });\n      return { value: hexString };\n    };\n    var extractValues = function (hex) {\n      var longForm = getLongForm(hex);\n      var splitForm = longformRegex.exec(longForm.value);\n      return splitForm === null ? [\n        'FFFFFF',\n        'FF',\n        'FF',\n        'FF'\n      ] : splitForm;\n    };\n    var toHex = function (component) {\n      var hex = component.toString(16);\n      return (hex.length === 1 ? '0' + hex : hex).toUpperCase();\n    };\n    var fromRgba = function (rgbaColour) {\n      var value = toHex(rgbaColour.red) + toHex(rgbaColour.green) + toHex(rgbaColour.blue);\n      return hexColour(value);\n    };\n\n    var min = Math.min;\n    var max = Math.max;\n    var round$1 = Math.round;\n    var rgbRegex = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/;\n    var rgbaRegex = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d?(?:\\.\\d+)?)\\)/;\n    var rgbaColour = function (red, green, blue, alpha) {\n      return {\n        red: red,\n        green: green,\n        blue: blue,\n        alpha: alpha\n      };\n    };\n    var isRgbaComponent = function (value) {\n      var num = parseInt(value, 10);\n      return num.toString() === value && num >= 0 && num <= 255;\n    };\n    var fromHsv = function (hsv) {\n      var r;\n      var g;\n      var b;\n      var hue = (hsv.hue || 0) % 360;\n      var saturation = hsv.saturation / 100;\n      var brightness = hsv.value / 100;\n      saturation = max(0, min(saturation, 1));\n      brightness = max(0, min(brightness, 1));\n      if (saturation === 0) {\n        r = g = b = round$1(255 * brightness);\n        return rgbaColour(r, g, b, 1);\n      }\n      var side = hue / 60;\n      var chroma = brightness * saturation;\n      var x = chroma * (1 - Math.abs(side % 2 - 1));\n      var match = brightness - chroma;\n      switch (Math.floor(side)) {\n      case 0:\n        r = chroma;\n        g = x;\n        b = 0;\n        break;\n      case 1:\n        r = x;\n        g = chroma;\n        b = 0;\n        break;\n      case 2:\n        r = 0;\n        g = chroma;\n        b = x;\n        break;\n      case 3:\n        r = 0;\n        g = x;\n        b = chroma;\n        break;\n      case 4:\n        r = x;\n        g = 0;\n        b = chroma;\n        break;\n      case 5:\n        r = chroma;\n        g = 0;\n        b = x;\n        break;\n      default:\n        r = g = b = 0;\n      }\n      r = round$1(255 * (r + match));\n      g = round$1(255 * (g + match));\n      b = round$1(255 * (b + match));\n      return rgbaColour(r, g, b, 1);\n    };\n    var fromHex = function (hexColour) {\n      var result = extractValues(hexColour);\n      var red = parseInt(result[1], 16);\n      var green = parseInt(result[2], 16);\n      var blue = parseInt(result[3], 16);\n      return rgbaColour(red, green, blue, 1);\n    };\n    var fromStringValues = function (red, green, blue, alpha) {\n      var r = parseInt(red, 10);\n      var g = parseInt(green, 10);\n      var b = parseInt(blue, 10);\n      var a = parseFloat(alpha);\n      return rgbaColour(r, g, b, a);\n    };\n    var fromString = function (rgbaString) {\n      if (rgbaString === 'transparent') {\n        return Optional.some(rgbaColour(0, 0, 0, 0));\n      }\n      var rgbMatch = rgbRegex.exec(rgbaString);\n      if (rgbMatch !== null) {\n        return Optional.some(fromStringValues(rgbMatch[1], rgbMatch[2], rgbMatch[3], '1'));\n      }\n      var rgbaMatch = rgbaRegex.exec(rgbaString);\n      if (rgbaMatch !== null) {\n        return Optional.some(fromStringValues(rgbaMatch[1], rgbaMatch[2], rgbaMatch[3], rgbaMatch[4]));\n      }\n      return Optional.none();\n    };\n    var toString = function (rgba) {\n      return 'rgba(' + rgba.red + ',' + rgba.green + ',' + rgba.blue + ',' + rgba.alpha + ')';\n    };\n    var red = rgbaColour(255, 0, 0, 1);\n\n    var fireSkinLoaded$1 = function (editor) {\n      return editor.fire('SkinLoaded');\n    };\n    var fireSkinLoadError$1 = function (editor, error) {\n      return editor.fire('SkinLoadError', error);\n    };\n    var fireResizeEditor = function (editor) {\n      return editor.fire('ResizeEditor');\n    };\n    var fireResizeContent = function (editor, e) {\n      return editor.fire('ResizeContent', e);\n    };\n    var fireScrollContent = function (editor, e) {\n      return editor.fire('ScrollContent', e);\n    };\n    var fireTextColorChange = function (editor, data) {\n      return editor.fire('TextColorChange', data);\n    };\n\n    var hsvColour = function (hue, saturation, value) {\n      return {\n        hue: hue,\n        saturation: saturation,\n        value: value\n      };\n    };\n    var fromRgb = function (rgbaColour) {\n      var h = 0;\n      var s = 0;\n      var v = 0;\n      var r = rgbaColour.red / 255;\n      var g = rgbaColour.green / 255;\n      var b = rgbaColour.blue / 255;\n      var minRGB = Math.min(r, Math.min(g, b));\n      var maxRGB = Math.max(r, Math.max(g, b));\n      if (minRGB === maxRGB) {\n        v = minRGB;\n        return hsvColour(0, 0, v * 100);\n      }\n      var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n      h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n      h = 60 * (h - d / (maxRGB - minRGB));\n      s = (maxRGB - minRGB) / maxRGB;\n      v = maxRGB;\n      return hsvColour(Math.round(h), Math.round(s * 100), Math.round(v * 100));\n    };\n\n    var hexToHsv = function (hex) {\n      return fromRgb(fromHex(hex));\n    };\n    var hsvToHex = function (hsv) {\n      return fromRgba(fromHsv(hsv));\n    };\n    var anyToHex = function (color) {\n      return fromString$1(color).orThunk(function () {\n        return fromString(color).map(fromRgba);\n      }).getOrThunk(function () {\n        var canvas = document.createElement('canvas');\n        canvas.height = 1;\n        canvas.width = 1;\n        var canvasContext = canvas.getContext('2d');\n        canvasContext.clearRect(0, 0, canvas.width, canvas.height);\n        canvasContext.fillStyle = '#FFFFFF';\n        canvasContext.fillStyle = color;\n        canvasContext.fillRect(0, 0, 1, 1);\n        var rgba = canvasContext.getImageData(0, 0, 1, 1).data;\n        var r = rgba[0];\n        var g = rgba[1];\n        var b = rgba[2];\n        var a = rgba[3];\n        return fromRgba(rgbaColour(r, g, b, a));\n      });\n    };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.util.LocalStorage');\n\n    var storageName = 'tinymce-custom-colors';\n    function ColorCache (max) {\n      if (max === void 0) {\n        max = 10;\n      }\n      var storageString = global$8.getItem(storageName);\n      var localstorage = isString(storageString) ? JSON.parse(storageString) : [];\n      var prune = function (list) {\n        var diff = max - list.length;\n        return diff < 0 ? list.slice(0, max) : list;\n      };\n      var cache = prune(localstorage);\n      var add = function (key) {\n        indexOf(cache, key).each(remove);\n        cache.unshift(key);\n        if (cache.length > max) {\n          cache.pop();\n        }\n        global$8.setItem(storageName, JSON.stringify(cache));\n      };\n      var remove = function (idx) {\n        cache.splice(idx, 1);\n      };\n      var state = function () {\n        return cache.slice(0);\n      };\n      return {\n        add: add,\n        state: state\n      };\n    }\n\n    var choiceItem = 'choiceitem';\n    var defaultColors = [\n      {\n        type: choiceItem,\n        text: 'Light Green',\n        value: '#BFEDD2'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Yellow',\n        value: '#FBEEB8'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Red',\n        value: '#F8CAC6'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Purple',\n        value: '#ECCAFA'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Blue',\n        value: '#C2E0F4'\n      },\n      {\n        type: choiceItem,\n        text: 'Green',\n        value: '#2DC26B'\n      },\n      {\n        type: choiceItem,\n        text: 'Yellow',\n        value: '#F1C40F'\n      },\n      {\n        type: choiceItem,\n        text: 'Red',\n        value: '#E03E2D'\n      },\n      {\n        type: choiceItem,\n        text: 'Purple',\n        value: '#B96AD9'\n      },\n      {\n        type: choiceItem,\n        text: 'Blue',\n        value: '#3598DB'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Turquoise',\n        value: '#169179'\n      },\n      {\n        type: choiceItem,\n        text: 'Orange',\n        value: '#E67E23'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Red',\n        value: '#BA372A'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Purple',\n        value: '#843FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Blue',\n        value: '#236FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Gray',\n        value: '#ECF0F1'\n      },\n      {\n        type: choiceItem,\n        text: 'Medium Gray',\n        value: '#CED4D9'\n      },\n      {\n        type: choiceItem,\n        text: 'Gray',\n        value: '#95A5A6'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Gray',\n        value: '#7E8C8D'\n      },\n      {\n        type: choiceItem,\n        text: 'Navy Blue',\n        value: '#34495E'\n      },\n      {\n        type: choiceItem,\n        text: 'Black',\n        value: '#000000'\n      },\n      {\n        type: choiceItem,\n        text: 'White',\n        value: '#ffffff'\n      }\n    ];\n    var colorCache = ColorCache(10);\n    var mapColors = function (colorMap) {\n      var colors = [];\n      for (var i = 0; i < colorMap.length; i += 2) {\n        colors.push({\n          text: colorMap[i + 1],\n          value: '#' + anyToHex(colorMap[i]).value,\n          type: 'choiceitem'\n        });\n      }\n      return colors;\n    };\n    var getColorCols$2 = function (editor, defaultCols) {\n      return editor.getParam('color_cols', defaultCols, 'number');\n    };\n    var hasCustomColors$1 = function (editor) {\n      return editor.getParam('custom_colors') !== false;\n    };\n    var getColorMap = function (editor) {\n      return editor.getParam('color_map');\n    };\n    var getColors$2 = function (editor) {\n      var unmapped = getColorMap(editor);\n      return unmapped !== undefined ? mapColors(unmapped) : defaultColors;\n    };\n    var getCurrentColors = function () {\n      return map$2(colorCache.state(), function (color) {\n        return {\n          type: choiceItem,\n          text: color,\n          value: color\n        };\n      });\n    };\n    var addColor = function (color) {\n      colorCache.add(color);\n    };\n\n    var fallbackColor = '#000000';\n    var getCurrentColor = function (editor, format) {\n      var color;\n      editor.dom.getParents(editor.selection.getStart(), function (elm) {\n        var value;\n        if (value = elm.style[format === 'forecolor' ? 'color' : 'background-color']) {\n          color = color ? color : value;\n        }\n      });\n      return Optional.from(color);\n    };\n    var applyFormat = function (editor, format, value) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.apply(format, { value: value });\n        editor.nodeChanged();\n      });\n    };\n    var removeFormat = function (editor, format) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.remove(format, { value: null }, null, true);\n        editor.nodeChanged();\n      });\n    };\n    var registerCommands = function (editor) {\n      editor.addCommand('mceApplyTextcolor', function (format, value) {\n        applyFormat(editor, format, value);\n      });\n      editor.addCommand('mceRemoveTextcolor', function (format) {\n        removeFormat(editor, format);\n      });\n    };\n    var calcCols = function (colors) {\n      return Math.max(5, Math.ceil(Math.sqrt(colors)));\n    };\n    var getColorCols$1 = function (editor) {\n      var colors = getColors$2(editor);\n      var defaultCols = calcCols(colors.length);\n      return getColorCols$2(editor, defaultCols);\n    };\n    var getAdditionalColors = function (hasCustom) {\n      var type = 'choiceitem';\n      var remove = {\n        type: type,\n        text: 'Remove color',\n        icon: 'color-swatch-remove-color',\n        value: 'remove'\n      };\n      var custom = {\n        type: type,\n        text: 'Custom color',\n        icon: 'color-picker',\n        value: 'custom'\n      };\n      return hasCustom ? [\n        remove,\n        custom\n      ] : [remove];\n    };\n    var applyColor = function (editor, format, value, onChoice) {\n      if (value === 'custom') {\n        var dialog = colorPickerDialog(editor);\n        dialog(function (colorOpt) {\n          colorOpt.each(function (color) {\n            addColor(color);\n            editor.execCommand('mceApplyTextcolor', format, color);\n            onChoice(color);\n          });\n        }, fallbackColor);\n      } else if (value === 'remove') {\n        onChoice('');\n        editor.execCommand('mceRemoveTextcolor', format);\n      } else {\n        onChoice(value);\n        editor.execCommand('mceApplyTextcolor', format, value);\n      }\n    };\n    var getColors$1 = function (colors, hasCustom) {\n      return colors.concat(getCurrentColors().concat(getAdditionalColors(hasCustom)));\n    };\n    var getFetch$1 = function (colors, hasCustom) {\n      return function (callback) {\n        callback(getColors$1(colors, hasCustom));\n      };\n    };\n    var setIconColor = function (splitButtonApi, name, newColor) {\n      var id = name === 'forecolor' ? 'tox-icon-text-color__color' : 'tox-icon-highlight-bg-color__color';\n      splitButtonApi.setIconFill(id, newColor);\n    };\n    var registerTextColorButton = function (editor, name, format, tooltip, lastColor) {\n      editor.ui.registry.addSplitButton(name, {\n        tooltip: tooltip,\n        presets: 'color',\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        select: function (value) {\n          var optCurrentRgb = getCurrentColor(editor, format);\n          return optCurrentRgb.bind(function (currentRgb) {\n            return fromString(currentRgb).map(function (rgba) {\n              var currentHex = fromRgba(rgba).value;\n              return contains$1(value.toLowerCase(), currentHex);\n            });\n          }).getOr(false);\n        },\n        columns: getColorCols$1(editor),\n        fetch: getFetch$1(getColors$2(editor), hasCustomColors$1(editor)),\n        onAction: function (_splitButtonApi) {\n          applyColor(editor, format, lastColor.get(), noop);\n        },\n        onItemAction: function (_splitButtonApi, value) {\n          applyColor(editor, format, value, function (newColor) {\n            lastColor.set(newColor);\n            fireTextColorChange(editor, {\n              name: name,\n              color: newColor\n            });\n          });\n        },\n        onSetup: function (splitButtonApi) {\n          setIconColor(splitButtonApi, name, lastColor.get());\n          var handler = function (e) {\n            if (e.name === name) {\n              setIconColor(splitButtonApi, e.name, e.color);\n            }\n          };\n          editor.on('TextColorChange', handler);\n          return function () {\n            editor.off('TextColorChange', handler);\n          };\n        }\n      });\n    };\n    var registerTextColorMenuItem = function (editor, name, format, text) {\n      editor.ui.registry.addNestedMenuItem(name, {\n        text: text,\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        getSubmenuItems: function () {\n          return [{\n              type: 'fancymenuitem',\n              fancytype: 'colorswatch',\n              onAction: function (data) {\n                applyColor(editor, format, data.value, noop);\n              }\n            }];\n        }\n      });\n    };\n    var colorPickerDialog = function (editor) {\n      return function (callback, value) {\n        var isValid = false;\n        var onSubmit = function (api) {\n          var data = api.getData();\n          var hex = data.colorpicker;\n          if (isValid) {\n            callback(Optional.from(hex));\n            api.close();\n          } else {\n            editor.windowManager.alert(editor.translate([\n              'Invalid hex color code: {0}',\n              hex\n            ]));\n          }\n        };\n        var onAction = function (_api, details) {\n          if (details.name === 'hex-valid') {\n            isValid = details.value;\n          }\n        };\n        var initialData = { colorpicker: value };\n        editor.windowManager.open({\n          title: 'Color Picker',\n          size: 'normal',\n          body: {\n            type: 'panel',\n            items: [{\n                type: 'colorpicker',\n                name: 'colorpicker',\n                label: 'Color'\n              }]\n          },\n          buttons: [\n            {\n              type: 'cancel',\n              name: 'cancel',\n              text: 'Cancel'\n            },\n            {\n              type: 'submit',\n              name: 'save',\n              text: 'Save',\n              primary: true\n            }\n          ],\n          initialData: initialData,\n          onAction: onAction,\n          onSubmit: onSubmit,\n          onClose: noop,\n          onCancel: function () {\n            callback(Optional.none());\n          }\n        });\n      };\n    };\n    var register$a = function (editor) {\n      registerCommands(editor);\n      var lastForeColor = Cell(fallbackColor);\n      var lastBackColor = Cell(fallbackColor);\n      registerTextColorButton(editor, 'forecolor', 'forecolor', 'Text color', lastForeColor);\n      registerTextColorButton(editor, 'backcolor', 'hilitecolor', 'Background color', lastBackColor);\n      registerTextColorMenuItem(editor, 'forecolor', 'forecolor', 'Text color');\n      registerTextColorMenuItem(editor, 'backcolor', 'hilitecolor', 'Background color');\n    };\n\n    var createPartialChoiceMenu = function (value, items, onItemValueHandler, columns, presets, itemResponse, select, providersBackstage) {\n      var hasIcons = menuHasIcons(items);\n      var presetItemTypes = presets !== 'color' ? 'normal' : 'color';\n      var alloyItems = createChoiceItems(items, onItemValueHandler, columns, presetItemTypes, itemResponse, select, providersBackstage);\n      return createPartialMenuWithAlloyItems(value, hasIcons, alloyItems, columns, presets);\n    };\n    var createChoiceItems = function (items, onItemValueHandler, columns, itemPresets, itemResponse, select, providersBackstage) {\n      return cat(map$2(items, function (item) {\n        if (item.type === 'choiceitem') {\n          return createChoiceMenuItem(item).fold(handleError, function (d) {\n            return Optional.some(renderChoiceItem(d, columns === 1, itemPresets, onItemValueHandler, select(item.value), itemResponse, providersBackstage, menuHasIcons(items)));\n          });\n        } else {\n          return Optional.none();\n        }\n      }));\n    };\n\n    var deriveMenuMovement = function (columns, presets) {\n      var menuMarkers = markers(presets);\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: true\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'grid',\n          selector: '.' + menuMarkers.item,\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        var rowClass = presets === 'color' ? 'tox-swatches__row' : 'tox-collection__group';\n        return {\n          mode: 'matrix',\n          rowSelector: '.' + rowClass\n        };\n      }\n    };\n    var deriveCollectionMovement = function (columns, presets) {\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: false,\n          selector: '.tox-collection__item'\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'flatgrid',\n          selector: '.' + 'tox-collection__item',\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        return {\n          mode: 'matrix',\n          selectors: {\n            row: presets === 'color' ? '.tox-swatches__row' : '.tox-collection__group',\n            cell: presets === 'color' ? '.' + colorClass : '.' + selectableClass\n          }\n        };\n      }\n    };\n\n    var renderColorSwatchItem = function (spec, backstage) {\n      var items = getColorItems(spec, backstage);\n      var columns = backstage.colorinput.getColorCols();\n      var presets = 'color';\n      var menuSpec = createPartialChoiceMenu(generate$6('menu-value'), items, function (value) {\n        spec.onAction({ value: value });\n      }, columns, presets, ItemResponse$1.CLOSE_ON_EXECUTE, never, backstage.shared.providers);\n      var widgetSpec = __assign(__assign({}, menuSpec), {\n        markers: markers(presets),\n        movement: deriveMenuMovement(columns, presets)\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$6('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$f.widget(Menu.sketch(widgetSpec))]\n      };\n    };\n    var getColorItems = function (spec, backstage) {\n      var useCustomColors = spec.initData.allowCustomColors && backstage.colorinput.hasCustomColors();\n      return spec.initData.colors.fold(function () {\n        return getColors$1(backstage.colorinput.getColors(), useCustomColors);\n      }, function (colors) {\n        return colors.concat(getAdditionalColors(useCustomColors));\n      });\n    };\n\n    var cellOverEvent = generate$6('cell-over');\n    var cellExecuteEvent = generate$6('cell-execute');\n    var makeCell = function (row, col, labelId) {\n      var _a;\n      var emitCellOver = function (c) {\n        return emitWith(c, cellOverEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var emitExecute = function (c) {\n        return emitWith(c, cellExecuteEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var onClick = function (c, se) {\n        se.stop();\n        emitExecute(c);\n      };\n      return build$1({\n        dom: {\n          tag: 'div',\n          attributes: (_a = { role: 'button' }, _a['aria-labelledby'] = labelId, _a)\n        },\n        behaviours: derive$1([\n          config('insert-table-picker-cell', [\n            run$1(mouseover(), Focusing.focus),\n            run$1(execute$5(), emitExecute),\n            run$1(click(), onClick),\n            run$1(tap(), onClick)\n          ]),\n          Toggling.config({\n            toggleClass: 'tox-insert-table-picker__selected',\n            toggleOnExecute: false\n          }),\n          Focusing.config({ onFocus: emitCellOver })\n        ])\n      });\n    };\n    var makeCells = function (labelId, numRows, numCols) {\n      var cells = [];\n      for (var i = 0; i < numRows; i++) {\n        var row = [];\n        for (var j = 0; j < numCols; j++) {\n          row.push(makeCell(i, j, labelId));\n        }\n        cells.push(row);\n      }\n      return cells;\n    };\n    var selectCells = function (cells, selectedRow, selectedColumn, numRows, numColumns) {\n      for (var i = 0; i < numRows; i++) {\n        for (var j = 0; j < numColumns; j++) {\n          Toggling.set(cells[i][j], i <= selectedRow && j <= selectedColumn);\n        }\n      }\n    };\n    var makeComponents = function (cells) {\n      return bind$3(cells, function (cellRow) {\n        return map$2(cellRow, premade);\n      });\n    };\n    var makeLabelText = function (row, col) {\n      return text$1(col + 'x' + row);\n    };\n    var renderInsertTableMenuItem = function (spec) {\n      var numRows = 10;\n      var numColumns = 10;\n      var sizeLabelId = generate$6('size-label');\n      var cells = makeCells(sizeLabelId, numRows, numColumns);\n      var emptyLabelText = makeLabelText(0, 0);\n      var memLabel = record({\n        dom: {\n          tag: 'span',\n          classes: ['tox-insert-table-picker__label'],\n          attributes: { id: sizeLabelId }\n        },\n        components: [emptyLabelText],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$6('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$f.widget({\n            dom: {\n              tag: 'div',\n              classes: ['tox-insert-table-picker']\n            },\n            components: makeComponents(cells).concat(memLabel.asSpec()),\n            behaviours: derive$1([\n              config('insert-table-picker', [\n                runOnAttached(function (c) {\n                  Replacing.set(memLabel.get(c), [emptyLabelText]);\n                }),\n                runWithTarget(cellOverEvent, function (c, t, e) {\n                  var _a = e.event, row = _a.row, col = _a.col;\n                  selectCells(cells, row, col, numRows, numColumns);\n                  Replacing.set(memLabel.get(c), [makeLabelText(row + 1, col + 1)]);\n                }),\n                runWithTarget(cellExecuteEvent, function (c, _, e) {\n                  var _a = e.event, row = _a.row, col = _a.col;\n                  spec.onAction({\n                    numRows: row + 1,\n                    numColumns: col + 1\n                  });\n                  emit(c, sandboxClose());\n                })\n              ]),\n              Keying.config({\n                initSize: {\n                  numRows: numRows,\n                  numColumns: numColumns\n                },\n                mode: 'flatgrid',\n                selector: '[role=\"button\"]'\n              })\n            ])\n          })]\n      };\n    };\n\n    var fancyMenuItems = {\n      inserttable: renderInsertTableMenuItem,\n      colorswatch: renderColorSwatchItem\n    };\n    var renderFancyMenuItem = function (spec, backstage) {\n      return get$e(fancyMenuItems, spec.fancytype).map(function (render) {\n        return render(spec, backstage);\n      });\n    };\n\n    var renderNestedItem = function (spec, itemResponse, providersBackstage, renderIcons, downwardsCaret) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      if (downwardsCaret === void 0) {\n        downwardsCaret = false;\n      }\n      var caret = downwardsCaret ? renderDownwardsCaret(providersBackstage.icons) : renderSubmenuCaret(providersBackstage.icons);\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.some(caret),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: noop,\n        onSetup: spec.onSetup,\n        triggersSubmenu: true,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    var renderNormalItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.none(),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    var renderSeparatorItem = function (spec) {\n      var innerHtml = spec.text.fold(function () {\n        return {};\n      }, function (text) {\n        return { innerHtml: text };\n      });\n      return {\n        type: 'separator',\n        dom: __assign({\n          tag: 'div',\n          classes: [\n            selectableClass,\n            groupHeadingClass\n          ]\n        }, innerHtml),\n        components: []\n      };\n    };\n\n    var renderToggleMenuItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        checkMark: Optional.some(renderCheckmark(providersBackstage.icons)),\n        caret: Optional.none(),\n        shortcutContent: spec.shortcut,\n        presets: 'normal',\n        meta: spec.meta\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var autocomplete = renderAutocompleteItem;\n    var separator$3 = renderSeparatorItem;\n    var normal = renderNormalItem;\n    var nested = renderNestedItem;\n    var toggle$1 = renderToggleMenuItem;\n    var fancy = renderFancyMenuItem;\n    var card = renderCardMenuItem;\n\n    var FocusMode;\n    (function (FocusMode) {\n      FocusMode[FocusMode['ContentFocus'] = 0] = 'ContentFocus';\n      FocusMode[FocusMode['UiFocus'] = 1] = 'UiFocus';\n    }(FocusMode || (FocusMode = {})));\n    var createMenuItemFromBridge = function (item, itemResponse, backstage, menuHasIcons, isHorizontalMenu) {\n      var providersBackstage = backstage.shared.providers;\n      var parseForHorizontalMenu = function (menuitem) {\n        return !isHorizontalMenu ? menuitem : __assign(__assign({}, menuitem), {\n          shortcut: Optional.none(),\n          icon: menuitem.text.isSome() ? Optional.none() : menuitem.icon\n        });\n      };\n      switch (item.type) {\n      case 'menuitem':\n        return createMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(normal(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'nestedmenuitem':\n        return createNestedMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(nested(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons, isHorizontalMenu));\n        });\n      case 'togglemenuitem':\n        return createToggleMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(toggle$1(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'separator':\n        return createSeparatorMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(separator$3(d));\n        });\n      case 'fancymenuitem':\n        return createFancyMenuItem(item).fold(handleError, function (d) {\n          return fancy(parseForHorizontalMenu(d), backstage);\n        });\n      default: {\n          console.error('Unknown item in general menu', item);\n          return Optional.none();\n        }\n      }\n    };\n    var createAutocompleteItems = function (items, matchText, onItemValueHandler, columns, itemResponse, sharedBackstage, highlightOn) {\n      var renderText = columns === 1;\n      var renderIcons = !renderText || menuHasIcons(items);\n      return cat(map$2(items, function (item) {\n        switch (item.type) {\n        case 'separator':\n          return createSeparatorItem(item).fold(handleError, function (d) {\n            return Optional.some(separator$3(d));\n          });\n        case 'cardmenuitem':\n          return createCardMenuItem(item).fold(handleError, function (d) {\n            return Optional.some(card(__assign(__assign({}, d), {\n              onAction: function (api) {\n                d.onAction(api);\n                onItemValueHandler(d.value, d.meta);\n              }\n            }), itemResponse, sharedBackstage, {\n              itemBehaviours: tooltipBehaviour(d.meta, sharedBackstage),\n              cardText: {\n                matchText: matchText,\n                highlightOn: highlightOn\n              }\n            }));\n          });\n        case 'autocompleteitem':\n        default:\n          return createAutocompleterItem(item).fold(handleError, function (d) {\n            return Optional.some(autocomplete(d, matchText, renderText, 'normal', onItemValueHandler, itemResponse, sharedBackstage, renderIcons));\n          });\n        }\n      }));\n    };\n    var createPartialMenu = function (value, items, itemResponse, backstage, isHorizontalMenu) {\n      var hasIcons = menuHasIcons(items);\n      var alloyItems = cat(map$2(items, function (item) {\n        var itemHasIcon = function (i) {\n          return isHorizontalMenu ? !has$2(i, 'text') : hasIcons;\n        };\n        var createItem = function (i) {\n          return createMenuItemFromBridge(i, itemResponse, backstage, itemHasIcon(i), isHorizontalMenu);\n        };\n        if (item.type === 'nestedmenuitem' && item.getSubmenuItems().length <= 0) {\n          return createItem(__assign(__assign({}, item), { disabled: true }));\n        } else {\n          return createItem(item);\n        }\n      }));\n      var createPartial = isHorizontalMenu ? createHorizontalPartialMenuWithAlloyItems : createPartialMenuWithAlloyItems;\n      return createPartial(value, hasIcons, alloyItems, 1, 'normal');\n    };\n    var createTieredDataFrom = function (partialMenu) {\n      return tieredMenu.singleData(partialMenu.value, partialMenu);\n    };\n    var createMenuFrom = function (partialMenu, columns, focusMode, presets) {\n      var focusManager = focusMode === FocusMode.ContentFocus ? highlights() : dom$2();\n      var movement = deriveMenuMovement(columns, presets);\n      var menuMarkers = markers(presets);\n      return {\n        dom: partialMenu.dom,\n        components: partialMenu.components,\n        items: partialMenu.items,\n        value: partialMenu.value,\n        markers: {\n          selectedItem: menuMarkers.selectedItem,\n          item: menuMarkers.item\n        },\n        movement: movement,\n        fakeFocus: focusMode === FocusMode.ContentFocus,\n        focusManager: focusManager,\n        menuBehaviours: SimpleBehaviours.unnamedEvents(columns !== 'auto' ? [] : [runOnAttached(function (comp, _se) {\n            detectSize(comp, 4, menuMarkers.item).each(function (_a) {\n              var numColumns = _a.numColumns, numRows = _a.numRows;\n              Keying.setGridSize(comp, numRows, numColumns);\n            });\n          })])\n      };\n    };\n\n    var register$9 = function (editor, sharedBackstage) {\n      var activeAutocompleter = value$1();\n      var processingAction = Cell(false);\n      var autocompleter = build$1(InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-autocompleter']\n        },\n        components: [],\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissAutocompleter', [run$1(dismissRequested(), function () {\n              return cancelIfNecessary();\n            })])]),\n        lazySink: sharedBackstage.getSink\n      }));\n      var isMenuOpen = function () {\n        return InlineView.isOpen(autocompleter);\n      };\n      var isActive = function () {\n        return activeAutocompleter.get().isSome();\n      };\n      var hideIfNecessary = function () {\n        if (isActive()) {\n          InlineView.hide(autocompleter);\n        }\n      };\n      var cancelIfNecessary = function () {\n        if (isActive()) {\n          var lastElement = activeAutocompleter.get().map(function (ac) {\n            return ac.element;\n          });\n          detect(lastElement.getOr(SugarElement.fromDom(editor.selection.getNode()))).each(unwrap);\n          hideIfNecessary();\n          activeAutocompleter.clear();\n          processingAction.set(false);\n        }\n      };\n      var getAutocompleters = cached(function () {\n        return register$b(editor);\n      });\n      var getCombinedItems = function (triggerChar, matches) {\n        var columns = findMap(matches, function (m) {\n          return Optional.from(m.columns);\n        }).getOr(1);\n        return bind$3(matches, function (match) {\n          var choices = match.items;\n          return createAutocompleteItems(choices, match.matchText, function (itemValue, itemMeta) {\n            var nr = editor.selection.getRng();\n            getContext(editor.dom, nr, triggerChar).fold(function () {\n              return console.error('Lost context. Cursor probably moved');\n            }, function (_a) {\n              var range = _a.range;\n              var autocompleterApi = {\n                hide: function () {\n                  cancelIfNecessary();\n                },\n                reload: function (fetchOptions) {\n                  hideIfNecessary();\n                  load(fetchOptions);\n                }\n              };\n              processingAction.set(true);\n              match.onAction(autocompleterApi, range, itemValue, itemMeta);\n              processingAction.set(false);\n            });\n          }, columns, ItemResponse$1.BUBBLE_TO_SANDBOX, sharedBackstage, match.highlightOn);\n        });\n      };\n      var commenceIfNecessary = function (context) {\n        if (!isActive()) {\n          var wrapper = create$5(editor, context.range);\n          activeAutocompleter.set({\n            triggerChar: context.triggerChar,\n            element: wrapper,\n            matchLength: context.text.length\n          });\n          processingAction.set(false);\n        }\n      };\n      var display = function (ac, context, lookupData, items) {\n        ac.matchLength = context.text.length;\n        var columns = findMap(lookupData, function (ld) {\n          return Optional.from(ld.columns);\n        }).getOr(1);\n        InlineView.showAt(autocompleter, Menu.sketch(createMenuFrom(createPartialMenuWithAlloyItems('autocompleter-value', true, items, columns, 'normal'), columns, FocusMode.ContentFocus, 'normal')), {\n          anchor: {\n            type: 'node',\n            root: SugarElement.fromDom(editor.getBody()),\n            node: Optional.from(ac.element)\n          }\n        });\n        InlineView.getContent(autocompleter).each(Highlighting.highlightFirst);\n      };\n      var doLookup = function (fetchOptions) {\n        return activeAutocompleter.get().map(function (ac) {\n          return getContext(editor.dom, editor.selection.getRng(), ac.triggerChar).bind(function (newContext) {\n            return lookupWithContext(editor, getAutocompleters, newContext, fetchOptions);\n          });\n        }).getOrThunk(function () {\n          return lookup$2(editor, getAutocompleters);\n        });\n      };\n      var load = function (fetchOptions) {\n        doLookup(fetchOptions).fold(cancelIfNecessary, function (lookupInfo) {\n          commenceIfNecessary(lookupInfo.context);\n          lookupInfo.lookupData.then(function (lookupData) {\n            activeAutocompleter.get().map(function (ac) {\n              var context = lookupInfo.context;\n              if (ac.triggerChar === context.triggerChar) {\n                var combinedItems = getCombinedItems(context.triggerChar, lookupData);\n                if (combinedItems.length > 0) {\n                  display(ac, context, lookupData, combinedItems);\n                } else if (context.text.length - ac.matchLength >= 10) {\n                  cancelIfNecessary();\n                } else {\n                  hideIfNecessary();\n                }\n              }\n            });\n          });\n        });\n      };\n      var onKeypress = last(function (e) {\n        if (e.which === 27) {\n          return;\n        }\n        load();\n      }, 50);\n      var autocompleterUiApi = {\n        onKeypress: onKeypress,\n        cancelIfNecessary: cancelIfNecessary,\n        isMenuOpen: isMenuOpen,\n        isActive: isActive,\n        isProcessingAction: processingAction.get,\n        getView: function () {\n          return InlineView.getContent(autocompleter);\n        }\n      };\n      if (editor.hasPlugin('rtc') === false) {\n        AutocompleterEditorEvents.setup(autocompleterUiApi, editor);\n      }\n    };\n    var Autocompleter = { register: register$9 };\n\n    var closest = function (scope, selector, isRoot) {\n      return closest$1(scope, selector, isRoot).isSome();\n    };\n\n    var DelayedFunction = function (fun, delay) {\n      var ref = null;\n      var schedule = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        ref = setTimeout(function () {\n          fun.apply(null, args);\n          ref = null;\n        }, delay);\n      };\n      var cancel = function () {\n        if (ref !== null) {\n          clearTimeout(ref);\n          ref = null;\n        }\n      };\n      return {\n        cancel: cancel,\n        schedule: schedule\n      };\n    };\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      var raw = event.raw;\n      if (raw.touches === undefined || raw.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(raw.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x);\n      var distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var monitor = function (settings) {\n      var startData = value$1();\n      var longpressFired = Cell(false);\n      var longpress$1 = DelayedFunction(function (event) {\n        settings.triggerEvent(longpress(), event);\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      var handleTouchstart = function (event) {\n        getTouch(event).each(function (touch) {\n          longpress$1.cancel();\n          var data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: event.target\n          };\n          longpress$1.schedule(event);\n          longpressFired.set(false);\n          startData.set(data);\n        });\n        return Optional.none();\n      };\n      var handleTouchmove = function (event) {\n        longpress$1.cancel();\n        getTouch(event).each(function (touch) {\n          startData.on(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.clear();\n            }\n          });\n        });\n        return Optional.none();\n      };\n      var handleTouchend = function (event) {\n        longpress$1.cancel();\n        var isSame = function (data) {\n          return eq(data.target, event.target);\n        };\n        return startData.get().filter(isSame).map(function (_data) {\n          if (longpressFired.get()) {\n            event.prevent();\n            return false;\n          } else {\n            return settings.triggerEvent(tap(), event);\n          }\n        });\n      };\n      var handlers = wrapAll([\n        {\n          key: touchstart(),\n          value: handleTouchstart\n        },\n        {\n          key: touchmove(),\n          value: handleTouchmove\n        },\n        {\n          key: touchend(),\n          value: handleTouchend\n        }\n      ]);\n      var fireIfReady = function (event, type) {\n        return get$e(handlers, type).bind(function (handler) {\n          return handler(event);\n        });\n      };\n      return { fireIfReady: fireIfReady };\n    };\n\n    var isDangerous = function (event) {\n      var keyEv = event.raw;\n      return keyEv.which === BACKSPACE[0] && !contains$2([\n        'input',\n        'textarea'\n      ], name$2(event.target)) && !closest(event.target, '[contenteditable=\"true\"]');\n    };\n    var isFirefox = function () {\n      return detect$1().browser.isFirefox();\n    };\n    var bindFocus = function (container, handler) {\n      if (isFirefox()) {\n        return capture(container, 'focus', handler);\n      } else {\n        return bind(container, 'focusin', handler);\n      }\n    };\n    var bindBlur = function (container, handler) {\n      if (isFirefox()) {\n        return capture(container, 'blur', handler);\n      } else {\n        return bind(container, 'focusout', handler);\n      }\n    };\n    var setup$d = function (container, rawSettings) {\n      var settings = __assign({ stopBackspace: true }, rawSettings);\n      var pointerEvents = [\n        'touchstart',\n        'touchmove',\n        'touchend',\n        'touchcancel',\n        'gesturestart',\n        'mousedown',\n        'mouseup',\n        'mouseover',\n        'mousemove',\n        'mouseout',\n        'click'\n      ];\n      var tapEvent = monitor(settings);\n      var simpleEvents = map$2(pointerEvents.concat([\n        'selectstart',\n        'input',\n        'contextmenu',\n        'change',\n        'transitionend',\n        'transitioncancel',\n        'drag',\n        'dragstart',\n        'dragend',\n        'dragenter',\n        'dragleave',\n        'dragover',\n        'drop',\n        'keyup'\n      ]), function (type) {\n        return bind(container, type, function (event) {\n          tapEvent.fireIfReady(event, type).each(function (tapStopped) {\n            if (tapStopped) {\n              event.kill();\n            }\n          });\n          var stopped = settings.triggerEvent(type, event);\n          if (stopped) {\n            event.kill();\n          }\n        });\n      });\n      var pasteTimeout = value$1();\n      var onPaste = bind(container, 'paste', function (event) {\n        tapEvent.fireIfReady(event, 'paste').each(function (tapStopped) {\n          if (tapStopped) {\n            event.kill();\n          }\n        });\n        var stopped = settings.triggerEvent('paste', event);\n        if (stopped) {\n          event.kill();\n        }\n        pasteTimeout.set(setTimeout(function () {\n          settings.triggerEvent(postPaste(), event);\n        }, 0));\n      });\n      var onKeydown = bind(container, 'keydown', function (event) {\n        var stopped = settings.triggerEvent('keydown', event);\n        if (stopped) {\n          event.kill();\n        } else if (settings.stopBackspace && isDangerous(event)) {\n          event.prevent();\n        }\n      });\n      var onFocusIn = bindFocus(container, function (event) {\n        var stopped = settings.triggerEvent('focusin', event);\n        if (stopped) {\n          event.kill();\n        }\n      });\n      var focusoutTimeout = value$1();\n      var onFocusOut = bindBlur(container, function (event) {\n        var stopped = settings.triggerEvent('focusout', event);\n        if (stopped) {\n          event.kill();\n        }\n        focusoutTimeout.set(setTimeout(function () {\n          settings.triggerEvent(postBlur(), event);\n        }, 0));\n      });\n      var unbind = function () {\n        each$1(simpleEvents, function (e) {\n          e.unbind();\n        });\n        onKeydown.unbind();\n        onFocusIn.unbind();\n        onFocusOut.unbind();\n        onPaste.unbind();\n        pasteTimeout.on(clearTimeout);\n        focusoutTimeout.on(clearTimeout);\n      };\n      return { unbind: unbind };\n    };\n\n    var derive = function (rawEvent, rawTarget) {\n      var source = get$e(rawEvent, 'target').getOr(rawTarget);\n      return Cell(source);\n    };\n\n    var fromSource = function (event, source) {\n      var stopper = Cell(false);\n      var cutter = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      var cut = function () {\n        cutter.set(true);\n      };\n      return {\n        stop: stop,\n        cut: cut,\n        isStopped: stopper.get,\n        isCut: cutter.get,\n        event: event,\n        setSource: source.set,\n        getSource: source.get\n      };\n    };\n    var fromExternal = function (event) {\n      var stopper = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      return {\n        stop: stop,\n        cut: noop,\n        isStopped: stopper.get,\n        isCut: never,\n        event: event,\n        setSource: die('Cannot set source of a broadcasted event'),\n        getSource: die('Cannot get source of a broadcasted event')\n      };\n    };\n\n    var adt$1 = Adt.generate([\n      { stopped: [] },\n      { resume: ['element'] },\n      { complete: [] }\n    ]);\n    var doTriggerHandler = function (lookup, eventType, rawEvent, target, source, logger) {\n      var handler = lookup(eventType, target);\n      var simulatedEvent = fromSource(rawEvent, source);\n      return handler.fold(function () {\n        logger.logEventNoHandlers(eventType, target);\n        return adt$1.complete();\n      }, function (handlerInfo) {\n        var descHandler = handlerInfo.descHandler;\n        var eventHandler = getCurried(descHandler);\n        eventHandler(simulatedEvent);\n        if (simulatedEvent.isStopped()) {\n          logger.logEventStopped(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$1.stopped();\n        } else if (simulatedEvent.isCut()) {\n          logger.logEventCut(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$1.complete();\n        } else {\n          return parent(handlerInfo.element).fold(function () {\n            logger.logNoParent(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$1.complete();\n          }, function (parent) {\n            logger.logEventResponse(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$1.resume(parent);\n          });\n        }\n      });\n    };\n    var doTriggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, source, logger) {\n      return doTriggerHandler(lookup, eventType, rawEvent, rawTarget, source, logger).fold(always, function (parent) {\n        return doTriggerOnUntilStopped(lookup, eventType, rawEvent, parent, source, logger);\n      }, never);\n    };\n    var triggerHandler = function (lookup, eventType, rawEvent, target, logger) {\n      var source = derive(rawEvent, target);\n      return doTriggerHandler(lookup, eventType, rawEvent, target, source, logger);\n    };\n    var broadcast = function (listeners, rawEvent, _logger) {\n      var simulatedEvent = fromExternal(rawEvent);\n      each$1(listeners, function (listener) {\n        var descHandler = listener.descHandler;\n        var handler = getCurried(descHandler);\n        handler(simulatedEvent);\n      });\n      return simulatedEvent.isStopped();\n    };\n    var triggerUntilStopped = function (lookup, eventType, rawEvent, logger) {\n      return triggerOnUntilStopped(lookup, eventType, rawEvent, rawEvent.target, logger);\n    };\n    var triggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, logger) {\n      var source = derive(rawEvent, rawTarget);\n      return doTriggerOnUntilStopped(lookup, eventType, rawEvent, rawTarget, source, logger);\n    };\n\n    var eventHandler = function (element, descHandler) {\n      return {\n        element: element,\n        descHandler: descHandler\n      };\n    };\n    var broadcastHandler = function (id, handler) {\n      return {\n        id: id,\n        descHandler: handler\n      };\n    };\n    var EventRegistry = function () {\n      var registry = {};\n      var registerId = function (extraArgs, id, events) {\n        each(events, function (v, k) {\n          var handlers = registry[k] !== undefined ? registry[k] : {};\n          handlers[id] = curryArgs(v, extraArgs);\n          registry[k] = handlers;\n        });\n      };\n      var findHandler = function (handlers, elem) {\n        return read$1(elem).bind(function (id) {\n          return get$e(handlers, id);\n        }).map(function (descHandler) {\n          return eventHandler(elem, descHandler);\n        });\n      };\n      var filterByType = function (type) {\n        return get$e(registry, type).map(function (handlers) {\n          return mapToArray(handlers, function (f, id) {\n            return broadcastHandler(id, f);\n          });\n        }).getOr([]);\n      };\n      var find = function (isAboveRoot, type, target) {\n        return get$e(registry, type).bind(function (handlers) {\n          return closest$4(target, function (elem) {\n            return findHandler(handlers, elem);\n          }, isAboveRoot);\n        });\n      };\n      var unregisterId = function (id) {\n        each(registry, function (handlersById, _eventName) {\n          if (has$2(handlersById, id)) {\n            delete handlersById[id];\n          }\n        });\n      };\n      return {\n        registerId: registerId,\n        unregisterId: unregisterId,\n        filterByType: filterByType,\n        find: find\n      };\n    };\n\n    var Registry = function () {\n      var events = EventRegistry();\n      var components = {};\n      var readOrTag = function (component) {\n        var elem = component.element;\n        return read$1(elem).getOrThunk(function () {\n          return write('uid-', component.element);\n        });\n      };\n      var failOnDuplicate = function (component, tagId) {\n        var conflict = components[tagId];\n        if (conflict === component) {\n          unregister(component);\n        } else {\n          throw new Error('The tagId \"' + tagId + '\" is already used by: ' + element(conflict.element) + '\\nCannot use it for: ' + element(component.element) + '\\n' + 'The conflicting element is' + (inBody(conflict.element) ? ' ' : ' not ') + 'already in the DOM');\n        }\n      };\n      var register = function (component) {\n        var tagId = readOrTag(component);\n        if (hasNonNullableKey(components, tagId)) {\n          failOnDuplicate(component, tagId);\n        }\n        var extraArgs = [component];\n        events.registerId(extraArgs, tagId, component.events);\n        components[tagId] = component;\n      };\n      var unregister = function (component) {\n        read$1(component.element).each(function (tagId) {\n          delete components[tagId];\n          events.unregisterId(tagId);\n        });\n      };\n      var filter = function (type) {\n        return events.filterByType(type);\n      };\n      var find = function (isAboveRoot, type, target) {\n        return events.find(isAboveRoot, type, target);\n      };\n      var getById = function (id) {\n        return get$e(components, id);\n      };\n      return {\n        find: find,\n        filter: filter,\n        register: register,\n        unregister: unregister,\n        getById: getById\n      };\n    };\n\n    var factory$j = function (detail) {\n      var _a = detail.dom, attributes = _a.attributes, domWithoutAttributes = __rest(_a, ['attributes']);\n      return {\n        uid: detail.uid,\n        dom: __assign({\n          tag: 'div',\n          attributes: __assign({ role: 'presentation' }, attributes)\n        }, domWithoutAttributes),\n        components: detail.components,\n        behaviours: get$2(detail.containerBehaviours),\n        events: detail.events,\n        domModification: detail.domModification,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Container = single({\n      name: 'Container',\n      factory: factory$j,\n      configFields: [\n        defaulted('components', []),\n        field('containerBehaviours', []),\n        defaulted('events', {}),\n        defaulted('domModification', {}),\n        defaulted('eventOrder', {})\n      ]\n    });\n\n    var takeover = function (root) {\n      var isAboveRoot = function (el) {\n        return parent(root.element).fold(always, function (parent) {\n          return eq(el, parent);\n        });\n      };\n      var registry = Registry();\n      var lookup = function (eventName, target) {\n        return registry.find(isAboveRoot, eventName, target);\n      };\n      var domEvents = setup$d(root.element, {\n        triggerEvent: function (eventName, event) {\n          return monitorEvent(eventName, event.target, function (logger) {\n            return triggerUntilStopped(lookup, eventName, event, logger);\n          });\n        }\n      });\n      var systemApi = {\n        debugInfo: constant$1('real'),\n        triggerEvent: function (eventName, target, data) {\n          monitorEvent(eventName, target, function (logger) {\n            return triggerOnUntilStopped(lookup, eventName, data, target, logger);\n          });\n        },\n        triggerFocus: function (target, originator) {\n          read$1(target).fold(function () {\n            focus$3(target);\n          }, function (_alloyId) {\n            monitorEvent(focus$4(), target, function (logger) {\n              triggerHandler(lookup, focus$4(), {\n                originator: originator,\n                kill: noop,\n                prevent: noop,\n                target: target\n              }, target, logger);\n              return false;\n            });\n          });\n        },\n        triggerEscape: function (comp, simulatedEvent) {\n          systemApi.triggerEvent('keydown', comp.element, simulatedEvent.event);\n        },\n        getByUid: function (uid) {\n          return getByUid(uid);\n        },\n        getByDom: function (elem) {\n          return getByDom(elem);\n        },\n        build: build$1,\n        addToGui: function (c) {\n          add(c);\n        },\n        removeFromGui: function (c) {\n          remove(c);\n        },\n        addToWorld: function (c) {\n          addToWorld(c);\n        },\n        removeFromWorld: function (c) {\n          removeFromWorld(c);\n        },\n        broadcast: function (message) {\n          broadcast$1(message);\n        },\n        broadcastOn: function (channels, message) {\n          broadcastOn(channels, message);\n        },\n        broadcastEvent: function (eventName, event) {\n          broadcastEvent(eventName, event);\n        },\n        isConnected: always\n      };\n      var addToWorld = function (component) {\n        component.connect(systemApi);\n        if (!isText$1(component.element)) {\n          registry.register(component);\n          each$1(component.components(), addToWorld);\n          systemApi.triggerEvent(systemInit(), component.element, { target: component.element });\n        }\n      };\n      var removeFromWorld = function (component) {\n        if (!isText$1(component.element)) {\n          each$1(component.components(), removeFromWorld);\n          registry.unregister(component);\n        }\n        component.disconnect();\n      };\n      var add = function (component) {\n        attach(root, component);\n      };\n      var remove = function (component) {\n        detach(component);\n      };\n      var destroy = function () {\n        domEvents.unbind();\n        remove$5(root.element);\n      };\n      var broadcastData = function (data) {\n        var receivers = registry.filter(receive());\n        each$1(receivers, function (receiver) {\n          var descHandler = receiver.descHandler;\n          var handler = getCurried(descHandler);\n          handler(data);\n        });\n      };\n      var broadcast$1 = function (message) {\n        broadcastData({\n          universal: true,\n          data: message\n        });\n      };\n      var broadcastOn = function (channels, message) {\n        broadcastData({\n          universal: false,\n          channels: channels,\n          data: message\n        });\n      };\n      var broadcastEvent = function (eventName, event) {\n        var listeners = registry.filter(eventName);\n        return broadcast(listeners, event);\n      };\n      var getByUid = function (uid) {\n        return registry.getById(uid).fold(function () {\n          return Result.error(new Error('Could not find component with uid: \"' + uid + '\" in system.'));\n        }, Result.value);\n      };\n      var getByDom = function (elem) {\n        var uid = read$1(elem).getOr('not found');\n        return getByUid(uid);\n      };\n      addToWorld(root);\n      return {\n        root: root,\n        element: root.element,\n        destroy: destroy,\n        add: add,\n        remove: remove,\n        getByUid: getByUid,\n        getByDom: getByDom,\n        addToWorld: addToWorld,\n        removeFromWorld: removeFromWorld,\n        broadcast: broadcast$1,\n        broadcastOn: broadcastOn,\n        broadcastEvent: broadcastEvent\n      };\n    };\n\n    var renderBar = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-bar',\n            'tox-form__controls-h-stack'\n          ]\n        },\n        components: map$2(spec.items, backstage.interpreter)\n      };\n    };\n\n    var schema$l = constant$1([\n      defaulted('prefix', 'form-field'),\n      field('fieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var parts$e = constant$1([\n      optional({\n        schema: [required$1('dom')],\n        name: 'label'\n      }),\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [required$1('text')],\n        name: 'aria-descriptor'\n      }),\n      required({\n        factory: {\n          sketch: function (spec) {\n            var excludeFactory = exclude(spec, ['factory']);\n            return spec.factory.sketch(excludeFactory);\n          }\n        },\n        schema: [required$1('factory')],\n        name: 'field'\n      })\n    ]);\n\n    var factory$i = function (detail, components, _spec, _externals) {\n      var behaviours = augment(detail.fieldBehaviours, [\n        Composing.config({\n          find: function (container) {\n            return getPart(container, detail, 'field');\n          }\n        }),\n        Representing.config({\n          store: {\n            mode: 'manual',\n            getValue: function (field) {\n              return Composing.getCurrent(field).bind(Representing.getValue);\n            },\n            setValue: function (field, value) {\n              Composing.getCurrent(field).each(function (current) {\n                Representing.setValue(current, value);\n              });\n            }\n          }\n        })\n      ]);\n      var events = derive$2([runOnAttached(function (component, _simulatedEvent) {\n          var ps = getParts(component, detail, [\n            'label',\n            'field',\n            'aria-descriptor'\n          ]);\n          ps.field().each(function (field) {\n            var id = generate$6(detail.prefix);\n            ps.label().each(function (label) {\n              set$8(label.element, 'for', id);\n              set$8(field.element, 'id', id);\n            });\n            ps['aria-descriptor']().each(function (descriptor) {\n              var descriptorId = generate$6(detail.prefix);\n              set$8(descriptor.element, 'id', descriptorId);\n              set$8(field.element, 'aria-describedby', descriptorId);\n            });\n          });\n        })]);\n      var apis = {\n        getField: function (container) {\n          return getPart(container, detail, 'field');\n        },\n        getLabel: function (container) {\n          return getPart(container, detail, 'label');\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: behaviours,\n        events: events,\n        apis: apis\n      };\n    };\n    var FormField = composite({\n      name: 'FormField',\n      configFields: schema$l(),\n      partFields: parts$e(),\n      factory: factory$i,\n      apis: {\n        getField: function (apis, comp) {\n          return apis.getField(comp);\n        },\n        getLabel: function (apis, comp) {\n          return apis.getLabel(comp);\n        }\n      }\n    });\n\n    var exhibit$2 = function (base, tabConfig) {\n      return nu$7({\n        attributes: wrapAll([{\n            key: tabConfig.tabAttr,\n            value: 'true'\n          }])\n      });\n    };\n\n    var ActiveTabstopping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$2\n    });\n\n    var TabstopSchema = [defaulted('tabAttr', 'data-alloy-tabstop')];\n\n    var Tabstopping = create$8({\n      fields: TabstopSchema,\n      name: 'tabstopping',\n      active: ActiveTabstopping\n    });\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    var renderFormFieldWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      var spec = renderFormFieldSpecWith(pLabel, pField, extraClasses, extraBehaviours);\n      return FormField.sketch(spec);\n    };\n    var renderFormField = function (pLabel, pField) {\n      return renderFormFieldWith(pLabel, pField, [], []);\n    };\n    var renderFormFieldSpecWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      return {\n        dom: renderFormFieldDomWith(extraClasses),\n        components: pLabel.toArray().concat([pField]),\n        fieldBehaviours: derive$1(extraBehaviours)\n      };\n    };\n    var renderFormFieldDom = function () {\n      return renderFormFieldDomWith([]);\n    };\n    var renderFormFieldDomWith = function (extraClasses) {\n      return {\n        tag: 'div',\n        classes: ['tox-form__group'].concat(extraClasses)\n      };\n    };\n    var renderLabel$2 = function (label, providersBackstage) {\n      return FormField.parts.label({\n        dom: {\n          tag: 'label',\n          classes: ['tox-label'],\n          innerHtml: providersBackstage.translate(label)\n        }\n      });\n    };\n\n    var formChangeEvent = generate$6('form-component-change');\n    var formCloseEvent = generate$6('form-close');\n    var formCancelEvent = generate$6('form-cancel');\n    var formActionEvent = generate$6('form-action');\n    var formSubmitEvent = generate$6('form-submit');\n    var formBlockEvent = generate$6('form-block');\n    var formUnblockEvent = generate$6('form-unblock');\n    var formTabChangeEvent = generate$6('form-tabchange');\n    var formResizeEvent = generate$6('form-resize');\n\n    var renderCollection = function (spec, providersBackstage) {\n      var _a;\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var runOnItem = function (f) {\n        return function (comp, se) {\n          closest$1(se.event.target, '[data-collection-item-value]').each(function (target) {\n            f(comp, se, target, get$d(target, 'data-collection-item-value'));\n          });\n        };\n      };\n      var setContents = function (comp, items) {\n        var htmlLines = map$2(items, function (item) {\n          var itemText = global$e.translate(item.text);\n          var textContent = spec.columns === 1 ? '<div class=\"tox-collection__item-label\">' + itemText + '</div>' : '';\n          var iconContent = '<div class=\"tox-collection__item-icon\">' + item.icon + '</div>';\n          var mapItemName = {\n            '_': ' ',\n            ' - ': ' ',\n            '-': ' '\n          };\n          var ariaLabel = itemText.replace(/\\_| \\- |\\-/g, function (match) {\n            return mapItemName[match];\n          });\n          var disabledClass = providersBackstage.isDisabled() ? ' tox-collection__item--state-disabled' : '';\n          return '<div class=\"tox-collection__item' + disabledClass + '\" tabindex=\"-1\" data-collection-item-value=\"' + global$7.encodeAllRaw(item.value) + '\" title=\"' + ariaLabel + '\" aria-label=\"' + ariaLabel + '\">' + iconContent + textContent + '</div>';\n        });\n        var chunks = spec.columns !== 'auto' && spec.columns > 1 ? chunk$1(htmlLines, spec.columns) : [htmlLines];\n        var html = map$2(chunks, function (ch) {\n          return '<div class=\"tox-collection__group\">' + ch.join('') + '</div>';\n        });\n        set$5(comp.element, html.join(''));\n      };\n      var onClick = runOnItem(function (comp, se, tgt, itemValue) {\n        se.stop();\n        if (!providersBackstage.isDisabled()) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }\n      });\n      var collectionEvents = [\n        run$1(mouseover(), runOnItem(function (comp, se, tgt) {\n          focus$3(tgt);\n        })),\n        run$1(click(), onClick),\n        run$1(tap(), onClick),\n        run$1(focusin(), runOnItem(function (comp, se, tgt) {\n          descendant(comp.element, '.' + activeClass).each(function (currentActive) {\n            remove$2(currentActive, activeClass);\n          });\n          add$2(tgt, activeClass);\n        })),\n        run$1(focusout(), runOnItem(function (comp) {\n          descendant(comp.element, '.' + activeClass).each(function (currentActive) {\n            remove$2(currentActive, activeClass);\n          });\n        })),\n        runOnExecute$1(runOnItem(function (comp, se, tgt, itemValue) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }))\n      ];\n      var iterCollectionItems = function (comp, applyAttributes) {\n        return map$2(descendants(comp.element, '.tox-collection__item'), applyAttributes);\n      };\n      var pField = FormField.parts.field({\n        dom: {\n          tag: 'div',\n          classes: ['tox-collection'].concat(spec.columns !== 1 ? ['tox-collection--grid'] : ['tox-collection--list'])\n        },\n        components: [],\n        factory: { sketch: identity$1 },\n        behaviours: derive$1([\n          Disabling.config({\n            disabled: providersBackstage.isDisabled,\n            onDisabled: function (comp) {\n              iterCollectionItems(comp, function (childElm) {\n                add$2(childElm, 'tox-collection__item--state-disabled');\n                set$8(childElm, 'aria-disabled', true);\n              });\n            },\n            onEnabled: function (comp) {\n              iterCollectionItems(comp, function (childElm) {\n                remove$2(childElm, 'tox-collection__item--state-disabled');\n                remove$7(childElm, 'aria-disabled');\n              });\n            }\n          }),\n          receivingConfig(),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: []\n            },\n            onSetValue: function (comp, items) {\n              setContents(comp, items);\n              if (spec.columns === 'auto') {\n                detectSize(comp, 5, 'tox-collection__item').each(function (_a) {\n                  var numRows = _a.numRows, numColumns = _a.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              }\n              emit(comp, formResizeEvent);\n            }\n          }),\n          Tabstopping.config({}),\n          Keying.config(deriveCollectionMovement(spec.columns, 'normal')),\n          config('collection-events', collectionEvents)\n        ]),\n        eventOrder: (_a = {}, _a[execute$5()] = [\n          'disabling',\n          'alloy.base.behaviour',\n          'collection-events'\n        ], _a)\n      });\n      var extraClasses = ['tox-form__group--collection'];\n      return renderFormFieldWith(pLabel, pField, extraClasses, []);\n    };\n\n    var schema$k = constant$1([\n      option('data'),\n      defaulted('inputAttributes', {}),\n      defaulted('inputStyles', {}),\n      defaulted('tag', 'input'),\n      defaulted('inputClasses', []),\n      onHandler('onSetValue'),\n      defaulted('styles', {}),\n      defaulted('eventOrder', {}),\n      field('inputBehaviours', [\n        Representing,\n        Focusing\n      ]),\n      defaulted('selectOnFocus', true)\n    ]);\n    var focusBehaviours = function (detail) {\n      return derive$1([Focusing.config({\n          onFocus: !detail.selectOnFocus ? noop : function (component) {\n            var input = component.element;\n            var value = get$5(input);\n            input.dom.setSelectionRange(0, value.length);\n          }\n        })]);\n    };\n    var behaviours = function (detail) {\n      return __assign(__assign({}, focusBehaviours(detail)), augment(detail.inputBehaviours, [Representing.config({\n          store: __assign(__assign({ mode: 'manual' }, detail.data.map(function (data) {\n            return { initialValue: data };\n          }).getOr({})), {\n            getValue: function (input) {\n              return get$5(input.element);\n            },\n            setValue: function (input, data) {\n              var current = get$5(input.element);\n              if (current !== data) {\n                set$4(input.element, data);\n              }\n            }\n          }),\n          onSetValue: detail.onSetValue\n        })]));\n    };\n    var dom = function (detail) {\n      return {\n        tag: detail.tag,\n        attributes: __assign({ type: 'text' }, detail.inputAttributes),\n        styles: detail.inputStyles,\n        classes: detail.inputClasses\n      };\n    };\n\n    var factory$h = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: dom(detail),\n        components: [],\n        behaviours: behaviours(detail),\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Input = single({\n      name: 'Input',\n      configFields: schema$k(),\n      factory: factory$h\n    });\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (global, factory) {\n        typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.EphoxContactWrapper = factory());\n      }(this, function () {\n        var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n        var promise = { exports: {} };\n        (function (module) {\n          (function (root) {\n            var setTimeoutFunc = setTimeout;\n            function noop() {\n            }\n            function bind(fn, thisArg) {\n              return function () {\n                fn.apply(thisArg, arguments);\n              };\n            }\n            function Promise(fn) {\n              if (typeof this !== 'object')\n                throw new TypeError('Promises must be constructed via new');\n              if (typeof fn !== 'function')\n                throw new TypeError('not a function');\n              this._state = 0;\n              this._handled = false;\n              this._value = undefined;\n              this._deferreds = [];\n              doResolve(fn, this);\n            }\n            function handle(self, deferred) {\n              while (self._state === 3) {\n                self = self._value;\n              }\n              if (self._state === 0) {\n                self._deferreds.push(deferred);\n                return;\n              }\n              self._handled = true;\n              Promise._immediateFn(function () {\n                var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                if (cb === null) {\n                  (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                  return;\n                }\n                var ret;\n                try {\n                  ret = cb(self._value);\n                } catch (e) {\n                  reject(deferred.promise, e);\n                  return;\n                }\n                resolve(deferred.promise, ret);\n              });\n            }\n            function resolve(self, newValue) {\n              try {\n                if (newValue === self)\n                  throw new TypeError('A promise cannot be resolved with itself.');\n                if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                  var then = newValue.then;\n                  if (newValue instanceof Promise) {\n                    self._state = 3;\n                    self._value = newValue;\n                    finale(self);\n                    return;\n                  } else if (typeof then === 'function') {\n                    doResolve(bind(then, newValue), self);\n                    return;\n                  }\n                }\n                self._state = 1;\n                self._value = newValue;\n                finale(self);\n              } catch (e) {\n                reject(self, e);\n              }\n            }\n            function reject(self, newValue) {\n              self._state = 2;\n              self._value = newValue;\n              finale(self);\n            }\n            function finale(self) {\n              if (self._state === 2 && self._deferreds.length === 0) {\n                Promise._immediateFn(function () {\n                  if (!self._handled) {\n                    Promise._unhandledRejectionFn(self._value);\n                  }\n                });\n              }\n              for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                handle(self, self._deferreds[i]);\n              }\n              self._deferreds = null;\n            }\n            function Handler(onFulfilled, onRejected, promise) {\n              this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n              this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n              this.promise = promise;\n            }\n            function doResolve(fn, self) {\n              var done = false;\n              try {\n                fn(function (value) {\n                  if (done)\n                    return;\n                  done = true;\n                  resolve(self, value);\n                }, function (reason) {\n                  if (done)\n                    return;\n                  done = true;\n                  reject(self, reason);\n                });\n              } catch (ex) {\n                if (done)\n                  return;\n                done = true;\n                reject(self, ex);\n              }\n            }\n            Promise.prototype['catch'] = function (onRejected) {\n              return this.then(null, onRejected);\n            };\n            Promise.prototype.then = function (onFulfilled, onRejected) {\n              var prom = new this.constructor(noop);\n              handle(this, new Handler(onFulfilled, onRejected, prom));\n              return prom;\n            };\n            Promise.all = function (arr) {\n              var args = Array.prototype.slice.call(arr);\n              return new Promise(function (resolve, reject) {\n                if (args.length === 0)\n                  return resolve([]);\n                var remaining = args.length;\n                function res(i, val) {\n                  try {\n                    if (val && (typeof val === 'object' || typeof val === 'function')) {\n                      var then = val.then;\n                      if (typeof then === 'function') {\n                        then.call(val, function (val) {\n                          res(i, val);\n                        }, reject);\n                        return;\n                      }\n                    }\n                    args[i] = val;\n                    if (--remaining === 0) {\n                      resolve(args);\n                    }\n                  } catch (ex) {\n                    reject(ex);\n                  }\n                }\n                for (var i = 0; i < args.length; i++) {\n                  res(i, args[i]);\n                }\n              });\n            };\n            Promise.resolve = function (value) {\n              if (value && typeof value === 'object' && value.constructor === Promise) {\n                return value;\n              }\n              return new Promise(function (resolve) {\n                resolve(value);\n              });\n            };\n            Promise.reject = function (value) {\n              return new Promise(function (resolve, reject) {\n                reject(value);\n              });\n            };\n            Promise.race = function (values) {\n              return new Promise(function (resolve, reject) {\n                for (var i = 0, len = values.length; i < len; i++) {\n                  values[i].then(resolve, reject);\n                }\n              });\n            };\n            Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n              setImmediate(fn);\n            } : function (fn) {\n              setTimeoutFunc(fn, 0);\n            };\n            Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n              if (typeof console !== 'undefined' && console) {\n                console.warn('Possible Unhandled Promise Rejection:', err);\n              }\n            };\n            Promise._setImmediateFn = function _setImmediateFn(fn) {\n              Promise._immediateFn = fn;\n            };\n            Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n              Promise._unhandledRejectionFn = fn;\n            };\n            if (module.exports) {\n              module.exports = Promise;\n            } else if (!root.Promise) {\n              root.Promise = Promise;\n            }\n          }(commonjsGlobal));\n        }(promise));\n        var promisePolyfill = promise.exports;\n        var Global = function () {\n          if (typeof window !== 'undefined') {\n            return window;\n          } else {\n            return Function('return this;')();\n          }\n        }();\n        var promisePolyfill_1 = { boltExport: Global.Promise || promisePolyfill };\n        return promisePolyfill_1;\n      }));\n    }(undefined, exports$1, module));\n    var Promise$1 = module.exports.boltExport;\n\n    var nu$3 = function (baseFn) {\n      var data = Optional.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$3(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        if (!isReady()) {\n          data = Optional.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each$1(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure$1 = function (a) {\n      return nu$3(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$3,\n      pure: pure$1\n    };\n\n    var errorReporter = function (err) {\n      setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make$5 = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make$5(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make$5(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make$5(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make$5(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$2 = function (baseFn) {\n      return make$5(function () {\n        return new Promise$1(baseFn);\n      });\n    };\n    var pure = function (a) {\n      return make$5(function () {\n        return Promise$1.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$2,\n      pure: pure\n    };\n\n    var ariaElements = [\n      'input',\n      'textarea'\n    ];\n    var isAriaElement = function (elem) {\n      var name = name$2(elem);\n      return contains$2(ariaElements, name);\n    };\n    var markValid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      remove$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element)) {\n          set$8(component.element, 'aria-invalid', false);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set$5(container, notifyInfo.validHtml);\n        });\n        notifyInfo.onValid(component);\n      });\n    };\n    var markInvalid = function (component, invalidConfig, invalidState, text) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      add$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element)) {\n          set$8(component.element, 'aria-invalid', true);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set$5(container, text);\n        });\n        notifyInfo.onInvalid(component, text);\n      });\n    };\n    var query = function (component, invalidConfig, _invalidState) {\n      return invalidConfig.validator.fold(function () {\n        return Future.pure(Result.value(true));\n      }, function (validatorInfo) {\n        return validatorInfo.validate(component);\n      });\n    };\n    var run = function (component, invalidConfig, invalidState) {\n      invalidConfig.notify.each(function (notifyInfo) {\n        notifyInfo.onValidate(component);\n      });\n      return query(component, invalidConfig).map(function (valid) {\n        if (component.getSystem().isConnected()) {\n          return valid.fold(function (err) {\n            markInvalid(component, invalidConfig, invalidState, err);\n            return Result.error(err);\n          }, function (v) {\n            markValid(component, invalidConfig);\n            return Result.value(v);\n          });\n        } else {\n          return Result.error('No longer in system');\n        }\n      });\n    };\n    var isInvalid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      return has(elem, invalidConfig.invalidClass);\n    };\n\n    var InvalidateApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        markValid: markValid,\n        markInvalid: markInvalid,\n        query: query,\n        run: run,\n        isInvalid: isInvalid\n    });\n\n    var events$8 = function (invalidConfig, invalidState) {\n      return invalidConfig.validator.map(function (validatorInfo) {\n        return derive$2([run$1(validatorInfo.onEvent, function (component) {\n            run(component, invalidConfig, invalidState).get(identity$1);\n          })].concat(validatorInfo.validateOnLoad ? [runOnAttached(function (component) {\n            run(component, invalidConfig, invalidState).get(noop);\n          })] : []));\n      }).getOr({});\n    };\n\n    var ActiveInvalidate = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$8\n    });\n\n    var InvalidateSchema = [\n      required$1('invalidClass'),\n      defaulted('getRoot', Optional.none),\n      optionObjOf('notify', [\n        defaulted('aria', 'alert'),\n        defaulted('getContainer', Optional.none),\n        defaulted('validHtml', ''),\n        onHandler('onValid'),\n        onHandler('onInvalid'),\n        onHandler('onValidate')\n      ]),\n      optionObjOf('validator', [\n        required$1('validate'),\n        defaulted('onEvent', 'input'),\n        defaulted('validateOnLoad', true)\n      ])\n    ];\n\n    var Invalidating = create$8({\n      fields: InvalidateSchema,\n      name: 'invalidating',\n      active: ActiveInvalidate,\n      apis: InvalidateApis,\n      extra: {\n        validation: function (validator) {\n          return function (component) {\n            var v = Representing.getValue(component);\n            return Future.pure(validator(v));\n          };\n        }\n      }\n    });\n\n    var getCoupled = function (component, coupleConfig, coupleState, name) {\n      return coupleState.getOrCreate(component, coupleConfig, name);\n    };\n\n    var CouplingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCoupled: getCoupled\n    });\n\n    var CouplingSchema = [requiredOf('others', setOf(Result.value, anyValue()))];\n\n    var init$a = function () {\n      var coupled = {};\n      var getOrCreate = function (component, coupleConfig, name) {\n        var available = keys(coupleConfig.others);\n        if (!available) {\n          throw new Error('Cannot find coupled component: ' + name + '. Known coupled components: ' + JSON.stringify(available, null, 2));\n        } else {\n          return get$e(coupled, name).getOrThunk(function () {\n            var builder = get$e(coupleConfig.others, name).getOrDie('No information found for coupled component: ' + name);\n            var spec = builder(component);\n            var built = component.getSystem().build(spec);\n            coupled[name] = built;\n            return built;\n          });\n        }\n      };\n      var readState = constant$1({});\n      return nu$8({\n        readState: readState,\n        getOrCreate: getOrCreate\n      });\n    };\n\n    var CouplingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$a\n    });\n\n    var Coupling = create$8({\n      fields: CouplingSchema,\n      name: 'coupling',\n      apis: CouplingApis,\n      state: CouplingState\n    });\n\n    var suffix = constant$1('sink');\n    var partType$1 = constant$1(optional({\n      name: suffix(),\n      overrides: constant$1({\n        dom: { tag: 'div' },\n        behaviours: derive$1([Positioning.config({ useFixed: always })]),\n        events: derive$2([\n          cutter(keydown()),\n          cutter(mousedown()),\n          cutter(click())\n        ])\n      })\n    }));\n\n    var HighlightOnOpen;\n    (function (HighlightOnOpen) {\n      HighlightOnOpen[HighlightOnOpen['HighlightFirst'] = 0] = 'HighlightFirst';\n      HighlightOnOpen[HighlightOnOpen['HighlightNone'] = 1] = 'HighlightNone';\n    }(HighlightOnOpen || (HighlightOnOpen = {})));\n    var getAnchor = function (detail, component) {\n      var hotspot = detail.getHotspot(component).getOr(component);\n      var type = 'hotspot';\n      var overrides = detail.getAnchorOverrides();\n      return detail.layouts.fold(function () {\n        return {\n          type: type,\n          hotspot: hotspot,\n          overrides: overrides\n        };\n      }, function (layouts) {\n        return {\n          type: type,\n          hotspot: hotspot,\n          overrides: overrides,\n          layouts: layouts\n        };\n      });\n    };\n    var fetch = function (detail, mapFetch, component) {\n      var fetcher = detail.fetch;\n      return fetcher(component).map(mapFetch);\n    };\n    var openF = function (detail, mapFetch, anchor, component, sandbox, externals, highlightOnOpen) {\n      var futureData = fetch(detail, mapFetch, component);\n      var getLazySink = getSink(component, detail);\n      return futureData.map(function (tdata) {\n        return tdata.bind(function (data) {\n          return Optional.from(tieredMenu.sketch(__assign(__assign({}, externals.menu()), {\n            uid: generate$5(''),\n            data: data,\n            highlightImmediately: highlightOnOpen === HighlightOnOpen.HighlightFirst,\n            onOpenMenu: function (tmenu, menu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, menu, { anchor: anchor });\n              Sandboxing.decloak(sandbox);\n            },\n            onOpenSubmenu: function (tmenu, item, submenu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, submenu, {\n                anchor: {\n                  type: 'submenu',\n                  item: item\n                }\n              });\n              Sandboxing.decloak(sandbox);\n            },\n            onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, primaryMenu, { anchor: anchor });\n              each$1(submenuTriggers, function (st) {\n                Positioning.position(sink, st.triggeredMenu, {\n                  anchor: {\n                    type: 'submenu',\n                    item: st.triggeringItem\n                  }\n                });\n              });\n            },\n            onEscape: function () {\n              Focusing.focus(component);\n              Sandboxing.close(sandbox);\n              return Optional.some(true);\n            }\n          })));\n        });\n      });\n    };\n    var open = function (detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen) {\n      var anchor = getAnchor(detail, hotspot);\n      var processed = openF(detail, mapFetch, anchor, hotspot, sandbox, externals, highlightOnOpen);\n      return processed.map(function (tdata) {\n        tdata.fold(function () {\n          if (Sandboxing.isOpen(sandbox)) {\n            Sandboxing.close(sandbox);\n          }\n        }, function (data) {\n          Sandboxing.cloak(sandbox);\n          Sandboxing.open(sandbox, data);\n          onOpenSync(sandbox);\n        });\n        return sandbox;\n      });\n    };\n    var close = function (detail, mapFetch, component, sandbox, _externals, _onOpenSync, _highlightOnOpen) {\n      Sandboxing.close(sandbox);\n      return Future.pure(sandbox);\n    };\n    var togglePopup = function (detail, mapFetch, hotspot, externals, onOpenSync, highlightOnOpen) {\n      var sandbox = Coupling.getCoupled(hotspot, 'sandbox');\n      var showing = Sandboxing.isOpen(sandbox);\n      var action = showing ? close : open;\n      return action(detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen);\n    };\n    var matchWidth = function (hotspot, container, useMinWidth) {\n      var menu = Composing.getCurrent(container).getOr(container);\n      var buttonWidth = get$a(hotspot.element);\n      if (useMinWidth) {\n        set$7(menu.element, 'min-width', buttonWidth + 'px');\n      } else {\n        set$6(menu.element, buttonWidth);\n      }\n    };\n    var getSink = function (anyInSystem, sinkDetail) {\n      return anyInSystem.getSystem().getByUid(sinkDetail.uid + '-' + suffix()).map(function (internalSink) {\n        return function () {\n          return Result.value(internalSink);\n        };\n      }).getOrThunk(function () {\n        return sinkDetail.lazySink.fold(function () {\n          return function () {\n            return Result.error(new Error('No internal sink is specified, nor could an external sink be found'));\n          };\n        }, function (lazySinkFn) {\n          return function () {\n            return lazySinkFn(anyInSystem);\n          };\n        });\n      });\n    };\n    var doRepositionMenus = function (sandbox) {\n      Sandboxing.getState(sandbox).each(function (tmenu) {\n        tieredMenu.repositionMenus(tmenu);\n      });\n    };\n    var makeSandbox$1 = function (detail, hotspot, extras) {\n      var ariaOwner = manager();\n      var onOpen = function (component, menu) {\n        var anchor = getAnchor(detail, hotspot);\n        ariaOwner.link(hotspot.element);\n        if (detail.matchWidth) {\n          matchWidth(anchor.hotspot, menu, detail.useMinWidth);\n        }\n        detail.onOpen(anchor, component, menu);\n        if (extras !== undefined && extras.onOpen !== undefined) {\n          extras.onOpen(component, menu);\n        }\n      };\n      var onClose = function (component, menu) {\n        ariaOwner.unlink(hotspot.element);\n        if (extras !== undefined && extras.onClose !== undefined) {\n          extras.onClose(component, menu);\n        }\n      };\n      var lazySink = getSink(hotspot, detail);\n      return {\n        dom: {\n          tag: 'div',\n          classes: detail.sandboxClasses,\n          attributes: {\n            id: ariaOwner.id,\n            role: 'listbox'\n          }\n        },\n        behaviours: SketchBehaviours.augment(detail.sandboxBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: hotspot\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf$1(data, queryElem) || isPartOf$1(hotspot, queryElem);\n            },\n            getAttachPoint: function () {\n              return lazySink().getOrDie();\n            }\n          }),\n          Composing.config({\n            find: function (sandbox) {\n              return Sandboxing.getState(sandbox).bind(function (menu) {\n                return Composing.getCurrent(menu);\n              });\n            }\n          }),\n          Receiving.config({ channels: __assign(__assign({}, receivingChannel$1({ isExtraPart: never })), receivingChannel({ doReposition: doRepositionMenus })) })\n        ])\n      };\n    };\n    var repositionMenus = function (comp) {\n      var sandbox = Coupling.getCoupled(comp, 'sandbox');\n      doRepositionMenus(sandbox);\n    };\n\n    var sandboxFields = function () {\n      return [\n        defaulted('sandboxClasses', []),\n        SketchBehaviours.field('sandboxBehaviours', [\n          Composing,\n          Receiving,\n          Sandboxing,\n          Representing\n        ])\n      ];\n    };\n\n    var schema$j = constant$1([\n      required$1('dom'),\n      required$1('fetch'),\n      onHandler('onOpen'),\n      onKeyboardHandler('onExecute'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      schema$y(),\n      field('dropdownBehaviours', [\n        Toggling,\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      required$1('toggleClass'),\n      defaulted('eventOrder', {}),\n      option('lazySink'),\n      defaulted('matchWidth', false),\n      defaulted('useMinWidth', false),\n      option('role')\n    ].concat(sandboxFields()));\n    var parts$d = constant$1([\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return { onExecute: detail.onExecute };\n        }\n      }),\n      partType$1()\n    ]);\n\n    var factory$g = function (detail, components, _spec, externals) {\n      var _a;\n      var lookupAttr = function (attr) {\n        return get$e(detail.dom, 'attributes').bind(function (attrs) {\n          return get$e(attrs, attr);\n        });\n      };\n      var switchToMenu = function (sandbox) {\n        Sandboxing.getState(sandbox).each(function (tmenu) {\n          tieredMenu.highlightPrimary(tmenu);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, identity$1, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var apis = {\n        expand: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, identity$1, comp, externals, noop, HighlightOnOpen.HighlightNone).get(noop);\n          }\n        },\n        open: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, identity$1, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        isOpen: Toggling.isOn,\n        close: function (comp) {\n          if (Toggling.isOn(comp)) {\n            togglePopup(detail, identity$1, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      var triggerExecute = function (comp, _se) {\n        emitExecute(comp);\n        return Optional.some(true);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.dropdownBehaviours, [\n          Toggling.config({\n            toggleClass: detail.toggleClass,\n            aria: { mode: 'expanded' }\n          }),\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                return makeSandbox$1(detail, hotspot, {\n                  onOpen: function () {\n                    return Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    return Toggling.off(hotspot);\n                  }\n                });\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: triggerExecute,\n            onEnter: triggerExecute,\n            onDown: function (comp, _se) {\n              if (Dropdown.isOpen(comp)) {\n                var sandbox = Coupling.getCoupled(comp, 'sandbox');\n                switchToMenu(sandbox);\n              } else {\n                Dropdown.open(comp);\n              }\n              return Optional.some(true);\n            },\n            onEscape: function (comp, _se) {\n              if (Dropdown.isOpen(comp)) {\n                Dropdown.close(comp);\n                return Optional.some(true);\n              } else {\n                return Optional.none();\n              }\n            }\n          }),\n          Focusing.config({})\n        ]),\n        events: events$a(Optional.some(action)),\n        eventOrder: __assign(__assign({}, detail.eventOrder), (_a = {}, _a[execute$5()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        apis: apis,\n        domModification: {\n          attributes: __assign(__assign({ 'aria-haspopup': 'true' }, detail.role.fold(function () {\n            return {};\n          }, function (role) {\n            return { role: role };\n          })), detail.dom.tag === 'button' ? { type: lookupAttr('type').getOr('button') } : {})\n        }\n      };\n    };\n    var Dropdown = composite({\n      name: 'Dropdown',\n      configFields: schema$j(),\n      partFields: parts$d(),\n      factory: factory$g,\n      apis: {\n        open: function (apis, comp) {\n          return apis.open(comp);\n        },\n        expand: function (apis, comp) {\n          return apis.expand(comp);\n        },\n        close: function (apis, comp) {\n          return apis.close(comp);\n        },\n        isOpen: function (apis, comp) {\n          return apis.isOpen(comp);\n        },\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var exhibit$1 = function () {\n      return nu$7({\n        styles: {\n          '-webkit-user-select': 'none',\n          'user-select': 'none',\n          '-ms-user-select': 'none',\n          '-moz-user-select': '-moz-none'\n        },\n        attributes: { unselectable: 'on' }\n      });\n    };\n    var events$7 = function () {\n      return derive$2([abort(selectstart(), always)]);\n    };\n\n    var ActiveUnselecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$7,\n        exhibit: exhibit$1\n    });\n\n    var Unselecting = create$8({\n      fields: [],\n      name: 'unselecting',\n      active: ActiveUnselecting\n    });\n\n    var renderPanelButton = function (spec, sharedBackstage) {\n      return Dropdown.sketch({\n        dom: spec.dom,\n        components: spec.components,\n        toggleClass: 'mce-active',\n        dropdownBehaviours: derive$1([\n          DisablingConfigs.button(sharedBackstage.providers.isDisabled),\n          receivingConfig(),\n          Unselecting.config({}),\n          Tabstopping.config({})\n        ]),\n        layouts: spec.layouts,\n        sandboxClasses: ['tox-dialog__popups'],\n        lazySink: sharedBackstage.getSink,\n        fetch: function (comp) {\n          return Future.nu(function (callback) {\n            return spec.fetch(callback);\n          }).map(function (items) {\n            return Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$6('menu-value'), items, function (value) {\n              spec.onItemAction(comp, value);\n            }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, never, sharedBackstage.providers), { movement: deriveMenuMovement(spec.columns, spec.presets) })));\n          });\n        },\n        parts: { menu: part(false, 1, spec.presets) }\n      });\n    };\n\n    var colorInputChangeEvent = generate$6('color-input-change');\n    var colorSwatchChangeEvent = generate$6('color-swatch-change');\n    var colorPickerCancelEvent = generate$6('color-picker-cancel');\n    var renderColorInput = function (spec, sharedBackstage, colorInputBackstage) {\n      var pField = FormField.parts.field({\n        factory: Input,\n        inputClasses: ['tox-textfield'],\n        onSetValue: function (c) {\n          return Invalidating.run(c).get(noop);\n        },\n        inputBehaviours: derive$1([\n          Disabling.config({ disabled: sharedBackstage.providers.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Invalidating.config({\n            invalidClass: 'tox-textbox-field-invalid',\n            getRoot: function (comp) {\n              return parent(comp.element);\n            },\n            notify: {\n              onValid: function (comp) {\n                var val = Representing.getValue(comp);\n                emitWith(comp, colorInputChangeEvent, { color: val });\n              }\n            },\n            validator: {\n              validateOnLoad: false,\n              validate: function (input) {\n                var inputValue = Representing.getValue(input);\n                if (inputValue.length === 0) {\n                  return Future.pure(Result.value(true));\n                } else {\n                  var span = SugarElement.fromTag('span');\n                  set$7(span, 'background-color', inputValue);\n                  var res = getRaw(span, 'background-color').fold(function () {\n                    return Result.error('blah');\n                  }, function (_) {\n                    return Result.value(inputValue);\n                  });\n                  return Future.pure(res);\n                }\n              }\n            }\n          })\n        ]),\n        selectOnFocus: false\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, sharedBackstage.providers);\n      });\n      var emitSwatchChange = function (colorBit, value) {\n        emitWith(colorBit, colorSwatchChangeEvent, { value: value });\n      };\n      var onItemAction = function (comp, value) {\n        memColorButton.getOpt(comp).each(function (colorBit) {\n          if (value === 'custom') {\n            colorInputBackstage.colorPicker(function (valueOpt) {\n              valueOpt.fold(function () {\n                return emit(colorBit, colorPickerCancelEvent);\n              }, function (value) {\n                emitSwatchChange(colorBit, value);\n                addColor(value);\n              });\n            }, '#ffffff');\n          } else if (value === 'remove') {\n            emitSwatchChange(colorBit, '');\n          } else {\n            emitSwatchChange(colorBit, value);\n          }\n        });\n      };\n      var memColorButton = record(renderPanelButton({\n        dom: {\n          tag: 'span',\n          attributes: { 'aria-label': sharedBackstage.providers.translate('Color swatch') }\n        },\n        layouts: {\n          onRtl: function () {\n            return [\n              southwest$2,\n              southeast$2,\n              south$2\n            ];\n          },\n          onLtr: function () {\n            return [\n              southeast$2,\n              southwest$2,\n              south$2\n            ];\n          }\n        },\n        components: [],\n        fetch: getFetch$1(colorInputBackstage.getColors(), colorInputBackstage.hasCustomColors()),\n        columns: colorInputBackstage.getColorCols(),\n        presets: 'color',\n        onItemAction: onItemAction\n      }, sharedBackstage));\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: pLabel.toArray().concat([{\n            dom: {\n              tag: 'div',\n              classes: ['tox-color-input']\n            },\n            components: [\n              pField,\n              memColorButton.asSpec()\n            ]\n          }]),\n        fieldBehaviours: derive$1([config('form-field-events', [\n            run$1(colorInputChangeEvent, function (comp, se) {\n              memColorButton.getOpt(comp).each(function (colorButton) {\n                set$7(colorButton.element, 'background-color', se.event.color);\n              });\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            }),\n            run$1(colorSwatchChangeEvent, function (comp, se) {\n              FormField.getField(comp).each(function (field) {\n                Representing.setValue(field, se.event.value);\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            }),\n            run$1(colorPickerCancelEvent, function (comp, _se) {\n              FormField.getField(comp).each(function (_field) {\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            })\n          ])])\n      });\n    };\n\n    var labelPart = optional({\n      schema: [required$1('dom')],\n      name: 'label'\n    });\n    var edgePart = function (name) {\n      return optional({\n        name: '' + name + '-edge',\n        overrides: function (detail) {\n          var action = detail.model.manager.edgeActions[name];\n          return action.fold(function () {\n            return {};\n          }, function (a) {\n            return {\n              events: derive$2([\n                runActionExtra(touchstart(), function (comp, se, d) {\n                  return a(comp, d);\n                }, [detail]),\n                runActionExtra(mousedown(), function (comp, se, d) {\n                  return a(comp, d);\n                }, [detail]),\n                runActionExtra(mousemove(), function (comp, se, det) {\n                  if (det.mouseIsDown.get()) {\n                    a(comp, det);\n                  }\n                }, [detail])\n              ])\n            };\n          });\n        }\n      });\n    };\n    var tlEdgePart = edgePart('top-left');\n    var tedgePart = edgePart('top');\n    var trEdgePart = edgePart('top-right');\n    var redgePart = edgePart('right');\n    var brEdgePart = edgePart('bottom-right');\n    var bedgePart = edgePart('bottom');\n    var blEdgePart = edgePart('bottom-left');\n    var ledgePart = edgePart('left');\n    var thumbPart = required({\n      name: 'thumb',\n      defaults: constant$1({ dom: { styles: { position: 'absolute' } } }),\n      overrides: function (detail) {\n        return {\n          events: derive$2([\n            redirectToPart(touchstart(), detail, 'spectrum'),\n            redirectToPart(touchmove(), detail, 'spectrum'),\n            redirectToPart(touchend(), detail, 'spectrum'),\n            redirectToPart(mousedown(), detail, 'spectrum'),\n            redirectToPart(mousemove(), detail, 'spectrum'),\n            redirectToPart(mouseup(), detail, 'spectrum')\n          ])\n        };\n      }\n    });\n    var spectrumPart = required({\n      schema: [customField('mouseIsDown', function () {\n          return Cell(false);\n        })],\n      name: 'spectrum',\n      overrides: function (detail) {\n        var modelDetail = detail.model;\n        var model = modelDetail.manager;\n        var setValueFrom = function (component, simulatedEvent) {\n          return model.getValueFromEvent(simulatedEvent).map(function (value) {\n            return model.setValueFrom(component, detail, value);\n          });\n        };\n        return {\n          behaviours: derive$1([\n            Keying.config({\n              mode: 'special',\n              onLeft: function (spectrum) {\n                return model.onLeft(spectrum, detail);\n              },\n              onRight: function (spectrum) {\n                return model.onRight(spectrum, detail);\n              },\n              onUp: function (spectrum) {\n                return model.onUp(spectrum, detail);\n              },\n              onDown: function (spectrum) {\n                return model.onDown(spectrum, detail);\n              }\n            }),\n            Focusing.config({})\n          ]),\n          events: derive$2([\n            run$1(touchstart(), setValueFrom),\n            run$1(touchmove(), setValueFrom),\n            run$1(mousedown(), setValueFrom),\n            run$1(mousemove(), function (spectrum, se) {\n              if (detail.mouseIsDown.get()) {\n                setValueFrom(spectrum, se);\n              }\n            })\n          ])\n        };\n      }\n    });\n    var SliderParts = [\n      labelPart,\n      ledgePart,\n      redgePart,\n      tedgePart,\n      bedgePart,\n      tlEdgePart,\n      trEdgePart,\n      blEdgePart,\n      brEdgePart,\n      thumbPart,\n      spectrumPart\n    ];\n\n    var _sliderChangeEvent = 'slider.change.value';\n    var sliderChangeEvent = constant$1(_sliderChangeEvent);\n    var isTouchEvent$2 = function (evt) {\n      return evt.type.indexOf('touch') !== -1;\n    };\n    var getEventSource = function (simulatedEvent) {\n      var evt = simulatedEvent.event.raw;\n      if (isTouchEvent$2(evt)) {\n        var touchEvent = evt;\n        return touchEvent.touches !== undefined && touchEvent.touches.length === 1 ? Optional.some(touchEvent.touches[0]).map(function (t) {\n          return SugarPosition(t.clientX, t.clientY);\n        }) : Optional.none();\n      } else {\n        var mouseEvent = evt;\n        return mouseEvent.clientX !== undefined ? Optional.some(mouseEvent).map(function (me) {\n          return SugarPosition(me.clientX, me.clientY);\n        }) : Optional.none();\n      }\n    };\n\n    var t = 'top', r = 'right', b = 'bottom', l = 'left';\n    var minX = function (detail) {\n      return detail.model.minX;\n    };\n    var minY = function (detail) {\n      return detail.model.minY;\n    };\n    var min1X = function (detail) {\n      return detail.model.minX - 1;\n    };\n    var min1Y = function (detail) {\n      return detail.model.minY - 1;\n    };\n    var maxX = function (detail) {\n      return detail.model.maxX;\n    };\n    var maxY = function (detail) {\n      return detail.model.maxY;\n    };\n    var max1X = function (detail) {\n      return detail.model.maxX + 1;\n    };\n    var max1Y = function (detail) {\n      return detail.model.maxY + 1;\n    };\n    var range = function (detail, max, min) {\n      return max(detail) - min(detail);\n    };\n    var xRange = function (detail) {\n      return range(detail, maxX, minX);\n    };\n    var yRange = function (detail) {\n      return range(detail, maxY, minY);\n    };\n    var halfX = function (detail) {\n      return xRange(detail) / 2;\n    };\n    var halfY = function (detail) {\n      return yRange(detail) / 2;\n    };\n    var step = function (detail) {\n      return detail.stepSize;\n    };\n    var snap = function (detail) {\n      return detail.snapToGrid;\n    };\n    var snapStart = function (detail) {\n      return detail.snapStart;\n    };\n    var rounded = function (detail) {\n      return detail.rounded;\n    };\n    var hasEdge = function (detail, edgeName) {\n      return detail[edgeName + '-edge'] !== undefined;\n    };\n    var hasLEdge = function (detail) {\n      return hasEdge(detail, l);\n    };\n    var hasREdge = function (detail) {\n      return hasEdge(detail, r);\n    };\n    var hasTEdge = function (detail) {\n      return hasEdge(detail, t);\n    };\n    var hasBEdge = function (detail) {\n      return hasEdge(detail, b);\n    };\n    var currentValue = function (detail) {\n      return detail.model.value.get();\n    };\n\n    var xValue = function (x) {\n      return { x: x };\n    };\n    var yValue = function (y) {\n      return { y: y };\n    };\n    var xyValue = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var fireSliderChange$3 = function (component, value) {\n      emitWith(component, sliderChangeEvent(), { value: value });\n    };\n    var setToTLEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(min1X(detail), min1Y(detail)));\n    };\n    var setToTEdge = function (edge, detail) {\n      fireSliderChange$3(edge, yValue(min1Y(detail)));\n    };\n    var setToTEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(halfX(detail), min1Y(detail)));\n    };\n    var setToTREdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(max1X(detail), min1Y(detail)));\n    };\n    var setToREdge = function (edge, detail) {\n      fireSliderChange$3(edge, xValue(max1X(detail)));\n    };\n    var setToREdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(max1X(detail), halfY(detail)));\n    };\n    var setToBREdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(max1X(detail), max1Y(detail)));\n    };\n    var setToBEdge = function (edge, detail) {\n      fireSliderChange$3(edge, yValue(max1Y(detail)));\n    };\n    var setToBEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(halfX(detail), max1Y(detail)));\n    };\n    var setToBLEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(min1X(detail), max1Y(detail)));\n    };\n    var setToLEdge = function (edge, detail) {\n      fireSliderChange$3(edge, xValue(min1X(detail)));\n    };\n    var setToLEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(min1X(detail), halfY(detail)));\n    };\n\n    var reduceBy = function (value, min, max, step) {\n      if (value < min) {\n        return value;\n      } else if (value > max) {\n        return max;\n      } else if (value === min) {\n        return min - 1;\n      } else {\n        return Math.max(min, value - step);\n      }\n    };\n    var increaseBy = function (value, min, max, step) {\n      if (value > max) {\n        return value;\n      } else if (value < min) {\n        return min;\n      } else if (value === max) {\n        return max + 1;\n      } else {\n        return Math.min(max, value + step);\n      }\n    };\n    var capValue = function (value, min, max) {\n      return Math.max(min, Math.min(max, value));\n    };\n    var snapValueOf = function (value, min, max, step, snapStart) {\n      return snapStart.fold(function () {\n        var initValue = value - min;\n        var extraValue = Math.round(initValue / step) * step;\n        return capValue(min + extraValue, min - 1, max + 1);\n      }, function (start) {\n        var remainder = (value - start) % step;\n        var adjustment = Math.round(remainder / step);\n        var rawSteps = Math.floor((value - start) / step);\n        var maxSteps = Math.floor((max - start) / step);\n        var numSteps = Math.min(maxSteps, rawSteps + adjustment);\n        var r = start + numSteps * step;\n        return Math.max(start, r);\n      });\n    };\n    var findOffsetOf = function (value, min, max) {\n      return Math.min(max, Math.max(value, min)) - min;\n    };\n    var findValueOf = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, step = args.step, snap = args.snap, snapStart = args.snapStart, rounded = args.rounded, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, minBound = args.minBound, maxBound = args.maxBound, screenRange = args.screenRange;\n      var capMin = hasMinEdge ? min - 1 : min;\n      var capMax = hasMaxEdge ? max + 1 : max;\n      if (value < minBound) {\n        return capMin;\n      } else if (value > maxBound) {\n        return capMax;\n      } else {\n        var offset = findOffsetOf(value, minBound, maxBound);\n        var newValue = capValue(offset / screenRange * range + min, capMin, capMax);\n        if (snap && newValue >= min && newValue <= max) {\n          return snapValueOf(newValue, min, max, step, snapStart);\n        } else if (rounded) {\n          return Math.round(newValue);\n        } else {\n          return newValue;\n        }\n      }\n    };\n    var findOffsetOfValue$2 = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, maxBound = args.maxBound, maxOffset = args.maxOffset, centerMinEdge = args.centerMinEdge, centerMaxEdge = args.centerMaxEdge;\n      if (value < min) {\n        return hasMinEdge ? 0 : centerMinEdge;\n      } else if (value > max) {\n        return hasMaxEdge ? maxBound : centerMaxEdge;\n      } else {\n        return (value - min) / range * maxOffset;\n      }\n    };\n\n    var top = 'top', right = 'right', bottom = 'bottom', left = 'left', width = 'width', height = 'height';\n    var getBounds = function (component) {\n      return component.element.dom.getBoundingClientRect();\n    };\n    var getBoundsProperty = function (bounds, property) {\n      return bounds[property];\n    };\n    var getMinXBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, left);\n    };\n    var getMaxXBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, right);\n    };\n    var getMinYBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, top);\n    };\n    var getMaxYBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, bottom);\n    };\n    var getXScreenRange = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, width);\n    };\n    var getYScreenRange = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, height);\n    };\n    var getCenterOffsetOf = function (componentMinEdge, componentMaxEdge, spectrumMinEdge) {\n      return (componentMinEdge + componentMaxEdge) / 2 - spectrumMinEdge;\n    };\n    var getXCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds(component);\n      var spectrumBounds = getBounds(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, left);\n      var componentMaxEdge = getBoundsProperty(componentBounds, right);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, left);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n    var getYCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds(component);\n      var spectrumBounds = getBounds(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, top);\n      var componentMaxEdge = getBoundsProperty(componentBounds, bottom);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, top);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n\n    var fireSliderChange$2 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$2 = function (x) {\n      return { x: x };\n    };\n    var findValueOfOffset$1 = function (spectrum, detail, left) {\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: left,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        maxBound: getMaxXBounds(spectrum),\n        screenRange: getXScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom$2 = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset$1(spectrum, detail, value);\n      var sliderVal = sliderValue$2(xValue);\n      fireSliderChange$2(spectrum, sliderVal);\n      return xValue;\n    };\n    var setToMin$2 = function (spectrum, detail) {\n      var min = minX(detail);\n      fireSliderChange$2(spectrum, sliderValue$2(min));\n    };\n    var setToMax$2 = function (spectrum, detail) {\n      var max = maxX(detail);\n      fireSliderChange$2(spectrum, sliderValue$2(max));\n    };\n    var moveBy$2 = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = f(currentValue(detail).x, minX(detail), maxX(detail), step(detail));\n      fireSliderChange$2(spectrum, sliderValue$2(xValue));\n      return Optional.some(xValue);\n    };\n    var handleMovement$2 = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy$2(direction, spectrum, detail).map(always);\n      };\n    };\n    var getValueFromEvent$2 = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.left;\n      });\n    };\n    var findOffsetOfValue$1 = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getXScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Optional.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Optional.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: value,\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxXBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue$2(args);\n    };\n    var findPositionOfValue$1 = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue$1(spectrum, detail, value, minEdge, maxEdge);\n      return getMinXBounds(spectrum) - getMinXBounds(slider) + offset;\n    };\n    var setPositionFromValue$2 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.x, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var thumbRadius = get$a(thumb.element) / 2;\n      set$7(thumb.element, 'left', pos - thumbRadius + 'px');\n    };\n    var onLeft$2 = handleMovement$2(-1);\n    var onRight$2 = handleMovement$2(1);\n    var onUp$2 = Optional.none;\n    var onDown$2 = Optional.none;\n    var edgeActions$2 = {\n      'top-left': Optional.none(),\n      'top': Optional.none(),\n      'top-right': Optional.none(),\n      'right': Optional.some(setToREdge),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.none(),\n      'bottom-left': Optional.none(),\n      'left': Optional.some(setToLEdge)\n    };\n\n    var HorizontalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$2,\n        setToMin: setToMin$2,\n        setToMax: setToMax$2,\n        findValueOfOffset: findValueOfOffset$1,\n        getValueFromEvent: getValueFromEvent$2,\n        findPositionOfValue: findPositionOfValue$1,\n        setPositionFromValue: setPositionFromValue$2,\n        onLeft: onLeft$2,\n        onRight: onRight$2,\n        onUp: onUp$2,\n        onDown: onDown$2,\n        edgeActions: edgeActions$2\n    });\n\n    var fireSliderChange$1 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$1 = function (y) {\n      return { y: y };\n    };\n    var findValueOfOffset = function (spectrum, detail, top) {\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: top,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        maxBound: getMaxYBounds(spectrum),\n        screenRange: getYScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom$1 = function (spectrum, detail, value) {\n      var yValue = findValueOfOffset(spectrum, detail, value);\n      var sliderVal = sliderValue$1(yValue);\n      fireSliderChange$1(spectrum, sliderVal);\n      return yValue;\n    };\n    var setToMin$1 = function (spectrum, detail) {\n      var min = minY(detail);\n      fireSliderChange$1(spectrum, sliderValue$1(min));\n    };\n    var setToMax$1 = function (spectrum, detail) {\n      var max = maxY(detail);\n      fireSliderChange$1(spectrum, sliderValue$1(max));\n    };\n    var moveBy$1 = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var yValue = f(currentValue(detail).y, minY(detail), maxY(detail), step(detail));\n      fireSliderChange$1(spectrum, sliderValue$1(yValue));\n      return Optional.some(yValue);\n    };\n    var handleMovement$1 = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy$1(direction, spectrum, detail).map(always);\n      };\n    };\n    var getValueFromEvent$1 = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.top;\n      });\n    };\n    var findOffsetOfValue = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getYScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Optional.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Optional.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: value,\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxYBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue$2(args);\n    };\n    var findPositionOfValue = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue(spectrum, detail, value, minEdge, maxEdge);\n      return getMinYBounds(spectrum) - getMinYBounds(slider) + offset;\n    };\n    var setPositionFromValue$1 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue(slider, edges.getSpectrum(slider), value.y, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbRadius = get$b(thumb.element) / 2;\n      set$7(thumb.element, 'top', pos - thumbRadius + 'px');\n    };\n    var onLeft$1 = Optional.none;\n    var onRight$1 = Optional.none;\n    var onUp$1 = handleMovement$1(-1);\n    var onDown$1 = handleMovement$1(1);\n    var edgeActions$1 = {\n      'top-left': Optional.none(),\n      'top': Optional.some(setToTEdge),\n      'top-right': Optional.none(),\n      'right': Optional.none(),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.some(setToBEdge),\n      'bottom-left': Optional.none(),\n      'left': Optional.none()\n    };\n\n    var VerticalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$1,\n        setToMin: setToMin$1,\n        setToMax: setToMax$1,\n        findValueOfOffset: findValueOfOffset,\n        getValueFromEvent: getValueFromEvent$1,\n        findPositionOfValue: findPositionOfValue,\n        setPositionFromValue: setPositionFromValue$1,\n        onLeft: onLeft$1,\n        onRight: onRight$1,\n        onUp: onUp$1,\n        onDown: onDown$1,\n        edgeActions: edgeActions$1\n    });\n\n    var fireSliderChange = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var setValueFrom = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset$1(spectrum, detail, value.left);\n      var yValue = findValueOfOffset(spectrum, detail, value.top);\n      var val = sliderValue(xValue, yValue);\n      fireSliderChange(spectrum, val);\n      return val;\n    };\n    var moveBy = function (direction, isVerticalMovement, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = isVerticalMovement ? currentValue(detail).x : f(currentValue(detail).x, minX(detail), maxX(detail), step(detail));\n      var yValue = !isVerticalMovement ? currentValue(detail).y : f(currentValue(detail).y, minY(detail), maxY(detail), step(detail));\n      fireSliderChange(spectrum, sliderValue(xValue, yValue));\n      return Optional.some(xValue);\n    };\n    var handleMovement = function (direction, isVerticalMovement) {\n      return function (spectrum, detail) {\n        return moveBy(direction, isVerticalMovement, spectrum, detail).map(always);\n      };\n    };\n    var setToMin = function (spectrum, detail) {\n      var mX = minX(detail);\n      var mY = minY(detail);\n      fireSliderChange(spectrum, sliderValue(mX, mY));\n    };\n    var setToMax = function (spectrum, detail) {\n      var mX = maxX(detail);\n      var mY = maxY(detail);\n      fireSliderChange(spectrum, sliderValue(mX, mY));\n    };\n    var getValueFromEvent = function (simulatedEvent) {\n      return getEventSource(simulatedEvent);\n    };\n    var setPositionFromValue = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var xPos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.x, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var yPos = findPositionOfValue(slider, edges.getSpectrum(slider), value.y, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbXRadius = get$a(thumb.element) / 2;\n      var thumbYRadius = get$b(thumb.element) / 2;\n      set$7(thumb.element, 'left', xPos - thumbXRadius + 'px');\n      set$7(thumb.element, 'top', yPos - thumbYRadius + 'px');\n    };\n    var onLeft = handleMovement(-1, false);\n    var onRight = handleMovement(1, false);\n    var onUp = handleMovement(-1, true);\n    var onDown = handleMovement(1, true);\n    var edgeActions = {\n      'top-left': Optional.some(setToTLEdgeXY),\n      'top': Optional.some(setToTEdgeXY),\n      'top-right': Optional.some(setToTREdgeXY),\n      'right': Optional.some(setToREdgeXY),\n      'bottom-right': Optional.some(setToBREdgeXY),\n      'bottom': Optional.some(setToBEdgeXY),\n      'bottom-left': Optional.some(setToBLEdgeXY),\n      'left': Optional.some(setToLEdgeXY)\n    };\n\n    var TwoDModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom,\n        setToMin: setToMin,\n        setToMax: setToMax,\n        getValueFromEvent: getValueFromEvent,\n        setPositionFromValue: setPositionFromValue,\n        onLeft: onLeft,\n        onRight: onRight,\n        onUp: onUp,\n        onDown: onDown,\n        edgeActions: edgeActions\n    });\n\n    var SliderSchema = [\n      defaulted('stepSize', 1),\n      defaulted('onChange', noop),\n      defaulted('onChoose', noop),\n      defaulted('onInit', noop),\n      defaulted('onDragStart', noop),\n      defaulted('onDragEnd', noop),\n      defaulted('snapToGrid', false),\n      defaulted('rounded', true),\n      option('snapStart'),\n      requiredOf('model', choose$1('mode', {\n        x: [\n          defaulted('minX', 0),\n          defaulted('maxX', 100),\n          customField('value', function (spec) {\n            return Cell(spec.mode.minX);\n          }),\n          required$1('getInitialValue'),\n          output$1('manager', HorizontalModel)\n        ],\n        y: [\n          defaulted('minY', 0),\n          defaulted('maxY', 100),\n          customField('value', function (spec) {\n            return Cell(spec.mode.minY);\n          }),\n          required$1('getInitialValue'),\n          output$1('manager', VerticalModel)\n        ],\n        xy: [\n          defaulted('minX', 0),\n          defaulted('maxX', 100),\n          defaulted('minY', 0),\n          defaulted('maxY', 100),\n          customField('value', function (spec) {\n            return Cell({\n              x: spec.mode.minX,\n              y: spec.mode.minY\n            });\n          }),\n          required$1('getInitialValue'),\n          output$1('manager', TwoDModel)\n        ]\n      })),\n      field('sliderBehaviours', [\n        Keying,\n        Representing\n      ]),\n      customField('mouseIsDown', function () {\n        return Cell(false);\n      })\n    ];\n\n    var sketch$2 = function (detail, components, _spec, _externals) {\n      var _a;\n      var getThumb = function (component) {\n        return getPartOrDie(component, detail, 'thumb');\n      };\n      var getSpectrum = function (component) {\n        return getPartOrDie(component, detail, 'spectrum');\n      };\n      var getLeftEdge = function (component) {\n        return getPart(component, detail, 'left-edge');\n      };\n      var getRightEdge = function (component) {\n        return getPart(component, detail, 'right-edge');\n      };\n      var getTopEdge = function (component) {\n        return getPart(component, detail, 'top-edge');\n      };\n      var getBottomEdge = function (component) {\n        return getPart(component, detail, 'bottom-edge');\n      };\n      var modelDetail = detail.model;\n      var model = modelDetail.manager;\n      var refresh = function (slider, thumb) {\n        model.setPositionFromValue(slider, thumb, detail, {\n          getLeftEdge: getLeftEdge,\n          getRightEdge: getRightEdge,\n          getTopEdge: getTopEdge,\n          getBottomEdge: getBottomEdge,\n          getSpectrum: getSpectrum\n        });\n      };\n      var setValue = function (slider, newValue) {\n        modelDetail.value.set(newValue);\n        var thumb = getThumb(slider);\n        refresh(slider, thumb);\n      };\n      var changeValue = function (slider, newValue) {\n        setValue(slider, newValue);\n        var thumb = getThumb(slider);\n        detail.onChange(slider, thumb, newValue);\n        return Optional.some(true);\n      };\n      var resetToMin = function (slider) {\n        model.setToMin(slider, detail);\n      };\n      var resetToMax = function (slider) {\n        model.setToMax(slider, detail);\n      };\n      var choose = function (slider) {\n        var fireOnChoose = function () {\n          getPart(slider, detail, 'thumb').each(function (thumb) {\n            var value = modelDetail.value.get();\n            detail.onChoose(slider, thumb, value);\n          });\n        };\n        var wasDown = detail.mouseIsDown.get();\n        detail.mouseIsDown.set(false);\n        if (wasDown) {\n          fireOnChoose();\n        }\n      };\n      var onDragStart = function (slider, simulatedEvent) {\n        simulatedEvent.stop();\n        detail.mouseIsDown.set(true);\n        detail.onDragStart(slider, getThumb(slider));\n      };\n      var onDragEnd = function (slider, simulatedEvent) {\n        simulatedEvent.stop();\n        detail.onDragEnd(slider, getThumb(slider));\n        choose(slider);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.sliderBehaviours, [\n          Keying.config({\n            mode: 'special',\n            focusIn: function (slider) {\n              return getPart(slider, detail, 'spectrum').map(Keying.focusIn).map(always);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (_) {\n                return modelDetail.value.get();\n              }\n            }\n          }),\n          Receiving.config({ channels: (_a = {}, _a[mouseReleased()] = { onReceive: choose }, _a) })\n        ]),\n        events: derive$2([\n          run$1(sliderChangeEvent(), function (slider, simulatedEvent) {\n            changeValue(slider, simulatedEvent.event.value);\n          }),\n          runOnAttached(function (slider, _simulatedEvent) {\n            var getInitial = modelDetail.getInitialValue();\n            modelDetail.value.set(getInitial);\n            var thumb = getThumb(slider);\n            refresh(slider, thumb);\n            var spectrum = getSpectrum(slider);\n            detail.onInit(slider, thumb, spectrum, modelDetail.value.get());\n          }),\n          run$1(touchstart(), onDragStart),\n          run$1(touchend(), onDragEnd),\n          run$1(mousedown(), onDragStart),\n          run$1(mouseup(), onDragEnd)\n        ]),\n        apis: {\n          resetToMin: resetToMin,\n          resetToMax: resetToMax,\n          setValue: setValue,\n          refresh: refresh\n        },\n        domModification: { styles: { position: 'relative' } }\n      };\n    };\n\n    var Slider = composite({\n      name: 'Slider',\n      configFields: SliderSchema,\n      partFields: SliderParts,\n      factory: sketch$2,\n      apis: {\n        setValue: function (apis, slider, value) {\n          apis.setValue(slider, value);\n        },\n        resetToMin: function (apis, slider) {\n          apis.resetToMin(slider);\n        },\n        resetToMax: function (apis, slider) {\n          apis.resetToMax(slider);\n        },\n        refresh: function (apis, slider) {\n          apis.refresh(slider);\n        }\n      }\n    });\n\n    var fieldsUpdate = generate$6('rgb-hex-update');\n    var sliderUpdate = generate$6('slider-update');\n    var paletteUpdate = generate$6('palette-update');\n\n    var sliderFactory = function (translate, getClass) {\n      var spectrum = Slider.parts.spectrum({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-spectrum')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var thumb = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-thumb')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      return Slider.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider')],\n          attributes: { role: 'presentation' }\n        },\n        rounded: false,\n        model: {\n          mode: 'y',\n          getInitialValue: constant$1({ y: 0 })\n        },\n        components: [\n          spectrum,\n          thumb\n        ],\n        sliderBehaviours: derive$1([Focusing.config({})]),\n        onChange: function (slider, _thumb, value) {\n          emitWith(slider, sliderUpdate, { value: value });\n        }\n      });\n    };\n\n    var owner$1 = 'form';\n    var schema$i = [field('formBehaviours', [Representing])];\n    var getPartName$1 = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch$1 = function (fSpec) {\n      var parts = function () {\n        var record = [];\n        var field = function (name, config) {\n          record.push(name);\n          return generateOne$1(owner$1, getPartName$1(name), config);\n        };\n        return {\n          field: field,\n          record: constant$1(record)\n        };\n      }();\n      var spec = fSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map$2(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName$1(n)\n        });\n      });\n      return composite$1(owner$1, schema$i, fieldParts, make$4, spec);\n    };\n    var toResult = function (o, e) {\n      return o.fold(function () {\n        return Result.error(e);\n      }, Result.value);\n    };\n    var make$4 = function (detail, components) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.formBehaviours, [Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (form) {\n                var resPs = getAllParts(form, detail);\n                return map$1(resPs, function (resPThunk, pName) {\n                  return resPThunk().bind(function (v) {\n                    var opt = Composing.getCurrent(v);\n                    return toResult(opt, new Error('Cannot find a current component to extract the value from for form part \\'' + pName + '\\': ' + element(v.element)));\n                  }).map(Representing.getValue);\n                });\n              },\n              setValue: function (form, values) {\n                each(values, function (newValue, key) {\n                  getPart(form, detail, key).each(function (wrapper) {\n                    Composing.getCurrent(wrapper).each(function (field) {\n                      Representing.setValue(field, newValue);\n                    });\n                  });\n                });\n              }\n            }\n          })]),\n        apis: {\n          getField: function (form, key) {\n            return getPart(form, detail, key).bind(Composing.getCurrent);\n          }\n        }\n      };\n    };\n    var Form = {\n      getField: makeApi(function (apis, component, key) {\n        return apis.getField(component, key);\n      }),\n      sketch: sketch$1\n    };\n\n    var validInput = generate$6('valid-input');\n    var invalidInput = generate$6('invalid-input');\n    var validatingInput = generate$6('validating-input');\n    var translatePrefix = 'colorcustom.rgb.';\n    var rgbFormFactory = function (translate, getClass, onValidHexx, onInvalidHexx) {\n      var invalidation = function (label, isValid) {\n        return Invalidating.config({\n          invalidClass: getClass('invalid'),\n          notify: {\n            onValidate: function (comp) {\n              emitWith(comp, validatingInput, { type: label });\n            },\n            onValid: function (comp) {\n              emitWith(comp, validInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            },\n            onInvalid: function (comp) {\n              emitWith(comp, invalidInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            }\n          },\n          validator: {\n            validate: function (comp) {\n              var value = Representing.getValue(comp);\n              var res = isValid(value) ? Result.value(true) : Result.error(translate('aria.input.invalid'));\n              return Future.pure(res);\n            },\n            validateOnLoad: false\n          }\n        });\n      };\n      var renderTextField = function (isValid, name, label, description, data) {\n        var helptext = translate(translatePrefix + 'range');\n        var pLabel = FormField.parts.label({\n          dom: {\n            tag: 'label',\n            innerHtml: label,\n            attributes: { 'aria-label': description }\n          }\n        });\n        var pField = FormField.parts.field({\n          data: data,\n          factory: Input,\n          inputAttributes: __assign({ type: 'text' }, name === 'hex' ? { 'aria-live': 'polite' } : {}),\n          inputClasses: [getClass('textfield')],\n          inputBehaviours: derive$1([\n            invalidation(name, isValid),\n            Tabstopping.config({})\n          ]),\n          onSetValue: function (input) {\n            if (Invalidating.isInvalid(input)) {\n              var run = Invalidating.run(input);\n              run.get(noop);\n            }\n          }\n        });\n        var comps = [\n          pLabel,\n          pField\n        ];\n        var concats = name !== 'hex' ? [FormField.parts['aria-descriptor']({ text: helptext })] : [];\n        var components = comps.concat(concats);\n        return {\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' }\n          },\n          components: components\n        };\n      };\n      var copyRgbToHex = function (form, rgba) {\n        var hex = fromRgba(rgba);\n        Form.getField(form, 'hex').each(function (hexField) {\n          if (!Focusing.isFocused(hexField)) {\n            Representing.setValue(form, { hex: hex.value });\n          }\n        });\n        return hex;\n      };\n      var copyRgbToForm = function (form, rgb) {\n        var red = rgb.red;\n        var green = rgb.green;\n        var blue = rgb.blue;\n        Representing.setValue(form, {\n          red: red,\n          green: green,\n          blue: blue\n        });\n      };\n      var memPreview = record({\n        dom: {\n          tag: 'div',\n          classes: [getClass('rgba-preview')],\n          styles: { 'background-color': 'white' },\n          attributes: { role: 'presentation' }\n        }\n      });\n      var updatePreview = function (anyInSystem, hex) {\n        memPreview.getOpt(anyInSystem).each(function (preview) {\n          set$7(preview.element, 'background-color', '#' + hex.value);\n        });\n      };\n      var factory = function () {\n        var state = {\n          red: Cell(Optional.some(255)),\n          green: Cell(Optional.some(255)),\n          blue: Cell(Optional.some(255)),\n          hex: Cell(Optional.some('ffffff'))\n        };\n        var copyHexToRgb = function (form, hex) {\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n        };\n        var get = function (prop) {\n          return state[prop].get();\n        };\n        var set = function (prop, value) {\n          state[prop].set(value);\n        };\n        var getValueRgb = function () {\n          return get('red').bind(function (red) {\n            return get('green').bind(function (green) {\n              return get('blue').map(function (blue) {\n                return rgbaColour(red, green, blue, 1);\n              });\n            });\n          });\n        };\n        var setValueRgb = function (rgb) {\n          var red = rgb.red;\n          var green = rgb.green;\n          var blue = rgb.blue;\n          set('red', Optional.some(red));\n          set('green', Optional.some(green));\n          set('blue', Optional.some(blue));\n        };\n        var onInvalidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event;\n          if (data.type !== 'hex') {\n            set(data.type, Optional.none());\n          } else {\n            onInvalidHexx(form);\n          }\n        };\n        var onValidHex = function (form, value) {\n          onValidHexx(form);\n          var hex = hexColour(value);\n          set('hex', Optional.some(value));\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n          emitWith(form, fieldsUpdate, { hex: hex });\n          updatePreview(form, hex);\n        };\n        var onValidRgb = function (form, prop, value) {\n          var val = parseInt(value, 10);\n          set(prop, Optional.some(val));\n          getValueRgb().each(function (rgb) {\n            var hex = copyRgbToHex(form, rgb);\n            emitWith(form, fieldsUpdate, { hex: hex });\n            updatePreview(form, hex);\n          });\n        };\n        var isHexInputEvent = function (data) {\n          return data.type === 'hex';\n        };\n        var onValidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event;\n          if (isHexInputEvent(data)) {\n            onValidHex(form, data.value);\n          } else {\n            onValidRgb(form, data.type, data.value);\n          }\n        };\n        var formPartStrings = function (key) {\n          return {\n            label: translate(translatePrefix + key + '.label'),\n            description: translate(translatePrefix + key + '.description')\n          };\n        };\n        var redStrings = formPartStrings('red');\n        var greenStrings = formPartStrings('green');\n        var blueStrings = formPartStrings('blue');\n        var hexStrings = formPartStrings('hex');\n        return deepMerge(Form.sketch(function (parts) {\n          return {\n            dom: {\n              tag: 'form',\n              classes: [getClass('rgb-form')],\n              attributes: { 'aria-label': translate('aria.color.picker') }\n            },\n            components: [\n              parts.field('red', FormField.sketch(renderTextField(isRgbaComponent, 'red', redStrings.label, redStrings.description, 255))),\n              parts.field('green', FormField.sketch(renderTextField(isRgbaComponent, 'green', greenStrings.label, greenStrings.description, 255))),\n              parts.field('blue', FormField.sketch(renderTextField(isRgbaComponent, 'blue', blueStrings.label, blueStrings.description, 255))),\n              parts.field('hex', FormField.sketch(renderTextField(isHexString, 'hex', hexStrings.label, hexStrings.description, 'ffffff'))),\n              memPreview.asSpec()\n            ],\n            formBehaviours: derive$1([\n              Invalidating.config({ invalidClass: getClass('form-invalid') }),\n              config('rgb-form-events', [\n                run$1(validInput, onValidInput),\n                run$1(invalidInput, onInvalidInput),\n                run$1(validatingInput, onInvalidInput)\n              ])\n            ])\n          };\n        }), {\n          apis: {\n            updateHex: function (form, hex) {\n              Representing.setValue(form, { hex: hex.value });\n              copyHexToRgb(form, hex);\n              updatePreview(form, hex);\n            }\n          }\n        });\n      };\n      var rgbFormSketcher = single({\n        factory: factory,\n        name: 'RgbForm',\n        configFields: [],\n        apis: {\n          updateHex: function (apis, form, hex) {\n            apis.updateHex(form, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return rgbFormSketcher;\n    };\n\n    var paletteFactory = function (_translate, getClass) {\n      var spectrumPart = Slider.parts.spectrum({\n        dom: {\n          tag: 'canvas',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-spectrum')]\n        }\n      });\n      var thumbPart = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-thumb')],\n          innerHtml: '<div class=' + getClass('sv-palette-inner-thumb') + ' role=\"presentation\"></div>'\n        }\n      });\n      var setColour = function (canvas, rgba) {\n        var width = canvas.width, height = canvas.height;\n        var ctx = canvas.getContext('2d');\n        if (ctx === null) {\n          return;\n        }\n        ctx.fillStyle = rgba;\n        ctx.fillRect(0, 0, width, height);\n        var grdWhite = ctx.createLinearGradient(0, 0, width, 0);\n        grdWhite.addColorStop(0, 'rgba(255,255,255,1)');\n        grdWhite.addColorStop(1, 'rgba(255,255,255,0)');\n        ctx.fillStyle = grdWhite;\n        ctx.fillRect(0, 0, width, height);\n        var grdBlack = ctx.createLinearGradient(0, 0, 0, height);\n        grdBlack.addColorStop(0, 'rgba(0,0,0,0)');\n        grdBlack.addColorStop(1, 'rgba(0,0,0,1)');\n        ctx.fillStyle = grdBlack;\n        ctx.fillRect(0, 0, width, height);\n      };\n      var setPaletteHue = function (slider, hue) {\n        var canvas = slider.components()[0].element.dom;\n        var hsv = hsvColour(hue, 100, 100);\n        var rgba = fromHsv(hsv);\n        setColour(canvas, toString(rgba));\n      };\n      var setPaletteThumb = function (slider, hex) {\n        var hsv = fromRgb(fromHex(hex));\n        Slider.setValue(slider, {\n          x: hsv.saturation,\n          y: 100 - hsv.value\n        });\n      };\n      var factory = function (_detail) {\n        var getInitialValue = constant$1({\n          x: 0,\n          y: 0\n        });\n        var onChange = function (slider, _thumb, value) {\n          emitWith(slider, paletteUpdate, { value: value });\n        };\n        var onInit = function (_slider, _thumb, spectrum, _value) {\n          setColour(spectrum.element.dom, toString(red));\n        };\n        var sliderBehaviours = derive$1([\n          Composing.config({ find: Optional.some }),\n          Focusing.config({})\n        ]);\n        return Slider.sketch({\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' },\n            classes: [getClass('sv-palette')]\n          },\n          model: {\n            mode: 'xy',\n            getInitialValue: getInitialValue\n          },\n          rounded: false,\n          components: [\n            spectrumPart,\n            thumbPart\n          ],\n          onChange: onChange,\n          onInit: onInit,\n          sliderBehaviours: sliderBehaviours\n        });\n      };\n      var saturationBrightnessPaletteSketcher = single({\n        factory: factory,\n        name: 'SaturationBrightnessPalette',\n        configFields: [],\n        apis: {\n          setHue: function (_apis, slider, hue) {\n            setPaletteHue(slider, hue);\n          },\n          setThumb: function (_apis, slider, hex) {\n            setPaletteThumb(slider, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return saturationBrightnessPaletteSketcher;\n    };\n\n    var makeFactory = function (translate, getClass) {\n      var factory = function (detail) {\n        var rgbForm = rgbFormFactory(translate, getClass, detail.onValidHex, detail.onInvalidHex);\n        var sbPalette = paletteFactory(translate, getClass);\n        var hueSliderToDegrees = function (hue) {\n          return (100 - hue) / 100 * 360;\n        };\n        var hueDegreesToSlider = function (hue) {\n          return 100 - hue / 360 * 100;\n        };\n        var state = {\n          paletteRgba: Cell(red),\n          paletteHue: Cell(0)\n        };\n        var memSlider = record(sliderFactory(translate, getClass));\n        var memPalette = record(sbPalette.sketch({}));\n        var memRgb = record(rgbForm.sketch({}));\n        var updatePalette = function (anyInSystem, _hex, hue) {\n          memPalette.getOpt(anyInSystem).each(function (palette) {\n            sbPalette.setHue(palette, hue);\n          });\n        };\n        var updateFields = function (anyInSystem, hex) {\n          memRgb.getOpt(anyInSystem).each(function (form) {\n            rgbForm.updateHex(form, hex);\n          });\n        };\n        var updateSlider = function (anyInSystem, _hex, hue) {\n          memSlider.getOpt(anyInSystem).each(function (slider) {\n            Slider.setValue(slider, { y: hueDegreesToSlider(hue) });\n          });\n        };\n        var updatePaletteThumb = function (anyInSystem, hex) {\n          memPalette.getOpt(anyInSystem).each(function (palette) {\n            sbPalette.setThumb(palette, hex);\n          });\n        };\n        var updateState = function (hex, hue) {\n          var rgba = fromHex(hex);\n          state.paletteRgba.set(rgba);\n          state.paletteHue.set(hue);\n        };\n        var runUpdates = function (anyInSystem, hex, hue, updates) {\n          updateState(hex, hue);\n          each$1(updates, function (update) {\n            update(anyInSystem, hex, hue);\n          });\n        };\n        var onPaletteUpdate = function () {\n          var updates = [updateFields];\n          return function (form, simulatedEvent) {\n            var value = simulatedEvent.event.value;\n            var oldHue = state.paletteHue.get();\n            var newHsv = hsvColour(oldHue, value.x, 100 - value.y);\n            var newHex = hsvToHex(newHsv);\n            runUpdates(form, newHex, oldHue, updates);\n          };\n        };\n        var onSliderUpdate = function () {\n          var updates = [\n            updatePalette,\n            updateFields\n          ];\n          return function (form, simulatedEvent) {\n            var hue = hueSliderToDegrees(simulatedEvent.event.value.y);\n            var oldRgb = state.paletteRgba.get();\n            var oldHsv = fromRgb(oldRgb);\n            var newHsv = hsvColour(hue, oldHsv.saturation, oldHsv.value);\n            var newHex = hsvToHex(newHsv);\n            runUpdates(form, newHex, hue, updates);\n          };\n        };\n        var onFieldsUpdate = function () {\n          var updates = [\n            updatePalette,\n            updateSlider,\n            updatePaletteThumb\n          ];\n          return function (form, simulatedEvent) {\n            var hex = simulatedEvent.event.hex;\n            var hsv = hexToHsv(hex);\n            runUpdates(form, hex, hsv.hue, updates);\n          };\n        };\n        return {\n          uid: detail.uid,\n          dom: detail.dom,\n          components: [\n            memPalette.asSpec(),\n            memSlider.asSpec(),\n            memRgb.asSpec()\n          ],\n          behaviours: derive$1([\n            config('colour-picker-events', [\n              run$1(fieldsUpdate, onFieldsUpdate()),\n              run$1(paletteUpdate, onPaletteUpdate()),\n              run$1(sliderUpdate, onSliderUpdate())\n            ]),\n            Composing.config({\n              find: function (comp) {\n                return memRgb.getOpt(comp);\n              }\n            }),\n            Keying.config({ mode: 'acyclic' })\n          ])\n        };\n      };\n      var colourPickerSketcher = single({\n        name: 'ColourPicker',\n        configFields: [\n          required$1('dom'),\n          defaulted('onValidHex', noop),\n          defaulted('onInvalidHex', noop)\n        ],\n        factory: factory\n      });\n      return colourPickerSketcher;\n    };\n\n    var self$1 = function () {\n      return Composing.config({ find: Optional.some });\n    };\n    var memento$1 = function (mem) {\n      return Composing.config({ find: mem.getOpt });\n    };\n    var childAt = function (index) {\n      return Composing.config({\n        find: function (comp) {\n          return child$2(comp.element, index).bind(function (element) {\n            return comp.getSystem().getByDom(element).toOptional();\n          });\n        }\n      });\n    };\n    var ComposingConfigs = {\n      self: self$1,\n      memento: memento$1,\n      childAt: childAt\n    };\n\n    var english = {\n      'colorcustom.rgb.red.label': 'R',\n      'colorcustom.rgb.red.description': 'Red component',\n      'colorcustom.rgb.green.label': 'G',\n      'colorcustom.rgb.green.description': 'Green component',\n      'colorcustom.rgb.blue.label': 'B',\n      'colorcustom.rgb.blue.description': 'Blue component',\n      'colorcustom.rgb.hex.label': '#',\n      'colorcustom.rgb.hex.description': 'Hex color code',\n      'colorcustom.rgb.range': 'Range 0 to 255',\n      'colorcustom.sb.saturation': 'Saturation',\n      'colorcustom.sb.brightness': 'Brightness',\n      'colorcustom.sb.picker': 'Saturation and Brightness Picker',\n      'colorcustom.sb.palette': 'Saturation and Brightness Palette',\n      'colorcustom.sb.instructions': 'Use arrow keys to select saturation and brightness, on x and y axes',\n      'colorcustom.hue.hue': 'Hue',\n      'colorcustom.hue.slider': 'Hue Slider',\n      'colorcustom.hue.palette': 'Hue Palette',\n      'colorcustom.hue.instructions': 'Use arrow keys to select a hue',\n      'aria.color.picker': 'Color Picker',\n      'aria.input.invalid': 'Invalid input'\n    };\n    var getEnglishText = function (key) {\n      return english[key];\n    };\n    var translate$1 = function (key) {\n      return getEnglishText(key);\n    };\n    var renderColorPicker = function (_spec) {\n      var getClass = function (key) {\n        return 'tox-' + key;\n      };\n      var colourPickerFactory = makeFactory(translate$1, getClass);\n      var onValidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: true\n        });\n      };\n      var onInvalidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: false\n        });\n      };\n      var memPicker = record(colourPickerFactory.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('color-picker-container')],\n          attributes: { role: 'presentation' }\n        },\n        onValidHex: onValidHex,\n        onInvalidHex: onInvalidHex\n      }));\n      return {\n        dom: { tag: 'div' },\n        components: [memPicker.asSpec()],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                var optHex = optRgbForm.bind(function (rgbForm) {\n                  var formValues = Representing.getValue(rgbForm);\n                  return formValues.hex;\n                });\n                return optHex.map(function (hex) {\n                  return '#' + hex;\n                }).getOr('');\n              },\n              setValue: function (comp, newValue) {\n                var pattern = /^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/;\n                var m = pattern.exec(newValue);\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                optRgbForm.fold(function () {\n                  console.log('Can not find form');\n                }, function (rgbForm) {\n                  Representing.setValue(rgbForm, { hex: Optional.from(m[1]).getOr('') });\n                  Form.getField(rgbForm, 'hex').each(function (hexField) {\n                    emit(hexField, input());\n                  });\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.Resource');\n\n    var isOldCustomEditor = function (spec) {\n      return has$2(spec, 'init');\n    };\n    var renderCustomEditor = function (spec) {\n      var editorApi = value$1();\n      var memReplaced = record({ dom: { tag: spec.tag } });\n      var initialValue = value$1();\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-custom-editor']\n        },\n        behaviours: derive$1([\n          config('custom-editor-events', [runOnAttached(function (component) {\n              memReplaced.getOpt(component).each(function (ta) {\n                (isOldCustomEditor(spec) ? spec.init(ta.element.dom) : global$6.load(spec.scriptId, spec.scriptUrl).then(function (init) {\n                  return init(ta.element.dom, spec.settings);\n                })).then(function (ea) {\n                  initialValue.on(function (cvalue) {\n                    ea.setValue(cvalue);\n                  });\n                  initialValue.clear();\n                  editorApi.set(ea);\n                });\n              });\n            })]),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return editorApi.get().fold(function () {\n                  return initialValue.get().getOr('');\n                }, function (ed) {\n                  return ed.getValue();\n                });\n              },\n              setValue: function (component, value) {\n                editorApi.get().fold(function () {\n                  initialValue.set(value);\n                }, function (ed) {\n                  return ed.setValue(value);\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ]),\n        components: [memReplaced.asSpec()]\n      };\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var processors = objOf([\n      defaulted('preprocess', identity$1),\n      defaulted('postprocess', identity$1)\n    ]);\n    var memento = function (mem, rawProcessors) {\n      var ps = asRawOrDie$1('RepresentingConfigs.memento processors', processors, rawProcessors);\n      return Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var other = mem.get(comp);\n            var rawValue = Representing.getValue(other);\n            return ps.postprocess(rawValue);\n          },\n          setValue: function (comp, rawValue) {\n            var newValue = ps.preprocess(rawValue);\n            var other = mem.get(comp);\n            Representing.setValue(other, newValue);\n          }\n        }\n      });\n    };\n    var withComp = function (optInitialValue, getter, setter) {\n      return Representing.config(deepMerge({\n        store: {\n          mode: 'manual',\n          getValue: getter,\n          setValue: setter\n        }\n      }, optInitialValue.map(function (initialValue) {\n        return { store: { initialValue: initialValue } };\n      }).getOr({})));\n    };\n    var withElement = function (initialValue, getter, setter) {\n      return withComp(initialValue, function (c) {\n        return getter(c.element);\n      }, function (c, v) {\n        return setter(c.element, v);\n      });\n    };\n    var domValue = function (optInitialValue) {\n      return withElement(optInitialValue, get$5, set$4);\n    };\n    var domHtml = function (optInitialValue) {\n      return withElement(optInitialValue, get$7, set$5);\n    };\n    var memory = function (initialValue) {\n      return Representing.config({\n        store: {\n          mode: 'memory',\n          initialValue: initialValue\n        }\n      });\n    };\n    var RepresentingConfigs = {\n      memento: memento,\n      withElement: withElement,\n      withComp: withComp,\n      domValue: domValue,\n      domHtml: domHtml,\n      memory: memory\n    };\n\n    var defaultImageFileTypes = 'jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp';\n    var filterByExtension = function (files, providersBackstage) {\n      var allowedImageFileTypes = global$5.explode(providersBackstage.getSetting('images_file_types', defaultImageFileTypes, 'string'));\n      var isFileInAllowedTypes = function (file) {\n        return exists(allowedImageFileTypes, function (type) {\n          return endsWith(file.name.toLowerCase(), '.' + type.toLowerCase());\n        });\n      };\n      return filter$2(from(files), isFileInAllowedTypes);\n    };\n    var renderDropZone = function (spec, providersBackstage) {\n      var stopper = function (_, se) {\n        se.stop();\n      };\n      var sequence = function (actions) {\n        return function (comp, se) {\n          each$1(actions, function (a) {\n            a(comp, se);\n          });\n        };\n      };\n      var onDrop = function (comp, se) {\n        if (!Disabling.isDisabled(comp)) {\n          var transferEvent = se.event.raw;\n          handleFiles(comp, transferEvent.dataTransfer.files);\n        }\n      };\n      var onSelect = function (component, simulatedEvent) {\n        var input = simulatedEvent.event.raw.target;\n        handleFiles(component, input.files);\n      };\n      var handleFiles = function (component, files) {\n        Representing.setValue(component, filterByExtension(files, providersBackstage));\n        emitWith(component, formChangeEvent, { name: spec.name });\n      };\n      var memInput = record({\n        dom: {\n          tag: 'input',\n          attributes: {\n            type: 'file',\n            accept: 'image/*'\n          },\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([config('input-file-events', [\n            cutter(click()),\n            cutter(tap())\n          ])])\n      });\n      var renderField = function (s) {\n        return {\n          uid: s.uid,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dropzone-container']\n          },\n          behaviours: derive$1([\n            RepresentingConfigs.memory([]),\n            ComposingConfigs.self(),\n            Disabling.config({}),\n            Toggling.config({\n              toggleClass: 'dragenter',\n              toggleOnExecute: false\n            }),\n            config('dropzone-events', [\n              run$1('dragenter', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run$1('dragleave', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run$1('dragover', stopper),\n              run$1('drop', sequence([\n                stopper,\n                onDrop\n              ])),\n              run$1(change(), onSelect)\n            ])\n          ]),\n          components: [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-dropzone'],\n                styles: {}\n              },\n              components: [\n                {\n                  dom: {\n                    tag: 'p',\n                    innerHtml: providersBackstage.translate('Drop an image here')\n                  }\n                },\n                Button.sketch({\n                  dom: {\n                    tag: 'button',\n                    innerHtml: providersBackstage.translate('Browse for an image'),\n                    styles: { position: 'relative' },\n                    classes: [\n                      'tox-button',\n                      'tox-button--secondary'\n                    ]\n                  },\n                  components: [memInput.asSpec()],\n                  action: function (comp) {\n                    var inputComp = memInput.get(comp);\n                    inputComp.element.dom.click();\n                  },\n                  buttonBehaviours: derive$1([\n                    Tabstopping.config({}),\n                    DisablingConfigs.button(providersBackstage.isDisabled),\n                    receivingConfig()\n                  ])\n                })\n              ]\n            }]\n        };\n      };\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({ factory: { sketch: renderField } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    var renderGrid = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-form__grid',\n            'tox-form__grid--' + spec.columns + 'col'\n          ]\n        },\n        components: map$2(spec.items, backstage.interpreter)\n      };\n    };\n\n    var beforeObject = generate$6('alloy-fake-before-tabstop');\n    var afterObject = generate$6('alloy-fake-after-tabstop');\n    var craftWithClasses = function (classes) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: {\n            width: '1px',\n            height: '1px',\n            outline: 'none'\n          },\n          attributes: { tabindex: '0' },\n          classes: classes\n        },\n        behaviours: derive$1([\n          Focusing.config({ ignore: true }),\n          Tabstopping.config({})\n        ])\n      };\n    };\n    var craft = function (spec) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-navobj']\n        },\n        components: [\n          craftWithClasses([beforeObject]),\n          spec,\n          craftWithClasses([afterObject])\n        ],\n        behaviours: derive$1([ComposingConfigs.childAt(1)])\n      };\n    };\n    var triggerTab = function (placeholder, shiftKey) {\n      emitWith(placeholder, keydown(), {\n        raw: {\n          which: 9,\n          shiftKey: shiftKey\n        }\n      });\n    };\n    var onFocus = function (container, targetComp) {\n      var target = targetComp.element;\n      if (has(target, beforeObject)) {\n        triggerTab(container, true);\n      } else if (has(target, afterObject)) {\n        triggerTab(container, false);\n      }\n    };\n    var isPseudoStop = function (element) {\n      return closest(element, [\n        '.' + beforeObject,\n        '.' + afterObject\n      ].join(','), never);\n    };\n\n    var platformNeedsSandboxing = !(detect$1().browser.isIE() || detect$1().browser.isEdge());\n    var getDynamicSource = function (isSandbox) {\n      var cachedValue = Cell('');\n      return {\n        getValue: function (_frameComponent) {\n          return cachedValue.get();\n        },\n        setValue: function (frameComponent, html) {\n          if (!isSandbox) {\n            set$8(frameComponent.element, 'src', 'javascript:\\'\\'');\n            var doc = frameComponent.element.dom.contentWindow.document;\n            doc.open();\n            doc.write(html);\n            doc.close();\n          } else {\n            set$8(frameComponent.element, 'srcdoc', html);\n          }\n          cachedValue.set(html);\n        }\n      };\n    };\n    var renderIFrame = function (spec, providersBackstage) {\n      var isSandbox = platformNeedsSandboxing && spec.sandboxed;\n      var attributes = __assign(__assign({}, spec.label.map(function (title) {\n        return { title: title };\n      }).getOr({})), isSandbox ? { sandbox: 'allow-scripts allow-same-origin' } : {});\n      var sourcing = getDynamicSource(isSandbox);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var factory = function (newSpec) {\n        return craft({\n          uid: newSpec.uid,\n          dom: {\n            tag: 'iframe',\n            attributes: attributes\n          },\n          behaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({}),\n            RepresentingConfigs.withComp(Optional.none(), sourcing.getValue, sourcing.setValue)\n          ])\n        });\n      };\n      var pField = FormField.parts.field({ factory: { sketch: factory } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    var create$4 = function (width, height) {\n      return resize$3(document.createElement('canvas'), width, height);\n    };\n    var clone$1 = function (canvas) {\n      var tCanvas = create$4(canvas.width, canvas.height);\n      var ctx = get2dContext(tCanvas);\n      ctx.drawImage(canvas, 0, 0);\n      return tCanvas;\n    };\n    var get2dContext = function (canvas) {\n      return canvas.getContext('2d');\n    };\n    var resize$3 = function (canvas, width, height) {\n      canvas.width = width;\n      canvas.height = height;\n      return canvas;\n    };\n\n    var getWidth$1 = function (image) {\n      return image.naturalWidth || image.width;\n    };\n    var getHeight$1 = function (image) {\n      return image.naturalHeight || image.height;\n    };\n\n    var blobToImage = function (blob) {\n      return new Promise$1(function (resolve, reject) {\n        var blobUrl = URL.createObjectURL(blob);\n        var image = new Image();\n        var removeListeners = function () {\n          image.removeEventListener('load', loaded);\n          image.removeEventListener('error', error);\n        };\n        var loaded = function () {\n          removeListeners();\n          resolve(image);\n        };\n        var error = function () {\n          removeListeners();\n          reject('Unable to load data of type ' + blob.type + ': ' + blobUrl);\n        };\n        image.addEventListener('load', loaded);\n        image.addEventListener('error', error);\n        image.src = blobUrl;\n        if (image.complete) {\n          setTimeout(loaded, 0);\n        }\n      });\n    };\n    var dataUriToBlobSync = function (uri) {\n      var data = uri.split(',');\n      var matches = /data:([^;]+)/.exec(data[0]);\n      if (!matches) {\n        return Optional.none();\n      }\n      var mimetype = matches[1];\n      var base64 = data[1];\n      var sliceSize = 1024;\n      var byteCharacters = atob(base64);\n      var bytesLength = byteCharacters.length;\n      var slicesCount = Math.ceil(bytesLength / sliceSize);\n      var byteArrays = new Array(slicesCount);\n      for (var sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n        var begin = sliceIndex * sliceSize;\n        var end = Math.min(begin + sliceSize, bytesLength);\n        var bytes = new Array(end - begin);\n        for (var offset = begin, i = 0; offset < end; ++i, ++offset) {\n          bytes[i] = byteCharacters[offset].charCodeAt(0);\n        }\n        byteArrays[sliceIndex] = new Uint8Array(bytes);\n      }\n      return Optional.some(new Blob(byteArrays, { type: mimetype }));\n    };\n    var dataUriToBlob = function (uri) {\n      return new Promise$1(function (resolve, reject) {\n        dataUriToBlobSync(uri).fold(function () {\n          reject('uri is not base64: ' + uri);\n        }, resolve);\n      });\n    };\n    var canvasToBlob = function (canvas, type, quality) {\n      type = type || 'image/png';\n      if (isFunction(HTMLCanvasElement.prototype.toBlob)) {\n        return new Promise$1(function (resolve, reject) {\n          canvas.toBlob(function (blob) {\n            if (blob) {\n              resolve(blob);\n            } else {\n              reject();\n            }\n          }, type, quality);\n        });\n      } else {\n        return dataUriToBlob(canvas.toDataURL(type, quality));\n      }\n    };\n    var canvasToDataURL = function (canvas, type, quality) {\n      type = type || 'image/png';\n      return canvas.toDataURL(type, quality);\n    };\n    var blobToCanvas = function (blob) {\n      return blobToImage(blob).then(function (image) {\n        revokeImageUrl(image);\n        var canvas = create$4(getWidth$1(image), getHeight$1(image));\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0);\n        return canvas;\n      });\n    };\n    var blobToDataUri = function (blob) {\n      return new Promise$1(function (resolve) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n    var revokeImageUrl = function (image) {\n      URL.revokeObjectURL(image.src);\n    };\n\n    var create$3 = function (getCanvas, blob, uri) {\n      var initialType = blob.type;\n      var getType = constant$1(initialType);\n      var toBlob = function () {\n        return Promise$1.resolve(blob);\n      };\n      var toDataURL = constant$1(uri);\n      var toBase64 = function () {\n        return uri.split(',')[1];\n      };\n      var toAdjustedBlob = function (type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToBlob(canvas, type, quality);\n        });\n      };\n      var toAdjustedDataURL = function (type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToDataURL(canvas, type, quality);\n        });\n      };\n      var toAdjustedBase64 = function (type, quality) {\n        return toAdjustedDataURL(type, quality).then(function (dataurl) {\n          return dataurl.split(',')[1];\n        });\n      };\n      var toCanvas = function () {\n        return getCanvas.then(clone$1);\n      };\n      return {\n        getType: getType,\n        toBlob: toBlob,\n        toDataURL: toDataURL,\n        toBase64: toBase64,\n        toAdjustedBlob: toAdjustedBlob,\n        toAdjustedDataURL: toAdjustedDataURL,\n        toAdjustedBase64: toAdjustedBase64,\n        toCanvas: toCanvas\n      };\n    };\n    var fromBlob = function (blob) {\n      return blobToDataUri(blob).then(function (uri) {\n        return create$3(blobToCanvas(blob), blob, uri);\n      });\n    };\n    var fromCanvas = function (canvas, type) {\n      return canvasToBlob(canvas, type).then(function (blob) {\n        return create$3(Promise$1.resolve(canvas), blob, canvas.toDataURL());\n      });\n    };\n\n    var blobToImageResult = function (blob) {\n      return fromBlob(blob);\n    };\n\n    var clamp = function (value, min, max) {\n      var parsedValue = typeof value === 'string' ? parseFloat(value) : value;\n      if (parsedValue > max) {\n        parsedValue = max;\n      } else if (parsedValue < min) {\n        parsedValue = min;\n      }\n      return parsedValue;\n    };\n    var identity = function () {\n      return [\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ];\n    };\n    var DELTA_INDEX = [\n      0,\n      0.01,\n      0.02,\n      0.04,\n      0.05,\n      0.06,\n      0.07,\n      0.08,\n      0.1,\n      0.11,\n      0.12,\n      0.14,\n      0.15,\n      0.16,\n      0.17,\n      0.18,\n      0.2,\n      0.21,\n      0.22,\n      0.24,\n      0.25,\n      0.27,\n      0.28,\n      0.3,\n      0.32,\n      0.34,\n      0.36,\n      0.38,\n      0.4,\n      0.42,\n      0.44,\n      0.46,\n      0.48,\n      0.5,\n      0.53,\n      0.56,\n      0.59,\n      0.62,\n      0.65,\n      0.68,\n      0.71,\n      0.74,\n      0.77,\n      0.8,\n      0.83,\n      0.86,\n      0.89,\n      0.92,\n      0.95,\n      0.98,\n      1,\n      1.06,\n      1.12,\n      1.18,\n      1.24,\n      1.3,\n      1.36,\n      1.42,\n      1.48,\n      1.54,\n      1.6,\n      1.66,\n      1.72,\n      1.78,\n      1.84,\n      1.9,\n      1.96,\n      2,\n      2.12,\n      2.25,\n      2.37,\n      2.5,\n      2.62,\n      2.75,\n      2.87,\n      3,\n      3.2,\n      3.4,\n      3.6,\n      3.8,\n      4,\n      4.3,\n      4.7,\n      4.9,\n      5,\n      5.5,\n      6,\n      6.5,\n      6.8,\n      7,\n      7.3,\n      7.5,\n      7.8,\n      8,\n      8.4,\n      8.7,\n      9,\n      9.4,\n      9.6,\n      9.8,\n      10\n    ];\n    var multiply = function (matrix1, matrix2) {\n      var col = [];\n      var out = new Array(25);\n      var val;\n      for (var i = 0; i < 5; i++) {\n        for (var j = 0; j < 5; j++) {\n          col[j] = matrix2[j + i * 5];\n        }\n        for (var j = 0; j < 5; j++) {\n          val = 0;\n          for (var k = 0; k < 5; k++) {\n            val += matrix1[j + k * 5] * col[k];\n          }\n          out[j + i * 5] = val;\n        }\n      }\n      return out;\n    };\n    var adjustContrast = function (matrix, value) {\n      var x;\n      value = clamp(value, -1, 1);\n      value *= 100;\n      if (value < 0) {\n        x = 127 + value / 100 * 127;\n      } else {\n        x = value % 1;\n        if (x === 0) {\n          x = DELTA_INDEX[value];\n        } else {\n          x = DELTA_INDEX[Math.floor(value)] * (1 - x) + DELTA_INDEX[Math.floor(value) + 1] * x;\n        }\n        x = x * 127 + 127;\n      }\n      return multiply(matrix, [\n        x / 127,\n        0,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        x / 127,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        x / 127,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n    var adjustBrightness = function (matrix, value) {\n      value = clamp(255 * value, -255, 255);\n      return multiply(matrix, [\n        1,\n        0,\n        0,\n        0,\n        value,\n        0,\n        1,\n        0,\n        0,\n        value,\n        0,\n        0,\n        1,\n        0,\n        value,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n    var adjustColors = function (matrix, adjustR, adjustG, adjustB) {\n      adjustR = clamp(adjustR, 0, 2);\n      adjustG = clamp(adjustG, 0, 2);\n      adjustB = clamp(adjustB, 0, 2);\n      return multiply(matrix, [\n        adjustR,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustG,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustB,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n\n    var colorFilter = function (ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyColorFilter(canvas, ir.getType(), matrix);\n      });\n    };\n    var applyColorFilter = function (canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      var applyMatrix = function (pixelsData, m) {\n        var r, g, b, a;\n        var data = pixelsData.data, m0 = m[0], m1 = m[1], m2 = m[2], m3 = m[3], m4 = m[4], m5 = m[5], m6 = m[6], m7 = m[7], m8 = m[8], m9 = m[9], m10 = m[10], m11 = m[11], m12 = m[12], m13 = m[13], m14 = m[14], m15 = m[15], m16 = m[16], m17 = m[17], m18 = m[18], m19 = m[19];\n        for (var i = 0; i < data.length; i += 4) {\n          r = data[i];\n          g = data[i + 1];\n          b = data[i + 2];\n          a = data[i + 3];\n          data[i] = r * m0 + g * m1 + b * m2 + a * m3 + m4;\n          data[i + 1] = r * m5 + g * m6 + b * m7 + a * m8 + m9;\n          data[i + 2] = r * m10 + g * m11 + b * m12 + a * m13 + m14;\n          data[i + 3] = r * m15 + g * m16 + b * m17 + a * m18 + m19;\n        }\n        return pixelsData;\n      };\n      var pixels = applyMatrix(context.getImageData(0, 0, canvas.width, canvas.height), matrix);\n      context.putImageData(pixels, 0, 0);\n      return fromCanvas(canvas, type);\n    };\n    var convoluteFilter = function (ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyConvoluteFilter(canvas, ir.getType(), matrix);\n      });\n    };\n    var applyConvoluteFilter = function (canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      var applyMatrix = function (pIn, pOut, aMatrix) {\n        var clamp = function (value, min, max) {\n          if (value > max) {\n            value = max;\n          } else if (value < min) {\n            value = min;\n          }\n          return value;\n        };\n        var side = Math.round(Math.sqrt(aMatrix.length));\n        var halfSide = Math.floor(side / 2);\n        var rgba = pIn.data;\n        var drgba = pOut.data;\n        var w = pIn.width;\n        var h = pIn.height;\n        for (var y = 0; y < h; y++) {\n          for (var x = 0; x < w; x++) {\n            var r = 0;\n            var g = 0;\n            var b = 0;\n            for (var cy = 0; cy < side; cy++) {\n              for (var cx = 0; cx < side; cx++) {\n                var scx = clamp(x + cx - halfSide, 0, w - 1);\n                var scy = clamp(y + cy - halfSide, 0, h - 1);\n                var innerOffset = (scy * w + scx) * 4;\n                var wt = aMatrix[cy * side + cx];\n                r += rgba[innerOffset] * wt;\n                g += rgba[innerOffset + 1] * wt;\n                b += rgba[innerOffset + 2] * wt;\n              }\n            }\n            var offset = (y * w + x) * 4;\n            drgba[offset] = clamp(r, 0, 255);\n            drgba[offset + 1] = clamp(g, 0, 255);\n            drgba[offset + 2] = clamp(b, 0, 255);\n          }\n        }\n        return pOut;\n      };\n      var pixelsIn = context.getImageData(0, 0, canvas.width, canvas.height);\n      var pixelsOut = context.getImageData(0, 0, canvas.width, canvas.height);\n      pixelsOut = applyMatrix(pixelsIn, pixelsOut, matrix);\n      context.putImageData(pixelsOut, 0, 0);\n      return fromCanvas(canvas, type);\n    };\n    var functionColorFilter = function (colorFn) {\n      var filterImpl = function (canvas, type, value) {\n        var context = get2dContext(canvas);\n        var lookup = new Array(256);\n        var applyLookup = function (pixelsData, lookupData) {\n          var data = pixelsData.data;\n          for (var i = 0; i < data.length; i += 4) {\n            data[i] = lookupData[data[i]];\n            data[i + 1] = lookupData[data[i + 1]];\n            data[i + 2] = lookupData[data[i + 2]];\n          }\n          return pixelsData;\n        };\n        for (var i = 0; i < lookup.length; i++) {\n          lookup[i] = colorFn(i, value);\n        }\n        var pixels = applyLookup(context.getImageData(0, 0, canvas.width, canvas.height), lookup);\n        context.putImageData(pixels, 0, 0);\n        return fromCanvas(canvas, type);\n      };\n      return function (ir, value) {\n        return ir.toCanvas().then(function (canvas) {\n          return filterImpl(canvas, ir.getType(), value);\n        });\n      };\n    };\n    var complexAdjustableColorFilter = function (matrixAdjustFn) {\n      return function (ir, adjust) {\n        return colorFilter(ir, matrixAdjustFn(identity(), adjust));\n      };\n    };\n    var basicColorFilter = function (matrix) {\n      return function (ir) {\n        return colorFilter(ir, matrix);\n      };\n    };\n    var basicConvolutionFilter = function (kernel) {\n      return function (ir) {\n        return convoluteFilter(ir, kernel);\n      };\n    };\n    var invert$1 = basicColorFilter([\n      -1,\n      0,\n      0,\n      0,\n      255,\n      0,\n      -1,\n      0,\n      0,\n      255,\n      0,\n      0,\n      -1,\n      0,\n      255,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      1\n    ]);\n    var brightness$1 = complexAdjustableColorFilter(adjustBrightness);\n    var contrast$1 = complexAdjustableColorFilter(adjustContrast);\n    var colorize$1 = function (ir, adjustR, adjustG, adjustB) {\n      return colorFilter(ir, adjustColors(identity(), adjustR, adjustG, adjustB));\n    };\n    var sharpen$1 = basicConvolutionFilter([\n      0,\n      -1,\n      0,\n      -1,\n      5,\n      -1,\n      0,\n      -1,\n      0\n    ]);\n    var gamma$1 = functionColorFilter(function (color, value) {\n      return Math.pow(color / 255, 1 - value) * 255;\n    });\n\n    var scale = function (image, dW, dH) {\n      var sW = getWidth$1(image);\n      var sH = getHeight$1(image);\n      var wRatio = dW / sW;\n      var hRatio = dH / sH;\n      var scaleCapped = false;\n      if (wRatio < 0.5 || wRatio > 2) {\n        wRatio = wRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      if (hRatio < 0.5 || hRatio > 2) {\n        hRatio = hRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      var scaled = _scale(image, wRatio, hRatio);\n      return !scaleCapped ? scaled : scaled.then(function (tCanvas) {\n        return scale(tCanvas, dW, dH);\n      });\n    };\n    var _scale = function (image, wRatio, hRatio) {\n      return new Promise$1(function (resolve) {\n        var sW = getWidth$1(image);\n        var sH = getHeight$1(image);\n        var dW = Math.floor(sW * wRatio);\n        var dH = Math.floor(sH * hRatio);\n        var canvas = create$4(dW, dH);\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0, sW, sH, 0, 0, dW, dH);\n        resolve(canvas);\n      });\n    };\n\n    var ceilWithPrecision = function (num, precision) {\n      if (precision === void 0) {\n        precision = 2;\n      }\n      var mul = Math.pow(10, precision);\n      var upper = Math.round(num * mul);\n      return Math.ceil(upper / mul);\n    };\n    var rotate$1 = function (ir, angle) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyRotate(canvas, ir.getType(), angle);\n      });\n    };\n    var applyRotate = function (image, type, angle) {\n      var degrees = angle < 0 ? 360 + angle : angle;\n      var rad = degrees * Math.PI / 180;\n      var width = image.width;\n      var height = image.height;\n      var sin = Math.sin(rad);\n      var cos = Math.cos(rad);\n      var newWidth = ceilWithPrecision(Math.abs(width * cos) + Math.abs(height * sin));\n      var newHeight = ceilWithPrecision(Math.abs(width * sin) + Math.abs(height * cos));\n      var canvas = create$4(newWidth, newHeight);\n      var context = get2dContext(canvas);\n      context.translate(newWidth / 2, newHeight / 2);\n      context.rotate(rad);\n      context.drawImage(image, -width / 2, -height / 2);\n      return fromCanvas(canvas, type);\n    };\n    var flip$1 = function (ir, axis) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyFlip(canvas, ir.getType(), axis);\n      });\n    };\n    var applyFlip = function (image, type, axis) {\n      var canvas = create$4(image.width, image.height);\n      var context = get2dContext(canvas);\n      if (axis === 'v') {\n        context.scale(1, -1);\n        context.drawImage(image, 0, -canvas.height);\n      } else {\n        context.scale(-1, 1);\n        context.drawImage(image, -canvas.width, 0);\n      }\n      return fromCanvas(canvas, type);\n    };\n    var crop$1 = function (ir, x, y, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyCrop(canvas, ir.getType(), x, y, w, h);\n      });\n    };\n    var applyCrop = function (image, type, x, y, w, h) {\n      var canvas = create$4(w, h);\n      var context = get2dContext(canvas);\n      context.drawImage(image, -x, -y);\n      return fromCanvas(canvas, type);\n    };\n    var resize$2 = function (ir, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return scale(canvas, w, h).then(function (newCanvas) {\n          return fromCanvas(newCanvas, ir.getType());\n        });\n      });\n    };\n\n    var invert = function (ir) {\n      return invert$1(ir);\n    };\n    var sharpen = function (ir) {\n      return sharpen$1(ir);\n    };\n    var gamma = function (ir, value) {\n      return gamma$1(ir, value);\n    };\n    var colorize = function (ir, adjustR, adjustG, adjustB) {\n      return colorize$1(ir, adjustR, adjustG, adjustB);\n    };\n    var brightness = function (ir, adjust) {\n      return brightness$1(ir, adjust);\n    };\n    var contrast = function (ir, adjust) {\n      return contrast$1(ir, adjust);\n    };\n    var flip = function (ir, axis) {\n      return flip$1(ir, axis);\n    };\n    var crop = function (ir, x, y, w, h) {\n      return crop$1(ir, x, y, w, h);\n    };\n    var resize$1 = function (ir, w, h) {\n      return resize$2(ir, w, h);\n    };\n    var rotate = function (ir, angle) {\n      return rotate$1(ir, angle);\n    };\n\n    var renderIcon = function (iconName, iconsProvider, behaviours) {\n      return render$3(iconName, {\n        tag: 'span',\n        classes: [\n          'tox-icon',\n          'tox-tbtn__icon-wrap'\n        ],\n        behaviours: behaviours\n      }, iconsProvider);\n    };\n    var renderIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon(iconName, iconsProvider, []);\n    };\n    var renderReplacableIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon(iconName, iconsProvider, [Replacing.config({})]);\n    };\n    var renderLabel$1 = function (text, prefix, providersBackstage) {\n      return {\n        dom: {\n          tag: 'span',\n          innerHtml: providersBackstage.translate(text),\n          classes: [prefix + '__select-label']\n        },\n        behaviours: derive$1([Replacing.config({})])\n      };\n    };\n\n    var _a;\n    var internalToolbarButtonExecute = generate$6('toolbar.button.execute');\n    var onToolbarButtonExecute = function (info) {\n      return runOnExecute$1(function (comp, _simulatedEvent) {\n        runWithApi(info, comp)(function (itemApi) {\n          emitWith(comp, internalToolbarButtonExecute, { buttonApi: itemApi });\n          info.onAction(itemApi);\n        });\n      });\n    };\n    var toolbarButtonEventOrder = (_a = {}, _a[execute$5()] = [\n      'disabling',\n      'alloy.base.behaviour',\n      'toggling',\n      'toolbar-button-events'\n    ], _a);\n\n    var updateMenuText = generate$6('update-menu-text');\n    var updateMenuIcon = generate$6('update-menu-icon');\n    var renderCommonDropdown = function (spec, prefix, sharedBackstage) {\n      var editorOffCell = Cell(noop);\n      var optMemDisplayText = spec.text.map(function (text) {\n        return record(renderLabel$1(text, prefix, sharedBackstage.providers));\n      });\n      var optMemDisplayIcon = spec.icon.map(function (iconName) {\n        return record(renderReplacableIconFromPack(iconName, sharedBackstage.providers.icons));\n      });\n      var onLeftOrRightInMenu = function (comp, se) {\n        var dropdown = Representing.getValue(comp);\n        Focusing.focus(dropdown);\n        emitWith(dropdown, 'keydown', { raw: se.event.raw });\n        Dropdown.close(dropdown);\n        return Optional.some(true);\n      };\n      var role = spec.role.fold(function () {\n        return {};\n      }, function (role) {\n        return { role: role };\n      });\n      var tooltipAttributes = spec.tooltip.fold(function () {\n        return {};\n      }, function (tooltip) {\n        var translatedTooltip = sharedBackstage.providers.translate(tooltip);\n        return {\n          'title': translatedTooltip,\n          'aria-label': translatedTooltip\n        };\n      });\n      var iconSpec = render$3('chevron-down', {\n        tag: 'div',\n        classes: [prefix + '__select-chevron']\n      }, sharedBackstage.providers.icons);\n      var memDropdown = record(Dropdown.sketch(__assign(__assign(__assign({}, spec.uid ? { uid: spec.uid } : {}), role), {\n        dom: {\n          tag: 'button',\n          classes: [\n            prefix,\n            prefix + '--select'\n          ].concat(map$2(spec.classes, function (c) {\n            return prefix + '--' + c;\n          })),\n          attributes: __assign({}, tooltipAttributes)\n        },\n        components: componentRenderPipeline([\n          optMemDisplayIcon.map(function (mem) {\n            return mem.asSpec();\n          }),\n          optMemDisplayText.map(function (mem) {\n            return mem.asSpec();\n          }),\n          Optional.some(iconSpec)\n        ]),\n        matchWidth: true,\n        useMinWidth: true,\n        dropdownBehaviours: derive$1(__spreadArray(__spreadArray([], spec.dropdownBehaviours, true), [\n          DisablingConfigs.button(function () {\n            return spec.disabled || sharedBackstage.providers.isDisabled();\n          }),\n          receivingConfig(),\n          Unselecting.config({}),\n          Replacing.config({}),\n          config('dropdown-events', [\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          config('menubutton-update-display-text', [\n            run$1(updateMenuText, function (comp, se) {\n              optMemDisplayText.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayText) {\n                Replacing.set(displayText, [text$1(sharedBackstage.providers.translate(se.event.text))]);\n              });\n            }),\n            run$1(updateMenuIcon, function (comp, se) {\n              optMemDisplayIcon.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayIcon) {\n                Replacing.set(displayIcon, [renderReplacableIconFromPack(se.event.icon, sharedBackstage.providers.icons)]);\n              });\n            })\n          ])\n        ], false)),\n        eventOrder: deepMerge(toolbarButtonEventOrder, {\n          mousedown: [\n            'focusing',\n            'alloy.base.behaviour',\n            'item-type-events',\n            'normal-dropdown-events'\n          ]\n        }),\n        sandboxBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onLeft: onLeftOrRightInMenu,\n            onRight: onLeftOrRightInMenu\n          })]),\n        lazySink: sharedBackstage.getSink,\n        toggleClass: prefix + '--active',\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        fetch: function (comp) {\n          return Future.nu(curry(spec.fetch, comp));\n        }\n      })));\n      return memDropdown.asSpec();\n    };\n\n    var isMenuItemReference = function (item) {\n      return isString(item);\n    };\n    var isSeparator$1 = function (item) {\n      return item.type === 'separator';\n    };\n    var isExpandingMenuItem = function (item) {\n      return has$2(item, 'getSubmenuItems');\n    };\n    var separator$2 = { type: 'separator' };\n    var unwrapReferences = function (items, menuItems) {\n      var realItems = foldl(items, function (acc, item) {\n        if (isMenuItemReference(item)) {\n          if (item === '') {\n            return acc;\n          } else if (item === '|') {\n            return acc.length > 0 && !isSeparator$1(acc[acc.length - 1]) ? acc.concat([separator$2]) : acc;\n          } else if (has$2(menuItems, item.toLowerCase())) {\n            return acc.concat([menuItems[item.toLowerCase()]]);\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.concat([item]);\n        }\n      }, []);\n      if (realItems.length > 0 && isSeparator$1(realItems[realItems.length - 1])) {\n        realItems.pop();\n      }\n      return realItems;\n    };\n    var getFromExpandingItem = function (item, menuItems) {\n      var submenuItems = item.getSubmenuItems();\n      var rest = expand(submenuItems, menuItems);\n      var newMenus = deepMerge(rest.menus, wrap$1(item.value, rest.items));\n      var newExpansions = deepMerge(rest.expansions, wrap$1(item.value, item.value));\n      return {\n        item: item,\n        menus: newMenus,\n        expansions: newExpansions\n      };\n    };\n    var getFromItem = function (item, menuItems) {\n      return isExpandingMenuItem(item) ? getFromExpandingItem(item, menuItems) : {\n        item: item,\n        menus: {},\n        expansions: {}\n      };\n    };\n    var generateValueIfRequired = function (item) {\n      if (isSeparator$1(item)) {\n        return item;\n      } else {\n        var itemValue = get$e(item, 'value').getOrThunk(function () {\n          return generate$6('generated-menu-item');\n        });\n        return deepMerge({ value: itemValue }, item);\n      }\n    };\n    var expand = function (items, menuItems) {\n      var realItems = unwrapReferences(isString(items) ? items.split(' ') : items, menuItems);\n      return foldr(realItems, function (acc, item) {\n        var itemWithValue = generateValueIfRequired(item);\n        var newData = getFromItem(itemWithValue, menuItems);\n        return {\n          menus: deepMerge(acc.menus, newData.menus),\n          items: [newData.item].concat(acc.items),\n          expansions: deepMerge(acc.expansions, newData.expansions)\n        };\n      }, {\n        menus: {},\n        expansions: {},\n        items: []\n      });\n    };\n\n    var build = function (items, itemResponse, backstage, isHorizontalMenu) {\n      var primary = generate$6('primary-menu');\n      var data = expand(items, backstage.shared.providers.menuItems());\n      if (data.items.length === 0) {\n        return Optional.none();\n      }\n      var mainMenu = createPartialMenu(primary, data.items, itemResponse, backstage, isHorizontalMenu);\n      var submenus = map$1(data.menus, function (menuItems, menuName) {\n        return createPartialMenu(menuName, menuItems, itemResponse, backstage, false);\n      });\n      var menus = deepMerge(submenus, wrap$1(primary, mainMenu));\n      return Optional.from(tieredMenu.tieredData(primary, menus, data.expansions));\n    };\n\n    var getMenuButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        },\n        setActive: function (state) {\n          var elm = component.element;\n          if (state) {\n            add$2(elm, 'tox-tbtn--enabled');\n            set$8(elm, 'aria-pressed', true);\n          } else {\n            remove$2(elm, 'tox-tbtn--enabled');\n            remove$7(elm, 'aria-pressed');\n          }\n        },\n        isActive: function () {\n          return has(component.element, 'tox-tbtn--enabled');\n        }\n      };\n    };\n    var renderMenuButton = function (spec, prefix, backstage, role) {\n      return renderCommonDropdown({\n        text: spec.text,\n        icon: spec.icon,\n        tooltip: spec.tooltip,\n        role: role,\n        fetch: function (_comp, callback) {\n          spec.fetch(function (items) {\n            callback(build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false));\n          });\n        },\n        onSetup: spec.onSetup,\n        getApi: getMenuButtonApi,\n        columns: 1,\n        presets: 'normal',\n        classes: [],\n        dropdownBehaviours: [Tabstopping.config({})]\n      }, prefix, backstage.shared);\n    };\n    var getFetch = function (items, getButton, backstage) {\n      var getMenuItemAction = function (item) {\n        return function (api) {\n          var newValue = !api.isActive();\n          api.setActive(newValue);\n          item.storage.set(newValue);\n          backstage.shared.getSink().each(function (sink) {\n            getButton().getOpt(sink).each(function (orig) {\n              focus$3(orig.element);\n              emitWith(orig, formActionEvent, {\n                name: item.name,\n                value: item.storage.get()\n              });\n            });\n          });\n        };\n      };\n      var getMenuItemSetup = function (item) {\n        return function (api) {\n          api.setActive(item.storage.get());\n        };\n      };\n      return function (success) {\n        success(map$2(items, function (item) {\n          var text = item.text.fold(function () {\n            return {};\n          }, function (text) {\n            return { text: text };\n          });\n          return __assign(__assign({\n            type: item.type,\n            active: false\n          }, text), {\n            onAction: getMenuItemAction(item),\n            onSetup: getMenuItemSetup(item)\n          });\n        }));\n      };\n    };\n\n    var renderCommonSpec = function (spec, actionOpt, extraBehaviours, dom, components, providersBackstage) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var action = actionOpt.fold(function () {\n        return {};\n      }, function (action) {\n        return { action: action };\n      });\n      var common = __assign({\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          config('button press', [\n            preventDefault('click'),\n            preventDefault('mousedown')\n          ])\n        ].concat(extraBehaviours)),\n        eventOrder: {\n          click: [\n            'button press',\n            'alloy.base.behaviour'\n          ],\n          mousedown: [\n            'button press',\n            'alloy.base.behaviour'\n          ]\n        }\n      }, action);\n      var domFinal = deepMerge(common, { dom: dom });\n      return deepMerge(domFinal, { components: components });\n    };\n    var renderIconButtonSpec = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var tooltipAttributes = spec.tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n      var dom = {\n        tag: 'button',\n        classes: ['tox-tbtn'],\n        attributes: tooltipAttributes\n      };\n      var icon = spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      });\n      var components = componentRenderPipeline([icon]);\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    var renderIconButton = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var iconButtonSpec = renderIconButtonSpec(spec, Optional.some(action), providersBackstage, extraBehaviours);\n      return Button.sketch(iconButtonSpec);\n    };\n    var renderButtonSpec = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var translatedText = providersBackstage.translate(spec.text);\n      var icon = spec.icon ? spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      }) : Optional.none();\n      var components = icon.isSome() ? componentRenderPipeline([icon]) : [];\n      var innerHtml = icon.isSome() ? {} : { innerHtml: translatedText };\n      var classes = __spreadArray(__spreadArray(__spreadArray(__spreadArray([], !spec.primary && !spec.borderless ? [\n        'tox-button',\n        'tox-button--secondary'\n      ] : ['tox-button'], true), icon.isSome() ? ['tox-button--icon'] : [], true), spec.borderless ? ['tox-button--naked'] : [], true), extraClasses, true);\n      var dom = __assign(__assign({\n        tag: 'button',\n        classes: classes\n      }, innerHtml), { attributes: { title: translatedText } });\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    var renderButton = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var buttonSpec = renderButtonSpec(spec, Optional.some(action), providersBackstage, extraBehaviours, extraClasses);\n      return Button.sketch(buttonSpec);\n    };\n    var getAction = function (name, buttonType) {\n      return function (comp) {\n        if (buttonType === 'custom') {\n          emitWith(comp, formActionEvent, {\n            name: name,\n            value: {}\n          });\n        } else if (buttonType === 'submit') {\n          emit(comp, formSubmitEvent);\n        } else if (buttonType === 'cancel') {\n          emit(comp, formCancelEvent);\n        } else {\n          console.error('Unknown button type: ', buttonType);\n        }\n      };\n    };\n    var isMenuFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'menu';\n    };\n    var isNormalFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'custom' || buttonType === 'cancel' || buttonType === 'submit';\n    };\n    var renderFooterButton = function (spec, buttonType, backstage) {\n      if (isMenuFooterButtonSpec(spec, buttonType)) {\n        var getButton = function () {\n          return memButton_1;\n        };\n        var menuButtonSpec = spec;\n        var fixedSpec = __assign(__assign({}, spec), {\n          onSetup: function (api) {\n            api.setDisabled(spec.disabled);\n            return noop;\n          },\n          fetch: getFetch(menuButtonSpec.items, getButton, backstage)\n        });\n        var memButton_1 = record(renderMenuButton(fixedSpec, 'tox-tbtn', backstage, Optional.none()));\n        return memButton_1.asSpec();\n      } else if (isNormalFooterButtonSpec(spec, buttonType)) {\n        var action = getAction(spec.name, buttonType);\n        var buttonSpec = __assign(__assign({}, spec), { borderless: false });\n        return renderButton(buttonSpec, action, backstage.shared.providers, []);\n      } else {\n        console.error('Unknown footer button type: ', buttonType);\n      }\n    };\n    var renderDialogButton = function (spec, providersBackstage) {\n      var action = getAction(spec.name, 'custom');\n      return renderFormField(Optional.none(), FormField.parts.field(__assign({ factory: Button }, renderButtonSpec(spec, Optional.some(action), providersBackstage, [\n        RepresentingConfigs.memory(''),\n        ComposingConfigs.self()\n      ]))));\n    };\n\n    var schema$h = constant$1([\n      defaulted('field1Name', 'field1'),\n      defaulted('field2Name', 'field2'),\n      onStrictHandler('onLockedChange'),\n      markers$1(['lockClass']),\n      defaulted('locked', false),\n      SketchBehaviours.field('coupledFieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var getField = function (comp, detail, partName) {\n      return getPart(comp, detail, partName).bind(Composing.getCurrent);\n    };\n    var coupledPart = function (selfName, otherName) {\n      return required({\n        factory: FormField,\n        name: selfName,\n        overrides: function (detail) {\n          return {\n            fieldBehaviours: derive$1([config('coupled-input-behaviour', [run$1(input(), function (me) {\n                  getField(me, detail, otherName).each(function (other) {\n                    getPart(me, detail, 'lock').each(function (lock) {\n                      if (Toggling.isOn(lock)) {\n                        detail.onLockedChange(me, other, lock);\n                      }\n                    });\n                  });\n                })])])\n          };\n        }\n      });\n    };\n    var parts$c = constant$1([\n      coupledPart('field1', 'field2'),\n      coupledPart('field2', 'field1'),\n      required({\n        factory: Button,\n        schema: [required$1('dom')],\n        name: 'lock',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                selected: detail.locked,\n                toggleClass: detail.markers.lockClass,\n                aria: { mode: 'pressed' }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var factory$f = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: SketchBehaviours.augment(detail.coupledFieldBehaviours, [\n          Composing.config({ find: Optional.some }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var _a;\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                return _a = {}, _a[detail.field1Name] = Representing.getValue(parts.field1()), _a[detail.field2Name] = Representing.getValue(parts.field2()), _a;\n              },\n              setValue: function (comp, value) {\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                if (hasNonNullableKey(value, detail.field1Name)) {\n                  Representing.setValue(parts.field1(), value[detail.field1Name]);\n                }\n                if (hasNonNullableKey(value, detail.field2Name)) {\n                  Representing.setValue(parts.field2(), value[detail.field2Name]);\n                }\n              }\n            }\n          })\n        ]),\n        apis: {\n          getField1: function (component) {\n            return getPart(component, detail, 'field1');\n          },\n          getField2: function (component) {\n            return getPart(component, detail, 'field2');\n          },\n          getLock: function (component) {\n            return getPart(component, detail, 'lock');\n          }\n        }\n      };\n    };\n    var FormCoupledInputs = composite({\n      name: 'FormCoupledInputs',\n      configFields: schema$h(),\n      partFields: parts$c(),\n      factory: factory$f,\n      apis: {\n        getField1: function (apis, component) {\n          return apis.getField1(component);\n        },\n        getField2: function (apis, component) {\n          return apis.getField2(component);\n        },\n        getLock: function (apis, component) {\n          return apis.getLock(component);\n        }\n      }\n    });\n\n    var formatSize = function (size) {\n      var unitDec = {\n        '': 0,\n        'px': 0,\n        'pt': 1,\n        'mm': 1,\n        'pc': 2,\n        'ex': 2,\n        'em': 2,\n        'ch': 2,\n        'rem': 2,\n        'cm': 3,\n        'in': 4,\n        '%': 4\n      };\n      var maxDecimal = function (unit) {\n        return unit in unitDec ? unitDec[unit] : 1;\n      };\n      var numText = size.value.toFixed(maxDecimal(size.unit));\n      if (numText.indexOf('.') !== -1) {\n        numText = numText.replace(/\\.?0*$/, '');\n      }\n      return numText + size.unit;\n    };\n    var parseSize = function (sizeText) {\n      var numPattern = /^\\s*(\\d+(?:\\.\\d+)?)\\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\\s*$/;\n      var match = numPattern.exec(sizeText);\n      if (match !== null) {\n        var value = parseFloat(match[1]);\n        var unit = match[2];\n        return Result.value({\n          value: value,\n          unit: unit\n        });\n      } else {\n        return Result.error(sizeText);\n      }\n    };\n    var convertUnit = function (size, unit) {\n      var inInch = {\n        '': 96,\n        'px': 96,\n        'pt': 72,\n        'cm': 2.54,\n        'pc': 12,\n        'mm': 25.4,\n        'in': 1\n      };\n      var supported = function (u) {\n        return has$2(inInch, u);\n      };\n      if (size.unit === unit) {\n        return Optional.some(size.value);\n      } else if (supported(size.unit) && supported(unit)) {\n        if (inInch[size.unit] === inInch[unit]) {\n          return Optional.some(size.value);\n        } else {\n          return Optional.some(size.value / inInch[size.unit] * inInch[unit]);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    var noSizeConversion = function (_input) {\n      return Optional.none();\n    };\n    var ratioSizeConversion = function (scale, unit) {\n      return function (size) {\n        return convertUnit(size, unit).map(function (value) {\n          return {\n            value: value * scale,\n            unit: unit\n          };\n        });\n      };\n    };\n    var makeRatioConverter = function (currentFieldText, otherFieldText) {\n      var cValue = parseSize(currentFieldText).toOptional();\n      var oValue = parseSize(otherFieldText).toOptional();\n      return lift2(cValue, oValue, function (cSize, oSize) {\n        return convertUnit(cSize, oSize.unit).map(function (val) {\n          return oSize.value / val;\n        }).map(function (r) {\n          return ratioSizeConversion(r, oSize.unit);\n        }).getOr(noSizeConversion);\n      }).getOr(noSizeConversion);\n    };\n\n    var renderSizeInput = function (spec, providersBackstage) {\n      var converter = noSizeConversion;\n      var ratioEvent = generate$6('ratio-event');\n      var makeIcon = function (iconName) {\n        return render$3(iconName, {\n          tag: 'span',\n          classes: [\n            'tox-icon',\n            'tox-lock-icon__' + iconName\n          ]\n        }, providersBackstage.icons);\n      };\n      var pLock = FormCoupledInputs.parts.lock({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-lock',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ],\n          attributes: { title: providersBackstage.translate(spec.label.getOr('Constrain proportions')) }\n        },\n        components: [\n          makeIcon('lock'),\n          makeIcon('unlock')\n        ],\n        buttonBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          }),\n          receivingConfig(),\n          Tabstopping.config({})\n        ])\n      });\n      var formGroup = function (components) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group']\n          },\n          components: components\n        };\n      };\n      var getFieldPart = function (isField1) {\n        return FormField.parts.field({\n          factory: Input,\n          inputClasses: ['tox-textfield'],\n          inputBehaviours: derive$1([\n            Disabling.config({\n              disabled: function () {\n                return spec.disabled || providersBackstage.isDisabled();\n              }\n            }),\n            receivingConfig(),\n            Tabstopping.config({}),\n            config('size-input-events', [\n              run$1(focusin(), function (component, _simulatedEvent) {\n                emitWith(component, ratioEvent, { isField1: isField1 });\n              }),\n              run$1(change(), function (component, _simulatedEvent) {\n                emitWith(component, formChangeEvent, { name: spec.name });\n              })\n            ])\n          ]),\n          selectOnFocus: false\n        });\n      };\n      var getLabel = function (label) {\n        return {\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        };\n      };\n      var widthField = FormCoupledInputs.parts.field1(formGroup([\n        FormField.parts.label(getLabel('Width')),\n        getFieldPart(true)\n      ]));\n      var heightField = FormCoupledInputs.parts.field2(formGroup([\n        FormField.parts.label(getLabel('Height')),\n        getFieldPart(false)\n      ]));\n      return FormCoupledInputs.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-form__controls-h-stack']\n            },\n            components: [\n              widthField,\n              heightField,\n              formGroup([\n                getLabel('&nbsp;'),\n                pLock\n              ])\n            ]\n          }],\n        field1Name: 'width',\n        field2Name: 'height',\n        locked: true,\n        markers: { lockClass: 'tox-locked' },\n        onLockedChange: function (current, other, _lock) {\n          parseSize(Representing.getValue(current)).each(function (size) {\n            converter(size).each(function (newSize) {\n              Representing.setValue(other, formatSize(newSize));\n            });\n          });\n        },\n        coupledFieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getLock(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getLock(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('size-input-events2', [run$1(ratioEvent, function (component, simulatedEvent) {\n              var isField1 = simulatedEvent.event.isField1;\n              var optCurrent = isField1 ? FormCoupledInputs.getField1(component) : FormCoupledInputs.getField2(component);\n              var optOther = isField1 ? FormCoupledInputs.getField2(component) : FormCoupledInputs.getField1(component);\n              var value1 = optCurrent.map(Representing.getValue).getOr('');\n              var value2 = optOther.map(Representing.getValue).getOr('');\n              converter = makeRatioConverter(value1, value2);\n            })])\n        ])\n      });\n    };\n\n    var undo = constant$1(generate$6('undo'));\n    var redo = constant$1(generate$6('redo'));\n    var zoom = constant$1(generate$6('zoom'));\n    var back = constant$1(generate$6('back'));\n    var apply$1 = constant$1(generate$6('apply'));\n    var swap = constant$1(generate$6('swap'));\n    var transform$1 = constant$1(generate$6('transform'));\n    var tempTransform = constant$1(generate$6('temp-transform'));\n    var transformApply = constant$1(generate$6('transform-apply'));\n    var internal = {\n      undo: undo,\n      redo: redo,\n      zoom: zoom,\n      back: back,\n      apply: apply$1,\n      swap: swap,\n      transform: transform$1,\n      tempTransform: tempTransform,\n      transformApply: transformApply\n    };\n    var saveState = constant$1('save-state');\n    var disable = constant$1('disable');\n    var enable = constant$1('enable');\n    var external = {\n      formActionEvent: formActionEvent,\n      saveState: saveState,\n      disable: disable,\n      enable: enable\n    };\n\n    var renderEditPanel = function (imagePanel, providersBackstage) {\n      var createButton = function (text, action, disabled, primary) {\n        return record(renderButton({\n          name: text,\n          text: text,\n          disabled: disabled,\n          primary: primary,\n          icon: Optional.none(),\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var createIconButton = function (icon, tooltip, action, disabled) {\n        return record(renderIconButton({\n          name: icon,\n          icon: Optional.some(icon),\n          tooltip: Optional.some(tooltip),\n          disabled: disabled,\n          primary: false,\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var disableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.disable(component);\n          }\n        });\n      };\n      var enableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.enable(component);\n          }\n        });\n      };\n      var panelDom = {\n        tag: 'div',\n        classes: [\n          'tox-image-tools__toolbar',\n          'tox-image-tools-edit-panel'\n        ]\n      };\n      var noop$1 = noop;\n      var emit$1 = function (comp, event, data) {\n        emitWith(comp, event, data);\n      };\n      var emitDisable = function (component) {\n        return emit(component, external.disable());\n      };\n      var emitEnable = function (component) {\n        return emit(component, external.enable());\n      };\n      var emitTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var emitTempTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.tempTransform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var getBackSwap = function (anyInSystem) {\n        return function () {\n          memContainer.getOpt(anyInSystem).each(function (container) {\n            Replacing.set(container, [ButtonPanel]);\n          });\n        };\n      };\n      var emitTransformApply = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transformApply(), {\n          transform: transform,\n          swap: getBackSwap(comp)\n        });\n        emitEnable(comp);\n      };\n      var createBackButton = function () {\n        return createButton('Back', function (button) {\n          return emit$1(button, internal.back(), { swap: getBackSwap(button) });\n        }, false, false);\n      };\n      var createSpacer = function () {\n        return record({\n          dom: {\n            tag: 'div',\n            classes: ['tox-spacer']\n          },\n          behaviours: derive$1([Disabling.config({})])\n        });\n      };\n      var createApplyButton = function () {\n        return createButton('Apply', function (button) {\n          return emit$1(button, internal.apply(), { swap: getBackSwap(button) });\n        }, true, true);\n      };\n      var makeCropTransform = function () {\n        return function (ir) {\n          var rect = imagePanel.getRect();\n          return crop(ir, rect.x, rect.y, rect.w, rect.h);\n        };\n      };\n      var cropPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createButton('Apply', function (button) {\n          var transform = makeCropTransform();\n          emitTransformApply(button, transform);\n          imagePanel.hideCrop();\n        }, false, true)\n      ];\n      var CropPanel = Container.sketch({\n        dom: panelDom,\n        components: cropPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-crop-buttons-events', [\n            run$1(external.disable(), function (comp, _se) {\n              disableAllComponents(cropPanelComponents, comp);\n            }),\n            run$1(external.enable(), function (comp, _se) {\n              enableAllComponents(cropPanelComponents, comp);\n            })\n          ])])\n      });\n      var memSize = record(renderSizeInput({\n        name: 'size',\n        label: Optional.none(),\n        constrain: true,\n        disabled: false\n      }, providersBackstage));\n      var makeResizeTransform = function (width, height) {\n        return function (ir) {\n          return resize$1(ir, width, height);\n        };\n      };\n      var resizePanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        memSize,\n        createSpacer(),\n        createButton('Apply', function (button) {\n          memSize.getOpt(button).each(function (sizeInput) {\n            var value = Representing.getValue(sizeInput);\n            var width = parseInt(value.width, 10);\n            var height = parseInt(value.height, 10);\n            var transform = makeResizeTransform(width, height);\n            emitTransformApply(button, transform);\n          });\n        }, false, true)\n      ];\n      var ResizePanel = Container.sketch({\n        dom: panelDom,\n        components: resizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-resize-buttons-events', [\n            run$1(external.disable(), function (comp, _se) {\n              disableAllComponents(resizePanelComponents, comp);\n            }),\n            run$1(external.enable(), function (comp, _se) {\n              enableAllComponents(resizePanelComponents, comp);\n            })\n          ])])\n      });\n      var makeValueTransform = function (transform, value) {\n        return function (ir) {\n          return transform(ir, value);\n        };\n      };\n      var horizontalFlip = makeValueTransform(flip, 'h');\n      var verticalFlip = makeValueTransform(flip, 'v');\n      var counterclockwiseRotate = makeValueTransform(rotate, -90);\n      var clockwiseRotate = makeValueTransform(rotate, 90);\n      var flipRotateOnAction = function (comp, operation) {\n        emitTempTransform(comp, operation);\n      };\n      var flipRotateComponents = [\n        createBackButton(),\n        createSpacer(),\n        createIconButton('flip-horizontally', 'Flip horizontally', function (button) {\n          flipRotateOnAction(button, horizontalFlip);\n        }, false),\n        createIconButton('flip-vertically', 'Flip vertically', function (button) {\n          flipRotateOnAction(button, verticalFlip);\n        }, false),\n        createIconButton('rotate-left', 'Rotate counterclockwise', function (button) {\n          flipRotateOnAction(button, counterclockwiseRotate);\n        }, false),\n        createIconButton('rotate-right', 'Rotate clockwise', function (button) {\n          flipRotateOnAction(button, clockwiseRotate);\n        }, false),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FlipRotatePanel = Container.sketch({\n        dom: panelDom,\n        components: flipRotateComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-fliprotate-buttons-events', [\n            run$1(external.disable(), function (comp, _se) {\n              disableAllComponents(flipRotateComponents, comp);\n            }),\n            run$1(external.enable(), function (comp, _se) {\n              enableAllComponents(flipRotateComponents, comp);\n            })\n          ])])\n      });\n      var makeSlider = function (label, onChoose, min, value, max) {\n        var labelPart = Slider.parts.label({\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        });\n        var spectrum = Slider.parts.spectrum({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__rail'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        var thumb = Slider.parts.thumb({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__handle'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        return record(Slider.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider'],\n            attributes: { role: 'presentation' }\n          },\n          model: {\n            mode: 'x',\n            minX: min,\n            maxX: max,\n            getInitialValue: constant$1({ x: value })\n          },\n          components: [\n            labelPart,\n            spectrum,\n            thumb\n          ],\n          sliderBehaviours: derive$1([Focusing.config({})]),\n          onChoose: onChoose\n        }));\n      };\n      var makeVariableSlider = function (label, transform, min, value, max) {\n        var onChoose = function (slider, _thumb, value) {\n          var valTransform = makeValueTransform(transform, value.x / 100);\n          emitTransform(slider, valTransform);\n        };\n        return makeSlider(label, onChoose, min, value, max);\n      };\n      var variableFilterPanelComponents = function (label, transform, min, value, max) {\n        return [\n          createBackButton(),\n          makeVariableSlider(label, transform, min, value, max),\n          createApplyButton()\n        ];\n      };\n      var createVariableFilterPanel = function (label, transform, min, value, max) {\n        var filterPanelComponents = variableFilterPanelComponents(label, transform, min, value, max);\n        return Container.sketch({\n          dom: panelDom,\n          components: filterPanelComponents.map(function (mem) {\n            return mem.asSpec();\n          }),\n          containerBehaviours: derive$1([config('image-tools-filter-panel-buttons-events', [\n              run$1(external.disable(), function (comp, _se) {\n                disableAllComponents(filterPanelComponents, comp);\n              }),\n              run$1(external.enable(), function (comp, _se) {\n                enableAllComponents(filterPanelComponents, comp);\n              })\n            ])])\n        });\n      };\n      var filterPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FilterPanel = Container.sketch({\n        dom: panelDom,\n        components: filterPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var BrightnessPanel = createVariableFilterPanel('Brightness', brightness, -100, 0, 100);\n      var ContrastPanel = createVariableFilterPanel('Contrast', contrast, -100, 0, 100);\n      var GammaPanel = createVariableFilterPanel('Gamma', gamma, -100, 0, 100);\n      var makeColorTransform = function (red, green, blue) {\n        return function (ir) {\n          return colorize(ir, red, green, blue);\n        };\n      };\n      var makeColorSlider = function (label) {\n        var onChoose = function (slider, _thumb, _value) {\n          var redOpt = memRed.getOpt(slider);\n          var blueOpt = memBlue.getOpt(slider);\n          var greenOpt = memGreen.getOpt(slider);\n          redOpt.each(function (red) {\n            blueOpt.each(function (blue) {\n              greenOpt.each(function (green) {\n                var r = Representing.getValue(red).x / 100;\n                var g = Representing.getValue(green).x / 100;\n                var b = Representing.getValue(blue).x / 100;\n                var transform = makeColorTransform(r, g, b);\n                emitTransform(slider, transform);\n              });\n            });\n          });\n        };\n        return makeSlider(label, onChoose, 0, 100, 200);\n      };\n      var memRed = makeColorSlider('R');\n      var memGreen = makeColorSlider('G');\n      var memBlue = makeColorSlider('B');\n      var colorizePanelComponents = [\n        createBackButton(),\n        memRed,\n        memGreen,\n        memBlue,\n        createApplyButton()\n      ];\n      var ColorizePanel = Container.sketch({\n        dom: panelDom,\n        components: colorizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var getTransformPanelEvent = function (panel, transform, update) {\n        return function (button) {\n          var swap = function () {\n            memContainer.getOpt(button).each(function (container) {\n              Replacing.set(container, [panel]);\n              update(container);\n            });\n          };\n          emit$1(button, internal.swap(), {\n            transform: transform,\n            swap: swap\n          });\n        };\n      };\n      var cropPanelUpdate = function (_anyInSystem) {\n        imagePanel.showCrop();\n      };\n      var resizePanelUpdate = function (anyInSystem) {\n        memSize.getOpt(anyInSystem).each(function (sizeInput) {\n          var measurements = imagePanel.getMeasurements();\n          var width = measurements.width;\n          var height = measurements.height;\n          Representing.setValue(sizeInput, {\n            width: width,\n            height: height\n          });\n        });\n      };\n      var sharpenTransform = Optional.some(sharpen);\n      var invertTransform = Optional.some(invert);\n      var buttonPanelComponents = [\n        createIconButton('crop', 'Crop', getTransformPanelEvent(CropPanel, Optional.none(), cropPanelUpdate), false),\n        createIconButton('resize', 'Resize', getTransformPanelEvent(ResizePanel, Optional.none(), resizePanelUpdate), false),\n        createIconButton('orientation', 'Orientation', getTransformPanelEvent(FlipRotatePanel, Optional.none(), noop$1), false),\n        createIconButton('brightness', 'Brightness', getTransformPanelEvent(BrightnessPanel, Optional.none(), noop$1), false),\n        createIconButton('sharpen', 'Sharpen', getTransformPanelEvent(FilterPanel, sharpenTransform, noop$1), false),\n        createIconButton('contrast', 'Contrast', getTransformPanelEvent(ContrastPanel, Optional.none(), noop$1), false),\n        createIconButton('color-levels', 'Color levels', getTransformPanelEvent(ColorizePanel, Optional.none(), noop$1), false),\n        createIconButton('gamma', 'Gamma', getTransformPanelEvent(GammaPanel, Optional.none(), noop$1), false),\n        createIconButton('invert', 'Invert', getTransformPanelEvent(FilterPanel, invertTransform, noop$1), false)\n      ];\n      var ButtonPanel = Container.sketch({\n        dom: panelDom,\n        components: buttonPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var container = Container.sketch({\n        dom: { tag: 'div' },\n        components: [ButtonPanel],\n        containerBehaviours: derive$1([Replacing.config({})])\n      });\n      var memContainer = record(container);\n      var getApplyButton = function (anyInSystem) {\n        return memContainer.getOpt(anyInSystem).map(function (container) {\n          var panel = container.components()[0];\n          return panel.components()[panel.components().length - 1];\n        });\n      };\n      return {\n        memContainer: memContainer,\n        getApplyButton: getApplyButton\n      };\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.geom.Rect');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Observable');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var getDocumentSize = function (doc) {\n      var max = Math.max;\n      var documentElement = doc.documentElement;\n      var body = doc.body;\n      var scrollWidth = max(documentElement.scrollWidth, body.scrollWidth);\n      var clientWidth = max(documentElement.clientWidth, body.clientWidth);\n      var offsetWidth = max(documentElement.offsetWidth, body.offsetWidth);\n      var scrollHeight = max(documentElement.scrollHeight, body.scrollHeight);\n      var clientHeight = max(documentElement.clientHeight, body.clientHeight);\n      var offsetHeight = max(documentElement.offsetHeight, body.offsetHeight);\n      return {\n        width: scrollWidth < offsetWidth ? clientWidth : scrollWidth,\n        height: scrollHeight < offsetHeight ? clientHeight : scrollHeight\n      };\n    };\n    var isTouchEvent$1 = function (e) {\n      return isNonNullable(e.changedTouches);\n    };\n    var updateWithTouchData = function (e) {\n      if (isTouchEvent$1(e)) {\n        var keys = 'screenX screenY pageX pageY clientX clientY'.split(' ');\n        for (var i = 0; i < keys.length; i++) {\n          e[keys[i]] = e.changedTouches[0][keys[i]];\n        }\n      }\n    };\n    function DragHelper (id, settings) {\n      var _a, _b, _c;\n      var eventOverlay;\n      var handleEvents = [];\n      var overlayEvents = [];\n      var doc = (_a = settings.document) !== null && _a !== void 0 ? _a : document;\n      var root = (_b = settings.root) !== null && _b !== void 0 ? _b : doc;\n      var sugarDoc = SugarElement.fromDom(doc);\n      var downButton;\n      var startX;\n      var startY;\n      var handleElement = SugarElement.fromDom(root.getElementById((_c = settings.handle) !== null && _c !== void 0 ? _c : id));\n      var start = function (e) {\n        var rawEvent = e.raw;\n        var docSize = getDocumentSize(doc);\n        updateWithTouchData(rawEvent);\n        e.prevent();\n        downButton = rawEvent.button;\n        startX = rawEvent.screenX;\n        startY = rawEvent.screenY;\n        var cursor = get$c(handleElement, 'cursor');\n        eventOverlay = SugarElement.fromTag('div', doc);\n        setAll(eventOverlay, {\n          'position': 'absolute',\n          'top': '0',\n          'left': '0',\n          'width': docSize.width + 'px',\n          'height': docSize.height + 'px',\n          'z-index': 2147483647 + '',\n          'opacity': '0.0001',\n          cursor: cursor\n        });\n        append$2(getBody(sugarDoc), eventOverlay);\n        overlayEvents.push(bind(sugarDoc, 'mousemove', drag), bind(sugarDoc, 'touchmove', drag), bind(sugarDoc, 'mouseup', stop), bind(sugarDoc, 'touchend', stop));\n        settings.start(rawEvent);\n      };\n      var drag = function (e) {\n        var rawEvent = e.raw;\n        updateWithTouchData(rawEvent);\n        if (rawEvent.button !== downButton) {\n          return stop(e);\n        }\n        rawEvent.deltaX = rawEvent.screenX - startX;\n        rawEvent.deltaY = rawEvent.screenY - startY;\n        e.prevent();\n        settings.drag(rawEvent);\n      };\n      var stop = function (e) {\n        updateWithTouchData(e.raw);\n        each$1(overlayEvents, function (e) {\n          return e.unbind();\n        });\n        overlayEvents = [];\n        remove$5(eventOverlay);\n        if (settings.stop) {\n          settings.stop(e.raw);\n        }\n      };\n      var destroy = function () {\n        each$1(overlayEvents.concat(handleEvents), function (e) {\n          return e.unbind();\n        });\n        overlayEvents = [];\n        handleEvents = [];\n        if (isNonNullable(eventOverlay)) {\n          remove$5(eventOverlay);\n        }\n      };\n      handleEvents.push(bind(handleElement, 'mousedown', start), bind(handleElement, 'touchstart', start));\n      return { destroy: destroy };\n    }\n\n    var count = 0;\n    var create$2 = function (currentRect, viewPortRect, clampRect, containerElm, action) {\n      var dragHelpers;\n      var events = [];\n      var prefix = 'tox-';\n      var id = prefix + 'crid-' + count++;\n      var container = SugarElement.fromDom(containerElm);\n      var handles = [\n        {\n          name: 'move',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: 0,\n          deltaH: 0,\n          label: 'Crop Mask'\n        },\n        {\n          name: 'nw',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: -1,\n          deltaH: -1,\n          label: 'Top Left Crop Handle'\n        },\n        {\n          name: 'ne',\n          xMul: 1,\n          yMul: 0,\n          deltaX: 0,\n          deltaY: 1,\n          deltaW: 1,\n          deltaH: -1,\n          label: 'Top Right Crop Handle'\n        },\n        {\n          name: 'sw',\n          xMul: 0,\n          yMul: 1,\n          deltaX: 1,\n          deltaY: 0,\n          deltaW: -1,\n          deltaH: 1,\n          label: 'Bottom Left Crop Handle'\n        },\n        {\n          name: 'se',\n          xMul: 1,\n          yMul: 1,\n          deltaX: 0,\n          deltaY: 0,\n          deltaW: 1,\n          deltaH: 1,\n          label: 'Bottom Right Crop Handle'\n        }\n      ];\n      var blockers = [\n        'top',\n        'right',\n        'bottom',\n        'left'\n      ];\n      var getAbsoluteRect = function (outerRect, relativeRect) {\n        return {\n          x: relativeRect.x + outerRect.x,\n          y: relativeRect.y + outerRect.y,\n          w: relativeRect.w,\n          h: relativeRect.h\n        };\n      };\n      var getRelativeRect = function (outerRect, innerRect) {\n        return {\n          x: innerRect.x - outerRect.x,\n          y: innerRect.y - outerRect.y,\n          w: innerRect.w,\n          h: innerRect.h\n        };\n      };\n      var getInnerRect = function () {\n        return getRelativeRect(clampRect, currentRect);\n      };\n      var moveRect = function (handle, startRect, deltaX, deltaY) {\n        var x = startRect.x + deltaX * handle.deltaX;\n        var y = startRect.y + deltaY * handle.deltaY;\n        var w = Math.max(20, startRect.w + deltaX * handle.deltaW);\n        var h = Math.max(20, startRect.h + deltaY * handle.deltaH);\n        var rect = currentRect = global$4.clamp({\n          x: x,\n          y: y,\n          w: w,\n          h: h\n        }, clampRect, handle.name === 'move');\n        rect = getRelativeRect(clampRect, rect);\n        instance.fire('updateRect', { rect: rect });\n        setInnerRect(rect);\n      };\n      var render = function () {\n        var createDragHelper = function (handle) {\n          var startRect;\n          return DragHelper(id, {\n            document: containerElm.ownerDocument,\n            root: getRootNode(container).dom,\n            handle: id + '-' + handle.name,\n            start: function () {\n              startRect = currentRect;\n            },\n            drag: function (e) {\n              moveRect(handle, startRect, e.deltaX, e.deltaY);\n            }\n          });\n        };\n        var cropContainer = SugarElement.fromTag('div');\n        setAll$1(cropContainer, {\n          id: id,\n          'class': prefix + 'croprect-container',\n          'role': 'grid',\n          'aria-dropeffect': 'execute'\n        });\n        append$2(container, cropContainer);\n        each$1(blockers, function (blocker) {\n          descendant(container, '#' + id).each(function (blockerElm) {\n            var cropBlocker = SugarElement.fromTag('div');\n            setAll$1(cropBlocker, {\n              'id': id + '-' + blocker,\n              'class': prefix + 'croprect-block',\n              'data-mce-bogus': 'all'\n            });\n            set$7(cropBlocker, 'display', 'none');\n            append$2(blockerElm, cropBlocker);\n          });\n        });\n        each$1(handles, function (handle) {\n          descendant(container, '#' + id).each(function (handleElm) {\n            var cropHandle = SugarElement.fromTag('div');\n            setAll$1(cropHandle, {\n              'id': id + '-' + handle.name,\n              'aria-label': handle.label,\n              'aria-grabbed': 'false',\n              'data-mce-bogus': 'all',\n              'role': 'gridcell',\n              'tabindex': '-1',\n              'title': handle.label\n            });\n            add$1(cropHandle, [\n              prefix + 'croprect-handle',\n              prefix + 'croprect-handle-' + handle.name\n            ]);\n            set$7(cropHandle, 'display', 'none');\n            append$2(handleElm, cropHandle);\n          });\n        });\n        dragHelpers = map$2(handles, createDragHelper);\n        repaint(currentRect);\n        var handleFocus = function (e) {\n          set$8(e.target, 'aria-grabbed', e.raw.type === 'focus' ? 'true' : 'false');\n        };\n        var handleKeydown = function (e) {\n          var activeHandle;\n          each$1(handles, function (handle) {\n            if (get$d(e.target, 'id') === id + '-' + handle.name) {\n              activeHandle = handle;\n              return false;\n            }\n          });\n          var moveAndBlock = function (evt, handle, startRect, deltaX, deltaY) {\n            evt.stopPropagation();\n            evt.preventDefault();\n            moveRect(activeHandle, startRect, deltaX, deltaY);\n          };\n          switch (e.raw.keyCode) {\n          case global$2.LEFT:\n            moveAndBlock(e, activeHandle, currentRect, -10, 0);\n            break;\n          case global$2.RIGHT:\n            moveAndBlock(e, activeHandle, currentRect, 10, 0);\n            break;\n          case global$2.UP:\n            moveAndBlock(e, activeHandle, currentRect, 0, -10);\n            break;\n          case global$2.DOWN:\n            moveAndBlock(e, activeHandle, currentRect, 0, 10);\n            break;\n          case global$2.ENTER:\n          case global$2.SPACEBAR:\n            e.prevent();\n            action();\n            break;\n          }\n        };\n        events.push(bind(container, 'focusin', handleFocus), bind(container, 'focusout', handleFocus), bind(container, 'keydown', handleKeydown));\n      };\n      var toggleVisibility = function (state) {\n        var selectors = __spreadArray(__spreadArray([], map$2(handles, function (handle) {\n          return '#' + id + '-' + handle.name;\n        }), true), map$2(blockers, function (blocker) {\n          return '#' + id + '-' + blocker;\n        }), true).join(',');\n        var elems = descendants(container, selectors);\n        if (state) {\n          each$1(elems, function (elm) {\n            return remove$6(elm, 'display');\n          });\n        } else {\n          each$1(elems, function (elm) {\n            return set$7(elm, 'display', 'none');\n          });\n        }\n      };\n      var repaint = function (rect) {\n        var updateElementRect = function (name, newRect) {\n          descendant(container, '#' + id + '-' + name).each(function (elm) {\n            setAll(elm, {\n              left: newRect.x + 'px',\n              top: newRect.y + 'px',\n              width: Math.max(0, newRect.w) + 'px',\n              height: Math.max(0, newRect.h) + 'px'\n            });\n          });\n        };\n        each$1(handles, function (handle) {\n          descendant(container, '#' + id + '-' + handle.name).each(function (elm) {\n            setAll(elm, {\n              left: rect.w * handle.xMul + rect.x + 'px',\n              top: rect.h * handle.yMul + rect.y + 'px'\n            });\n          });\n        });\n        updateElementRect('top', {\n          x: viewPortRect.x,\n          y: viewPortRect.y,\n          w: viewPortRect.w,\n          h: rect.y - viewPortRect.y\n        });\n        updateElementRect('right', {\n          x: rect.x + rect.w,\n          y: rect.y,\n          w: viewPortRect.w - rect.x - rect.w + viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('bottom', {\n          x: viewPortRect.x,\n          y: rect.y + rect.h,\n          w: viewPortRect.w,\n          h: viewPortRect.h - rect.y - rect.h + viewPortRect.y\n        });\n        updateElementRect('left', {\n          x: viewPortRect.x,\n          y: rect.y,\n          w: rect.x - viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('move', rect);\n      };\n      var setRect = function (rect) {\n        currentRect = rect;\n        repaint(currentRect);\n      };\n      var setViewPortRect = function (rect) {\n        viewPortRect = rect;\n        repaint(currentRect);\n      };\n      var setInnerRect = function (rect) {\n        setRect(getAbsoluteRect(clampRect, rect));\n      };\n      var setClampRect = function (rect) {\n        clampRect = rect;\n        repaint(currentRect);\n      };\n      var destroy = function () {\n        each$1(dragHelpers, function (helper) {\n          return helper.destroy();\n        });\n        dragHelpers = [];\n        each$1(events, function (e) {\n          return e.unbind();\n        });\n        events = [];\n      };\n      render();\n      var instance = __assign(__assign({}, global$3), {\n        toggleVisibility: toggleVisibility,\n        setClampRect: setClampRect,\n        setRect: setRect,\n        getInnerRect: getInnerRect,\n        setInnerRect: setInnerRect,\n        setViewPortRect: setViewPortRect,\n        destroy: destroy\n      });\n      return instance;\n    };\n    var CropRect = { create: create$2 };\n\n    var loadImage = function (image) {\n      return new global$c(function (resolve) {\n        var loaded = function () {\n          image.removeEventListener('load', loaded);\n          resolve(image);\n        };\n        if (image.complete) {\n          resolve(image);\n        } else {\n          image.addEventListener('load', loaded);\n        }\n      });\n    };\n    var renderImagePanel = function (initialUrl) {\n      var memBg = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image-bg'],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var zoomState = Cell(1);\n      var cropRect = api$1();\n      var rectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var viewRectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var repaintImg = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var zoom = zoomState.get();\n          var panelW = get$a(panel.element);\n          var panelH = get$b(panel.element);\n          var width = img.dom.naturalWidth * zoom;\n          var height = img.dom.naturalHeight * zoom;\n          var left = Math.max(0, panelW / 2 - width / 2);\n          var top = Math.max(0, panelH / 2 - height / 2);\n          var css = {\n            left: left.toString() + 'px',\n            top: top.toString() + 'px',\n            width: width.toString() + 'px',\n            height: height.toString() + 'px',\n            position: 'absolute'\n          };\n          setAll(img, css);\n          memBg.getOpt(panel).each(function (bg) {\n            setAll(bg.element, css);\n          });\n          cropRect.run(function (cRect) {\n            var rect = rectState.get();\n            cRect.setRect({\n              x: rect.x * zoom + left,\n              y: rect.y * zoom + top,\n              w: rect.w * zoom,\n              h: rect.h * zoom\n            });\n            cRect.setClampRect({\n              x: left,\n              y: top,\n              w: width,\n              h: height\n            });\n            cRect.setViewPortRect({\n              x: 0,\n              y: 0,\n              w: panelW,\n              h: panelH\n            });\n          });\n        });\n      };\n      var zoomFit = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var panelW = get$a(panel.element);\n          var panelH = get$b(panel.element);\n          var width = img.dom.naturalWidth;\n          var height = img.dom.naturalHeight;\n          var zoom = Math.min(panelW / width, panelH / height);\n          if (zoom >= 1) {\n            zoomState.set(1);\n          } else {\n            zoomState.set(zoom);\n          }\n        });\n      };\n      var updateSrc = function (anyInSystem, url) {\n        var img = SugarElement.fromTag('img');\n        set$8(img, 'src', url);\n        return loadImage(img.dom).then(function () {\n          if (anyInSystem.getSystem().isConnected()) {\n            memContainer.getOpt(anyInSystem).map(function (panel) {\n              var aImg = external$2({ element: img });\n              Replacing.replaceAt(panel, 1, Optional.some(aImg));\n              var lastViewRect = viewRectState.get();\n              var viewRect = {\n                x: 0,\n                y: 0,\n                w: img.dom.naturalWidth,\n                h: img.dom.naturalHeight\n              };\n              viewRectState.set(viewRect);\n              var rect = global$4.inflate(viewRect, -20, -20);\n              rectState.set(rect);\n              if (lastViewRect.w !== viewRect.w || lastViewRect.h !== viewRect.h) {\n                zoomFit(panel, img);\n              }\n              repaintImg(panel, img);\n            });\n          }\n        });\n      };\n      var zoom = function (anyInSystem, direction) {\n        var currentZoom = zoomState.get();\n        var newZoom = direction > 0 ? Math.min(2, currentZoom + 0.1) : Math.max(0.1, currentZoom - 0.1);\n        zoomState.set(newZoom);\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var img = panel.components()[1].element;\n          repaintImg(panel, img);\n        });\n      };\n      var showCrop = function () {\n        cropRect.run(function (cRect) {\n          cRect.toggleVisibility(true);\n        });\n      };\n      var hideCrop = function () {\n        cropRect.run(function (cRect) {\n          cRect.toggleVisibility(false);\n        });\n      };\n      var getRect = function () {\n        return rectState.get();\n      };\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image']\n        },\n        components: [\n          memBg.asSpec(),\n          {\n            dom: {\n              tag: 'img',\n              attributes: { src: initialUrl }\n            }\n          },\n          {\n            dom: { tag: 'div' },\n            behaviours: derive$1([config('image-panel-crop-events', [\n                runOnAttached(function (comp) {\n                  memContainer.getOpt(comp).each(function (container) {\n                    var el = container.element.dom;\n                    var cRect = CropRect.create({\n                      x: 10,\n                      y: 10,\n                      w: 100,\n                      h: 100\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, el, noop);\n                    cRect.toggleVisibility(false);\n                    cRect.on('updateRect', function (e) {\n                      var rect = e.rect;\n                      var zoom = zoomState.get();\n                      var newRect = {\n                        x: Math.round(rect.x / zoom),\n                        y: Math.round(rect.y / zoom),\n                        w: Math.round(rect.w / zoom),\n                        h: Math.round(rect.h / zoom)\n                      };\n                      rectState.set(newRect);\n                    });\n                    cropRect.set(cRect);\n                  });\n                }),\n                runOnDetached(function () {\n                  cropRect.clear();\n                })\n              ])])\n          }\n        ],\n        containerBehaviours: derive$1([\n          Replacing.config({}),\n          config('image-panel-events', [runOnAttached(function (comp) {\n              updateSrc(comp, initialUrl);\n            })])\n        ])\n      });\n      var memContainer = record(container);\n      var getMeasurements = function () {\n        var viewRect = viewRectState.get();\n        return {\n          width: viewRect.w,\n          height: viewRect.h\n        };\n      };\n      return {\n        memContainer: memContainer,\n        updateSrc: updateSrc,\n        zoom: zoom,\n        showCrop: showCrop,\n        hideCrop: hideCrop,\n        getRect: getRect,\n        getMeasurements: getMeasurements\n      };\n    };\n\n    var createButton = function (innerHtml, icon, disabled, action, providersBackstage) {\n      return renderIconButton({\n        name: innerHtml,\n        icon: Optional.some(icon),\n        disabled: disabled,\n        tooltip: Optional.some(innerHtml),\n        primary: false,\n        borderless: false\n      }, action, providersBackstage);\n    };\n    var setButtonEnabled = function (button, enabled) {\n      if (enabled) {\n        Disabling.enable(button);\n      } else {\n        Disabling.disable(button);\n      }\n    };\n    var renderSideBar = function (providersBackstage) {\n      var updateButtonUndoStates = function (anyInSystem, undoEnabled, redoEnabled) {\n        memUndo.getOpt(anyInSystem).each(function (undo) {\n          setButtonEnabled(undo, undoEnabled);\n        });\n        memRedo.getOpt(anyInSystem).each(function (redo) {\n          setButtonEnabled(redo, redoEnabled);\n        });\n      };\n      var memUndo = record(createButton('Undo', 'undo', true, function (button) {\n        emitWith(button, internal.undo(), { direction: 1 });\n      }, providersBackstage));\n      var memRedo = record(createButton('Redo', 'redo', true, function (button) {\n        emitWith(button, internal.redo(), { direction: 1 });\n      }, providersBackstage));\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-image-tools__toolbar',\n            'tox-image-tools__sidebar'\n          ]\n        },\n        components: [\n          memUndo.asSpec(),\n          memRedo.asSpec(),\n          createButton('Zoom in', 'zoom-in', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: 1 });\n          }, providersBackstage),\n          createButton('Zoom out', 'zoom-out', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: -1 });\n          }, providersBackstage)\n        ]\n      });\n      return {\n        container: container,\n        updateButtonUndoStates: updateButtonUndoStates\n      };\n    };\n\n    function UndoStack () {\n      var data = [];\n      var index = -1;\n      var add = function (state) {\n        var removed = data.splice(++index);\n        data.push(state);\n        return {\n          state: state,\n          removed: removed\n        };\n      };\n      var undo = function () {\n        if (canUndo()) {\n          return data[--index];\n        }\n      };\n      var redo = function () {\n        if (canRedo()) {\n          return data[++index];\n        }\n      };\n      var canUndo = function () {\n        return index > 0;\n      };\n      var canRedo = function () {\n        return index !== -1 && index < data.length - 1;\n      };\n      return {\n        data: data,\n        add: add,\n        undo: undo,\n        redo: redo,\n        canUndo: canUndo,\n        canRedo: canRedo\n      };\n    }\n\n    var makeState = function (initialState) {\n      var blobState = Cell(initialState);\n      var tempState = value$1();\n      var undoStack = UndoStack();\n      undoStack.add(initialState);\n      var getBlobState = function () {\n        return blobState.get();\n      };\n      var setBlobState = function (state) {\n        blobState.set(state);\n      };\n      var getTempState = function () {\n        return tempState.get().getOrThunk(blobState.get);\n      };\n      var updateTempState = function (blob) {\n        var newTempState = createState(blob);\n        destroyTempState();\n        tempState.set(newTempState);\n        return newTempState.url;\n      };\n      var createState = function (blob) {\n        return {\n          blob: blob,\n          url: URL.createObjectURL(blob)\n        };\n      };\n      var destroyState = function (state) {\n        URL.revokeObjectURL(state.url);\n      };\n      var destroyStates = function (states) {\n        global$5.each(states, destroyState);\n      };\n      var destroyTempState = function () {\n        tempState.on(destroyState);\n        tempState.clear();\n      };\n      var addBlobState = function (blob) {\n        var newState = createState(blob);\n        setBlobState(newState);\n        var removed = undoStack.add(newState).removed;\n        destroyStates(removed);\n        return newState.url;\n      };\n      var addTempState = function (blob) {\n        var newState = createState(blob);\n        tempState.set(newState);\n        return newState.url;\n      };\n      var applyTempState = function (postApply) {\n        return tempState.get().fold(noop, function (temp) {\n          addBlobState(temp.blob);\n          postApply();\n        });\n      };\n      var undo = function () {\n        var currentState = undoStack.undo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var redo = function () {\n        var currentState = undoStack.redo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var getHistoryStates = function () {\n        var undoEnabled = undoStack.canUndo();\n        var redoEnabled = undoStack.canRedo();\n        return {\n          undoEnabled: undoEnabled,\n          redoEnabled: redoEnabled\n        };\n      };\n      return {\n        getBlobState: getBlobState,\n        setBlobState: setBlobState,\n        addBlobState: addBlobState,\n        getTempState: getTempState,\n        updateTempState: updateTempState,\n        addTempState: addTempState,\n        applyTempState: applyTempState,\n        destroyTempState: destroyTempState,\n        undo: undo,\n        redo: redo,\n        getHistoryStates: getHistoryStates\n      };\n    };\n\n    var renderImageTools = function (detail, providersBackstage) {\n      var state = makeState(detail.currentState);\n      var zoom = function (anyInSystem, simulatedEvent) {\n        var direction = simulatedEvent.event.direction;\n        imagePanel.zoom(anyInSystem, direction);\n      };\n      var updateButtonUndoStates = function (anyInSystem) {\n        var historyStates = state.getHistoryStates();\n        sideBar.updateButtonUndoStates(anyInSystem, historyStates.undoEnabled, historyStates.redoEnabled);\n        emitWith(anyInSystem, external.formActionEvent, {\n          name: external.saveState(),\n          value: historyStates.undoEnabled\n        });\n      };\n      var disableUndoRedo = function (anyInSystem) {\n        sideBar.updateButtonUndoStates(anyInSystem, false, false);\n      };\n      var undo = function (anyInSystem, _simulatedEvent) {\n        var url = state.undo();\n        updateSrc(anyInSystem, url).then(function (_oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var redo = function (anyInSystem, _simulatedEvent) {\n        var url = state.redo();\n        updateSrc(anyInSystem, url).then(function (_oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var imageResultToBlob = function (ir) {\n        return ir.toBlob();\n      };\n      var block = function (anyInSystem) {\n        emitWith(anyInSystem, external.formActionEvent, {\n          name: external.disable(),\n          value: {}\n        });\n      };\n      var unblock = function (anyInSystem) {\n        editPanel.getApplyButton(anyInSystem).each(function (applyButton) {\n          Disabling.enable(applyButton);\n        });\n        emitWith(anyInSystem, external.formActionEvent, {\n          name: external.enable(),\n          value: {}\n        });\n      };\n      var updateSrc = function (anyInSystem, src) {\n        block(anyInSystem);\n        return imagePanel.updateSrc(anyInSystem, src);\n      };\n      var blobManipulate = function (anyInSystem, blob, filter, action, swap) {\n        block(anyInSystem);\n        blobToImageResult(blob).then(filter).then(imageResultToBlob).then(action).then(function (url) {\n          return updateSrc(anyInSystem, url);\n        }).then(function () {\n          updateButtonUndoStates(anyInSystem);\n          swap();\n          unblock(anyInSystem);\n        }).catch(function (err) {\n          console.log(err);\n          if (anyInSystem.getSystem().isConnected()) {\n            unblock(anyInSystem);\n          }\n        });\n      };\n      var manipulate = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          return state.updateTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var tempManipulate = function (anyInSystem, filter) {\n        var blob = state.getTempState().blob;\n        var action = function (blob) {\n          return state.addTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, noop);\n      };\n      var manipulateApply = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          var url = state.addBlobState(blob);\n          destroyTempState(anyInSystem);\n          return url;\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var apply = function (anyInSystem, simulatedEvent) {\n        var postApply = function () {\n          destroyTempState(anyInSystem);\n          var swap = simulatedEvent.event.swap;\n          swap();\n        };\n        state.applyTempState(postApply);\n      };\n      var destroyTempState = function (anyInSystem) {\n        var currentUrl = state.getBlobState().url;\n        state.destroyTempState();\n        updateButtonUndoStates(anyInSystem);\n        return currentUrl;\n      };\n      var cancel = function (anyInSystem) {\n        var currentUrl = destroyTempState(anyInSystem);\n        updateSrc(anyInSystem, currentUrl).then(function (_oImg) {\n          unblock(anyInSystem);\n        });\n      };\n      var back = function (anyInSystem, simulatedEvent) {\n        cancel(anyInSystem);\n        var swap = simulatedEvent.event.swap;\n        swap();\n        imagePanel.hideCrop();\n      };\n      var transform = function (anyInSystem, simulatedEvent) {\n        return manipulate(anyInSystem, simulatedEvent.event.transform, noop);\n      };\n      var tempTransform = function (anyInSystem, simulatedEvent) {\n        return tempManipulate(anyInSystem, simulatedEvent.event.transform);\n      };\n      var transformApply = function (anyInSystem, simulatedEvent) {\n        return manipulateApply(anyInSystem, simulatedEvent.event.transform, simulatedEvent.event.swap);\n      };\n      var imagePanel = renderImagePanel(detail.currentState.url);\n      var sideBar = renderSideBar(providersBackstage);\n      var editPanel = renderEditPanel(imagePanel, providersBackstage);\n      var swap = function (anyInSystem, simulatedEvent) {\n        disableUndoRedo(anyInSystem);\n        var transform = simulatedEvent.event.transform;\n        var swap = simulatedEvent.event.swap;\n        transform.fold(function () {\n          swap();\n        }, function (transform) {\n          manipulate(anyInSystem, transform, swap);\n        });\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' }\n        },\n        components: [\n          editPanel.memContainer.asSpec(),\n          imagePanel.memContainer.asSpec(),\n          sideBar.container\n        ],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return state.getBlobState();\n              }\n            }\n          }),\n          config('image-tools-events', [\n            run$1(internal.undo(), undo),\n            run$1(internal.redo(), redo),\n            run$1(internal.zoom(), zoom),\n            run$1(internal.back(), back),\n            run$1(internal.apply(), apply),\n            run$1(internal.transform(), transform),\n            run$1(internal.tempTransform(), tempTransform),\n            run$1(internal.transformApply(), transformApply),\n            run$1(internal.swap(), swap)\n          ]),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var renderLabel = function (spec, backstageShared) {\n      var label = {\n        dom: {\n          tag: 'label',\n          innerHtml: backstageShared.providers.translate(spec.label),\n          classes: ['tox-label']\n        }\n      };\n      var comps = map$2(spec.items, backstageShared.interpreter);\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [label].concat(comps),\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Replacing.config({}),\n          RepresentingConfigs.domHtml(Optional.none()),\n          Keying.config({ mode: 'acyclic' })\n        ])\n      };\n    };\n\n    var isSingleListItem = function (item) {\n      return !has$2(item, 'items');\n    };\n    var dataAttribute = 'data-value';\n    var fetchItems = function (dropdownComp, name, items, selectedValue) {\n      return map$2(items, function (item) {\n        if (!isSingleListItem(item)) {\n          return {\n            type: 'nestedmenuitem',\n            text: item.text,\n            getSubmenuItems: function () {\n              return fetchItems(dropdownComp, name, item.items, selectedValue);\n            }\n          };\n        } else {\n          return {\n            type: 'togglemenuitem',\n            text: item.text,\n            value: item.value,\n            active: item.value === selectedValue,\n            onAction: function () {\n              Representing.setValue(dropdownComp, item.value);\n              emitWith(dropdownComp, formChangeEvent, { name: name });\n              Focusing.focus(dropdownComp);\n            }\n          };\n        }\n      });\n    };\n    var findItemByValue = function (items, value) {\n      return findMap(items, function (item) {\n        if (!isSingleListItem(item)) {\n          return findItemByValue(item.items, value);\n        } else {\n          return someIf(item.value === value, item);\n        }\n      });\n    };\n    var renderListBox = function (spec, backstage) {\n      var providersBackstage = backstage.shared.providers;\n      var initialItem = head(spec.items).filter(isSingleListItem);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({\n        dom: {},\n        factory: {\n          sketch: function (sketchSpec) {\n            return renderCommonDropdown({\n              uid: sketchSpec.uid,\n              text: initialItem.map(function (item) {\n                return item.text;\n              }),\n              icon: Optional.none(),\n              tooltip: spec.label,\n              role: Optional.none(),\n              fetch: function (comp, callback) {\n                var items = fetchItems(comp, spec.name, spec.items, Representing.getValue(comp));\n                callback(build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false));\n              },\n              onSetup: constant$1(noop),\n              getApi: constant$1({}),\n              columns: 1,\n              presets: 'normal',\n              classes: [],\n              dropdownBehaviours: [\n                Tabstopping.config({}),\n                Representing.config({\n                  store: {\n                    mode: 'manual',\n                    initialValue: initialItem.map(function (item) {\n                      return item.value;\n                    }).getOr(''),\n                    getValue: function (comp) {\n                      return get$d(comp.element, dataAttribute);\n                    },\n                    setValue: function (comp, data) {\n                      findItemByValue(spec.items, data).each(function (item) {\n                        set$8(comp.element, dataAttribute, item.value);\n                        emitWith(comp, updateMenuText, { text: item.text });\n                      });\n                    }\n                  }\n                })\n              ]\n            }, 'tox-listbox', backstage.shared);\n          }\n        }\n      });\n      var listBoxWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-listboxfield']\n        },\n        components: [pField]\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [listBoxWrap]\n        ]),\n        fieldBehaviours: derive$1([Disabling.config({\n            disabled: constant$1(spec.disabled),\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          })])\n      });\n    };\n\n    var renderPanel = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: spec.classes\n        },\n        components: map$2(spec.items, backstage.shared.interpreter)\n      };\n    };\n\n    var factory$e = function (detail, _spec) {\n      var options = map$2(detail.options, function (option) {\n        return {\n          dom: {\n            tag: 'option',\n            value: option.value,\n            innerHtml: option.text\n          }\n        };\n      });\n      var initialValues = detail.data.map(function (v) {\n        return wrap$1('initialValue', v);\n      }).getOr({});\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'select',\n          classes: detail.selectClasses,\n          attributes: detail.selectAttributes\n        },\n        components: options,\n        behaviours: augment(detail.selectBehaviours, [\n          Focusing.config({}),\n          Representing.config({\n            store: __assign({\n              mode: 'manual',\n              getValue: function (select) {\n                return get$5(select.element);\n              },\n              setValue: function (select, newValue) {\n                var found = find$5(detail.options, function (opt) {\n                  return opt.value === newValue;\n                });\n                if (found.isSome()) {\n                  set$4(select.element, newValue);\n                }\n              }\n            }, initialValues)\n          })\n        ])\n      };\n    };\n    var HtmlSelect = single({\n      name: 'HtmlSelect',\n      configFields: [\n        required$1('options'),\n        field('selectBehaviours', [\n          Focusing,\n          Representing\n        ]),\n        defaulted('selectClasses', []),\n        defaulted('selectAttributes', {}),\n        option('data')\n      ],\n      factory: factory$e\n    });\n\n    var renderSelectBox = function (spec, providersBackstage) {\n      var translatedOptions = map$2(spec.items, function (item) {\n        return {\n          text: providersBackstage.translate(item.text),\n          value: item.value\n        };\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({\n        dom: {},\n        selectAttributes: { size: spec.size },\n        options: translatedOptions,\n        factory: HtmlSelect,\n        selectBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          }),\n          Tabstopping.config({}),\n          config('selectbox-change', [run$1(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var chevron = spec.size > 1 ? Optional.none() : Optional.some(render$3('chevron-down', {\n        tag: 'div',\n        classes: ['tox-selectfield__icon-js']\n      }, providersBackstage.icons));\n      var selectWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield']\n        },\n        components: flatten([\n          [pField],\n          chevron.toArray()\n        ])\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [selectWrap]\n        ]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    var renderTable = function (spec, providersBackstage) {\n      var renderTh = function (text) {\n        return {\n          dom: {\n            tag: 'th',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderHeader = function (header) {\n        return {\n          dom: { tag: 'thead' },\n          components: [{\n              dom: { tag: 'tr' },\n              components: map$2(header, renderTh)\n            }]\n        };\n      };\n      var renderTd = function (text) {\n        return {\n          dom: {\n            tag: 'td',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderTr = function (row) {\n        return {\n          dom: { tag: 'tr' },\n          components: map$2(row, renderTd)\n        };\n      };\n      var renderRows = function (rows) {\n        return {\n          dom: { tag: 'tbody' },\n          components: map$2(rows, renderTr)\n        };\n      };\n      return {\n        dom: {\n          tag: 'table',\n          classes: ['tox-dialog__table']\n        },\n        components: [\n          renderHeader(spec.header),\n          renderRows(spec.cells)\n        ],\n        behaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n\n    var renderTextField = function (spec, providersBackstage) {\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var baseInputBehaviours = [\n        Disabling.config({\n          disabled: function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }\n        }),\n        receivingConfig(),\n        Keying.config({\n          mode: 'execution',\n          useEnter: spec.multiline !== true,\n          useControlEnter: spec.multiline === true,\n          execute: function (comp) {\n            emit(comp, formSubmitEvent);\n            return Optional.some(true);\n          }\n        }),\n        config('textfield-change', [\n          run$1(input(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          }),\n          run$1(postPaste(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          })\n        ]),\n        Tabstopping.config({})\n      ];\n      var validatingBehaviours = spec.validation.map(function (vl) {\n        return Invalidating.config({\n          getRoot: function (input) {\n            return parent(input.element);\n          },\n          invalidClass: 'tox-invalid',\n          validator: {\n            validate: function (input) {\n              var v = Representing.getValue(input);\n              var result = vl.validator(v);\n              return Future.pure(result === true ? Result.value(v) : Result.error(result));\n            },\n            validateOnLoad: vl.validateOnLoad\n          }\n        });\n      }).toArray();\n      var placeholder = spec.placeholder.fold(constant$1({}), function (p) {\n        return { placeholder: providersBackstage.translate(p) };\n      });\n      var inputMode = spec.inputMode.fold(constant$1({}), function (mode) {\n        return { inputmode: mode };\n      });\n      var inputAttributes = __assign(__assign({}, placeholder), inputMode);\n      var pField = FormField.parts.field({\n        tag: spec.multiline === true ? 'textarea' : 'input',\n        inputAttributes: inputAttributes,\n        inputClasses: [spec.classname],\n        inputBehaviours: derive$1(flatten([\n          baseInputBehaviours,\n          validatingBehaviours\n        ])),\n        selectOnFocus: false,\n        factory: Input\n      });\n      var extraClasses = spec.flex ? ['tox-form__group--stretched'] : [];\n      var extraClasses2 = extraClasses.concat(spec.maximized ? ['tox-form-group--maximize'] : []);\n      var extraBehaviours = [\n        Disabling.config({\n          disabled: function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          },\n          onDisabled: function (comp) {\n            FormField.getField(comp).each(Disabling.disable);\n          },\n          onEnabled: function (comp) {\n            FormField.getField(comp).each(Disabling.enable);\n          }\n        }),\n        receivingConfig()\n      ];\n      return renderFormFieldWith(pLabel, pField, extraClasses2, extraBehaviours);\n    };\n    var renderInput = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: false,\n        label: spec.label,\n        inputMode: spec.inputMode,\n        placeholder: spec.placeholder,\n        flex: false,\n        disabled: spec.disabled,\n        classname: 'tox-textfield',\n        validation: Optional.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n    var renderTextarea = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: true,\n        label: spec.label,\n        inputMode: Optional.none(),\n        placeholder: spec.placeholder,\n        flex: true,\n        disabled: spec.disabled,\n        classname: 'tox-textarea',\n        validation: Optional.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n\n    var events$6 = function (streamConfig, streamState) {\n      var streams = streamConfig.stream.streams;\n      var processor = streams.setup(streamConfig, streamState);\n      return derive$2([\n        run$1(streamConfig.event, processor),\n        runOnDetached(function () {\n          return streamState.cancel();\n        })\n      ].concat(streamConfig.cancelEvent.map(function (e) {\n        return [run$1(e, function () {\n            return streamState.cancel();\n          })];\n      }).getOr([])));\n    };\n\n    var ActiveStreaming = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$6\n    });\n\n    var throttle = function (_config) {\n      var state = Cell(null);\n      var readState = function () {\n        return { timer: state.get() !== null ? 'set' : 'unset' };\n      };\n      var setTimer = function (t) {\n        state.set(t);\n      };\n      var cancel = function () {\n        var t = state.get();\n        if (t !== null) {\n          t.cancel();\n        }\n      };\n      return nu$8({\n        readState: readState,\n        setTimer: setTimer,\n        cancel: cancel\n      });\n    };\n    var init$9 = function (spec) {\n      return spec.stream.streams.state(spec);\n    };\n\n    var StreamingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        throttle: throttle,\n        init: init$9\n    });\n\n    var setup$c = function (streamInfo, streamState) {\n      var sInfo = streamInfo.stream;\n      var throttler = last(streamInfo.onStream, sInfo.delay);\n      streamState.setTimer(throttler);\n      return function (component, simulatedEvent) {\n        throttler.throttle(component, simulatedEvent);\n        if (sInfo.stopEvent) {\n          simulatedEvent.stop();\n        }\n      };\n    };\n    var StreamingSchema = [\n      requiredOf('stream', choose$1('mode', {\n        throttle: [\n          required$1('delay'),\n          defaulted('stopEvent', true),\n          output$1('streams', {\n            setup: setup$c,\n            state: throttle\n          })\n        ]\n      })),\n      defaulted('event', 'input'),\n      option('cancelEvent'),\n      onStrictHandler('onStream')\n    ];\n\n    var Streaming = create$8({\n      fields: StreamingSchema,\n      name: 'streaming',\n      active: ActiveStreaming,\n      state: StreamingState\n    });\n\n    var setValueFromItem = function (model, input, item) {\n      var itemData = Representing.getValue(item);\n      Representing.setValue(input, itemData);\n      setCursorAtEnd(input);\n    };\n    var setSelectionOn = function (input, f) {\n      var el = input.element;\n      var value = get$5(el);\n      var node = el.dom;\n      if (get$d(el, 'type') !== 'number') {\n        f(node, value);\n      }\n    };\n    var setCursorAtEnd = function (input) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(value.length, value.length);\n      });\n    };\n    var setSelectionToEnd = function (input, startOffset) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(startOffset, value.length);\n      });\n    };\n    var attemptSelectOver = function (model, input, item) {\n      if (!model.selectsOver) {\n        return Optional.none();\n      } else {\n        var currentValue = Representing.getValue(input);\n        var inputDisplay_1 = model.getDisplayText(currentValue);\n        var itemValue = Representing.getValue(item);\n        var itemDisplay = model.getDisplayText(itemValue);\n        return itemDisplay.indexOf(inputDisplay_1) === 0 ? Optional.some(function () {\n          setValueFromItem(model, input, item);\n          setSelectionToEnd(input, inputDisplay_1.length);\n        }) : Optional.none();\n      }\n    };\n\n    var itemExecute = constant$1('alloy.typeahead.itemexecute');\n\n    var make$3 = function (detail, components, spec, externals) {\n      var navigateList = function (comp, simulatedEvent, highlighter) {\n        detail.previewing.set(false);\n        var sandbox = Coupling.getCoupled(comp, 'sandbox');\n        if (Sandboxing.isOpen(sandbox)) {\n          Composing.getCurrent(sandbox).each(function (menu) {\n            Highlighting.getHighlighted(menu).fold(function () {\n              highlighter(menu);\n            }, function () {\n              dispatchEvent(sandbox, menu.element, 'keydown', simulatedEvent);\n            });\n          });\n        } else {\n          var onOpenSync = function (sandbox) {\n            Composing.getCurrent(sandbox).each(highlighter);\n          };\n          open(detail, mapFetch(comp), comp, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n        }\n      };\n      var focusBehaviours$1 = focusBehaviours(detail);\n      var mapFetch = function (comp) {\n        return function (tdata) {\n          return tdata.map(function (data) {\n            var menus = values(data.menus);\n            var items = bind$3(menus, function (menu) {\n              return filter$2(menu.items, function (item) {\n                return item.type === 'item';\n              });\n            });\n            var repState = Representing.getState(comp);\n            repState.update(map$2(items, function (item) {\n              return item.data;\n            }));\n            return data;\n          });\n        };\n      };\n      var behaviours = [\n        Focusing.config({}),\n        Representing.config({\n          onSetValue: detail.onSetValue,\n          store: __assign({\n            mode: 'dataset',\n            getDataKey: function (comp) {\n              return get$5(comp.element);\n            },\n            getFallbackEntry: function (itemString) {\n              return {\n                value: itemString,\n                meta: {}\n              };\n            },\n            setValue: function (comp, data) {\n              set$4(comp.element, detail.model.getDisplayText(data));\n            }\n          }, detail.initialData.map(function (d) {\n            return wrap$1('initialValue', d);\n          }).getOr({}))\n        }),\n        Streaming.config({\n          stream: {\n            mode: 'throttle',\n            delay: detail.responseTime,\n            stopEvent: false\n          },\n          onStream: function (component, _simulatedEvent) {\n            var sandbox = Coupling.getCoupled(component, 'sandbox');\n            var focusInInput = Focusing.isFocused(component);\n            if (focusInInput) {\n              if (get$5(component.element).length >= detail.minChars) {\n                var previousValue_1 = Composing.getCurrent(sandbox).bind(function (menu) {\n                  return Highlighting.getHighlighted(menu).map(Representing.getValue);\n                });\n                detail.previewing.set(true);\n                var onOpenSync = function (_sandbox) {\n                  Composing.getCurrent(sandbox).each(function (menu) {\n                    previousValue_1.fold(function () {\n                      if (detail.model.selectsOver) {\n                        Highlighting.highlightFirst(menu);\n                      }\n                    }, function (pv) {\n                      Highlighting.highlightBy(menu, function (item) {\n                        var itemData = Representing.getValue(item);\n                        return itemData.value === pv.value;\n                      });\n                      Highlighting.getHighlighted(menu).orThunk(function () {\n                        Highlighting.highlightFirst(menu);\n                        return Optional.none();\n                      });\n                    });\n                  });\n                };\n                open(detail, mapFetch(component), component, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n              }\n            }\n          },\n          cancelEvent: typeaheadCancel()\n        }),\n        Keying.config({\n          mode: 'special',\n          onDown: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightFirst);\n            return Optional.some(true);\n          },\n          onEscape: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            if (Sandboxing.isOpen(sandbox)) {\n              Sandboxing.close(sandbox);\n              return Optional.some(true);\n            }\n            return Optional.none();\n          },\n          onUp: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightLast);\n            return Optional.some(true);\n          },\n          onEnter: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            var sandboxIsOpen = Sandboxing.isOpen(sandbox);\n            if (sandboxIsOpen && !detail.previewing.get()) {\n              return Composing.getCurrent(sandbox).bind(function (menu) {\n                return Highlighting.getHighlighted(menu);\n              }).map(function (item) {\n                emitWith(comp, itemExecute(), { item: item });\n                return true;\n              });\n            } else {\n              var currentValue = Representing.getValue(comp);\n              emit(comp, typeaheadCancel());\n              detail.onExecute(sandbox, comp, currentValue);\n              if (sandboxIsOpen) {\n                Sandboxing.close(sandbox);\n              }\n              return Optional.some(true);\n            }\n          }\n        }),\n        Toggling.config({\n          toggleClass: detail.markers.openClass,\n          aria: { mode: 'expanded' }\n        }),\n        Coupling.config({\n          others: {\n            sandbox: function (hotspot) {\n              return makeSandbox$1(detail, hotspot, {\n                onOpen: function () {\n                  return Toggling.on(hotspot);\n                },\n                onClose: function () {\n                  return Toggling.off(hotspot);\n                }\n              });\n            }\n          }\n        }),\n        config('typeaheadevents', [\n          runOnExecute$1(function (comp) {\n            var onOpenSync = noop;\n            togglePopup(detail, mapFetch(comp), comp, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n          }),\n          run$1(itemExecute(), function (comp, se) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            setValueFromItem(detail.model, comp, se.event.item);\n            emit(comp, typeaheadCancel());\n            detail.onItemExecute(comp, sandbox, se.event.item, Representing.getValue(comp));\n            Sandboxing.close(sandbox);\n            setCursorAtEnd(comp);\n          })\n        ].concat(detail.dismissOnBlur ? [run$1(postBlur(), function (typeahead) {\n            var sandbox = Coupling.getCoupled(typeahead, 'sandbox');\n            if (search(sandbox.element).isNone()) {\n              Sandboxing.close(sandbox);\n            }\n          })] : []))\n      ];\n      return {\n        uid: detail.uid,\n        dom: dom(deepMerge(detail, {\n          inputAttributes: {\n            'role': 'combobox',\n            'aria-autocomplete': 'list',\n            'aria-haspopup': 'true'\n          }\n        })),\n        behaviours: __assign(__assign({}, focusBehaviours$1), augment(detail.typeaheadBehaviours, behaviours)),\n        eventOrder: detail.eventOrder\n      };\n    };\n\n    var schema$g = constant$1([\n      option('lazySink'),\n      required$1('fetch'),\n      defaulted('minChars', 5),\n      defaulted('responseTime', 1000),\n      onHandler('onOpen'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      defaulted('layouts', Optional.none()),\n      defaulted('eventOrder', {}),\n      defaultedObjOf('model', {}, [\n        defaulted('getDisplayText', function (itemData) {\n          return itemData.meta !== undefined && itemData.meta.text !== undefined ? itemData.meta.text : itemData.value;\n        }),\n        defaulted('selectsOver', true),\n        defaulted('populateFromBrowse', true)\n      ]),\n      onHandler('onSetValue'),\n      onKeyboardHandler('onExecute'),\n      onHandler('onItemExecute'),\n      defaulted('inputClasses', []),\n      defaulted('inputAttributes', {}),\n      defaulted('inputStyles', {}),\n      defaulted('matchWidth', true),\n      defaulted('useMinWidth', false),\n      defaulted('dismissOnBlur', true),\n      markers$1(['openClass']),\n      option('initialData'),\n      field('typeaheadBehaviours', [\n        Focusing,\n        Representing,\n        Streaming,\n        Keying,\n        Toggling,\n        Coupling\n      ]),\n      customField('previewing', function () {\n        return Cell(true);\n      })\n    ].concat(schema$k()).concat(sandboxFields()));\n    var parts$b = constant$1([external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        overrides: function (detail) {\n          return {\n            fakeFocus: true,\n            onHighlight: function (menu, item) {\n              if (!detail.previewing.get()) {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  if (detail.model.populateFromBrowse) {\n                    setValueFromItem(detail.model, input, item);\n                  }\n                });\n              } else {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  attemptSelectOver(detail.model, input, item).fold(function () {\n                    return Highlighting.dehighlight(menu, item);\n                  }, function (fn) {\n                    return fn();\n                  });\n                });\n              }\n              detail.previewing.set(false);\n            },\n            onExecute: function (menu, item) {\n              return menu.getSystem().getByUid(detail.uid).toOptional().map(function (typeahead) {\n                emitWith(typeahead, itemExecute(), { item: item });\n                return true;\n              });\n            },\n            onHover: function (menu, item) {\n              detail.previewing.set(false);\n              menu.getSystem().getByUid(detail.uid).each(function (input) {\n                if (detail.model.populateFromBrowse) {\n                  setValueFromItem(detail.model, input, item);\n                }\n              });\n            }\n          };\n        }\n      })]);\n\n    var Typeahead = composite({\n      name: 'Typeahead',\n      configFields: schema$g(),\n      partFields: parts$b(),\n      factory: make$3\n    });\n\n    var wrap = function (delegate) {\n      var toCached = function () {\n        return wrap(delegate.toCached());\n      };\n      var bindFuture = function (f) {\n        return wrap(delegate.bind(function (resA) {\n          return resA.fold(function (err) {\n            return Future.pure(Result.error(err));\n          }, function (a) {\n            return f(a);\n          });\n        }));\n      };\n      var bindResult = function (f) {\n        return wrap(delegate.map(function (resA) {\n          return resA.bind(f);\n        }));\n      };\n      var mapResult = function (f) {\n        return wrap(delegate.map(function (resA) {\n          return resA.map(f);\n        }));\n      };\n      var mapError = function (f) {\n        return wrap(delegate.map(function (resA) {\n          return resA.mapError(f);\n        }));\n      };\n      var foldResult = function (whenError, whenValue) {\n        return delegate.map(function (res) {\n          return res.fold(whenError, whenValue);\n        });\n      };\n      var withTimeout = function (timeout, errorThunk) {\n        return wrap(Future.nu(function (callback) {\n          var timedOut = false;\n          var timer = setTimeout(function () {\n            timedOut = true;\n            callback(Result.error(errorThunk()));\n          }, timeout);\n          delegate.get(function (result) {\n            if (!timedOut) {\n              clearTimeout(timer);\n              callback(result);\n            }\n          });\n        }));\n      };\n      return __assign(__assign({}, delegate), {\n        toCached: toCached,\n        bindFuture: bindFuture,\n        bindResult: bindResult,\n        mapResult: mapResult,\n        mapError: mapError,\n        foldResult: foldResult,\n        withTimeout: withTimeout\n      });\n    };\n    var nu$1 = function (worker) {\n      return wrap(Future.nu(worker));\n    };\n    var value = function (value) {\n      return wrap(Future.pure(Result.value(value)));\n    };\n    var error = function (error) {\n      return wrap(Future.pure(Result.error(error)));\n    };\n    var fromResult = function (result) {\n      return wrap(Future.pure(result));\n    };\n    var fromFuture = function (future) {\n      return wrap(future.map(Result.value));\n    };\n    var fromPromise = function (promise) {\n      return nu$1(function (completer) {\n        promise.then(function (value) {\n          completer(Result.value(value));\n        }, function (error) {\n          completer(Result.error(error));\n        });\n      });\n    };\n    var FutureResult = {\n      nu: nu$1,\n      wrap: wrap,\n      pure: value,\n      value: value,\n      error: error,\n      fromResult: fromResult,\n      fromFuture: fromFuture,\n      fromPromise: fromPromise\n    };\n\n    var separator$1 = { type: 'separator' };\n    var toMenuItem = function (target) {\n      return {\n        type: 'menuitem',\n        value: target.url,\n        text: target.title,\n        meta: { attach: target.attach },\n        onAction: noop\n      };\n    };\n    var staticMenuItem = function (title, url) {\n      return {\n        type: 'menuitem',\n        value: url,\n        text: title,\n        meta: { attach: undefined },\n        onAction: noop\n      };\n    };\n    var toMenuItems = function (targets) {\n      return map$2(targets, toMenuItem);\n    };\n    var filterLinkTargets = function (type, targets) {\n      return filter$2(targets, function (target) {\n        return target.type === type;\n      });\n    };\n    var filteredTargets = function (type, targets) {\n      return toMenuItems(filterLinkTargets(type, targets));\n    };\n    var headerTargets = function (linkInfo) {\n      return filteredTargets('header', linkInfo.targets);\n    };\n    var anchorTargets = function (linkInfo) {\n      return filteredTargets('anchor', linkInfo.targets);\n    };\n    var anchorTargetTop = function (linkInfo) {\n      return Optional.from(linkInfo.anchorTop).map(function (url) {\n        return staticMenuItem('<top>', url);\n      }).toArray();\n    };\n    var anchorTargetBottom = function (linkInfo) {\n      return Optional.from(linkInfo.anchorBottom).map(function (url) {\n        return staticMenuItem('<bottom>', url);\n      }).toArray();\n    };\n    var historyTargets = function (history) {\n      return map$2(history, function (url) {\n        return staticMenuItem(url, url);\n      });\n    };\n    var joinMenuLists = function (items) {\n      return foldl(items, function (a, b) {\n        var bothEmpty = a.length === 0 || b.length === 0;\n        return bothEmpty ? a.concat(b) : a.concat(separator$1, b);\n      }, []);\n    };\n    var filterByQuery = function (term, menuItems) {\n      var lowerCaseTerm = term.toLowerCase();\n      return filter$2(menuItems, function (item) {\n        var text = item.meta !== undefined && item.meta.text !== undefined ? item.meta.text : item.text;\n        return contains$1(text.toLowerCase(), lowerCaseTerm) || contains$1(item.value.toLowerCase(), lowerCaseTerm);\n      });\n    };\n\n    var getItems = function (fileType, input, urlBackstage) {\n      var urlInputValue = Representing.getValue(input);\n      var term = urlInputValue.meta.text !== undefined ? urlInputValue.meta.text : urlInputValue.value;\n      var info = urlBackstage.getLinkInformation();\n      return info.fold(function () {\n        return [];\n      }, function (linkInfo) {\n        var history = filterByQuery(term, historyTargets(urlBackstage.getHistory(fileType)));\n        return fileType === 'file' ? joinMenuLists([\n          history,\n          filterByQuery(term, headerTargets(linkInfo)),\n          filterByQuery(term, flatten([\n            anchorTargetTop(linkInfo),\n            anchorTargets(linkInfo),\n            anchorTargetBottom(linkInfo)\n          ]))\n        ]) : history;\n      });\n    };\n    var errorId = generate$6('aria-invalid');\n    var renderUrlInput = function (spec, backstage, urlBackstage) {\n      var _a;\n      var providersBackstage = backstage.shared.providers;\n      var updateHistory = function (component) {\n        var urlEntry = Representing.getValue(component);\n        urlBackstage.addToHistory(urlEntry.value, spec.filetype);\n      };\n      var pField = FormField.parts.field({\n        factory: Typeahead,\n        dismissOnBlur: true,\n        inputClasses: ['tox-textfield'],\n        sandboxClasses: ['tox-dialog__popups'],\n        inputAttributes: {\n          'aria-errormessage': errorId,\n          'type': 'url'\n        },\n        minChars: 0,\n        responseTime: 0,\n        fetch: function (input) {\n          var items = getItems(spec.filetype, input, urlBackstage);\n          var tdata = build(items, ItemResponse$1.BUBBLE_TO_SANDBOX, backstage, false);\n          return Future.pure(tdata);\n        },\n        getHotspot: function (comp) {\n          return memUrlBox.getOpt(comp);\n        },\n        onSetValue: function (comp, _newValue) {\n          if (comp.hasConfigured(Invalidating)) {\n            Invalidating.run(comp).get(noop);\n          }\n        },\n        typeaheadBehaviours: derive$1(flatten([\n          urlBackstage.getValidationHandler().map(function (handler) {\n            return Invalidating.config({\n              getRoot: function (comp) {\n                return parent(comp.element);\n              },\n              invalidClass: 'tox-control-wrap--status-invalid',\n              notify: {\n                onInvalid: function (comp, err) {\n                  memInvalidIcon.getOpt(comp).each(function (invalidComp) {\n                    set$8(invalidComp.element, 'title', providersBackstage.translate(err));\n                  });\n                }\n              },\n              validator: {\n                validate: function (input) {\n                  var urlEntry = Representing.getValue(input);\n                  return FutureResult.nu(function (completer) {\n                    handler({\n                      type: spec.filetype,\n                      url: urlEntry.value\n                    }, function (validation) {\n                      if (validation.status === 'invalid') {\n                        var err = Result.error(validation.message);\n                        completer(err);\n                      } else {\n                        var val = Result.value(validation.message);\n                        completer(val);\n                      }\n                    });\n                  });\n                },\n                validateOnLoad: false\n              }\n            });\n          }).toArray(),\n          [\n            Disabling.config({\n              disabled: function () {\n                return spec.disabled || providersBackstage.isDisabled();\n              }\n            }),\n            Tabstopping.config({}),\n            config('urlinput-events', flatten([\n              spec.filetype === 'file' ? [run$1(input(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                })] : [],\n              [\n                run$1(change(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                }),\n                run$1(postPaste(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                })\n              ]\n            ]))\n          ]\n        ])),\n        eventOrder: (_a = {}, _a[input()] = [\n          'streaming',\n          'urlinput-events',\n          'invalidating'\n        ], _a),\n        model: {\n          getDisplayText: function (itemData) {\n            return itemData.value;\n          },\n          selectsOver: false,\n          populateFromBrowse: false\n        },\n        markers: { openClass: 'tox-textfield--popup-open' },\n        lazySink: backstage.shared.getSink,\n        parts: { menu: part(false, 1, 'normal') },\n        onExecute: function (_menu, component, _entry) {\n          emitWith(component, formSubmitEvent, {});\n        },\n        onItemExecute: function (typeahead, _sandbox, _item, _value) {\n          updateHistory(typeahead);\n          emitWith(typeahead, formChangeEvent, { name: spec.name });\n        }\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var makeIcon = function (name, errId, icon, label) {\n        if (icon === void 0) {\n          icon = name;\n        }\n        if (label === void 0) {\n          label = name;\n        }\n        return render$3(icon, {\n          tag: 'div',\n          classes: [\n            'tox-icon',\n            'tox-control-wrap__status-icon-' + name\n          ],\n          attributes: __assign({\n            'title': providersBackstage.translate(label),\n            'aria-live': 'polite'\n          }, errId.fold(function () {\n            return {};\n          }, function (id) {\n            return { id: id };\n          }))\n        }, providersBackstage.icons);\n      };\n      var memInvalidIcon = record(makeIcon('invalid', Optional.some(errorId), 'warning'));\n      var memStatus = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap__status-icon-wrap']\n        },\n        components: [memInvalidIcon.asSpec()]\n      });\n      var optUrlPicker = urlBackstage.getUrlPicker(spec.filetype);\n      var browseUrlEvent = generate$6('browser.url.event');\n      var memUrlBox = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap']\n        },\n        components: [\n          pField,\n          memStatus.asSpec()\n        ],\n        behaviours: derive$1([Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          })])\n      });\n      var memUrlPickerButton = record(renderButton({\n        name: spec.name,\n        icon: Optional.some('browse'),\n        text: spec.label.getOr(''),\n        disabled: spec.disabled,\n        primary: false,\n        borderless: true\n      }, function (component) {\n        return emit(component, browseUrlEvent);\n      }, providersBackstage, [], ['tox-browse-url']));\n      var controlHWrapper = function () {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__controls-h-stack']\n          },\n          components: flatten([\n            [memUrlBox.asSpec()],\n            optUrlPicker.map(function () {\n              return memUrlPickerButton.asSpec();\n            }).toArray()\n          ])\n        };\n      };\n      var openUrlPicker = function (comp) {\n        Composing.getCurrent(comp).each(function (field) {\n          var componentData = Representing.getValue(field);\n          var urlData = __assign({ fieldname: spec.name }, componentData);\n          optUrlPicker.each(function (picker) {\n            picker(urlData).get(function (chosenData) {\n              Representing.setValue(field, chosenData);\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            });\n          });\n        });\n      };\n      return FormField.sketch({\n        dom: renderFormFieldDom(),\n        components: pLabel.toArray().concat([controlHWrapper()]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('url-input-events', [run$1(browseUrlEvent, openUrlPicker)])\n        ])\n      });\n    };\n\n    var renderAlertBanner = function (spec, providersBackstage) {\n      return Container.sketch({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: [\n            'tox-notification',\n            'tox-notification--in',\n            'tox-notification--' + spec.level\n          ]\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__icon']\n            },\n            components: [Button.sketch({\n                dom: {\n                  tag: 'button',\n                  classes: [\n                    'tox-button',\n                    'tox-button--naked',\n                    'tox-button--icon'\n                  ],\n                  innerHtml: get$1(spec.icon, providersBackstage.icons),\n                  attributes: { title: providersBackstage.translate(spec.iconTooltip) }\n                },\n                action: function (comp) {\n                  emitWith(comp, formActionEvent, {\n                    name: 'alert-banner',\n                    value: spec.url\n                  });\n                },\n                buttonBehaviours: derive$1([addFocusableBehaviour()])\n              })]\n          },\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__body'],\n              innerHtml: providersBackstage.translate(spec.text)\n            }\n          }\n        ]\n      });\n    };\n\n    var renderCheckbox = function (spec, providerBackstage) {\n      var repBehaviour = Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var el = comp.element.dom;\n            return el.checked;\n          },\n          setValue: function (comp, value) {\n            var el = comp.element.dom;\n            el.checked = value;\n          }\n        }\n      });\n      var toggleCheckboxHandler = function (comp) {\n        comp.element.dom.click();\n        return Optional.some(true);\n      };\n      var pField = FormField.parts.field({\n        factory: { sketch: identity$1 },\n        dom: {\n          tag: 'input',\n          classes: ['tox-checkbox__input'],\n          attributes: { type: 'checkbox' }\n        },\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providerBackstage.isDisabled();\n            }\n          }),\n          Tabstopping.config({}),\n          Focusing.config({}),\n          repBehaviour,\n          Keying.config({\n            mode: 'special',\n            onEnter: toggleCheckboxHandler,\n            onSpace: toggleCheckboxHandler,\n            stopSpaceKeyup: true\n          }),\n          config('checkbox-events', [run$1(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var pLabel = FormField.parts.label({\n        dom: {\n          tag: 'span',\n          classes: ['tox-checkbox__label'],\n          innerHtml: providerBackstage.translate(spec.label)\n        },\n        behaviours: derive$1([Unselecting.config({})])\n      });\n      var makeIcon = function (className) {\n        var iconName = className === 'checked' ? 'selected' : 'unselected';\n        return render$3(iconName, {\n          tag: 'span',\n          classes: [\n            'tox-icon',\n            'tox-checkbox-icon__' + className\n          ]\n        }, providerBackstage.icons);\n      };\n      var memIcons = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-checkbox__icons']\n        },\n        components: [\n          makeIcon('checked'),\n          makeIcon('unchecked')\n        ]\n      });\n      return FormField.sketch({\n        dom: {\n          tag: 'label',\n          classes: ['tox-checkbox']\n        },\n        components: [\n          pField,\n          memIcons.asSpec(),\n          pLabel\n        ],\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providerBackstage.isDisabled();\n            },\n            disableClass: 'tox-checkbox--disabled',\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    var renderHtmlPanel = function (spec) {\n      if (spec.presets === 'presentation') {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html\n          }\n        });\n      } else {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html,\n            attributes: { role: 'document' }\n          },\n          containerBehaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({})\n          ])\n        });\n      }\n    };\n\n    var make$2 = function (render) {\n      return function (parts, spec, backstage) {\n        return get$e(spec, 'name').fold(function () {\n          return render(spec, backstage);\n        }, function (fieldName) {\n          return parts.field(fieldName, render(spec, backstage));\n        });\n      };\n    };\n    var makeIframe = function (render) {\n      return function (parts, spec, backstage) {\n        var iframeSpec = deepMerge(spec, { source: 'dynamic' });\n        return make$2(render)(parts, iframeSpec, backstage);\n      };\n    };\n    var factories = {\n      bar: make$2(function (spec, backstage) {\n        return renderBar(spec, backstage.shared);\n      }),\n      collection: make$2(function (spec, backstage) {\n        return renderCollection(spec, backstage.shared.providers);\n      }),\n      alertbanner: make$2(function (spec, backstage) {\n        return renderAlertBanner(spec, backstage.shared.providers);\n      }),\n      input: make$2(function (spec, backstage) {\n        return renderInput(spec, backstage.shared.providers);\n      }),\n      textarea: make$2(function (spec, backstage) {\n        return renderTextarea(spec, backstage.shared.providers);\n      }),\n      label: make$2(function (spec, backstage) {\n        return renderLabel(spec, backstage.shared);\n      }),\n      iframe: makeIframe(function (spec, backstage) {\n        return renderIFrame(spec, backstage.shared.providers);\n      }),\n      button: make$2(function (spec, backstage) {\n        return renderDialogButton(spec, backstage.shared.providers);\n      }),\n      checkbox: make$2(function (spec, backstage) {\n        return renderCheckbox(spec, backstage.shared.providers);\n      }),\n      colorinput: make$2(function (spec, backstage) {\n        return renderColorInput(spec, backstage.shared, backstage.colorinput);\n      }),\n      colorpicker: make$2(renderColorPicker),\n      dropzone: make$2(function (spec, backstage) {\n        return renderDropZone(spec, backstage.shared.providers);\n      }),\n      grid: make$2(function (spec, backstage) {\n        return renderGrid(spec, backstage.shared);\n      }),\n      listbox: make$2(function (spec, backstage) {\n        return renderListBox(spec, backstage);\n      }),\n      selectbox: make$2(function (spec, backstage) {\n        return renderSelectBox(spec, backstage.shared.providers);\n      }),\n      sizeinput: make$2(function (spec, backstage) {\n        return renderSizeInput(spec, backstage.shared.providers);\n      }),\n      urlinput: make$2(function (spec, backstage) {\n        return renderUrlInput(spec, backstage, backstage.urlinput);\n      }),\n      customeditor: make$2(renderCustomEditor),\n      htmlpanel: make$2(renderHtmlPanel),\n      imagetools: make$2(function (spec, backstage) {\n        return renderImageTools(spec, backstage.shared.providers);\n      }),\n      table: make$2(function (spec, backstage) {\n        return renderTable(spec, backstage.shared.providers);\n      }),\n      panel: make$2(function (spec, backstage) {\n        return renderPanel(spec, backstage);\n      })\n    };\n    var noFormParts = {\n      field: function (_name, spec) {\n        return spec;\n      }\n    };\n    var interpretInForm = function (parts, spec, oldBackstage) {\n      var newBackstage = deepMerge(oldBackstage, {\n        shared: {\n          interpreter: function (childSpec) {\n            return interpretParts(parts, childSpec, newBackstage);\n          }\n        }\n      });\n      return interpretParts(parts, spec, newBackstage);\n    };\n    var interpretParts = function (parts, spec, backstage) {\n      return get$e(factories, spec.type).fold(function () {\n        console.error('Unknown factory type \"' + spec.type + '\", defaulting to container: ', spec);\n        return spec;\n      }, function (factory) {\n        return factory(parts, spec, backstage);\n      });\n    };\n    var interpretWithoutForm = function (spec, backstage) {\n      var parts = noFormParts;\n      return interpretParts(parts, spec, backstage);\n    };\n\n    var bubbleAlignments$2 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: [],\n      alignRight: [],\n      right: [],\n      left: [],\n      bottom: [],\n      top: []\n    };\n    var getInlineDialogAnchor = function (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) {\n      var bubbleSize = 12;\n      var overrides = { maxHeightFunction: expandable$1() };\n      var editableAreaAnchor = function () {\n        return {\n          type: 'node',\n          root: getContentContainer(contentAreaElement()),\n          node: Optional.from(contentAreaElement()),\n          bubble: nu$5(bubbleSize, bubbleSize, bubbleAlignments$2),\n          layouts: {\n            onRtl: function () {\n              return [northeast];\n            },\n            onLtr: function () {\n              return [northwest];\n            }\n          },\n          overrides: overrides\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          type: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          bubble: nu$5(-bubbleSize, bubbleSize, bubbleAlignments$2),\n          layouts: {\n            onRtl: function () {\n              return [southeast$2];\n            },\n            onLtr: function () {\n              return [southwest$2];\n            }\n          },\n          overrides: overrides\n        };\n      };\n      return function () {\n        return lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n      };\n    };\n    var getBannerAnchor = function (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) {\n      var editableAreaAnchor = function () {\n        return {\n          type: 'node',\n          root: getContentContainer(contentAreaElement()),\n          node: Optional.from(contentAreaElement()),\n          layouts: {\n            onRtl: function () {\n              return [north];\n            },\n            onLtr: function () {\n              return [north];\n            }\n          }\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          type: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          layouts: {\n            onRtl: function () {\n              return [south$2];\n            },\n            onLtr: function () {\n              return [south$2];\n            }\n          }\n        };\n      };\n      return function () {\n        return lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n      };\n    };\n    var getCursorAnchor = function (editor, bodyElement) {\n      return function () {\n        return {\n          type: 'selection',\n          root: bodyElement(),\n          getSelection: function () {\n            var rng = editor.selection.getRng();\n            return Optional.some(SimSelection.range(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset));\n          }\n        };\n      };\n    };\n    var getNodeAnchor$1 = function (bodyElement) {\n      return function (element) {\n        return {\n          type: 'node',\n          root: bodyElement(),\n          node: element\n        };\n      };\n    };\n    var getAnchors = function (editor, lazyAnchorbar, isToolbarTop) {\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var bodyElement = function () {\n        return SugarElement.fromDom(editor.getBody());\n      };\n      var contentAreaElement = function () {\n        return SugarElement.fromDom(editor.getContentAreaContainer());\n      };\n      var lazyUseEditableAreaAnchor = function () {\n        return useFixedToolbarContainer || !isToolbarTop();\n      };\n      return {\n        inlineDialog: getInlineDialogAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        banner: getBannerAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        cursor: getCursorAnchor(editor, bodyElement),\n        node: getNodeAnchor$1(bodyElement)\n      };\n    };\n\n    var colorPicker = function (editor) {\n      return function (callback, value) {\n        var dialog = colorPickerDialog(editor);\n        dialog(callback, value);\n      };\n    };\n    var hasCustomColors = function (editor) {\n      return function () {\n        return hasCustomColors$1(editor);\n      };\n    };\n    var getColors = function (editor) {\n      return function () {\n        return getColors$2(editor);\n      };\n    };\n    var getColorCols = function (editor) {\n      return function () {\n        return getColorCols$1(editor);\n      };\n    };\n    var ColorInputBackstage = function (editor) {\n      return {\n        colorPicker: colorPicker(editor),\n        hasCustomColors: hasCustomColors(editor),\n        getColors: getColors(editor),\n        getColorCols: getColorCols(editor)\n      };\n    };\n\n    var isDraggableModal = function (editor) {\n      return function () {\n        return isDraggableModal$1(editor);\n      };\n    };\n    var DialogBackstage = function (editor) {\n      return { isDraggableModal: isDraggableModal(editor) };\n    };\n\n    var HeaderBackstage = function (editor) {\n      var mode = Cell(isToolbarLocationBottom(editor) ? 'bottom' : 'top');\n      return {\n        isPositionedAtTop: function () {\n          return mode.get() === 'top';\n        },\n        getDockingMode: mode.get,\n        setDockingMode: mode.set\n      };\n    };\n\n    var defaultStyleFormats = [\n      {\n        title: 'Headings',\n        items: [\n          {\n            title: 'Heading 1',\n            format: 'h1'\n          },\n          {\n            title: 'Heading 2',\n            format: 'h2'\n          },\n          {\n            title: 'Heading 3',\n            format: 'h3'\n          },\n          {\n            title: 'Heading 4',\n            format: 'h4'\n          },\n          {\n            title: 'Heading 5',\n            format: 'h5'\n          },\n          {\n            title: 'Heading 6',\n            format: 'h6'\n          }\n        ]\n      },\n      {\n        title: 'Inline',\n        items: [\n          {\n            title: 'Bold',\n            format: 'bold'\n          },\n          {\n            title: 'Italic',\n            format: 'italic'\n          },\n          {\n            title: 'Underline',\n            format: 'underline'\n          },\n          {\n            title: 'Strikethrough',\n            format: 'strikethrough'\n          },\n          {\n            title: 'Superscript',\n            format: 'superscript'\n          },\n          {\n            title: 'Subscript',\n            format: 'subscript'\n          },\n          {\n            title: 'Code',\n            format: 'code'\n          }\n        ]\n      },\n      {\n        title: 'Blocks',\n        items: [\n          {\n            title: 'Paragraph',\n            format: 'p'\n          },\n          {\n            title: 'Blockquote',\n            format: 'blockquote'\n          },\n          {\n            title: 'Div',\n            format: 'div'\n          },\n          {\n            title: 'Pre',\n            format: 'pre'\n          }\n        ]\n      },\n      {\n        title: 'Align',\n        items: [\n          {\n            title: 'Left',\n            format: 'alignleft'\n          },\n          {\n            title: 'Center',\n            format: 'aligncenter'\n          },\n          {\n            title: 'Right',\n            format: 'alignright'\n          },\n          {\n            title: 'Justify',\n            format: 'alignjustify'\n          }\n        ]\n      }\n    ];\n    var isNestedFormat = function (format) {\n      return has$2(format, 'items');\n    };\n    var isBlockFormat = function (format) {\n      return has$2(format, 'block');\n    };\n    var isInlineFormat = function (format) {\n      return has$2(format, 'inline');\n    };\n    var isSelectorFormat = function (format) {\n      return has$2(format, 'selector');\n    };\n    var mapFormats = function (userFormats) {\n      return foldl(userFormats, function (acc, fmt) {\n        if (isNestedFormat(fmt)) {\n          var result = mapFormats(fmt.items);\n          return {\n            customFormats: acc.customFormats.concat(result.customFormats),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                items: result.formats\n              }])\n          };\n        } else if (isInlineFormat(fmt) || isBlockFormat(fmt) || isSelectorFormat(fmt)) {\n          var formatName = isString(fmt.name) ? fmt.name : fmt.title.toLowerCase();\n          var formatNameWithPrefix = 'custom-' + formatName;\n          return {\n            customFormats: acc.customFormats.concat([{\n                name: formatNameWithPrefix,\n                format: fmt\n              }]),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                format: formatNameWithPrefix,\n                icon: fmt.icon\n              }])\n          };\n        } else {\n          return __assign(__assign({}, acc), { formats: acc.formats.concat(fmt) });\n        }\n      }, {\n        customFormats: [],\n        formats: []\n      });\n    };\n    var registerCustomFormats = function (editor, userFormats) {\n      var result = mapFormats(userFormats);\n      var registerFormats = function (customFormats) {\n        each$1(customFormats, function (fmt) {\n          if (!editor.formatter.has(fmt.name)) {\n            editor.formatter.register(fmt.name, fmt.format);\n          }\n        });\n      };\n      if (editor.formatter) {\n        registerFormats(result.customFormats);\n      } else {\n        editor.on('init', function () {\n          registerFormats(result.customFormats);\n        });\n      }\n      return result.formats;\n    };\n    var getStyleFormats = function (editor) {\n      return getUserStyleFormats(editor).map(function (userFormats) {\n        var registeredUserFormats = registerCustomFormats(editor, userFormats);\n        return isMergeStyleFormats(editor) ? defaultStyleFormats.concat(registeredUserFormats) : registeredUserFormats;\n      }).getOr(defaultStyleFormats);\n    };\n\n    var processBasic = function (item, isSelectedFor, getPreviewFor) {\n      var formatterSpec = {\n        type: 'formatter',\n        isSelected: isSelectedFor(item.format),\n        getStylePreview: getPreviewFor(item.format)\n      };\n      return deepMerge(item, formatterSpec);\n    };\n    var register$8 = function (editor, formats, isSelectedFor, getPreviewFor) {\n      var enrichSupported = function (item) {\n        return processBasic(item, isSelectedFor, getPreviewFor);\n      };\n      var enrichMenu = function (item) {\n        var submenuSpec = { type: 'submenu' };\n        return deepMerge(item, submenuSpec);\n      };\n      var enrichCustom = function (item) {\n        var formatName = isString(item.name) ? item.name : generate$6(item.title);\n        var formatNameWithPrefix = 'custom-' + formatName;\n        var customSpec = {\n          type: 'formatter',\n          format: formatNameWithPrefix,\n          isSelected: isSelectedFor(formatNameWithPrefix),\n          getStylePreview: getPreviewFor(formatNameWithPrefix)\n        };\n        var newItem = deepMerge(item, customSpec);\n        editor.formatter.register(formatName, newItem);\n        return newItem;\n      };\n      var doEnrich = function (items) {\n        return map$2(items, function (item) {\n          var keys$1 = keys(item);\n          if (hasNonNullableKey(item, 'items')) {\n            var newItems = doEnrich(item.items);\n            return deepMerge(enrichMenu(item), { getStyleItems: constant$1(newItems) });\n          } else if (hasNonNullableKey(item, 'format')) {\n            return enrichSupported(item);\n          } else if (keys$1.length === 1 && contains$2(keys$1, 'title')) {\n            return deepMerge(item, { type: 'separator' });\n          } else {\n            return enrichCustom(item);\n          }\n        });\n      };\n      return doEnrich(formats);\n    };\n\n    var init$8 = function (editor) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          }) : Optional.none();\n        };\n      };\n      var flatten = function (fmt) {\n        var subs = fmt.items;\n        return subs !== undefined && subs.length > 0 ? bind$3(subs, flatten) : [fmt.format];\n      };\n      var settingsFormats = Cell([]);\n      var settingsFlattenedFormats = Cell([]);\n      var eventsFormats = Cell([]);\n      var eventsFlattenedFormats = Cell([]);\n      var replaceSettings = Cell(false);\n      editor.on('PreInit', function (_e) {\n        var formats = getStyleFormats(editor);\n        var enriched = register$8(editor, formats, isSelectedFor, getPreviewFor);\n        settingsFormats.set(enriched);\n        settingsFlattenedFormats.set(bind$3(enriched, flatten));\n      });\n      editor.on('addStyleModifications', function (e) {\n        var modifications = register$8(editor, e.items, isSelectedFor, getPreviewFor);\n        eventsFormats.set(modifications);\n        replaceSettings.set(e.replace);\n        eventsFlattenedFormats.set(bind$3(modifications, flatten));\n      });\n      var getData = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFormats.get();\n        var fromEvents = eventsFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      var getFlattenedKeys = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFlattenedFormats.get();\n        var fromEvents = eventsFlattenedFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      return {\n        getData: getData,\n        getFlattenedKeys: getFlattenedKeys\n      };\n    };\n\n    var isElement = function (node) {\n      return isNonNullable(node) && node.nodeType === 1;\n    };\n    var trim = global$5.trim;\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (isElement(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var create$1 = function (type, title, url, level, attach) {\n      return {\n        type: type,\n        title: title,\n        url: url,\n        level: level,\n        attach: attach\n      };\n    };\n    var isChildOfContentEditableTrue = function (node) {\n      while (node = node.parentNode) {\n        var value = node.contentEditable;\n        if (value && value !== 'inherit') {\n          return isContentEditableTrue(node);\n        }\n      }\n      return false;\n    };\n    var select = function (selector, root) {\n      return map$2(descendants(SugarElement.fromDom(root), selector), function (element) {\n        return element.dom;\n      });\n    };\n    var getElementText = function (elm) {\n      return elm.innerText || elm.textContent;\n    };\n    var getOrGenerateId = function (elm) {\n      return elm.id ? elm.id : generate$6('h');\n    };\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName === 'A' && (elm.id || elm.name) !== undefined;\n    };\n    var isValidAnchor = function (elm) {\n      return isAnchor(elm) && isEditable(elm);\n    };\n    var isHeader = function (elm) {\n      return elm && /^(H[1-6])$/.test(elm.nodeName);\n    };\n    var isEditable = function (elm) {\n      return isChildOfContentEditableTrue(elm) && !isContentEditableFalse(elm);\n    };\n    var isValidHeader = function (elm) {\n      return isHeader(elm) && isEditable(elm);\n    };\n    var getLevel = function (elm) {\n      return isHeader(elm) ? parseInt(elm.nodeName.substr(1), 10) : 0;\n    };\n    var headerTarget = function (elm) {\n      var headerId = getOrGenerateId(elm);\n      var attach = function () {\n        elm.id = headerId;\n      };\n      return create$1('header', getElementText(elm), '#' + headerId, getLevel(elm), attach);\n    };\n    var anchorTarget = function (elm) {\n      var anchorId = elm.id || elm.name;\n      var anchorText = getElementText(elm);\n      return create$1('anchor', anchorText ? anchorText : '#' + anchorId, '#' + anchorId, 0, noop);\n    };\n    var getHeaderTargets = function (elms) {\n      return map$2(filter$2(elms, isValidHeader), headerTarget);\n    };\n    var getAnchorTargets = function (elms) {\n      return map$2(filter$2(elms, isValidAnchor), anchorTarget);\n    };\n    var getTargetElements = function (elm) {\n      var elms = select('h1,h2,h3,h4,h5,h6,a:not([href])', elm);\n      return elms;\n    };\n    var hasTitle = function (target) {\n      return trim(target.title).length > 0;\n    };\n    var find = function (elm) {\n      var elms = getTargetElements(elm);\n      return filter$2(getHeaderTargets(elms).concat(getAnchorTargets(elms)), hasTitle);\n    };\n    var LinkTargets = { find: find };\n\n    var STORAGE_KEY = 'tinymce-url-history';\n    var HISTORY_LENGTH = 5;\n    var isHttpUrl = function (url) {\n      return isString(url) && /^https?/.test(url);\n    };\n    var isArrayOfUrl = function (a) {\n      return isArray(a) && a.length <= HISTORY_LENGTH && forall(a, isHttpUrl);\n    };\n    var isRecordOfUrlArray = function (r) {\n      return isObject(r) && find$4(r, function (value) {\n        return !isArrayOfUrl(value);\n      }).isNone();\n    };\n    var getAllHistory = function () {\n      var unparsedHistory = global$8.getItem(STORAGE_KEY);\n      if (unparsedHistory === null) {\n        return {};\n      }\n      var history;\n      try {\n        history = JSON.parse(unparsedHistory);\n      } catch (e) {\n        if (e instanceof SyntaxError) {\n          console.log('Local storage ' + STORAGE_KEY + ' was not valid JSON', e);\n          return {};\n        }\n        throw e;\n      }\n      if (!isRecordOfUrlArray(history)) {\n        console.log('Local storage ' + STORAGE_KEY + ' was not valid format', history);\n        return {};\n      }\n      return history;\n    };\n    var setAllHistory = function (history) {\n      if (!isRecordOfUrlArray(history)) {\n        throw new Error('Bad format for history:\\n' + JSON.stringify(history));\n      }\n      global$8.setItem(STORAGE_KEY, JSON.stringify(history));\n    };\n    var getHistory = function (fileType) {\n      var history = getAllHistory();\n      return get$e(history, fileType).getOr([]);\n    };\n    var addToHistory = function (url, fileType) {\n      if (!isHttpUrl(url)) {\n        return;\n      }\n      var history = getAllHistory();\n      var items = get$e(history, fileType).getOr([]);\n      var itemsWithoutUrl = filter$2(items, function (item) {\n        return item !== url;\n      });\n      history[fileType] = [url].concat(itemsWithoutUrl).slice(0, HISTORY_LENGTH);\n      setAllHistory(history);\n    };\n\n    var isTruthy = function (value) {\n      return !!value;\n    };\n    var makeMap = function (value) {\n      return map$1(global$5.makeMap(value, /[, ]/), isTruthy);\n    };\n    var getPicker = function (editor) {\n      return Optional.from(getFilePickerCallback(editor)).filter(isFunction);\n    };\n    var getPickerTypes = function (editor) {\n      var optFileTypes = Optional.some(getFilePickerTypes(editor)).filter(isTruthy);\n      var optLegacyTypes = Optional.some(getFileBrowserCallbackTypes(editor)).filter(isTruthy);\n      var optTypes = optFileTypes.or(optLegacyTypes).map(makeMap);\n      return getPicker(editor).fold(never, function (_picker) {\n        return optTypes.fold(always, function (types) {\n          return keys(types).length > 0 ? types : false;\n        });\n      });\n    };\n    var getPickerSetting = function (editor, filetype) {\n      var pickerTypes = getPickerTypes(editor);\n      if (isBoolean(pickerTypes)) {\n        return pickerTypes ? getPicker(editor) : Optional.none();\n      } else {\n        return pickerTypes[filetype] ? getPicker(editor) : Optional.none();\n      }\n    };\n    var getUrlPicker = function (editor, filetype) {\n      return getPickerSetting(editor, filetype).map(function (picker) {\n        return function (entry) {\n          return Future.nu(function (completer) {\n            var handler = function (value, meta) {\n              if (!isString(value)) {\n                throw new Error('Expected value to be string');\n              }\n              if (meta !== undefined && !isObject(meta)) {\n                throw new Error('Expected meta to be a object');\n              }\n              var r = {\n                value: value,\n                meta: meta\n              };\n              completer(r);\n            };\n            var meta = __assign({\n              filetype: filetype,\n              fieldname: entry.fieldname\n            }, Optional.from(entry.meta).getOr({}));\n            picker.call(editor, handler, entry.value, meta);\n          });\n        };\n      });\n    };\n    var getTextSetting = function (value) {\n      return Optional.from(value).filter(isString).getOrUndefined();\n    };\n    var getLinkInformation = function (editor) {\n      if (noTypeaheadUrls(editor)) {\n        return Optional.none();\n      }\n      return Optional.some({\n        targets: LinkTargets.find(editor.getBody()),\n        anchorTop: getTextSetting(getAnchorTop(editor)),\n        anchorBottom: getTextSetting(getAnchorBottom(editor))\n      });\n    };\n    var getValidationHandler = function (editor) {\n      return Optional.from(getFilePickerValidatorHandler(editor));\n    };\n    var UrlInputBackstage = function (editor) {\n      return {\n        getHistory: getHistory,\n        addToHistory: addToHistory,\n        getLinkInformation: function () {\n          return getLinkInformation(editor);\n        },\n        getValidationHandler: function () {\n          return getValidationHandler(editor);\n        },\n        getUrlPicker: function (filetype) {\n          return getUrlPicker(editor, filetype);\n        }\n      };\n    };\n\n    var init$7 = function (sink, editor, lazyAnchorbar) {\n      var contextMenuState = Cell(false);\n      var toolbar = HeaderBackstage(editor);\n      var backstage = {\n        shared: {\n          providers: {\n            icons: function () {\n              return editor.ui.registry.getAll().icons;\n            },\n            menuItems: function () {\n              return editor.ui.registry.getAll().menuItems;\n            },\n            translate: global$e.translate,\n            isDisabled: function () {\n              return editor.mode.isReadOnly() || editor.ui.isDisabled();\n            },\n            getSetting: editor.getParam.bind(editor)\n          },\n          interpreter: function (s) {\n            return interpretWithoutForm(s, backstage);\n          },\n          anchors: getAnchors(editor, lazyAnchorbar, toolbar.isPositionedAtTop),\n          header: toolbar,\n          getSink: function () {\n            return Result.value(sink);\n          }\n        },\n        urlinput: UrlInputBackstage(editor),\n        styleselect: init$8(editor),\n        colorinput: ColorInputBackstage(editor),\n        dialog: DialogBackstage(editor),\n        isContextMenuOpen: function () {\n          return contextMenuState.get();\n        },\n        setContextMenuState: function (state) {\n          return contextMenuState.set(state);\n        }\n      };\n      return backstage;\n    };\n\n    var setup$b = function (editor, mothership, uiMothership) {\n      var broadcastEvent = function (name, evt) {\n        each$1([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastEvent(name, evt);\n        });\n      };\n      var broadcastOn = function (channel, message) {\n        each$1([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastOn([channel], message);\n        });\n      };\n      var fireDismissPopups = function (evt) {\n        return broadcastOn(dismissPopups(), { target: evt.target });\n      };\n      var doc = getDocument();\n      var onTouchstart = bind(doc, 'touchstart', fireDismissPopups);\n      var onTouchmove = bind(doc, 'touchmove', function (evt) {\n        return broadcastEvent(documentTouchmove(), evt);\n      });\n      var onTouchend = bind(doc, 'touchend', function (evt) {\n        return broadcastEvent(documentTouchend(), evt);\n      });\n      var onMousedown = bind(doc, 'mousedown', fireDismissPopups);\n      var onMouseup = bind(doc, 'mouseup', function (evt) {\n        if (evt.raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: evt.target });\n        }\n      });\n      var onContentClick = function (raw) {\n        return broadcastOn(dismissPopups(), { target: SugarElement.fromDom(raw.target) });\n      };\n      var onContentMouseup = function (raw) {\n        if (raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: SugarElement.fromDom(raw.target) });\n        }\n      };\n      var onContentMousedown = function () {\n        each$1(editor.editorManager.get(), function (loopEditor) {\n          if (editor !== loopEditor) {\n            loopEditor.fire('DismissPopups', { relatedTarget: editor });\n          }\n        });\n      };\n      var onWindowScroll = function (evt) {\n        return broadcastEvent(windowScroll(), fromRawEvent(evt));\n      };\n      var onWindowResize = function (evt) {\n        broadcastOn(repositionPopups(), {});\n        broadcastEvent(windowResize(), fromRawEvent(evt));\n      };\n      var onEditorResize = function () {\n        return broadcastOn(repositionPopups(), {});\n      };\n      var onEditorProgress = function (evt) {\n        if (evt.state) {\n          broadcastOn(dismissPopups(), { target: SugarElement.fromDom(editor.getContainer()) });\n        }\n      };\n      var onDismissPopups = function (event) {\n        broadcastOn(dismissPopups(), { target: SugarElement.fromDom(event.relatedTarget.getContainer()) });\n      };\n      editor.on('PostRender', function () {\n        editor.on('click', onContentClick);\n        editor.on('tap', onContentClick);\n        editor.on('mouseup', onContentMouseup);\n        editor.on('mousedown', onContentMousedown);\n        editor.on('ScrollWindow', onWindowScroll);\n        editor.on('ResizeWindow', onWindowResize);\n        editor.on('ResizeEditor', onEditorResize);\n        editor.on('AfterProgressState', onEditorProgress);\n        editor.on('DismissPopups', onDismissPopups);\n      });\n      editor.on('remove', function () {\n        editor.off('click', onContentClick);\n        editor.off('tap', onContentClick);\n        editor.off('mouseup', onContentMouseup);\n        editor.off('mousedown', onContentMousedown);\n        editor.off('ScrollWindow', onWindowScroll);\n        editor.off('ResizeWindow', onWindowResize);\n        editor.off('ResizeEditor', onEditorResize);\n        editor.off('AfterProgressState', onEditorProgress);\n        editor.off('DismissPopups', onDismissPopups);\n        onMousedown.unbind();\n        onTouchstart.unbind();\n        onTouchmove.unbind();\n        onTouchend.unbind();\n        onMouseup.unbind();\n      });\n      editor.on('detach', function () {\n        detachSystem(mothership);\n        detachSystem(uiMothership);\n        mothership.destroy();\n        uiMothership.destroy();\n      });\n    };\n\n    var parts$a = AlloyParts;\n    var partType = PartType;\n\n    var schema$f = constant$1([\n      defaulted('shell', false),\n      required$1('makeItem'),\n      defaulted('setupItem', noop),\n      SketchBehaviours.field('listBehaviours', [Replacing])\n    ]);\n    var customListDetail = function () {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var itemsPart = optional({\n      name: 'items',\n      overrides: customListDetail\n    });\n    var parts$9 = constant$1([itemsPart]);\n    var name = constant$1('CustomList');\n\n    var factory$d = function (detail, components, _spec, _external) {\n      var setItems = function (list, items) {\n        getListContainer(list).fold(function () {\n          console.error('Custom List was defined to not be a shell, but no item container was specified in components');\n          throw new Error('Custom List was defined to not be a shell, but no item container was specified in components');\n        }, function (container) {\n          var itemComps = Replacing.contents(container);\n          var numListsRequired = items.length;\n          var numListsToAdd = numListsRequired - itemComps.length;\n          var itemsToAdd = numListsToAdd > 0 ? range$2(numListsToAdd, function () {\n            return detail.makeItem();\n          }) : [];\n          var itemsToRemove = itemComps.slice(numListsRequired);\n          each$1(itemsToRemove, function (item) {\n            return Replacing.remove(container, item);\n          });\n          each$1(itemsToAdd, function (item) {\n            return Replacing.append(container, item);\n          });\n          var builtLists = Replacing.contents(container);\n          each$1(builtLists, function (item, i) {\n            detail.setupItem(list, item, items[i], i);\n          });\n        });\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      var getListContainer = function (component) {\n        return detail.shell ? Optional.some(component) : getPart(component, detail, 'items');\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.listBehaviours, extra.behaviours),\n        apis: { setItems: setItems }\n      };\n    };\n    var CustomList = composite({\n      name: name(),\n      configFields: schema$f(),\n      partFields: parts$9(),\n      factory: factory$d,\n      apis: {\n        setItems: function (apis, list, items) {\n          apis.setItems(list, items);\n        }\n      }\n    });\n\n    var schema$e = constant$1([\n      required$1('dom'),\n      defaulted('shell', true),\n      field('toolbarBehaviours', [Replacing])\n    ]);\n    var enhanceGroups = function () {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var parts$8 = constant$1([optional({\n        name: 'groups',\n        overrides: enhanceGroups\n      })]);\n\n    var factory$c = function (detail, components, _spec, _externals) {\n      var setGroups = function (toolbar, groups) {\n        getGroupContainer(toolbar).fold(function () {\n          console.error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n          throw new Error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n        }, function (container) {\n          Replacing.set(container, groups);\n        });\n      };\n      var getGroupContainer = function (component) {\n        return detail.shell ? Optional.some(component) : getPart(component, detail, 'groups');\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.toolbarBehaviours, extra.behaviours),\n        apis: { setGroups: setGroups },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var Toolbar = composite({\n      name: 'Toolbar',\n      configFields: schema$e(),\n      partFields: parts$8(),\n      factory: factory$c,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        }\n      }\n    });\n\n    var setup$a = noop;\n    var isDocked$2 = never;\n    var getBehaviours$1 = constant$1([]);\n\n    var StaticHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$a,\n        isDocked: isDocked$2,\n        getBehaviours: getBehaviours$1\n    });\n\n    var getOffsetParent = function (element) {\n      var isFixed = is$1(getRaw(element, 'position'), 'fixed');\n      var offsetParent$1 = isFixed ? Optional.none() : offsetParent(element);\n      return offsetParent$1.orThunk(function () {\n        var marker = SugarElement.fromTag('span');\n        return parent(element).bind(function (parent) {\n          append$2(parent, marker);\n          var offsetParent$1 = offsetParent(marker);\n          remove$5(marker);\n          return offsetParent$1;\n        });\n      });\n    };\n    var getOrigin = function (element) {\n      return getOffsetParent(element).map(absolute$3).getOrThunk(function () {\n        return SugarPosition(0, 0);\n      });\n    };\n\n    var morphAdt = Adt.generate([\n      { static: [] },\n      { absolute: ['positionCss'] },\n      { fixed: ['positionCss'] }\n    ]);\n    var appear = function (component, contextualInfo) {\n      var elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$2(elem, contextualInfo.fadeOutClass);\n      add$2(elem, contextualInfo.fadeInClass);\n      contextualInfo.onShow(component);\n    };\n    var disappear = function (component, contextualInfo) {\n      var elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$2(elem, contextualInfo.fadeInClass);\n      add$2(elem, contextualInfo.fadeOutClass);\n      contextualInfo.onHide(component);\n    };\n    var isPartiallyVisible = function (box, viewport) {\n      return box.y < viewport.bottom && box.bottom > viewport.y;\n    };\n    var isTopCompletelyVisible = function (box, viewport) {\n      return box.y >= viewport.y;\n    };\n    var isBottomCompletelyVisible = function (box, viewport) {\n      return box.bottom <= viewport.bottom;\n    };\n    var isVisibleForModes = function (modes, box, viewport) {\n      return forall(modes, function (mode) {\n        switch (mode) {\n        case 'bottom':\n          return isBottomCompletelyVisible(box, viewport);\n        case 'top':\n          return isTopCompletelyVisible(box, viewport);\n        }\n      });\n    };\n    var getPrior = function (elem, state) {\n      return state.getInitialPos().map(function (pos) {\n        return bounds(pos.bounds.x, pos.bounds.y, get$a(elem), get$b(elem));\n      });\n    };\n    var storePrior = function (elem, box, state) {\n      state.setInitialPos({\n        style: getAllRaw(elem),\n        position: get$c(elem, 'position') || 'static',\n        bounds: box\n      });\n    };\n    var revertToOriginal = function (elem, box, state) {\n      return state.getInitialPos().bind(function (position) {\n        state.clearInitialPos();\n        switch (position.position) {\n        case 'static':\n          return Optional.some(morphAdt.static());\n        case 'absolute':\n          var offsetBox_1 = getOffsetParent(elem).map(box$1).getOrThunk(function () {\n            return box$1(body());\n          });\n          return Optional.some(morphAdt.absolute(NuPositionCss('absolute', get$e(position.style, 'left').map(function (_left) {\n            return box.x - offsetBox_1.x;\n          }), get$e(position.style, 'top').map(function (_top) {\n            return box.y - offsetBox_1.y;\n          }), get$e(position.style, 'right').map(function (_right) {\n            return offsetBox_1.right - box.right;\n          }), get$e(position.style, 'bottom').map(function (_bottom) {\n            return offsetBox_1.bottom - box.bottom;\n          }))));\n        default:\n          return Optional.none();\n        }\n      });\n    };\n    var morphToOriginal = function (elem, viewport, state) {\n      return getPrior(elem, state).filter(function (box) {\n        return isVisibleForModes(state.getModes(), box, viewport);\n      }).bind(function (box) {\n        return revertToOriginal(elem, box, state);\n      });\n    };\n    var morphToFixed = function (elem, viewport, state) {\n      var box = box$1(elem);\n      if (!isVisibleForModes(state.getModes(), box, viewport)) {\n        storePrior(elem, box, state);\n        var winBox = win();\n        var left = box.x - winBox.x;\n        var top_1 = viewport.y - winBox.y;\n        var bottom = winBox.bottom - viewport.bottom;\n        var isTop = box.y <= viewport.y;\n        return Optional.some(morphAdt.fixed(NuPositionCss('fixed', Optional.some(left), isTop ? Optional.some(top_1) : Optional.none(), Optional.none(), !isTop ? Optional.some(bottom) : Optional.none())));\n      } else {\n        return Optional.none();\n      }\n    };\n    var getMorph = function (component, viewport, state) {\n      var elem = component.element;\n      var isDocked = is$1(getRaw(elem, 'position'), 'fixed');\n      return isDocked ? morphToOriginal(elem, viewport, state) : morphToFixed(elem, viewport, state);\n    };\n    var getMorphToOriginal = function (component, state) {\n      var elem = component.element;\n      return getPrior(elem, state).bind(function (box) {\n        return revertToOriginal(elem, box, state);\n      });\n    };\n\n    var morphToStatic = function (component, config, state) {\n      state.setDocked(false);\n      each$1([\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'position'\n      ], function (prop) {\n        return remove$6(component.element, prop);\n      });\n      config.onUndocked(component);\n    };\n    var morphToCoord = function (component, config, state, position) {\n      var isDocked = position.position === 'fixed';\n      state.setDocked(isDocked);\n      applyPositionCss(component.element, position);\n      var method = isDocked ? config.onDocked : config.onUndocked;\n      method(component);\n    };\n    var updateVisibility = function (component, config, state, viewport, morphToDocked) {\n      if (morphToDocked === void 0) {\n        morphToDocked = false;\n      }\n      config.contextual.each(function (contextInfo) {\n        contextInfo.lazyContext(component).each(function (box) {\n          var isVisible = isPartiallyVisible(box, viewport);\n          if (isVisible !== state.isVisible()) {\n            state.setVisible(isVisible);\n            if (morphToDocked && !isVisible) {\n              add$1(component.element, [contextInfo.fadeOutClass]);\n              contextInfo.onHide(component);\n            } else {\n              var method = isVisible ? appear : disappear;\n              method(component, contextInfo);\n            }\n          }\n        });\n      });\n    };\n    var refreshInternal = function (component, config, state) {\n      var viewport = config.lazyViewport(component);\n      var isDocked = state.isDocked();\n      if (isDocked) {\n        updateVisibility(component, config, state, viewport);\n      }\n      getMorph(component, viewport, state).each(function (morph) {\n        morph.fold(function () {\n          return morphToStatic(component, config, state);\n        }, function (position) {\n          return morphToCoord(component, config, state, position);\n        }, function (position) {\n          updateVisibility(component, config, state, viewport, true);\n          morphToCoord(component, config, state, position);\n        });\n      });\n    };\n    var resetInternal = function (component, config, state) {\n      var elem = component.element;\n      state.setDocked(false);\n      getMorphToOriginal(component, state).each(function (morph) {\n        morph.fold(function () {\n          return morphToStatic(component, config, state);\n        }, function (position) {\n          return morphToCoord(component, config, state, position);\n        }, noop);\n      });\n      state.setVisible(true);\n      config.contextual.each(function (contextInfo) {\n        remove$1(elem, [\n          contextInfo.fadeInClass,\n          contextInfo.fadeOutClass,\n          contextInfo.transitionClass\n        ]);\n        contextInfo.onShow(component);\n      });\n      refresh$4(component, config, state);\n    };\n    var refresh$4 = function (component, config, state) {\n      if (component.getSystem().isConnected()) {\n        refreshInternal(component, config, state);\n      }\n    };\n    var reset = function (component, config, state) {\n      if (state.isDocked()) {\n        resetInternal(component, config, state);\n      }\n    };\n    var isDocked$1 = function (component, config, state) {\n      return state.isDocked();\n    };\n    var setModes = function (component, config, state, modes) {\n      return state.setModes(modes);\n    };\n    var getModes = function (component, config, state) {\n      return state.getModes();\n    };\n\n    var DockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$4,\n        reset: reset,\n        isDocked: isDocked$1,\n        getModes: getModes,\n        setModes: setModes\n    });\n\n    var events$5 = function (dockInfo, dockState) {\n      return derive$2([\n        runOnSource(transitionend(), function (component, simulatedEvent) {\n          dockInfo.contextual.each(function (contextInfo) {\n            if (has(component.element, contextInfo.transitionClass)) {\n              remove$1(component.element, [\n                contextInfo.transitionClass,\n                contextInfo.fadeInClass\n              ]);\n              var notify = dockState.isVisible() ? contextInfo.onShown : contextInfo.onHidden;\n              notify(component);\n            }\n            simulatedEvent.stop();\n          });\n        }),\n        run$1(windowScroll(), function (component, _) {\n          refresh$4(component, dockInfo, dockState);\n        }),\n        run$1(windowResize(), function (component, _) {\n          reset(component, dockInfo, dockState);\n        })\n      ]);\n    };\n\n    var ActiveDocking = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$5\n    });\n\n    var DockingSchema = [\n      optionObjOf('contextual', [\n        requiredString('fadeInClass'),\n        requiredString('fadeOutClass'),\n        requiredString('transitionClass'),\n        requiredFunction('lazyContext'),\n        onHandler('onShow'),\n        onHandler('onShown'),\n        onHandler('onHide'),\n        onHandler('onHidden')\n      ]),\n      defaultedFunction('lazyViewport', win),\n      defaultedArrayOf('modes', [\n        'top',\n        'bottom'\n      ], string),\n      onHandler('onDocked'),\n      onHandler('onUndocked')\n    ];\n\n    var init$6 = function (spec) {\n      var docked = Cell(false);\n      var visible = Cell(true);\n      var initialBounds = value$1();\n      var modes = Cell(spec.modes);\n      var readState = function () {\n        return 'docked:  ' + docked.get() + ', visible: ' + visible.get() + ', modes: ' + modes.get().join(',');\n      };\n      return nu$8({\n        isDocked: docked.get,\n        setDocked: docked.set,\n        getInitialPos: initialBounds.get,\n        setInitialPos: initialBounds.set,\n        clearInitialPos: initialBounds.clear,\n        isVisible: visible.get,\n        setVisible: visible.set,\n        getModes: modes.get,\n        setModes: modes.set,\n        readState: readState\n      });\n    };\n\n    var DockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$6\n    });\n\n    var Docking = create$8({\n      fields: DockingSchema,\n      name: 'docking',\n      active: ActiveDocking,\n      apis: DockingApis,\n      state: DockingState\n    });\n\n    var toolbarHeightChange = constant$1(generate$6('toolbar-height-change'));\n\n    var visibility = {\n      fadeInClass: 'tox-editor-dock-fadein',\n      fadeOutClass: 'tox-editor-dock-fadeout',\n      transitionClass: 'tox-editor-dock-transition'\n    };\n    var editorStickyOnClass = 'tox-tinymce--toolbar-sticky-on';\n    var editorStickyOffClass = 'tox-tinymce--toolbar-sticky-off';\n    var scrollFromBehindHeader = function (e, containerHeader) {\n      var doc = owner$4(containerHeader);\n      var viewHeight = doc.dom.defaultView.innerHeight;\n      var scrollPos = get$9(doc);\n      var markerElement = SugarElement.fromDom(e.elm);\n      var markerPos = absolute$2(markerElement);\n      var markerHeight = get$b(markerElement);\n      var markerTop = markerPos.y;\n      var markerBottom = markerTop + markerHeight;\n      var editorHeaderPos = absolute$3(containerHeader);\n      var editorHeaderHeight = get$b(containerHeader);\n      var editorHeaderTop = editorHeaderPos.top;\n      var editorHeaderBottom = editorHeaderTop + editorHeaderHeight;\n      var editorHeaderDockedAtTop = Math.abs(editorHeaderTop - scrollPos.top) < 2;\n      var editorHeaderDockedAtBottom = Math.abs(editorHeaderBottom - (scrollPos.top + viewHeight)) < 2;\n      if (editorHeaderDockedAtTop && markerTop < editorHeaderBottom) {\n        to(scrollPos.left, markerTop - editorHeaderHeight, doc);\n      } else if (editorHeaderDockedAtBottom && markerBottom > editorHeaderTop) {\n        var y = markerTop - viewHeight + markerHeight + editorHeaderHeight;\n        to(scrollPos.left, y, doc);\n      }\n    };\n    var isDockedMode = function (header, mode) {\n      return contains$2(Docking.getModes(header), mode);\n    };\n    var updateIframeContentFlow = function (header) {\n      var getOccupiedHeight = function (elm) {\n        return getOuter$2(elm) + (parseInt(get$c(elm, 'margin-top'), 10) || 0) + (parseInt(get$c(elm, 'margin-bottom'), 10) || 0);\n      };\n      var elm = header.element;\n      parent(elm).each(function (parentElem) {\n        var padding = 'padding-' + Docking.getModes(header)[0];\n        if (Docking.isDocked(header)) {\n          var parentWidth = get$a(parentElem);\n          set$7(elm, 'width', parentWidth + 'px');\n          set$7(parentElem, padding, getOccupiedHeight(elm) + 'px');\n        } else {\n          remove$6(elm, 'width');\n          remove$6(parentElem, padding);\n        }\n      });\n    };\n    var updateSinkVisibility = function (sinkElem, visible) {\n      if (visible) {\n        remove$2(sinkElem, visibility.fadeOutClass);\n        add$1(sinkElem, [\n          visibility.transitionClass,\n          visibility.fadeInClass\n        ]);\n      } else {\n        remove$2(sinkElem, visibility.fadeInClass);\n        add$1(sinkElem, [\n          visibility.fadeOutClass,\n          visibility.transitionClass\n        ]);\n      }\n    };\n    var updateEditorClasses = function (editor, docked) {\n      var editorContainer = SugarElement.fromDom(editor.getContainer());\n      if (docked) {\n        add$2(editorContainer, editorStickyOnClass);\n        remove$2(editorContainer, editorStickyOffClass);\n      } else {\n        add$2(editorContainer, editorStickyOffClass);\n        remove$2(editorContainer, editorStickyOnClass);\n      }\n    };\n    var restoreFocus = function (headerElem, focusedElem) {\n      var ownerDoc = owner$4(focusedElem);\n      active(ownerDoc).filter(function (activeElm) {\n        return !eq(focusedElem, activeElm);\n      }).filter(function (activeElm) {\n        return eq(activeElm, SugarElement.fromDom(ownerDoc.dom.body)) || contains(headerElem, activeElm);\n      }).each(function () {\n        return focus$3(focusedElem);\n      });\n    };\n    var findFocusedElem = function (rootElm, lazySink) {\n      return search(rootElm).orThunk(function () {\n        return lazySink().toOptional().bind(function (sink) {\n          return search(sink.element);\n        });\n      });\n    };\n    var setup$9 = function (editor, sharedBackstage, lazyHeader) {\n      if (!editor.inline) {\n        if (!sharedBackstage.header.isPositionedAtTop()) {\n          editor.on('ResizeEditor', function () {\n            lazyHeader().each(Docking.reset);\n          });\n        }\n        editor.on('ResizeWindow ResizeEditor', function () {\n          lazyHeader().each(updateIframeContentFlow);\n        });\n        editor.on('SkinLoaded', function () {\n          lazyHeader().each(function (comp) {\n            Docking.isDocked(comp) ? Docking.reset(comp) : Docking.refresh(comp);\n          });\n        });\n        editor.on('FullscreenStateChanged', function () {\n          lazyHeader().each(Docking.reset);\n        });\n      }\n      editor.on('AfterScrollIntoView', function (e) {\n        lazyHeader().each(function (header) {\n          Docking.refresh(header);\n          var headerElem = header.element;\n          if (isVisible(headerElem)) {\n            scrollFromBehindHeader(e, headerElem);\n          }\n        });\n      });\n      editor.on('PostRender', function () {\n        updateEditorClasses(editor, false);\n      });\n    };\n    var isDocked = function (lazyHeader) {\n      return lazyHeader().map(Docking.isDocked).getOr(false);\n    };\n    var getIframeBehaviours = function () {\n      var _a;\n      return [Receiving.config({ channels: (_a = {}, _a[toolbarHeightChange()] = { onReceive: updateIframeContentFlow }, _a) })];\n    };\n    var getBehaviours = function (editor, sharedBackstage) {\n      var focusedElm = value$1();\n      var lazySink = sharedBackstage.getSink;\n      var runOnSinkElement = function (f) {\n        lazySink().each(function (sink) {\n          return f(sink.element);\n        });\n      };\n      var onDockingSwitch = function (comp) {\n        if (!editor.inline) {\n          updateIframeContentFlow(comp);\n        }\n        updateEditorClasses(editor, Docking.isDocked(comp));\n        comp.getSystem().broadcastOn([repositionPopups()], {});\n        lazySink().each(function (sink) {\n          return sink.getSystem().broadcastOn([repositionPopups()], {});\n        });\n      };\n      var additionalBehaviours = editor.inline ? [] : getIframeBehaviours();\n      return __spreadArray([\n        Focusing.config({}),\n        Docking.config({\n          contextual: __assign({\n            lazyContext: function (comp) {\n              var headerHeight = getOuter$2(comp.element);\n              var container = editor.inline ? editor.getContentAreaContainer() : editor.getContainer();\n              var box = box$1(SugarElement.fromDom(container));\n              var boxHeight = box.height - headerHeight;\n              var topBound = box.y + (isDockedMode(comp, 'top') ? 0 : headerHeight);\n              return Optional.some(bounds(box.x, topBound, box.width, boxHeight));\n            },\n            onShow: function () {\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, true);\n              });\n            },\n            onShown: function (comp) {\n              runOnSinkElement(function (elem) {\n                return remove$1(elem, [\n                  visibility.transitionClass,\n                  visibility.fadeInClass\n                ]);\n              });\n              focusedElm.get().each(function (elem) {\n                restoreFocus(comp.element, elem);\n                focusedElm.clear();\n              });\n            },\n            onHide: function (comp) {\n              findFocusedElem(comp.element, lazySink).fold(focusedElm.clear, focusedElm.set);\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, false);\n              });\n            },\n            onHidden: function () {\n              runOnSinkElement(function (elem) {\n                return remove$1(elem, [visibility.transitionClass]);\n              });\n            }\n          }, visibility),\n          lazyViewport: function (comp) {\n            var win$1 = win();\n            var offset = getStickyToolbarOffset(editor);\n            var top = win$1.y + (isDockedMode(comp, 'top') ? offset : 0);\n            var height = win$1.height - (isDockedMode(comp, 'bottom') ? offset : 0);\n            return bounds(win$1.x, top, win$1.width, height);\n          },\n          modes: [sharedBackstage.header.getDockingMode()],\n          onDocked: onDockingSwitch,\n          onUndocked: onDockingSwitch\n        })\n      ], additionalBehaviours, true);\n    };\n\n    var StickyHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$9,\n        isDocked: isDocked,\n        getBehaviours: getBehaviours\n    });\n\n    var renderHeader = function (spec) {\n      var editor = spec.editor;\n      var getBehaviours$2 = spec.sticky ? getBehaviours : getBehaviours$1;\n      return {\n        uid: spec.uid,\n        dom: spec.dom,\n        components: spec.components,\n        behaviours: derive$1(getBehaviours$2(editor, spec.sharedBackstage))\n      };\n    };\n\n    var groupToolbarButtonSchema = objOf([\n      requiredString('type'),\n      requiredOf('items', oneOf([\n        arrOfObj([\n          requiredString('name'),\n          requiredArrayOf('items', string)\n        ]),\n        string\n      ]))\n    ].concat(baseToolbarButtonFields));\n    var createGroupToolbarButton = function (spec) {\n      return asRaw('GroupToolbarButton', groupToolbarButtonSchema, spec);\n    };\n\n    var baseMenuButtonFields = [\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      requiredFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n\n    var MenuButtonSchema = objOf(__spreadArray([requiredString('type')], baseMenuButtonFields, true));\n    var createMenuButton = function (spec) {\n      return asRaw('menubutton', MenuButtonSchema, spec);\n    };\n\n    var splitButtonSchema = objOf([\n      requiredString('type'),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      optionFunction('select'),\n      requiredFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedStringEnum('presets', 'normal', [\n        'normal',\n        'color',\n        'listpreview'\n      ]),\n      defaulted('columns', 1),\n      requiredFunction('onAction'),\n      requiredFunction('onItemAction')\n    ]);\n    var createSplitButton = function (spec) {\n      return asRaw('SplitButton', splitButtonSchema, spec);\n    };\n\n    var factory$b = function (detail, spec) {\n      var setMenus = function (comp, menus) {\n        var newMenus = map$2(menus, function (m) {\n          var buttonSpec = {\n            type: 'menubutton',\n            text: m.text,\n            fetch: function (callback) {\n              callback(m.getItems());\n            }\n          };\n          var internal = createMenuButton(buttonSpec).mapError(function (errInfo) {\n            return formatError(errInfo);\n          }).getOrDie();\n          return renderMenuButton(internal, 'tox-mbtn', spec.backstage, Optional.some('menuitem'));\n        });\n        Replacing.set(comp, newMenus);\n      };\n      var apis = {\n        focus: Keying.focusIn,\n        setMenus: setMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: [],\n        behaviours: derive$1([\n          Replacing.config({}),\n          config('menubar-events', [\n            runOnAttached(function (component) {\n              detail.onSetup(component);\n            }),\n            run$1(mouseover(), function (comp, se) {\n              descendant(comp.element, '.' + 'tox-mbtn--active').each(function (activeButton) {\n                closest$1(se.event.target, '.' + 'tox-mbtn').each(function (hoveredButton) {\n                  if (!eq(activeButton, hoveredButton)) {\n                    comp.getSystem().getByDom(activeButton).each(function (activeComp) {\n                      comp.getSystem().getByDom(hoveredButton).each(function (hoveredComp) {\n                        Dropdown.expand(hoveredComp);\n                        Dropdown.close(activeComp);\n                        Focusing.focus(hoveredComp);\n                      });\n                    });\n                  }\n                });\n              });\n            }),\n            run$1(focusShifted(), function (comp, se) {\n              se.event.prevFocus.bind(function (prev) {\n                return comp.getSystem().getByDom(prev).toOptional();\n              }).each(function (prev) {\n                se.event.newFocus.bind(function (nu) {\n                  return comp.getSystem().getByDom(nu).toOptional();\n                }).each(function (nu) {\n                  if (Dropdown.isOpen(prev)) {\n                    Dropdown.expand(nu);\n                    Dropdown.close(prev);\n                  }\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'flow',\n            selector: '.' + 'tox-mbtn',\n            onEscape: function (comp) {\n              detail.onEscape(comp);\n              return Optional.some(true);\n            }\n          }),\n          Tabstopping.config({})\n        ]),\n        apis: apis,\n        domModification: { attributes: { role: 'menubar' } }\n      };\n    };\n    var SilverMenubar = single({\n      factory: factory$b,\n      name: 'silver.Menubar',\n      configFields: [\n        required$1('dom'),\n        required$1('uid'),\n        required$1('onEscape'),\n        required$1('backstage'),\n        defaulted('onSetup', noop)\n      ],\n      apis: {\n        focus: function (apis, comp) {\n          apis.focus(comp);\n        },\n        setMenus: function (apis, comp, menus) {\n          apis.setMenus(comp, menus);\n        }\n      }\n    });\n\n    var getAnimationRoot = function (component, slideConfig) {\n      return slideConfig.getAnimationRoot.fold(function () {\n        return component.element;\n      }, function (get) {\n        return get(component);\n      });\n    };\n\n    var getDimensionProperty = function (slideConfig) {\n      return slideConfig.dimension.property;\n    };\n    var getDimension = function (slideConfig, elem) {\n      return slideConfig.dimension.getDimension(elem);\n    };\n    var disableTransitions = function (component, slideConfig) {\n      var root = getAnimationRoot(component, slideConfig);\n      remove$1(root, [\n        slideConfig.shrinkingClass,\n        slideConfig.growingClass\n      ]);\n    };\n    var setShrunk = function (component, slideConfig) {\n      remove$2(component.element, slideConfig.openClass);\n      add$2(component.element, slideConfig.closedClass);\n      set$7(component.element, getDimensionProperty(slideConfig), '0px');\n      reflow(component.element);\n    };\n    var setGrown = function (component, slideConfig) {\n      remove$2(component.element, slideConfig.closedClass);\n      add$2(component.element, slideConfig.openClass);\n      remove$6(component.element, getDimensionProperty(slideConfig));\n    };\n    var doImmediateShrink = function (component, slideConfig, slideState, _calculatedSize) {\n      slideState.setCollapsed();\n      set$7(component.element, getDimensionProperty(slideConfig), getDimension(slideConfig, component.element));\n      reflow(component.element);\n      disableTransitions(component, slideConfig);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n      slideConfig.onShrunk(component);\n    };\n    var doStartShrink = function (component, slideConfig, slideState, calculatedSize) {\n      var size = calculatedSize.getOrThunk(function () {\n        return getDimension(slideConfig, component.element);\n      });\n      slideState.setCollapsed();\n      set$7(component.element, getDimensionProperty(slideConfig), size);\n      reflow(component.element);\n      var root = getAnimationRoot(component, slideConfig);\n      remove$2(root, slideConfig.growingClass);\n      add$2(root, slideConfig.shrinkingClass);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n    };\n    var doStartSmartShrink = function (component, slideConfig, slideState) {\n      var size = getDimension(slideConfig, component.element);\n      var shrinker = size === '0px' ? doImmediateShrink : doStartShrink;\n      shrinker(component, slideConfig, slideState, Optional.some(size));\n    };\n    var doStartGrow = function (component, slideConfig, slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      var wasShrinking = has(root, slideConfig.shrinkingClass);\n      var beforeSize = getDimension(slideConfig, component.element);\n      setGrown(component, slideConfig);\n      var fullSize = getDimension(slideConfig, component.element);\n      var startPartialGrow = function () {\n        set$7(component.element, getDimensionProperty(slideConfig), beforeSize);\n        reflow(component.element);\n      };\n      var startCompleteGrow = function () {\n        setShrunk(component, slideConfig);\n      };\n      var setStartSize = wasShrinking ? startPartialGrow : startCompleteGrow;\n      setStartSize();\n      remove$2(root, slideConfig.shrinkingClass);\n      add$2(root, slideConfig.growingClass);\n      setGrown(component, slideConfig);\n      set$7(component.element, getDimensionProperty(slideConfig), fullSize);\n      slideState.setExpanded();\n      slideConfig.onStartGrow(component);\n    };\n    var refresh$3 = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        remove$6(component.element, getDimensionProperty(slideConfig));\n        var fullSize = getDimension(slideConfig, component.element);\n        set$7(component.element, getDimensionProperty(slideConfig), fullSize);\n      }\n    };\n    var grow = function (component, slideConfig, slideState) {\n      if (!slideState.isExpanded()) {\n        doStartGrow(component, slideConfig, slideState);\n      }\n    };\n    var shrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doStartSmartShrink(component, slideConfig, slideState);\n      }\n    };\n    var immediateShrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doImmediateShrink(component, slideConfig, slideState);\n      }\n    };\n    var hasGrown = function (component, slideConfig, slideState) {\n      return slideState.isExpanded();\n    };\n    var hasShrunk = function (component, slideConfig, slideState) {\n      return slideState.isCollapsed();\n    };\n    var isGrowing = function (component, slideConfig, _slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has(root, slideConfig.growingClass) === true;\n    };\n    var isShrinking = function (component, slideConfig, _slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has(root, slideConfig.shrinkingClass) === true;\n    };\n    var isTransitioning = function (component, slideConfig, slideState) {\n      return isGrowing(component, slideConfig) || isShrinking(component, slideConfig);\n    };\n    var toggleGrow = function (component, slideConfig, slideState) {\n      var f = slideState.isExpanded() ? doStartSmartShrink : doStartGrow;\n      f(component, slideConfig, slideState);\n    };\n\n    var SlidingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$3,\n        grow: grow,\n        shrink: shrink,\n        immediateShrink: immediateShrink,\n        hasGrown: hasGrown,\n        hasShrunk: hasShrunk,\n        isGrowing: isGrowing,\n        isShrinking: isShrinking,\n        isTransitioning: isTransitioning,\n        toggleGrow: toggleGrow,\n        disableTransitions: disableTransitions\n    });\n\n    var exhibit = function (base, slideConfig, _slideState) {\n      var expanded = slideConfig.expanded;\n      return expanded ? nu$7({\n        classes: [slideConfig.openClass],\n        styles: {}\n      }) : nu$7({\n        classes: [slideConfig.closedClass],\n        styles: wrap$1(slideConfig.dimension.property, '0px')\n      });\n    };\n    var events$4 = function (slideConfig, slideState) {\n      return derive$2([runOnSource(transitionend(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event.raw;\n          if (raw.propertyName === slideConfig.dimension.property) {\n            disableTransitions(component, slideConfig);\n            if (slideState.isExpanded()) {\n              remove$6(component.element, slideConfig.dimension.property);\n            }\n            var notify = slideState.isExpanded() ? slideConfig.onGrown : slideConfig.onShrunk;\n            notify(component);\n          }\n        })]);\n    };\n\n    var ActiveSliding = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit,\n        events: events$4\n    });\n\n    var SlidingSchema = [\n      required$1('closedClass'),\n      required$1('openClass'),\n      required$1('shrinkingClass'),\n      required$1('growingClass'),\n      option('getAnimationRoot'),\n      onHandler('onShrunk'),\n      onHandler('onStartShrink'),\n      onHandler('onGrown'),\n      onHandler('onStartGrow'),\n      defaulted('expanded', false),\n      requiredOf('dimension', choose$1('property', {\n        width: [\n          output$1('property', 'width'),\n          output$1('getDimension', function (elem) {\n            return get$a(elem) + 'px';\n          })\n        ],\n        height: [\n          output$1('property', 'height'),\n          output$1('getDimension', function (elem) {\n            return get$b(elem) + 'px';\n          })\n        ]\n      }))\n    ];\n\n    var init$5 = function (spec) {\n      var state = Cell(spec.expanded);\n      var readState = function () {\n        return 'expanded: ' + state.get();\n      };\n      return nu$8({\n        isExpanded: function () {\n          return state.get() === true;\n        },\n        isCollapsed: function () {\n          return state.get() === false;\n        },\n        setCollapsed: curry(state.set, false),\n        setExpanded: curry(state.set, true),\n        readState: readState\n      });\n    };\n\n    var SlidingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$5\n    });\n\n    var Sliding = create$8({\n      fields: SlidingSchema,\n      name: 'sliding',\n      active: ActiveSliding,\n      apis: SlidingApis,\n      state: SlidingState\n    });\n\n    var owner = 'container';\n    var schema$d = [field('slotBehaviours', [])];\n    var getPartName = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch = function (sSpec) {\n      var parts = function () {\n        var record = [];\n        var slot = function (name, config) {\n          record.push(name);\n          return generateOne$1(owner, getPartName(name), config);\n        };\n        return {\n          slot: slot,\n          record: constant$1(record)\n        };\n      }();\n      var spec = sSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map$2(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName(n)\n        });\n      });\n      return composite$1(owner, schema$d, fieldParts, make$1, spec);\n    };\n    var make$1 = function (detail, components) {\n      var getSlotNames = function (_) {\n        return getAllPartNames(detail);\n      };\n      var getSlot = function (container, key) {\n        return getPart(container, detail, key);\n      };\n      var onSlot = function (f, def) {\n        return function (container, key) {\n          return getPart(container, detail, key).map(function (slot) {\n            return f(slot, key);\n          }).getOr(def);\n        };\n      };\n      var onSlots = function (f) {\n        return function (container, keys) {\n          each$1(keys, function (key) {\n            return f(container, key);\n          });\n        };\n      };\n      var doShowing = function (comp, _key) {\n        return get$d(comp.element, 'aria-hidden') !== 'true';\n      };\n      var doShow = function (comp, key) {\n        if (!doShowing(comp)) {\n          var element = comp.element;\n          remove$6(element, 'display');\n          remove$7(element, 'aria-hidden');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: true\n          });\n        }\n      };\n      var doHide = function (comp, key) {\n        if (doShowing(comp)) {\n          var element = comp.element;\n          set$7(element, 'display', 'none');\n          set$8(element, 'aria-hidden', 'true');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: false\n          });\n        }\n      };\n      var isShowing = onSlot(doShowing, false);\n      var hideSlot = onSlot(doHide);\n      var hideSlots = onSlots(hideSlot);\n      var hideAllSlots = function (container) {\n        return hideSlots(container, getSlotNames());\n      };\n      var showSlot = onSlot(doShow);\n      var apis = {\n        getSlotNames: getSlotNames,\n        getSlot: getSlot,\n        isShowing: isShowing,\n        hideSlot: hideSlot,\n        hideAllSlots: hideAllSlots,\n        showSlot: showSlot\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$2(detail.slotBehaviours),\n        apis: apis\n      };\n    };\n    var slotApis = map$1({\n      getSlotNames: function (apis, c) {\n        return apis.getSlotNames(c);\n      },\n      getSlot: function (apis, c, key) {\n        return apis.getSlot(c, key);\n      },\n      isShowing: function (apis, c, key) {\n        return apis.isShowing(c, key);\n      },\n      hideSlot: function (apis, c, key) {\n        return apis.hideSlot(c, key);\n      },\n      hideAllSlots: function (apis, c) {\n        return apis.hideAllSlots(c);\n      },\n      showSlot: function (apis, c, key) {\n        return apis.showSlot(c, key);\n      }\n    }, function (value) {\n      return makeApi(value);\n    });\n    var SlotContainer = __assign(__assign({}, slotApis), { sketch: sketch });\n\n    var sidebarSchema = objOf([\n      optionString('icon'),\n      optionString('tooltip'),\n      defaultedFunction('onShow', noop),\n      defaultedFunction('onHide', noop),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ]);\n    var createSidebar = function (spec) {\n      return asRaw('sidebar', sidebarSchema, spec);\n    };\n\n    var setup$8 = function (editor) {\n      var sidebars = editor.ui.registry.getAll().sidebars;\n      each$1(keys(sidebars), function (name) {\n        var spec = sidebars[name];\n        var isActive = function () {\n          return is$1(Optional.from(editor.queryCommandValue('ToggleSidebar')), name);\n        };\n        editor.ui.registry.addToggleButton(name, {\n          icon: spec.icon,\n          tooltip: spec.tooltip,\n          onAction: function (buttonApi) {\n            editor.execCommand('ToggleSidebar', false, name);\n            buttonApi.setActive(isActive());\n          },\n          onSetup: function (buttonApi) {\n            var handleToggle = function () {\n              return buttonApi.setActive(isActive());\n            };\n            editor.on('ToggleSidebar', handleToggle);\n            return function () {\n              editor.off('ToggleSidebar', handleToggle);\n            };\n          }\n        });\n      });\n    };\n    var getApi = function (comp) {\n      return {\n        element: function () {\n          return comp.element.dom;\n        }\n      };\n    };\n    var makePanels = function (parts, panelConfigs) {\n      var specs = map$2(keys(panelConfigs), function (name) {\n        var spec = panelConfigs[name];\n        var bridged = getOrDie(createSidebar(spec));\n        return {\n          name: name,\n          getApi: getApi,\n          onSetup: bridged.onSetup,\n          onShow: bridged.onShow,\n          onHide: bridged.onHide\n        };\n      });\n      return map$2(specs, function (spec) {\n        var editorOffCell = Cell(noop);\n        return parts.slot(spec.name, {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane']\n          },\n          behaviours: SimpleBehaviours.unnamedEvents([\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell),\n            run$1(slotVisibility(), function (sidepanel, se) {\n              var data = se.event;\n              var optSidePanelSpec = find$5(specs, function (config) {\n                return config.name === data.name;\n              });\n              optSidePanelSpec.each(function (sidePanelSpec) {\n                var handler = data.visible ? sidePanelSpec.onShow : sidePanelSpec.onHide;\n                handler(sidePanelSpec.getApi(sidepanel));\n              });\n            })\n          ])\n        });\n      });\n    };\n    var makeSidebar = function (panelConfigs) {\n      return SlotContainer.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane-container']\n          },\n          components: makePanels(parts, panelConfigs),\n          slotBehaviours: SimpleBehaviours.unnamedEvents([runOnAttached(function (slotContainer) {\n              return SlotContainer.hideAllSlots(slotContainer);\n            })])\n        };\n      });\n    };\n    var setSidebar = function (sidebar, panelConfigs) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        return Replacing.set(slider, [makeSidebar(panelConfigs)]);\n      });\n    };\n    var toggleSidebar = function (sidebar, name) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        var optSlotContainer = Composing.getCurrent(slider);\n        optSlotContainer.each(function (slotContainer) {\n          if (Sliding.hasGrown(slider)) {\n            if (SlotContainer.isShowing(slotContainer, name)) {\n              Sliding.shrink(slider);\n            } else {\n              SlotContainer.hideAllSlots(slotContainer);\n              SlotContainer.showSlot(slotContainer, name);\n            }\n          } else {\n            SlotContainer.hideAllSlots(slotContainer);\n            SlotContainer.showSlot(slotContainer, name);\n            Sliding.grow(slider);\n          }\n        });\n      });\n    };\n    var whichSidebar = function (sidebar) {\n      var optSlider = Composing.getCurrent(sidebar);\n      return optSlider.bind(function (slider) {\n        var sidebarOpen = Sliding.isGrowing(slider) || Sliding.hasGrown(slider);\n        if (sidebarOpen) {\n          var optSlotContainer = Composing.getCurrent(slider);\n          return optSlotContainer.bind(function (slotContainer) {\n            return find$5(SlotContainer.getSlotNames(slotContainer), function (name) {\n              return SlotContainer.isShowing(slotContainer, name);\n            });\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var fixSize = generate$6('FixSizeEvent');\n    var autoSize = generate$6('AutoSizeEvent');\n    var renderSidebar = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar'],\n          attributes: { role: 'complementary' }\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-sidebar__slider']\n            },\n            components: [],\n            behaviours: derive$1([\n              Tabstopping.config({}),\n              Focusing.config({}),\n              Sliding.config({\n                dimension: { property: 'width' },\n                closedClass: 'tox-sidebar--sliding-closed',\n                openClass: 'tox-sidebar--sliding-open',\n                shrinkingClass: 'tox-sidebar--sliding-shrinking',\n                growingClass: 'tox-sidebar--sliding-growing',\n                onShrunk: function (slider) {\n                  var optSlotContainer = Composing.getCurrent(slider);\n                  optSlotContainer.each(SlotContainer.hideAllSlots);\n                  emit(slider, autoSize);\n                },\n                onGrown: function (slider) {\n                  emit(slider, autoSize);\n                },\n                onStartGrow: function (slider) {\n                  emitWith(slider, fixSize, { width: getRaw(slider.element, 'width').getOr('') });\n                },\n                onStartShrink: function (slider) {\n                  emitWith(slider, fixSize, { width: get$a(slider.element) + 'px' });\n                }\n              }),\n              Replacing.config({}),\n              Composing.config({\n                find: function (comp) {\n                  var children = Replacing.contents(comp);\n                  return head(children);\n                }\n              })\n            ])\n          }],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          config('sidebar-sliding-events', [\n            run$1(fixSize, function (comp, se) {\n              set$7(comp.element, 'width', se.event.width);\n            }),\n            run$1(autoSize, function (comp, _se) {\n              remove$6(comp.element, 'width');\n            })\n          ])\n        ])\n      };\n    };\n\n    var block = function (component, config, state, getBusySpec) {\n      set$8(component.element, 'aria-busy', true);\n      var root = config.getRoot(component).getOr(component);\n      var blockerBehaviours = derive$1([\n        Keying.config({\n          mode: 'special',\n          onTab: function () {\n            return Optional.some(true);\n          },\n          onShiftTab: function () {\n            return Optional.some(true);\n          }\n        }),\n        Focusing.config({})\n      ]);\n      var blockSpec = getBusySpec(root, blockerBehaviours);\n      var blocker = root.getSystem().build(blockSpec);\n      Replacing.append(root, premade(blocker));\n      if (blocker.hasConfigured(Keying) && config.focus) {\n        Keying.focusIn(blocker);\n      }\n      if (!state.isBlocked()) {\n        config.onBlock(component);\n      }\n      state.blockWith(function () {\n        return Replacing.remove(root, blocker);\n      });\n    };\n    var unblock = function (component, config, state) {\n      remove$7(component.element, 'aria-busy');\n      if (state.isBlocked()) {\n        config.onUnblock(component);\n      }\n      state.clear();\n    };\n\n    var BlockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        block: block,\n        unblock: unblock\n    });\n\n    var BlockingSchema = [\n      defaultedFunction('getRoot', Optional.none),\n      defaultedBoolean('focus', true),\n      onHandler('onBlock'),\n      onHandler('onUnblock')\n    ];\n\n    var init$4 = function () {\n      var blocker = destroyable();\n      var blockWith = function (destroy) {\n        blocker.set({ destroy: destroy });\n      };\n      return nu$8({\n        readState: blocker.isSet,\n        blockWith: blockWith,\n        clear: blocker.clear,\n        isBlocked: blocker.isSet\n      });\n    };\n\n    var BlockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$4\n    });\n\n    var Blocking = create$8({\n      fields: BlockingSchema,\n      name: 'blocking',\n      apis: BlockingApis,\n      state: BlockingState\n    });\n\n    var getAttrs = function (elem) {\n      var attributes = elem.dom.attributes !== undefined ? elem.dom.attributes : [];\n      return foldl(attributes, function (b, attr) {\n        var _a;\n        if (attr.name === 'class') {\n          return b;\n        } else {\n          return __assign(__assign({}, b), (_a = {}, _a[attr.name] = attr.value, _a));\n        }\n      }, {});\n    };\n    var getClasses = function (elem) {\n      return Array.prototype.slice.call(elem.dom.classList, 0);\n    };\n    var fromHtml = function (html) {\n      var elem = SugarElement.fromHtml(html);\n      var children$1 = children(elem);\n      var attrs = getAttrs(elem);\n      var classes = getClasses(elem);\n      var contents = children$1.length === 0 ? {} : { innerHtml: get$7(elem) };\n      return __assign({\n        tag: name$2(elem),\n        classes: classes,\n        attributes: attrs\n      }, contents);\n    };\n\n    var getBusySpec$1 = function (providerBackstage) {\n      return function (_root, _behaviours) {\n        return {\n          dom: {\n            tag: 'div',\n            attributes: {\n              'aria-label': providerBackstage.translate('Loading...'),\n              'tabindex': '0'\n            },\n            classes: ['tox-throbber__busy-spinner']\n          },\n          components: [{ dom: fromHtml('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n        };\n      };\n    };\n    var focusBusyComponent = function (throbber) {\n      return Composing.getCurrent(throbber).each(function (comp) {\n        return focus$3(comp.element);\n      });\n    };\n    var toggleEditorTabIndex = function (editor, state) {\n      var tabIndexAttr = 'tabindex';\n      var dataTabIndexAttr = 'data-mce-' + tabIndexAttr;\n      Optional.from(editor.iframeElement).map(SugarElement.fromDom).each(function (iframe) {\n        if (state) {\n          getOpt(iframe, tabIndexAttr).each(function (tabIndex) {\n            return set$8(iframe, dataTabIndexAttr, tabIndex);\n          });\n          set$8(iframe, tabIndexAttr, -1);\n        } else {\n          remove$7(iframe, tabIndexAttr);\n          getOpt(iframe, dataTabIndexAttr).each(function (tabIndex) {\n            set$8(iframe, tabIndexAttr, tabIndex);\n            remove$7(iframe, dataTabIndexAttr);\n          });\n        }\n      });\n    };\n    var toggleThrobber = function (editor, comp, state, providerBackstage) {\n      var element = comp.element;\n      toggleEditorTabIndex(editor, state);\n      if (state) {\n        Blocking.block(comp, getBusySpec$1(providerBackstage));\n        remove$6(element, 'display');\n        remove$7(element, 'aria-hidden');\n        if (editor.hasFocus()) {\n          focusBusyComponent(comp);\n        }\n      } else {\n        var throbberFocus = Composing.getCurrent(comp).exists(function (busyComp) {\n          return hasFocus(busyComp.element);\n        });\n        Blocking.unblock(comp);\n        set$7(element, 'display', 'none');\n        set$8(element, 'aria-hidden', 'true');\n        if (throbberFocus) {\n          editor.focus();\n        }\n      }\n    };\n    var renderThrobber = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          attributes: { 'aria-hidden': 'true' },\n          classes: ['tox-throbber'],\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([\n          Replacing.config({}),\n          Blocking.config({ focus: false }),\n          Composing.config({\n            find: function (comp) {\n              return head(comp.components());\n            }\n          })\n        ]),\n        components: []\n      };\n    };\n    var isFocusEvent = function (event) {\n      return event.type === 'focusin';\n    };\n    var isPasteBinTarget = function (event) {\n      if (isFocusEvent(event)) {\n        var node = event.composed ? head(event.composedPath()) : Optional.from(event.target);\n        return node.map(SugarElement.fromDom).filter(isElement$2).exists(function (targetElm) {\n          return has(targetElm, 'mce-pastebin');\n        });\n      } else {\n        return false;\n      }\n    };\n    var setup$7 = function (editor, lazyThrobber, sharedBackstage) {\n      var throbberState = Cell(false);\n      var timer = value$1();\n      var stealFocus = function (e) {\n        if (throbberState.get() && !isPasteBinTarget(e)) {\n          e.preventDefault();\n          focusBusyComponent(lazyThrobber());\n          editor.editorManager.setActive(editor);\n        }\n      };\n      if (!editor.inline) {\n        editor.on('PreInit', function () {\n          editor.dom.bind(editor.getWin(), 'focusin', stealFocus);\n          editor.on('BeforeExecCommand', function (e) {\n            if (e.command.toLowerCase() === 'mcefocus' && e.value !== true) {\n              stealFocus(e);\n            }\n          });\n        });\n      }\n      var toggle = function (state) {\n        if (state !== throbberState.get()) {\n          throbberState.set(state);\n          toggleThrobber(editor, lazyThrobber(), state, sharedBackstage.providers);\n          editor.fire('AfterProgressState', { state: state });\n        }\n      };\n      editor.on('ProgressState', function (e) {\n        timer.on(global$f.clearTimeout);\n        if (isNumber(e.time)) {\n          var timerId = global$f.setEditorTimeout(editor, function () {\n            return toggle(e.state);\n          }, e.time);\n          timer.set(timerId);\n        } else {\n          toggle(e.state);\n          timer.clear();\n        }\n      });\n    };\n\n    var generate$1 = function (xs, f) {\n      var init = {\n        len: 0,\n        list: []\n      };\n      var r = foldl(xs, function (b, a) {\n        var value = f(a, b.len);\n        return value.fold(constant$1(b), function (v) {\n          return {\n            len: v.finish,\n            list: b.list.concat([v])\n          };\n        });\n      }, init);\n      return r.list;\n    };\n\n    var output = function (within, extra, withinWidth) {\n      return {\n        within: within,\n        extra: extra,\n        withinWidth: withinWidth\n      };\n    };\n    var apportion = function (units, total, len) {\n      var parray = generate$1(units, function (unit, current) {\n        var width = len(unit);\n        return Optional.some({\n          element: unit,\n          start: current,\n          finish: current + width,\n          width: width\n        });\n      });\n      var within = filter$2(parray, function (unit) {\n        return unit.finish <= total;\n      });\n      var withinWidth = foldr(within, function (acc, el) {\n        return acc + el.width;\n      }, 0);\n      var extra = parray.slice(within.length);\n      return {\n        within: within,\n        extra: extra,\n        withinWidth: withinWidth\n      };\n    };\n    var toUnit = function (parray) {\n      return map$2(parray, function (unit) {\n        return unit.element;\n      });\n    };\n    var fitLast = function (within, extra, withinWidth) {\n      var fits = toUnit(within.concat(extra));\n      return output(fits, [], withinWidth);\n    };\n    var overflow = function (within, extra, overflower, withinWidth) {\n      var fits = toUnit(within).concat([overflower]);\n      return output(fits, toUnit(extra), withinWidth);\n    };\n    var fitAll = function (within, extra, withinWidth) {\n      return output(toUnit(within), [], withinWidth);\n    };\n    var tryFit = function (total, units, len) {\n      var divide = apportion(units, total, len);\n      return divide.extra.length === 0 ? Optional.some(divide) : Optional.none();\n    };\n    var partition = function (total, units, len, overflower) {\n      var divide = tryFit(total, units, len).getOrThunk(function () {\n        return apportion(units, total - len(overflower), len);\n      });\n      var within = divide.within;\n      var extra = divide.extra;\n      var withinWidth = divide.withinWidth;\n      if (extra.length === 1 && extra[0].width <= len(overflower)) {\n        return fitLast(within, extra, withinWidth);\n      } else if (extra.length >= 1) {\n        return overflow(within, extra, overflower, withinWidth);\n      } else {\n        return fitAll(within, extra, withinWidth);\n      }\n    };\n\n    var setGroups$1 = function (toolbar, storedGroups) {\n      var bGroups = map$2(storedGroups, function (g) {\n        return premade(g);\n      });\n      Toolbar.setGroups(toolbar, bGroups);\n    };\n    var findFocusedComp = function (comps) {\n      return findMap(comps, function (comp) {\n        return search(comp.element).bind(function (focusedElm) {\n          return comp.getSystem().getByDom(focusedElm).toOptional();\n        });\n      });\n    };\n    var refresh$2 = function (toolbar, detail, setOverflow) {\n      var builtGroups = detail.builtGroups.get();\n      if (builtGroups.length === 0) {\n        return;\n      }\n      var primary = getPartOrDie(toolbar, detail, 'primary');\n      var overflowGroup = Coupling.getCoupled(toolbar, 'overflowGroup');\n      set$7(primary.element, 'visibility', 'hidden');\n      var groups = builtGroups.concat([overflowGroup]);\n      var focusedComp = findFocusedComp(groups);\n      setOverflow([]);\n      setGroups$1(primary, groups);\n      var availableWidth = get$a(primary.element);\n      var overflows = partition(availableWidth, detail.builtGroups.get(), function (comp) {\n        return get$a(comp.element);\n      }, overflowGroup);\n      if (overflows.extra.length === 0) {\n        Replacing.remove(primary, overflowGroup);\n        setOverflow([]);\n      } else {\n        setGroups$1(primary, overflows.within);\n        setOverflow(overflows.extra);\n      }\n      remove$6(primary.element, 'visibility');\n      reflow(primary.element);\n      focusedComp.each(Focusing.focus);\n    };\n\n    var schema$c = constant$1([\n      field('splitToolbarBehaviours', [Coupling]),\n      customField('builtGroups', function () {\n        return Cell([]);\n      })\n    ]);\n\n    var schema$b = constant$1([\n      markers$1(['overflowToggledClass']),\n      optionFunction('getOverflowBounds'),\n      required$1('lazySink'),\n      customField('overflowGroups', function () {\n        return Cell([]);\n      })\n    ].concat(schema$c()));\n    var parts$7 = constant$1([\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'primary'\n      }),\n      external$1({\n        schema: schema$e(),\n        name: 'overflow'\n      }),\n      external$1({ name: 'overflow-button' }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var expandable = constant$1(function (element, available) {\n      setMax(element, Math.floor(available));\n    });\n\n    var schema$a = constant$1([\n      markers$1(['toggledClass']),\n      required$1('lazySink'),\n      requiredFunction('fetch'),\n      optionFunction('getBounds'),\n      optionObjOf('fireDismissalEventInstead', [defaulted('event', dismissRequested())]),\n      schema$y()\n    ]);\n    var parts$6 = constant$1([\n      external$1({\n        name: 'button',\n        overrides: function (detail) {\n          return {\n            dom: { attributes: { 'aria-haspopup': 'true' } },\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.toggledClass,\n                aria: { mode: 'expanded' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'toolbar',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([Keying.config({\n                mode: 'cyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'button').each(Focusing.focus);\n                  return Optional.none();\n                }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var toggle = function (button, externals) {\n      var toolbarSandbox = Coupling.getCoupled(button, 'toolbarSandbox');\n      if (Sandboxing.isOpen(toolbarSandbox)) {\n        Sandboxing.close(toolbarSandbox);\n      } else {\n        Sandboxing.open(toolbarSandbox, externals.toolbar());\n      }\n    };\n    var position = function (button, toolbar, detail, layouts) {\n      var bounds = detail.getBounds.map(function (bounder) {\n        return bounder();\n      });\n      var sink = detail.lazySink(button).getOrDie();\n      Positioning.positionWithinBounds(sink, toolbar, {\n        anchor: {\n          type: 'hotspot',\n          hotspot: button,\n          layouts: layouts,\n          overrides: { maxWidthFunction: expandable() }\n        }\n      }, bounds);\n    };\n    var setGroups = function (button, toolbar, detail, layouts, groups) {\n      Toolbar.setGroups(toolbar, groups);\n      position(button, toolbar, detail, layouts);\n      Toggling.on(button);\n    };\n    var makeSandbox = function (button, spec, detail) {\n      var ariaOwner = manager();\n      var onOpen = function (sandbox, toolbar) {\n        detail.fetch().get(function (groups) {\n          setGroups(button, toolbar, detail, spec.layouts, groups);\n          ariaOwner.link(button.element);\n          Keying.focusIn(toolbar);\n        });\n      };\n      var onClose = function () {\n        Toggling.off(button);\n        Focusing.focus(button);\n        ariaOwner.unlink(button.element);\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { id: ariaOwner.id }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              Sandboxing.close(comp);\n              return Optional.some(true);\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf$1(data, queryElem) || isPartOf$1(button, queryElem);\n            },\n            getAttachPoint: function () {\n              return detail.lazySink(button).getOrDie();\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel$1(__assign({ isExtraPart: never }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel({\n              doReposition: function () {\n                Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n                  position(button, toolbar, detail, spec.layouts);\n                });\n              }\n            }))\n          })\n        ])\n      };\n    };\n    var factory$a = function (detail, components, spec, externals) {\n      return __assign(__assign({}, Button.sketch(__assign(__assign({}, externals.button()), {\n        action: function (button) {\n          toggle(button, externals);\n        },\n        buttonBehaviours: SketchBehaviours.augment({ dump: externals.button().buttonBehaviours }, [Coupling.config({\n            others: {\n              toolbarSandbox: function (button) {\n                return makeSandbox(button, spec, detail);\n              }\n            }\n          })])\n      }))), {\n        apis: {\n          setGroups: function (button, groups) {\n            Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n              setGroups(button, toolbar, detail, spec.layouts, groups);\n            });\n          },\n          reposition: function (button) {\n            Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n              position(button, toolbar, detail, spec.layouts);\n            });\n          },\n          toggle: function (button) {\n            toggle(button, externals);\n          },\n          getToolbar: function (button) {\n            return Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox'));\n          },\n          isOpen: function (button) {\n            return Sandboxing.isOpen(Coupling.getCoupled(button, 'toolbarSandbox'));\n          }\n        }\n      });\n    };\n    var FloatingToolbarButton = composite({\n      name: 'FloatingToolbarButton',\n      factory: factory$a,\n      configFields: schema$a(),\n      partFields: parts$6(),\n      apis: {\n        setGroups: function (apis, button, groups) {\n          apis.setGroups(button, groups);\n        },\n        reposition: function (apis, button) {\n          apis.reposition(button);\n        },\n        toggle: function (apis, button) {\n          apis.toggle(button);\n        },\n        getToolbar: function (apis, button) {\n          return apis.getToolbar(button);\n        },\n        isOpen: function (apis, button) {\n          return apis.isOpen(button);\n        }\n      }\n    });\n\n    var schema$9 = constant$1([\n      required$1('items'),\n      markers$1(['itemSelector']),\n      field('tgroupBehaviours', [Keying])\n    ]);\n    var parts$5 = constant$1([group({\n        name: 'items',\n        unit: 'item'\n      })]);\n\n    var factory$9 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.tgroupBehaviours, [Keying.config({\n            mode: 'flow',\n            selector: detail.markers.itemSelector\n          })]),\n        domModification: { attributes: { role: 'toolbar' } }\n      };\n    };\n    var ToolbarGroup = composite({\n      name: 'ToolbarGroup',\n      configFields: schema$9(),\n      partFields: parts$5(),\n      factory: factory$9\n    });\n\n    var buildGroups = function (comps) {\n      return map$2(comps, function (g) {\n        return premade(g);\n      });\n    };\n    var refresh$1 = function (toolbar, memFloatingToolbarButton, detail) {\n      refresh$2(toolbar, detail, function (overflowGroups) {\n        detail.overflowGroups.set(overflowGroups);\n        memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n          FloatingToolbarButton.setGroups(floatingToolbarButton, buildGroups(overflowGroups));\n        });\n      });\n    };\n    var factory$8 = function (detail, components, spec, externals) {\n      var memFloatingToolbarButton = record(FloatingToolbarButton.sketch({\n        fetch: function () {\n          return Future.nu(function (resolve) {\n            resolve(buildGroups(detail.overflowGroups.get()));\n          });\n        },\n        layouts: {\n          onLtr: function () {\n            return [\n              southwest$2,\n              southeast$2\n            ];\n          },\n          onRtl: function () {\n            return [\n              southeast$2,\n              southwest$2\n            ];\n          },\n          onBottomLtr: function () {\n            return [\n              northwest$2,\n              northeast$2\n            ];\n          },\n          onBottomRtl: function () {\n            return [\n              northeast$2,\n              northwest$2\n            ];\n          }\n        },\n        getBounds: spec.getOverflowBounds,\n        lazySink: detail.lazySink,\n        fireDismissalEventInstead: {},\n        markers: { toggledClass: detail.markers.overflowToggledClass },\n        parts: {\n          button: externals['overflow-button'](),\n          toolbar: externals.overflow()\n        }\n      }));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [Coupling.config({\n            others: {\n              overflowGroup: function () {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), { items: [memFloatingToolbarButton.asSpec()] }));\n              }\n            }\n          })]),\n        apis: {\n          setGroups: function (toolbar, groups) {\n            detail.builtGroups.set(map$2(groups, toolbar.getSystem().build));\n            refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          refresh: function (toolbar) {\n            return refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          toggle: function (toolbar) {\n            memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n              FloatingToolbarButton.toggle(floatingToolbarButton);\n            });\n          },\n          isOpen: function (toolbar) {\n            return memFloatingToolbarButton.getOpt(toolbar).map(FloatingToolbarButton.isOpen).getOr(false);\n          },\n          reposition: function (toolbar) {\n            memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n              FloatingToolbarButton.reposition(floatingToolbarButton);\n            });\n          },\n          getOverflow: function (toolbar) {\n            return memFloatingToolbarButton.getOpt(toolbar).bind(FloatingToolbarButton.getToolbar);\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var SplitFloatingToolbar = composite({\n      name: 'SplitFloatingToolbar',\n      configFields: schema$b(),\n      partFields: parts$7(),\n      factory: factory$8,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        reposition: function (apis, toolbar) {\n          apis.reposition(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        },\n        isOpen: function (apis, toolbar) {\n          return apis.isOpen(toolbar);\n        },\n        getOverflow: function (apis, toolbar) {\n          return apis.getOverflow(toolbar);\n        }\n      }\n    });\n\n    var schema$8 = constant$1([\n      markers$1([\n        'closedClass',\n        'openClass',\n        'shrinkingClass',\n        'growingClass',\n        'overflowToggledClass'\n      ]),\n      onHandler('onOpened'),\n      onHandler('onClosed')\n    ].concat(schema$c()));\n    var parts$4 = constant$1([\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'primary'\n      }),\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'overflow',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([\n              Sliding.config({\n                dimension: { property: 'height' },\n                closedClass: detail.markers.closedClass,\n                openClass: detail.markers.openClass,\n                shrinkingClass: detail.markers.shrinkingClass,\n                growingClass: detail.markers.growingClass,\n                onShrunk: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(function (button) {\n                    Toggling.off(button);\n                    Focusing.focus(button);\n                  });\n                  detail.onClosed(comp);\n                },\n                onGrown: function (comp) {\n                  Keying.focusIn(comp);\n                  detail.onOpened(comp);\n                },\n                onStartGrow: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Toggling.on);\n                }\n              }),\n              Keying.config({\n                mode: 'acyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Focusing.focus);\n                  return Optional.some(true);\n                }\n              })\n            ])\n          };\n        }\n      }),\n      external$1({\n        name: 'overflow-button',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.overflowToggledClass,\n                aria: { mode: 'pressed' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var isOpen = function (toolbar, detail) {\n      return getPart(toolbar, detail, 'overflow').map(Sliding.hasGrown).getOr(false);\n    };\n    var toggleToolbar = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow-button').bind(function () {\n        return getPart(toolbar, detail, 'overflow');\n      }).each(function (overf) {\n        refresh(toolbar, detail);\n        Sliding.toggleGrow(overf);\n      });\n    };\n    var refresh = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow').each(function (overflow) {\n        refresh$2(toolbar, detail, function (groups) {\n          var builtGroups = map$2(groups, function (g) {\n            return premade(g);\n          });\n          Toolbar.setGroups(overflow, builtGroups);\n        });\n        getPart(toolbar, detail, 'overflow-button').each(function (button) {\n          if (Sliding.hasGrown(overflow)) {\n            Toggling.on(button);\n          }\n        });\n        Sliding.refresh(overflow);\n      });\n    };\n    var factory$7 = function (detail, components, spec, externals) {\n      var toolbarToggleEvent = 'alloy.toolbar.toggle';\n      var doSetGroups = function (toolbar, groups) {\n        var built = map$2(groups, toolbar.getSystem().build);\n        detail.builtGroups.set(built);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [\n          Coupling.config({\n            others: {\n              overflowGroup: function (toolbar) {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), {\n                  items: [Button.sketch(__assign(__assign({}, externals['overflow-button']()), {\n                      action: function (_button) {\n                        emit(toolbar, toolbarToggleEvent);\n                      }\n                    }))]\n                }));\n              }\n            }\n          }),\n          config('toolbar-toggle-events', [run$1(toolbarToggleEvent, function (toolbar) {\n              toggleToolbar(toolbar, detail);\n            })])\n        ]),\n        apis: {\n          setGroups: function (toolbar, groups) {\n            doSetGroups(toolbar, groups);\n            refresh(toolbar, detail);\n          },\n          refresh: function (toolbar) {\n            return refresh(toolbar, detail);\n          },\n          toggle: function (toolbar) {\n            return toggleToolbar(toolbar, detail);\n          },\n          isOpen: function (toolbar) {\n            return isOpen(toolbar, detail);\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var SplitSlidingToolbar = composite({\n      name: 'SplitSlidingToolbar',\n      configFields: schema$8(),\n      partFields: parts$4(),\n      factory: factory$7,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        },\n        isOpen: function (apis, toolbar) {\n          return apis.isOpen(toolbar);\n        }\n      }\n    });\n\n    var renderToolbarGroupCommon = function (toolbarGroup) {\n      var attributes = toolbarGroup.title.fold(function () {\n        return {};\n      }, function (title) {\n        return { attributes: { title: title } };\n      });\n      return {\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-toolbar__group']\n        }, attributes),\n        components: [ToolbarGroup.parts.items({})],\n        items: toolbarGroup.items,\n        markers: { itemSelector: '*:not(.tox-split-button) > .tox-tbtn:not([disabled]), ' + '.tox-split-button:not([disabled]), ' + '.tox-toolbar-nav-js:not([disabled])' },\n        tgroupBehaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n    var renderToolbarGroup = function (toolbarGroup) {\n      return ToolbarGroup.sketch(renderToolbarGroupCommon(toolbarGroup));\n    };\n    var getToolbarbehaviours = function (toolbarSpec, modeName) {\n      var onAttached = runOnAttached(function (component) {\n        var groups = map$2(toolbarSpec.initGroups, renderToolbarGroup);\n        Toolbar.setGroups(component, groups);\n      });\n      return derive$1([\n        DisablingConfigs.toolbarButton(toolbarSpec.providers.isDisabled),\n        receivingConfig(),\n        Keying.config({\n          mode: modeName,\n          onEscape: toolbarSpec.onEscape,\n          selector: '.tox-toolbar__group'\n        }),\n        config('toolbar-events', [onAttached])\n      ]);\n    };\n    var renderMoreToolbarCommon = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return {\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        parts: {\n          'overflow-group': renderToolbarGroupCommon({\n            title: Optional.none(),\n            items: []\n          }),\n          'overflow-button': renderIconButtonSpec({\n            name: 'more',\n            icon: Optional.some('more-drawer'),\n            disabled: false,\n            tooltip: Optional.some('More...'),\n            primary: false,\n            borderless: false\n          }, Optional.none(), toolbarSpec.providers)\n        },\n        splitToolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName)\n      };\n    };\n    var renderFloatingMoreToolbar = function (toolbarSpec) {\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      var overflowXOffset = 4;\n      var primary = SplitFloatingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      return SplitFloatingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        lazySink: toolbarSpec.getSink,\n        getOverflowBounds: function () {\n          var headerElem = toolbarSpec.moreDrawerData.lazyHeader().element;\n          var headerBounds = absolute$2(headerElem);\n          var docElem = documentElement(headerElem);\n          var docBounds = absolute$2(docElem);\n          var height = Math.max(docElem.dom.scrollHeight, docBounds.height);\n          return bounds(headerBounds.x + overflowXOffset, docBounds.y, headerBounds.width - overflowXOffset * 2, height);\n        },\n        parts: __assign(__assign({}, baseSpec.parts), {\n          overflow: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: toolbarSpec.attributes\n            }\n          }\n        }),\n        components: [primary],\n        markers: { overflowToggledClass: 'tox-tbtn--enabled' }\n      }));\n    };\n    var renderSlidingMoreToolbar = function (toolbarSpec) {\n      var primary = SplitSlidingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      var overflow = SplitSlidingToolbar.parts.overflow({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__overflow']\n        }\n      });\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      return SplitSlidingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        components: [\n          primary,\n          overflow\n        ],\n        markers: {\n          openClass: 'tox-toolbar__overflow--open',\n          closedClass: 'tox-toolbar__overflow--closed',\n          growingClass: 'tox-toolbar__overflow--growing',\n          shrinkingClass: 'tox-toolbar__overflow--shrinking',\n          overflowToggledClass: 'tox-tbtn--enabled'\n        },\n        onOpened: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'opened' });\n        },\n        onClosed: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'closed' });\n        }\n      }));\n    };\n    var renderToolbar = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return Toolbar.sketch({\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar'].concat(toolbarSpec.type === ToolbarMode.scrolling ? ['tox-toolbar--scrolling'] : [])\n        },\n        components: [Toolbar.parts.groups({})],\n        toolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName)\n      });\n    };\n\n    var factory$6 = function (detail, components, _spec) {\n      var apis = {\n        getSocket: function (comp) {\n          return parts$a.getPart(comp, detail, 'socket');\n        },\n        setSidebar: function (comp, panelConfigs) {\n          parts$a.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return setSidebar(sidebar, panelConfigs);\n          });\n        },\n        toggleSidebar: function (comp, name) {\n          parts$a.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return toggleSidebar(sidebar, name);\n          });\n        },\n        whichSidebar: function (comp) {\n          return parts$a.getPart(comp, detail, 'sidebar').bind(whichSidebar).getOrNull();\n        },\n        getHeader: function (comp) {\n          return parts$a.getPart(comp, detail, 'header');\n        },\n        getToolbar: function (comp) {\n          return parts$a.getPart(comp, detail, 'toolbar');\n        },\n        setToolbar: function (comp, groups) {\n          parts$a.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            toolbar.getApis().setGroups(toolbar, groups);\n          });\n        },\n        setToolbars: function (comp, toolbars) {\n          parts$a.getPart(comp, detail, 'multiple-toolbar').each(function (mToolbar) {\n            CustomList.setItems(mToolbar, toolbars);\n          });\n        },\n        refreshToolbar: function (comp) {\n          var toolbar = parts$a.getPart(comp, detail, 'toolbar');\n          toolbar.each(function (toolbar) {\n            return toolbar.getApis().refresh(toolbar);\n          });\n        },\n        toggleToolbarDrawer: function (comp) {\n          parts$a.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            mapFrom(toolbar.getApis().toggle, function (toggle) {\n              return toggle(toolbar);\n            });\n          });\n        },\n        isToolbarDrawerToggled: function (comp) {\n          return parts$a.getPart(comp, detail, 'toolbar').bind(function (toolbar) {\n            return Optional.from(toolbar.getApis().isOpen).map(function (isOpen) {\n              return isOpen(toolbar);\n            });\n          }).getOr(false);\n        },\n        getThrobber: function (comp) {\n          return parts$a.getPart(comp, detail, 'throbber');\n        },\n        focusToolbar: function (comp) {\n          var optToolbar = parts$a.getPart(comp, detail, 'toolbar').orThunk(function () {\n            return parts$a.getPart(comp, detail, 'multiple-toolbar');\n          });\n          optToolbar.each(function (toolbar) {\n            Keying.focusIn(toolbar);\n          });\n        },\n        setMenubar: function (comp, menus) {\n          parts$a.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.setMenus(menubar, menus);\n          });\n        },\n        focusMenubar: function (comp) {\n          parts$a.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.focus(menubar);\n          });\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        behaviours: detail.behaviours\n      };\n    };\n    var partMenubar = partType.optional({\n      factory: SilverMenubar,\n      name: 'menubar',\n      schema: [required$1('backstage')]\n    });\n    var toolbarFactory = function (spec) {\n      if (spec.type === ToolbarMode.sliding) {\n        return renderSlidingMoreToolbar;\n      } else if (spec.type === ToolbarMode.floating) {\n        return renderFloatingMoreToolbar;\n      } else {\n        return renderToolbar;\n      }\n    };\n    var partMultipleToolbar = partType.optional({\n      factory: {\n        sketch: function (spec) {\n          return CustomList.sketch({\n            uid: spec.uid,\n            dom: spec.dom,\n            listBehaviours: derive$1([Keying.config({\n                mode: 'acyclic',\n                selector: '.tox-toolbar'\n              })]),\n            makeItem: function () {\n              return renderToolbar({\n                type: spec.type,\n                uid: generate$6('multiple-toolbar-item'),\n                cyclicKeying: false,\n                initGroups: [],\n                providers: spec.providers,\n                onEscape: function () {\n                  spec.onEscape();\n                  return Optional.some(true);\n                }\n              });\n            },\n            setupItem: function (_mToolbar, tc, data, _index) {\n              Toolbar.setGroups(tc, data);\n            },\n            shell: true\n          });\n        }\n      },\n      name: 'multiple-toolbar',\n      schema: [\n        required$1('dom'),\n        required$1('onEscape')\n      ]\n    });\n    var partToolbar = partType.optional({\n      factory: {\n        sketch: function (spec) {\n          var renderer = toolbarFactory(spec);\n          var toolbarSpec = {\n            type: spec.type,\n            uid: spec.uid,\n            onEscape: function () {\n              spec.onEscape();\n              return Optional.some(true);\n            },\n            cyclicKeying: false,\n            initGroups: [],\n            getSink: spec.getSink,\n            providers: spec.providers,\n            moreDrawerData: {\n              lazyToolbar: spec.lazyToolbar,\n              lazyMoreButton: spec.lazyMoreButton,\n              lazyHeader: spec.lazyHeader\n            },\n            attributes: spec.attributes\n          };\n          return renderer(toolbarSpec);\n        }\n      },\n      name: 'toolbar',\n      schema: [\n        required$1('dom'),\n        required$1('onEscape'),\n        required$1('getSink')\n      ]\n    });\n    var partHeader = partType.optional({\n      factory: { sketch: renderHeader },\n      name: 'header',\n      schema: [required$1('dom')]\n    });\n    var partSocket = partType.optional({\n      name: 'socket',\n      schema: [required$1('dom')]\n    });\n    var partSidebar = partType.optional({\n      factory: { sketch: renderSidebar },\n      name: 'sidebar',\n      schema: [required$1('dom')]\n    });\n    var partThrobber = partType.optional({\n      factory: { sketch: renderThrobber },\n      name: 'throbber',\n      schema: [required$1('dom')]\n    });\n    var OuterContainer = composite({\n      name: 'OuterContainer',\n      factory: factory$6,\n      configFields: [\n        required$1('dom'),\n        required$1('behaviours')\n      ],\n      partFields: [\n        partHeader,\n        partMenubar,\n        partToolbar,\n        partMultipleToolbar,\n        partSocket,\n        partSidebar,\n        partThrobber\n      ],\n      apis: {\n        getSocket: function (apis, comp) {\n          return apis.getSocket(comp);\n        },\n        setSidebar: function (apis, comp, panelConfigs) {\n          apis.setSidebar(comp, panelConfigs);\n        },\n        toggleSidebar: function (apis, comp, name) {\n          apis.toggleSidebar(comp, name);\n        },\n        whichSidebar: function (apis, comp) {\n          return apis.whichSidebar(comp);\n        },\n        getHeader: function (apis, comp) {\n          return apis.getHeader(comp);\n        },\n        getToolbar: function (apis, comp) {\n          return apis.getToolbar(comp);\n        },\n        setToolbar: function (apis, comp, grps) {\n          var groups = map$2(grps, function (grp) {\n            return renderToolbarGroup(grp);\n          });\n          apis.setToolbar(comp, groups);\n        },\n        setToolbars: function (apis, comp, ts) {\n          var renderedToolbars = map$2(ts, function (g) {\n            return map$2(g, renderToolbarGroup);\n          });\n          apis.setToolbars(comp, renderedToolbars);\n        },\n        refreshToolbar: function (apis, comp) {\n          return apis.refreshToolbar(comp);\n        },\n        toggleToolbarDrawer: function (apis, comp) {\n          apis.toggleToolbarDrawer(comp);\n        },\n        isToolbarDrawerToggled: function (apis, comp) {\n          return apis.isToolbarDrawerToggled(comp);\n        },\n        getThrobber: function (apis, comp) {\n          return apis.getThrobber(comp);\n        },\n        setMenubar: function (apis, comp, menus) {\n          apis.setMenubar(comp, menus);\n        },\n        focusMenubar: function (apis, comp) {\n          apis.focusMenubar(comp);\n        },\n        focusToolbar: function (apis, comp) {\n          apis.focusToolbar(comp);\n        }\n      }\n    });\n\n    var defaultMenubar = 'file edit view insert format tools table help';\n    var defaultMenus = {\n      file: {\n        title: 'File',\n        items: 'newdocument restoredraft | preview | export print | deleteallconversations'\n      },\n      edit: {\n        title: 'Edit',\n        items: 'undo redo | cut copy paste pastetext | selectall | searchreplace'\n      },\n      view: {\n        title: 'View',\n        items: 'code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments'\n      },\n      insert: {\n        title: 'Insert',\n        items: 'image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime'\n      },\n      format: {\n        title: 'Format',\n        items: 'bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | language | removeformat'\n      },\n      tools: {\n        title: 'Tools',\n        items: 'spellchecker spellcheckerlanguage | a11ycheck code wordcount'\n      },\n      table: {\n        title: 'Table',\n        items: 'inserttable | cell row column | advtablesort | tableprops deletetable'\n      },\n      help: {\n        title: 'Help',\n        items: 'help'\n      }\n    };\n    var make = function (menu, registry, editor) {\n      var removedMenuItems = getRemovedMenuItems(editor).split(/[ ,]/);\n      return {\n        text: menu.title,\n        getItems: function () {\n          return bind$3(menu.items, function (i) {\n            var itemName = i.toLowerCase();\n            if (itemName.trim().length === 0) {\n              return [];\n            } else if (exists(removedMenuItems, function (removedMenuItem) {\n                return removedMenuItem === itemName;\n              })) {\n              return [];\n            } else if (itemName === 'separator' || itemName === '|') {\n              return [{ type: 'separator' }];\n            } else if (registry.menuItems[itemName]) {\n              return [registry.menuItems[itemName]];\n            } else {\n              return [];\n            }\n          });\n        }\n      };\n    };\n    var parseItemsString = function (items) {\n      if (typeof items === 'string') {\n        return items.split(' ');\n      }\n      return items;\n    };\n    var identifyMenus = function (editor, registry) {\n      var rawMenuData = __assign(__assign({}, defaultMenus), registry.menus);\n      var userDefinedMenus = keys(registry.menus).length > 0;\n      var menubar = registry.menubar === undefined || registry.menubar === true ? parseItemsString(defaultMenubar) : parseItemsString(registry.menubar === false ? '' : registry.menubar);\n      var validMenus = filter$2(menubar, function (menuName) {\n        var isDefaultMenu = has$2(defaultMenus, menuName);\n        if (userDefinedMenus) {\n          return isDefaultMenu || get$e(registry.menus, menuName).exists(function (menu) {\n            return has$2(menu, 'items');\n          });\n        } else {\n          return isDefaultMenu;\n        }\n      });\n      var menus = map$2(validMenus, function (menuName) {\n        var menuData = rawMenuData[menuName];\n        return make({\n          title: menuData.title,\n          items: parseItemsString(menuData.items)\n        }, registry, editor);\n      });\n      return filter$2(menus, function (menu) {\n        var isNotSeparator = function (item) {\n          return item.type !== 'separator';\n        };\n        return menu.getItems().length > 0 && exists(menu.getItems(), isNotSeparator);\n      });\n    };\n\n    var fireSkinLoaded = function (editor) {\n      var done = function () {\n        editor._skinLoaded = true;\n        fireSkinLoaded$1(editor);\n      };\n      return function () {\n        if (editor.initialized) {\n          done();\n        } else {\n          editor.on('init', done);\n        }\n      };\n    };\n    var fireSkinLoadError = function (editor, err) {\n      return function () {\n        return fireSkinLoadError$1(editor, { message: err });\n      };\n    };\n\n    var loadStylesheet = function (editor, stylesheetUrl, styleSheetLoader) {\n      return new global$c(function (resolve, reject) {\n        styleSheetLoader.load(stylesheetUrl, resolve, reject);\n        editor.on('remove', function () {\n          return styleSheetLoader.unload(stylesheetUrl);\n        });\n      });\n    };\n    var loadUiSkins = function (editor, skinUrl) {\n      var skinUiCss = skinUrl + '/skin.min.css';\n      return loadStylesheet(editor, skinUiCss, editor.ui.styleSheetLoader);\n    };\n    var loadShadowDomUiSkins = function (editor, skinUrl) {\n      var isInShadowRoot$1 = isInShadowRoot(SugarElement.fromDom(editor.getElement()));\n      if (isInShadowRoot$1) {\n        var shadowDomSkinCss = skinUrl + '/skin.shadowdom.min.css';\n        return loadStylesheet(editor, shadowDomSkinCss, global$b.DOM.styleSheetLoader);\n      } else {\n        return global$c.resolve();\n      }\n    };\n    var loadSkin = function (isInline, editor) {\n      var skinUrl = getSkinUrl(editor);\n      if (skinUrl) {\n        editor.contentCSS.push(skinUrl + (isInline ? '/content.inline' : '/content') + '.min.css');\n      }\n      if (isSkinDisabled(editor) === false && isString(skinUrl)) {\n        global$c.all([\n          loadUiSkins(editor, skinUrl),\n          loadShadowDomUiSkins(editor, skinUrl)\n        ]).then(fireSkinLoaded(editor), fireSkinLoadError(editor, 'Skin could not be loaded'));\n      } else {\n        fireSkinLoaded(editor)();\n      }\n    };\n    var iframe = curry(loadSkin, false);\n    var inline = curry(loadSkin, true);\n\n    var onSetupFormatToggle = function (editor, name) {\n      return function (api) {\n        var boundCallback = unbindable();\n        var init = function () {\n          api.setActive(editor.formatter.match(name));\n          var binding = editor.formatter.formatChanged(name, api.setActive);\n          boundCallback.set(binding);\n        };\n        editor.initialized ? init() : editor.once('init', init);\n        return function () {\n          editor.off('init', init);\n          boundCallback.clear();\n        };\n      };\n    };\n    var onSetupEvent = function (editor, event, f) {\n      return function (api) {\n        var handleEvent = function () {\n          return f(api);\n        };\n        var init = function () {\n          f(api);\n          editor.on(event, handleEvent);\n        };\n        editor.initialized ? init() : editor.once('init', init);\n        return function () {\n          editor.off('init', init);\n          editor.off(event, handleEvent);\n        };\n      };\n    };\n    var onActionToggleFormat$1 = function (editor) {\n      return function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('mceToggleFormat', false, rawItem.format);\n          });\n        };\n      };\n    };\n    var onActionExecCommand = function (editor, command) {\n      return function () {\n        return editor.execCommand(command);\n      };\n    };\n\n    var generateSelectItems = function (_editor, backstage, spec) {\n      var generateItem = function (rawItem, response, disabled, value) {\n        var translatedText = backstage.shared.providers.translate(rawItem.title);\n        if (rawItem.type === 'separator') {\n          return Optional.some({\n            type: 'separator',\n            text: translatedText\n          });\n        } else if (rawItem.type === 'submenu') {\n          var items = bind$3(rawItem.getStyleItems(), function (si) {\n            return validate(si, response, value);\n          });\n          if (response === 0 && items.length <= 0) {\n            return Optional.none();\n          } else {\n            return Optional.some({\n              type: 'nestedmenuitem',\n              text: translatedText,\n              disabled: items.length <= 0,\n              getSubmenuItems: function () {\n                return bind$3(rawItem.getStyleItems(), function (si) {\n                  return validate(si, response, value);\n                });\n              }\n            });\n          }\n        } else {\n          return Optional.some(__assign({\n            type: 'togglemenuitem',\n            text: translatedText,\n            icon: rawItem.icon,\n            active: rawItem.isSelected(value),\n            disabled: disabled,\n            onAction: spec.onAction(rawItem)\n          }, rawItem.getStylePreview().fold(function () {\n            return {};\n          }, function (preview) {\n            return { meta: { style: preview } };\n          })));\n        }\n      };\n      var validate = function (item, response, value) {\n        var invalid = item.type === 'formatter' && spec.isInvalid(item);\n        if (response === 0) {\n          return invalid ? [] : generateItem(item, response, false, value).toArray();\n        } else {\n          return generateItem(item, response, invalid, value).toArray();\n        }\n      };\n      var validateItems = function (preItems) {\n        var value = spec.getCurrentValue();\n        var response = spec.shouldHide ? 0 : 1;\n        return bind$3(preItems, function (item) {\n          return validate(item, response, value);\n        });\n      };\n      var getFetch = function (backstage, getStyleItems) {\n        return function (comp, callback) {\n          var preItems = getStyleItems();\n          var items = validateItems(preItems);\n          var menu = build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false);\n          callback(menu);\n        };\n      };\n      return {\n        validateItems: validateItems,\n        getFetch: getFetch\n      };\n    };\n    var createMenuItems = function (editor, backstage, spec) {\n      var dataset = spec.dataset;\n      var getStyleItems = dataset.type === 'basic' ? function () {\n        return map$2(dataset.data, function (d) {\n          return processBasic(d, spec.isSelectedFor, spec.getPreviewFor);\n        });\n      } : dataset.getData;\n      return {\n        items: generateSelectItems(editor, backstage, spec),\n        getStyleItems: getStyleItems\n      };\n    };\n    var createSelectButton = function (editor, backstage, spec) {\n      var _a = createMenuItems(editor, backstage, spec), items = _a.items, getStyleItems = _a.getStyleItems;\n      var getApi = function (comp) {\n        return { getComponent: constant$1(comp) };\n      };\n      var onSetup = onSetupEvent(editor, 'NodeChange', function (api) {\n        var comp = api.getComponent();\n        spec.updateText(comp);\n      });\n      return renderCommonDropdown({\n        text: spec.icon.isSome() ? Optional.none() : spec.text,\n        icon: spec.icon,\n        tooltip: Optional.from(spec.tooltip),\n        role: Optional.none(),\n        fetch: items.getFetch(backstage, getStyleItems),\n        onSetup: onSetup,\n        getApi: getApi,\n        columns: 1,\n        presets: 'normal',\n        classes: spec.icon.isSome() ? [] : ['bespoke'],\n        dropdownBehaviours: []\n      }, 'tox-tbtn', backstage.shared);\n    };\n\n    var process = function (rawFormats) {\n      return map$2(rawFormats, function (item) {\n        var title = item, format = item;\n        var values = item.split('=');\n        if (values.length > 1) {\n          title = values[0];\n          format = values[1];\n        }\n        return {\n          title: title,\n          format: format\n        };\n      });\n    };\n    var buildBasicStaticDataset = function (data) {\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n    var Delimiter;\n    (function (Delimiter) {\n      Delimiter[Delimiter['SemiColon'] = 0] = 'SemiColon';\n      Delimiter[Delimiter['Space'] = 1] = 'Space';\n    }(Delimiter || (Delimiter = {})));\n    var split = function (rawFormats, delimiter) {\n      if (delimiter === Delimiter.SemiColon) {\n        return rawFormats.replace(/;$/, '').split(';');\n      } else {\n        return rawFormats.split(' ');\n      }\n    };\n    var buildBasicSettingsDataset = function (editor, settingName, defaults, delimiter) {\n      var rawFormats = editor.getParam(settingName, defaults, 'string');\n      var data = process(split(rawFormats, delimiter));\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n\n    var alignMenuItems = [\n      {\n        title: 'Left',\n        icon: 'align-left',\n        format: 'alignleft',\n        command: 'JustifyLeft'\n      },\n      {\n        title: 'Center',\n        icon: 'align-center',\n        format: 'aligncenter',\n        command: 'JustifyCenter'\n      },\n      {\n        title: 'Right',\n        icon: 'align-right',\n        format: 'alignright',\n        command: 'JustifyRight'\n      },\n      {\n        title: 'Justify',\n        icon: 'align-justify',\n        format: 'alignjustify',\n        command: 'JustifyFull'\n      }\n    ];\n    var getSpec$4 = function (editor) {\n      var getMatchingValue = function () {\n        return find$5(alignMenuItems, function (item) {\n          return editor.formatter.match(item.format);\n        });\n      };\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (_format) {\n        return Optional.none;\n      };\n      var updateSelectMenuIcon = function (comp) {\n        var match = getMatchingValue();\n        var alignment = match.fold(constant$1('left'), function (item) {\n          return item.title.toLowerCase();\n        });\n        emitWith(comp, updateMenuIcon, { icon: 'align-' + alignment });\n      };\n      var dataset = buildBasicStaticDataset(alignMenuItems);\n      var onAction = function (rawItem) {\n        return function () {\n          return find$5(alignMenuItems, function (item) {\n            return item.format === rawItem.format;\n          }).each(function (item) {\n            return editor.execCommand(item.command);\n          });\n        };\n      };\n      return {\n        tooltip: 'Align',\n        text: Optional.none(),\n        icon: Optional.some('align-left'),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        updateText: updateSelectMenuIcon,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createAlignSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$4(editor));\n    };\n    var alignSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$4(editor));\n      editor.ui.registry.addNestedMenuItem('align', {\n        text: backstage.shared.providers.translate('Align'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsFormats = 'Andale Mono=andale mono,monospace;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,sans-serif;' + 'Book Antiqua=book antiqua,palatino,serif;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier,monospace;' + 'Georgia=georgia,palatino,serif;' + 'Helvetica=helvetica,arial,sans-serif;' + 'Impact=impact,sans-serif;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco,monospace;' + 'Times New Roman=times new roman,times,serif;' + 'Trebuchet MS=trebuchet ms,geneva,sans-serif;' + 'Verdana=verdana,geneva,sans-serif;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats';\n    var systemStackFonts = [\n      '-apple-system',\n      'Segoe UI',\n      'Roboto',\n      'Helvetica Neue',\n      'sans-serif'\n    ];\n    var splitFonts = function (fontFamily) {\n      var fonts = fontFamily.split(/\\s*,\\s*/);\n      return map$2(fonts, function (font) {\n        return font.replace(/^['\"]+|['\"]+$/g, '');\n      });\n    };\n    var isSystemFontStack = function (fontFamily) {\n      var matchesSystemStack = function () {\n        var fonts = splitFonts(fontFamily.toLowerCase());\n        return forall(systemStackFonts, function (font) {\n          return fonts.indexOf(font.toLowerCase()) > -1;\n        });\n      };\n      return fontFamily.indexOf('-apple-system') === 0 && matchesSystemStack();\n    };\n    var getSpec$3 = function (editor) {\n      var systemFont = 'System Font';\n      var getMatchingValue = function () {\n        var getFirstFont = function (fontFamily) {\n          return fontFamily ? splitFonts(fontFamily)[0] : '';\n        };\n        var fontFamily = editor.queryCommandValue('FontName');\n        var items = dataset.data;\n        var font = fontFamily ? fontFamily.toLowerCase() : '';\n        var matchOpt = find$5(items, function (item) {\n          var format = item.format;\n          return format.toLowerCase() === font || getFirstFont(format).toLowerCase() === getFirstFont(font).toLowerCase();\n        }).orThunk(function () {\n          return someIf(isSystemFontStack(font), {\n            title: systemFont,\n            format: font\n          });\n        });\n        return {\n          matchOpt: matchOpt,\n          font: fontFamily\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = function (item) {\n        return function () {\n          return Optional.some({\n            tag: 'div',\n            styles: item.indexOf('dings') === -1 ? { 'font-family': item } : {}\n          });\n        };\n      };\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontName', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, font = _a.font;\n        var text = matchOpt.fold(constant$1(font), function (item) {\n          return item.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var dataset = buildBasicSettingsDataset(editor, 'font_formats', defaultFontsFormats, Delimiter.SemiColon);\n      return {\n        tooltip: 'Fonts',\n        text: Optional.some(systemFont),\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: getCurrentValue,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        updateText: updateSelectMenuText,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: never\n      };\n    };\n    var createFontSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$3(editor));\n    };\n    var fontSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$3(editor));\n      editor.ui.registry.addNestedMenuItem('fontformats', {\n        text: backstage.shared.providers.translate('Fonts'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsizeFormats = '8pt 10pt 12pt 14pt 18pt 24pt 36pt';\n    var legacyFontSizes = {\n      '8pt': '1',\n      '10pt': '2',\n      '12pt': '3',\n      '14pt': '4',\n      '18pt': '5',\n      '24pt': '6',\n      '36pt': '7'\n    };\n    var keywordFontSizes = {\n      'xx-small': '7pt',\n      'x-small': '8pt',\n      'small': '10pt',\n      'medium': '12pt',\n      'large': '14pt',\n      'x-large': '18pt',\n      'xx-large': '24pt'\n    };\n    var round = function (number, precision) {\n      var factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    var toPt = function (fontSize, precision) {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      } else {\n        return get$e(keywordFontSizes, fontSize).getOr(fontSize);\n      }\n    };\n    var toLegacy = function (fontSize) {\n      return get$e(legacyFontSizes, fontSize).getOr('');\n    };\n    var getSpec$2 = function (editor) {\n      var getMatchingValue = function () {\n        var matchOpt = Optional.none();\n        var items = dataset.data;\n        var fontSize = editor.queryCommandValue('FontSize');\n        if (fontSize) {\n          var _loop_1 = function (precision) {\n            var pt = toPt(fontSize, precision);\n            var legacy = toLegacy(pt);\n            matchOpt = find$5(items, function (item) {\n              return item.format === fontSize || item.format === pt || item.format === legacy;\n            });\n          };\n          for (var precision = 3; matchOpt.isNone() && precision >= 0; precision--) {\n            _loop_1(precision);\n          }\n        }\n        return {\n          matchOpt: matchOpt,\n          size: fontSize\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = constant$1(Optional.none);\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontSize', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, size = _a.size;\n        var text = matchOpt.fold(constant$1(size), function (match) {\n          return match.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var dataset = buildBasicSettingsDataset(editor, 'fontsize_formats', defaultFontsizeFormats, Delimiter.Space);\n      return {\n        tooltip: 'Font sizes',\n        text: Optional.some('12pt'),\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getPreviewFor: getPreviewFor,\n        getCurrentValue: getCurrentValue,\n        onAction: onAction,\n        updateText: updateSelectMenuText,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: never\n      };\n    };\n    var createFontsizeSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$2(editor));\n    };\n    var fontsizeSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$2(editor));\n      editor.ui.registry.addNestedMenuItem('fontsizes', {\n        text: 'Font sizes',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var findNearest = function (editor, getStyles) {\n      var styles = getStyles();\n      var formats = map$2(styles, function (style) {\n        return style.format;\n      });\n      return Optional.from(editor.formatter.closest(formats)).bind(function (fmt) {\n        return find$5(styles, function (data) {\n          return data.format === fmt;\n        });\n      }).orThunk(function () {\n        return someIf(editor.formatter.match('p'), {\n          title: 'Paragraph',\n          format: 'p'\n        });\n      });\n    };\n\n    var defaultBlocks = 'Paragraph=p;' + 'Heading 1=h1;' + 'Heading 2=h2;' + 'Heading 3=h3;' + 'Heading 4=h4;' + 'Heading 5=h5;' + 'Heading 6=h6;' + 'Preformatted=pre';\n    var getSpec$1 = function (editor) {\n      var fallbackFormat = 'Paragraph';\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var detectedFormat = findNearest(editor, function () {\n          return dataset.data;\n        });\n        var text = detectedFormat.fold(constant$1(fallbackFormat), function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var dataset = buildBasicSettingsDataset(editor, 'block_formats', defaultBlocks, Delimiter.SemiColon);\n      return {\n        tooltip: 'Blocks',\n        text: Optional.some(fallbackFormat),\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat$1(editor),\n        updateText: updateSelectMenuText,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createFormatSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$1(editor));\n    };\n    var formatSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$1(editor));\n      editor.ui.registry.addNestedMenuItem('blockformats', {\n        text: 'Blocks',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var getSpec = function (editor, dataset) {\n      var fallbackFormat = 'Paragraph';\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          }) : Optional.none();\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var getFormatItems = function (fmt) {\n          var subs = fmt.items;\n          return subs !== undefined && subs.length > 0 ? bind$3(subs, getFormatItems) : [{\n              title: fmt.title,\n              format: fmt.format\n            }];\n        };\n        var flattenedItems = bind$3(getStyleFormats(editor), getFormatItems);\n        var detectedFormat = findNearest(editor, constant$1(flattenedItems));\n        var text = detectedFormat.fold(constant$1(fallbackFormat), function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      return {\n        tooltip: 'Formats',\n        text: Optional.some(fallbackFormat),\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat$1(editor),\n        updateText: updateSelectMenuText,\n        shouldHide: editor.getParam('style_formats_autohide', false, 'boolean'),\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        },\n        dataset: dataset\n      };\n    };\n    var createStyleSelect = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      return createSelectButton(editor, backstage, getSpec(editor, dataset));\n    };\n    var styleSelectMenu = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      var menuItems = createMenuItems(editor, backstage, getSpec(editor, dataset));\n      editor.ui.registry.addNestedMenuItem('formats', {\n        text: 'Formats',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var events$3 = function (reflectingConfig, reflectingState) {\n      var update = function (component, data) {\n        reflectingConfig.updateState.each(function (updateState) {\n          var newState = updateState(component, data);\n          reflectingState.set(newState);\n        });\n        reflectingConfig.renderComponents.each(function (renderComponents) {\n          var newComponents = renderComponents(data, reflectingState.get());\n          var newChildren = map$2(newComponents, component.getSystem().build);\n          replaceChildren(component, newChildren);\n        });\n      };\n      return derive$2([\n        run$1(receive(), function (component, message) {\n          var receivingData = message;\n          if (!receivingData.universal) {\n            var channel = reflectingConfig.channel;\n            if (contains$2(receivingData.channels, channel)) {\n              update(component, receivingData.data);\n            }\n          }\n        }),\n        runOnAttached(function (comp, _se) {\n          reflectingConfig.initialData.each(function (rawData) {\n            update(comp, rawData);\n          });\n        })\n      ]);\n    };\n\n    var ActiveReflecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$3\n    });\n\n    var getState = function (component, replaceConfig, reflectState) {\n      return reflectState;\n    };\n\n    var ReflectingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getState: getState\n    });\n\n    var ReflectingSchema = [\n      required$1('channel'),\n      option('renderComponents'),\n      option('updateState'),\n      option('initialData')\n    ];\n\n    var init$3 = function () {\n      var cell = Cell(Optional.none());\n      var clear = function () {\n        return cell.set(Optional.none());\n      };\n      var readState = function () {\n        return cell.get().getOr('none');\n      };\n      return {\n        readState: readState,\n        get: cell.get,\n        set: cell.set,\n        clear: clear\n      };\n    };\n\n    var ReflectingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$3\n    });\n\n    var Reflecting = create$8({\n      fields: ReflectingSchema,\n      name: 'reflecting',\n      active: ActiveReflecting,\n      apis: ReflectingApis,\n      state: ReflectingState\n    });\n\n    var schema$7 = constant$1([\n      required$1('toggleClass'),\n      required$1('fetch'),\n      onStrictHandler('onExecute'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      schema$y(),\n      onStrictHandler('onItemExecute'),\n      option('lazySink'),\n      required$1('dom'),\n      onHandler('onOpen'),\n      field('splitDropdownBehaviours', [\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      defaulted('matchWidth', false),\n      defaulted('useMinWidth', false),\n      defaulted('eventOrder', {}),\n      option('role')\n    ].concat(sandboxFields()));\n    var arrowPart = required({\n      factory: Button,\n      schema: [required$1('dom')],\n      name: 'arrow',\n      defaults: function () {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (arrow) {\n            arrow.getSystem().getByUid(detail.uid).each(emitExecute);\n          },\n          buttonBehaviours: derive$1([Toggling.config({\n              toggleOnExecute: false,\n              toggleClass: detail.toggleClass\n            })])\n        };\n      }\n    });\n    var buttonPart = required({\n      factory: Button,\n      schema: [required$1('dom')],\n      name: 'button',\n      defaults: function () {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (btn) {\n            btn.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n              detail.onExecute(splitDropdown, btn);\n            });\n          }\n        };\n      }\n    });\n    var parts$3 = constant$1([\n      arrowPart,\n      buttonPart,\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [required$1('text')],\n        name: 'aria-descriptor'\n      }),\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return {\n            onExecute: function (tmenu, item) {\n              tmenu.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n                detail.onItemExecute(splitDropdown, tmenu, item);\n              });\n            }\n          };\n        }\n      }),\n      partType$1()\n    ]);\n\n    var factory$5 = function (detail, components, spec, externals) {\n      var _a;\n      var switchToMenu = function (sandbox) {\n        Composing.getCurrent(sandbox).each(function (current) {\n          Highlighting.highlightFirst(current);\n          Keying.focusIn(current);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, identity$1, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var openMenu = function (comp) {\n        action(comp);\n        return Optional.some(true);\n      };\n      var executeOnButton = function (comp) {\n        var button = getPartOrDie(comp, detail, 'button');\n        emitExecute(button);\n        return Optional.some(true);\n      };\n      var buttonEvents = __assign(__assign({}, derive$2([runOnAttached(function (component, _simulatedEvent) {\n          var ariaDescriptor = getPart(component, detail, 'aria-descriptor');\n          ariaDescriptor.each(function (descriptor) {\n            var descriptorId = generate$6('aria');\n            set$8(descriptor.element, 'id', descriptorId);\n            set$8(component.element, 'aria-describedby', descriptorId);\n          });\n        })])), events$a(Optional.some(action)));\n      var apis = {\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        eventOrder: __assign(__assign({}, detail.eventOrder), (_a = {}, _a[execute$5()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        events: buttonEvents,\n        behaviours: augment(detail.splitDropdownBehaviours, [\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                var arrow = getPartOrDie(hotspot, detail, 'arrow');\n                var extras = {\n                  onOpen: function () {\n                    Toggling.on(arrow);\n                    Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    Toggling.off(arrow);\n                    Toggling.off(hotspot);\n                  }\n                };\n                return makeSandbox$1(detail, hotspot, extras);\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: executeOnButton,\n            onEnter: executeOnButton,\n            onDown: openMenu\n          }),\n          Focusing.config({}),\n          Toggling.config({\n            toggleOnExecute: false,\n            aria: { mode: 'expanded' }\n          })\n        ]),\n        domModification: {\n          attributes: {\n            'role': detail.role.getOr('button'),\n            'aria-haspopup': true\n          }\n        }\n      };\n    };\n    var SplitDropdown = composite({\n      name: 'SplitDropdown',\n      configFields: schema$7(),\n      partFields: parts$3(),\n      factory: factory$5,\n      apis: {\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var getButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getToggleApi = function (component) {\n      return {\n        setActive: function (state) {\n          Toggling.set(component, state);\n        },\n        isActive: function () {\n          return Toggling.isOn(component);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getTooltipAttributes = function (tooltip, providersBackstage) {\n      return tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n    };\n    var focusButtonEvent = generate$6('focus-button');\n    var renderCommonStructure = function (icon, text, tooltip, receiver, behaviours, providersBackstage) {\n      var _d;\n      return {\n        dom: {\n          tag: 'button',\n          classes: ['tox-tbtn'].concat(text.isSome() ? ['tox-tbtn--select'] : []),\n          attributes: getTooltipAttributes(tooltip, providersBackstage)\n        },\n        components: componentRenderPipeline([\n          icon.map(function (iconName) {\n            return renderIconFromPack(iconName, providersBackstage.icons);\n          }),\n          text.map(function (text) {\n            return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n          })\n        ]),\n        eventOrder: (_d = {}, _d[mousedown()] = [\n          'focusing',\n          'alloy.base.behaviour',\n          'common-button-display-events'\n        ], _d),\n        buttonBehaviours: derive$1([\n          DisablingConfigs.toolbarButton(providersBackstage.isDisabled),\n          receivingConfig(),\n          config('common-button-display-events', [run$1(mousedown(), function (button, se) {\n              se.event.prevent();\n              emit(button, focusButtonEvent);\n            })])\n        ].concat(receiver.map(function (r) {\n          return Reflecting.config({\n            channel: r,\n            initialData: {\n              icon: icon,\n              text: text\n            },\n            renderComponents: function (data, _state) {\n              return componentRenderPipeline([\n                data.icon.map(function (iconName) {\n                  return renderIconFromPack(iconName, providersBackstage.icons);\n                }),\n                data.text.map(function (text) {\n                  return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n                })\n              ]);\n            }\n          });\n        }).toArray()).concat(behaviours.getOr([])))\n      };\n    };\n    var renderFloatingToolbarButton = function (spec, backstage, identifyButtons, attributes) {\n      var sharedBackstage = backstage.shared;\n      return FloatingToolbarButton.sketch({\n        lazySink: sharedBackstage.getSink,\n        fetch: function () {\n          return Future.nu(function (resolve) {\n            resolve(map$2(identifyButtons(spec.items), renderToolbarGroup));\n          });\n        },\n        markers: { toggledClass: 'tox-tbtn--enabled' },\n        parts: {\n          button: renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.none(), Optional.none(), sharedBackstage.providers),\n          toolbar: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: attributes\n            }\n          }\n        }\n      });\n    };\n    var renderCommonToolbarButton = function (spec, specialisation, providersBackstage) {\n      var editorOffCell = Cell(noop);\n      var structure = renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.none(), Optional.none(), providersBackstage);\n      return Button.sketch({\n        dom: structure.dom,\n        components: structure.components,\n        eventOrder: toolbarButtonEventOrder,\n        buttonBehaviours: derive$1([\n          config('toolbar-button-events', [\n            onToolbarButtonExecute({\n              onAction: spec.onAction,\n              getApi: specialisation.getApi\n            }),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          DisablingConfigs.toolbarButton(function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }),\n          receivingConfig()\n        ].concat(specialisation.toolbarButtonBehaviours))\n      });\n    };\n    var renderToolbarButton = function (spec, providersBackstage) {\n      return renderToolbarButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [].concat(bonusEvents.length > 0 ? [config('toolbarButtonWith', bonusEvents)] : []),\n        getApi: getButtonApi,\n        onSetup: spec.onSetup\n      }, providersBackstage);\n    };\n    var renderToolbarToggleButton = function (spec, providersBackstage) {\n      return renderToolbarToggleButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarToggleButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return deepMerge(renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [\n          Replacing.config({}),\n          Toggling.config({\n            toggleClass: 'tox-tbtn--enabled',\n            aria: { mode: 'pressed' },\n            toggleOnExecute: false\n          })\n        ].concat(bonusEvents.length > 0 ? [config('toolbarToggleButtonWith', bonusEvents)] : []),\n        getApi: getToggleApi,\n        onSetup: spec.onSetup\n      }, providersBackstage));\n    };\n    var fetchChoices = function (getApi, spec, providersBackstage) {\n      return function (comp) {\n        return Future.nu(function (callback) {\n          return spec.fetch(callback);\n        }).map(function (items) {\n          return Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$6('menu-value'), items, function (value) {\n            spec.onItemAction(getApi(comp), value);\n          }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, spec.select.getOr(never), providersBackstage), {\n            movement: deriveMenuMovement(spec.columns, spec.presets),\n            menuBehaviours: SimpleBehaviours.unnamedEvents(spec.columns !== 'auto' ? [] : [runOnAttached(function (comp, _se) {\n                detectSize(comp, 4, classForPreset(spec.presets)).each(function (_d) {\n                  var numRows = _d.numRows, numColumns = _d.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              })])\n          })));\n        });\n      };\n    };\n    var renderSplitButton = function (spec, sharedBackstage) {\n      var _d;\n      var displayChannel = generate$6('channel-update-split-dropdown-display');\n      var getApi = function (comp) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(comp);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(comp, state);\n          },\n          setIconFill: function (id, value) {\n            descendant(comp.element, 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$8(underlinePath, 'fill', value);\n            });\n          },\n          setIconStroke: function (id, value) {\n            descendant(comp.element, 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$8(underlinePath, 'stroke', value);\n            });\n          },\n          setActive: function (state) {\n            set$8(comp.element, 'aria-pressed', state);\n            descendant(comp.element, 'span').each(function (button) {\n              comp.getSystem().getByDom(button).each(function (buttonComp) {\n                return Toggling.set(buttonComp, state);\n              });\n            });\n          },\n          isActive: function () {\n            return descendant(comp.element, 'span').exists(function (button) {\n              return comp.getSystem().getByDom(button).exists(Toggling.isOn);\n            });\n          }\n        };\n      };\n      var editorOffCell = Cell(noop);\n      var specialisation = {\n        getApi: getApi,\n        onSetup: spec.onSetup\n      };\n      return SplitDropdown.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-split-button'],\n          attributes: __assign({ 'aria-pressed': false }, getTooltipAttributes(spec.tooltip, sharedBackstage.providers))\n        },\n        onExecute: function (button) {\n          spec.onAction(getApi(button));\n        },\n        onItemExecute: function (_a, _b, _c) {\n        },\n        splitDropdownBehaviours: derive$1([\n          DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n          receivingConfig(),\n          config('split-dropdown-events', [\n            run$1(focusButtonEvent, Focusing.focus),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          Unselecting.config({})\n        ]),\n        eventOrder: (_d = {}, _d[attachedToDom()] = [\n          'alloy.base.behaviour',\n          'split-dropdown-events'\n        ], _d),\n        toggleClass: 'tox-tbtn--enabled',\n        lazySink: sharedBackstage.getSink,\n        fetch: fetchChoices(getApi, spec, sharedBackstage.providers),\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        components: [\n          SplitDropdown.parts.button(renderCommonStructure(spec.icon, spec.text, Optional.none(), Optional.some(displayChannel), Optional.some([Toggling.config({\n              toggleClass: 'tox-tbtn--enabled',\n              toggleOnExecute: false\n            })]), sharedBackstage.providers)),\n          SplitDropdown.parts.arrow({\n            dom: {\n              tag: 'button',\n              classes: [\n                'tox-tbtn',\n                'tox-split-button__chevron'\n              ],\n              innerHtml: get$1('chevron-down', sharedBackstage.providers.icons)\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n              receivingConfig(),\n              addFocusableBehaviour()\n            ])\n          }),\n          SplitDropdown.parts['aria-descriptor']({ text: sharedBackstage.providers.translate('To open the popup, press Shift+Enter') })\n        ]\n      });\n    };\n\n    var defaultToolbar = [\n      {\n        name: 'history',\n        items: [\n          'undo',\n          'redo'\n        ]\n      },\n      {\n        name: 'styles',\n        items: ['styleselect']\n      },\n      {\n        name: 'formatting',\n        items: [\n          'bold',\n          'italic'\n        ]\n      },\n      {\n        name: 'alignment',\n        items: [\n          'alignleft',\n          'aligncenter',\n          'alignright',\n          'alignjustify'\n        ]\n      },\n      {\n        name: 'indentation',\n        items: [\n          'outdent',\n          'indent'\n        ]\n      },\n      {\n        name: 'permanent pen',\n        items: ['permanentpen']\n      },\n      {\n        name: 'comments',\n        items: ['addcomment']\n      }\n    ];\n    var renderFromBridge = function (bridgeBuilder, render) {\n      return function (spec, extras, editor) {\n        var internal = bridgeBuilder(spec).mapError(function (errInfo) {\n          return formatError(errInfo);\n        }).getOrDie();\n        return render(internal, extras, editor);\n      };\n    };\n    var types = {\n      button: renderFromBridge(createToolbarButton, function (s, extras) {\n        return renderToolbarButton(s, extras.backstage.shared.providers);\n      }),\n      togglebutton: renderFromBridge(createToggleButton, function (s, extras) {\n        return renderToolbarToggleButton(s, extras.backstage.shared.providers);\n      }),\n      menubutton: renderFromBridge(createMenuButton, function (s, extras) {\n        return renderMenuButton(s, 'tox-tbtn', extras.backstage, Optional.none());\n      }),\n      splitbutton: renderFromBridge(createSplitButton, function (s, extras) {\n        return renderSplitButton(s, extras.backstage.shared);\n      }),\n      grouptoolbarbutton: renderFromBridge(createGroupToolbarButton, function (s, extras, editor) {\n        var _a;\n        var buttons = editor.ui.registry.getAll().buttons;\n        var identify = function (toolbar) {\n          return identifyButtons(editor, {\n            buttons: buttons,\n            toolbar: toolbar,\n            allowToolbarGroups: false\n          }, extras, Optional.none());\n        };\n        var attributes = (_a = {}, _a[Attribute] = extras.backstage.shared.header.isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop, _a);\n        switch (getToolbarMode(editor)) {\n        case ToolbarMode.floating:\n          return renderFloatingToolbarButton(s, extras.backstage, identify, attributes);\n        default:\n          throw new Error('Toolbar groups are only supported when using floating toolbar mode');\n        }\n      }),\n      styleSelectButton: function (editor, extras) {\n        return createStyleSelect(editor, extras.backstage);\n      },\n      fontsizeSelectButton: function (editor, extras) {\n        return createFontsizeSelect(editor, extras.backstage);\n      },\n      fontSelectButton: function (editor, extras) {\n        return createFontSelect(editor, extras.backstage);\n      },\n      formatButton: function (editor, extras) {\n        return createFormatSelect(editor, extras.backstage);\n      },\n      alignMenuButton: function (editor, extras) {\n        return createAlignSelect(editor, extras.backstage);\n      }\n    };\n    var extractFrom = function (spec, extras, editor) {\n      return get$e(types, spec.type).fold(function () {\n        console.error('skipping button defined by', spec);\n        return Optional.none();\n      }, function (render) {\n        return Optional.some(render(spec, extras, editor));\n      });\n    };\n    var bespokeButtons = {\n      styleselect: types.styleSelectButton,\n      fontsizeselect: types.fontsizeSelectButton,\n      fontselect: types.fontSelectButton,\n      formatselect: types.formatButton,\n      align: types.alignMenuButton\n    };\n    var removeUnusedDefaults = function (buttons) {\n      var filteredItemGroups = map$2(defaultToolbar, function (group) {\n        var items = filter$2(group.items, function (subItem) {\n          return has$2(buttons, subItem) || has$2(bespokeButtons, subItem);\n        });\n        return {\n          name: group.name,\n          items: items\n        };\n      });\n      return filter$2(filteredItemGroups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n    var convertStringToolbar = function (strToolbar) {\n      var groupsStrings = strToolbar.split('|');\n      return map$2(groupsStrings, function (g) {\n        return { items: g.trim().split(' ') };\n      });\n    };\n    var isToolbarGroupSettingArray = function (toolbar) {\n      return isArrayOf(toolbar, function (t) {\n        return has$2(t, 'name') && has$2(t, 'items');\n      });\n    };\n    var createToolbar = function (toolbarConfig) {\n      var toolbar = toolbarConfig.toolbar;\n      var buttons = toolbarConfig.buttons;\n      if (toolbar === false) {\n        return [];\n      } else if (toolbar === undefined || toolbar === true) {\n        return removeUnusedDefaults(buttons);\n      } else if (isString(toolbar)) {\n        return convertStringToolbar(toolbar);\n      } else if (isToolbarGroupSettingArray(toolbar)) {\n        return toolbar;\n      } else {\n        console.error('Toolbar type should be string, string[], boolean or ToolbarGroup[]');\n        return [];\n      }\n    };\n    var lookupButton = function (editor, buttons, toolbarItem, allowToolbarGroups, extras, prefixes) {\n      return get$e(buttons, toolbarItem.toLowerCase()).orThunk(function () {\n        return prefixes.bind(function (ps) {\n          return findMap(ps, function (prefix) {\n            return get$e(buttons, prefix + toolbarItem.toLowerCase());\n          });\n        });\n      }).fold(function () {\n        return get$e(bespokeButtons, toolbarItem.toLowerCase()).map(function (r) {\n          return r(editor, extras);\n        }).orThunk(function () {\n          return Optional.none();\n        });\n      }, function (spec) {\n        if (spec.type === 'grouptoolbarbutton' && !allowToolbarGroups) {\n          console.warn('Ignoring the \\'' + toolbarItem + '\\' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.');\n          return Optional.none();\n        } else {\n          return extractFrom(spec, extras, editor);\n        }\n      });\n    };\n    var identifyButtons = function (editor, toolbarConfig, extras, prefixes) {\n      var toolbarGroups = createToolbar(toolbarConfig);\n      var groups = map$2(toolbarGroups, function (group) {\n        var items = bind$3(group.items, function (toolbarItem) {\n          return toolbarItem.trim().length === 0 ? [] : lookupButton(editor, toolbarConfig.buttons, toolbarItem, toolbarConfig.allowToolbarGroups, extras, prefixes).toArray();\n        });\n        return {\n          title: Optional.from(editor.translate(group.name)),\n          items: items\n        };\n      });\n      return filter$2(groups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n\n    var setToolbar = function (editor, uiComponents, rawUiConfig, backstage) {\n      var comp = uiComponents.outerContainer;\n      var toolbarConfig = rawUiConfig.toolbar;\n      var toolbarButtonsConfig = rawUiConfig.buttons;\n      if (isArrayOf(toolbarConfig, isString)) {\n        var toolbars = toolbarConfig.map(function (t) {\n          var config = {\n            toolbar: t,\n            buttons: toolbarButtonsConfig,\n            allowToolbarGroups: rawUiConfig.allowToolbarGroups\n          };\n          return identifyButtons(editor, config, { backstage: backstage }, Optional.none());\n        });\n        OuterContainer.setToolbars(comp, toolbars);\n      } else {\n        OuterContainer.setToolbar(comp, identifyButtons(editor, rawUiConfig, { backstage: backstage }, Optional.none()));\n      }\n    };\n\n    var detection = detect$1();\n    var isiOS12 = detection.os.isiOS() && detection.os.version.major <= 12;\n    var setupEvents$1 = function (editor, uiComponents) {\n      var dom = editor.dom;\n      var contentWindow = editor.getWin();\n      var initialDocEle = editor.getDoc().documentElement;\n      var lastWindowDimensions = Cell(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n      var lastDocumentDimensions = Cell(SugarPosition(initialDocEle.offsetWidth, initialDocEle.offsetHeight));\n      var resizeWindow = function () {\n        var outer = lastWindowDimensions.get();\n        if (outer.left !== contentWindow.innerWidth || outer.top !== contentWindow.innerHeight) {\n          lastWindowDimensions.set(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n          fireResizeContent(editor);\n        }\n      };\n      var resizeDocument = function () {\n        var docEle = editor.getDoc().documentElement;\n        var inner = lastDocumentDimensions.get();\n        if (inner.left !== docEle.offsetWidth || inner.top !== docEle.offsetHeight) {\n          lastDocumentDimensions.set(SugarPosition(docEle.offsetWidth, docEle.offsetHeight));\n          fireResizeContent(editor);\n        }\n      };\n      var scroll = function (e) {\n        return fireScrollContent(editor, e);\n      };\n      dom.bind(contentWindow, 'resize', resizeWindow);\n      dom.bind(contentWindow, 'scroll', scroll);\n      var elementLoad = capture(SugarElement.fromDom(editor.getBody()), 'load', resizeDocument);\n      var mothership = uiComponents.uiMothership.element;\n      editor.on('hide', function () {\n        set$7(mothership, 'display', 'none');\n      });\n      editor.on('show', function () {\n        remove$6(mothership, 'display');\n      });\n      editor.on('NodeChange', resizeDocument);\n      editor.on('remove', function () {\n        elementLoad.unbind();\n        dom.unbind(contentWindow, 'resize', resizeWindow);\n        dom.unbind(contentWindow, 'scroll', scroll);\n        contentWindow = null;\n      });\n    };\n    var render$1 = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var lastToolbarWidth = Cell(0);\n      var outerContainer = uiComponents.outerContainer;\n      iframe(editor);\n      var eTargetNode = SugarElement.fromDom(args.targetNode);\n      var uiRoot = getContentContainer(getRootNode(eTargetNode));\n      attachSystemAfter(eTargetNode, uiComponents.mothership);\n      attachSystem(uiRoot, uiComponents.uiMothership);\n      editor.on('PostRender', function () {\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        lastToolbarWidth.set(editor.getWin().innerWidth);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        OuterContainer.setSidebar(outerContainer, rawUiConfig.sidebar);\n        setupEvents$1(editor, uiComponents);\n      });\n      var socket = OuterContainer.getSocket(outerContainer).getOrDie('Could not find expected socket element');\n      if (isiOS12) {\n        setAll(socket.element, {\n          'overflow': 'scroll',\n          '-webkit-overflow-scrolling': 'touch'\n        });\n        var limit = first(function () {\n          editor.fire('ScrollContent');\n        }, 20);\n        var unbinder = bind(socket.element, 'scroll', limit.throttle);\n        editor.on('remove', unbinder.unbind);\n      }\n      setupReadonlyModeSwitch(editor, uiComponents);\n      editor.addCommand('ToggleSidebar', function (_ui, value) {\n        OuterContainer.toggleSidebar(outerContainer, value);\n        editor.fire('ToggleSidebar');\n      });\n      editor.addQueryValueHandler('ToggleSidebar', function () {\n        return OuterContainer.whichSidebar(outerContainer);\n      });\n      var toolbarMode = getToolbarMode(editor);\n      var refreshDrawer = function () {\n        OuterContainer.refreshToolbar(uiComponents.outerContainer);\n      };\n      if (toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating) {\n        editor.on('ResizeWindow ResizeEditor ResizeContent', function () {\n          var width = editor.getWin().innerWidth;\n          if (width !== lastToolbarWidth.get()) {\n            refreshDrawer();\n            lastToolbarWidth.set(width);\n          }\n        });\n      }\n      var api = {\n        enable: function () {\n          broadcastReadonly(uiComponents, false);\n        },\n        disable: function () {\n          broadcastReadonly(uiComponents, true);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(outerContainer);\n        }\n      };\n      return {\n        iframeContainer: socket.element.dom,\n        editorContainer: outerContainer.element.dom,\n        api: api\n      };\n    };\n\n    var Iframe = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render$1\n    });\n\n    var parseToInt = function (val) {\n      var re = /^[0-9\\.]+(|px)$/i;\n      if (re.test('' + val)) {\n        return Optional.some(parseInt('' + val, 10));\n      }\n      return Optional.none();\n    };\n    var numToPx = function (val) {\n      return isNumber(val) ? val + 'px' : val;\n    };\n    var calcCappedSize = function (size, minSize, maxSize) {\n      var minOverride = minSize.filter(function (min) {\n        return size < min;\n      });\n      var maxOverride = maxSize.filter(function (max) {\n        return size > max;\n      });\n      return minOverride.or(maxOverride).getOr(size);\n    };\n\n    var getHeight = function (editor) {\n      var baseHeight = getHeightSetting(editor);\n      var minHeight = getMinHeightSetting(editor);\n      var maxHeight = getMaxHeightSetting(editor);\n      return parseToInt(baseHeight).map(function (height) {\n        return calcCappedSize(height, minHeight, maxHeight);\n      });\n    };\n    var getHeightWithFallback = function (editor) {\n      var height = getHeight(editor);\n      return height.getOr(getHeightSetting(editor));\n    };\n    var getWidth = function (editor) {\n      var baseWidth = getWidthSetting(editor);\n      var minWidth = getMinWidthSetting(editor);\n      var maxWidth = getMaxWidthSetting(editor);\n      return parseToInt(baseWidth).map(function (width) {\n        return calcCappedSize(width, minWidth, maxWidth);\n      });\n    };\n    var getWidthWithFallback = function (editor) {\n      var width = getWidth(editor);\n      return width.getOr(getWidthSetting(editor));\n    };\n\n    var InlineHeader = function (editor, targetElm, uiComponents, backstage, floatContainer) {\n      var uiMothership = uiComponents.uiMothership, outerContainer = uiComponents.outerContainer;\n      var DOM = global$b.DOM;\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var isSticky = isStickyToolbar(editor);\n      var editorMaxWidthOpt = getMaxWidthSetting(editor).or(getWidth(editor));\n      var headerBackstage = backstage.shared.header;\n      var isPositionedAtTop = headerBackstage.isPositionedAtTop;\n      var toolbarMode = getToolbarMode(editor);\n      var isSplitToolbar = toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating;\n      var visible = Cell(false);\n      var isVisible = function () {\n        return visible.get() && !editor.removed;\n      };\n      var calcToolbarOffset = function (toolbar) {\n        return isSplitToolbar ? toolbar.fold(constant$1(0), function (tbar) {\n          return tbar.components().length > 1 ? get$b(tbar.components()[1].element) : 0;\n        }) : 0;\n      };\n      var calcMode = function (container) {\n        switch (getToolbarLocation(editor)) {\n        case ToolbarLocation.auto:\n          var toolbar_1 = OuterContainer.getToolbar(outerContainer);\n          var offset = calcToolbarOffset(toolbar_1);\n          var toolbarHeight = get$b(container.element) - offset;\n          var targetBounds = box$1(targetElm);\n          var roomAtTop = targetBounds.y > toolbarHeight;\n          if (roomAtTop) {\n            return 'top';\n          } else {\n            var doc = documentElement(targetElm);\n            var docHeight = Math.max(doc.dom.scrollHeight, get$b(doc));\n            var roomAtBottom = targetBounds.bottom < docHeight - toolbarHeight;\n            if (roomAtBottom) {\n              return 'bottom';\n            } else {\n              var winBounds = win();\n              var isRoomAtBottomViewport = winBounds.bottom < targetBounds.bottom - toolbarHeight;\n              return isRoomAtBottomViewport ? 'bottom' : 'top';\n            }\n          }\n        case ToolbarLocation.bottom:\n          return 'bottom';\n        case ToolbarLocation.top:\n        default:\n          return 'top';\n        }\n      };\n      var setupMode = function (mode) {\n        var container = floatContainer.get();\n        Docking.setModes(container, [mode]);\n        headerBackstage.setDockingMode(mode);\n        var verticalDir = isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop;\n        set$8(container.element, Attribute, verticalDir);\n      };\n      var updateChromeWidth = function () {\n        var maxWidth = editorMaxWidthOpt.getOrThunk(function () {\n          var bodyMargin = parseToInt(get$c(body(), 'margin-left')).getOr(0);\n          return get$a(body()) - absolute$3(targetElm).left + bodyMargin;\n        });\n        set$7(floatContainer.get().element, 'max-width', maxWidth + 'px');\n      };\n      var updateChromePosition = function () {\n        var toolbar = OuterContainer.getToolbar(outerContainer);\n        var offset = calcToolbarOffset(toolbar);\n        var targetBounds = box$1(targetElm);\n        var top = isPositionedAtTop() ? Math.max(targetBounds.y - get$b(floatContainer.get().element) + offset, 0) : targetBounds.bottom;\n        setAll(outerContainer.element, {\n          position: 'absolute',\n          top: Math.round(top) + 'px',\n          left: Math.round(targetBounds.x) + 'px'\n        });\n      };\n      var repositionPopups$1 = function () {\n        uiMothership.broadcastOn([repositionPopups()], {});\n      };\n      var updateChromeUi = function (resetDocking) {\n        if (resetDocking === void 0) {\n          resetDocking = false;\n        }\n        if (!isVisible()) {\n          return;\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromeWidth();\n        }\n        if (isSplitToolbar) {\n          OuterContainer.refreshToolbar(outerContainer);\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromePosition();\n        }\n        if (isSticky) {\n          var floatContainerComp = floatContainer.get();\n          resetDocking ? Docking.reset(floatContainerComp) : Docking.refresh(floatContainerComp);\n        }\n        repositionPopups$1();\n      };\n      var updateMode = function (updateUi) {\n        if (updateUi === void 0) {\n          updateUi = true;\n        }\n        if (useFixedToolbarContainer || !isSticky || !isVisible()) {\n          return;\n        }\n        var currentMode = headerBackstage.getDockingMode();\n        var newMode = calcMode(floatContainer.get());\n        if (newMode !== currentMode) {\n          setupMode(newMode);\n          if (updateUi) {\n            updateChromeUi(true);\n          }\n        }\n      };\n      var show = function () {\n        visible.set(true);\n        set$7(outerContainer.element, 'display', 'flex');\n        DOM.addClass(editor.getBody(), 'mce-edit-focus');\n        remove$6(uiMothership.element, 'display');\n        updateMode(false);\n        updateChromeUi();\n      };\n      var hide = function () {\n        visible.set(false);\n        if (uiComponents.outerContainer) {\n          set$7(outerContainer.element, 'display', 'none');\n          DOM.removeClass(editor.getBody(), 'mce-edit-focus');\n        }\n        set$7(uiMothership.element, 'display', 'none');\n      };\n      return {\n        isVisible: isVisible,\n        isPositionedAtTop: isPositionedAtTop,\n        show: show,\n        hide: hide,\n        update: updateChromeUi,\n        updateMode: updateMode,\n        repositionPopups: repositionPopups$1\n      };\n    };\n\n    var getTargetPosAndBounds = function (targetElm, isToolbarTop) {\n      var bounds = box$1(targetElm);\n      return {\n        pos: isToolbarTop ? bounds.y : bounds.bottom,\n        bounds: bounds\n      };\n    };\n    var setupEvents = function (editor, targetElm, ui, toolbarPersist) {\n      var prevPosAndBounds = Cell(getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()));\n      var resizeContent = function (e) {\n        var _a = getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()), pos = _a.pos, bounds = _a.bounds;\n        var _b = prevPosAndBounds.get(), prevPos = _b.pos, prevBounds = _b.bounds;\n        var hasResized = bounds.height !== prevBounds.height || bounds.width !== prevBounds.width;\n        prevPosAndBounds.set({\n          pos: pos,\n          bounds: bounds\n        });\n        if (hasResized) {\n          fireResizeContent(editor, e);\n        }\n        if (ui.isVisible()) {\n          if (prevPos !== pos) {\n            ui.update(true);\n          } else if (hasResized) {\n            ui.updateMode();\n            ui.repositionPopups();\n          }\n        }\n      };\n      if (!toolbarPersist) {\n        editor.on('activate', ui.show);\n        editor.on('deactivate', ui.hide);\n      }\n      editor.on('SkinLoaded ResizeWindow', function () {\n        return ui.update(true);\n      });\n      editor.on('NodeChange keydown', function (e) {\n        global$f.requestAnimationFrame(function () {\n          return resizeContent(e);\n        });\n      });\n      editor.on('ScrollWindow', function () {\n        return ui.updateMode();\n      });\n      var elementLoad = unbindable();\n      elementLoad.set(capture(SugarElement.fromDom(editor.getBody()), 'load', resizeContent));\n      editor.on('remove', function () {\n        elementLoad.clear();\n      });\n    };\n    var render = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var mothership = uiComponents.mothership, uiMothership = uiComponents.uiMothership, outerContainer = uiComponents.outerContainer;\n      var floatContainer = Cell(null);\n      var targetElm = SugarElement.fromDom(args.targetNode);\n      var ui = InlineHeader(editor, targetElm, uiComponents, backstage, floatContainer);\n      var toolbarPersist = isToolbarPersist(editor);\n      inline(editor);\n      var render = function () {\n        if (floatContainer.get()) {\n          ui.show();\n          return;\n        }\n        floatContainer.set(OuterContainer.getHeader(outerContainer).getOrDie());\n        var uiContainer = getUiContainer(editor);\n        attachSystem(uiContainer, mothership);\n        attachSystem(uiContainer, uiMothership);\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        ui.show();\n        setupEvents(editor, targetElm, ui, toolbarPersist);\n        editor.nodeChanged();\n      };\n      editor.on('show', render);\n      editor.on('hide', ui.hide);\n      if (!toolbarPersist) {\n        editor.on('focus', render);\n        editor.on('blur', ui.hide);\n      }\n      editor.on('init', function () {\n        if (editor.hasFocus() || toolbarPersist) {\n          render();\n        }\n      });\n      setupReadonlyModeSwitch(editor, uiComponents);\n      var api = {\n        show: function () {\n          ui.show();\n        },\n        hide: function () {\n          ui.hide();\n        },\n        enable: function () {\n          broadcastReadonly(uiComponents, false);\n        },\n        disable: function () {\n          broadcastReadonly(uiComponents, true);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(outerContainer);\n        }\n      };\n      return {\n        editorContainer: outerContainer.element.dom,\n        api: api\n      };\n    };\n\n    var Inline = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render\n    });\n\n    var showContextToolbarEvent = 'contexttoolbar-show';\n    var hideContextToolbarEvent = 'contexttoolbar-hide';\n\n    var getFormApi = function (input) {\n      return {\n        hide: function () {\n          return emit(input, sandboxClose());\n        },\n        getValue: function () {\n          return Representing.getValue(input);\n        }\n      };\n    };\n    var runOnExecute = function (memInput, original) {\n      return run$1(internalToolbarButtonExecute, function (comp, se) {\n        var input = memInput.get(comp);\n        var formApi = getFormApi(input);\n        original.onAction(formApi, se.event.buttonApi);\n      });\n    };\n    var renderContextButton = function (memInput, button, extras) {\n      var _a = button.original; _a.primary; var rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToolbarButton(__assign(__assign({}, rest), {\n        type: 'button',\n        onAction: noop\n      })));\n      return renderToolbarButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute(memInput, button)]);\n    };\n    var renderContextToggleButton = function (memInput, button, extras) {\n      var _a = button.original; _a.primary; var rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToggleButton(__assign(__assign({}, rest), {\n        type: 'togglebutton',\n        onAction: noop\n      })));\n      return renderToolbarToggleButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute(memInput, button)]);\n    };\n    var generateOne = function (memInput, button, providersBackstage) {\n      var extras = { backstage: { shared: { providers: providersBackstage } } };\n      if (button.type === 'contextformtogglebutton') {\n        return renderContextToggleButton(memInput, button, extras);\n      } else {\n        return renderContextButton(memInput, button, extras);\n      }\n    };\n    var generate = function (memInput, buttons, providersBackstage) {\n      var mementos = map$2(buttons, function (button) {\n        return record(generateOne(memInput, button, providersBackstage));\n      });\n      var asSpecs = function () {\n        return map$2(mementos, function (mem) {\n          return mem.asSpec();\n        });\n      };\n      var findPrimary = function (compInSystem) {\n        return findMap(buttons, function (button, i) {\n          if (button.primary) {\n            return Optional.from(mementos[i]).bind(function (mem) {\n              return mem.getOpt(compInSystem);\n            }).filter(not(Disabling.isDisabled));\n          } else {\n            return Optional.none();\n          }\n        });\n      };\n      return {\n        asSpecs: asSpecs,\n        findPrimary: findPrimary\n      };\n    };\n\n    var buildInitGroups = function (ctx, providers) {\n      var inputAttributes = ctx.label.fold(function () {\n        return {};\n      }, function (label) {\n        return { 'aria-label': label };\n      });\n      var memInput = record(Input.sketch({\n        inputClasses: [\n          'tox-toolbar-textfield',\n          'tox-toolbar-nav-js'\n        ],\n        data: ctx.initValue(),\n        inputAttributes: inputAttributes,\n        selectOnFocus: true,\n        inputBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onEnter: function (input) {\n              return commands.findPrimary(input).map(function (primary) {\n                emitExecute(primary);\n                return true;\n              });\n            },\n            onLeft: function (comp, se) {\n              se.cut();\n              return Optional.none();\n            },\n            onRight: function (comp, se) {\n              se.cut();\n              return Optional.none();\n            }\n          })])\n      }));\n      var commands = generate(memInput, ctx.commands, providers);\n      return [\n        {\n          title: Optional.none(),\n          items: [memInput.asSpec()]\n        },\n        {\n          title: Optional.none(),\n          items: commands.asSpecs()\n        }\n      ];\n    };\n    var renderContextForm = function (toolbarType, ctx, providers) {\n      return renderToolbar({\n        type: toolbarType,\n        uid: generate$6('context-toolbar'),\n        initGroups: buildInitGroups(ctx, providers),\n        onEscape: Optional.none,\n        cyclicKeying: true,\n        providers: providers\n      });\n    };\n    var ContextForm = {\n      renderContextForm: renderContextForm,\n      buildInitGroups: buildInitGroups\n    };\n\n    var isVerticalOverlap = function (a, b, threshold) {\n      if (threshold === void 0) {\n        threshold = 0.01;\n      }\n      return b.bottom - a.y >= threshold && a.bottom - b.y >= threshold;\n    };\n    var getRangeRect = function (rng) {\n      var rect = rng.getBoundingClientRect();\n      if (rect.height <= 0 && rect.width <= 0) {\n        var leaf$1 = leaf(SugarElement.fromDom(rng.startContainer), rng.startOffset).element;\n        var elm = isText$1(leaf$1) ? parent(leaf$1) : Optional.some(leaf$1);\n        return elm.filter(isElement$2).map(function (e) {\n          return e.dom.getBoundingClientRect();\n        }).getOr(rect);\n      } else {\n        return rect;\n      }\n    };\n    var getSelectionBounds = function (editor) {\n      var rng = editor.selection.getRng();\n      var rect = getRangeRect(rng);\n      if (editor.inline) {\n        var scroll_1 = get$9();\n        return bounds(scroll_1.left + rect.left, scroll_1.top + rect.top, rect.width, rect.height);\n      } else {\n        var bodyPos = absolute$2(SugarElement.fromDom(editor.getBody()));\n        return bounds(bodyPos.x + rect.left, bodyPos.y + rect.top, rect.width, rect.height);\n      }\n    };\n    var getAnchorElementBounds = function (editor, lastElement) {\n      return lastElement.filter(inBody).map(absolute$2).getOrThunk(function () {\n        return getSelectionBounds(editor);\n      });\n    };\n    var getHorizontalBounds = function (contentAreaBox, viewportBounds, margin) {\n      var x = Math.max(contentAreaBox.x + margin, viewportBounds.x);\n      var right = Math.min(contentAreaBox.right - margin, viewportBounds.right);\n      return {\n        x: x,\n        width: right - x\n      };\n    };\n    var getVerticalBounds = function (editor, contentAreaBox, viewportBounds, isToolbarLocationTop, toolbarType, margin) {\n      var container = SugarElement.fromDom(editor.getContainer());\n      var header = descendant(container, '.tox-editor-header').getOr(container);\n      var headerBox = box$1(header);\n      var isToolbarBelowContentArea = headerBox.y >= contentAreaBox.bottom;\n      var isToolbarAbove = isToolbarLocationTop && !isToolbarBelowContentArea;\n      if (editor.inline && isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom + margin, viewportBounds.y),\n          bottom: viewportBounds.bottom\n        };\n      }\n      if (editor.inline && !isToolbarAbove) {\n        return {\n          y: viewportBounds.y,\n          bottom: Math.min(headerBox.y - margin, viewportBounds.bottom)\n        };\n      }\n      var containerBounds = toolbarType === 'line' ? box$1(container) : contentAreaBox;\n      if (isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom + margin, viewportBounds.y),\n          bottom: Math.min(containerBounds.bottom - margin, viewportBounds.bottom)\n        };\n      }\n      return {\n        y: Math.max(containerBounds.y + margin, viewportBounds.y),\n        bottom: Math.min(headerBox.y - margin, viewportBounds.bottom)\n      };\n    };\n    var getContextToolbarBounds = function (editor, sharedBackstage, toolbarType, margin) {\n      if (margin === void 0) {\n        margin = 0;\n      }\n      var viewportBounds = getBounds$3(window);\n      var contentAreaBox = box$1(SugarElement.fromDom(editor.getContentAreaContainer()));\n      var toolbarOrMenubarEnabled = isMenubarEnabled(editor) || isToolbarEnabled(editor) || isMultipleToolbars(editor);\n      var _a = getHorizontalBounds(contentAreaBox, viewportBounds, margin), x = _a.x, width = _a.width;\n      if (editor.inline && !toolbarOrMenubarEnabled) {\n        return bounds(x, viewportBounds.y, width, viewportBounds.height);\n      } else {\n        var isToolbarTop = sharedBackstage.header.isPositionedAtTop();\n        var _b = getVerticalBounds(editor, contentAreaBox, viewportBounds, isToolbarTop, toolbarType, margin), y = _b.y, bottom = _b.bottom;\n        return bounds(x, y, width, bottom - y);\n      }\n    };\n\n    var bubbleSize$1 = 12;\n    var bubbleAlignments$1 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top'],\n      inset: ['tox-pop--inset']\n    };\n    var anchorOverrides = {\n      maxHeightFunction: expandable$1(),\n      maxWidthFunction: expandable()\n    };\n    var isEntireElementSelected = function (editor, elem) {\n      var rng = editor.selection.getRng();\n      var leaf$1 = leaf(SugarElement.fromDom(rng.startContainer), rng.startOffset);\n      return rng.startContainer === rng.endContainer && rng.startOffset === rng.endOffset - 1 && eq(leaf$1.element, elem);\n    };\n    var preservePosition = function (elem, position, f) {\n      var currentPosition = getRaw(elem, 'position');\n      set$7(elem, 'position', position);\n      var result = f(elem);\n      currentPosition.each(function (pos) {\n        return set$7(elem, 'position', pos);\n      });\n      return result;\n    };\n    var shouldUseInsetLayouts = function (position) {\n      return position === 'node';\n    };\n    var determineInsetLayout = function (editor, contextbar, elem, data, bounds) {\n      var selectionBounds = getSelectionBounds(editor);\n      var isSameAnchorElement = data.lastElement().exists(function (prev) {\n        return eq(elem, prev);\n      });\n      if (isEntireElementSelected(editor, elem)) {\n        return isSameAnchorElement ? preserve : north;\n      } else if (isSameAnchorElement) {\n        return preservePosition(contextbar, data.getMode(), function () {\n          var isOverlapping = isVerticalOverlap(selectionBounds, box$1(contextbar));\n          return isOverlapping && !data.isReposition() ? flip$2 : preserve;\n        });\n      } else {\n        var yBounds = data.getMode() === 'fixed' ? bounds.y + get$9().top : bounds.y;\n        var contextbarHeight = get$b(contextbar) + bubbleSize$1;\n        return yBounds + contextbarHeight <= selectionBounds.y ? north : south;\n      }\n    };\n    var getAnchorSpec$2 = function (editor, mobile, data, position) {\n      var smartInsetLayout = function (elem) {\n        return function (anchor, element, bubbles, placee, bounds) {\n          var layout = determineInsetLayout(editor, placee, elem, data, bounds);\n          var newAnchor = __assign(__assign({}, anchor), {\n            y: bounds.y,\n            height: bounds.height\n          });\n          return __assign(__assign({}, layout(newAnchor, element, bubbles, placee, bounds)), { alwaysFit: true });\n        };\n      };\n      var getInsetLayouts = function (elem) {\n        return shouldUseInsetLayouts(position) ? [smartInsetLayout(elem)] : [];\n      };\n      var desktopAnchorSpecLayouts = {\n        onLtr: function (elem) {\n          return [\n            north$2,\n            south$2,\n            northeast$2,\n            southeast$2,\n            northwest$2,\n            southwest$2\n          ].concat(getInsetLayouts(elem));\n        },\n        onRtl: function (elem) {\n          return [\n            north$2,\n            south$2,\n            northwest$2,\n            southwest$2,\n            northeast$2,\n            southeast$2\n          ].concat(getInsetLayouts(elem));\n        }\n      };\n      var mobileAnchorSpecLayouts = {\n        onLtr: function (elem) {\n          return [\n            south$2,\n            southeast$2,\n            southwest$2,\n            northeast$2,\n            northwest$2,\n            north$2\n          ].concat(getInsetLayouts(elem));\n        },\n        onRtl: function (elem) {\n          return [\n            south$2,\n            southwest$2,\n            southeast$2,\n            northwest$2,\n            northeast$2,\n            north$2\n          ].concat(getInsetLayouts(elem));\n        }\n      };\n      return mobile ? mobileAnchorSpecLayouts : desktopAnchorSpecLayouts;\n    };\n    var getAnchorLayout = function (editor, position, isTouch, data) {\n      if (position === 'line') {\n        return {\n          bubble: nu$5(bubbleSize$1, 0, bubbleAlignments$1),\n          layouts: {\n            onLtr: function () {\n              return [east$2];\n            },\n            onRtl: function () {\n              return [west$2];\n            }\n          },\n          overrides: anchorOverrides\n        };\n      } else {\n        return {\n          bubble: nu$5(0, bubbleSize$1, bubbleAlignments$1, 1 / bubbleSize$1),\n          layouts: getAnchorSpec$2(editor, isTouch, data, position),\n          overrides: anchorOverrides\n        };\n      }\n    };\n\n    var matchTargetWith = function (elem, candidates) {\n      var ctxs = filter$2(candidates, function (toolbarApi) {\n        return toolbarApi.predicate(elem.dom);\n      });\n      var _a = partition$3(ctxs, function (t) {\n          return t.type === 'contexttoolbar';\n        }), pass = _a.pass, fail = _a.fail;\n      return {\n        contextToolbars: pass,\n        contextForms: fail\n      };\n    };\n    var filterByPositionForStartNode = function (toolbars) {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        var doesPositionExist = function (value) {\n          return exists(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var filterToolbarsByPosition = function (value) {\n          return filter$2(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var hasSelectionToolbars = doesPositionExist('selection');\n        var hasNodeToolbars = doesPositionExist('node');\n        if (hasSelectionToolbars || hasNodeToolbars) {\n          if (hasNodeToolbars && hasSelectionToolbars) {\n            var nodeToolbars = filterToolbarsByPosition('node');\n            var selectionToolbars = map$2(filterToolbarsByPosition('selection'), function (t) {\n              return __assign(__assign({}, t), { position: 'node' });\n            });\n            return nodeToolbars.concat(selectionToolbars);\n          } else {\n            return hasSelectionToolbars ? filterToolbarsByPosition('selection') : filterToolbarsByPosition('node');\n          }\n        } else {\n          return filterToolbarsByPosition('line');\n        }\n      }\n    };\n    var filterByPositionForAncestorNode = function (toolbars) {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        var findPosition_1 = function (value) {\n          return find$5(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var basePosition = findPosition_1('selection').orThunk(function () {\n          return findPosition_1('node');\n        }).orThunk(function () {\n          return findPosition_1('line');\n        }).map(function (t) {\n          return t.position;\n        });\n        return basePosition.fold(function () {\n          return [];\n        }, function (pos) {\n          return filter$2(toolbars, function (t) {\n            return t.position === pos;\n          });\n        });\n      }\n    };\n    var matchStartNode = function (elem, nodeCandidates, editorCandidates) {\n      var nodeMatches = matchTargetWith(elem, nodeCandidates);\n      if (nodeMatches.contextForms.length > 0) {\n        return Optional.some({\n          elem: elem,\n          toolbars: [nodeMatches.contextForms[0]]\n        });\n      } else {\n        var editorMatches = matchTargetWith(elem, editorCandidates);\n        if (editorMatches.contextForms.length > 0) {\n          return Optional.some({\n            elem: elem,\n            toolbars: [editorMatches.contextForms[0]]\n          });\n        } else if (nodeMatches.contextToolbars.length > 0 || editorMatches.contextToolbars.length > 0) {\n          var toolbars = filterByPositionForStartNode(nodeMatches.contextToolbars.concat(editorMatches.contextToolbars));\n          return Optional.some({\n            elem: elem,\n            toolbars: toolbars\n          });\n        } else {\n          return Optional.none();\n        }\n      }\n    };\n    var matchAncestor = function (isRoot, startNode, scopes) {\n      if (isRoot(startNode)) {\n        return Optional.none();\n      } else {\n        return ancestor$2(startNode, function (ancestorElem) {\n          if (isElement$2(ancestorElem)) {\n            var _a = matchTargetWith(ancestorElem, scopes.inNodeScope), contextToolbars = _a.contextToolbars, contextForms = _a.contextForms;\n            var toolbars = contextForms.length > 0 ? contextForms : filterByPositionForAncestorNode(contextToolbars);\n            return toolbars.length > 0 ? Optional.some({\n              elem: ancestorElem,\n              toolbars: toolbars\n            }) : Optional.none();\n          } else {\n            return Optional.none();\n          }\n        }, isRoot);\n      }\n    };\n    var lookup$1 = function (scopes, editor) {\n      var rootElem = SugarElement.fromDom(editor.getBody());\n      var isRoot = function (elem) {\n        return eq(elem, rootElem);\n      };\n      var isOutsideRoot = function (startNode) {\n        return !isRoot(startNode) && !contains(rootElem, startNode);\n      };\n      var startNode = SugarElement.fromDom(editor.selection.getNode());\n      if (isOutsideRoot(startNode)) {\n        return Optional.none();\n      }\n      return matchStartNode(startNode, scopes.inNodeScope, scopes.inEditorScope).orThunk(function () {\n        return matchAncestor(isRoot, startNode, scopes);\n      });\n    };\n\n    var categorise = function (contextToolbars, navigate) {\n      var forms = {};\n      var inNodeScope = [];\n      var inEditorScope = [];\n      var formNavigators = {};\n      var lookupTable = {};\n      var registerForm = function (key, toolbarSpec) {\n        var contextForm = getOrDie(createContextForm(toolbarSpec));\n        forms[key] = contextForm;\n        contextForm.launch.map(function (launch) {\n          formNavigators['form:' + key + ''] = __assign(__assign({}, toolbarSpec.launch), {\n            type: launch.type === 'contextformtogglebutton' ? 'togglebutton' : 'button',\n            onAction: function () {\n              navigate(contextForm);\n            }\n          });\n        });\n        if (contextForm.scope === 'editor') {\n          inEditorScope.push(contextForm);\n        } else {\n          inNodeScope.push(contextForm);\n        }\n        lookupTable[key] = contextForm;\n      };\n      var registerToolbar = function (key, toolbarSpec) {\n        createContextToolbar(toolbarSpec).each(function (contextToolbar) {\n          if (toolbarSpec.scope === 'editor') {\n            inEditorScope.push(contextToolbar);\n          } else {\n            inNodeScope.push(contextToolbar);\n          }\n          lookupTable[key] = contextToolbar;\n        });\n      };\n      var keys$1 = keys(contextToolbars);\n      each$1(keys$1, function (key) {\n        var toolbarApi = contextToolbars[key];\n        if (toolbarApi.type === 'contextform') {\n          registerForm(key, toolbarApi);\n        } else if (toolbarApi.type === 'contexttoolbar') {\n          registerToolbar(key, toolbarApi);\n        }\n      });\n      return {\n        forms: forms,\n        inNodeScope: inNodeScope,\n        inEditorScope: inEditorScope,\n        lookupTable: lookupTable,\n        formNavigators: formNavigators\n      };\n    };\n\n    var forwardSlideEvent = generate$6('forward-slide');\n    var backSlideEvent = generate$6('backward-slide');\n    var changeSlideEvent = generate$6('change-slide-event');\n    var resizingClass = 'tox-pop--resizing';\n    var renderContextToolbar = function (spec) {\n      var stack = Cell([]);\n      return InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-pop']\n        },\n        fireDismissalEventInstead: { event: 'doNotDismissYet' },\n        onShow: function (comp) {\n          stack.set([]);\n          InlineView.getContent(comp).each(function (c) {\n            remove$6(c.element, 'visibility');\n          });\n          remove$2(comp.element, resizingClass);\n          remove$6(comp.element, 'width');\n        },\n        inlineBehaviours: derive$1([\n          config('context-toolbar-events', [\n            runOnSource(transitionend(), function (comp, se) {\n              if (se.event.raw.propertyName === 'width') {\n                remove$2(comp.element, resizingClass);\n                remove$6(comp.element, 'width');\n              }\n            }),\n            run$1(changeSlideEvent, function (comp, se) {\n              var elem = comp.element;\n              remove$6(elem, 'width');\n              var currentWidth = get$a(elem);\n              InlineView.setContent(comp, se.event.contents);\n              add$2(elem, resizingClass);\n              var newWidth = get$a(elem);\n              set$7(elem, 'width', currentWidth + 'px');\n              InlineView.getContent(comp).each(function (newContents) {\n                se.event.focus.bind(function (f) {\n                  focus$3(f);\n                  return search(elem);\n                }).orThunk(function () {\n                  Keying.focusIn(newContents);\n                  return active(getRootNode(elem));\n                });\n              });\n              global$f.setTimeout(function () {\n                set$7(comp.element, 'width', newWidth + 'px');\n              }, 0);\n            }),\n            run$1(forwardSlideEvent, function (comp, se) {\n              InlineView.getContent(comp).each(function (oldContents) {\n                stack.set(stack.get().concat([{\n                    bar: oldContents,\n                    focus: active(getRootNode(comp.element))\n                  }]));\n              });\n              emitWith(comp, changeSlideEvent, {\n                contents: se.event.forwardContents,\n                focus: Optional.none()\n              });\n            }),\n            run$1(backSlideEvent, function (comp, _se) {\n              last$2(stack.get()).each(function (last) {\n                stack.set(stack.get().slice(0, stack.get().length - 1));\n                emitWith(comp, changeSlideEvent, {\n                  contents: premade(last.bar),\n                  focus: last.focus\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              return last$2(stack.get()).fold(function () {\n                return spec.onEscape();\n              }, function (_) {\n                emit(comp, backSlideEvent);\n                return Optional.some(true);\n              });\n            }\n          })\n        ]),\n        lazySink: function () {\n          return Result.value(spec.sink);\n        }\n      });\n    };\n\n    var transitionClass = 'tox-pop--transition';\n    var register$7 = function (editor, registryContextToolbars, sink, extras) {\n      var backstage = extras.backstage;\n      var sharedBackstage = backstage.shared;\n      var isTouch = detect$1().deviceType.isTouch;\n      var lastElement = value$1();\n      var lastTrigger = value$1();\n      var lastContextPosition = value$1();\n      var contextbar = build$1(renderContextToolbar({\n        sink: sink,\n        onEscape: function () {\n          editor.focus();\n          return Optional.some(true);\n        }\n      }));\n      var getBounds = function () {\n        var position = lastContextPosition.get().getOr('node');\n        var margin = shouldUseInsetLayouts(position) ? 1 : 0;\n        return getContextToolbarBounds(editor, sharedBackstage, position, margin);\n      };\n      var canLaunchToolbar = function () {\n        return !editor.removed && !(isTouch() && backstage.isContextMenuOpen());\n      };\n      var isSameLaunchElement = function (elem) {\n        return is$1(lift2(elem, lastElement.get(), eq), true);\n      };\n      var shouldContextToolbarHide = function () {\n        if (!canLaunchToolbar()) {\n          return true;\n        } else {\n          var contextToolbarBounds = getBounds();\n          var anchorBounds = is$1(lastContextPosition.get(), 'node') ? getAnchorElementBounds(editor, lastElement.get()) : getSelectionBounds(editor);\n          return contextToolbarBounds.height <= 0 || !isVerticalOverlap(anchorBounds, contextToolbarBounds);\n        }\n      };\n      var close = function () {\n        lastElement.clear();\n        lastTrigger.clear();\n        lastContextPosition.clear();\n        InlineView.hide(contextbar);\n      };\n      var hideOrRepositionIfNecessary = function () {\n        if (InlineView.isOpen(contextbar)) {\n          var contextBarEle = contextbar.element;\n          remove$6(contextBarEle, 'display');\n          if (shouldContextToolbarHide()) {\n            set$7(contextBarEle, 'display', 'none');\n          } else {\n            lastTrigger.set(0);\n            InlineView.reposition(contextbar);\n          }\n        }\n      };\n      var wrapInPopDialog = function (toolbarSpec) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-pop__dialog']\n          },\n          components: [toolbarSpec],\n          behaviours: derive$1([\n            Keying.config({ mode: 'acyclic' }),\n            config('pop-dialog-wrap-events', [\n              runOnAttached(function (comp) {\n                editor.shortcuts.add('ctrl+F9', 'focus statusbar', function () {\n                  return Keying.focusIn(comp);\n                });\n              }),\n              runOnDetached(function (_comp) {\n                editor.shortcuts.remove('ctrl+F9');\n              })\n            ])\n          ])\n        };\n      };\n      var getScopes = cached(function () {\n        return categorise(registryContextToolbars, function (toolbarApi) {\n          var alloySpec = buildToolbar([toolbarApi]);\n          emitWith(contextbar, forwardSlideEvent, { forwardContents: wrapInPopDialog(alloySpec) });\n        });\n      });\n      var buildContextToolbarGroups = function (allButtons, ctx) {\n        return identifyButtons(editor, {\n          buttons: allButtons,\n          toolbar: ctx.items,\n          allowToolbarGroups: false\n        }, extras, Optional.some(['form:']));\n      };\n      var buildContextFormGroups = function (ctx, providers) {\n        return ContextForm.buildInitGroups(ctx, providers);\n      };\n      var buildToolbar = function (toolbars) {\n        var buttons = editor.ui.registry.getAll().buttons;\n        var scopes = getScopes();\n        var allButtons = __assign(__assign({}, buttons), scopes.formNavigators);\n        var toolbarType = getToolbarMode(editor) === ToolbarMode.scrolling ? ToolbarMode.scrolling : ToolbarMode.default;\n        var initGroups = flatten(map$2(toolbars, function (ctx) {\n          return ctx.type === 'contexttoolbar' ? buildContextToolbarGroups(allButtons, ctx) : buildContextFormGroups(ctx, sharedBackstage.providers);\n        }));\n        return renderToolbar({\n          type: toolbarType,\n          uid: generate$6('context-toolbar'),\n          initGroups: initGroups,\n          onEscape: Optional.none,\n          cyclicKeying: true,\n          providers: sharedBackstage.providers\n        });\n      };\n      var getAnchor = function (position, element) {\n        var anchorage = position === 'node' ? sharedBackstage.anchors.node(element) : sharedBackstage.anchors.cursor();\n        var anchorLayout = getAnchorLayout(editor, position, isTouch(), {\n          lastElement: lastElement.get,\n          isReposition: function () {\n            return is$1(lastTrigger.get(), 0);\n          },\n          getMode: function () {\n            return Positioning.getMode(sink);\n          }\n        });\n        return deepMerge(anchorage, anchorLayout);\n      };\n      var launchContext = function (toolbarApi, elem) {\n        launchContextToolbar.cancel();\n        if (!canLaunchToolbar()) {\n          return;\n        }\n        var toolbarSpec = buildToolbar(toolbarApi);\n        var position = toolbarApi[0].position;\n        var anchor = getAnchor(position, elem);\n        lastContextPosition.set(position);\n        lastTrigger.set(1);\n        var contextBarEle = contextbar.element;\n        remove$6(contextBarEle, 'display');\n        if (!isSameLaunchElement(elem)) {\n          remove$2(contextBarEle, transitionClass);\n          Positioning.reset(sink, contextbar);\n        }\n        InlineView.showWithinBounds(contextbar, wrapInPopDialog(toolbarSpec), {\n          anchor: anchor,\n          transition: {\n            classes: [transitionClass],\n            mode: 'placement'\n          }\n        }, function () {\n          return Optional.some(getBounds());\n        });\n        elem.fold(lastElement.clear, lastElement.set);\n        if (shouldContextToolbarHide()) {\n          set$7(contextBarEle, 'display', 'none');\n        }\n      };\n      var launchContextToolbar = last(function () {\n        if (!editor.hasFocus() || editor.removed) {\n          return;\n        }\n        if (has(contextbar.element, transitionClass)) {\n          launchContextToolbar.throttle();\n        } else {\n          var scopes = getScopes();\n          lookup$1(scopes, editor).fold(close, function (info) {\n            launchContext(info.toolbars, Optional.some(info.elem));\n          });\n        }\n      }, 17);\n      editor.on('init', function () {\n        editor.on('remove', close);\n        editor.on('ScrollContent ScrollWindow ObjectResized ResizeEditor longpress', hideOrRepositionIfNecessary);\n        editor.on('click keyup focus SetContent', launchContextToolbar.throttle);\n        editor.on(hideContextToolbarEvent, close);\n        editor.on(showContextToolbarEvent, function (e) {\n          var scopes = getScopes();\n          get$e(scopes.lookupTable, e.toolbarKey).each(function (ctx) {\n            launchContext([ctx], someIf(e.target !== editor, e.target));\n            InlineView.getContent(contextbar).each(Keying.focusIn);\n          });\n        });\n        editor.on('focusout', function (_e) {\n          global$f.setEditorTimeout(editor, function () {\n            if (search(sink.element).isNone() && search(contextbar.element).isNone()) {\n              close();\n            }\n          }, 0);\n        });\n        editor.on('SwitchMode', function () {\n          if (editor.mode.isReadOnly()) {\n            close();\n          }\n        });\n        editor.on('AfterProgressState', function (event) {\n          if (event.state) {\n            close();\n          } else if (editor.hasFocus()) {\n            launchContextToolbar.throttle();\n          }\n        });\n        editor.on('NodeChange', function (_e) {\n          search(contextbar.element).fold(launchContextToolbar.throttle, noop);\n        });\n      });\n    };\n\n    var register$6 = function (editor) {\n      var alignToolbarButtons = [\n        {\n          name: 'alignleft',\n          text: 'Align left',\n          cmd: 'JustifyLeft',\n          icon: 'align-left'\n        },\n        {\n          name: 'aligncenter',\n          text: 'Align center',\n          cmd: 'JustifyCenter',\n          icon: 'align-center'\n        },\n        {\n          name: 'alignright',\n          text: 'Align right',\n          cmd: 'JustifyRight',\n          icon: 'align-right'\n        },\n        {\n          name: 'alignjustify',\n          text: 'Justify',\n          cmd: 'JustifyFull',\n          icon: 'align-justify'\n        }\n      ];\n      each$1(alignToolbarButtons, function (item) {\n        editor.ui.registry.addToggleButton(item.name, {\n          tooltip: item.text,\n          icon: item.icon,\n          onAction: onActionExecCommand(editor, item.cmd),\n          onSetup: onSetupFormatToggle(editor, item.name)\n        });\n      });\n      editor.ui.registry.addButton('alignnone', {\n        tooltip: 'No alignment',\n        icon: 'align-none',\n        onAction: onActionExecCommand(editor, 'JustifyNone')\n      });\n    };\n\n    var units = {\n      unsupportedLength: [\n        'em',\n        'ex',\n        'cap',\n        'ch',\n        'ic',\n        'rem',\n        'lh',\n        'rlh',\n        'vw',\n        'vh',\n        'vi',\n        'vb',\n        'vmin',\n        'vmax',\n        'cm',\n        'mm',\n        'Q',\n        'in',\n        'pc',\n        'pt',\n        'px'\n      ],\n      fixed: [\n        'px',\n        'pt'\n      ],\n      relative: ['%'],\n      empty: ['']\n    };\n    var pattern = function () {\n      var decimalDigits = '[0-9]+';\n      var signedInteger = '[+-]?' + decimalDigits;\n      var exponentPart = '[eE]' + signedInteger;\n      var dot = '\\\\.';\n      var opt = function (input) {\n        return '(?:' + input + ')?';\n      };\n      var unsignedDecimalLiteral = [\n        'Infinity',\n        decimalDigits + dot + opt(decimalDigits) + opt(exponentPart),\n        dot + decimalDigits + opt(exponentPart),\n        decimalDigits + opt(exponentPart)\n      ].join('|');\n      var float = '[+-]?(?:' + unsignedDecimalLiteral + ')';\n      return new RegExp('^(' + float + ')(.*)$');\n    }();\n    var isUnit = function (unit, accepted) {\n      return exists(accepted, function (acc) {\n        return exists(units[acc], function (check) {\n          return unit === check;\n        });\n      });\n    };\n    var parse = function (input, accepted) {\n      var match = Optional.from(pattern.exec(input));\n      return match.bind(function (array) {\n        var value = Number(array[1]);\n        var unitRaw = array[2];\n        if (isUnit(unitRaw, accepted)) {\n          return Optional.some({\n            value: value,\n            unit: unitRaw\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var normalise = function (input, accepted) {\n      return parse(input, accepted).map(function (_a) {\n        var value = _a.value, unit = _a.unit;\n        return value + unit;\n      });\n    };\n\n    var registerController = function (editor, spec) {\n      var getMenuItems = function () {\n        var options = spec.getOptions(editor);\n        var initial = spec.getCurrent(editor).map(spec.hash);\n        var current = value$1();\n        return map$2(options, function (value) {\n          return {\n            type: 'togglemenuitem',\n            text: spec.display(value),\n            onSetup: function (api) {\n              var setActive = function (active) {\n                if (active) {\n                  current.on(function (oldApi) {\n                    return oldApi.setActive(false);\n                  });\n                  current.set(api);\n                }\n                api.setActive(active);\n              };\n              setActive(is$1(initial, spec.hash(value)));\n              var unbindWatcher = spec.watcher(editor, value, setActive);\n              return function () {\n                current.clear();\n                unbindWatcher();\n              };\n            },\n            onAction: function () {\n              return spec.setCurrent(editor, value);\n            }\n          };\n        });\n      };\n      editor.ui.registry.addMenuButton(spec.name, {\n        tooltip: spec.text,\n        icon: spec.icon,\n        fetch: function (callback) {\n          return callback(getMenuItems());\n        },\n        onSetup: spec.onToolbarSetup\n      });\n      editor.ui.registry.addNestedMenuItem(spec.name, {\n        type: 'nestedmenuitem',\n        text: spec.text,\n        getSubmenuItems: getMenuItems,\n        onSetup: spec.onMenuSetup\n      });\n    };\n    var lineHeightSpec = {\n      name: 'lineheight',\n      text: 'Line height',\n      icon: 'line-height',\n      getOptions: getLineHeightFormats,\n      hash: function (input) {\n        return normalise(input, [\n          'fixed',\n          'relative',\n          'empty'\n        ]).getOr(input);\n      },\n      display: identity$1,\n      watcher: function (editor, value, callback) {\n        return editor.formatter.formatChanged('lineheight', callback, false, { value: value }).unbind;\n      },\n      getCurrent: function (editor) {\n        return Optional.from(editor.queryCommandValue('LineHeight'));\n      },\n      setCurrent: function (editor, value) {\n        return editor.execCommand('LineHeight', false, value);\n      }\n    };\n    var languageSpec = function (editor) {\n      var settingsOpt = Optional.from(getContentLanguages(editor));\n      return settingsOpt.map(function (settings) {\n        return {\n          name: 'language',\n          text: 'Language',\n          icon: 'language',\n          getOptions: constant$1(settings),\n          hash: function (input) {\n            return isUndefined(input.customCode) ? input.code : input.code + '/' + input.customCode;\n          },\n          display: function (input) {\n            return input.title;\n          },\n          watcher: function (editor, value, callback) {\n            return editor.formatter.formatChanged('lang', callback, false, {\n              value: value.code,\n              customValue: value.customCode\n            }).unbind;\n          },\n          getCurrent: function (editor) {\n            var node = SugarElement.fromDom(editor.selection.getNode());\n            return closest$4(node, function (n) {\n              return Optional.some(n).filter(isElement$2).bind(function (ele) {\n                var codeOpt = getOpt(ele, 'lang');\n                return codeOpt.map(function (code) {\n                  var customCode = getOpt(ele, 'data-mce-lang').getOrUndefined();\n                  return {\n                    code: code,\n                    customCode: customCode,\n                    title: ''\n                  };\n                });\n              });\n            });\n          },\n          setCurrent: function (editor, lang) {\n            return editor.execCommand('Lang', false, lang);\n          },\n          onToolbarSetup: function (api) {\n            var unbinder = unbindable();\n            api.setActive(editor.formatter.match('lang', {}, undefined, true));\n            unbinder.set(editor.formatter.formatChanged('lang', api.setActive, true));\n            return unbinder.clear;\n          }\n        };\n      });\n    };\n    var register$5 = function (editor) {\n      registerController(editor, lineHeightSpec);\n      languageSpec(editor).each(function (spec) {\n        return registerController(editor, spec);\n      });\n    };\n\n    var register$4 = function (editor, backstage) {\n      alignSelectMenu(editor, backstage);\n      fontSelectMenu(editor, backstage);\n      styleSelectMenu(editor, backstage);\n      formatSelectMenu(editor, backstage);\n      fontsizeSelectMenu(editor, backstage);\n    };\n\n    var onSetupOutdentState = function (editor) {\n      return onSetupEvent(editor, 'NodeChange', function (api) {\n        api.setDisabled(!editor.queryCommandState('outdent'));\n      });\n    };\n    var registerButtons$2 = function (editor) {\n      editor.ui.registry.addButton('outdent', {\n        tooltip: 'Decrease indent',\n        icon: 'outdent',\n        onSetup: onSetupOutdentState(editor),\n        onAction: onActionExecCommand(editor, 'outdent')\n      });\n      editor.ui.registry.addButton('indent', {\n        tooltip: 'Increase indent',\n        icon: 'indent',\n        onAction: onActionExecCommand(editor, 'indent')\n      });\n    };\n    var register$3 = function (editor) {\n      registerButtons$2(editor);\n    };\n\n    var onActionToggleFormat = function (editor, fmt) {\n      return function () {\n        editor.execCommand('mceToggleFormat', false, fmt);\n      };\n    };\n    var registerFormatButtons = function (editor) {\n      global$5.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          icon: 'bold'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          icon: 'italic'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          icon: 'underline'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          icon: 'strike-through'\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          icon: 'subscript'\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          icon: 'superscript'\n        }\n      ], function (btn, _idx) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onSetup: onSetupFormatToggle(editor, btn.name),\n          onAction: onActionToggleFormat(editor, btn.name)\n        });\n      });\n      for (var i = 1; i <= 6; i++) {\n        var name_1 = 'h' + i;\n        editor.ui.registry.addToggleButton(name_1, {\n          text: name_1.toUpperCase(),\n          tooltip: 'Heading ' + i,\n          onSetup: onSetupFormatToggle(editor, name_1),\n          onAction: onActionToggleFormat(editor, name_1)\n        });\n      }\n    };\n    var registerCommandButtons = function (editor) {\n      global$5.each([\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste'\n        },\n        {\n          name: 'help',\n          text: 'Help',\n          action: 'mceHelp',\n          icon: 'help'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all'\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document'\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting'\n        },\n        {\n          name: 'remove',\n          text: 'Remove',\n          action: 'Delete',\n          icon: 'remove'\n        }\n      ], function (btn) {\n        editor.ui.registry.addButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: onActionExecCommand(editor, btn.action)\n        });\n      });\n    };\n    var registerCommandToggleButtons = function (editor) {\n      global$5.each([{\n          name: 'blockquote',\n          text: 'Blockquote',\n          action: 'mceBlockQuote',\n          icon: 'quote'\n        }], function (btn) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: onActionExecCommand(editor, btn.action),\n          onSetup: onSetupFormatToggle(editor, btn.name)\n        });\n      });\n    };\n    var registerButtons$1 = function (editor) {\n      registerFormatButtons(editor);\n      registerCommandButtons(editor);\n      registerCommandToggleButtons(editor);\n    };\n    var registerMenuItems$2 = function (editor) {\n      global$5.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          action: 'Bold',\n          icon: 'bold',\n          shortcut: 'Meta+B'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          action: 'Italic',\n          icon: 'italic',\n          shortcut: 'Meta+I'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          action: 'Underline',\n          icon: 'underline',\n          shortcut: 'Meta+U'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          action: 'Strikethrough',\n          icon: 'strike-through',\n          shortcut: ''\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          action: 'Subscript',\n          icon: 'subscript',\n          shortcut: ''\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          action: 'Superscript',\n          icon: 'superscript',\n          shortcut: ''\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting',\n          shortcut: ''\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document',\n          shortcut: ''\n        },\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut',\n          shortcut: 'Meta+X'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy',\n          shortcut: 'Meta+C'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste',\n          shortcut: 'Meta+V'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all',\n          shortcut: 'Meta+A'\n        }\n      ], function (btn) {\n        editor.ui.registry.addMenuItem(btn.name, {\n          text: btn.text,\n          icon: btn.icon,\n          shortcut: btn.shortcut,\n          onAction: onActionExecCommand(editor, btn.action)\n        });\n      });\n      editor.ui.registry.addMenuItem('codeformat', {\n        text: 'Code',\n        icon: 'sourcecode',\n        onAction: onActionToggleFormat(editor, 'code')\n      });\n    };\n    var register$2 = function (editor) {\n      registerButtons$1(editor);\n      registerMenuItems$2(editor);\n    };\n\n    var onSetupUndoRedoState = function (editor, type) {\n      return onSetupEvent(editor, 'Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', function (api) {\n        api.setDisabled(editor.mode.isReadOnly() || !editor.undoManager[type]());\n      });\n    };\n    var registerMenuItems$1 = function (editor) {\n      editor.ui.registry.addMenuItem('undo', {\n        text: 'Undo',\n        icon: 'undo',\n        shortcut: 'Meta+Z',\n        onSetup: onSetupUndoRedoState(editor, 'hasUndo'),\n        onAction: onActionExecCommand(editor, 'undo')\n      });\n      editor.ui.registry.addMenuItem('redo', {\n        text: 'Redo',\n        icon: 'redo',\n        shortcut: 'Meta+Y',\n        onSetup: onSetupUndoRedoState(editor, 'hasRedo'),\n        onAction: onActionExecCommand(editor, 'redo')\n      });\n    };\n    var registerButtons = function (editor) {\n      editor.ui.registry.addButton('undo', {\n        tooltip: 'Undo',\n        icon: 'undo',\n        disabled: true,\n        onSetup: onSetupUndoRedoState(editor, 'hasUndo'),\n        onAction: onActionExecCommand(editor, 'undo')\n      });\n      editor.ui.registry.addButton('redo', {\n        tooltip: 'Redo',\n        icon: 'redo',\n        disabled: true,\n        onSetup: onSetupUndoRedoState(editor, 'hasRedo'),\n        onAction: onActionExecCommand(editor, 'redo')\n      });\n    };\n    var register$1 = function (editor) {\n      registerMenuItems$1(editor);\n      registerButtons(editor);\n    };\n\n    var onSetupVisualAidState = function (editor) {\n      return onSetupEvent(editor, 'VisualAid', function (api) {\n        api.setActive(editor.hasVisual);\n      });\n    };\n    var registerMenuItems = function (editor) {\n      editor.ui.registry.addToggleMenuItem('visualaid', {\n        text: 'Visual aids',\n        onSetup: onSetupVisualAidState(editor),\n        onAction: onActionExecCommand(editor, 'mceToggleVisualAid')\n      });\n    };\n    var registerToolbarButton = function (editor) {\n      editor.ui.registry.addButton('visualaid', {\n        tooltip: 'Visual aids',\n        text: 'Visual aids',\n        onAction: onActionExecCommand(editor, 'mceToggleVisualAid')\n      });\n    };\n    var register = function (editor) {\n      registerToolbarButton(editor);\n      registerMenuItems(editor);\n    };\n\n    var setup$6 = function (editor, backstage) {\n      register$6(editor);\n      register$2(editor);\n      register$4(editor, backstage);\n      register$1(editor);\n      register$a(editor);\n      register(editor);\n      register$3(editor);\n      register$5(editor);\n    };\n\n    var nu = function (x, y) {\n      return {\n        type: 'makeshift',\n        x: x,\n        y: y\n      };\n    };\n    var transpose = function (pos, dx, dy) {\n      return nu(pos.x + dx, pos.y + dy);\n    };\n    var isTouchEvent = function (e) {\n      return e.type === 'longpress' || e.type.indexOf('touch') === 0;\n    };\n    var fromPageXY = function (e) {\n      if (isTouchEvent(e)) {\n        var touch = e.touches[0];\n        return nu(touch.pageX, touch.pageY);\n      } else {\n        return nu(e.pageX, e.pageY);\n      }\n    };\n    var fromClientXY = function (e) {\n      if (isTouchEvent(e)) {\n        var touch = e.touches[0];\n        return nu(touch.clientX, touch.clientY);\n      } else {\n        return nu(e.clientX, e.clientY);\n      }\n    };\n    var transposeContentAreaContainer = function (element, pos) {\n      var containerPos = global$b.DOM.getPos(element);\n      return transpose(pos, containerPos.x, containerPos.y);\n    };\n    var getPointAnchor = function (editor, e) {\n      if (e.type === 'contextmenu' || e.type === 'longpress') {\n        if (editor.inline) {\n          return fromPageXY(e);\n        } else {\n          return transposeContentAreaContainer(editor.getContentAreaContainer(), fromClientXY(e));\n        }\n      } else {\n        return getSelectionAnchor(editor);\n      }\n    };\n    var getSelectionAnchor = function (editor) {\n      return {\n        type: 'selection',\n        root: SugarElement.fromDom(editor.selection.getNode())\n      };\n    };\n    var getNodeAnchor = function (editor) {\n      return {\n        type: 'node',\n        node: Optional.some(SugarElement.fromDom(editor.selection.getNode())),\n        root: SugarElement.fromDom(editor.getBody())\n      };\n    };\n    var getAnchorSpec$1 = function (editor, e, anchorType) {\n      switch (anchorType) {\n      case 'node':\n        return getNodeAnchor(editor);\n      case 'point':\n        return getPointAnchor(editor, e);\n      case 'selection':\n        return getSelectionAnchor(editor);\n      }\n    };\n\n    var initAndShow$1 = function (editor, e, buildMenu, backstage, contextmenu, anchorType) {\n      var items = buildMenu();\n      var anchorSpec = getAnchorSpec$1(editor, e, anchorType);\n      build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuAt(contextmenu, { anchor: anchorSpec }, {\n          menu: { markers: markers('normal') },\n          data: menuData\n        });\n      });\n    };\n\n    var layouts = {\n      onLtr: function () {\n        return [\n          south$2,\n          southeast$2,\n          southwest$2,\n          northeast$2,\n          northwest$2,\n          north$2,\n          north,\n          south,\n          northeast,\n          southeast,\n          northwest,\n          southwest\n        ];\n      },\n      onRtl: function () {\n        return [\n          south$2,\n          southwest$2,\n          southeast$2,\n          northwest$2,\n          northeast$2,\n          north$2,\n          north,\n          south,\n          northwest,\n          southwest,\n          northeast,\n          southeast\n        ];\n      }\n    };\n    var bubbleSize = 12;\n    var bubbleAlignments = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top']\n    };\n    var isTouchWithinSelection = function (editor, e) {\n      var selection = editor.selection;\n      if (selection.isCollapsed() || e.touches.length < 1) {\n        return false;\n      } else {\n        var touch_1 = e.touches[0];\n        var rng = selection.getRng();\n        var rngRectOpt = getFirstRect(editor.getWin(), SimSelection.domRange(rng));\n        return rngRectOpt.exists(function (rngRect) {\n          return rngRect.left <= touch_1.clientX && rngRect.right >= touch_1.clientX && rngRect.top <= touch_1.clientY && rngRect.bottom >= touch_1.clientY;\n        });\n      }\n    };\n    var setupiOSOverrides = function (editor) {\n      var originalSelection = editor.selection.getRng();\n      var selectionReset = function () {\n        global$f.setEditorTimeout(editor, function () {\n          editor.selection.setRng(originalSelection);\n        }, 10);\n        unbindEventListeners();\n      };\n      editor.once('touchend', selectionReset);\n      var preventMousedown = function (e) {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n      };\n      editor.on('mousedown', preventMousedown, true);\n      var clearSelectionReset = function () {\n        return unbindEventListeners();\n      };\n      editor.once('longpresscancel', clearSelectionReset);\n      var unbindEventListeners = function () {\n        editor.off('touchend', selectionReset);\n        editor.off('longpresscancel', clearSelectionReset);\n        editor.off('mousedown', preventMousedown);\n      };\n    };\n    var getAnchorSpec = function (editor, e, anchorType) {\n      var anchorSpec = getAnchorSpec$1(editor, e, anchorType);\n      var bubbleYOffset = anchorType === 'point' ? bubbleSize : 0;\n      return __assign({\n        bubble: nu$5(0, bubbleYOffset, bubbleAlignments),\n        layouts: layouts,\n        overrides: {\n          maxWidthFunction: expandable(),\n          maxHeightFunction: expandable$1()\n        }\n      }, anchorSpec);\n    };\n    var show = function (editor, e, items, backstage, contextmenu, anchorType, highlightImmediately) {\n      var anchorSpec = getAnchorSpec(editor, e, anchorType);\n      build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, true).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuWithinBounds(contextmenu, { anchor: anchorSpec }, {\n          menu: {\n            markers: markers('normal'),\n            highlightImmediately: highlightImmediately\n          },\n          data: menuData,\n          type: 'horizontal'\n        }, function () {\n          return Optional.some(getContextToolbarBounds(editor, backstage.shared, anchorType === 'node' ? 'node' : 'selection'));\n        });\n        editor.fire(hideContextToolbarEvent);\n      });\n    };\n    var initAndShow = function (editor, e, buildMenu, backstage, contextmenu, anchorType) {\n      var detection = detect$1();\n      var isiOS = detection.os.isiOS();\n      var isOSX = detection.os.isOSX();\n      var isAndroid = detection.os.isAndroid();\n      var isTouch = detection.deviceType.isTouch();\n      var shouldHighlightImmediately = function () {\n        return !(isAndroid || isiOS || isOSX && isTouch);\n      };\n      var open = function () {\n        var items = buildMenu();\n        show(editor, e, items, backstage, contextmenu, anchorType, shouldHighlightImmediately());\n      };\n      if ((isOSX || isiOS) && anchorType !== 'node') {\n        var openiOS_1 = function () {\n          setupiOSOverrides(editor);\n          open();\n        };\n        if (isTouchWithinSelection(editor, e)) {\n          openiOS_1();\n        } else {\n          editor.once('selectionchange', openiOS_1);\n          editor.once('touchend', function () {\n            return editor.off('selectionchange', openiOS_1);\n          });\n        }\n      } else {\n        open();\n      }\n    };\n\n    var patchPipeConfig = function (config) {\n      return typeof config === 'string' ? config.split(/[ ,]/) : config;\n    };\n    var shouldNeverUseNative = function (editor) {\n      return editor.getParam('contextmenu_never_use_native', false, 'boolean');\n    };\n    var getMenuItems = function (editor, name, defaultItems) {\n      var contextMenus = editor.ui.registry.getAll().contextMenus;\n      return Optional.from(editor.getParam(name)).map(patchPipeConfig).getOrThunk(function () {\n        return filter$2(patchPipeConfig(defaultItems), function (item) {\n          return has$2(contextMenus, item);\n        });\n      });\n    };\n    var isContextMenuDisabled = function (editor) {\n      return editor.getParam('contextmenu') === false;\n    };\n    var getContextMenu = function (editor) {\n      return getMenuItems(editor, 'contextmenu', 'link linkchecker image imagetools table spellchecker configurepermanentpen');\n    };\n    var getAvoidOverlapSelector = function (editor) {\n      return editor.getParam('contextmenu_avoid_overlap', '', 'string');\n    };\n\n    var isSeparator = function (item) {\n      return isString(item) ? item === '|' : item.type === 'separator';\n    };\n    var separator = { type: 'separator' };\n    var makeContextItem = function (item) {\n      var commonMenuItem = function (item) {\n        return {\n          text: item.text,\n          icon: item.icon,\n          disabled: item.disabled,\n          shortcut: item.shortcut\n        };\n      };\n      if (isString(item)) {\n        return item;\n      } else {\n        switch (item.type) {\n        case 'separator':\n          return separator;\n        case 'submenu':\n          return __assign(__assign({ type: 'nestedmenuitem' }, commonMenuItem(item)), {\n            getSubmenuItems: function () {\n              var items = item.getSubmenuItems();\n              if (isString(items)) {\n                return items;\n              } else {\n                return map$2(items, makeContextItem);\n              }\n            }\n          });\n        default:\n          return __assign(__assign({ type: 'menuitem' }, commonMenuItem(item)), { onAction: noarg(item.onAction) });\n        }\n      }\n    };\n    var addContextMenuGroup = function (xs, groupItems) {\n      if (groupItems.length === 0) {\n        return xs;\n      }\n      var lastMenuItem = last$2(xs).filter(function (item) {\n        return !isSeparator(item);\n      });\n      var before = lastMenuItem.fold(function () {\n        return [];\n      }, function (_) {\n        return [separator];\n      });\n      return xs.concat(before).concat(groupItems).concat([separator]);\n    };\n    var generateContextMenu = function (contextMenus, menuConfig, selectedElement) {\n      var sections = foldl(menuConfig, function (acc, name) {\n        return get$e(contextMenus, name.toLowerCase()).map(function (menu) {\n          var items = menu.update(selectedElement);\n          if (isString(items)) {\n            return addContextMenuGroup(acc, items.split(' '));\n          } else if (items.length > 0) {\n            var allItems = map$2(items, makeContextItem);\n            return addContextMenuGroup(acc, allItems);\n          } else {\n            return acc;\n          }\n        }).getOrThunk(function () {\n          return acc.concat([name]);\n        });\n      }, []);\n      if (sections.length > 0 && isSeparator(sections[sections.length - 1])) {\n        sections.pop();\n      }\n      return sections;\n    };\n    var isNativeOverrideKeyEvent = function (editor, e) {\n      return e.ctrlKey && !shouldNeverUseNative(editor);\n    };\n    var isTriggeredByKeyboard = function (editor, e) {\n      return e.type !== 'longpress' && (e.button !== 2 || e.target === editor.getBody() && e.pointerType === '');\n    };\n    var getSelectedElement = function (editor, e) {\n      return isTriggeredByKeyboard(editor, e) ? editor.selection.getStart(true) : e.target;\n    };\n    var getAnchorType = function (editor, e) {\n      var selector = getAvoidOverlapSelector(editor);\n      var anchorType = isTriggeredByKeyboard(editor, e) ? 'selection' : 'point';\n      if (isNotEmpty(selector)) {\n        var target = getSelectedElement(editor, e);\n        var selectorExists = closest(SugarElement.fromDom(target), selector);\n        return selectorExists ? 'node' : anchorType;\n      } else {\n        return anchorType;\n      }\n    };\n    var setup$5 = function (editor, lazySink, backstage) {\n      var detection = detect$1();\n      var isTouch = detection.deviceType.isTouch;\n      var contextmenu = build$1(InlineView.sketch({\n        dom: { tag: 'div' },\n        lazySink: lazySink,\n        onEscape: function () {\n          return editor.focus();\n        },\n        onShow: function () {\n          return backstage.setContextMenuState(true);\n        },\n        onHide: function () {\n          return backstage.setContextMenuState(false);\n        },\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissContextMenu', [run$1(dismissRequested(), function (comp, _se) {\n              Sandboxing.close(comp);\n              editor.focus();\n            })])])\n      }));\n      var hideContextMenu = function (_e) {\n        return InlineView.hide(contextmenu);\n      };\n      var showContextMenu = function (e) {\n        if (shouldNeverUseNative(editor)) {\n          e.preventDefault();\n        }\n        if (isNativeOverrideKeyEvent(editor, e) || isContextMenuDisabled(editor)) {\n          return;\n        }\n        var anchorType = getAnchorType(editor, e);\n        var buildMenu = function () {\n          var selectedElement = getSelectedElement(editor, e);\n          var registry = editor.ui.registry.getAll();\n          var menuConfig = getContextMenu(editor);\n          return generateContextMenu(registry.contextMenus, menuConfig, selectedElement);\n        };\n        var initAndShow$2 = isTouch() ? initAndShow : initAndShow$1;\n        initAndShow$2(editor, e, buildMenu, backstage, contextmenu, anchorType);\n      };\n      editor.on('init', function () {\n        var hideEvents = 'ResizeEditor ScrollContent ScrollWindow longpresscancel' + (isTouch() ? '' : ' ResizeWindow');\n        editor.on(hideEvents, hideContextMenu);\n        editor.on('longpress contextmenu', showContextMenu);\n      });\n    };\n\n    var adt = Adt.generate([\n      {\n        offset: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        absolute: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y'\n        ]\n      }\n    ]);\n    var subtract = function (change) {\n      return function (point) {\n        return point.translate(-change.left, -change.top);\n      };\n    };\n    var add = function (change) {\n      return function (point) {\n        return point.translate(change.left, change.top);\n      };\n    };\n    var transform = function (changes) {\n      return function (x, y) {\n        return foldl(changes, function (rest, f) {\n          return f(rest);\n        }, SugarPosition(x, y));\n      };\n    };\n    var asFixed = function (coord, scroll, origin) {\n      return coord.fold(transform([\n        add(origin),\n        subtract(scroll)\n      ]), transform([subtract(scroll)]), transform([]));\n    };\n    var asAbsolute = function (coord, scroll, origin) {\n      return coord.fold(transform([add(origin)]), transform([]), transform([add(scroll)]));\n    };\n    var asOffset = function (coord, scroll, origin) {\n      return coord.fold(transform([]), transform([subtract(origin)]), transform([\n        add(scroll),\n        subtract(origin)\n      ]));\n    };\n    var withinRange = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      return Math.abs(a1.left - a2.left) <= xRange && Math.abs(a1.top - a2.top) <= yRange;\n    };\n    var getDeltas = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      var left = Math.abs(a1.left - a2.left);\n      var top = Math.abs(a1.top - a2.top);\n      return SugarPosition(left, top);\n    };\n    var toStyles = function (coord, scroll, origin) {\n      var stylesOpt = coord.fold(function (x, y) {\n        return {\n          position: Optional.some('absolute'),\n          left: Optional.some(x + 'px'),\n          top: Optional.some(y + 'px')\n        };\n      }, function (x, y) {\n        return {\n          position: Optional.some('absolute'),\n          left: Optional.some(x - origin.left + 'px'),\n          top: Optional.some(y - origin.top + 'px')\n        };\n      }, function (x, y) {\n        return {\n          position: Optional.some('fixed'),\n          left: Optional.some(x + 'px'),\n          top: Optional.some(y + 'px')\n        };\n      });\n      return __assign({\n        right: Optional.none(),\n        bottom: Optional.none()\n      }, stylesOpt);\n    };\n    var translate = function (coord, deltaX, deltaY) {\n      return coord.fold(function (x, y) {\n        return offset(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return absolute(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return fixed(x + deltaX, y + deltaY);\n      });\n    };\n    var absorb = function (partialCoord, originalCoord, scroll, origin) {\n      var absorbOne = function (stencil, nu) {\n        return function (optX, optY) {\n          var original = stencil(originalCoord, scroll, origin);\n          return nu(optX.getOr(original.left), optY.getOr(original.top));\n        };\n      };\n      return partialCoord.fold(absorbOne(asOffset, offset), absorbOne(asAbsolute, absolute), absorbOne(asFixed, fixed));\n    };\n    var offset = adt.offset;\n    var absolute = adt.absolute;\n    var fixed = adt.fixed;\n\n    var parseAttrToInt = function (element, name) {\n      var value = get$d(element, name);\n      return isUndefined(value) ? NaN : parseInt(value, 10);\n    };\n    var get = function (component, snapsInfo) {\n      var element = component.element;\n      var x = parseAttrToInt(element, snapsInfo.leftAttr);\n      var y = parseAttrToInt(element, snapsInfo.topAttr);\n      return isNaN(x) || isNaN(y) ? Optional.none() : Optional.some(SugarPosition(x, y));\n    };\n    var set = function (component, snapsInfo, pt) {\n      var element = component.element;\n      set$8(element, snapsInfo.leftAttr, pt.left + 'px');\n      set$8(element, snapsInfo.topAttr, pt.top + 'px');\n    };\n    var clear = function (component, snapsInfo) {\n      var element = component.element;\n      remove$7(element, snapsInfo.leftAttr);\n      remove$7(element, snapsInfo.topAttr);\n    };\n\n    var getCoords = function (component, snapInfo, coord, delta) {\n      return get(component, snapInfo).fold(function () {\n        return coord;\n      }, function (fixed$1) {\n        return fixed(fixed$1.left + delta.left, fixed$1.top + delta.top);\n      });\n    };\n    var moveOrSnap = function (component, snapInfo, coord, delta, scroll, origin) {\n      var newCoord = getCoords(component, snapInfo, coord, delta);\n      var snap = snapInfo.mustSnap ? findClosestSnap(component, snapInfo, newCoord, scroll, origin) : findSnap(component, snapInfo, newCoord, scroll, origin);\n      var fixedCoord = asFixed(newCoord, scroll, origin);\n      set(component, snapInfo, fixedCoord);\n      return snap.fold(function () {\n        return {\n          coord: fixed(fixedCoord.left, fixedCoord.top),\n          extra: Optional.none()\n        };\n      }, function (spanned) {\n        return {\n          coord: spanned.output,\n          extra: spanned.extra\n        };\n      });\n    };\n    var stopDrag = function (component, snapInfo) {\n      clear(component, snapInfo);\n    };\n    var findMatchingSnap = function (snaps, newCoord, scroll, origin) {\n      return findMap(snaps, function (snap) {\n        var sensor = snap.sensor;\n        var inRange = withinRange(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n        return inRange ? Optional.some({\n          output: absorb(snap.output, newCoord, scroll, origin),\n          extra: snap.extra\n        }) : Optional.none();\n      });\n    };\n    var findClosestSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      var matchSnap = findMatchingSnap(snaps, newCoord, scroll, origin);\n      return matchSnap.orThunk(function () {\n        var bestSnap = foldl(snaps, function (acc, snap) {\n          var sensor = snap.sensor;\n          var deltas = getDeltas(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n          return acc.deltas.fold(function () {\n            return {\n              deltas: Optional.some(deltas),\n              snap: Optional.some(snap)\n            };\n          }, function (bestDeltas) {\n            var currAvg = (deltas.left + deltas.top) / 2;\n            var bestAvg = (bestDeltas.left + bestDeltas.top) / 2;\n            if (currAvg <= bestAvg) {\n              return {\n                deltas: Optional.some(deltas),\n                snap: Optional.some(snap)\n              };\n            } else {\n              return acc;\n            }\n          });\n        }, {\n          deltas: Optional.none(),\n          snap: Optional.none()\n        });\n        return bestSnap.snap.map(function (snap) {\n          return {\n            output: absorb(snap.output, newCoord, scroll, origin),\n            extra: snap.extra\n          };\n        });\n      });\n    };\n    var findSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      return findMatchingSnap(snaps, newCoord, scroll, origin);\n    };\n    var snapTo$1 = function (snap, scroll, origin) {\n      return {\n        coord: absorb(snap.output, snap.output, scroll, origin),\n        extra: snap.extra\n      };\n    };\n\n    var snapTo = function (component, dragConfig, _state, snap) {\n      var target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        var doc = owner$4(component.element);\n        var scroll_1 = get$9(doc);\n        var origin_1 = getOrigin(target);\n        var snapPin = snapTo$1(snap, scroll_1, origin_1);\n        var styles = toStyles(snapPin.coord, scroll_1, origin_1);\n        setOptions(target, styles);\n      }\n    };\n\n    var DraggingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        snapTo: snapTo\n    });\n\n    var initialAttribute = 'data-initial-z-index';\n    var resetZIndex = function (blocker) {\n      parent(blocker.element).filter(isElement$2).each(function (root) {\n        getOpt(root, initialAttribute).fold(function () {\n          return remove$6(root, 'z-index');\n        }, function (zIndex) {\n          return set$7(root, 'z-index', zIndex);\n        });\n        remove$7(root, initialAttribute);\n      });\n    };\n    var changeZIndex = function (blocker) {\n      parent(blocker.element).filter(isElement$2).each(function (root) {\n        getRaw(root, 'z-index').each(function (zindex) {\n          set$8(root, initialAttribute, zindex);\n        });\n        set$7(root, 'z-index', get$c(blocker.element, 'z-index'));\n      });\n    };\n    var instigate = function (anyComponent, blocker) {\n      anyComponent.getSystem().addToGui(blocker);\n      changeZIndex(blocker);\n    };\n    var discard = function (blocker) {\n      resetZIndex(blocker);\n      blocker.getSystem().removeFromGui(blocker);\n    };\n    var createComponent = function (component, blockerClass, blockerEvents) {\n      return component.getSystem().build(Container.sketch({\n        dom: {\n          styles: {\n            'left': '0px',\n            'top': '0px',\n            'width': '100%',\n            'height': '100%',\n            'position': 'fixed',\n            'z-index': '1000000000000000'\n          },\n          classes: [blockerClass]\n        },\n        events: blockerEvents\n      }));\n    };\n\n    var SnapSchema = optionObjOf('snaps', [\n      required$1('getSnapPoints'),\n      onHandler('onSensor'),\n      required$1('leftAttr'),\n      required$1('topAttr'),\n      defaulted('lazyViewport', win),\n      defaulted('mustSnap', false)\n    ]);\n\n    var schema$6 = [\n      defaulted('useFixed', never),\n      required$1('blockerClass'),\n      defaulted('getTarget', identity$1),\n      defaulted('onDrag', noop),\n      defaulted('repositionTarget', true),\n      defaulted('onDrop', noop),\n      defaultedFunction('getBounds', win),\n      SnapSchema\n    ];\n\n    var getCurrentCoord = function (target) {\n      return lift3(getRaw(target, 'left'), getRaw(target, 'top'), getRaw(target, 'position'), function (left, top, position) {\n        var nu = position === 'fixed' ? fixed : offset;\n        return nu(parseInt(left, 10), parseInt(top, 10));\n      }).getOrThunk(function () {\n        var location = absolute$3(target);\n        return absolute(location.left, location.top);\n      });\n    };\n    var clampCoords = function (component, coords, scroll, origin, startData) {\n      var bounds = startData.bounds;\n      var absoluteCoord = asAbsolute(coords, scroll, origin);\n      var newX = clamp$1(absoluteCoord.left, bounds.x, bounds.x + bounds.width - startData.width);\n      var newY = clamp$1(absoluteCoord.top, bounds.y, bounds.y + bounds.height - startData.height);\n      var newCoords = absolute(newX, newY);\n      return coords.fold(function () {\n        var offset$1 = asOffset(newCoords, scroll, origin);\n        return offset(offset$1.left, offset$1.top);\n      }, constant$1(newCoords), function () {\n        var fixed$1 = asFixed(newCoords, scroll, origin);\n        return fixed(fixed$1.left, fixed$1.top);\n      });\n    };\n    var calcNewCoord = function (component, optSnaps, currentCoord, scroll, origin, delta, startData) {\n      var newCoord = optSnaps.fold(function () {\n        var translated = translate(currentCoord, delta.left, delta.top);\n        var fixedCoord = asFixed(translated, scroll, origin);\n        return fixed(fixedCoord.left, fixedCoord.top);\n      }, function (snapInfo) {\n        var snapping = moveOrSnap(component, snapInfo, currentCoord, delta, scroll, origin);\n        snapping.extra.each(function (extra) {\n          snapInfo.onSensor(component, extra);\n        });\n        return snapping.coord;\n      });\n      return clampCoords(component, newCoord, scroll, origin, startData);\n    };\n    var dragBy = function (component, dragConfig, startData, delta) {\n      var target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        var doc = owner$4(component.element);\n        var scroll_1 = get$9(doc);\n        var origin_1 = getOrigin(target);\n        var currentCoord = getCurrentCoord(target);\n        var newCoord = calcNewCoord(component, dragConfig.snaps, currentCoord, scroll_1, origin_1, delta, startData);\n        var styles = toStyles(newCoord, scroll_1, origin_1);\n        setOptions(target, styles);\n      }\n      dragConfig.onDrag(component, target, delta);\n    };\n\n    var calcStartData = function (dragConfig, comp) {\n      return {\n        bounds: dragConfig.getBounds(),\n        height: getOuter$2(comp.element),\n        width: getOuter$1(comp.element)\n      };\n    };\n    var move = function (component, dragConfig, dragState, dragMode, event) {\n      var delta = dragState.update(dragMode, event);\n      var dragStartData = dragState.getStartData().getOrThunk(function () {\n        return calcStartData(dragConfig, component);\n      });\n      delta.each(function (dlt) {\n        dragBy(component, dragConfig, dragStartData, dlt);\n      });\n    };\n    var stop = function (component, blocker, dragConfig, dragState) {\n      blocker.each(discard);\n      dragConfig.snaps.each(function (snapInfo) {\n        stopDrag(component, snapInfo);\n      });\n      var target = dragConfig.getTarget(component.element);\n      dragState.reset();\n      dragConfig.onDrop(component, target);\n    };\n    var handlers = function (events) {\n      return function (dragConfig, dragState) {\n        var updateStartState = function (comp) {\n          dragState.setStartData(calcStartData(dragConfig, comp));\n        };\n        return derive$2(__spreadArray([run$1(windowScroll(), function (comp) {\n            dragState.getStartData().each(function () {\n              return updateStartState(comp);\n            });\n          })], events(dragConfig, dragState, updateStartState), true));\n      };\n    };\n\n    var init$2 = function (dragApi) {\n      return derive$2([\n        run$1(mousedown(), dragApi.forceDrop),\n        run$1(mouseup(), dragApi.drop),\n        run$1(mousemove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event);\n        }),\n        run$1(mouseout(), dragApi.delayDrop)\n      ]);\n    };\n\n    var getData$1 = function (event) {\n      return Optional.from(SugarPosition(event.x, event.y));\n    };\n    var getDelta$1 = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n\n    var MouseData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData$1,\n        getDelta: getDelta$1\n    });\n\n    var events$2 = function (dragConfig, dragState, updateStartState) {\n      return [run$1(mousedown(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event.raw;\n          if (raw.button !== 0) {\n            return;\n          }\n          simulatedEvent.stop();\n          var stop$1 = function () {\n            return stop(component, Optional.some(blocker), dragConfig, dragState);\n          };\n          var delayDrop = DelayedFunction(stop$1, 200);\n          var dragApi = {\n            drop: stop$1,\n            delayDrop: delayDrop.schedule,\n            forceDrop: stop$1,\n            move: function (event) {\n              delayDrop.cancel();\n              move(component, dragConfig, dragState, MouseData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$2(dragApi));\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        })];\n    };\n    var schema$5 = __spreadArray(__spreadArray([], schema$6, true), [output$1('dragger', { handlers: handlers(events$2) })], false);\n\n    var init$1 = function (dragApi) {\n      return derive$2([\n        run$1(touchstart(), dragApi.forceDrop),\n        run$1(touchend(), dragApi.drop),\n        run$1(touchcancel(), dragApi.drop),\n        run$1(touchmove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event);\n        })\n      ]);\n    };\n\n    var getDataFrom = function (touches) {\n      var touch = touches[0];\n      return Optional.some(SugarPosition(touch.clientX, touch.clientY));\n    };\n    var getData = function (event) {\n      var raw = event.raw;\n      var touches = raw.touches;\n      return touches.length === 1 ? getDataFrom(touches) : Optional.none();\n    };\n    var getDelta = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n\n    var TouchData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData,\n        getDelta: getDelta\n    });\n\n    var events$1 = function (dragConfig, dragState, updateStartState) {\n      var blockerSingleton = value$1();\n      var stopBlocking = function (component) {\n        stop(component, blockerSingleton.get(), dragConfig, dragState);\n        blockerSingleton.clear();\n      };\n      return [\n        run$1(touchstart(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          var stop = function () {\n            return stopBlocking(component);\n          };\n          var dragApi = {\n            drop: stop,\n            delayDrop: noop,\n            forceDrop: stop,\n            move: function (event) {\n              move(component, dragConfig, dragState, TouchData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$1(dragApi));\n          blockerSingleton.set(blocker);\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        }),\n        run$1(touchmove(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          move(component, dragConfig, dragState, TouchData, simulatedEvent.event);\n        }),\n        run$1(touchend(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          stopBlocking(component);\n        }),\n        run$1(touchcancel(), stopBlocking)\n      ];\n    };\n    var schema$4 = __spreadArray(__spreadArray([], schema$6, true), [output$1('dragger', { handlers: handlers(events$1) })], false);\n\n    var events = function (dragConfig, dragState, updateStartState) {\n      return __spreadArray(__spreadArray([], events$2(dragConfig, dragState, updateStartState), true), events$1(dragConfig, dragState, updateStartState), true);\n    };\n    var schema$3 = __spreadArray(__spreadArray([], schema$6, true), [output$1('dragger', { handlers: handlers(events) })], false);\n\n    var mouse = schema$5;\n    var touch = schema$4;\n    var mouseOrTouch = schema$3;\n\n    var DraggingBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        mouse: mouse,\n        touch: touch,\n        mouseOrTouch: mouseOrTouch\n    });\n\n    var init = function () {\n      var previous = Optional.none();\n      var startData = Optional.none();\n      var reset = function () {\n        previous = Optional.none();\n        startData = Optional.none();\n      };\n      var calculateDelta = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.getDelta(old, nu);\n        });\n        previous = Optional.some(nu);\n        return result;\n      };\n      var update = function (mode, dragEvent) {\n        return mode.getData(dragEvent).bind(function (nuData) {\n          return calculateDelta(mode, nuData);\n        });\n      };\n      var setStartData = function (data) {\n        startData = Optional.some(data);\n      };\n      var getStartData = function () {\n        return startData;\n      };\n      var readState = constant$1({});\n      return nu$8({\n        readState: readState,\n        reset: reset,\n        update: update,\n        getStartData: getStartData,\n        setStartData: setStartData\n      });\n    };\n\n    var DragState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init\n    });\n\n    var Dragging = createModes({\n      branchKey: 'mode',\n      branches: DraggingBranches,\n      name: 'dragging',\n      active: {\n        events: function (dragConfig, dragState) {\n          var dragger = dragConfig.dragger;\n          return dragger.handlers(dragConfig, dragState);\n        }\n      },\n      extra: {\n        snap: function (sConfig) {\n          return {\n            sensor: sConfig.sensor,\n            range: sConfig.range,\n            output: sConfig.output,\n            extra: Optional.from(sConfig.extra)\n          };\n        }\n      },\n      state: DragState,\n      apis: DraggingApis\n    });\n\n    var snapWidth = 40;\n    var snapOffset = snapWidth / 2;\n    var calcSnap = function (selectorOpt, td, x, y, width, height) {\n      return selectorOpt.fold(function () {\n        return Dragging.snap({\n          sensor: absolute(x - snapOffset, y - snapOffset),\n          range: SugarPosition(width, height),\n          output: absolute(Optional.some(x), Optional.some(y)),\n          extra: { td: td }\n        });\n      }, function (selectorHandle) {\n        var sensorLeft = x - snapOffset;\n        var sensorTop = y - snapOffset;\n        var sensorWidth = snapWidth;\n        var sensorHeight = snapWidth;\n        var rect = selectorHandle.element.dom.getBoundingClientRect();\n        return Dragging.snap({\n          sensor: absolute(sensorLeft, sensorTop),\n          range: SugarPosition(sensorWidth, sensorHeight),\n          output: absolute(Optional.some(x - rect.width / 2), Optional.some(y - rect.height / 2)),\n          extra: { td: td }\n        });\n      });\n    };\n    var getSnapsConfig = function (getSnapPoints, cell, onChange) {\n      var isSameCell = function (cellOpt, td) {\n        return cellOpt.exists(function (currentTd) {\n          return eq(currentTd, td);\n        });\n      };\n      return {\n        getSnapPoints: getSnapPoints,\n        leftAttr: 'data-drag-left',\n        topAttr: 'data-drag-top',\n        onSensor: function (component, extra) {\n          var td = extra.td;\n          if (!isSameCell(cell.get(), td)) {\n            cell.set(td);\n            onChange(td);\n          }\n        },\n        mustSnap: true\n      };\n    };\n    var createSelector = function (snaps) {\n      return record(Button.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-selector']\n        },\n        buttonBehaviours: derive$1([\n          Dragging.config({\n            mode: 'mouseOrTouch',\n            blockerClass: 'blocker',\n            snaps: snaps\n          }),\n          Unselecting.config({})\n        ]),\n        eventOrder: {\n          mousedown: [\n            'dragging',\n            'alloy.base.behaviour'\n          ],\n          touchstart: [\n            'dragging',\n            'alloy.base.behaviour'\n          ]\n        }\n      }));\n    };\n    var setup$4 = function (editor, sink) {\n      var tlTds = Cell([]);\n      var brTds = Cell([]);\n      var isVisible = Cell(false);\n      var startCell = value$1();\n      var finishCell = value$1();\n      var getTopLeftSnap = function (td) {\n        var box = absolute$2(td);\n        return calcSnap(memTopLeft.getOpt(sink), td, box.x, box.y, box.width, box.height);\n      };\n      var getTopLeftSnaps = function () {\n        return map$2(tlTds.get(), function (td) {\n          return getTopLeftSnap(td);\n        });\n      };\n      var getBottomRightSnap = function (td) {\n        var box = absolute$2(td);\n        return calcSnap(memBottomRight.getOpt(sink), td, box.right, box.bottom, box.width, box.height);\n      };\n      var getBottomRightSnaps = function () {\n        return map$2(brTds.get(), function (td) {\n          return getBottomRightSnap(td);\n        });\n      };\n      var topLeftSnaps = getSnapsConfig(getTopLeftSnaps, startCell, function (start) {\n        finishCell.get().each(function (finish) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var bottomRightSnaps = getSnapsConfig(getBottomRightSnaps, finishCell, function (finish) {\n        startCell.get().each(function (start) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var memTopLeft = createSelector(topLeftSnaps);\n      var memBottomRight = createSelector(bottomRightSnaps);\n      var topLeft = build$1(memTopLeft.asSpec());\n      var bottomRight = build$1(memBottomRight.asSpec());\n      var showOrHideHandle = function (selector, cell, isAbove, isBelow) {\n        var cellRect = cell.dom.getBoundingClientRect();\n        remove$6(selector.element, 'display');\n        var viewportHeight = defaultView(SugarElement.fromDom(editor.getBody())).dom.innerHeight;\n        var aboveViewport = isAbove(cellRect);\n        var belowViewport = isBelow(cellRect, viewportHeight);\n        if (aboveViewport || belowViewport) {\n          set$7(selector.element, 'display', 'none');\n        }\n      };\n      var snapTo = function (selector, cell, getSnapConfig, pos) {\n        var snap = getSnapConfig(cell);\n        Dragging.snapTo(selector, snap);\n        var isAbove = function (rect) {\n          return rect[pos] < 0;\n        };\n        var isBelow = function (rect, viewportHeight) {\n          return rect[pos] > viewportHeight;\n        };\n        showOrHideHandle(selector, cell, isAbove, isBelow);\n      };\n      var snapTopLeft = function (cell) {\n        return snapTo(topLeft, cell, getTopLeftSnap, 'top');\n      };\n      var snapLastTopLeft = function () {\n        return startCell.get().each(snapTopLeft);\n      };\n      var snapBottomRight = function (cell) {\n        return snapTo(bottomRight, cell, getBottomRightSnap, 'bottom');\n      };\n      var snapLastBottomRight = function () {\n        return finishCell.get().each(snapBottomRight);\n      };\n      if (detect$1().deviceType.isTouch()) {\n        editor.on('TableSelectionChange', function (e) {\n          if (!isVisible.get()) {\n            attach(sink, topLeft);\n            attach(sink, bottomRight);\n            isVisible.set(true);\n          }\n          startCell.set(e.start);\n          finishCell.set(e.finish);\n          e.otherCells.each(function (otherCells) {\n            tlTds.set(otherCells.upOrLeftCells);\n            brTds.set(otherCells.downOrRightCells);\n            snapTopLeft(e.start);\n            snapBottomRight(e.finish);\n          });\n        });\n        editor.on('ResizeEditor ResizeWindow ScrollContent', function () {\n          snapLastTopLeft();\n          snapLastBottomRight();\n        });\n        editor.on('TableSelectionClear', function () {\n          if (isVisible.get()) {\n            detach(topLeft);\n            detach(bottomRight);\n            isVisible.set(false);\n          }\n          startCell.clear();\n          finishCell.clear();\n        });\n      }\n    };\n\n    var isHidden = function (elm) {\n      if (elm.nodeType === 1) {\n        if (elm.nodeName === 'BR' || !!elm.getAttribute('data-mce-bogus')) {\n          return true;\n        }\n        if (elm.getAttribute('data-mce-type') === 'bookmark') {\n          return true;\n        }\n      }\n      return false;\n    };\n    var renderElementPath = function (editor, settings, providersBackstage) {\n      if (!settings.delimiter) {\n        settings.delimiter = '\\xBB';\n      }\n      var getDataPath = function (data) {\n        var parts = data || [];\n        var newPathElements = map$2(parts, function (part, index) {\n          return Button.sketch({\n            dom: {\n              tag: 'div',\n              classes: ['tox-statusbar__path-item'],\n              attributes: {\n                'role': 'button',\n                'data-index': index,\n                'tab-index': -1,\n                'aria-level': index + 1\n              },\n              innerHtml: part.name\n            },\n            action: function (_btn) {\n              editor.focus();\n              editor.selection.select(part.element);\n              editor.nodeChanged();\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.button(providersBackstage.isDisabled),\n              receivingConfig()\n            ])\n          });\n        });\n        var divider = {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__path-divider'],\n            attributes: { 'aria-hidden': true },\n            innerHtml: ' ' + settings.delimiter + ' '\n          }\n        };\n        return foldl(newPathElements.slice(1), function (acc, element) {\n          var newAcc = acc;\n          newAcc.push(divider);\n          newAcc.push(element);\n          return newAcc;\n        }, [newPathElements[0]]);\n      };\n      var updatePath = function (parents) {\n        var newPath = [];\n        var i = parents.length;\n        while (i-- > 0) {\n          var parent_1 = parents[i];\n          if (parent_1.nodeType === 1 && !isHidden(parent_1)) {\n            var args = editor.fire('ResolveName', {\n              name: parent_1.nodeName.toLowerCase(),\n              target: parent_1\n            });\n            if (!args.isDefaultPrevented()) {\n              newPath.push({\n                name: args.name,\n                element: parent_1\n              });\n            }\n            if (args.isPropagationStopped()) {\n              break;\n            }\n          }\n        }\n        return newPath;\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar__path'],\n          attributes: { role: 'navigation' }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'flow',\n            selector: 'div[role=button]'\n          }),\n          Disabling.config({ disabled: providersBackstage.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          config('elementPathEvents', [runOnAttached(function (comp, _e) {\n              editor.shortcuts.add('alt+F11', 'focus statusbar elementpath', function () {\n                return Keying.focusIn(comp);\n              });\n              editor.on('NodeChange', function (e) {\n                var newPath = updatePath(e.parents);\n                if (newPath.length > 0) {\n                  Replacing.set(comp, getDataPath(newPath));\n                } else {\n                  Replacing.set(comp, []);\n                }\n              });\n            })])\n        ]),\n        components: []\n      };\n    };\n\n    var ResizeTypes;\n    (function (ResizeTypes) {\n      ResizeTypes[ResizeTypes['None'] = 0] = 'None';\n      ResizeTypes[ResizeTypes['Both'] = 1] = 'Both';\n      ResizeTypes[ResizeTypes['Vertical'] = 2] = 'Vertical';\n    }(ResizeTypes || (ResizeTypes = {})));\n    var getDimensions = function (editor, deltas, resizeType, originalHeight, originalWidth) {\n      var dimensions = {};\n      dimensions.height = calcCappedSize(originalHeight + deltas.top, getMinHeightSetting(editor), getMaxHeightSetting(editor));\n      if (resizeType === ResizeTypes.Both) {\n        dimensions.width = calcCappedSize(originalWidth + deltas.left, getMinWidthSetting(editor), getMaxWidthSetting(editor));\n      }\n      return dimensions;\n    };\n    var resize = function (editor, deltas, resizeType) {\n      var container = SugarElement.fromDom(editor.getContainer());\n      var dimensions = getDimensions(editor, deltas, resizeType, get$b(container), get$a(container));\n      each(dimensions, function (val, dim) {\n        return set$7(container, dim, numToPx(val));\n      });\n      fireResizeEditor(editor);\n    };\n\n    var getResizeType = function (editor) {\n      var fallback = !editor.hasPlugin('autoresize');\n      var resize = editor.getParam('resize', fallback);\n      if (resize === false) {\n        return ResizeTypes.None;\n      } else if (resize === 'both') {\n        return ResizeTypes.Both;\n      } else {\n        return ResizeTypes.Vertical;\n      }\n    };\n    var keyboardHandler = function (editor, resizeType, x, y) {\n      var scale = 20;\n      var delta = SugarPosition(x * scale, y * scale);\n      resize(editor, delta, resizeType);\n      return Optional.some(true);\n    };\n    var renderResizeHandler = function (editor, providersBackstage) {\n      var resizeType = getResizeType(editor);\n      if (resizeType === ResizeTypes.None) {\n        return Optional.none();\n      }\n      return Optional.some(render$3('resize-handle', {\n        tag: 'div',\n        classes: ['tox-statusbar__resize-handle'],\n        attributes: { title: providersBackstage.translate('Resize') },\n        behaviours: [\n          Dragging.config({\n            mode: 'mouse',\n            repositionTarget: false,\n            onDrag: function (_comp, _target, delta) {\n              return resize(editor, delta, resizeType);\n            },\n            blockerClass: 'tox-blocker'\n          }),\n          Keying.config({\n            mode: 'special',\n            onLeft: function () {\n              return keyboardHandler(editor, resizeType, -1, 0);\n            },\n            onRight: function () {\n              return keyboardHandler(editor, resizeType, 1, 0);\n            },\n            onUp: function () {\n              return keyboardHandler(editor, resizeType, 0, -1);\n            },\n            onDown: function () {\n              return keyboardHandler(editor, resizeType, 0, 1);\n            }\n          }),\n          Tabstopping.config({}),\n          Focusing.config({})\n        ]\n      }, providersBackstage.icons));\n    };\n\n    var renderWordCount = function (editor, providersBackstage) {\n      var _a;\n      var replaceCountText = function (comp, count, mode) {\n        return Replacing.set(comp, [text$1(providersBackstage.translate([\n            '{0} ' + mode,\n            count[mode]\n          ]))]);\n      };\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: ['tox-statusbar__wordcount']\n        },\n        components: [],\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(providersBackstage.isDisabled),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: {\n                mode: 'words',\n                count: {\n                  words: 0,\n                  characters: 0\n                }\n              }\n            }\n          }),\n          config('wordcount-events', [\n            runOnExecute$1(function (comp) {\n              var currentVal = Representing.getValue(comp);\n              var newMode = currentVal.mode === 'words' ? 'characters' : 'words';\n              Representing.setValue(comp, {\n                mode: newMode,\n                count: currentVal.count\n              });\n              replaceCountText(comp, currentVal.count, newMode);\n            }),\n            runOnAttached(function (comp) {\n              editor.on('wordCountUpdate', function (e) {\n                var mode = Representing.getValue(comp).mode;\n                Representing.setValue(comp, {\n                  mode: mode,\n                  count: e.wordCount\n                });\n                replaceCountText(comp, e.wordCount, mode);\n              });\n            })\n          ])\n        ]),\n        eventOrder: (_a = {}, _a[execute$5()] = [\n          'disabling',\n          'alloy.base.behaviour',\n          'wordcount-events'\n        ], _a)\n      });\n    };\n\n    var renderStatusbar = function (editor, providersBackstage) {\n      var renderBranding = function () {\n        var label = global$e.translate([\n          'Powered by {0}',\n          'Tiny'\n        ]);\n        var linkHtml = '<a href=\"https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5\" rel=\"noopener\" target=\"_blank\" tabindex=\"-1\" aria-label=\"' + label + '\">' + label + '</a>';\n        return {\n          dom: {\n            tag: 'span',\n            classes: ['tox-statusbar__branding'],\n            innerHtml: linkHtml\n          }\n        };\n      };\n      var getTextComponents = function () {\n        var components = [];\n        if (editor.getParam('elementpath', true, 'boolean')) {\n          components.push(renderElementPath(editor, {}, providersBackstage));\n        }\n        if (editor.hasPlugin('wordcount')) {\n          components.push(renderWordCount(editor, providersBackstage));\n        }\n        if (editor.getParam('branding', true, 'boolean')) {\n          components.push(renderBranding());\n        }\n        if (components.length > 0) {\n          return [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-statusbar__text-container']\n              },\n              components: components\n            }];\n        }\n        return [];\n      };\n      var getComponents = function () {\n        var components = getTextComponents();\n        var resizeHandler = renderResizeHandler(editor, providersBackstage);\n        return components.concat(resizeHandler.toArray());\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar']\n        },\n        components: getComponents()\n      };\n    };\n\n    var setup$3 = function (editor) {\n      var _a;\n      var isInline = editor.inline;\n      var mode = isInline ? Inline : Iframe;\n      var header = isStickyToolbar(editor) ? StickyHeader : StaticHeader;\n      var lazyOuterContainer = Optional.none();\n      var platform = detect$1();\n      var isIE = platform.browser.isIE();\n      var platformClasses = isIE ? ['tox-platform-ie'] : [];\n      var isTouch = platform.deviceType.isTouch();\n      var touchPlatformClass = 'tox-platform-touch';\n      var deviceClasses = isTouch ? [touchPlatformClass] : [];\n      var isToolbarBottom = isToolbarLocationBottom(editor);\n      var uiContainer = getUiContainer(editor);\n      var dirAttributes = global$e.isRtl() ? { attributes: { dir: 'rtl' } } : {};\n      var verticalDirAttributes = { attributes: (_a = {}, _a[Attribute] = isToolbarBottom ? AttributeValue.BottomToTop : AttributeValue.TopToBottom, _a) };\n      var lazyHeader = function () {\n        return lazyOuterContainer.bind(OuterContainer.getHeader);\n      };\n      var isHeaderDocked = function () {\n        return header.isDocked(lazyHeader);\n      };\n      var resizeUiMothership = function () {\n        set$7(uiMothership.element, 'width', document.body.clientWidth + 'px');\n      };\n      var makeSinkDefinition = function () {\n        var isGridUiContainer = eq(body(), uiContainer) && get$c(uiContainer, 'display') === 'grid';\n        var sinkSpec = {\n          dom: __assign({\n            tag: 'div',\n            classes: [\n              'tox',\n              'tox-silver-sink',\n              'tox-tinymce-aux'\n            ].concat(platformClasses).concat(deviceClasses)\n          }, dirAttributes),\n          behaviours: derive$1([Positioning.config({\n              useFixed: function () {\n                return isHeaderDocked();\n              }\n            })])\n        };\n        var reactiveWidthSpec = {\n          dom: { styles: { width: document.body.clientWidth + 'px' } },\n          events: derive$2([run$1(windowResize(), resizeUiMothership)])\n        };\n        return deepMerge(sinkSpec, isGridUiContainer ? reactiveWidthSpec : {});\n      };\n      var sink = build$1(makeSinkDefinition());\n      var lazySink = function () {\n        return Result.value(sink);\n      };\n      var memAnchorBar = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-anchorbar']\n        }\n      });\n      var lazyAnchorBar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return memAnchorBar.getOpt(container);\n        }).getOrDie('Could not find a anchor bar element');\n      };\n      var lazyToolbar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getToolbar(container);\n        }).getOrDie('Could not find more toolbar element');\n      };\n      var lazyThrobber = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getThrobber(container);\n        }).getOrDie('Could not find throbber element');\n      };\n      var backstage = init$7(sink, editor, lazyAnchorBar);\n      var partMenubar = OuterContainer.parts.menubar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-menubar']\n        },\n        backstage: backstage,\n        onEscape: function () {\n          editor.focus();\n        }\n      });\n      var toolbarMode = getToolbarMode(editor);\n      var partToolbar = OuterContainer.parts.toolbar(__assign({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar']\n        },\n        getSink: lazySink,\n        providers: backstage.shared.providers,\n        onEscape: function () {\n          editor.focus();\n        },\n        type: toolbarMode,\n        lazyToolbar: lazyToolbar,\n        lazyHeader: function () {\n          return lazyHeader().getOrDie('Could not find header element');\n        }\n      }, verticalDirAttributes));\n      var partMultipleToolbar = OuterContainer.parts['multiple-toolbar']({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        providers: backstage.shared.providers,\n        onEscape: function () {\n          editor.focus();\n        },\n        type: toolbarMode\n      });\n      var partSocket = OuterContainer.parts.socket({\n        dom: {\n          tag: 'div',\n          classes: ['tox-edit-area']\n        }\n      });\n      var partSidebar = OuterContainer.parts.sidebar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar']\n        }\n      });\n      var partThrobber = OuterContainer.parts.throbber({\n        dom: {\n          tag: 'div',\n          classes: ['tox-throbber']\n        },\n        backstage: backstage\n      });\n      var sb = editor.getParam('statusbar', true, 'boolean');\n      var statusbar = sb && !isInline ? Optional.some(renderStatusbar(editor, backstage.shared.providers)) : Optional.none();\n      var socketSidebarContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar-wrap']\n        },\n        components: [\n          partSocket,\n          partSidebar\n        ]\n      };\n      var hasMultipleToolbar = isMultipleToolbars(editor);\n      var hasToolbar = isToolbarEnabled(editor);\n      var hasMenubar = isMenubarEnabled(editor);\n      var getPartToolbar = function () {\n        if (hasMultipleToolbar) {\n          return [partMultipleToolbar];\n        } else if (hasToolbar) {\n          return [partToolbar];\n        } else {\n          return [];\n        }\n      };\n      var partHeader = OuterContainer.parts.header({\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-editor-header']\n        }, verticalDirAttributes),\n        components: flatten([\n          hasMenubar ? [partMenubar] : [],\n          getPartToolbar(),\n          useFixedContainer(editor) ? [] : [memAnchorBar.asSpec()]\n        ]),\n        sticky: isStickyToolbar(editor),\n        editor: editor,\n        sharedBackstage: backstage.shared\n      });\n      var editorComponents = flatten([\n        isToolbarBottom ? [] : [partHeader],\n        isInline ? [] : [socketSidebarContainer],\n        isToolbarBottom ? [partHeader] : []\n      ]);\n      var editorContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-editor-container']\n        },\n        components: editorComponents\n      };\n      var containerComponents = flatten([\n        [editorContainer],\n        isInline ? [] : statusbar.toArray(),\n        [partThrobber]\n      ]);\n      var isHidden = isDistractionFree(editor);\n      var attributes = __assign(__assign({ role: 'application' }, global$e.isRtl() ? { dir: 'rtl' } : {}), isHidden ? { 'aria-hidden': 'true' } : {});\n      var outerContainer = build$1(OuterContainer.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox',\n            'tox-tinymce'\n          ].concat(isInline ? ['tox-tinymce-inline'] : []).concat(isToolbarBottom ? ['tox-tinymce--toolbar-bottom'] : []).concat(deviceClasses).concat(platformClasses),\n          styles: __assign({ visibility: 'hidden' }, isHidden ? {\n            opacity: '0',\n            border: '0'\n          } : {}),\n          attributes: attributes\n        },\n        components: containerComponents,\n        behaviours: derive$1([\n          receivingConfig(),\n          Disabling.config({ disableClass: 'tox-tinymce--disabled' }),\n          Keying.config({\n            mode: 'cyclic',\n            selector: '.tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle'\n          })\n        ])\n      }));\n      lazyOuterContainer = Optional.some(outerContainer);\n      editor.shortcuts.add('alt+F9', 'focus menubar', function () {\n        OuterContainer.focusMenubar(outerContainer);\n      });\n      editor.shortcuts.add('alt+F10', 'focus toolbar', function () {\n        OuterContainer.focusToolbar(outerContainer);\n      });\n      editor.addCommand('ToggleToolbarDrawer', function () {\n        OuterContainer.toggleToolbarDrawer(outerContainer);\n      });\n      editor.addQueryStateHandler('ToggleToolbarDrawer', function () {\n        return OuterContainer.isToolbarDrawerToggled(outerContainer);\n      });\n      var mothership = takeover(outerContainer);\n      var uiMothership = takeover(sink);\n      setup$b(editor, mothership, uiMothership);\n      var getUi = function () {\n        var channels = {\n          broadcastAll: uiMothership.broadcast,\n          broadcastOn: uiMothership.broadcastOn,\n          register: noop\n        };\n        return { channels: channels };\n      };\n      var setEditorSize = function () {\n        var parsedHeight = numToPx(getHeightWithFallback(editor));\n        var parsedWidth = numToPx(getWidthWithFallback(editor));\n        if (!editor.inline) {\n          if (isValidValue('div', 'width', parsedWidth)) {\n            set$7(outerContainer.element, 'width', parsedWidth);\n          }\n          if (isValidValue('div', 'height', parsedHeight)) {\n            set$7(outerContainer.element, 'height', parsedHeight);\n          } else {\n            set$7(outerContainer.element, 'height', '200px');\n          }\n        }\n        return parsedHeight;\n      };\n      var renderUI = function () {\n        header.setup(editor, backstage.shared, lazyHeader);\n        setup$6(editor, backstage);\n        setup$5(editor, lazySink, backstage);\n        setup$8(editor);\n        setup$7(editor, lazyThrobber, backstage.shared);\n        map$1(getToolbarGroups(editor), function (toolbarGroupButtonConfig, name) {\n          editor.ui.registry.addGroupToolbarButton(name, toolbarGroupButtonConfig);\n        });\n        var _a = editor.ui.registry.getAll(), buttons = _a.buttons, menuItems = _a.menuItems, contextToolbars = _a.contextToolbars, sidebars = _a.sidebars;\n        var toolbarOpt = getMultipleToolbarsSetting(editor);\n        var rawUiConfig = {\n          menuItems: menuItems,\n          menus: getMenus(editor),\n          menubar: getMenubar(editor),\n          toolbar: toolbarOpt.getOrThunk(function () {\n            return getToolbar(editor);\n          }),\n          allowToolbarGroups: toolbarMode === ToolbarMode.floating,\n          buttons: buttons,\n          sidebar: sidebars\n        };\n        register$7(editor, contextToolbars, sink, { backstage: backstage });\n        setup$4(editor, sink);\n        var elm = editor.getElement();\n        var height = setEditorSize();\n        var uiComponents = {\n          mothership: mothership,\n          uiMothership: uiMothership,\n          outerContainer: outerContainer\n        };\n        var args = {\n          targetNode: elm,\n          height: height\n        };\n        return mode.render(editor, uiComponents, rawUiConfig, backstage, args);\n      };\n      return {\n        mothership: mothership,\n        uiMothership: uiMothership,\n        backstage: backstage,\n        renderUI: renderUI,\n        getUi: getUi\n      };\n    };\n\n    var describedBy = function (describedElement, describeElement) {\n      var describeId = Optional.from(get$d(describedElement, 'id')).fold(function () {\n        var id = generate$6('dialog-describe');\n        set$8(describeElement, 'id', id);\n        return id;\n      }, identity$1);\n      set$8(describedElement, 'aria-describedby', describeId);\n    };\n\n    var labelledBy = function (labelledElement, labelElement) {\n      var labelId = getOpt(labelledElement, 'id').fold(function () {\n        var id = generate$6('dialog-label');\n        set$8(labelElement, 'id', id);\n        return id;\n      }, identity$1);\n      set$8(labelledElement, 'aria-labelledby', labelId);\n    };\n\n    var schema$2 = constant$1([\n      required$1('lazySink'),\n      option('dragBlockClass'),\n      defaultedFunction('getBounds', win),\n      defaulted('useTabstopAt', always),\n      defaulted('eventOrder', {}),\n      field('modalBehaviours', [Keying]),\n      onKeyboardHandler('onExecute'),\n      onStrictKeyboardHandler('onEscape')\n    ]);\n    var basic = { sketch: identity$1 };\n    var parts$2 = constant$1([\n      optional({\n        name: 'draghandle',\n        overrides: function (detail, spec) {\n          return {\n            behaviours: derive$1([Dragging.config({\n                mode: 'mouse',\n                getTarget: function (handle) {\n                  return ancestor(handle, '[role=\"dialog\"]').getOr(handle);\n                },\n                blockerClass: detail.dragBlockClass.getOrDie(new Error('The drag blocker class was not specified for a dialog with a drag handle: \\n' + JSON.stringify(spec, null, 2)).message),\n                getBounds: detail.getDragBounds\n              })])\n          };\n        }\n      }),\n      required({\n        schema: [required$1('dom')],\n        name: 'title'\n      }),\n      required({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'close'\n      }),\n      required({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'body'\n      }),\n      optional({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'footer'\n      }),\n      external$1({\n        factory: {\n          sketch: function (spec, detail) {\n            return __assign(__assign({}, spec), {\n              dom: detail.dom,\n              components: detail.components\n            });\n          }\n        },\n        schema: [\n          defaulted('dom', {\n            tag: 'div',\n            styles: {\n              position: 'fixed',\n              left: '0px',\n              top: '0px',\n              right: '0px',\n              bottom: '0px'\n            }\n          }),\n          defaulted('components', [])\n        ],\n        name: 'blocker'\n      })\n    ]);\n\n    var factory$4 = function (detail, components, spec, externals) {\n      var _a;\n      var dialogComp = value$1();\n      var showDialog = function (dialog) {\n        dialogComp.set(dialog);\n        var sink = detail.lazySink(dialog).getOrDie();\n        var externalBlocker = externals.blocker();\n        var blocker = sink.getSystem().build(__assign(__assign({}, externalBlocker), {\n          components: externalBlocker.components.concat([premade(dialog)]),\n          behaviours: derive$1([\n            Focusing.config({}),\n            config('dialog-blocker-events', [runOnSource(focusin(), function () {\n                Keying.focusIn(dialog);\n              })])\n          ])\n        }));\n        attach(sink, blocker);\n        Keying.focusIn(dialog);\n      };\n      var hideDialog = function (dialog) {\n        dialogComp.clear();\n        parent(dialog.element).each(function (blockerDom) {\n          dialog.getSystem().getByDom(blockerDom).each(function (blocker) {\n            detach(blocker);\n          });\n        });\n      };\n      var getDialogBody = function (dialog) {\n        return getPartOrDie(dialog, detail, 'body');\n      };\n      var getDialogFooter = function (dialog) {\n        return getPartOrDie(dialog, detail, 'footer');\n      };\n      var setBusy = function (dialog, getBusySpec) {\n        Blocking.block(dialog, getBusySpec);\n      };\n      var setIdle = function (dialog) {\n        Blocking.unblock(dialog);\n      };\n      var modalEventsId = generate$6('modal-events');\n      var eventOrder = __assign(__assign({}, detail.eventOrder), (_a = {}, _a[attachedToDom()] = [modalEventsId].concat(detail.eventOrder['alloy.system.attached'] || []), _a));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: {\n          show: showDialog,\n          hide: hideDialog,\n          getBody: getDialogBody,\n          getFooter: getDialogFooter,\n          setIdle: setIdle,\n          setBusy: setBusy\n        },\n        eventOrder: eventOrder,\n        domModification: {\n          attributes: {\n            'role': 'dialog',\n            'aria-modal': 'true'\n          }\n        },\n        behaviours: augment(detail.modalBehaviours, [\n          Replacing.config({}),\n          Keying.config({\n            mode: 'cyclic',\n            onEnter: detail.onExecute,\n            onEscape: detail.onEscape,\n            useTabstopAt: detail.useTabstopAt\n          }),\n          Blocking.config({ getRoot: dialogComp.get }),\n          config(modalEventsId, [runOnAttached(function (c) {\n              labelledBy(c.element, getPartOrDie(c, detail, 'title').element);\n              describedBy(c.element, getPartOrDie(c, detail, 'body').element);\n            })])\n        ])\n      };\n    };\n    var ModalDialog = composite({\n      name: 'ModalDialog',\n      configFields: schema$2(),\n      partFields: parts$2(),\n      factory: factory$4,\n      apis: {\n        show: function (apis, dialog) {\n          apis.show(dialog);\n        },\n        hide: function (apis, dialog) {\n          apis.hide(dialog);\n        },\n        getBody: function (apis, dialog) {\n          return apis.getBody(dialog);\n        },\n        getFooter: function (apis, dialog) {\n          return apis.getFooter(dialog);\n        },\n        setBusy: function (apis, dialog, getBusySpec) {\n          apis.setBusy(dialog, getBusySpec);\n        },\n        setIdle: function (apis, dialog) {\n          apis.setIdle(dialog);\n        }\n      }\n    });\n\n    var dialogToggleMenuItemSchema = objOf([\n      requiredString('type'),\n      requiredString('name')\n    ].concat(commonMenuItemFields));\n    var dialogToggleMenuItemDataProcessor = boolean;\n\n    var baseFooterButtonFields = [\n      field$1('name', 'name', defaultedThunk(function () {\n        return generate$6('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedStringEnum('align', 'end', [\n        'start',\n        'end'\n      ]),\n      defaultedBoolean('primary', false),\n      defaultedBoolean('disabled', false)\n    ];\n    var dialogFooterButtonFields = __spreadArray(__spreadArray([], baseFooterButtonFields, true), [requiredString('text')], false);\n    var normalFooterButtonFields = __spreadArray([requiredStringEnum('type', [\n        'submit',\n        'cancel',\n        'custom'\n      ])], dialogFooterButtonFields, true);\n    var menuFooterButtonFields = __spreadArray([\n      requiredStringEnum('type', ['menu']),\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      requiredArrayOf('items', dialogToggleMenuItemSchema)\n    ], baseFooterButtonFields, true);\n    var dialogFooterButtonSchema = choose$1('type', {\n      submit: normalFooterButtonFields,\n      cancel: normalFooterButtonFields,\n      custom: normalFooterButtonFields,\n      menu: menuFooterButtonFields\n    });\n\n    var alertBannerFields = [\n      requiredString('type'),\n      requiredString('text'),\n      requiredStringEnum('level', [\n        'info',\n        'warn',\n        'error',\n        'success'\n      ]),\n      requiredString('icon'),\n      defaulted('url', '')\n    ];\n    var alertBannerSchema = objOf(alertBannerFields);\n\n    var createBarFields = function (itemsField) {\n      return [\n        requiredString('type'),\n        itemsField\n      ];\n    };\n\n    var buttonFields = [\n      requiredString('type'),\n      requiredString('text'),\n      defaultedBoolean('disabled', false),\n      defaultedBoolean('primary', false),\n      field$1('name', 'name', defaultedThunk(function () {\n        return generate$6('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedBoolean('borderless', false)\n    ];\n    var buttonSchema = objOf(buttonFields);\n\n    var checkboxFields = [\n      requiredString('type'),\n      requiredString('name'),\n      requiredString('label'),\n      defaultedBoolean('disabled', false)\n    ];\n    var checkboxSchema = objOf(checkboxFields);\n    var checkboxDataProcessor = boolean;\n\n    var formComponentFields = [\n      requiredString('type'),\n      requiredString('name')\n    ];\n    var formComponentWithLabelFields = formComponentFields.concat([optionString('label')]);\n\n    var collectionFields = formComponentWithLabelFields.concat([defaulted('columns', 'auto')]);\n    var collectionSchema = objOf(collectionFields);\n    var collectionDataProcessor = arrOfObj([\n      requiredString('value'),\n      requiredString('text'),\n      requiredString('icon')\n    ]);\n\n    var colorInputFields = formComponentWithLabelFields;\n    var colorInputSchema = objOf(colorInputFields);\n    var colorInputDataProcessor = string;\n\n    var colorPickerFields = formComponentWithLabelFields;\n    var colorPickerSchema = objOf(colorPickerFields);\n    var colorPickerDataProcessor = string;\n\n    var customEditorFields = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      requiredString('scriptId'),\n      requiredString('scriptUrl'),\n      defaultedPostMsg('settings', undefined)\n    ]);\n    var customEditorFieldsOld = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      requiredFunction('init')\n    ]);\n    var customEditorSchema = valueOf(function (v) {\n      return asRaw('customeditor.old', objOfOnly(customEditorFieldsOld), v).orThunk(function () {\n        return asRaw('customeditor.new', objOfOnly(customEditorFields), v);\n      });\n    });\n    var customEditorDataProcessor = string;\n\n    var dropZoneFields = formComponentWithLabelFields;\n    var dropZoneSchema = objOf(dropZoneFields);\n    var dropZoneDataProcessor = arrOfVal();\n\n    var createGridFields = function (itemsField) {\n      return [\n        requiredString('type'),\n        requiredNumber('columns'),\n        itemsField\n      ];\n    };\n\n    var htmlPanelFields = [\n      requiredString('type'),\n      requiredString('html'),\n      defaultedStringEnum('presets', 'presentation', [\n        'presentation',\n        'document'\n      ])\n    ];\n    var htmlPanelSchema = objOf(htmlPanelFields);\n\n    var iframeFields = formComponentWithLabelFields.concat([defaultedBoolean('sandboxed', true)]);\n    var iframeSchema = objOf(iframeFields);\n    var iframeDataProcessor = string;\n\n    var imageToolsFields = formComponentWithLabelFields.concat([requiredOf('currentState', objOf([\n        required$1('blob'),\n        requiredString('url')\n      ]))]);\n    var imageToolsSchema = objOf(imageToolsFields);\n\n    var inputFields = formComponentWithLabelFields.concat([\n      optionString('inputMode'),\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var inputSchema = objOf(inputFields);\n    var inputDataProcessor = string;\n\n    var createLabelFields = function (itemsField) {\n      return [\n        requiredString('type'),\n        requiredString('label'),\n        itemsField\n      ];\n    };\n\n    var listBoxSingleItemFields = [\n      requiredString('text'),\n      requiredString('value')\n    ];\n    var listBoxNestedItemFields = [\n      requiredString('text'),\n      requiredArrayOf('items', thunkOf('items', function () {\n        return listBoxItemSchema;\n      }))\n    ];\n    var listBoxItemSchema = oneOf([\n      objOf(listBoxSingleItemFields),\n      objOf(listBoxNestedItemFields)\n    ]);\n    var listBoxFields = formComponentWithLabelFields.concat([\n      requiredArrayOf('items', listBoxItemSchema),\n      defaultedBoolean('disabled', false)\n    ]);\n    var listBoxSchema = objOf(listBoxFields);\n    var listBoxDataProcessor = string;\n\n    var selectBoxFields = formComponentWithLabelFields.concat([\n      requiredArrayOfObj('items', [\n        requiredString('text'),\n        requiredString('value')\n      ]),\n      defaultedNumber('size', 1),\n      defaultedBoolean('disabled', false)\n    ]);\n    var selectBoxSchema = objOf(selectBoxFields);\n    var selectBoxDataProcessor = string;\n\n    var sizeInputFields = formComponentWithLabelFields.concat([\n      defaultedBoolean('constrain', true),\n      defaultedBoolean('disabled', false)\n    ]);\n    var sizeInputSchema = objOf(sizeInputFields);\n    var sizeInputDataProcessor = objOf([\n      requiredString('width'),\n      requiredString('height')\n    ]);\n\n    var tableFields = [\n      requiredString('type'),\n      requiredArrayOf('header', string),\n      requiredArrayOf('cells', arrOf(string))\n    ];\n    var tableSchema = objOf(tableFields);\n\n    var textAreaFields = formComponentWithLabelFields.concat([\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var textAreaSchema = objOf(textAreaFields);\n    var textAreaDataProcessor = string;\n\n    var urlInputFields = formComponentWithLabelFields.concat([\n      defaultedStringEnum('filetype', 'file', [\n        'image',\n        'media',\n        'file'\n      ]),\n      defaulted('disabled', false)\n    ]);\n    var urlInputSchema = objOf(urlInputFields);\n    var urlInputDataProcessor = objOf([\n      requiredString('value'),\n      defaulted('meta', {})\n    ]);\n\n    var createItemsField = function (name) {\n      return field$1('items', 'items', required$2(), arrOf(valueOf(function (v) {\n        return asRaw('Checking item of ' + name, itemSchema, v).fold(function (sErr) {\n          return Result.error(formatError(sErr));\n        }, function (passValue) {\n          return Result.value(passValue);\n        });\n      })));\n    };\n    var itemSchema = valueThunk(function () {\n      return choose$2('type', {\n        alertbanner: alertBannerSchema,\n        bar: objOf(createBarFields(createItemsField('bar'))),\n        button: buttonSchema,\n        checkbox: checkboxSchema,\n        colorinput: colorInputSchema,\n        colorpicker: colorPickerSchema,\n        dropzone: dropZoneSchema,\n        grid: objOf(createGridFields(createItemsField('grid'))),\n        iframe: iframeSchema,\n        input: inputSchema,\n        listbox: listBoxSchema,\n        selectbox: selectBoxSchema,\n        sizeinput: sizeInputSchema,\n        textarea: textAreaSchema,\n        urlinput: urlInputSchema,\n        customeditor: customEditorSchema,\n        htmlpanel: htmlPanelSchema,\n        imagetools: imageToolsSchema,\n        collection: collectionSchema,\n        label: objOf(createLabelFields(createItemsField('label'))),\n        table: tableSchema,\n        panel: panelSchema\n      });\n    });\n    var panelFields = [\n      requiredString('type'),\n      defaulted('classes', []),\n      requiredArrayOf('items', itemSchema)\n    ];\n    var panelSchema = objOf(panelFields);\n\n    var tabFields = [\n      field$1('name', 'name', defaultedThunk(function () {\n        return generate$6('tab-name');\n      }), string),\n      requiredString('title'),\n      requiredArrayOf('items', itemSchema)\n    ];\n    var tabPanelFields = [\n      requiredString('type'),\n      requiredArrayOfObj('tabs', tabFields)\n    ];\n    var tabPanelSchema = objOf(tabPanelFields);\n\n    var dialogButtonFields = dialogFooterButtonFields;\n    var dialogButtonSchema = dialogFooterButtonSchema;\n    var dialogSchema = objOf([\n      requiredString('title'),\n      requiredOf('body', choose$2('type', {\n        panel: panelSchema,\n        tabpanel: tabPanelSchema\n      })),\n      defaultedString('size', 'normal'),\n      requiredArrayOf('buttons', dialogButtonSchema),\n      defaulted('initialData', {}),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onChange', noop),\n      defaultedFunction('onSubmit', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onCancel', noop),\n      defaulted('onTabChange', noop)\n    ]);\n    var createDialog = function (spec) {\n      return asRaw('dialog', dialogSchema, spec);\n    };\n\n    var urlDialogButtonSchema = objOf(__spreadArray([requiredStringEnum('type', [\n        'cancel',\n        'custom'\n      ])], dialogButtonFields, true));\n    var urlDialogSchema = objOf([\n      requiredString('title'),\n      requiredString('url'),\n      optionNumber('height'),\n      optionNumber('width'),\n      optionArrayOf('buttons', urlDialogButtonSchema),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onCancel', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onMessage', noop)\n    ]);\n    var createUrlDialog = function (spec) {\n      return asRaw('dialog', urlDialogSchema, spec);\n    };\n\n    var getAllObjects = function (obj) {\n      if (isObject(obj)) {\n        return [obj].concat(bind$3(values(obj), getAllObjects));\n      } else if (isArray(obj)) {\n        return bind$3(obj, getAllObjects);\n      } else {\n        return [];\n      }\n    };\n\n    var isNamedItem = function (obj) {\n      return isString(obj.type) && isString(obj.name);\n    };\n    var dataProcessors = {\n      checkbox: checkboxDataProcessor,\n      colorinput: colorInputDataProcessor,\n      colorpicker: colorPickerDataProcessor,\n      dropzone: dropZoneDataProcessor,\n      input: inputDataProcessor,\n      iframe: iframeDataProcessor,\n      sizeinput: sizeInputDataProcessor,\n      selectbox: selectBoxDataProcessor,\n      listbox: listBoxDataProcessor,\n      size: sizeInputDataProcessor,\n      textarea: textAreaDataProcessor,\n      urlinput: urlInputDataProcessor,\n      customeditor: customEditorDataProcessor,\n      collection: collectionDataProcessor,\n      togglemenuitem: dialogToggleMenuItemDataProcessor\n    };\n    var getDataProcessor = function (item) {\n      return Optional.from(dataProcessors[item.type]);\n    };\n    var getNamedItems = function (structure) {\n      return filter$2(getAllObjects(structure), isNamedItem);\n    };\n\n    var createDataValidator = function (structure) {\n      var namedItems = getNamedItems(structure);\n      var fields = bind$3(namedItems, function (item) {\n        return getDataProcessor(item).fold(function () {\n          return [];\n        }, function (schema) {\n          return [requiredOf(item.name, schema)];\n        });\n      });\n      return objOf(fields);\n    };\n\n    var extract = function (structure) {\n      var internalDialog = getOrDie(createDialog(structure));\n      var dataValidator = createDataValidator(structure);\n      var initialData = structure.initialData;\n      return {\n        internalDialog: internalDialog,\n        dataValidator: dataValidator,\n        initialData: initialData\n      };\n    };\n    var DialogManager = {\n      open: function (factory, structure) {\n        var extraction = extract(structure);\n        return factory(extraction.internalDialog, extraction.initialData, extraction.dataValidator);\n      },\n      openUrl: function (factory, structure) {\n        var internalDialog = getOrDie(createUrlDialog(structure));\n        return factory(internalDialog);\n      },\n      redial: function (structure) {\n        return extract(structure);\n      }\n    };\n\n    var toValidValues = function (values) {\n      var errors = [];\n      var result = {};\n      each(values, function (value, name) {\n        value.fold(function () {\n          errors.push(name);\n        }, function (v) {\n          result[name] = v;\n        });\n      });\n      return errors.length > 0 ? Result.error(errors) : Result.value(result);\n    };\n\n    var renderBodyPanel = function (spec, backstage) {\n      var memForm = record(Form.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form'].concat(spec.classes)\n          },\n          components: map$2(spec.items, function (item) {\n            return interpretInForm(parts, item, backstage);\n          })\n        };\n      }));\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [memForm.asSpec()]\n          }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          }),\n          ComposingConfigs.memento(memForm),\n          RepresentingConfigs.memento(memForm, {\n            postprocess: function (formValue) {\n              return toValidValues(formValue).fold(function (err) {\n                console.error(err);\n                return {};\n              }, identity$1);\n            }\n          })\n        ])\n      };\n    };\n\n    var factory$3 = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events$a(detail.action),\n        behaviours: augment(detail.tabButtonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          })\n        ]),\n        domModification: detail.domModification\n      };\n    };\n    var TabButton = single({\n      name: 'TabButton',\n      configFields: [\n        defaulted('uid', undefined),\n        required$1('value'),\n        field$1('dom', 'dom', mergeWithThunk(function () {\n          return {\n            attributes: {\n              'role': 'tab',\n              'id': generate$6('aria'),\n              'aria-selected': 'false'\n            }\n          };\n        }), anyValue()),\n        option('action'),\n        defaulted('domModification', {}),\n        field('tabButtonBehaviours', [\n          Focusing,\n          Keying,\n          Representing\n        ]),\n        required$1('view')\n      ],\n      factory: factory$3\n    });\n\n    var schema$1 = constant$1([\n      required$1('tabs'),\n      required$1('dom'),\n      defaulted('clickToDismiss', false),\n      field('tabbarBehaviours', [\n        Highlighting,\n        Keying\n      ]),\n      markers$1([\n        'tabClass',\n        'selectedClass'\n      ])\n    ]);\n    var tabsPart = group({\n      factory: TabButton,\n      name: 'tabs',\n      unit: 'tab',\n      overrides: function (barDetail) {\n        var dismissTab$1 = function (tabbar, button) {\n          Highlighting.dehighlight(tabbar, button);\n          emitWith(tabbar, dismissTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        var changeTab$1 = function (tabbar, button) {\n          Highlighting.highlight(tabbar, button);\n          emitWith(tabbar, changeTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        return {\n          action: function (button) {\n            var tabbar = button.getSystem().getByUid(barDetail.uid).getOrDie();\n            var activeButton = Highlighting.isHighlighted(tabbar, button);\n            var response = function () {\n              if (activeButton && barDetail.clickToDismiss) {\n                return dismissTab$1;\n              } else if (!activeButton) {\n                return changeTab$1;\n              } else {\n                return noop;\n              }\n            }();\n            response(tabbar, button);\n          },\n          domModification: { classes: [barDetail.markers.tabClass] }\n        };\n      }\n    });\n    var parts$1 = constant$1([tabsPart]);\n\n    var factory$2 = function (detail, components, _spec, _externals) {\n      return {\n        'uid': detail.uid,\n        'dom': detail.dom,\n        components: components,\n        'debug.sketcher': 'Tabbar',\n        'domModification': { attributes: { role: 'tablist' } },\n        'behaviours': augment(detail.tabbarBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedClass,\n            itemClass: detail.markers.tabClass,\n            onHighlight: function (tabbar, tab) {\n              set$8(tab.element, 'aria-selected', 'true');\n            },\n            onDehighlight: function (tabbar, tab) {\n              set$8(tab.element, 'aria-selected', 'false');\n            }\n          }),\n          Keying.config({\n            mode: 'flow',\n            getInitial: function (tabbar) {\n              return Highlighting.getHighlighted(tabbar).map(function (tab) {\n                return tab.element;\n              });\n            },\n            selector: '.' + detail.markers.tabClass,\n            executeOnMove: true\n          })\n        ])\n      };\n    };\n    var Tabbar = composite({\n      name: 'Tabbar',\n      configFields: schema$1(),\n      partFields: parts$1(),\n      factory: factory$2\n    });\n\n    var factory$1 = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.tabviewBehaviours, [Replacing.config({})]),\n        domModification: { attributes: { role: 'tabpanel' } }\n      };\n    };\n    var Tabview = single({\n      name: 'Tabview',\n      configFields: [field('tabviewBehaviours', [Replacing])],\n      factory: factory$1\n    });\n\n    var schema = constant$1([\n      defaulted('selectFirst', true),\n      onHandler('onChangeTab'),\n      onHandler('onDismissTab'),\n      defaulted('tabs', []),\n      field('tabSectionBehaviours', [])\n    ]);\n    var barPart = required({\n      factory: Tabbar,\n      schema: [\n        required$1('dom'),\n        requiredObjOf('markers', [\n          required$1('tabClass'),\n          required$1('selectedClass')\n        ])\n      ],\n      name: 'tabbar',\n      defaults: function (detail) {\n        return { tabs: detail.tabs };\n      }\n    });\n    var viewPart = required({\n      factory: Tabview,\n      name: 'tabview'\n    });\n    var parts = constant$1([\n      barPart,\n      viewPart\n    ]);\n\n    var factory = function (detail, components, _spec, _externals) {\n      var changeTab$1 = function (button) {\n        var tabValue = Representing.getValue(button);\n        getPart(button, detail, 'tabview').each(function (tabview) {\n          var tabWithValue = find$5(detail.tabs, function (t) {\n            return t.value === tabValue;\n          });\n          tabWithValue.each(function (tabData) {\n            var panel = tabData.view();\n            getOpt(button.element, 'id').each(function (id) {\n              set$8(tabview.element, 'aria-labelledby', id);\n            });\n            Replacing.set(tabview, panel);\n            detail.onChangeTab(tabview, button, panel);\n          });\n        });\n      };\n      var changeTabBy = function (section, byPred) {\n        getPart(section, detail, 'tabbar').each(function (tabbar) {\n          byPred(tabbar).each(emitExecute);\n        });\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$2(detail.tabSectionBehaviours),\n        events: derive$2(flatten([\n          detail.selectFirst ? [runOnAttached(function (section, _simulatedEvent) {\n              changeTabBy(section, Highlighting.getFirst);\n            })] : [],\n          [\n            run$1(changeTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event.button;\n              changeTab$1(button);\n            }),\n            run$1(dismissTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event.button;\n              detail.onDismissTab(section, button);\n            })\n          ]\n        ])),\n        apis: {\n          getViewItems: function (section) {\n            return getPart(section, detail, 'tabview').map(function (tabview) {\n              return Replacing.contents(tabview);\n            }).getOr([]);\n          },\n          showTab: function (section, tabKey) {\n            var getTabIfNotActive = function (tabbar) {\n              var candidates = Highlighting.getCandidates(tabbar);\n              var optTab = find$5(candidates, function (c) {\n                return Representing.getValue(c) === tabKey;\n              });\n              return optTab.filter(function (tab) {\n                return !Highlighting.isHighlighted(tabbar, tab);\n              });\n            };\n            changeTabBy(section, getTabIfNotActive);\n          }\n        }\n      };\n    };\n    var TabSection = composite({\n      name: 'TabSection',\n      configFields: schema(),\n      partFields: parts(),\n      factory: factory,\n      apis: {\n        getViewItems: function (apis, component) {\n          return apis.getViewItems(component);\n        },\n        showTab: function (apis, component, tabKey) {\n          apis.showTab(component, tabKey);\n        }\n      }\n    });\n\n    var measureHeights = function (allTabs, tabview, tabviewComp) {\n      return map$2(allTabs, function (_tab, i) {\n        Replacing.set(tabviewComp, allTabs[i].view());\n        var rect = tabview.dom.getBoundingClientRect();\n        Replacing.set(tabviewComp, []);\n        return rect.height;\n      });\n    };\n    var getMaxHeight = function (heights) {\n      return head(sort(heights, function (a, b) {\n        if (a > b) {\n          return -1;\n        } else if (a < b) {\n          return +1;\n        } else {\n          return 0;\n        }\n      }));\n    };\n    var getMaxTabviewHeight = function (dialog, tabview, tablist) {\n      var documentElement$1 = documentElement(dialog).dom;\n      var rootElm = ancestor(dialog, '.tox-dialog-wrap').getOr(dialog);\n      var isFixed = get$c(rootElm, 'position') === 'fixed';\n      var maxHeight;\n      if (isFixed) {\n        maxHeight = Math.max(documentElement$1.clientHeight, window.innerHeight);\n      } else {\n        maxHeight = Math.max(documentElement$1.offsetHeight, documentElement$1.scrollHeight);\n      }\n      var tabviewHeight = get$b(tabview);\n      var isTabListBeside = tabview.dom.offsetLeft >= tablist.dom.offsetLeft + get$a(tablist);\n      var currentTabHeight = isTabListBeside ? Math.max(get$b(tablist), tabviewHeight) : tabviewHeight;\n      var dialogTopMargin = parseInt(get$c(dialog, 'margin-top'), 10) || 0;\n      var dialogBottomMargin = parseInt(get$c(dialog, 'margin-bottom'), 10) || 0;\n      var dialogHeight = get$b(dialog) + dialogTopMargin + dialogBottomMargin;\n      var chromeHeight = dialogHeight - currentTabHeight;\n      return maxHeight - chromeHeight;\n    };\n    var showTab = function (allTabs, comp) {\n      head(allTabs).each(function (tab) {\n        return TabSection.showTab(comp, tab.value);\n      });\n    };\n    var setTabviewHeight = function (tabview, height) {\n      set$7(tabview, 'height', height + 'px');\n      if (!detect$1().browser.isIE()) {\n        set$7(tabview, 'flex-basis', height + 'px');\n      } else {\n        remove$6(tabview, 'flex-basis');\n      }\n    };\n    var updateTabviewHeight = function (dialogBody, tabview, maxTabHeight) {\n      ancestor(dialogBody, '[role=\"dialog\"]').each(function (dialog) {\n        descendant(dialog, '[role=\"tablist\"]').each(function (tablist) {\n          maxTabHeight.get().map(function (height) {\n            set$7(tabview, 'height', '0');\n            set$7(tabview, 'flex-basis', '0');\n            return Math.min(height, getMaxTabviewHeight(dialog, tabview, tablist));\n          }).each(function (height) {\n            setTabviewHeight(tabview, height);\n          });\n        });\n      });\n    };\n    var getTabview = function (dialog) {\n      return descendant(dialog, '[role=\"tabpanel\"]');\n    };\n    var setMode = function (allTabs) {\n      var smartTabHeight = function () {\n        var maxTabHeight = value$1();\n        var extraEvents = [\n          runOnAttached(function (comp) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              set$7(tabview, 'visibility', 'hidden');\n              comp.getSystem().getByDom(tabview).toOptional().each(function (tabviewComp) {\n                var heights = measureHeights(allTabs, tabview, tabviewComp);\n                var maxTabHeightOpt = getMaxHeight(heights);\n                maxTabHeightOpt.fold(maxTabHeight.clear, maxTabHeight.set);\n              });\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n              remove$6(tabview, 'visibility');\n              showTab(allTabs, comp);\n              global$f.requestAnimationFrame(function () {\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              });\n            });\n          }),\n          run$1(windowResize(), function (comp) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n            });\n          }),\n          run$1(formResizeEvent, function (comp, _se) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              var oldFocus = active(getRootNode(tabview));\n              set$7(tabview, 'visibility', 'hidden');\n              var oldHeight = getRaw(tabview, 'height').map(function (h) {\n                return parseInt(h, 10);\n              });\n              remove$6(tabview, 'height');\n              remove$6(tabview, 'flex-basis');\n              var newHeight = tabview.dom.getBoundingClientRect().height;\n              var hasGrown = oldHeight.forall(function (h) {\n                return newHeight > h;\n              });\n              if (hasGrown) {\n                maxTabHeight.set(newHeight);\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              } else {\n                oldHeight.each(function (h) {\n                  setTabviewHeight(tabview, h);\n                });\n              }\n              remove$6(tabview, 'visibility');\n              oldFocus.each(focus$3);\n            });\n          })\n        ];\n        var selectFirst = false;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      var naiveTabHeight = function () {\n        var extraEvents = [];\n        var selectFirst = true;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      return {\n        smartTabHeight: smartTabHeight,\n        naiveTabHeight: naiveTabHeight\n      };\n    };\n\n    var SendDataToSectionChannel = 'send-data-to-section';\n    var SendDataToViewChannel = 'send-data-to-view';\n    var renderTabPanel = function (spec, backstage) {\n      var storedValue = Cell({});\n      var updateDataWithForm = function (form) {\n        var formData = Representing.getValue(form);\n        var validData = toValidValues(formData).getOr({});\n        var currentData = storedValue.get();\n        var newData = deepMerge(currentData, validData);\n        storedValue.set(newData);\n      };\n      var setDataOnForm = function (form) {\n        var tabData = storedValue.get();\n        Representing.setValue(form, tabData);\n      };\n      var oldTab = Cell(null);\n      var allTabs = map$2(spec.tabs, function (tab) {\n        return {\n          value: tab.name,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__body-nav-item'],\n            innerHtml: backstage.shared.providers.translate(tab.title)\n          },\n          view: function () {\n            return [Form.sketch(function (parts) {\n                return {\n                  dom: {\n                    tag: 'div',\n                    classes: ['tox-form']\n                  },\n                  components: map$2(tab.items, function (item) {\n                    return interpretInForm(parts, item, backstage);\n                  }),\n                  formBehaviours: derive$1([\n                    Keying.config({\n                      mode: 'acyclic',\n                      useTabstopAt: not(isPseudoStop)\n                    }),\n                    config('TabView.form.events', [\n                      runOnAttached(setDataOnForm),\n                      runOnDetached(updateDataWithForm)\n                    ]),\n                    Receiving.config({\n                      channels: wrapAll([\n                        {\n                          key: SendDataToSectionChannel,\n                          value: { onReceive: updateDataWithForm }\n                        },\n                        {\n                          key: SendDataToViewChannel,\n                          value: { onReceive: setDataOnForm }\n                        }\n                      ])\n                    })\n                  ])\n                };\n              })];\n          }\n        };\n      });\n      var tabMode = setMode(allTabs).smartTabHeight;\n      return TabSection.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        onChangeTab: function (section, button, _viewItems) {\n          var name = Representing.getValue(button);\n          emitWith(section, formTabChangeEvent, {\n            name: name,\n            oldName: oldTab.get()\n          });\n          oldTab.set(name);\n        },\n        tabs: allTabs,\n        components: [\n          TabSection.parts.tabbar({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-nav']\n            },\n            components: [Tabbar.parts.tabs({})],\n            markers: {\n              tabClass: 'tox-tab',\n              selectedClass: 'tox-dialog__body-nav-item--active'\n            },\n            tabbarBehaviours: derive$1([Tabstopping.config({})])\n          }),\n          TabSection.parts.tabview({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            }\n          })\n        ],\n        selectFirst: tabMode.selectFirst,\n        tabSectionBehaviours: derive$1([\n          config('tabpanel', tabMode.extraEvents),\n          Keying.config({ mode: 'acyclic' }),\n          Composing.config({\n            find: function (comp) {\n              return head(TabSection.getViewItems(comp));\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (tsection) {\n                tsection.getSystem().broadcastOn([SendDataToSectionChannel], {});\n                return storedValue.get();\n              },\n              setValue: function (tsection, value) {\n                storedValue.set(value);\n                tsection.getSystem().broadcastOn([SendDataToViewChannel], {});\n              }\n            }\n          })\n        ])\n      });\n    };\n\n    var dialogChannel = generate$6('update-dialog');\n    var titleChannel = generate$6('update-title');\n    var bodyChannel = generate$6('update-body');\n    var footerChannel = generate$6('update-footer');\n    var bodySendMessageChannel = generate$6('body-send-message');\n\n    var renderBody = function (spec, id, backstage, ariaAttrs) {\n      var renderComponents = function (incoming) {\n        switch (incoming.body.type) {\n        case 'tabpanel': {\n            return [renderTabPanel(incoming.body, backstage)];\n          }\n        default: {\n            return [renderBodyPanel(incoming.body, backstage)];\n          }\n        }\n      };\n      var updateState = function (_comp, incoming) {\n        return Optional.some({\n          isTabPanel: function () {\n            return incoming.body.type === 'tabpanel';\n          }\n        });\n      };\n      var ariaAttributes = { 'aria-live': 'polite' };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js'],\n          attributes: __assign(__assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({})), ariaAttrs ? ariaAttributes : {})\n        },\n        components: [],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          Reflecting.config({\n            channel: bodyChannel,\n            updateState: updateState,\n            renderComponents: renderComponents,\n            initialData: spec\n          })\n        ])\n      };\n    };\n    var renderInlineBody = function (spec, contentId, backstage, ariaAttrs) {\n      return renderBody(spec, Optional.some(contentId), backstage, ariaAttrs);\n    };\n    var renderModalBody = function (spec, backstage) {\n      var bodySpec = renderBody(spec, Optional.none(), backstage, false);\n      return ModalDialog.parts.body(bodySpec);\n    };\n    var renderIframeBody = function (spec) {\n      var bodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-iframe']\n            },\n            components: [craft({\n                dom: {\n                  tag: 'iframe',\n                  attributes: { src: spec.url }\n                },\n                behaviours: derive$1([\n                  Tabstopping.config({}),\n                  Focusing.config({})\n                ])\n              })]\n          }],\n        behaviours: derive$1([Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          })])\n      };\n      return ModalDialog.parts.body(bodySpec);\n    };\n\n    function _typeof(obj) {\n      '@babel/helpers - typeof';\n      return _typeof = 'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator ? function (obj) {\n        return typeof obj;\n      } : function (obj) {\n        return obj && 'function' == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? 'symbol' : typeof obj;\n      }, _typeof(obj);\n    }\n    function _setPrototypeOf(o, p) {\n      _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n        o.__proto__ = p;\n        return o;\n      };\n      return _setPrototypeOf(o, p);\n    }\n    function _isNativeReflectConstruct() {\n      if (typeof Reflect === 'undefined' || !Reflect.construct)\n        return false;\n      if (Reflect.construct.sham)\n        return false;\n      if (typeof Proxy === 'function')\n        return true;\n      try {\n        Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {\n        }));\n        return true;\n      } catch (e) {\n        return false;\n      }\n    }\n    function _construct(Parent, args, Class) {\n      if (_isNativeReflectConstruct()) {\n        _construct = Reflect.construct;\n      } else {\n        _construct = function _construct(Parent, args, Class) {\n          var a = [null];\n          a.push.apply(a, args);\n          var Constructor = Function.bind.apply(Parent, a);\n          var instance = new Constructor();\n          if (Class)\n            _setPrototypeOf(instance, Class.prototype);\n          return instance;\n        };\n      }\n      return _construct.apply(null, arguments);\n    }\n    function _toConsumableArray(arr) {\n      return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n    }\n    function _arrayWithoutHoles(arr) {\n      if (Array.isArray(arr))\n        return _arrayLikeToArray(arr);\n    }\n    function _iterableToArray(iter) {\n      if (typeof Symbol !== 'undefined' && iter[Symbol.iterator] != null || iter['@@iterator'] != null)\n        return Array.from(iter);\n    }\n    function _unsupportedIterableToArray(o, minLen) {\n      if (!o)\n        return;\n      if (typeof o === 'string')\n        return _arrayLikeToArray(o, minLen);\n      var n = Object.prototype.toString.call(o).slice(8, -1);\n      if (n === 'Object' && o.constructor)\n        n = o.constructor.name;\n      if (n === 'Map' || n === 'Set')\n        return Array.from(o);\n      if (n === 'Arguments' || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))\n        return _arrayLikeToArray(o, minLen);\n    }\n    function _arrayLikeToArray(arr, len) {\n      if (len == null || len > arr.length)\n        len = arr.length;\n      for (var i = 0, arr2 = new Array(len); i < len; i++)\n        arr2[i] = arr[i];\n      return arr2;\n    }\n    function _nonIterableSpread() {\n      throw new TypeError('Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.');\n    }\n    var hasOwnProperty = Object.hasOwnProperty, setPrototypeOf = Object.setPrototypeOf, isFrozen = Object.isFrozen, getPrototypeOf = Object.getPrototypeOf, getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n    var freeze = Object.freeze, seal = Object.seal, create = Object.create;\n    var _ref = typeof Reflect !== 'undefined' && Reflect, apply = _ref.apply, construct = _ref.construct;\n    if (!apply) {\n      apply = function apply(fun, thisValue, args) {\n        return fun.apply(thisValue, args);\n      };\n    }\n    if (!freeze) {\n      freeze = function freeze(x) {\n        return x;\n      };\n    }\n    if (!seal) {\n      seal = function seal(x) {\n        return x;\n      };\n    }\n    if (!construct) {\n      construct = function construct(Func, args) {\n        return _construct(Func, _toConsumableArray(args));\n      };\n    }\n    var arrayForEach = unapply(Array.prototype.forEach);\n    var arrayPop = unapply(Array.prototype.pop);\n    var arrayPush = unapply(Array.prototype.push);\n    var stringToLowerCase = unapply(String.prototype.toLowerCase);\n    var stringMatch = unapply(String.prototype.match);\n    var stringReplace = unapply(String.prototype.replace);\n    var stringIndexOf = unapply(String.prototype.indexOf);\n    var stringTrim = unapply(String.prototype.trim);\n    var regExpTest = unapply(RegExp.prototype.test);\n    var typeErrorCreate = unconstruct(TypeError);\n    function unapply(func) {\n      return function (thisArg) {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        return apply(func, thisArg, args);\n      };\n    }\n    function unconstruct(func) {\n      return function () {\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n        return construct(func, args);\n      };\n    }\n    function addToSet(set, array) {\n      if (setPrototypeOf) {\n        setPrototypeOf(set, null);\n      }\n      var l = array.length;\n      while (l--) {\n        var element = array[l];\n        if (typeof element === 'string') {\n          var lcElement = stringToLowerCase(element);\n          if (lcElement !== element) {\n            if (!isFrozen(array)) {\n              array[l] = lcElement;\n            }\n            element = lcElement;\n          }\n        }\n        set[element] = true;\n      }\n      return set;\n    }\n    function clone(object) {\n      var newObject = create(null);\n      var property;\n      for (property in object) {\n        if (apply(hasOwnProperty, object, [property])) {\n          newObject[property] = object[property];\n        }\n      }\n      return newObject;\n    }\n    function lookupGetter(object, prop) {\n      while (object !== null) {\n        var desc = getOwnPropertyDescriptor(object, prop);\n        if (desc) {\n          if (desc.get) {\n            return unapply(desc.get);\n          }\n          if (typeof desc.value === 'function') {\n            return unapply(desc.value);\n          }\n        }\n        object = getPrototypeOf(object);\n      }\n      function fallbackValue(element) {\n        console.warn('fallback value for', element);\n        return null;\n      }\n      return fallbackValue;\n    }\n    var html$1 = freeze([\n      'a',\n      'abbr',\n      'acronym',\n      'address',\n      'area',\n      'article',\n      'aside',\n      'audio',\n      'b',\n      'bdi',\n      'bdo',\n      'big',\n      'blink',\n      'blockquote',\n      'body',\n      'br',\n      'button',\n      'canvas',\n      'caption',\n      'center',\n      'cite',\n      'code',\n      'col',\n      'colgroup',\n      'content',\n      'data',\n      'datalist',\n      'dd',\n      'decorator',\n      'del',\n      'details',\n      'dfn',\n      'dialog',\n      'dir',\n      'div',\n      'dl',\n      'dt',\n      'element',\n      'em',\n      'fieldset',\n      'figcaption',\n      'figure',\n      'font',\n      'footer',\n      'form',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'head',\n      'header',\n      'hgroup',\n      'hr',\n      'html',\n      'i',\n      'img',\n      'input',\n      'ins',\n      'kbd',\n      'label',\n      'legend',\n      'li',\n      'main',\n      'map',\n      'mark',\n      'marquee',\n      'menu',\n      'menuitem',\n      'meter',\n      'nav',\n      'nobr',\n      'ol',\n      'optgroup',\n      'option',\n      'output',\n      'p',\n      'picture',\n      'pre',\n      'progress',\n      'q',\n      'rp',\n      'rt',\n      'ruby',\n      's',\n      'samp',\n      'section',\n      'select',\n      'shadow',\n      'small',\n      'source',\n      'spacer',\n      'span',\n      'strike',\n      'strong',\n      'style',\n      'sub',\n      'summary',\n      'sup',\n      'table',\n      'tbody',\n      'td',\n      'template',\n      'textarea',\n      'tfoot',\n      'th',\n      'thead',\n      'time',\n      'tr',\n      'track',\n      'tt',\n      'u',\n      'ul',\n      'var',\n      'video',\n      'wbr'\n    ]);\n    var svg$1 = freeze([\n      'svg',\n      'a',\n      'altglyph',\n      'altglyphdef',\n      'altglyphitem',\n      'animatecolor',\n      'animatemotion',\n      'animatetransform',\n      'circle',\n      'clippath',\n      'defs',\n      'desc',\n      'ellipse',\n      'filter',\n      'font',\n      'g',\n      'glyph',\n      'glyphref',\n      'hkern',\n      'image',\n      'line',\n      'lineargradient',\n      'marker',\n      'mask',\n      'metadata',\n      'mpath',\n      'path',\n      'pattern',\n      'polygon',\n      'polyline',\n      'radialgradient',\n      'rect',\n      'stop',\n      'style',\n      'switch',\n      'symbol',\n      'text',\n      'textpath',\n      'title',\n      'tref',\n      'tspan',\n      'view',\n      'vkern'\n    ]);\n    var svgFilters = freeze([\n      'feBlend',\n      'feColorMatrix',\n      'feComponentTransfer',\n      'feComposite',\n      'feConvolveMatrix',\n      'feDiffuseLighting',\n      'feDisplacementMap',\n      'feDistantLight',\n      'feFlood',\n      'feFuncA',\n      'feFuncB',\n      'feFuncG',\n      'feFuncR',\n      'feGaussianBlur',\n      'feImage',\n      'feMerge',\n      'feMergeNode',\n      'feMorphology',\n      'feOffset',\n      'fePointLight',\n      'feSpecularLighting',\n      'feSpotLight',\n      'feTile',\n      'feTurbulence'\n    ]);\n    var svgDisallowed = freeze([\n      'animate',\n      'color-profile',\n      'cursor',\n      'discard',\n      'fedropshadow',\n      'font-face',\n      'font-face-format',\n      'font-face-name',\n      'font-face-src',\n      'font-face-uri',\n      'foreignobject',\n      'hatch',\n      'hatchpath',\n      'mesh',\n      'meshgradient',\n      'meshpatch',\n      'meshrow',\n      'missing-glyph',\n      'script',\n      'set',\n      'solidcolor',\n      'unknown',\n      'use'\n    ]);\n    var mathMl$1 = freeze([\n      'math',\n      'menclose',\n      'merror',\n      'mfenced',\n      'mfrac',\n      'mglyph',\n      'mi',\n      'mlabeledtr',\n      'mmultiscripts',\n      'mn',\n      'mo',\n      'mover',\n      'mpadded',\n      'mphantom',\n      'mroot',\n      'mrow',\n      'ms',\n      'mspace',\n      'msqrt',\n      'mstyle',\n      'msub',\n      'msup',\n      'msubsup',\n      'mtable',\n      'mtd',\n      'mtext',\n      'mtr',\n      'munder',\n      'munderover'\n    ]);\n    var mathMlDisallowed = freeze([\n      'maction',\n      'maligngroup',\n      'malignmark',\n      'mlongdiv',\n      'mscarries',\n      'mscarry',\n      'msgroup',\n      'mstack',\n      'msline',\n      'msrow',\n      'semantics',\n      'annotation',\n      'annotation-xml',\n      'mprescripts',\n      'none'\n    ]);\n    var text = freeze(['#text']);\n    var html = freeze([\n      'accept',\n      'action',\n      'align',\n      'alt',\n      'autocapitalize',\n      'autocomplete',\n      'autopictureinpicture',\n      'autoplay',\n      'background',\n      'bgcolor',\n      'border',\n      'capture',\n      'cellpadding',\n      'cellspacing',\n      'checked',\n      'cite',\n      'class',\n      'clear',\n      'color',\n      'cols',\n      'colspan',\n      'controls',\n      'controlslist',\n      'coords',\n      'crossorigin',\n      'datetime',\n      'decoding',\n      'default',\n      'dir',\n      'disabled',\n      'disablepictureinpicture',\n      'disableremoteplayback',\n      'download',\n      'draggable',\n      'enctype',\n      'enterkeyhint',\n      'face',\n      'for',\n      'headers',\n      'height',\n      'hidden',\n      'high',\n      'href',\n      'hreflang',\n      'id',\n      'inputmode',\n      'integrity',\n      'ismap',\n      'kind',\n      'label',\n      'lang',\n      'list',\n      'loading',\n      'loop',\n      'low',\n      'max',\n      'maxlength',\n      'media',\n      'method',\n      'min',\n      'minlength',\n      'multiple',\n      'muted',\n      'name',\n      'nonce',\n      'noshade',\n      'novalidate',\n      'nowrap',\n      'open',\n      'optimum',\n      'pattern',\n      'placeholder',\n      'playsinline',\n      'poster',\n      'preload',\n      'pubdate',\n      'radiogroup',\n      'readonly',\n      'rel',\n      'required',\n      'rev',\n      'reversed',\n      'role',\n      'rows',\n      'rowspan',\n      'spellcheck',\n      'scope',\n      'selected',\n      'shape',\n      'size',\n      'sizes',\n      'span',\n      'srclang',\n      'start',\n      'src',\n      'srcset',\n      'step',\n      'style',\n      'summary',\n      'tabindex',\n      'title',\n      'translate',\n      'type',\n      'usemap',\n      'valign',\n      'value',\n      'width',\n      'xmlns',\n      'slot'\n    ]);\n    var svg = freeze([\n      'accent-height',\n      'accumulate',\n      'additive',\n      'alignment-baseline',\n      'ascent',\n      'attributename',\n      'attributetype',\n      'azimuth',\n      'basefrequency',\n      'baseline-shift',\n      'begin',\n      'bias',\n      'by',\n      'class',\n      'clip',\n      'clippathunits',\n      'clip-path',\n      'clip-rule',\n      'color',\n      'color-interpolation',\n      'color-interpolation-filters',\n      'color-profile',\n      'color-rendering',\n      'cx',\n      'cy',\n      'd',\n      'dx',\n      'dy',\n      'diffuseconstant',\n      'direction',\n      'display',\n      'divisor',\n      'dur',\n      'edgemode',\n      'elevation',\n      'end',\n      'fill',\n      'fill-opacity',\n      'fill-rule',\n      'filter',\n      'filterunits',\n      'flood-color',\n      'flood-opacity',\n      'font-family',\n      'font-size',\n      'font-size-adjust',\n      'font-stretch',\n      'font-style',\n      'font-variant',\n      'font-weight',\n      'fx',\n      'fy',\n      'g1',\n      'g2',\n      'glyph-name',\n      'glyphref',\n      'gradientunits',\n      'gradienttransform',\n      'height',\n      'href',\n      'id',\n      'image-rendering',\n      'in',\n      'in2',\n      'k',\n      'k1',\n      'k2',\n      'k3',\n      'k4',\n      'kerning',\n      'keypoints',\n      'keysplines',\n      'keytimes',\n      'lang',\n      'lengthadjust',\n      'letter-spacing',\n      'kernelmatrix',\n      'kernelunitlength',\n      'lighting-color',\n      'local',\n      'marker-end',\n      'marker-mid',\n      'marker-start',\n      'markerheight',\n      'markerunits',\n      'markerwidth',\n      'maskcontentunits',\n      'maskunits',\n      'max',\n      'mask',\n      'media',\n      'method',\n      'mode',\n      'min',\n      'name',\n      'numoctaves',\n      'offset',\n      'operator',\n      'opacity',\n      'order',\n      'orient',\n      'orientation',\n      'origin',\n      'overflow',\n      'paint-order',\n      'path',\n      'pathlength',\n      'patterncontentunits',\n      'patterntransform',\n      'patternunits',\n      'points',\n      'preservealpha',\n      'preserveaspectratio',\n      'primitiveunits',\n      'r',\n      'rx',\n      'ry',\n      'radius',\n      'refx',\n      'refy',\n      'repeatcount',\n      'repeatdur',\n      'restart',\n      'result',\n      'rotate',\n      'scale',\n      'seed',\n      'shape-rendering',\n      'specularconstant',\n      'specularexponent',\n      'spreadmethod',\n      'startoffset',\n      'stddeviation',\n      'stitchtiles',\n      'stop-color',\n      'stop-opacity',\n      'stroke-dasharray',\n      'stroke-dashoffset',\n      'stroke-linecap',\n      'stroke-linejoin',\n      'stroke-miterlimit',\n      'stroke-opacity',\n      'stroke',\n      'stroke-width',\n      'style',\n      'surfacescale',\n      'systemlanguage',\n      'tabindex',\n      'targetx',\n      'targety',\n      'transform',\n      'transform-origin',\n      'text-anchor',\n      'text-decoration',\n      'text-rendering',\n      'textlength',\n      'type',\n      'u1',\n      'u2',\n      'unicode',\n      'values',\n      'viewbox',\n      'visibility',\n      'version',\n      'vert-adv-y',\n      'vert-origin-x',\n      'vert-origin-y',\n      'width',\n      'word-spacing',\n      'wrap',\n      'writing-mode',\n      'xchannelselector',\n      'ychannelselector',\n      'x',\n      'x1',\n      'x2',\n      'xmlns',\n      'y',\n      'y1',\n      'y2',\n      'z',\n      'zoomandpan'\n    ]);\n    var mathMl = freeze([\n      'accent',\n      'accentunder',\n      'align',\n      'bevelled',\n      'close',\n      'columnsalign',\n      'columnlines',\n      'columnspan',\n      'denomalign',\n      'depth',\n      'dir',\n      'display',\n      'displaystyle',\n      'encoding',\n      'fence',\n      'frame',\n      'height',\n      'href',\n      'id',\n      'largeop',\n      'length',\n      'linethickness',\n      'lspace',\n      'lquote',\n      'mathbackground',\n      'mathcolor',\n      'mathsize',\n      'mathvariant',\n      'maxsize',\n      'minsize',\n      'movablelimits',\n      'notation',\n      'numalign',\n      'open',\n      'rowalign',\n      'rowlines',\n      'rowspacing',\n      'rowspan',\n      'rspace',\n      'rquote',\n      'scriptlevel',\n      'scriptminsize',\n      'scriptsizemultiplier',\n      'selection',\n      'separator',\n      'separators',\n      'stretchy',\n      'subscriptshift',\n      'supscriptshift',\n      'symmetric',\n      'voffset',\n      'width',\n      'xmlns'\n    ]);\n    var xml = freeze([\n      'xlink:href',\n      'xml:id',\n      'xlink:title',\n      'xml:space',\n      'xmlns:xlink'\n    ]);\n    var MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm);\n    var ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\n    var DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/);\n    var ARIA_ATTR = seal(/^aria-[\\-\\w]+$/);\n    var IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i);\n    var IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\n    var ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g);\n    var DOCTYPE_NAME = seal(/^html$/i);\n    var getGlobal = function getGlobal() {\n      return typeof window === 'undefined' ? null : window;\n    };\n    var _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, document) {\n      if (_typeof(trustedTypes) !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n        return null;\n      }\n      var suffix = null;\n      var ATTR_NAME = 'data-tt-policy-suffix';\n      if (document.currentScript && document.currentScript.hasAttribute(ATTR_NAME)) {\n        suffix = document.currentScript.getAttribute(ATTR_NAME);\n      }\n      var policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n      try {\n        return trustedTypes.createPolicy(policyName, {\n          createHTML: function createHTML(html) {\n            return html;\n          }\n        });\n      } catch (_) {\n        console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n        return null;\n      }\n    };\n    function createDOMPurify() {\n      var window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n      var DOMPurify = function DOMPurify(root) {\n        return createDOMPurify(root);\n      };\n      DOMPurify.version = '2.3.8';\n      DOMPurify.removed = [];\n      if (!window || !window.document || window.document.nodeType !== 9) {\n        DOMPurify.isSupported = false;\n        return DOMPurify;\n      }\n      var originalDocument = window.document;\n      var document = window.document;\n      var DocumentFragment = window.DocumentFragment, HTMLTemplateElement = window.HTMLTemplateElement, Node = window.Node, Element = window.Element, NodeFilter = window.NodeFilter, _window$NamedNodeMap = window.NamedNodeMap, NamedNodeMap = _window$NamedNodeMap === void 0 ? window.NamedNodeMap || window.MozNamedAttrMap : _window$NamedNodeMap, HTMLFormElement = window.HTMLFormElement, DOMParser = window.DOMParser, trustedTypes = window.trustedTypes;\n      var ElementPrototype = Element.prototype;\n      var cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n      var getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n      var getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n      var getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n      if (typeof HTMLTemplateElement === 'function') {\n        var template = document.createElement('template');\n        if (template.content && template.content.ownerDocument) {\n          document = template.content.ownerDocument;\n        }\n      }\n      var trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, originalDocument);\n      var emptyHTML = trustedTypesPolicy ? trustedTypesPolicy.createHTML('') : '';\n      var _document = document, implementation = _document.implementation, createNodeIterator = _document.createNodeIterator, createDocumentFragment = _document.createDocumentFragment, getElementsByTagName = _document.getElementsByTagName;\n      var importNode = originalDocument.importNode;\n      var documentMode = {};\n      try {\n        documentMode = clone(document).documentMode ? document.documentMode : {};\n      } catch (_) {\n      }\n      var hooks = {};\n      DOMPurify.isSupported = typeof getParentNode === 'function' && implementation && typeof implementation.createHTMLDocument !== 'undefined' && documentMode !== 9;\n      var MUSTACHE_EXPR$1 = MUSTACHE_EXPR, ERB_EXPR$1 = ERB_EXPR, DATA_ATTR$1 = DATA_ATTR, ARIA_ATTR$1 = ARIA_ATTR, IS_SCRIPT_OR_DATA$1 = IS_SCRIPT_OR_DATA, ATTR_WHITESPACE$1 = ATTR_WHITESPACE;\n      var IS_ALLOWED_URI$1 = IS_ALLOWED_URI;\n      var ALLOWED_TAGS = null;\n      var DEFAULT_ALLOWED_TAGS = addToSet({}, [].concat(_toConsumableArray(html$1), _toConsumableArray(svg$1), _toConsumableArray(svgFilters), _toConsumableArray(mathMl$1), _toConsumableArray(text)));\n      var ALLOWED_ATTR = null;\n      var DEFAULT_ALLOWED_ATTR = addToSet({}, [].concat(_toConsumableArray(html), _toConsumableArray(svg), _toConsumableArray(mathMl), _toConsumableArray(xml)));\n      var CUSTOM_ELEMENT_HANDLING = Object.seal(Object.create(null, {\n        tagNameCheck: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: null\n        },\n        attributeNameCheck: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: null\n        },\n        allowCustomizedBuiltInElements: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: false\n        }\n      }));\n      var FORBID_TAGS = null;\n      var FORBID_ATTR = null;\n      var ALLOW_ARIA_ATTR = true;\n      var ALLOW_DATA_ATTR = true;\n      var ALLOW_UNKNOWN_PROTOCOLS = false;\n      var SAFE_FOR_TEMPLATES = false;\n      var WHOLE_DOCUMENT = false;\n      var SET_CONFIG = false;\n      var FORCE_BODY = false;\n      var RETURN_DOM = false;\n      var RETURN_DOM_FRAGMENT = false;\n      var RETURN_TRUSTED_TYPE = false;\n      var SANITIZE_DOM = true;\n      var KEEP_CONTENT = true;\n      var IN_PLACE = false;\n      var USE_PROFILES = {};\n      var FORBID_CONTENTS = null;\n      var DEFAULT_FORBID_CONTENTS = addToSet({}, [\n        'annotation-xml',\n        'audio',\n        'colgroup',\n        'desc',\n        'foreignobject',\n        'head',\n        'iframe',\n        'math',\n        'mi',\n        'mn',\n        'mo',\n        'ms',\n        'mtext',\n        'noembed',\n        'noframes',\n        'noscript',\n        'plaintext',\n        'script',\n        'style',\n        'svg',\n        'template',\n        'thead',\n        'title',\n        'video',\n        'xmp'\n      ]);\n      var DATA_URI_TAGS = null;\n      var DEFAULT_DATA_URI_TAGS = addToSet({}, [\n        'audio',\n        'video',\n        'img',\n        'source',\n        'image',\n        'track'\n      ]);\n      var URI_SAFE_ATTRIBUTES = null;\n      var DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, [\n        'alt',\n        'class',\n        'for',\n        'id',\n        'label',\n        'name',\n        'pattern',\n        'placeholder',\n        'role',\n        'summary',\n        'title',\n        'value',\n        'style',\n        'xmlns'\n      ]);\n      var MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n      var SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n      var HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n      var NAMESPACE = HTML_NAMESPACE;\n      var IS_EMPTY_INPUT = false;\n      var PARSER_MEDIA_TYPE;\n      var SUPPORTED_PARSER_MEDIA_TYPES = [\n        'application/xhtml+xml',\n        'text/html'\n      ];\n      var DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n      var transformCaseFunc;\n      var CONFIG = null;\n      var formElement = document.createElement('form');\n      var isRegexOrFunction = function isRegexOrFunction(testValue) {\n        return testValue instanceof RegExp || testValue instanceof Function;\n      };\n      var _parseConfig = function _parseConfig(cfg) {\n        if (CONFIG && CONFIG === cfg) {\n          return;\n        }\n        if (!cfg || _typeof(cfg) !== 'object') {\n          cfg = {};\n        }\n        cfg = clone(cfg);\n        ALLOWED_TAGS = 'ALLOWED_TAGS' in cfg ? addToSet({}, cfg.ALLOWED_TAGS) : DEFAULT_ALLOWED_TAGS;\n        ALLOWED_ATTR = 'ALLOWED_ATTR' in cfg ? addToSet({}, cfg.ALLOWED_ATTR) : DEFAULT_ALLOWED_ATTR;\n        URI_SAFE_ATTRIBUTES = 'ADD_URI_SAFE_ATTR' in cfg ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR) : DEFAULT_URI_SAFE_ATTRIBUTES;\n        DATA_URI_TAGS = 'ADD_DATA_URI_TAGS' in cfg ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS) : DEFAULT_DATA_URI_TAGS;\n        FORBID_CONTENTS = 'FORBID_CONTENTS' in cfg ? addToSet({}, cfg.FORBID_CONTENTS) : DEFAULT_FORBID_CONTENTS;\n        FORBID_TAGS = 'FORBID_TAGS' in cfg ? addToSet({}, cfg.FORBID_TAGS) : {};\n        FORBID_ATTR = 'FORBID_ATTR' in cfg ? addToSet({}, cfg.FORBID_ATTR) : {};\n        USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;\n        ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false;\n        ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false;\n        ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false;\n        SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false;\n        WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false;\n        RETURN_DOM = cfg.RETURN_DOM || false;\n        RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false;\n        RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false;\n        FORCE_BODY = cfg.FORCE_BODY || false;\n        SANITIZE_DOM = cfg.SANITIZE_DOM !== false;\n        KEEP_CONTENT = cfg.KEEP_CONTENT !== false;\n        IN_PLACE = cfg.IN_PLACE || false;\n        IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI$1;\n        NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n        if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n        }\n        if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n          CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n        }\n        if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n          CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n        }\n        PARSER_MEDIA_TYPE = SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? PARSER_MEDIA_TYPE = DEFAULT_PARSER_MEDIA_TYPE : PARSER_MEDIA_TYPE = cfg.PARSER_MEDIA_TYPE;\n        transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? function (x) {\n          return x;\n        } : stringToLowerCase;\n        if (SAFE_FOR_TEMPLATES) {\n          ALLOW_DATA_ATTR = false;\n        }\n        if (RETURN_DOM_FRAGMENT) {\n          RETURN_DOM = true;\n        }\n        if (USE_PROFILES) {\n          ALLOWED_TAGS = addToSet({}, _toConsumableArray(text));\n          ALLOWED_ATTR = [];\n          if (USE_PROFILES.html === true) {\n            addToSet(ALLOWED_TAGS, html$1);\n            addToSet(ALLOWED_ATTR, html);\n          }\n          if (USE_PROFILES.svg === true) {\n            addToSet(ALLOWED_TAGS, svg$1);\n            addToSet(ALLOWED_ATTR, svg);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n          if (USE_PROFILES.svgFilters === true) {\n            addToSet(ALLOWED_TAGS, svgFilters);\n            addToSet(ALLOWED_ATTR, svg);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n          if (USE_PROFILES.mathMl === true) {\n            addToSet(ALLOWED_TAGS, mathMl$1);\n            addToSet(ALLOWED_ATTR, mathMl);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n        }\n        if (cfg.ADD_TAGS) {\n          if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n            ALLOWED_TAGS = clone(ALLOWED_TAGS);\n          }\n          addToSet(ALLOWED_TAGS, cfg.ADD_TAGS);\n        }\n        if (cfg.ADD_ATTR) {\n          if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n            ALLOWED_ATTR = clone(ALLOWED_ATTR);\n          }\n          addToSet(ALLOWED_ATTR, cfg.ADD_ATTR);\n        }\n        if (cfg.ADD_URI_SAFE_ATTR) {\n          addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR);\n        }\n        if (cfg.FORBID_CONTENTS) {\n          if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n            FORBID_CONTENTS = clone(FORBID_CONTENTS);\n          }\n          addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS);\n        }\n        if (KEEP_CONTENT) {\n          ALLOWED_TAGS['#text'] = true;\n        }\n        if (WHOLE_DOCUMENT) {\n          addToSet(ALLOWED_TAGS, [\n            'html',\n            'head',\n            'body'\n          ]);\n        }\n        if (ALLOWED_TAGS.table) {\n          addToSet(ALLOWED_TAGS, ['tbody']);\n          delete FORBID_TAGS.tbody;\n        }\n        if (freeze) {\n          freeze(cfg);\n        }\n        CONFIG = cfg;\n      };\n      var MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, [\n        'mi',\n        'mo',\n        'mn',\n        'ms',\n        'mtext'\n      ]);\n      var HTML_INTEGRATION_POINTS = addToSet({}, [\n        'foreignobject',\n        'desc',\n        'title',\n        'annotation-xml'\n      ]);\n      var COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, [\n        'title',\n        'style',\n        'font',\n        'a',\n        'script'\n      ]);\n      var ALL_SVG_TAGS = addToSet({}, svg$1);\n      addToSet(ALL_SVG_TAGS, svgFilters);\n      addToSet(ALL_SVG_TAGS, svgDisallowed);\n      var ALL_MATHML_TAGS = addToSet({}, mathMl$1);\n      addToSet(ALL_MATHML_TAGS, mathMlDisallowed);\n      var _checkValidNamespace = function _checkValidNamespace(element) {\n        var parent = getParentNode(element);\n        if (!parent || !parent.tagName) {\n          parent = {\n            namespaceURI: HTML_NAMESPACE,\n            tagName: 'template'\n          };\n        }\n        var tagName = stringToLowerCase(element.tagName);\n        var parentTagName = stringToLowerCase(parent.tagName);\n        if (element.namespaceURI === SVG_NAMESPACE) {\n          if (parent.namespaceURI === HTML_NAMESPACE) {\n            return tagName === 'svg';\n          }\n          if (parent.namespaceURI === MATHML_NAMESPACE) {\n            return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n          }\n          return Boolean(ALL_SVG_TAGS[tagName]);\n        }\n        if (element.namespaceURI === MATHML_NAMESPACE) {\n          if (parent.namespaceURI === HTML_NAMESPACE) {\n            return tagName === 'math';\n          }\n          if (parent.namespaceURI === SVG_NAMESPACE) {\n            return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n          }\n          return Boolean(ALL_MATHML_TAGS[tagName]);\n        }\n        if (element.namespaceURI === HTML_NAMESPACE) {\n          if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n            return false;\n          }\n          if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n            return false;\n          }\n          return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n        }\n        return false;\n      };\n      var _forceRemove = function _forceRemove(node) {\n        arrayPush(DOMPurify.removed, { element: node });\n        try {\n          node.parentNode.removeChild(node);\n        } catch (_) {\n          try {\n            node.outerHTML = emptyHTML;\n          } catch (_) {\n            node.remove();\n          }\n        }\n      };\n      var _removeAttribute = function _removeAttribute(name, node) {\n        try {\n          arrayPush(DOMPurify.removed, {\n            attribute: node.getAttributeNode(name),\n            from: node\n          });\n        } catch (_) {\n          arrayPush(DOMPurify.removed, {\n            attribute: null,\n            from: node\n          });\n        }\n        node.removeAttribute(name);\n        if (name === 'is' && !ALLOWED_ATTR[name]) {\n          if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n            try {\n              _forceRemove(node);\n            } catch (_) {\n            }\n          } else {\n            try {\n              node.setAttribute(name, '');\n            } catch (_) {\n            }\n          }\n        }\n      };\n      var _initDocument = function _initDocument(dirty) {\n        var doc;\n        var leadingWhitespace;\n        if (FORCE_BODY) {\n          dirty = '<remove></remove>' + dirty;\n        } else {\n          var matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n          leadingWhitespace = matches && matches[0];\n        }\n        if (PARSER_MEDIA_TYPE === 'application/xhtml+xml') {\n          dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n        }\n        var dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n        if (NAMESPACE === HTML_NAMESPACE) {\n          try {\n            doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n          } catch (_) {\n          }\n        }\n        if (!doc || !doc.documentElement) {\n          doc = implementation.createDocument(NAMESPACE, 'template', null);\n          try {\n            doc.documentElement.innerHTML = IS_EMPTY_INPUT ? '' : dirtyPayload;\n          } catch (_) {\n          }\n        }\n        var body = doc.body || doc.documentElement;\n        if (dirty && leadingWhitespace) {\n          body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n        }\n        if (NAMESPACE === HTML_NAMESPACE) {\n          return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n        }\n        return WHOLE_DOCUMENT ? doc.documentElement : body;\n      };\n      var _createIterator = function _createIterator(root) {\n        return createNodeIterator.call(root.ownerDocument || root, root, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT, null, false);\n      };\n      var _isClobbered = function _isClobbered(elm) {\n        return elm instanceof HTMLFormElement && (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function' || typeof elm.namespaceURI !== 'string' || typeof elm.insertBefore !== 'function');\n      };\n      var _isNode = function _isNode(object) {\n        return _typeof(Node) === 'object' ? object instanceof Node : object && _typeof(object) === 'object' && typeof object.nodeType === 'number' && typeof object.nodeName === 'string';\n      };\n      var _executeHook = function _executeHook(entryPoint, currentNode, data) {\n        if (!hooks[entryPoint]) {\n          return;\n        }\n        arrayForEach(hooks[entryPoint], function (hook) {\n          hook.call(DOMPurify, currentNode, data, CONFIG);\n        });\n      };\n      var _sanitizeElements = function _sanitizeElements(currentNode) {\n        var content;\n        _executeHook('beforeSanitizeElements', currentNode, null);\n        if (_isClobbered(currentNode)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (regExpTest(/[\\u0080-\\uFFFF]/, currentNode.nodeName)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        var tagName = transformCaseFunc(currentNode.nodeName);\n        _executeHook('uponSanitizeElement', currentNode, {\n          tagName: tagName,\n          allowedTags: ALLOWED_TAGS\n        });\n        if (currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && (!_isNode(currentNode.content) || !_isNode(currentNode.content.firstElementChild)) && regExpTest(/<[/\\w]/g, currentNode.innerHTML) && regExpTest(/<[/\\w]/g, currentNode.textContent)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (tagName === 'select' && regExpTest(/<template/i, currentNode.innerHTML)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          if (!FORBID_TAGS[tagName] && _basicCustomElementTest(tagName)) {\n            if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName))\n              return false;\n            if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName))\n              return false;\n          }\n          if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n            var parentNode = getParentNode(currentNode) || currentNode.parentNode;\n            var childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n            if (childNodes && parentNode) {\n              var childCount = childNodes.length;\n              for (var i = childCount - 1; i >= 0; --i) {\n                parentNode.insertBefore(cloneNode(childNodes[i], true), getNextSibling(currentNode));\n              }\n            }\n          }\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if ((tagName === 'noscript' || tagName === 'noembed') && regExpTest(/<\\/no(script|embed)/i, currentNode.innerHTML)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n          content = currentNode.textContent;\n          content = stringReplace(content, MUSTACHE_EXPR$1, ' ');\n          content = stringReplace(content, ERB_EXPR$1, ' ');\n          if (currentNode.textContent !== content) {\n            arrayPush(DOMPurify.removed, { element: currentNode.cloneNode() });\n            currentNode.textContent = content;\n          }\n        }\n        _executeHook('afterSanitizeElements', currentNode, null);\n        return false;\n      };\n      var _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n        if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n          return false;\n        }\n        if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR$1, lcName));\n        else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR$1, lcName));\n        else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n          if (_basicCustomElementTest(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) || lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value)));\n          else {\n            return false;\n          }\n        } else if (URI_SAFE_ATTRIBUTES[lcName]);\n        else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE$1, '')));\n        else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]);\n        else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA$1, stringReplace(value, ATTR_WHITESPACE$1, '')));\n        else if (!value);\n        else {\n          return false;\n        }\n        return true;\n      };\n      var _basicCustomElementTest = function _basicCustomElementTest(tagName) {\n        return tagName.indexOf('-') > 0;\n      };\n      var _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n        var attr;\n        var value;\n        var lcName;\n        var l;\n        _executeHook('beforeSanitizeAttributes', currentNode, null);\n        var attributes = currentNode.attributes;\n        if (!attributes) {\n          return;\n        }\n        var hookEvent = {\n          attrName: '',\n          attrValue: '',\n          keepAttr: true,\n          allowedAttributes: ALLOWED_ATTR\n        };\n        l = attributes.length;\n        while (l--) {\n          attr = attributes[l];\n          var _attr = attr, name = _attr.name, namespaceURI = _attr.namespaceURI;\n          value = name === 'value' ? attr.value : stringTrim(attr.value);\n          lcName = transformCaseFunc(name);\n          hookEvent.attrName = lcName;\n          hookEvent.attrValue = value;\n          hookEvent.keepAttr = true;\n          hookEvent.forceKeepAttr = undefined;\n          _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n          value = hookEvent.attrValue;\n          if (hookEvent.forceKeepAttr) {\n            continue;\n          }\n          _removeAttribute(name, currentNode);\n          if (!hookEvent.keepAttr) {\n            continue;\n          }\n          if (regExpTest(/\\/>/i, value)) {\n            _removeAttribute(name, currentNode);\n            continue;\n          }\n          if (SAFE_FOR_TEMPLATES) {\n            value = stringReplace(value, MUSTACHE_EXPR$1, ' ');\n            value = stringReplace(value, ERB_EXPR$1, ' ');\n          }\n          var lcTag = transformCaseFunc(currentNode.nodeName);\n          if (!_isValidAttribute(lcTag, lcName, value)) {\n            continue;\n          }\n          try {\n            if (namespaceURI) {\n              currentNode.setAttributeNS(namespaceURI, name, value);\n            } else {\n              currentNode.setAttribute(name, value);\n            }\n            arrayPop(DOMPurify.removed);\n          } catch (_) {\n          }\n        }\n        _executeHook('afterSanitizeAttributes', currentNode, null);\n      };\n      var _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n        var shadowNode;\n        var shadowIterator = _createIterator(fragment);\n        _executeHook('beforeSanitizeShadowDOM', fragment, null);\n        while (shadowNode = shadowIterator.nextNode()) {\n          _executeHook('uponSanitizeShadowNode', shadowNode, null);\n          if (_sanitizeElements(shadowNode)) {\n            continue;\n          }\n          if (shadowNode.content instanceof DocumentFragment) {\n            _sanitizeShadowDOM(shadowNode.content);\n          }\n          _sanitizeAttributes(shadowNode);\n        }\n        _executeHook('afterSanitizeShadowDOM', fragment, null);\n      };\n      DOMPurify.sanitize = function (dirty, cfg) {\n        var body;\n        var importedNode;\n        var currentNode;\n        var oldNode;\n        var returnNode;\n        IS_EMPTY_INPUT = !dirty;\n        if (IS_EMPTY_INPUT) {\n          dirty = '<!-->';\n        }\n        if (typeof dirty !== 'string' && !_isNode(dirty)) {\n          if (typeof dirty.toString !== 'function') {\n            throw typeErrorCreate('toString is not a function');\n          } else {\n            dirty = dirty.toString();\n            if (typeof dirty !== 'string') {\n              throw typeErrorCreate('dirty is not a string, aborting');\n            }\n          }\n        }\n        if (!DOMPurify.isSupported) {\n          if (_typeof(window.toStaticHTML) === 'object' || typeof window.toStaticHTML === 'function') {\n            if (typeof dirty === 'string') {\n              return window.toStaticHTML(dirty);\n            }\n            if (_isNode(dirty)) {\n              return window.toStaticHTML(dirty.outerHTML);\n            }\n          }\n          return dirty;\n        }\n        if (!SET_CONFIG) {\n          _parseConfig(cfg);\n        }\n        DOMPurify.removed = [];\n        if (typeof dirty === 'string') {\n          IN_PLACE = false;\n        }\n        if (IN_PLACE) {\n          if (dirty.nodeName) {\n            var tagName = transformCaseFunc(dirty.nodeName);\n            if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n              throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n            }\n          }\n        } else if (dirty instanceof Node) {\n          body = _initDocument('<!---->');\n          importedNode = body.ownerDocument.importNode(dirty, true);\n          if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n            body = importedNode;\n          } else if (importedNode.nodeName === 'HTML') {\n            body = importedNode;\n          } else {\n            body.appendChild(importedNode);\n          }\n        } else {\n          if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT && dirty.indexOf('<') === -1) {\n            return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n          }\n          body = _initDocument(dirty);\n          if (!body) {\n            return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n          }\n        }\n        if (body && FORCE_BODY) {\n          _forceRemove(body.firstChild);\n        }\n        var nodeIterator = _createIterator(IN_PLACE ? dirty : body);\n        while (currentNode = nodeIterator.nextNode()) {\n          if (currentNode.nodeType === 3 && currentNode === oldNode) {\n            continue;\n          }\n          if (_sanitizeElements(currentNode)) {\n            continue;\n          }\n          if (currentNode.content instanceof DocumentFragment) {\n            _sanitizeShadowDOM(currentNode.content);\n          }\n          _sanitizeAttributes(currentNode);\n          oldNode = currentNode;\n        }\n        oldNode = null;\n        if (IN_PLACE) {\n          return dirty;\n        }\n        if (RETURN_DOM) {\n          if (RETURN_DOM_FRAGMENT) {\n            returnNode = createDocumentFragment.call(body.ownerDocument);\n            while (body.firstChild) {\n              returnNode.appendChild(body.firstChild);\n            }\n          } else {\n            returnNode = body;\n          }\n          if (ALLOWED_ATTR.shadowroot) {\n            returnNode = importNode.call(originalDocument, returnNode, true);\n          }\n          return returnNode;\n        }\n        var serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n        if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n          serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n        }\n        if (SAFE_FOR_TEMPLATES) {\n          serializedHTML = stringReplace(serializedHTML, MUSTACHE_EXPR$1, ' ');\n          serializedHTML = stringReplace(serializedHTML, ERB_EXPR$1, ' ');\n        }\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n      };\n      DOMPurify.setConfig = function (cfg) {\n        _parseConfig(cfg);\n        SET_CONFIG = true;\n      };\n      DOMPurify.clearConfig = function () {\n        CONFIG = null;\n        SET_CONFIG = false;\n      };\n      DOMPurify.isValidAttribute = function (tag, attr, value) {\n        if (!CONFIG) {\n          _parseConfig({});\n        }\n        var lcTag = transformCaseFunc(tag);\n        var lcName = transformCaseFunc(attr);\n        return _isValidAttribute(lcTag, lcName, value);\n      };\n      DOMPurify.addHook = function (entryPoint, hookFunction) {\n        if (typeof hookFunction !== 'function') {\n          return;\n        }\n        hooks[entryPoint] = hooks[entryPoint] || [];\n        arrayPush(hooks[entryPoint], hookFunction);\n      };\n      DOMPurify.removeHook = function (entryPoint) {\n        if (hooks[entryPoint]) {\n          return arrayPop(hooks[entryPoint]);\n        }\n      };\n      DOMPurify.removeHooks = function (entryPoint) {\n        if (hooks[entryPoint]) {\n          hooks[entryPoint] = [];\n        }\n      };\n      DOMPurify.removeAllHooks = function () {\n        hooks = {};\n      };\n      return DOMPurify;\n    }\n    var purify = createDOMPurify();\n\n    var sanitizeHtmlString = function (html) {\n      return purify().sanitize(html);\n    };\n\n    var isTouch = global$9.deviceType.isTouch();\n    var hiddenHeader = function (title, close) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: { display: 'none' },\n          classes: ['tox-dialog__header']\n        },\n        components: [\n          title,\n          close\n        ]\n      };\n    };\n    var pClose = function (onClose, providersBackstage) {\n      return ModalDialog.parts.close(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close')\n          }\n        },\n        action: onClose,\n        buttonBehaviours: derive$1([Tabstopping.config({})])\n      }));\n    };\n    var pUntitled = function () {\n      return ModalDialog.parts.title({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          innerHtml: '',\n          styles: { display: 'none' }\n        }\n      });\n    };\n    var pBodyMessage = function (message, providersBackstage) {\n      return ModalDialog.parts.body({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [{ dom: fromHtml('<p>' + sanitizeHtmlString(providersBackstage.translate(message)) + '</p>') }]\n          }]\n      });\n    };\n    var pFooter = function (buttons) {\n      return ModalDialog.parts.footer({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__footer']\n        },\n        components: buttons\n      });\n    };\n    var pFooterGroup = function (startButtons, endButtons) {\n      return [\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-start']\n          },\n          components: startButtons\n        }),\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-end']\n          },\n          components: endButtons\n        })\n      ];\n    };\n    var renderDialog$1 = function (spec) {\n      var _a;\n      var dialogClass = 'tox-dialog';\n      var blockerClass = dialogClass + '-wrap';\n      var blockerBackdropClass = blockerClass + '__backdrop';\n      var scrollLockClass = dialogClass + '__disable-scroll';\n      return ModalDialog.sketch({\n        lazySink: spec.lazySink,\n        onEscape: function (comp) {\n          spec.onEscape(comp);\n          return Optional.some(true);\n        },\n        useTabstopAt: function (elem) {\n          return !isPseudoStop(elem);\n        },\n        dom: {\n          tag: 'div',\n          classes: [dialogClass].concat(spec.extraClasses),\n          styles: __assign({ position: 'relative' }, spec.extraStyles)\n        },\n        components: __spreadArray([\n          spec.header,\n          spec.body\n        ], spec.footer.toArray(), true),\n        parts: {\n          blocker: {\n            dom: fromHtml('<div class=\"' + blockerClass + '\"></div>'),\n            components: [{\n                dom: {\n                  tag: 'div',\n                  classes: isTouch ? [\n                    blockerBackdropClass,\n                    blockerBackdropClass + '--opaque'\n                  ] : [blockerBackdropClass]\n                }\n              }]\n          }\n        },\n        dragBlockClass: blockerClass,\n        modalBehaviours: derive$1(__spreadArray([\n          Focusing.config({}),\n          config('dialog-events', spec.dialogEvents.concat([runOnSource(focusin(), function (comp, _se) {\n              Keying.focusIn(comp);\n            })])),\n          config('scroll-lock', [\n            runOnAttached(function () {\n              add$2(body(), scrollLockClass);\n            }),\n            runOnDetached(function () {\n              remove$2(body(), scrollLockClass);\n            })\n          ])\n        ], spec.extraBehaviours, true)),\n        eventOrder: __assign((_a = {}, _a[execute$5()] = ['dialog-events'], _a[attachedToDom()] = [\n          'scroll-lock',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'scroll-lock'\n        ], _a), spec.eventOrder)\n      });\n    };\n\n    var renderClose = function (providersBackstage) {\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close'),\n            'title': providersBackstage.translate('Close')\n          }\n        },\n        components: [render$3('close', {\n            tag: 'div',\n            classes: ['tox-icon']\n          }, providersBackstage.icons)],\n        action: function (comp) {\n          emit(comp, formCancelEvent);\n        }\n      });\n    };\n    var renderTitle = function (spec, id, providersBackstage) {\n      var renderComponents = function (data) {\n        return [text$1(providersBackstage.translate(data.title))];\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          attributes: __assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({}))\n        },\n        components: renderComponents(spec),\n        behaviours: derive$1([Reflecting.config({\n            channel: titleChannel,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderDragHandle = function () {\n      return { dom: fromHtml('<div class=\"tox-dialog__draghandle\"></div>') };\n    };\n    var renderInlineHeader = function (spec, titleId, providersBackstage) {\n      return Container.sketch({\n        dom: fromHtml('<div class=\"tox-dialog__header\"></div>'),\n        components: [\n          renderTitle(spec, Optional.some(titleId), providersBackstage),\n          renderDragHandle(),\n          renderClose(providersBackstage)\n        ],\n        containerBehaviours: derive$1([Dragging.config({\n            mode: 'mouse',\n            blockerClass: 'blocker',\n            getTarget: function (handle) {\n              return closest$1(handle, '[role=\"dialog\"]').getOrDie();\n            },\n            snaps: {\n              getSnapPoints: function () {\n                return [];\n              },\n              leftAttr: 'data-drag-left',\n              topAttr: 'data-drag-top'\n            }\n          })])\n      });\n    };\n    var renderModalHeader = function (spec, providersBackstage) {\n      var pTitle = ModalDialog.parts.title(renderTitle(spec, Optional.none(), providersBackstage));\n      var pHandle = ModalDialog.parts.draghandle(renderDragHandle());\n      var pClose = ModalDialog.parts.close(renderClose(providersBackstage));\n      var components = [pTitle].concat(spec.draggable ? [pHandle] : []).concat([pClose]);\n      return Container.sketch({\n        dom: fromHtml('<div class=\"tox-dialog__header\"></div>'),\n        components: components\n      });\n    };\n\n    var getHeader = function (title, backstage) {\n      return renderModalHeader({\n        title: backstage.shared.providers.translate(title),\n        draggable: backstage.dialog.isDraggableModal()\n      }, backstage.shared.providers);\n    };\n    var getBusySpec = function (message, bs, providers) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__busy-spinner'],\n          attributes: { 'aria-label': providers.translate(message) },\n          styles: {\n            left: '0px',\n            right: '0px',\n            bottom: '0px',\n            top: '0px',\n            position: 'absolute'\n          }\n        },\n        behaviours: bs,\n        components: [{ dom: fromHtml('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n      };\n    };\n    var getEventExtras = function (lazyDialog, providers, extra) {\n      return {\n        onClose: function () {\n          return extra.closeWindow();\n        },\n        onBlock: function (blockEvent) {\n          ModalDialog.setBusy(lazyDialog(), function (_comp, bs) {\n            return getBusySpec(blockEvent.message, bs, providers);\n          });\n        },\n        onUnblock: function () {\n          ModalDialog.setIdle(lazyDialog());\n        }\n      };\n    };\n    var renderModalDialog = function (spec, initialData, dialogEvents, backstage) {\n      var _a;\n      var updateState = function (_comp, incoming) {\n        return Optional.some(incoming);\n      };\n      return build$1(renderDialog$1(__assign(__assign({}, spec), {\n        lazySink: backstage.shared.getSink,\n        extraBehaviours: __spreadArray([\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: initialData\n          }),\n          RepresentingConfigs.memory({})\n        ], spec.extraBehaviours, true),\n        onEscape: function (comp) {\n          emit(comp, formCancelEvent);\n        },\n        dialogEvents: dialogEvents,\n        eventOrder: (_a = {}, _a[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _a[attachedToDom()] = [\n          'scroll-lock',\n          Reflecting.name(),\n          'messages',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'messages',\n          Reflecting.name(),\n          'scroll-lock'\n        ], _a)\n      })));\n    };\n    var mapMenuButtons = function (buttons) {\n      var mapItems = function (button) {\n        var items = map$2(button.items, function (item) {\n          var cell = Cell(false);\n          return __assign(__assign({}, item), { storage: cell });\n        });\n        return __assign(__assign({}, button), { items: items });\n      };\n      return map$2(buttons, function (button) {\n        if (button.type === 'menu') {\n          return mapItems(button);\n        }\n        return button;\n      });\n    };\n    var extractCellsToObject = function (buttons) {\n      return foldl(buttons, function (acc, button) {\n        if (button.type === 'menu') {\n          var menuButton = button;\n          return foldl(menuButton.items, function (innerAcc, item) {\n            innerAcc[item.name] = item.storage;\n            return innerAcc;\n          }, acc);\n        }\n        return acc;\n      }, {});\n    };\n\n    var initCommonEvents = function (fireApiEvent, extras) {\n      return [\n        runWithTarget(focusin(), onFocus),\n        fireApiEvent(formCloseEvent, function (_api, spec) {\n          extras.onClose();\n          spec.onClose();\n        }),\n        fireApiEvent(formCancelEvent, function (api, spec, _event, self) {\n          spec.onCancel(api);\n          emit(self, formCloseEvent);\n        }),\n        run$1(formUnblockEvent, function (_c, _se) {\n          return extras.onUnblock();\n        }),\n        run$1(formBlockEvent, function (_c, se) {\n          return extras.onBlock(se.event);\n        })\n      ];\n    };\n    var initUrlDialog = function (getInstanceApi, extras) {\n      var fireApiEvent = function (eventName, f) {\n        return run$1(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event, c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialog) {\n          f(currentDialog, c);\n        });\n      };\n      return __spreadArray(__spreadArray([], initCommonEvents(fireApiEvent, extras), true), [fireApiEvent(formActionEvent, function (api, spec, event) {\n          spec.onAction(api, { name: event.name });\n        })], false);\n    };\n    var initDialog = function (getInstanceApi, extras, getSink) {\n      var fireApiEvent = function (eventName, f) {\n        return run$1(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event, c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialogInit) {\n          f(currentDialogInit.internalDialog, c);\n        });\n      };\n      return __spreadArray(__spreadArray([], initCommonEvents(fireApiEvent, extras), true), [\n        fireApiEvent(formSubmitEvent, function (api, spec) {\n          return spec.onSubmit(api);\n        }),\n        fireApiEvent(formChangeEvent, function (api, spec, event) {\n          spec.onChange(api, { name: event.name });\n        }),\n        fireApiEvent(formActionEvent, function (api, spec, event, component) {\n          var focusIn = function () {\n            return Keying.focusIn(component);\n          };\n          var isDisabled = function (focused) {\n            return has$1(focused, 'disabled') || getOpt(focused, 'aria-disabled').exists(function (val) {\n              return val === 'true';\n            });\n          };\n          var rootNode = getRootNode(component.element);\n          var current = active(rootNode);\n          spec.onAction(api, {\n            name: event.name,\n            value: event.value\n          });\n          active(rootNode).fold(focusIn, function (focused) {\n            if (isDisabled(focused)) {\n              focusIn();\n            } else if (current.exists(function (cur) {\n                return contains(focused, cur) && isDisabled(cur);\n              })) {\n              focusIn();\n            } else {\n              getSink().toOptional().filter(function (sink) {\n                return !contains(sink.element, focused);\n              }).each(focusIn);\n            }\n          });\n        }),\n        fireApiEvent(formTabChangeEvent, function (api, spec, event) {\n          spec.onTabChange(api, {\n            newTabName: event.name,\n            oldTabName: event.oldName\n          });\n        }),\n        runOnDetached(function (component) {\n          var api = getInstanceApi();\n          Representing.setValue(component, api.getData());\n        })\n      ], false);\n    };\n    var SilverDialogEvents = {\n      initUrlDialog: initUrlDialog,\n      initDialog: initDialog\n    };\n\n    var makeButton = function (button, backstage) {\n      return renderFooterButton(button, button.type, backstage);\n    };\n    var lookup = function (compInSystem, footerButtons, buttonName) {\n      return find$5(footerButtons, function (button) {\n        return button.name === buttonName;\n      }).bind(function (memButton) {\n        return memButton.memento.getOpt(compInSystem);\n      });\n    };\n    var renderComponents = function (_data, state) {\n      var footerButtons = state.map(function (s) {\n        return s.footerButtons;\n      }).getOr([]);\n      var buttonGroups = partition$3(footerButtons, function (button) {\n        return button.align === 'start';\n      });\n      var makeGroup = function (edge, buttons) {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-' + edge]\n          },\n          components: map$2(buttons, function (button) {\n            return button.memento.asSpec();\n          })\n        });\n      };\n      var startButtons = makeGroup('start', buttonGroups.pass);\n      var endButtons = makeGroup('end', buttonGroups.fail);\n      return [\n        startButtons,\n        endButtons\n      ];\n    };\n    var renderFooter = function (initSpec, backstage) {\n      var updateState = function (_comp, data) {\n        var footerButtons = map$2(data.buttons, function (button) {\n          var memButton = record(makeButton(button, backstage));\n          return {\n            name: button.name,\n            align: button.align,\n            memento: memButton\n          };\n        });\n        var lookupByName = function (compInSystem, buttonName) {\n          return lookup(compInSystem, footerButtons, buttonName);\n        };\n        return Optional.some({\n          lookupByName: lookupByName,\n          footerButtons: footerButtons\n        });\n      };\n      return {\n        dom: fromHtml('<div class=\"tox-dialog__footer\"></div>'),\n        components: [],\n        behaviours: derive$1([Reflecting.config({\n            channel: footerChannel,\n            initialData: initSpec,\n            updateState: updateState,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderInlineFooter = function (initSpec, backstage) {\n      return renderFooter(initSpec, backstage);\n    };\n    var renderModalFooter = function (initSpec, backstage) {\n      return ModalDialog.parts.footer(renderFooter(initSpec, backstage));\n    };\n\n    var getCompByName = function (access, name) {\n      var root = access.getRoot();\n      if (root.getSystem().isConnected()) {\n        var form_1 = Composing.getCurrent(access.getFormWrapper()).getOr(access.getFormWrapper());\n        return Form.getField(form_1, name).fold(function () {\n          var footer = access.getFooter();\n          var footerState = Reflecting.getState(footer);\n          return footerState.get().bind(function (f) {\n            return f.lookupByName(form_1, name);\n          });\n        }, function (comp) {\n          return Optional.some(comp);\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var validateData$1 = function (access, data) {\n      var root = access.getRoot();\n      return Reflecting.getState(root).get().map(function (dialogState) {\n        return getOrDie(asRaw('data', dialogState.dataValidator, data));\n      }).getOr(data);\n    };\n    var getDialogApi = function (access, doRedial, menuItemStates) {\n      var withRoot = function (f) {\n        var root = access.getRoot();\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var getData = function () {\n        var root = access.getRoot();\n        var valueComp = root.getSystem().isConnected() ? access.getFormWrapper() : root;\n        var representedValues = Representing.getValue(valueComp);\n        var menuItemCurrentState = map$1(menuItemStates, function (cell) {\n          return cell.get();\n        });\n        return __assign(__assign({}, representedValues), menuItemCurrentState);\n      };\n      var setData = function (newData) {\n        withRoot(function (_) {\n          var prevData = instanceApi.getData();\n          var mergedData = __assign(__assign({}, prevData), newData);\n          var newInternalData = validateData$1(access, mergedData);\n          var form = access.getFormWrapper();\n          Representing.setValue(form, newInternalData);\n          each(menuItemStates, function (v, k) {\n            if (has$2(mergedData, k)) {\n              v.set(mergedData[k]);\n            }\n          });\n        });\n      };\n      var disable = function (name) {\n        getCompByName(access, name).each(Disabling.disable);\n      };\n      var enable = function (name) {\n        getCompByName(access, name).each(Disabling.enable);\n      };\n      var focus = function (name) {\n        getCompByName(access, name).each(Focusing.focus);\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var showTab = function (name) {\n        withRoot(function (_) {\n          var body = access.getBody();\n          var bodyState = Reflecting.getState(body);\n          if (bodyState.get().exists(function (b) {\n              return b.isTabPanel();\n            })) {\n            Composing.getCurrent(body).each(function (tabSection) {\n              TabSection.showTab(tabSection, name);\n            });\n          }\n        });\n      };\n      var redial = function (d) {\n        withRoot(function (root) {\n          var dialogInit = doRedial(d);\n          root.getSystem().broadcastOn([dialogChannel], dialogInit);\n          root.getSystem().broadcastOn([titleChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([bodyChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([footerChannel], dialogInit.internalDialog);\n          instanceApi.setData(dialogInit.initialData);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var instanceApi = {\n        getData: getData,\n        setData: setData,\n        disable: disable,\n        enable: enable,\n        focus: focus,\n        block: block,\n        unblock: unblock,\n        showTab: showTab,\n        redial: redial,\n        close: close\n      };\n      return instanceApi;\n    };\n\n    var getDialogSizeClasses = function (size) {\n      switch (size) {\n      case 'large':\n        return ['tox-dialog--width-lg'];\n      case 'medium':\n        return ['tox-dialog--width-md'];\n      default:\n        return [];\n      }\n    };\n    var renderDialog = function (dialogInit, extra, backstage) {\n      var header = getHeader(dialogInit.internalDialog.title, backstage);\n      var body = renderModalBody({ body: dialogInit.internalDialog.body }, backstage);\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var footer = renderModalFooter({ buttons: storagedMenuButtons }, backstage);\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, backstage.shared.providers, extra), backstage.shared.getSink);\n      var dialogSize = getDialogSizeClasses(dialogInit.internalDialog.size);\n      var spec = {\n        header: header,\n        body: body,\n        footer: Optional.some(footer),\n        extraClasses: dialogSize,\n        extraBehaviours: [],\n        extraStyles: {}\n      };\n      var dialog = renderModalDialog(spec, dialogInit, dialogEvents, backstage);\n      var modalAccess = function () {\n        var getForm = function () {\n          var outerForm = ModalDialog.getBody(dialog);\n          return Composing.getCurrent(outerForm).getOr(outerForm);\n        };\n        return {\n          getRoot: constant$1(dialog),\n          getBody: function () {\n            return ModalDialog.getBody(dialog);\n          },\n          getFooter: function () {\n            return ModalDialog.getFooter(dialog);\n          },\n          getFormWrapper: getForm\n        };\n      }();\n      var instanceApi = getDialogApi(modalAccess, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var renderInlineDialog = function (dialogInit, extra, backstage, ariaAttrs) {\n      var _a, _b;\n      var dialogLabelId = generate$6('dialog-label');\n      var dialogContentId = generate$6('dialog-content');\n      var updateState = function (_comp, incoming) {\n        return Optional.some(incoming);\n      };\n      var memHeader = record(renderInlineHeader({\n        title: dialogInit.internalDialog.title,\n        draggable: true\n      }, dialogLabelId, backstage.shared.providers));\n      var memBody = record(renderInlineBody({ body: dialogInit.internalDialog.body }, dialogContentId, backstage, ariaAttrs));\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var memFooter = record(renderInlineFooter({ buttons: storagedMenuButtons }, backstage));\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, {\n        onBlock: function (event) {\n          Blocking.block(dialog, function (_comp, bs) {\n            return getBusySpec(event.message, bs, backstage.shared.providers);\n          });\n        },\n        onUnblock: function () {\n          Blocking.unblock(dialog);\n        },\n        onClose: function () {\n          return extra.closeWindow();\n        }\n      }, backstage.shared.getSink);\n      var dialog = build$1({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-dialog',\n            'tox-dialog-inline'\n          ],\n          attributes: (_a = { role: 'dialog' }, _a['aria-labelledby'] = dialogLabelId, _a['aria-describedby'] = dialogContentId, _a)\n        },\n        eventOrder: (_b = {}, _b[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _b[execute$5()] = ['execute-on-form'], _b[attachedToDom()] = [\n          'reflecting',\n          'execute-on-form'\n        ], _b),\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'cyclic',\n            onEscape: function (c) {\n              emit(c, formCloseEvent);\n              return Optional.some(true);\n            },\n            useTabstopAt: function (elem) {\n              return !isPseudoStop(elem) && (name$2(elem) !== 'button' || get$d(elem, 'disabled') !== 'disabled');\n            }\n          }),\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: dialogInit\n          }),\n          Focusing.config({}),\n          config('execute-on-form', dialogEvents.concat([runOnSource(focusin(), function (comp, _se) {\n              Keying.focusIn(comp);\n            })])),\n          Blocking.config({\n            getRoot: function () {\n              return Optional.some(dialog);\n            }\n          }),\n          Replacing.config({}),\n          RepresentingConfigs.memory({})\n        ]),\n        components: [\n          memHeader.asSpec(),\n          memBody.asSpec(),\n          memFooter.asSpec()\n        ]\n      });\n      var instanceApi = getDialogApi({\n        getRoot: constant$1(dialog),\n        getFooter: function () {\n          return memFooter.get(dialog);\n        },\n        getBody: function () {\n          return memBody.get(dialog);\n        },\n        getFormWrapper: function () {\n          var body = memBody.get(dialog);\n          return Composing.getCurrent(body).getOr(body);\n        }\n      }, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var getUrlDialogApi = function (root) {\n      var withRoot = function (f) {\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var sendMessage = function (data) {\n        withRoot(function (root) {\n          root.getSystem().broadcastOn([bodySendMessageChannel], data);\n        });\n      };\n      return {\n        block: block,\n        unblock: unblock,\n        close: close,\n        sendMessage: sendMessage\n      };\n    };\n\n    var SUPPORTED_MESSAGE_ACTIONS = [\n      'insertContent',\n      'setContent',\n      'execCommand',\n      'close',\n      'block',\n      'unblock'\n    ];\n    var isSupportedMessage = function (data) {\n      return isObject(data) && SUPPORTED_MESSAGE_ACTIONS.indexOf(data.mceAction) !== -1;\n    };\n    var isCustomMessage = function (data) {\n      return !isSupportedMessage(data) && isObject(data) && has$2(data, 'mceAction');\n    };\n    var handleMessage = function (editor, api, data) {\n      switch (data.mceAction) {\n      case 'insertContent':\n        editor.insertContent(data.content);\n        break;\n      case 'setContent':\n        editor.setContent(data.content);\n        break;\n      case 'execCommand':\n        var ui = isBoolean(data.ui) ? data.ui : false;\n        editor.execCommand(data.cmd, ui, data.value);\n        break;\n      case 'close':\n        api.close();\n        break;\n      case 'block':\n        api.block(data.message);\n        break;\n      case 'unblock':\n        api.unblock();\n        break;\n      }\n    };\n    var renderUrlDialog = function (internalDialog, extra, editor, backstage) {\n      var _a;\n      var header = getHeader(internalDialog.title, backstage);\n      var body = renderIframeBody(internalDialog);\n      var footer = internalDialog.buttons.bind(function (buttons) {\n        if (buttons.length === 0) {\n          return Optional.none();\n        } else {\n          return Optional.some(renderModalFooter({ buttons: buttons }, backstage));\n        }\n      });\n      var dialogEvents = SilverDialogEvents.initUrlDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, backstage.shared.providers, extra));\n      var styles = __assign(__assign({}, internalDialog.height.fold(function () {\n        return {};\n      }, function (height) {\n        return {\n          'height': height + 'px',\n          'max-height': height + 'px'\n        };\n      })), internalDialog.width.fold(function () {\n        return {};\n      }, function (width) {\n        return {\n          'width': width + 'px',\n          'max-width': width + 'px'\n        };\n      }));\n      var classes = internalDialog.width.isNone() && internalDialog.height.isNone() ? ['tox-dialog--width-lg'] : [];\n      var iframeUri = new global$1(internalDialog.url, { base_uri: new global$1(window.location.href) });\n      var iframeDomain = iframeUri.protocol + '://' + iframeUri.host + (iframeUri.port ? ':' + iframeUri.port : '');\n      var messageHandlerUnbinder = unbindable();\n      var extraBehaviours = [\n        config('messages', [\n          runOnAttached(function () {\n            var unbind = bind(SugarElement.fromDom(window), 'message', function (e) {\n              if (iframeUri.isSameOrigin(new global$1(e.raw.origin))) {\n                var data = e.raw.data;\n                if (isSupportedMessage(data)) {\n                  handleMessage(editor, instanceApi, data);\n                } else if (isCustomMessage(data)) {\n                  internalDialog.onMessage(instanceApi, data);\n                }\n              }\n            });\n            messageHandlerUnbinder.set(unbind);\n          }),\n          runOnDetached(messageHandlerUnbinder.clear)\n        ]),\n        Receiving.config({\n          channels: (_a = {}, _a[bodySendMessageChannel] = {\n            onReceive: function (comp, data) {\n              descendant(comp.element, 'iframe').each(function (iframeEle) {\n                var iframeWin = iframeEle.dom.contentWindow;\n                iframeWin.postMessage(data, iframeDomain);\n              });\n            }\n          }, _a)\n        })\n      ];\n      var spec = {\n        header: header,\n        body: body,\n        footer: footer,\n        extraClasses: classes,\n        extraBehaviours: extraBehaviours,\n        extraStyles: styles\n      };\n      var dialog = renderModalDialog(spec, internalDialog, dialogEvents, backstage);\n      var instanceApi = getUrlDialogApi(dialog);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var setup$2 = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function () {\n          ModalDialog.hide(alertDialog);\n          callback();\n        };\n        var memFooterClose = record(renderFooterButton({\n          name: 'close-alert',\n          text: 'OK',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'cancel', extras.backstage));\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(closeDialog, sharedBackstage.providers);\n        var alertDialog = build$1(renderDialog$1({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [memFooterClose.asSpec()]))),\n          onEscape: closeDialog,\n          extraClasses: ['tox-alert-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [run$1(formCancelEvent, closeDialog)],\n          eventOrder: {}\n        }));\n        ModalDialog.show(alertDialog);\n        var footerCloseButton = memFooterClose.get(alertDialog);\n        Focusing.focus(footerCloseButton);\n      };\n      return { open: open };\n    };\n\n    var setup$1 = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function (state) {\n          ModalDialog.hide(confirmDialog);\n          callback(state);\n        };\n        var memFooterYes = record(renderFooterButton({\n          name: 'yes',\n          text: 'Yes',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'submit', extras.backstage));\n        var footerNo = renderFooterButton({\n          name: 'no',\n          text: 'No',\n          primary: false,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'cancel', extras.backstage);\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(function () {\n          return closeDialog(false);\n        }, sharedBackstage.providers);\n        var confirmDialog = build$1(renderDialog$1({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [\n            footerNo,\n            memFooterYes.asSpec()\n          ]))),\n          onEscape: function () {\n            return closeDialog(false);\n          },\n          extraClasses: ['tox-confirm-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [\n            run$1(formCancelEvent, function () {\n              return closeDialog(false);\n            }),\n            run$1(formSubmitEvent, function () {\n              return closeDialog(true);\n            })\n          ],\n          eventOrder: {}\n        }));\n        ModalDialog.show(confirmDialog);\n        var footerYesButton = memFooterYes.get(confirmDialog);\n        Focusing.focus(footerYesButton);\n      };\n      return { open: open };\n    };\n\n    var validateData = function (data, validator) {\n      return getOrDie(asRaw('data', validator, data));\n    };\n    var isAlertOrConfirmDialog = function (target) {\n      return closest(target, '.tox-alert-dialog') || closest(target, '.tox-confirm-dialog');\n    };\n    var inlineAdditionalBehaviours = function (editor, isStickyToolbar, isToolbarLocationTop) {\n      if (isStickyToolbar && isToolbarLocationTop) {\n        return [];\n      } else {\n        return [Docking.config({\n            contextual: {\n              lazyContext: function () {\n                return Optional.some(box$1(SugarElement.fromDom(editor.getContentAreaContainer())));\n              },\n              fadeInClass: 'tox-dialog-dock-fadein',\n              fadeOutClass: 'tox-dialog-dock-fadeout',\n              transitionClass: 'tox-dialog-dock-transition'\n            },\n            modes: ['top']\n          })];\n      }\n    };\n    var setup = function (extras) {\n      var backstage = extras.backstage;\n      var editor = extras.editor;\n      var isStickyToolbar$1 = isStickyToolbar(editor);\n      var alertDialog = setup$2(extras);\n      var confirmDialog = setup$1(extras);\n      var open = function (config, params, closeWindow) {\n        if (params !== undefined && params.inline === 'toolbar') {\n          return openInlineDialog(config, backstage.shared.anchors.inlineDialog(), closeWindow, params.ariaAttrs);\n        } else if (params !== undefined && params.inline === 'cursor') {\n          return openInlineDialog(config, backstage.shared.anchors.cursor(), closeWindow, params.ariaAttrs);\n        } else {\n          return openModalDialog(config, closeWindow);\n        }\n      };\n      var openUrl = function (config, closeWindow) {\n        return openModalUrlDialog(config, closeWindow);\n      };\n      var openModalUrlDialog = function (config, closeWindow) {\n        var factory = function (contents) {\n          var dialog = renderUrlDialog(contents, {\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, editor, backstage);\n          ModalDialog.show(dialog.dialog);\n          return dialog.instanceApi;\n        };\n        return DialogManager.openUrl(factory, config);\n      };\n      var openModalDialog = function (config, closeWindow) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = internalInitialData;\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var dialog = renderDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, backstage);\n          ModalDialog.show(dialog.dialog);\n          dialog.instanceApi.setData(initialData);\n          return dialog.instanceApi;\n        };\n        return DialogManager.open(factory, config);\n      };\n      var openInlineDialog = function (config$1, anchor, closeWindow, ariaAttrs) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = validateData(internalInitialData, dataValidator);\n          var inlineDialog = value$1();\n          var isToolbarLocationTop = backstage.shared.header.isPositionedAtTop();\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var refreshDocking = function () {\n            return inlineDialog.on(function (dialog) {\n              InlineView.reposition(dialog);\n              Docking.refresh(dialog);\n            });\n          };\n          var dialogUi = renderInlineDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              inlineDialog.on(InlineView.hide);\n              editor.off('ResizeEditor', refreshDocking);\n              inlineDialog.clear();\n              closeWindow(dialogUi.instanceApi);\n            }\n          }, backstage, ariaAttrs);\n          var inlineDialogComp = build$1(InlineView.sketch(__assign(__assign({\n            lazySink: backstage.shared.getSink,\n            dom: {\n              tag: 'div',\n              classes: []\n            },\n            fireDismissalEventInstead: {}\n          }, isToolbarLocationTop ? {} : { fireRepositionEventInstead: {} }), {\n            inlineBehaviours: derive$1(__spreadArray([config('window-manager-inline-events', [run$1(dismissRequested(), function (_comp, _se) {\n                  emit(dialogUi.dialog, formCancelEvent);\n                })])], inlineAdditionalBehaviours(editor, isStickyToolbar$1, isToolbarLocationTop), true)),\n            isExtraPart: function (_comp, target) {\n              return isAlertOrConfirmDialog(target);\n            }\n          })));\n          inlineDialog.set(inlineDialogComp);\n          InlineView.showWithin(inlineDialogComp, premade(dialogUi.dialog), { anchor: anchor }, Optional.some(body()));\n          if (!isStickyToolbar$1 || !isToolbarLocationTop) {\n            Docking.refresh(inlineDialogComp);\n            editor.on('ResizeEditor', refreshDocking);\n          }\n          dialogUi.instanceApi.setData(initialData);\n          Keying.focusIn(dialogUi.dialog);\n          return dialogUi.instanceApi;\n        };\n        return DialogManager.open(factory, config$1);\n      };\n      var confirm = function (message, callback) {\n        confirmDialog.open(message, function (state) {\n          callback(state);\n        });\n      };\n      var alert = function (message, callback) {\n        alertDialog.open(message, function () {\n          callback();\n        });\n      };\n      var close = function (instanceApi) {\n        instanceApi.close();\n      };\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        close: close,\n        confirm: confirm\n      };\n    };\n\n    function Theme () {\n      global$g.add('silver', function (editor) {\n        var _a = setup$3(editor), uiMothership = _a.uiMothership, backstage = _a.backstage, renderUI = _a.renderUI, getUi = _a.getUi;\n        Autocompleter.register(editor, backstage.shared);\n        var windowMgr = setup({\n          editor: editor,\n          backstage: backstage\n        });\n        return {\n          renderUI: renderUI,\n          getWindowManagerImpl: constant$1(windowMgr),\n          getNotificationManagerImpl: function () {\n            return NotificationManagerImpl(editor, { backstage: backstage }, uiMothership);\n          },\n          ui: getUi()\n        };\n      });\n    }\n\n    Theme();\n\n}());\n"],"names":["isType$1","type","value","x","t","Array","prototype","isPrototypeOf","constructor","name","String","typeOf","isSimpleType","eq$1","a","isString","isObject","isArray","isNull","isBoolean","isUndefined","undefined","isNullable","isNonNullable","isFunction","isNumber","isArrayOf","pred","i","len","length","noop","compose","fa","fb","args","_i","arguments","apply","constant$1","identity$1","tripleEquals","b","curry","fn","initialArgs","restArgs","all","concat","not","f","die","msg","Error","never","always","global$g","tinymce","util","Tools","resolve","__assign","Object","assign","s","n","p","hasOwnProperty","call","this","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__spreadArray","to","from","pack","ar","l","slice","id","none","NONE","thunk","fold","_s","isSome","isNone","getOr","getOrThunk","getOrDie","getOrNull","getOrUndefined","or","orThunk","map","each","bind","exists","forall","filter","toArray","toString","some","constant_a","self","me","Optional","nativeSlice","nativeIndexOf","nativePush","push","rawIndexOf","ts","contains$2","xs","range$2","num","r","chunk$1","array","size","map$2","each$1","partition$3","pass","fail","filter$2","foldr","acc","eachr","foldl","find$5","until","findUntil","findIndex$1","flatten","bind$3","reverse","difference","a1","a2","mapToObject","pure$2","sort","comparator","copy","get$f","head","last$2","findMap","arr","keys","hasOwnProperty$1","obj","props","k","map$1","tupleMap","v","tuple","filter$1","onTrue","onFalse","internalFilter","objAcc","mapToArray","find$4","values","get$e","key","has$2","hasNonNullableKey","is$1","lhs","rhs","left","cat","lift2","oa","ob","someIf","checkRange","str","substr","start","contains$1","startsWith","prefix","endsWith","suffix","trim$1","replace","blank","isNotEmpty","isSupported$1","dom","style","getPropertyValue","fromDom","node","SugarElement","fromHtml","html","scope","div","document","createElement","innerHTML","hasChildNodes","childNodes","console","error","fromTag","tag","fromText","text","createTextNode","fromPoint","docElm","y","elementFromPoint","window","Function","SimpleResultType","name$2","element","nodeName","toLowerCase","isType","nodeType","isElement$2","isText$1","isDocument","isDocumentFragment","cached","called","unknown$3","nu$d","major","minor","Version","nu","detect","versionRegexes","agent","cleanedAgent","regexes","test","firstMatch","group","Number","find$3","unknown","detect$3","candidates","userAgent","candidate","search","normalVersionRegex","checkContains","target","uastring","browsers","brand","oses","PlatformInfo","edge","chrome","opera","firefox","safari","nu$c","info","current","version","isBrowser","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","ie","windows","android","linux","solaris","freebsd","chromeos","nu$b","isOS","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","ios","osx","PlatformDetection","userAgentDataOpt","mediaMatch","browser","userAgentData","brands","uaBrand","lcBrand","_a","parseInt","detectBrowser$1","detectBrowser","os","detectOs","deviceType","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","DeviceType","query","matchMedia","matches","platform","navigator","detect$1","is","selector","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","eq","e1","e2","ieContains","match","compareDocumentPosition","Node","DOCUMENT_POSITION_CONTAINED_BY","documentPositionContainedBy","contains","d1","d2","regularContains","owner$4","ownerDocument","documentOrOwner","dos","documentElement","defaultView","parent","parentNode","offsetParent","children","child$2","index","cs","spot","offset","leaf","isShadowRoot","host","supported","Element","attachShadow","getRootNode","isSupported","getContentContainer","body","getShadowRoot","getShadowHost","isOpenShadowHost","shadowRoot","inBody","fbc","fab","doc","getBody","rawSet","setAttribute","set$8","setAll$1","attrs","get$d","getAttribute","getOpt","has$1","hasAttribute","remove$7","removeAttribute","internalSet","property","setProperty","internalRemove","removeProperty","set$7","setAll","css","setOptions","get$c","getComputedStyle","getUnsafeProperty","getRaw","raw","getAllRaw","ruleName","item","isValidValue","remove$6","reflow","offsetWidth","Dimension","getOffset","get","parseFloat","aggregate","properties","val","isNaN","set","h","getOuter","max","cumulativeInclusions","api$3","getBoundingClientRect","height","offsetHeight","get$b","getOuter$2","r$1","top","translate","SugarPosition","firstDefinedOrZero","absolute$3","win","offsetLeft","offsetTop","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","viewport$1","box","boxPosition","api$2","get$a","getOuter$1","fromRawEvent$1","rawEvent","event","el","composed","composedPath","getOriginalEventTarget","stop","stopPropagation","prevent","preventDefault","kill","mkEvent","clientX","clientY","binder","handler","useCapture","wrapped","handle","addEventListener","unbind","removeEventListener","before$2","marker","insertBefore","after$2","sibling","nextSibling","append$2","prepend$1","firstChild$1","firstChild","appendChild","append$1","elements","empty","textContent","rogue","remove$5","removeChild","unwrap","wrapper","children$1","get$9","_DOC","scrollTo","bounds$1","width","right","bottom","getBounds$3","_win","scroll","get$8","clientWidth","clientHeight","visualViewport","Math","pageLeft","pageTop","walkUp","navigation","view","owner","rest","Navigation","freeze","__proto__","frameElement","find$2","path","d","paths","pathTo","frames","loc","bounds","box$1","xy","w","absolute$2","position","value$3","o","isValue","isError","_opt","_f","_","onValue","mapError","toOptional","error$1","message","onError","Result","fromOption","opt","err","fold$1","res","stype","serror","svalue","Value","SimpleResult","results","errors","field$2","newKey","presence","prop","ifField","ifCustom","instantiator","baseMerge","merger","objects","ret","j","curObject","deepMerge","old","merge$1","defaultedThunk","fallbackThunk","process","defaulted$1","fallback","mergeWithThunk","baseThunk","mergeErrors$1","ResultCombine","partitions","formatObj","input","JSON","stringify","nu$a","getErrorInfo","value$2","validator","extract","custom","anyValue$1","requiredAccess","bundle","missingRequired","fallbackAccess","extractField","field","av","bundleAsOption","optValue","ov","result","optionAccess","optionDefaultedAccess","valueThunk","getDelegate","getSetKeys","objOfOnly","fields","delegate","objOf","fieldNames","extra","unsupported","join","unsupportedFields","success","fields_1","extractFields","fieldStrings","_okey","_presence","_instantiator","arrOf","oneOf","props_1","setOf$1","keys$1","validatedKeys","validateKeys","validKeys","schema","vk","arrOfObj","anyValue","typedValue","expectedType","actualType","number","string","boolean","functionProcessor","isPostMessageable","every","postMessageable","chooseFrom","branches","ch","branch","missingBranch","vp","choose$2","missingKey","chosen","valueOf","setOf","asRaw","label","errs","extractValue","extraction","errInfo","formatError","asRawOrDie$1","es","choose$1","field$1","customField","validateEnum","required$1","requiredOf","requiredNumber","requiredString","requiredStringEnum","requiredFunction","requiredObjOf","objSchema","requiredArrayOfObj","objFields","requiredArrayOf","option","optionOf","optionNumber","optionString","optionFunction","optionArrayOf","optionObjOf","defaulted","defaultedOf","defaultedNumber","defaultedString","defaultedStringEnum","defaultedBoolean","defaultedFunction","defaultedArrayOf","defaultedObjOf","Cell","initial","Adt","cases","constructors","adt","acase","count","argLength","branchKeys","reqKey","foldArgs","log","params","bothErrors","firstError","secondError","bothValues","_a$2","exclude","exclude$1","wrap$1","wrap$2","wrapAll","keyvalues","kv","wrapAll$1","consolidate","objs","base","partition$1","mergeValues","ensureIsRoot","isRoot","ancestor$2","transform","transformed","closest$4","isSource","component","simulatedEvent","defaultEventHandler","can","abort","run","nu$9","parts","fuse$1","handlers","all$2","any","constant","touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseout","mouseup","mouseover","focusin","focusout","keydown","keyup","change","click","transitioncancel","transitionend","transitionstart","selectstart","prefixName","alloy","tap","focus$4","postBlur","postPaste","receive","execute$5","focusItem","longpress","sandboxClose","typeaheadCancel","systemInit","documentTouchmove","documentTouchend","windowScroll","windowResize","attachedToDom","detachedFromDom","dismissRequested","repositionRequested","focusShifted","slotVisibility","changeTab","dismissTab","highlight$1","dehighlight$1","emit","dispatchWith","emitWith","emitExecute","dispatch","data","getSystem","triggerEvent","dispatchEvent","derive$2","configs","predicate","run$1","runActionExtra","action","runOnSourceName","redirectToPart","detail","partName","uid","getByUid","redirectee","redirectToUid","partUids","runWithTarget","ev","getByDom","cutter","cut","stopper","runOnSource","runOnAttached","runOnDetached","runOnInit","runOnExecute$1","runOnName","get$7","set$5","content","docDom","fragment","createDocumentFragment","contentElements","fromHtml$1","shallow","original","isDeep","cloneNode","clone$2","getHtml","container","clone","events$i","originator","isRecursive","warn","DefaultEvents","events","unique","generate$6","time","Date","getTime","floor","random","prefix$1","idAttr$1","idAttr","writeOnly","defineProperty","writable","read$1","generate$5","make$8","NoContextApi","getComp","getMessage","debugInfo","triggerFocus","triggerEscape","broadcast","broadcastOn","broadcastEvent","build","addToWorld","removeFromWorld","addToGui","removeFromGui","isConnected","singleton$1","cleanParameters","parameters","substring","markAsExtraApi","extraName","endIndex","openBracketIndex","split","toFunctionAnnotation","premadeTag","premade$1","comp","makeApi","apiFunction","markAsSketchApi","getApis","NoState","init","nu$8","readState","spec","byInnerKey","indexKey","chain","nu$7","classes","attributes","styles","getCurried","descHandler","cHandler","behaviourTuple","groupByEvents","behaviours","behaviourEvents","behaviour","nameToHandlers","assemble","rawHandler","read$2","fuse","tuples","eventOrder","eventName","order","keyName","sorted","aKey","bKey","aIndex","bIndex","sortKeys","sortedTuples","c","missingOrderError","combineGroups","byEventName","assembled","purpose","uncurried","baseBehaviour","schema$z","mergeWith","toEvents","read","attr","supports","classList","add$3","clazz","add$4","remove$3","remove$4","add$2","add","cleanClass","get$6","remove$2","remove","has","add$1","remove$1","get$5","set$4","generateFrom","validated","list","optBlobThunk","output","blob","config","state","generateFrom$1","generate$4","getBehaviours$2","getDomDefinition","bList","bData","defnA","mod","definition","domChildren","components","infoModification","domModification","toModification","baseModification","modification","baseMod","modsByBehaviour","exhibit","byAspect","combineObjects","combinedClasses","combinedAttributes","combinedStyles","combine$2","getEvents","baseEvents","combine$1","build$2","getMe","systemApi","toInfo","bBlob","getBehaviours$3","getData$2","subject","innerHtml","renderToDom","subcomponents","hasConfigured","behaviourName","apis","connect","newApi","disconnect","syncComponents","subs","child","buildFromSpec","userSpec","specEvents","build$1","buildSubcomponents","completeSpec","text$1","external$2","extSpec","uids","getPremade","userSpecWithUid","isSketchSpec$1","premade","ClosestOrAncestor","ancestor","EventConfiguration","ancestor$1","closest$3","closest$2","child$1","descendant","querySelector","one","closest$1","manager","ariaId","link","unlink","isAriaPartOf","queryElem","dependent","dep","find$1","isPartOf$1","eventConfig","processEvent","initialTarget","patterns","NORMAL","noLogger","LOGGING","logger","sequence","startTime","logEventCut","_name","outcome","logEventStopped","logNoParent","logEventNoHandlers","logEventResponse","write","finishTime","makeEventLogger","STOP","monitorEvent","menuFields","itemFields","itemSchema$3","_initSize","tieredMenuMarkers","markers$1","required","onPresenceHandler","fieldName","stack","lines","line","getTrace","onHandler","onKeyboardHandler","onStrictHandler","onStrictKeyboardHandler","output$1","snapshot","initSize","nu$6","bubble","direction","placement","boundsRestriction","labelPrefix","alwaysFit","restriction","adt$a","southeast","southwest","northeast","northwest","south","north","east","west","southeast$3","southwest$3","northeast$3","northwest$3","south$3","north$3","east$3","west$3","cycleBy","delta","min","clamp$1","anchor","restrictions","dir","getRestriction","labelPrefix$2","eastX$1","middleX$1","westX$1","northY$2","southY$2","centreY$1","southeast$2","bubbles","southwest$2","northeast$2","northwest$2","north$2","south$2","east$2","eastEdgeX$1","west$2","westEdgeX$1","all$1","allRtl$1","aboveOrBelow","aboveOrBelowRtl","belowOrAbove","belowOrAboveRtl","ActiveReceiving","receiveConfig","channelMap","channels","receivingData","targetChannels","universal","chooseChannels","channelInfo","channelSchema","onReceive","ReceivingSchema","loadEvent","bConfig","bState","_simulatedEvent","wrapApi","bName","apiName","markAsBehaviourApi","revokeBehaviour","doCreate","configSchema","schemaSchema","active","getConfig","wrappedApis","apiF","wrappedExtra","extraF","revoke","prepared","configAsRaw","initialConfig","behaviourInfo","exhibitor","derive$1","capabilities","simpleSchema","create$8","create$9","modeSchema","createModes","modes","createModes$1","branchKey","Receiving","ActivePosition","posConfig","useFixed","getDocument","focus$3","focus","hasFocus","root","activeElement","preserve$1","refocus","focused","descend","child_1","oldFocus","newFocus","NuPositionCss","toPx","applyPositionCss","toOptions","adt$9","relative","fixed","positionWithDirection","posName","decision","decisionRect","rect","decisionX","decisionY","decisionRight","decisionBottom","cata$2","reposition","origin","toBox","rel","viewport","getBounds","pos","translate$2","outerScroll","AttributeValue","relative$1","fixed$1","anchorBox","placementAttribute","getPlacement","adt$8","fit","nofit","attempt","bubbleOffset","adjustedBounds","applyRestriction","isVerticalAxis","newPos","adjustedLeft","adjustedTop","adjustedRight","adjustedBottom","adjustBounds","newX","newY","boundsX","boundsY","boundsRight","boundsBottom","originInBounds","sizeInBounds","visibleW","visibleH","determinePosition","fits","fittedBox","maxX","maxY","restrictedX","restrictedY","restrictedWidth","restrictedHeight","calcReposition","isPartlyVisible","_b","upAvailable","downAvailable","maxHeight","middle","cataVertical","westAvailable","eastAvailable","maxWidth","cataHorizontal","calcMaxSizes","on","classesOn","off","classesOff","layout","testY","singleton","doRevoke","clear","isSet","destroyable","destroy","unbindable","value$1","bind$2","capture","capture$1","fromRawEvent","timerAttr","isTransitioning$1","transition","hasAll","hasChanges","intermediate","round","toFixed","newValue","setupTransitionListeners","timer","transitionEnd","transitionCancel","isSourceTransition","pseudoElement","propertyName","transitionDone","clearTimeout","transitionStarted","transitionStart_1","duration","times","parse","delay","dur","getTransitionDuration","requestAnimationFrame","setTimeout","applyTransitionCss","lastPlacement","shouldTransition","placer","mode","shouldApplyTransitionCss","intermediatePosition_1","intermediateCssOptions","timerId","startTransitioning","options","elementBox","panelWidth","panelHeight","attemptBestFit","isVisible","next","attemptLayout","newReposition","newVisibleW","newVisibleH","newIsVisible","abc","bestNext","attempts","preference","setPlacement","setPlacement$1","setMaxHeight","absMax","setMax$1","anchored","available","expandable$1","defaultOr","dephault","go","positionCss","position$2","classInfo","setClasses","maxHeightFunction","setHeight","maxWidthFunction","setWidth","allAlignments","nu$5","xOffset","yOffset","insetModifier","insetXOffset","insetYOffset","getClasses","make","xDelta","yDelta","alignmentsOn","alignmentsOff","insetNortheast","insetNorthwest","insetNorth","insetSoutheast","insetSouthwest","insetSouth","insetEast","insetWest","nu$4","onDirection","isLtr","isRtl","getDirection","Attribute","isBottomToTopDir","BottomToTop","schema$y","get$4","defaultLtr","defaultRtl","defaultBottomLtr","defaultBottomRtl","dirElement","isBottomToTop","customLtr","layouts","ls","onLtr","customRtl","onRtl","ltr","onBottomLtr","rtl","onBottomRtl","HotspotAnchor","anchorInfo","hotspot","overrides","MakeshiftAnchor","adt$7","screen","absolute","point","toAbsolute","sum","points","sumAsAbsolute","positions","absolute$1","getRootPoint","frame","frameOwner","compOwner","getBox","pointed","calcNewAnchor","optBox","rootPoint","onNone","onRelative","onFixed","topLeft","sumAsFixed","layoutsLtr","showAbove","layoutsRtl","NodeAnchor","nodeBox","SimRange","soffset","finish","foffset","adt$6","before","after","Situ","situ","adt$5","domRange","exact","SimSelection","exactFromRange","simRange","getWin","selection","rng","startContainer","startSitu","_finishSitu","_soffset","_finish","_foffset","getStart","range","relativeToNative","finishSitu","createRange","setStartBefore","setStart","setStartAfter","setEndBefore","setEnd","setEndAfter","setFinish","exactToNative","toRect","adt$4","fromRange","startOffset","endContainer","endOffset","diagnose","ranges","getRanges","collapsed","rev","doDiagnose","asLtrRange","FocusInsideModes","api","getOption","nodeValue","NodeValue","elementsWithCursorPosition","isCursorPosition","hasCursorPosition","trim","descendantRtl","descendants","querySelectorAll","all$3","makeRange","same","readRange","rangeCount","firstRng","getRangeAt","lastRng","doGetExact","anchorNode","focusNode","focus_1","anchorOffset","focusOffset","getExact","getSelection","getNativeSelection","sel","getFirstRect","rects","getClientRects","getFirstRect$1","getBounds$1","getBounds$2","point$1","descendOnce$1","last","get$3","descendOnce","getAnchorSelection","modStart","modFinish","SelectionAnchor","selectionBox","optRect","rawRect","targetElement","labelPrefix$1","eastX","westX","northY$1","southY$1","southeast$1","southwest$1","northeast$1","northwest$1","allRtl","SubmenuAnchor","submenuInfo","AnchorSchema","submenu","makeshift","TransitionSchema","PositionSchema","PlacementSchema","place","anchoring","placee","lastPlace","overrideOptions","simple","positionWithin","posState","placementSpec","boxElement","boundsBox","positionWithinBounds","placeeDetail","anchorage","placeeState","oldVisibility","getFixedOrigin","getRelativeOrigin","newState","doPlace","vis","PositionApis","getMode","pConfig","_pState","reset","reset$2","PositioningState","Positioning","fireDetaching","fireAttaching","attach$1","replaceChildren","newChildren","childComp","detachChildren$1","deleted","attach","attachWith","insertion","doDetach","detach","parent$1","detachChildren","attachSystem","guiSystem","attachSystemWith","inserter","detachSystem","rebuild","sandbox","sConfig","sState","_data","getAttachPoint","built","open$1","onOpen","close$1","onClose","isOpen$1","_sandbox","_sConfig","isOpen","cloak","_sState","sink","cssKey","store","cloakVisibilityAttr","decloak","hasPosition","oldValue","restore","SandboxApis","open","openWhileCloaked","transaction","close","isPartOf","getState","setContent","ActiveSandbox","sandboxConfig","sandboxState","SandboxSchema","SandboxState","contents","Sandboxing","dismissPopups","repositionPopups","mouseReleased","schema$x","receivingChannel$1","rawSpec","isExtraPart","fireEventInstead","fe","schema$w","receivingChannel","doReposition","onLoad$5","repConfig","repState","onLoad","onUnload$2","onUnload","RepresentApis","setValue","getValue","ActiveRepresenting","resetOnDom","_se","memory$1","isNotSet","dataset","dataByValue","dataByText","lookup","itemString","update","items","currentDataByValue","currentDataByText","newDataByValue","newDataByText","meta","RepresentState","memory","manual","setValue$2","onSetValue","DatasetStore","getDataKey","getFallbackEntry","initialValue","ManualStore","_repState","MemoryStore","initVal","RepresentSchema","Representing","setValueFrom","source","forbidden","_v","get$2","dump","augment","SketchBehaviours","_placeholder","adt$3","single","multiple","isSubstituted","scan","compSpec","placeholders","uiType","newSpec","subPlaceholder","substitute","req","childSpecs","substituted","valuesThunk","preprocess","preprocessor","substitutePlaces","ps","ph","replacements","used","substituteAll","single$2","placeholder","adt$2","external","optional","fFactory","sketch","fSchema","fName","fPname","typeSpec","fGroupSchema","fDefaults","fOverrides","requiredSpec","externalSpec","optionalSpec","groupSpec","asNamedPart","part","name$1","convert","adtConstructor","partSchema","external$1","PartType","asCommon","combine","partSpec","partValidated","defaults","generate$3","np","g","doGenerateOne","pname","generateOne$1","schemas","names","substitutes","internals","externals","factory","_partSpec","_partValidated","units","u","components$1","getPart","partKey","getPartOrDie","getParts","partKeys","system","pk","getAllParts","pUid","_k","getAllPartNames","getPartsOrDie","defaultUids","baseUid","partTypes","partNames","pn","defaultUidsSchema","AlloyParts","generate","generateOne","asRawOrDie","partSchemas","partUidsSchemas","baseS","composite$1","specWithUid","supplyUid","partUidsSchema","hasUid","singleSchema","compositeSchema","rawConfig","extraApis","configFields","single$1","composite","partFields","inside","ComposeApis","getCurrent","composeConfig","_composeState","find","ComposeSchema","Composing","nativeDisabled","onLoad$1","disableConfig","disableState","disabled","disable$1","enable$1","hasNative","useNative","nativeDisable","nativeEnable","ariaDisable","ariaEnable","_disableState","disableClass","onDisabled","onEnabled","isDisabled","nativeIsDisabled","ariaIsDisabled","DisableApis","enable","disable","ActiveDisable","DisableSchema","Disabling","dehighlightAllExcept","hConfig","hState","skip","highlighted","highlightClass","skipComp","onDehighlight","highlight","isHighlighted","onHighlight","queryTarget","getByIndex","itemClass","getFirst","_hState","getLast","getDelta$2","selected","dest","getCandidates","HighlightApis","dehighlightAll","dehighlight","highlightFirst","firstComp","highlightLast","lastComp","highlightAt","highlightBy","getHighlighted","getPrevious","getNext","HighlightSchema","Highlighting","BACKSPACE","TAB","ENTER","ESCAPE","SPACE","LEFT","UP","RIGHT","DOWN","cyclePrev","tryPrev","cycleNext","tryNext","inSet","which","and","preds","isShift","shiftKey","isControl","ctrlKey","isNotShift","rule","classification","reportFocusShifting","prevFocus","dom$2","focusee","highlights","initialState","typical","infoSchema","stateInit","getKeydownRules","getKeyupRules","optFocusIn","processKey","getRules","keyingConfig","keyingState","transitions","rules","onFocusHandler","focusInside","OnFocusMode","focusIn","keyboardEvents","isEnterOrSpace","OnEnterOrSpaceMode","tryGoInsideComponent","create$6","cyclicField","tabbingConfig","visibilitySelector","_tabbingState","tabstops","visibles","firstTabstop","findInitial","focusManager","goFromTabstop","stopIndex","cycle","useTabstopAt","isTabstop","cyclic","findCurrent","tabstop","navigate","onEscape","onEnter","AcyclicType","CyclicType","defaultExecute","doDefaultExecute","stopEventForFirefox","_component","schema$v","execute$4","executeConfig","execute","ExecutionType","_executeState","spaceExec","useSpace","enterExec","useEnter","downExec","useDown","execKeys","useControlEnter","flatgrid$1","dimensions","numRows","numColumns","setGridSize","getNumRows","getNumColumns","KeyingState","flatgrid","useH","movement","move","use","west$1","moveLeft","moveRight","east$1","useV","north$1","south$1","move$1","isHidden$1","locateVisible","locate","findIndex","withGrid","numCols","address","newIndex","row","column","cycleHorizontal$1","oldRow","oldColumn","colsInRow","newColumn","cycleVertical$1","newRow","newCol","schema$u","focusIn$3","gridConfig","_gridState","first","doMove$2","gridState","identified","handleTab","captureTab","moveLeft$3","moveRight$3","moveNorth$1","moveSouth$1","getKeydownRules$4","findCurrent$1","getKeyupRules$4","FlatgridType","horizontal","tryCycle","schema$t","execute$2","flowConfig","focusIn$2","_state","getInitial","moveLeft$2","moveRight$2","doMove$1","flowState","executeOnMove","doEscape","getKeyupRules$3","FlowType","_flowState","westMovers","allowVertical","eastMovers","toCell","matrix","rowIndex","columnIndex","cell","cycleHorizontal","startCol","deltaCol","newColIndex","cycleVertical","colIndex","startRow","deltaRow","nextRowIndex","colsInNextRow","nextColIndex","moveHorizontal","moveVertical","schema$s","focusIn$1","matrixConfig","previousSelector","selectors","doMove","ifCycle","ifMove","cycles","inRow","cellsInRow","allRows","rows","toMatrix","moveNorth","moveSouth","getKeydownRules$2","getKeyupRules$2","MatrixType","schema$r","menuConfig","moveUp","moveDown","getKeydownRules$1","menuState","moveOnTab","getKeyupRules$1","MenuType","schema$q","SpecialType","specialInfo","onSpace","onShiftEnter","onShiftTab","onTab","onUp","onDown","onLeft","onRight","stopSpaceKeyup","acyclic","flow","execution","menu","special","Keying","keyConfig","keyState","sendFocusIn","isFlatgridState","insert","replaceConfig","childSpec","replaceState","removee","foundChild","_replaceConfig","replaceAt","replaceeIndex","replacer","replacee","appendAt","ReplaceApis","append","appendee","prepend","prependee","replaceBy","replaceePred","Replacing","eventHandlers","events$d","focus$2","focusConfig","ignore","onFocus","FocusApis","blur","blur$1","isFocused","ActiveFocus","tabindex","stopMousedown","FocusSchema","Focusing","updateAriaState","toggleConfig","toggleState","ariaInfo","aria","updateClass","toggleClass","toggle$2","set$1","ToggleApis","toggle","isOn","ActiveToggle","executor","load","toggleOnExecute","updateExpanded","status","ToggleSchema","pressed","syncWithExpanded","checked","expanded","Toggling","pointerEvents","onClick","events$a","optAction","hoverEvent","focusEvent","onHover","onFocus$1","hover","focus$1","schema$p","toggling","hasSubmenu","itemBehaviours","tConfig","ignoreFocus","schema$o","owner$2","parts$h","schema$n","focusWidget","widget","onHorizontalArrow","autofocus","setSource","_widget","widgetBehaviours","itemSchema$2","separator","parts$g","itemInfo","builder","unit","fakeFocus","markers","schema$m","grid","movementInfo","rowSelector","Menu","_spec","_externals","menuBehaviours","selectedItem","role","trace","byItem","byMenu","triggerItem","triggerMenu","generate$2","menus","expansions","menuItems","menuPaths","_triggerItem","extractPreparedMenu","prep","LayeredState","primary","directory","getTriggerData","menuValue","getItemByValue","getPreparedMenu","getTriggeringItem","triggeringItemValue","triggeredItem","triggeredMenu","triggeringItem","triggeringPath","lookupMenu","lookupItem","itemValue","setMenuBuilt","menuName","setContents","sPrimary","sMenus","sExpansions","sPaths","expand","refresh","collapse","otherMenus","menuValues","getPrimary","getMenus","isClear","getTriggeringPath","extraPath","revPath","menuIndex","collapseItem$1","tieredMenu","collapseMenu","tmenu","highlightPrimary","repositionMenus","_rawUiSpec","ExpandHighlightDecision","submenuParentItems","layeredState","setup","componentMap","primaryName","makeSketch","nbMenu","buildMenus","toDirectory","getItemValue","_container","_menuName","setActiveMenu","mv","closeOthers","others","backgroundMenu","stayInDom","updateAriaExpansions","parentItems","itemComp","getSubmenuParents","updateMenuPath","latestMenuName","menuPrep","activeMenu","expandRight","HighlightSubmenu","activeMenuPrep","buildIfRequired","onOpenSubmenu","collapseLeft","onCollapseMenu","keyOnItem","getSource","onExecute","onOpenMenu","highlightImmediately","navigateOnHover","updateView","HighlightParent","getActiveItem","currentItem","maybeActivePrimary","allMenus","preparedMenus","extractMenuFromContainer","primaryMenu","onRepositionMenu","tmenuBehaviours","_keyInfo","selectedMenu","tieredData","singleData","collapseItem","InlineView","showWithin","thing","showWithinBounds","lazySink","showMenuWithinBounds","menuSpec","menuSandbox","getSubmenuLayouts","triggeringPaths","isFirstTierSubmenu","submenuTriggers","st","submenuLayouts","makeMenu","showAt","showMenuAt","hide","getContent","inlineBehaviours","getRelated","isPartOfRelated","onShow","onHide","fireDismissalEventInstead","fireRepositionEventInstead","westEdgeX","middleX","eastEdgeX","northY","southY","centreY","lookupPreserveLayout","preserve","lookupFlippedLayout","flip$2","global$f","Button","lookupAttr","buttonBehaviours","roleAttrs","getModAttributes","record","isSketchSpec","anyInSystem","asSpec","global$e","rtlTransform","defaultIconName","defaultIcon","icons","getIconName","lcName","rtlName","addToEnd","ensureTrailing","lookupIcon","get$1","iconProvider","addFocusableBehaviour","svg","renderIcon$2","iconName","fallbackIcon","rtlIconClasses","needsRtlTransform","iconHtml","render$3","notificationIconMap","warning","Notification","iconNames","memBannerText","translationProvider","renderPercentBar","percent","renderPercentText","memBannerProgress","progress","updateProgress","updateText","banner","iconChoices","icon","level","memButton","onAction","notificationIconSpec","closeButton","NotificationManagerImpl","editor","extras","uiMothership","sharedBackstage","backstage","shared","settings","closeCallback","hideCloseButton","timeout","notificationWrapper","notification","progressBar","providers","getSink","header","isPositionedAtTop","contentArea","getContentAreaContainer","win$1","moveTo","moveRel","notificationSpec","anchorOverrides","layoutDirection_1","getLayoutDirection","nodeAnchor","anchors","nuText","getEl","notifications","getArgs","ItemResponse","rate","cancel","throttle","global$d","repeatLeft","rootNode","isBlock","getContentEditable","isBoundary","backwards","create$5","getNode","getDoc","extractContents","insertNode","elm","normalize","last$1","setCursorLocation","getEnd","getText","isWhitespace","chr","stripTriggerChar","triggerCh","findStart","initRange","minChars","getParent","getRoot","char","charAt","findChar","cloneRange","lastIndexOf","triggerChar","getContext","createRng","selectNode","AutocompleterEditorEvents","onKeypress","redirectKeyToItem","getItem","getView","isActive","cancelIfNecessary","isMenuOpen","stopImmediatePropagation","isProcessingAction","global$c","toLast","isText","toLeaf","isElement$1","isStartOfWord","isPreviousCharContent","lookup$2","getDatabase","database","getRng","triggerChars","getTriggerContext","context","lookupWithContext","fetchOptions","startText","autocompleters","lookupByChar","autocompleter","lookupData","ac","fetch","maxResults","then","matchText","columns","highlightOn","separatorMenuItemSchema","autocompleterItemSchema","autocompleterSchema","baseToolbarButtonFields","toolbarButtonSchema","createToolbarButton","baseToolbarToggleButtonFields","toggleButtonSchema","createToggleButton","contextBarFields","contextButtonFields","contextToggleButtonFields","launchButtonFields","launchToggleButtonFields","toggleOrNormal","contextformbutton","contextformtogglebutton","contextFormSchema","contextToolbarSchema","register$b","popups","ui","registry","getAll","popup","stringArray","datasetValues","dv","ToolbarMode","ItemResponse$1","navClass","selectableClass","colorClass","presetClasses","normal","color","tickedClass","iconClass","textClass","caretClass","activeClass","containerClass","containerRowClass","classForPreset","presets","forMenu","hasIcons","menuClasses","dom$1","chunk","rowDom","chunks","preprocessCollection","isSeparator","allSplits","currentSplit","forCollection","initItems","_hasIcons","_item","menuHasIcons","handleError","createHorizontalPartialMenuWithAlloyItems","_columns","_presets","structure","createPartialMenuWithAlloyItems","forSwatch","forToolbar","cardImageFields","cardImageSchema","cardTextFields","cardTextSchema","itemSchema$1","cardimage","cardtext","cardcontainer","cardContainerSchema","commonMenuItemFields","cardMenuItemSchema","choiceMenuItemSchema","baseFields","insertTableFields","colorSwatchFields","fancyMenuItemSchema","inserttable","colorswatch","menuItemSchema","nestedMenuItemSchema","toggleMenuItemSchema","detectSize","margin","selectorClass","descendants$1","columnLength","thisTop","cTop","abs","ceil","namedEvents","SimpleBehaviours","ExclusivityChannel","ShowTooltipEvent","HideTooltipEvent","hideAllExclusive","_tConfig","_tState","TooltippingApis","setComponents","tState","specs","getTooltip","tooltip","ActiveTooltipping","tooltipConfig","clearTooltip","clearTimer","resetTimer","isShowing","tooltipDom","tooltipComponents","setTooltip","show","TooltippingSchema","Tooltipping","global$b","global$a","getHeightSetting","getParam","getElement","getWidthSetting","DOM","getStyle","getMinWidthSetting","getMinHeightSetting","getMaxWidthSetting","getMaxHeightSetting","isMenubarEnabled","isToolbarEnabled","toolbar","isToolbarTrue","isToolbarString","isToolbarObjectArray","isMultipleToolbars","getMultipleToolbarsSetting","toolbars","toolbarArray","ToolbarLocation","getToolbarMode","_a$1","getToolbarLocation","auto","isToolbarLocationBottom","fixedContainerTarget","inline","fixedContainerSelector","fixedToolbarContainerTarget","useFixedContainer","getUiContainer","isDistractionFree","isStickyToolbar","getMenubar","getAnchorTop","getAnchorBottom","ReadOnlyChannel","ReadOnlyDataSchema","broadcastReadonly","uiComponents","readonly","outerContainer","mothership","setupReadonlyModeSwitch","isReadOnly","setMode","receivingConfig","DisablingConfigs","runWithApi","getApi","onControlAttached","editorOffCell","onDestroy","onSetup","onControlDetached","onMenuItemExecute","itemResponse","triggersSubmenu","CLOSE_ON_EXECUTE","menuItemEventOrder","componentRenderPipeline","renderCommonItem","providersbackstage","optComponents","buildData","global$9","convertText","mac","alt","ctrl","shift","access","shortcut","updated","segment","renderIcon$1","renderText","renderHtml","renderStyledText","renderShortcut","renderCheckmark","renderColorStructure","providerBackstage","baseDom","itemText","ariaLabel","iconSvg","iconContent","title","renderItemDomStructure","domTitle","renderItemStructure","providersBackstage","renderIcons","iconSpec","leftIcon","checkmark","checkMark","textRender","htmlContent","shortcutContent","caret","renderNormalItemStructure","tooltipBehaviour","tooltipWorker","_tooltip","replaceText","encoded","encode","encodeText","escapedMatchRegex","RegExp","escape","render$2","directionClass","alignClass","align","valign","getValignClass","renderContainer","src","renderImage","shouldHighlight","cardText","parts$f","hexColour","shorthandRegex","longformRegex","isHexString","hex","normalizeHex","numChars","removeFromStart","removeLeading","toUpperCase","extractValues","longForm","hexString","m","getLongForm","splitForm","exec","toHex","fromRgba","rgbaColour","red","green","blue","round$1","rgbRegex","rgbaRegex","alpha","isRgbaComponent","fromHsv","hsv","hue","saturation","brightness","side","chroma","fromHex","fromStringValues","fromString","rgbaString","rgbMatch","rgbaMatch","rgba","fireResizeContent","fire","hsvColour","fromRgb","minRGB","maxRGB","hsvToHex","anyToHex","canvas","canvasContext","clearRect","fillStyle","fillRect","getImageData","global$8","storageName","FocusMode","choiceItem","defaultColors","colorCache","storageString","localstorage","cache","idx","splice","unshift","pop","setItem","ColorCache","hasCustomColors$1","getColors$2","unmapped","getColorMap","colorMap","colors","mapColors","addColor","fallbackColor","getColorCols$1","defaultCols","sqrt","calcCols","getColorCols$2","getAdditionalColors","hasCustom","applyColor","format","onChoice","colorPickerDialog","dialog","colorOpt","execCommand","getColors$1","getFetch$1","callback","setIconColor","splitButtonApi","newColor","setIconFill","registerTextColorButton","lastColor","addSplitButton","select","optCurrentRgb","getParents","getCurrentColor","currentRgb","currentHex","_splitButtonApi","onItemAction","fireTextColorChange","registerTextColorMenuItem","addNestedMenuItem","getSubmenuItems","fancytype","isValid","initialData","colorpicker","windowManager","buttons","_api","details","onSubmit","getData","alert","onCancel","createPartialChoiceMenu","onItemValueHandler","alloyItems","createChoiceItems","itemPresets","useText","isSelected","setActive","setDisabled","renderChoiceItem","deriveMenuMovement","menuMarkers","getColorItems","useCustomColors","initData","allowCustomColors","colorinput","hasCustomColors","getColors","cellOverEvent","cellExecuteEvent","makeCell","col","labelId","se","makeComponents","cells","cellRow","makeLabelText","fancyMenuItems","sizeLabelId","makeCells","emptyLabelText","memLabel","selectedRow","selectedColumn","selectCells","getColorCols","widgetSpec","autocomplete","separator$3","nested","downwardsCaret","renderSubmenuCaret","toggle$1","fancy","render","card","createMenuItemFromBridge","isHorizontalMenu","parseForHorizontalMenu","menuitem","createNestedMenuItem","createToggleMenuItem","createSeparatorMenuItem","createFancyMenuItem","createAutocompleteItems","createCardMenuItem","createAutocompleterItem","createPartialMenu","createItem","itemHasIcon","createTieredDataFrom","partialMenu","Autocompleter","activeAutocompleter","processingAction","hideIfNecessary","lastElement","getAutocompleters","display","matchLength","ld","focusMode","ContentFocus","createMenuFrom","newContext","doLookup","lookupInfo","commenceIfNecessary","combinedItems","choices","itemMeta","nr","autocompleterApi","reload","BUBBLE_TO_SANDBOX","autocompleterUiApi","hasPlugin","closest","DelayedFunction","fun","ref","schedule","getTouch","touches","monitor","startData","longpressFired","longpress$1","touch","distX","distY","isFarEnough","fireIfReady","setup$d","rawSettings","stopBackspace","tapEvent","simpleEvents","tapStopped","pasteTimeout","onPaste","onKeydown","isDangerous","onFocusIn","bindFocus","focusoutTimeout","onFocusOut","bindBlur","derive","rawTarget","adt$1","stopped","resume","complete","doTriggerHandler","eventType","isStopped","isCut","fromSource","handlerInfo","eventHandler","doTriggerOnUntilStopped","listeners","_logger","fromExternal","listener","triggerOnUntilStopped","EventRegistry","registerId","extraArgs","curryArgs","unregisterId","handlersById","_eventName","filterByType","broadcastHandler","isAboveRoot","findHandler","Registry","readOrTag","unregister","tagId","register","conflict","failOnDuplicate","getById","Container","domWithoutAttributes","containerBehaviours","takeover","domEvents","triggerUntilStopped","_alloyId","triggerHandler","broadcast$1","broadcastData","receivers","receiver","schema$l","parts$e","excludeFactory","FormField","fieldBehaviours","descriptor","descriptorId","getField","getLabel","ActiveTabstopping","tabConfig","tabAttr","TabstopSchema","Tabstopping","global$7","renderFormFieldWith","pLabel","pField","extraClasses","extraBehaviours","renderFormFieldSpecWith","renderFormFieldDomWith","renderLabel$2","formChangeEvent","formCloseEvent","formCancelEvent","formActionEvent","formSubmitEvent","formBlockEvent","formUnblockEvent","formTabChangeEvent","formResizeEvent","renderCollection","runOnItem","tgt","collectionEvents","currentActive","iterCollectionItems","applyAttributes","childElm","htmlLines","mapItemName","encodeAllRaw","schema$k","focusBehaviours","selectOnFocus","setSelectionRange","inputBehaviours","inputAttributes","inputStyles","inputClasses","Input","exports$1","module","exports","define","require","global","amd","globalThis","EphoxContactWrapper","commonjsGlobal","promise","setTimeoutFunc","Promise","TypeError","_handled","_value","_deferreds","doResolve","deferred","_immediateFn","cb","onFulfilled","onRejected","reject","finale","thisArg","_unhandledRejectionFn","Handler","done","reason","ex","prom","remaining","race","setImmediate","_setImmediateFn","_setUnhandledRejectionFn","promisePolyfill","boltExport","HighlightOnOpen","Promise$1","nu$3","baseFn","callbacks","nCallback","isReady","cbs","LazyValue","pure","errorReporter","make$5","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","Future","ariaElements","isAriaElement","markValid","invalidConfig","invalidClass","notify","notifyInfo","getContainer","validHtml","onValid","markInvalid","invalidState","onInvalid","_invalidState","validatorInfo","validate","onValidate","valid","InvalidateApis","isInvalid","ActiveInvalidate","onEvent","validateOnLoad","InvalidateSchema","Invalidating","validation","CouplingApis","getCoupled","coupleConfig","coupleState","getOrCreate","CouplingSchema","CouplingState","coupled","Coupling","partType$1","kernel","colorFn","getAnchor","getHotspot","getAnchorOverrides","mapFetch","onOpenSync","highlightOnOpen","processed","futureData","fetcher","getLazySink","tdata","HighlightFirst","openF","_onOpenSync","_highlightOnOpen","togglePopup","matchWidth","useMinWidth","buttonWidth","set$6","sinkDetail","internalSink","lazySinkFn","doRepositionMenus","makeSandbox$1","ariaOwner","sandboxClasses","sandboxBehaviours","sandboxFields","schema$j","parts$d","Dropdown","switchToMenu","HighlightNone","triggerExecute","dropdownBehaviours","ActiveUnselecting","unselectable","Unselecting","colorInputChangeEvent","colorSwatchChangeEvent","colorPickerCancelEvent","renderColorInput","colorInputBackstage","inputValue","span","emitSwatchChange","colorBit","memColorButton","renderPanelButton","colorPicker","valueOpt","colorButton","_field","labelPart","edgePart","model","edgeActions","det","mouseIsDown","tlEdgePart","tedgePart","trEdgePart","redgePart","brEdgePart","bedgePart","blEdgePart","ledgePart","thumbPart","spectrumPart","getValueFromEvent","spectrum","SliderParts","sliderChangeEvent","getEventSource","evt","isTouchEvent$2","touchEvent","mouseEvent","minX","minY","min1X","min1Y","max1X","max1Y","xRange","yRange","halfX","halfY","step","stepSize","snap","snapToGrid","snapStart","rounded","hasEdge","edgeName","hasLEdge","hasREdge","hasTEdge","hasBEdge","currentValue","xValue","yValue","xyValue","fireSliderChange$3","reduceBy","increaseBy","capValue","findValueOf","hasMinEdge","hasMaxEdge","minBound","maxBound","screenRange","capMin","capMax","findOffsetOf","initValue","extraValue","remainder","adjustment","rawSteps","maxSteps","snapValueOf","findOffsetOfValue$2","maxOffset","centerMinEdge","centerMaxEdge","getBoundsProperty","getMinXBounds","getMaxXBounds","getMinYBounds","getMaxYBounds","getXScreenRange","getYScreenRange","getCenterOffsetOf","componentMinEdge","componentMaxEdge","spectrumMinEdge","getXCenterOffSetOf","componentBounds","spectrumBounds","getYCenterOffSetOf","fireSliderChange$2","sliderValue$2","findValueOfOffset$1","handleMovement$2","moveBy$2","findPositionOfValue$1","slider","minEdge","maxEdge","minOffset","findOffsetOfValue$1","onLeft$2","onRight$2","onUp$2","onDown$2","edgeActions$2","HorizontalModel","sliderVal","setToMin","setToMax","findValueOfOffset","findPositionOfValue","setPositionFromValue","thumb","edges","getSpectrum","getLeftEdge","getRightEdge","thumbRadius","fireSliderChange$1","sliderValue$1","handleMovement$1","moveBy$1","findOffsetOfValue","onLeft$1","onRight$1","onUp$1","onDown$1","edgeActions$1","VerticalModel","getTopEdge","getBottomEdge","fireSliderChange","sliderValue","handleMovement","isVerticalMovement","moveBy","TwoDModel","mX","mY","xPos","yPos","thumbXRadius","thumbYRadius","Slider","getThumb","modelDetail","choose","wasDown","onChoose","onDragStart","onDragEnd","sliderBehaviours","onChange","changeValue","getInitialValue","onInit","resetToMin","resetToMax","fieldsUpdate","sliderUpdate","paletteUpdate","owner$1","schema$i","getPartName$1","make$4","formBehaviours","form","resPs","resPThunk","pName","Form","fSpec","fieldParts","validInput","invalidInput","validatingInput","translatePrefix","rgbFormFactory","getClass","onValidHexx","onInvalidHexx","invalidation","renderTextField","description","helptext","comps","concats","copyRgbToForm","rgb","memPreview","updatePreview","preview","rgbFormSketcher","setValueRgb","onInvalidInput","onValidRgb","hexField","copyRgbToHex","onValidInput","isHexInputEvent","onValidHex","formPartStrings","redStrings","greenStrings","blueStrings","hexStrings","updateHex","copyHexToRgb","paletteFactory","_translate","setColour","ctx","grdWhite","createLinearGradient","addColorStop","grdBlack","saturationBrightnessPaletteSketcher","_detail","_thumb","_slider","setHue","_apis","setPaletteHue","setThumb","setPaletteThumb","makeFactory","colourPickerSketcher","updates","rgbForm","onInvalidHex","sbPalette","hueDegreesToSlider","paletteRgba","paletteHue","memSlider","sliderFactory","memPalette","memRgb","updatePalette","_hex","palette","updateFields","updateSlider","updatePaletteThumb","runUpdates","updateState","hexToHsv","oldHue","newHsv","newHex","onPaletteUpdate","hueSliderToDegrees","oldRgb","oldHsv","onSliderUpdate","ComposingConfigs","mem","english","translate$1","getEnglishText","global$6","global$5","processors","withComp","optInitialValue","getter","setter","withElement","RepresentingConfigs","rawProcessors","other","rawValue","postprocess","renderDropZone","actions","onDrop","transferEvent","handleFiles","dataTransfer","files","onSelect","allowedImageFileTypes","explode","getSetting","file","filterByExtension","memInput","accept","beforeObject","afterObject","craftWithClasses","outline","craft","triggerTab","targetComp","isPseudoStop","platformNeedsSandboxing","renderIFrame","isSandbox","sandboxed","sourcing","cachedValue","_frameComponent","frameComponent","contentWindow","getDynamicSource","create$4","resize$3","clone$1","tCanvas","get2dContext","drawImage","getWidth$1","image","naturalWidth","getHeight$1","naturalHeight","dataUriToBlob","uri","mimetype","base64","sliceSize","byteCharacters","atob","bytesLength","slicesCount","byteArrays","sliceIndex","begin","end","bytes","charCodeAt","Uint8Array","Blob","dataUriToBlobSync","canvasToBlob","quality","HTMLCanvasElement","toBlob","toDataURL","blobToCanvas","blobUrl","URL","createObjectURL","Image","removeListeners","loaded","blobToImage","revokeImageUrl","revokeObjectURL","create$3","getCanvas","initialType","getType","toAdjustedDataURL","canvasToDataURL","toBase64","toAdjustedBlob","toAdjustedBase64","dataurl","toCanvas","fromBlob","reader","FileReader","onloadend","readAsDataURL","blobToDataUri","fromCanvas","clamp","parsedValue","DELTA_INDEX","multiply","matrix1","matrix2","out","colorFilter","ir","applyColorFilter","pixels","pixelsData","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","applyMatrix","putImageData","applyConvoluteFilter","pixelsIn","pixelsOut","pIn","pOut","aMatrix","halfSide","drgba","cy","cx","scx","innerOffset","wt","complexAdjustableColorFilter","matrixAdjustFn","adjust","invert$1","basicColorFilter","brightness$1","contrast$1","colorize$1","adjustR","adjustG","adjustB","adjustColors","sharpen$1","convoluteFilter","gamma$1","pow","applyLookup","filterImpl","scale","dW","dH","sW","sH","wRatio","hRatio","scaleCapped","scaled","_scale","ceilWithPrecision","precision","mul","upper","applyRotate","angle","rad","PI","sin","cos","newWidth","newHeight","rotate","applyFlip","axis","applyCrop","invert","sharpen","gamma","contrast","flip","flip$1","crop","crop$1","resize$1","newCanvas","resize$2","rotate$1","renderIcon","iconsProvider","renderIconFromPack","renderReplacableIconFromPack","renderLabel$1","internalToolbarButtonExecute","toolbarButtonEventOrder","updateMenuText","updateMenuIcon","renderCommonDropdown","optMemDisplayText","optMemDisplayIcon","onLeftOrRightInMenu","dropdown","tooltipAttributes","translatedTooltip","displayText","displayIcon","isSeparator$1","separator$2","unwrapReferences","realItems","isMenuItemReference","getFromItem","isExpandingMenuItem","submenuItems","getFromExpandingItem","itemWithValue","generateValueIfRequired","newData","mainMenu","submenus","getMenuButtonApi","renderMenuButton","_comp","getFetch","getButton","getMenuItemAction","storage","orig","getMenuItemSetup","renderCommonSpec","actionOpt","common","domFinal","renderIconButtonSpec","renderIconButton","iconButtonSpec","renderButtonSpec","translatedText","borderless","renderButton","buttonSpec","getAction","buttonType","renderFooterButton","isMenuFooterButtonSpec","menuButtonSpec","fixedSpec","memButton_1","isNormalFooterButtonSpec","renderDialogButton","schema$h","coupledPart","selfName","otherName","lock","onLockedChange","parts$c","locked","lockClass","FormCoupledInputs","coupledFieldBehaviours","field1Name","field1","field2Name","field2","getField1","getField2","getLock","parseSize","sizeText","convertUnit","inInch","noSizeConversion","_input","makeRatioConverter","currentFieldText","otherFieldText","cValue","oValue","cSize","oSize","ratioSizeConversion","renderSizeInput","converter","ratioEvent","makeIcon","pLock","formGroup","getFieldPart","isField1","widthField","heightField","_lock","newSize","unitDec","numText","formatSize","optCurrent","optOther","value1","value2","internal","undo","redo","zoom","back","swap","tempTransform","transformApply","saveState","renderEditPanel","imagePanel","createButton","createIconButton","disableAllComponents","eventcomp","enableAllComponents","panelDom","noop$1","emit$1","emitDisable","emitEnable","emitTransform","getBackSwap","memContainer","ButtonPanel","emitTransformApply","createBackButton","button","createSpacer","createApplyButton","cropPanelComponents","getRect","hideCrop","CropPanel","memSize","constrain","resizePanelComponents","sizeInput","makeResizeTransform","ResizePanel","makeValueTransform","horizontalFlip","verticalFlip","counterclockwiseRotate","clockwiseRotate","flipRotateOnAction","operation","emitTempTransform","flipRotateComponents","FlipRotatePanel","makeSlider","makeVariableSlider","valTransform","createVariableFilterPanel","filterPanelComponents","variableFilterPanelComponents","FilterPanel","BrightnessPanel","ContrastPanel","GammaPanel","makeColorTransform","colorize","makeColorSlider","redOpt","memRed","blueOpt","memBlue","greenOpt","memGreen","colorizePanelComponents","ColorizePanel","getTransformPanelEvent","panel","sharpenTransform","invertTransform","buttonPanelComponents","_anyInSystem","showCrop","measurements","getMeasurements","getApplyButton","global$4","global$3","global$2","updateWithTouchData","changedTouches","isTouchEvent$1","DragHelper","_c","eventOverlay","downButton","startX","startY","handleEvents","overlayEvents","sugarDoc","handleElement","getElementById","docSize","scrollWidth","scrollHeight","getDocumentSize","screenX","screenY","cursor","drag","deltaX","deltaY","CropRect","currentRect","viewPortRect","clampRect","containerElm","dragHelpers","handles","xMul","yMul","deltaW","deltaH","blockers","getRelativeRect","outerRect","innerRect","moveRect","startRect","instance","setInnerRect","repaint","updateElementRect","newRect","setRect","relativeRect","cropContainer","blocker","blockerElm","cropBlocker","handleElm","cropHandle","handleFocus","activeHandle","moveAndBlock","keyCode","SPACEBAR","toggleVisibility","elems","setClampRect","getInnerRect","setViewPortRect","helper","renderImagePanel","initialUrl","memBg","zoomState","cropRect","rectState","viewRectState","repaintImg","img","panelW","panelH","bg","cRect","updateSrc","url","aImg","lastViewRect","viewRect","inflate","zoomFit","currentZoom","newZoom","setButtonEnabled","enabled","Delimiter","makeState","canUndo","canRedo","blobState","tempState","undoStack","removed","setBlobState","createState","destroyState","destroyTempState","addBlobState","states","getBlobState","getTempState","updateTempState","newTempState","addTempState","applyTempState","postApply","temp","currentState","getHistoryStates","undoEnabled","redoEnabled","renderImageTools","updateButtonUndoStates","historyStates","sideBar","imageResultToBlob","block","unblock","editPanel","applyButton","blobManipulate","blobToImageResult","catch","manipulate","currentUrl","memUndo","memRedo","renderSideBar","_oImg","tempManipulate","manipulateApply","disableUndoRedo","isSingleListItem","dataAttribute","fetchItems","dropdownComp","selectedValue","findItemByValue","HtmlSelect","initialValues","selectClasses","selectAttributes","selectBehaviours","baseInputBehaviours","multiline","validatingBehaviours","vl","inputMode","inputmode","classname","extraClasses2","flex","maximized","ActiveStreaming","streamConfig","streamState","processor","stream","streams","cancelEvent","_config","setTimer","StreamingState","StreamingSchema","streamInfo","sInfo","throttler","onStream","stopEvent","Streaming","setValueFromItem","itemData","setCursorAtEnd","setSelectionOn","attemptSelectOver","selectsOver","inputDisplay_1","getDisplayText","setSelectionToEnd","itemExecute","schema$g","parts$b","previewing","populateFromBrowse","typeahead","Typeahead","navigateList","highlighter","focusBehaviours$1","responseTime","previousValue_1","pv","sandboxIsOpen","openClass","onItemExecute","dismissOnBlur","typeaheadBehaviours","wrap","bindFuture","resA","bindResult","mapResult","foldResult","whenError","whenValue","withTimeout","errorThunk","timedOut","nu$1","worker","FutureResult","separator$1","toMenuItem","staticMenuItem","filteredTargets","targets","toMenuItems","filterLinkTargets","headerTargets","linkInfo","anchorTargets","anchorTargetTop","anchorTop","anchorTargetBottom","anchorBottom","filterByQuery","term","lowerCaseTerm","getItems","fileType","urlBackstage","urlInputValue","getLinkInformation","history","historyTargets","getHistory","errorId","make$2","factories","bar","interpreter","renderBar","collection","alertbanner","iconTooltip","renderAlertBanner","renderInput","textarea","renderTextarea","backstageShared","renderLabel","iframe","iframeSpec","makeIframe","checkbox","repBehaviour","toggleCheckboxHandler","className","memIcons","renderCheckbox","colourPickerFactory","memPicker","picker","dropzone","renderGrid","listbox","initialItem","sketchSpec","listBoxWrap","renderListBox","selectbox","translatedOptions","chevron","selectWrap","renderSelectBox","sizeinput","urlinput","updateHistory","urlEntry","addToHistory","filetype","memUrlBox","_newValue","getValidationHandler","memInvalidIcon","invalidComp","completer","_menu","_entry","errId","memStatus","optUrlPicker","getUrlPicker","browseUrlEvent","memUrlPickerButton","componentData","urlData","fieldname","chosenData","renderUrlInput","customeditor","editorApi","memReplaced","ta","isOldCustomEditor","scriptId","scriptUrl","ea","cvalue","ed","htmlpanel","imagetools","table","renderTh","renderTd","renderTr","renderTable","renderPanel","noFormParts","interpretInForm","oldBackstage","newBackstage","interpretParts","bubbleAlignments$2","valignCentre","alignCentre","alignLeft","alignRight","getInlineDialogAnchor","contentAreaElement","lazyAnchorbar","lazyUseEditableAreaAnchor","getBannerAnchor","getCursorAnchor","bodyElement","getNodeAnchor$1","getAnchors","isToolbarTop","useFixedToolbarContainer","inlineDialog","ColorInputBackstage","isDraggableModal","isDraggableModal$1","DialogBackstage","defaultStyleFormats","mapFormats","userFormats","fmt","customFormats","formats","isInlineFormat","isBlockFormat","isSelectorFormat","formatNameWithPrefix","getStyleFormats","getUserStyleFormats","registeredUserFormats","registerFormats","formatter","registerCustomFormats","isMergeStyleFormats","processBasic","isSelectedFor","getPreviewFor","formatterSpec","getStylePreview","register$8","doEnrich","newItems","enrichMenu","getStyleItems","enrichSupported","formatName","customSpec","newItem","enrichCustom","init$8","parseStyle","getCssText","settingsFormats","settingsFlattenedFormats","eventsFormats","eventsFlattenedFormats","replaceSettings","_e","enriched","modifications","fromSettings","fromEvents","getFlattenedKeys","hasContentEditableState","isElement","contentEditable","isContentEditableTrue","isContentEditableFalse","create$1","getElementText","innerText","isValidAnchor","isAnchor","isEditable","isHeader","isChildOfContentEditableTrue","isValidHeader","headerTarget","headerId","getOrGenerateId","getLevel","anchorTarget","anchorId","anchorText","getTargetElements","elms","hasTitle","LinkTargets","getHeaderTargets","getAnchorTargets","STORAGE_KEY","isHttpUrl","isRecordOfUrlArray","getAllHistory","unparsedHistory","SyntaxError","itemsWithoutUrl","setAllHistory","isTruthy","makeMap","getPicker","getFilePickerCallback","getPickerSetting","pickerTypes","optFileTypes","getFilePickerTypes","optLegacyTypes","getFileBrowserCallbackTypes","optTypes","_picker","types","getPickerTypes","getTextSetting","UrlInputBackstage","noTypeaheadUrls","getFilePickerValidatorHandler","entry","init$7","contextMenuState","getDockingMode","setDockingMode","HeaderBackstage","interpretWithoutForm","styleselect","isContextMenuOpen","setContextMenuState","parts$a","partType","schema$f","itemsPart","parts$9","CustomList","_external","shell","getListContainer","listBehaviours","setItems","itemComps","numListsRequired","numListsToAdd","itemsToAdd","makeItem","itemsToRemove","builtLists","setupItem","schema$e","parts$8","Toolbar","getGroupContainer","toolbarBehaviours","setGroups","groups","setup$a","isDocked$2","getBehaviours$1","StaticHeader","isDocked","getBehaviours","getOffsetParent","offsetParent$1","getOrigin","morphAdt","static","appear","contextualInfo","transitionClass","fadeOutClass","fadeInClass","disappear","isVisibleForModes","isBottomCompletelyVisible","isTopCompletelyVisible","getPrior","getInitialPos","revertToOriginal","clearInitialPos","offsetBox_1","_left","_top","_right","_bottom","morphToFixed","getModes","setInitialPos","storePrior","winBox","top_1","isTop","getMorph","morphToOriginal","morphToStatic","setDocked","onUndocked","morphToCoord","onDocked","updateVisibility","morphToDocked","contextual","contextInfo","lazyContext","isPartiallyVisible","setVisible","resetInternal","getMorphToOriginal","morph","refresh$4","lazyViewport","refreshInternal","DockingApis","setModes","ActiveDocking","dockInfo","dockState","onShown","onHidden","DockingSchema","Docking","docked","visible","initialBounds","toolbarHeightChange","visibility","editorStickyOnClass","editorStickyOffClass","isDockedMode","updateIframeContentFlow","parentElem","padding","parentWidth","getOccupiedHeight","updateSinkVisibility","sinkElem","updateEditorClasses","editorContainer","focusedElm","runOnSinkElement","onDockingSwitch","additionalBehaviours","getIframeBehaviours","headerHeight","boxHeight","topBound","headerElem","focusedElem","ownerDoc","activeElm","rootElm","findFocusedElem","getStickyToolbarOffset","StickyHeader","lazyHeader","containerHeader","viewHeight","innerHeight","scrollPos","markerElement","markerPos","markerHeight","markerTop","markerBottom","editorHeaderPos","editorHeaderHeight","editorHeaderTop","editorHeaderBottom","editorHeaderDockedAtTop","editorHeaderDockedAtBottom","scrollFromBehindHeader","groupToolbarButtonSchema","baseMenuButtonFields","MenuButtonSchema","createMenuButton","splitButtonSchema","SilverMenubar","setMenus","newMenus","activeButton","hoveredButton","activeComp","hoveredComp","prev","getAnimationRoot","slideConfig","getDimensionProperty","dimension","getDimension","disableTransitions","shrinkingClass","growingClass","setShrunk","closedClass","setGrown","doImmediateShrink","slideState","_calculatedSize","setCollapsed","onStartShrink","onShrunk","doStartShrink","calculatedSize","doStartSmartShrink","doStartGrow","wasShrinking","beforeSize","fullSize","setExpanded","onStartGrow","isGrowing","_slideState","isShrinking","SlidingApis","isExpanded","grow","shrink","immediateShrink","hasGrown","hasShrunk","isCollapsed","isTransitioning","toggleGrow","ActiveSliding","onGrown","SlidingSchema","Sliding","schema$d","getPartName","make$1","getSlotNames","onSlot","def","slot","doShowing","_key","hideSlot","hideSlots","showSlot","getSlot","hideAllSlots","slotBehaviours","slotApis","SlotContainer","sSpec","sidebarSchema","makePanels","panelConfigs","bridged","createSidebar","sidepanel","optSidePanelSpec","sidePanelSpec","makeSidebar","slotContainer","whichSidebar","sidebar","fixSize","autoSize","BlockingApis","getBusySpec","blockerBehaviours","blockSpec","isBlocked","onBlock","blockWith","onUnblock","BlockingSchema","Blocking","getAttrs","focusBusyComponent","throbber","toggleThrobber","tabIndexAttr","dataTabIndexAttr","iframeElement","tabIndex","toggleEditorTabIndex","_root","_behaviours","getBusySpec$1","throbberFocus","busyComp","setup$7","lazyThrobber","throbberState","stealFocus","isFocusEvent","targetElm","editorManager","command","setEditorTimeout","within","withinWidth","apportion","total","parray","generate$1","toUnit","partition","overflower","divide","tryFit","fitLast","overflow","fitAll","setGroups$1","storedGroups","bGroups","refresh$2","setOverflow","builtGroups","overflowGroup","focusedComp","availableWidth","overflows","schema$c","schema$b","parts$7","expandable","setMax","schema$a","parts$6","toggledClass","toolbarSandbox","bounder","FloatingToolbarButton","makeSandbox","getToolbar","schema$9","parts$5","ToolbarGroup","tgroupBehaviours","itemSelector","buildGroups","refresh$1","memFloatingToolbarButton","overflowGroups","floatingToolbarButton","SplitFloatingToolbar","getOverflowBounds","overflowToggledClass","splitToolbarBehaviours","getOverflow","schema$8","parts$4","onClosed","onOpened","toggleToolbar","overf","SplitSlidingToolbar","toolbarToggleEvent","_button","doSetGroups","renderToolbarGroupCommon","toolbarGroup","renderToolbarGroup","getToolbarbehaviours","toolbarSpec","modeName","onAttached","initGroups","renderMoreToolbarCommon","cyclicKeying","renderFloatingMoreToolbar","baseSpec","moreDrawerData","headerBounds","docElem","docBounds","overflowXOffset","renderSlidingMoreToolbar","renderToolbar","scrolling","partMenubar","partMultipleToolbar","_mToolbar","tc","_index","partToolbar","renderer","sliding","floating","toolbarFactory","lazyToolbar","lazyMoreButton","partHeader","sticky","partSocket","partSidebar","partThrobber","OuterContainer","getSocket","setSidebar","toggleSidebar","getHeader","setToolbar","setToolbars","mToolbar","refreshToolbar","toggleToolbarDrawer","isToolbarDrawerToggled","getThrobber","focusToolbar","setMenubar","menubar","focusMenubar","grps","grp","renderedToolbars","defaultMenus","edit","tools","help","parseItemsString","identifyMenus","rawMenuData","userDefinedMenus","validMenus","isDefaultMenu","menuData","removedMenuItems","getRemovedMenuItems","itemName","removedMenuItem","fireSkinLoaded","_skinLoaded","fireSkinLoaded$1","initialized","loadStylesheet","stylesheetUrl","styleSheetLoader","unload","loadUiSkins","skinUrl","loadShadowDomUiSkins","loadSkin","isInline","skin","skinName","documentBaseURI","baseURL","getSkinUrl","contentCSS","isSkinDisabled","fireSkinLoadError$1","fireSkinLoadError","onSetupFormatToggle","boundCallback","binding","formatChanged","once","onSetupEvent","handleEvent","onActionToggleFormat$1","rawItem","undoManager","transact","onActionExecCommand","generateSelectItems","_editor","generateItem","response","si","invalid","validateItems","preItems","getCurrentValue","shouldHide","createMenuItems","createSelectButton","getComponent","decimalDigits","exponentPart","unsignedDecimalLiteral","ResizeTypes","buildBasicSettingsDataset","settingName","delimiter","rawFormats","SemiColon","alignMenuItems","getSpec$4","_format","alignment","canApply","systemStackFonts","splitFonts","fontFamily","fonts","font","getSpec$3","systemFont","getMatchingValue","getFirstFont","queryCommandValue","matchOpt","isSystemFontStack","legacyFontSizes","keywordFontSizes","toPt","fontSize","factor","getSpec$2","_loop_1","pt","legacy","toLegacy","Space","findNearest","getStyles","getSpec$1","fallbackFormat","getSpec","getFormatItems","flattenedItems","ActiveReflecting","reflectingConfig","reflectingState","renderComponents","newComponents","channel","rawData","ReflectingApis","reflectState","ReflectingSchema","ReflectingState","Reflecting","schema$7","arrowPart","arrow","buttonPart","btn","splitDropdown","parts$3","SplitDropdown","executeOnButton","buttonEvents","splitDropdownBehaviours","getButtonApi","getToggleApi","getTooltipAttributes","focusButtonEvent","renderCommonStructure","_d","renderCommonToolbarButton","specialisation","itemApi","buttonApi","toolbarButtonBehaviours","renderToolbarButtonWith","bonusEvents","renderToolbarToggleButtonWith","fetchChoices","defaultToolbar","renderFromBridge","bridgeBuilder","togglebutton","menubutton","splitbutton","displayChannel","underlinePath","setIconStroke","buttonComp","renderSplitButton","grouptoolbarbutton","TopToBottom","identifyButtons","renderFloatingToolbarButton","allowToolbarGroups","styleSelectButton","createStyleSelect","fontsizeSelectButton","createFontsizeSelect","fontSelectButton","createFontSelect","formatButton","createFormatSelect","alignMenuButton","createAlignSelect","bespokeButtons","fontsizeselect","fontselect","formatselect","createToolbar","toolbarConfig","groupsStrings","filteredItemGroups","subItem","removeUnusedDefaults","isToolbarGroupSettingArray","lookupButton","toolbarItem","prefixes","extractFrom","toolbarGroups","rawUiConfig","toolbarButtonsConfig","detection","isiOS12","Iframe","lastToolbarWidth","eTargetNode","targetNode","uiRoot","attachSystemAfter","innerWidth","initialDocEle","lastWindowDimensions","lastDocumentDimensions","resizeWindow","outer","resizeDocument","docEle","inner","fireScrollContent","elementLoad","setupEvents$1","socket","limit","unbinder","addCommand","_ui","addQueryValueHandler","toolbarMode","iframeContainer","parseToInt","numToPx","calcCappedSize","minSize","maxSize","minOverride","maxOverride","getHeightWithFallback","baseHeight","minHeight","getHeight","getWidth","baseWidth","minWidth","InlineHeader","floatContainer","isSticky","editorMaxWidthOpt","headerBackstage","isSplitToolbar","calcToolbarOffset","tbar","repositionPopups$1","updateChromeUi","resetDocking","bodyMargin","targetBounds","updateChromePosition","floatContainerComp","updateMode","updateUi","currentMode","newMode","toolbar_1","toolbarHeight","docHeight","calcMode","verticalDir","setupMode","addClass","removeClass","getTargetPosAndBounds","Inline","toolbarPersist","isToolbarPersist","uiContainer","prevPosAndBounds","resizeContent","prevPos","prevBounds","hasResized","setupEvents","nodeChanged","hideContextToolbarEvent","runOnExecute","formApi","getFormApi","renderContextToggleButton","renderContextButton","buildInitGroups","commands","findPrimary","mementos","asSpecs","compInSystem","ContextForm","isVerticalOverlap","threshold","getSelectionBounds","leaf$1","getRangeRect","scroll_1","bodyPos","getContextToolbarBounds","toolbarType","viewportBounds","contentAreaBox","toolbarOrMenubarEnabled","getHorizontalBounds","isToolbarLocationTop","headerBox","isToolbarBelowContentArea","isToolbarAbove","containerBounds","getVerticalBounds","bubbleAlignments$1","inset","shouldUseInsetLayouts","determineInsetLayout","contextbar","selectionBounds","isSameAnchorElement","isEntireElementSelected","currentPosition","preservePosition","isReposition","getAnchorSpec$2","mobile","smartInsetLayout","newAnchor","getInsetLayouts","matchTargetWith","ctxs","toolbarApi","contextToolbars","contextForms","matchStartNode","nodeCandidates","editorCandidates","nodeMatches","editorMatches","doesPositionExist","filterToolbarsByPosition","hasSelectionToolbars","hasNodeToolbars","nodeToolbars","selectionToolbars","filterByPositionForStartNode","matchAncestor","startNode","scopes","ancestorElem","inNodeScope","findPosition_1","basePosition","filterByPositionForAncestorNode","categorise","forms","inEditorScope","formNavigators","lookupTable","registerForm","contextForm","launch","registerToolbar","contextToolbar","forwardSlideEvent","backSlideEvent","changeSlideEvent","resizingClass","register$7","registryContextToolbars","lastTrigger","lastContextPosition","currentWidth","newContents","oldContents","forwardContents","canLaunchToolbar","shouldContextToolbarHide","contextToolbarBounds","anchorBounds","getAnchorElementBounds","hideOrRepositionIfNecessary","contextBarEle","wrapInPopDialog","shortcuts","getScopes","alloySpec","buildToolbar","allButtons","default","buildContextToolbarGroups","buildContextFormGroups","anchorLayout","getAnchorLayout","launchContext","launchContextToolbar","isSameLaunchElement","rootElem","isOutsideRoot","lookup$1","toolbarKey","unsupportedLength","pattern","dot","accepted","unitRaw","check","isUnit","registerController","getMenuItems","getOptions","hash","oldApi","unbindWatcher","watcher","setCurrent","addMenuButton","onToolbarSetup","onMenuSetup","lineHeightSpec","normalise","register$5","settingsOpt","getContentLanguages","customCode","code","customValue","ele","lang","languageSpec","register$4","alignSelectMenu","fontSelectMenu","styleSelectMenu","formatSelectMenu","fontsizeSelectMenu","onSetupOutdentState","queryCommandState","register$3","addButton","registerButtons$2","onActionToggleFormat","registerButtons$1","_idx","addToggleButton","name_1","registerFormatButtons","registerCommandButtons","registerCommandToggleButtons","register$2","addMenuItem","registerMenuItems$2","onSetupUndoRedoState","register$1","registerMenuItems$1","registerButtons","onSetupVisualAidState","hasVisual","registerToolbarButton","addToggleMenuItem","registerMenuItems","setup$6","cmd","register$6","applyFormat","removeFormat","registerCommands","lastForeColor","lastBackColor","register$a","isTouchEvent","transposeContentAreaContainer","containerPos","getPos","dx","dy","transpose","getPointAnchor","pageX","pageY","fromPageXY","fromClientXY","getSelectionAnchor","getAnchorSpec$1","anchorType","getNodeAnchor","initAndShow$1","buildMenu","contextmenu","anchorSpec","bubbleAlignments","getAnchorSpec","initAndShow","openiOS_1","originalSelection","selectionReset","setRng","unbindEventListeners","preventMousedown","clearSelectionReset","setupiOSOverrides","touch_1","rngRect","isTouchWithinSelection","patchPipeConfig","shouldNeverUseNative","getContextMenu","defaultItems","contextMenus","makeContextItem","commonMenuItem","addContextMenuGroup","groupItems","lastMenuItem","isTriggeredByKeyboard","pointerType","getSelectedElement","setup$5","hideContextMenu","showContextMenu","isNativeOverrideKeyEvent","isContextMenuDisabled","getAvoidOverlapSelector","getAnchorType","selectedElement","sections","allItems","generateContextMenu","hideEvents","subtract","changes","asFixed","coord","asAbsolute","asOffset","toStyles","stylesOpt","absorb","partialCoord","originalCoord","absorbOne","stencil","optX","optY","parseAttrToInt","NaN","getCoords","snapInfo","snapsInfo","leftAttr","topAttr","moveOrSnap","newCoord","mustSnap","findClosestSnap","findSnap","fixedCoord","spanned","stopDrag","findMatchingSnap","snaps","sensor","inRange","coord1","coord2","withinRange","getSnapPoints","bestSnap","deltas","getDeltas","bestDeltas","DraggingApis","snapTo","dragConfig","getTarget","repositionTarget","origin_1","snapPin","snapTo$1","initialAttribute","instigate","anyComponent","zindex","changeZIndex","discard","zIndex","resetZIndex","createComponent","blockerClass","blockerEvents","SnapSchema","schema$6","getCurrentCoord","oc","location","calcNewCoord","optSnaps","currentCoord","coords","absoluteCoord","newCoords","offset$1","clampCoords","translated","snapping","onSensor","calcStartData","dragState","dragMode","dragStartData","getStartData","dlt","onDrag","dragBy","updateStartState","setStartData","MouseData","getDelta","events$2","stop$1","delayDrop","dragApi","drop","forceDrop","init$2","schema$5","TouchData","getDataFrom","events$1","blockerSingleton","stopBlocking","init$1","mouse","mouseOrTouch","DraggingBranches","DragState","previous","dragEvent","nuData","calculateDelta","Dragging","dragger","calcSnap","selectorOpt","td","snapWidth","selectorHandle","sensorLeft","sensorTop","getSnapsConfig","cellOpt","currentTd","isSameCell","createSelector","setup$4","tlTds","brTds","startCell","finishCell","getTopLeftSnap","memTopLeft","getBottomRightSnap","memBottomRight","topLeftSnaps","bottomRightSnaps","bottomRight","getSnapConfig","isAbove","isBelow","cellRect","viewportHeight","aboveViewport","belowViewport","showOrHideHandle","snapTopLeft","snapBottomRight","otherCells","upOrLeftCells","downOrRightCells","isHidden","renderElementPath","newPathElements","divider","newPath","parents","parent_1","isDefaultPrevented","isPropagationStopped","updatePath","_btn","newAcc","resize","resizeType","originalHeight","originalWidth","Both","getDimensions","dim","fireResizeEditor","keyboardHandler","renderResizeHandler","None","Vertical","getResizeType","_target","renderStatusbar","getTextComponents","replaceCountText","words","characters","currentVal","wordCount","renderWordCount","resizeHandler","getComponents","setup$3","isGridUiContainer","sinkSpec","reactiveWidthSpec","lazyOuterContainer","platformClasses","deviceClasses","isToolbarBottom","dirAttributes","verticalDirAttributes","resizeUiMothership","memAnchorBar","statusbar","socketSidebarContainer","hasMultipleToolbar","hasToolbar","hasMenubar","editorComponents","containerComponents","opacity","border","addQueryStateHandler","ship","fireDismissPopups","onTouchstart","onTouchmove","onTouchend","onMousedown","onMouseup","onContentClick","onContentMouseup","onContentMousedown","loopEditor","relatedTarget","onWindowScroll","onWindowResize","onEditorResize","onEditorProgress","onDismissPopups","setup$b","setEditorSize","parsedHeight","parsedWidth","getWidthWithFallback","renderUI","sidebars","handleToggle","setup$8","getToolbarGroups","toolbarGroupButtonConfig","addGroupToolbarButton","toolbarOpt","getUi","broadcastAll","schema$2","basic","parts$2","dragBlockClass","getDragBounds","ModalDialog","dialogComp","modalEventsId","externalBlocker","blockerDom","getFooter","setIdle","setBusy","modalBehaviours","labelledElement","labelElement","describedElement","describeElement","describeId","dialogToggleMenuItemSchema","dialogToggleMenuItemDataProcessor","baseFooterButtonFields","dialogFooterButtonFields","normalFooterButtonFields","menuFooterButtonFields","dialogFooterButtonSchema","submit","alertBannerFields","alertBannerSchema","buttonFields","buttonSchema","checkboxFields","checkboxSchema","checkboxDataProcessor","formComponentFields","formComponentWithLabelFields","collectionFields","collectionSchema","collectionDataProcessor","colorInputSchema","colorInputDataProcessor","colorPickerSchema","colorPickerDataProcessor","customEditorFields","defaultedPostMsg","customEditorFieldsOld","customEditorSchema","customEditorDataProcessor","dropZoneSchema","dropZoneDataProcessor","createGridFields","itemsField","htmlPanelFields","htmlPanelSchema","iframeFields","iframeSchema","iframeDataProcessor","imageToolsFields","imageToolsSchema","inputFields","inputSchema","inputDataProcessor","createLabelFields","listBoxSingleItemFields","listBoxNestedItemFields","desc","getP","thunkOf","listBoxItemSchema","listBoxFields","listBoxSchema","listBoxDataProcessor","selectBoxFields","selectBoxSchema","selectBoxDataProcessor","sizeInputFields","sizeInputSchema","sizeInputDataProcessor","tableFields","tableSchema","textAreaFields","textAreaSchema","textAreaDataProcessor","urlInputFields","urlInputSchema","urlInputDataProcessor","createItemsField","itemSchema","sErr","passValue","panelSchema","panelFields","tabFields","tabPanelFields","tabPanelSchema","dialogButtonFields","dialogButtonSchema","dialogSchema","tabpanel","urlDialogButtonSchema","urlDialogSchema","getAllObjects","isNamedItem","dataProcessors","togglemenuitem","createDataValidator","namedItems","getNamedItems","getDataProcessor","internalDialog","dataValidator","DialogManager","openUrl","redial","toValidValues","renderBodyPanel","memForm","formValue","TabButton","tabButtonBehaviours","schema$1","tabsPart","barDetail","dismissTab$1","tabbar","changeTab$1","clickToDismiss","tabClass","parts$1","Tabbar","tabbarBehaviours","selectedClass","tab","Tabview","tabviewBehaviours","barPart","tabs","viewPart","TabSection","changeTabBy","section","byPred","tabSectionBehaviours","selectFirst","tabValue","tabview","tabWithValue","tabData","onChangeTab","onDismissTab","getViewItems","showTab","tabKey","setTabviewHeight","updateTabviewHeight","dialogBody","maxTabHeight","tablist","documentElement$1","tabviewHeight","currentTabHeight","dialogTopMargin","dialogBottomMargin","getMaxTabviewHeight","getTabview","allTabs","extraEvents","smartTabHeight","tabviewComp","heights","_tab","measureHeights","maxTabHeightOpt","getMaxHeight","oldHeight","naiveTabHeight","SendDataToSectionChannel","SendDataToViewChannel","renderTabPanel","storedValue","updateDataWithForm","formData","validData","currentData","setDataOnForm","oldTab","tabMode","_viewItems","oldName","tsection","dialogChannel","titleChannel","bodyChannel","footerChannel","bodySendMessageChannel","renderBody","ariaAttrs","incoming","isTabPanel","_typeof","Symbol","iterator","_setPrototypeOf","setPrototypeOf","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","_construct","Parent","Class","_toConsumableArray","_arrayLikeToArray","_arrayWithoutHoles","iter","_iterableToArray","minLen","_unsupportedIterableToArray","_nonIterableSpread","arr2","isFrozen","getPrototypeOf","getOwnPropertyDescriptor","seal","create","_ref","thisValue","Func","func","arrayForEach","unapply","forEach","arrayPop","arrayPush","stringToLowerCase","stringMatch","stringReplace","stringIndexOf","stringTrim","regExpTest","typeErrorCreate","_len2","_key2","_len","addToSet","lcElement","object","newObject","lookupGetter","html$1","svg$1","svgFilters","svgDisallowed","mathMl$1","mathMlDisallowed","mathMl","xml","MUSTACHE_EXPR","ERB_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","getGlobal","_createTrustedTypesPolicy","trustedTypes","createPolicy","ATTR_NAME","currentScript","policyName","createHTML","purify","createDOMPurify","DOMPurify","originalDocument","DocumentFragment","HTMLTemplateElement","NodeFilter","_window$NamedNodeMap","NamedNodeMap","MozNamedAttrMap","HTMLFormElement","DOMParser","ElementPrototype","getNextSibling","getChildNodes","getParentNode","template","trustedTypesPolicy","emptyHTML","_document","implementation","createNodeIterator","getElementsByTagName","importNode","documentMode","hooks","createHTMLDocument","PARSER_MEDIA_TYPE","transformCaseFunc","MUSTACHE_EXPR$1","ERB_EXPR$1","DATA_ATTR$1","ARIA_ATTR$1","IS_SCRIPT_OR_DATA$1","ATTR_WHITESPACE$1","IS_ALLOWED_URI$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","tagNameCheck","configurable","enumerable","attributeNameCheck","allowCustomizedBuiltInElements","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","SAFE_FOR_TEMPLATES","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","SUPPORTED_PARSER_MEDIA_TYPES","DEFAULT_PARSER_MEDIA_TYPE","CONFIG","formElement","isRegexOrFunction","testValue","_parseConfig","cfg","ADD_URI_SAFE_ATTR","ADD_DATA_URI_TAGS","ALLOWED_URI_REGEXP","ADD_TAGS","ADD_ATTR","tbody","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","ALL_SVG_TAGS","ALL_MATHML_TAGS","_checkValidNamespace","tagName","namespaceURI","parentTagName","_forceRemove","outerHTML","_removeAttribute","attribute","getAttributeNode","_initDocument","dirty","leadingWhitespace","dirtyPayload","parseFromString","createDocument","_createIterator","SHOW_ELEMENT","SHOW_COMMENT","SHOW_TEXT","_isClobbered","_isNode","_executeHook","entryPoint","currentNode","hook","_sanitizeElements","allowedTags","firstElementChild","_basicCustomElementTest","_isValidAttribute","lcTag","_sanitizeAttributes","hookEvent","attrName","attrValue","keepAttr","allowedAttributes","_attr","forceKeepAttr","setAttributeNS","_sanitizeShadowDOM","shadowNode","shadowIterator","nextNode","sanitize","importedNode","oldNode","returnNode","toStaticHTML","nodeIterator","shadowroot","serializedHTML","doctype","setConfig","clearConfig","isValidAttribute","addHook","hookFunction","removeHook","removeHooks","removeAllHooks","sanitizeHtmlString","hiddenHeader","pClose","pUntitled","pBodyMessage","pFooter","footer","pFooterGroup","startButtons","endButtons","renderDialog$1","dialogClass","blockerBackdropClass","scrollLockClass","extraStyles","dialogEvents","renderClose","renderTitle","renderDragHandle","pTitle","pHandle","draghandle","draggable","renderModalHeader","bs","getEventExtras","lazyDialog","closeWindow","blockEvent","renderModalDialog","mapMenuButtons","mapItems","extractCellsToObject","innerAcc","initCommonEvents","fireApiEvent","_event","SilverDialogEvents","getInstanceApi","withSpec","currentDialog","currentDialogInit","cur","onTabChange","newTabName","oldTabName","footerButtons","buttonGroups","makeGroup","memento","renderFooter","initSpec","makeButton","lookupByName","buttonName","renderModalFooter","getCompByName","form_1","getFormWrapper","getDialogApi","doRedial","menuItemStates","withRoot","instanceApi","valueComp","representedValues","menuItemCurrentState","setData","prevData","mergedData","newInternalData","dialogState","validateData$1","tabSection","dialogInit","renderDialog","bodySpec","renderModalBody","storagedMenuButtons","objOfCells","dialogSize","getDialogSizeClasses","modalAccess","outerForm","renderInlineDialog","titleId","dialogLabelId","dialogContentId","memHeader","memBody","contentId","renderInlineBody","memFooter","renderInlineFooter","global$1","SUPPORTED_MESSAGE_ACTIONS","isSupportedMessage","mceAction","renderUrlDialog","renderIframeBody","iframeUri","base_uri","href","iframeDomain","protocol","port","messageHandlerUnbinder","isSameOrigin","insertContent","handleMessage","isCustomMessage","onMessage","iframeEle","postMessage","sendMessage","inlineAdditionalBehaviours","isStickyToolbar$1","alertDialog","closeDialog","memFooterClose","titleSpec","closeSpec","footerCloseButton","setup$2","confirmDialog","memFooterYes","footerNo","footerYesButton","setup$1","openModalUrlDialog","openModalDialog","internalInitialData","openInlineDialog","config$1","refreshDocking","dialogUi","inlineDialogComp","isAlertOrConfirmDialog","confirm","windowMgr","getWindowManagerImpl","getNotificationManagerImpl"],"sourceRoot":""}