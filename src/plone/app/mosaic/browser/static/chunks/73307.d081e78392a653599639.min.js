"use strict";(self.webpackChunkplone_mosaic=self.webpackChunkplone_mosaic||[]).push([[73307],{73307:function(t,e,n){n.r(e);n(35666);var i,o,s=n(19755),a=n.n(s),r=n(9175),l=n(84109);function p(t,e,n,i,o,s,a){try{var r=t[s](a),l=r.value}catch(t){return void n(t)}r.done?e(l):Promise.resolve(l).then(i,o)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var s=t.apply(e,n);function a(t){p(s,i,o,a,r,"next",t)}function r(t){p(s,i,o,a,r,"throw",t)}a(void 0)}))}}e.default=r.Z.extend({name:"select2",trigger:".pat-select2",parser:"mockup",defaults:{separator:","},initializeValues:function(){var t=this;t.options.initialValues&&(t.options.id=function(t){return t.id},t.options.initSelection=function(e,n){var i=[],o=e.val(),s=t.options.initialValues;"string"==typeof t.options.initialValues&&""!==t.options.initialValues&&("{"===t.options.initialValues[0]?s=JSON.parse(t.options.initialValues):(s={},a()(t.options.initialValues.split(t.options.separator)).each((function(){var t=this.split(":"),e=a().trim(t[0]),n=a().trim(t[1]);s[e]=n})))),a()(o.split(t.options.separator)).each((function(){var t=this;s[this]&&(t=s[this]),i.push({id:l.Z.removeHTML(this),text:l.Z.removeHTML(t)})})),n(i)})},initializeTags:function(){var t=this;t.options.tags&&"string"==typeof t.options.tags&&("["===t.options.tags.substr(0,1)?t.options.tags=JSON.parse(t.options.tags):t.options.tags=t.options.tags.split(t.options.separator)),t.options.tags&&!t.options.allowNewItems&&(t.options.data=a().map(t.options.tags,(function(t,e){return{id:t,text:t}})),t.options.multiple=!0,delete t.options.tags)},initializeOrdering:function(){var t=this;this.options.orderable&&this.$el.on("change",c(regeneratorRuntime.mark((function e(){var i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(51474).then(n.bind(n,51474));case 2:i=(i=e.sent).default,o=t.$select2[0].querySelector(".select2-choices"),new i(o,{draggable:"li",dragClass:"select2-choice-dragging",chosenClass:"dragging",onStart:function(){return t.$el.select2("onSortStart")},onEnd:function(){return t.$el.select2("onSortEnd")}});case 6:case"end":return e.stop()}}),e)}))))},initializeSelect2:(o=c(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=function(t,n){return t?(e.options.debug&&console.debug("callback",t,n),"string"==typeof t&&(t=window[t]),t(n)):t},n.e(80235).then(n.bind(n,80235)),n.e(72298).then(n.bind(n,72298)),t.next=5,n.e(7109).then(n.t.bind(n,7109,23));case 5:(e=this).options.formatResultCssClass=function(t){if(t.id)return"select2-option-"+t.id.toLowerCase().replace(/[ \:\)\(\[\]\{\}\_\+\=\&\*\%\#]/g,"-")},a()(e.el).select2(e.options),e.$el.on("select2-selected",(function(t){i(e.options.onSelected,t)})),e.$el.on("select2-selecting",(function(t){i(e.options.onSelecting,t)})),e.$el.on("select2-deselecting",(function(t){i(e.options.onDeselecting,t)})),e.$el.on("select2-deselected",(function(t){i(e.options.onDeselected,t)})),e.$select2=e.$el.parent().find(".select2-container"),e.$el.parent().off("close.plone-modal.patterns"),e.options.orderable&&e.$select2.addClass("select2-orderable");case 15:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)}),opened:function(){return 1===a()(".select2-dropdown-open",this.$el.parent()).length},init:(i=c(regeneratorRuntime.mark((function t(){var e,n,i,o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this).options.allowNewItems=!e.options.hasOwnProperty("allowNewItems")||JSON.parse(e.options.allowNewItems),e.options.ajax||e.options.vocabularyUrl?(e.options.vocabularyUrl&&(e.options.multiple=void 0===e.options.multiple||e.options.multiple,e.options.ajax=e.options.ajax||{},e.options.ajax.url=e.options.vocabularyUrl,e.options.initSelection=function(t,n){var i=[],o=t.val();a()(o.split(e.options.separator)).each((function(){var t=l.Z.removeHTML(this);i.push({id:t,text:t})})),n(i)}),n="",e.options.ajax=a().extend({quietMillis:300,data:function(t,e){return n=t,{query:t,page_limit:10,page:e}},results:function(t,i){var o=t.results;if(e.options.vocabularyUrl){var s=[];a().each(t.results,(function(t,e){s.push(e.id)})),o=[];var r=""===n||a().inArray(n,s)>=0;e.options.allowNewItems&&!r&&(n=l.Z.removeHTML(n),o.push({id:n,text:n})),a().each(t.results,(function(t,e){o.push(e)}))}return{results:o}}},e.options.ajax)):e.options.multiple&&e.$el.is("select")&&(i=e.$el.val()||[],o=a().map(e.$el.find("option"),(function(t){return{text:a()(t).html(),id:t.value}})),(s=a()('<input type="hidden" />')).val(i.join(e.options.separator)),s.attr("class",e.$el.attr("class")),s.attr("name",e.$el.attr("name")),s.attr("id",e.$el.attr("id")),e.$orig=e.$el,e.$el.replaceWith(s),e.$el=s,e.options.data=o),e.initializeValues(),e.initializeTags(),e.initializeOrdering(),t.next=8,e.initializeSelect2();case 8:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})})}}]);