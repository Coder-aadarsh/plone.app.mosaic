"use strict";(self.webpackChunkplone_mosaic=self.webpackChunkplone_mosaic||[]).push([[29819],{29819:function(o,t,e){e.r(t);e(35666);var a=e(65311),n=e.n(a),i=e(83364);e(40686);function s(o,t){var e="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!e){if(Array.isArray(o)||(e=function(o,t){if(!o)return;if("string"==typeof o)return c(o,t);var e=Object.prototype.toString.call(o).slice(8,-1);"Object"===e&&o.constructor&&(e=o.constructor.name);if("Map"===e||"Set"===e)return Array.from(o);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return c(o,t)}(o))||t&&o&&"number"==typeof o.length){e&&(o=e);var a=0,n=function(){};return{s:n,n:function(){return a>=o.length?{done:!0}:{done:!1,value:o[a++]}},e:function(o){throw o},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,r=!1;return{s:function(){e=e.call(o)},n:function(){var o=e.next();return s=o.done,o},e:function(o){r=!0,i=o},f:function(){try{s||null==e.return||e.return()}finally{if(r)throw i}}}}function c(o,t){(null==t||t>o.length)&&(t=o.length);for(var e=0,a=new Array(t);e<t;e++)a[e]=o[e];return a}function r(o){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},r(o)}function l(o,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var m=function(o){return o.replace(/(_|\.|\/)/g,"-").toLowerCase()},d=function(){function o(t,e){var a,s,c;!function(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),c=function(){var o,t,e,a,s,c,r=this;r.mosaic.layoutManager.disableEditHtmlSource(),o=n()(this);var l=n()(".mosaic-selected-tile",r.mosaic.document);for(l.length>0&&(t=new i.default(l).getType()),e=r.mosaic.options.default_available_actions,a=0;a<r.mosaic.options.tiles.length;a+=1)for(s=r.mosaic.options.tiles[a],c=0;c<s.tiles.length;c+=1)s.tiles[c].name===t&&(e=e.concat(s.tiles[c].available_actions));l.hasClass("removable")||(e=n()(e).filter((function(){return"remove"!==this}))),o.find(".mosaic-option-group").show(),o.find(".mosaic-button").hide(),o.find(".mosaic-menu-format").find(".mosaic-option").hide().attr("disabled","disabled"),n()(o.find(".mosaic-menu-format").find(".mosaic-option").get(0)).show().removeAttr("disabled"),n()(e).each((function(t,e){r.mosaic.actionManager.actions[e]&&!r.mosaic.actionManager.actions[e].visible()||(o.find(".mosaic-button-"+e).show(),o.find(".mosaic-icon-menu-"+e).show(),o.find(".select2-container.mosaic-menu-"+e).show(),o.find(".mosaic-option-"+e).show().removeAttr("disabled"))})),r.mosaic.actionManager.actions.layout.visible()&&n()(".mosaic-button-layout").show(),o.find(".mosaic-menu-insert").children(".mosaic-option-group-fields").children().each((function(){0===r.mosaic.panels.find(".mosaic-"+n()(this).attr("value")+"-tile").length?n()(this).show().removeAttr("disabled"):n()(this).hide().attr("disabled","disabled")})),o.find(".mosaic-option-group").each((function(){0===n()(this).children(":enabled").length&&n()(this).hide()})),!r.mosaic.hasContentLayout&&r.mosaic.options.canChangeLayout?n()(".mosaic-button-savelayout").show():n()(".mosaic-button-savelayout").hide()},(s="SelectedTileChange")in(a=this)?Object.defineProperty(a,s,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[s]=c;this.mosaic=t,this.$el=n()(e)}var t,e,a;return t=o,(e=[{key:"initToolbar",value:function(){var o=this;return o.$el.each((function(){var t,e,a,i,s,c,r,l;for(i in(t=n()(this)).html(""),t.append(n()(document.createElement("div")).addClass("mosaic-inline-toolbar w-100")),(t=t.children(".mosaic-inline-toolbar")).append(n()(document.createElement("div")).addClass("mosaic-toolbar-content d-flex justify-content-between")),a={},(e=t.children(".mosaic-toolbar-content")).append(n()(document.createElement("div")).addClass("mosaic-toolbar-primary-functions d-flex d-grid gap-2")),a.primary_actions=e.children(".mosaic-toolbar-primary-functions"),e.append(n()(document.createElement("div")).addClass("mosaic-toolbar-secondary-functions d-flex d-grid gap-2")),a.secondary_actions=e.children(".mosaic-toolbar-secondary-functions"),a)for(s=0;s<o.mosaic.options[i].length;s+=1)if(void 0===o.mosaic.options[i][s].actions)o.AddControl(a[i],o.mosaic.options[i][s]);else{c=o.mosaic.options[i][s];var d=m(o.mosaic.options[i][s].name),u=n()(document.createElement("div")).addClass("d-flex mosaic-button-group mosaic-button-group-"+d);u.append(o.AddControl(u,n().extend({},!0,c,{action:c.name.toLowerCase(),name:c.name.toLowerCase()})));var p=n()(document.createElement("div")).addClass("btn-container d-flex d-grid gap-2");for(u.append(p),a[i].append(u),r=0;r<c.actions.length;r+=1)o.AddControl(p,c.actions[r])}o._mosaicToolbarLayoutEditor(a),o.mosaic.hasContentLayout&&n()(".mosaic-toolbar-secondary-functions",this).addClass("d-none"),l=function(){var o;parseInt(n()(window).scrollTop(),10)>parseInt(t.parent().offset().top,10)?t.hasClass("mosaic-inline-toolbar")&&(o=t.offset().left,t.width(t.width()).css({left:o,"margin-left":"0px"}).removeClass("mosaic-inline-toolbar").addClass("mosaic-external-toolbar").parent().height(t.height())):t.hasClass("mosaic-external-toolbar")&&t.css({width:"",left:"","margin-left":""}).removeClass("mosaic-external-toolbar").addClass("mosaic-inline-toolbar").parent().css("height","")},n()(window).on("scroll",l),o.SelectedTileChange(),n()(".mosaic-menu").each((function(){n()(this).select2({width:"style",dropdownCssClass:"mosaic-dropdown mosaic-dropdown-"+n()(this).data("action"),dropdownAutoWidth:!0,minimumResultsForSearch:99})}))}))}},{key:"AddControl",value:function(o,t){var e,a=this;void 0!==r(t.menu)&&t.menu?t.icon?(e=n()(document.createElement("label")),o.append(e.addClass("mosaic-icon-menu mosaic-icon-menu-"+m(t.name)+" mosaic-icon").html(t.label).attr("title",t.label).append(n()(document.createElement("select")).addClass("mosaic-menu-"+m(t.name)).data("action",t.action).on("change",(function(){a.mosaic.actionManager.execAction(t.action)})).each((function(){var o,e,a,i=s(t.items);try{for(i.s();!(a=i.n()).done;){var c=a.value;if(void 0!==c.items)for(e in n()(this).append(n()(document.createElement("optgroup")).addClass("mosaic-option-group mosaic-option-group-"+m(c.value)).attr("label",c.label)),o=n()(this).find(".mosaic-option-group-"+m(c.value)),c.items)o.append(n()(document.createElement("option")).attr("value",c.items[e].value).addClass("mosaic-option mosaic-option-"+m(c.items[e].value)).html(c.items[e].label));else n()(this).append(n()(document.createElement("option")).attr("value",c.value).addClass("mosaic-option mosaic-option-"+m(c.value)).html(c.label))}}catch(o){i.e(o)}finally{i.f()}}))))):(e=n()(document.createElement("select")),o.append(e.addClass("mosaic-menu mosaic-menu-"+t.name.replace(/_/g,"-")).data("action",t.action).on("change",(function(){a.mosaic.actionManager.execAction(t.action)})).each((function(){var o,e,a=s(t.items);try{for(a.s();!(e=a.n()).done;){var i=e.value;if(void 0!==i.items){n()(this).append(n()(document.createElement("optgroup")).addClass("mosaic-option-group mosaic-option-group-"+m(i.value)).attr("label",i.label)),o=n()(this).find(".mosaic-option-group-"+m(i.value));var c,r=s(i.items);try{for(r.s();!(c=r.n()).done;){var l=c.value;o.append(n()(document.createElement("option")).attr("value",l.value).addClass("mosaic-option mosaic-option-"+m(l.value)).html(l.label))}}catch(o){r.e(o)}finally{r.f()}}else n()(this).append(n()(document.createElement("option")).attr("value",i.value).addClass("mosaic-option mosaic-option-"+m(i.value)).html(i.label))}}catch(o){a.e(o)}finally{a.f()}})))):"layout"==m(t.name)?(e=n()(document.createElement("div")),o.append(e.addClass("ms-3 d-flex align-items-center me-2 text-secondary mosaic-button mosaic-button-"+m(t.name)+(t.icon?" mosaic-icon":"")).html(t.label))):(e=n()(document.createElement("button")),o.append(e.addClass("btn btn-sm btn-secondary mosaic-button mosaic-button-"+m(t.name)+(t.icon?" mosaic-icon":"")).html(t.label).attr("title",t.label).attr("type","button").data("action",t.action).on("mousedown",(function(){a.mosaic.actionManager.execAction(t.name)})))),a.mosaic.actionManager.actions[t.name]&&(a.mosaic.actionManager.actions[t.name].visible()||e.hide())}},{key:"_mosaicToolbarLayoutEditor",value:function(o){var t,e,a,i,s=this;if(n()(".mosaic-toolbar-secondary-functions",s.$el).removeClass("d-none"),void 0!==s.mosaic.options.formats)for(t=0;t<s.mosaic.options.formats.length;t+=1){for(a=s.mosaic.options.formats[t],o.primary_actions.append(n()(document.createElement("fieldset")).addClass("d-flex d-grid gap-2 btn-group mosaic-button-group mosaic-button-group-"+m(a.name))),i=o.primary_actions.children(".mosaic-button-group-"+a.name.replace(/_/g,"-")),e=0;e<a.actions.length;e+=1)a.actions[e].favorite&&s.AddControl(i,a.actions[e]);0===i.children().length&&i.remove()}if(void 0!==s.mosaic.options.tiles){var c=o.secondary_actions.find(".mosaic-menu-insert");for(t=0;t<s.mosaic.options.tiles.length;t+=1){for(a=s.mosaic.options.tiles[t],c.append(n()(document.createElement("optgroup")).addClass("mosaic-option-group mosaic-option-group-"+m(a.name)).attr("label",a.label)),i=o.secondary_actions.find(".mosaic-option-group-"+m(a.name)),e=0;e<a.tiles.length;e+=1){var r=a.tiles[e];i.append(n()(document.createElement("option")).addClass("mosaic-option mosaic-option-"+m(r.name)).attr("value",r.name).html(r.label))}0===i.children().length&&i.remove()}}if(void 0!==s.mosaic.options.formats){var l=o.secondary_actions.find(".mosaic-menu-format");for(t=0;t<s.mosaic.options.formats.length;t+=1){for(a=s.mosaic.options.formats[t],l.append(n()(document.createElement("optgroup")).addClass("mosaic-option-group mosaic-option-group-"+m(a.name)).attr("label",a.label)),i=o.secondary_actions.find(".mosaic-option-group-"+m(a.name)),e=0;e<a.actions.length;e+=1){var d=a.actions[e];!1===d.favorite&&i.append(n()(document.createElement("option")).addClass("mosaic-option mosaic-option-"+m(d.name)).attr("value",d.name).html(d.label).data("action",d.action))}0===i.children().length&&i.remove()}}}}])&&l(t.prototype,e),a&&l(t,a),Object.defineProperty(t,"prototype",{writable:!1}),o}();t.default=d}}]);
//# sourceMappingURL=29819.f43dd0f0841873523922.min.js.map